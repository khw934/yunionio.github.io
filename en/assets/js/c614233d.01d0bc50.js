"use strict";(self.webpackChunkdocs_new=self.webpackChunkdocs_new||[]).push([[419],{20013:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>a});var i=r(74848),s=r(28453);const t={sidebar_position:4},l="Go \u8bed\u8a00\u4ee3\u7801\u89c4\u8303",o={id:"development/go-convention",title:"Go \u8bed\u8a00\u4ee3\u7801\u89c4\u8303",description:"\u4ee3\u7801\u98ce\u683c",source:"@site/docs/development/go-convention.md",sourceDirName:"development",slug:"/development/go-convention",permalink:"/en/development/go-convention",draft:!1,unlisted:!1,editUrl:"https://github.com/yunionio/website/tree/master/docs/development/go-convention.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Git \u63d0\u4ea4\u5185\u5bb9\u89c4\u8303",permalink:"/en/development/git-convention"},next:{title:"GitHub Issues \u4f7f\u7528\u6307\u5357",permalink:"/en/development/issue-process"}},c={},a=[{value:"\u4ee3\u7801\u98ce\u683c",id:"\u4ee3\u7801\u98ce\u683c",level:2},{value:"\u547d\u540d\u89c4\u5219",id:"\u547d\u540d\u89c4\u5219",level:2},{value:"\u6587\u4ef6\u540d",id:"\u6587\u4ef6\u540d",level:2},{value:"\u5305\u540d (package)",id:"\u5305\u540d-package",level:2},{value:"\u7ed3\u6784\u4f53 (Struct)",id:"\u7ed3\u6784\u4f53-struct",level:2},{value:"\u63a5\u53e3 (Interface)",id:"\u63a5\u53e3-interface",level:2},{value:"\u51fd\u6570\u6216\u65b9\u6cd5",id:"\u51fd\u6570\u6216\u65b9\u6cd5",level:2},{value:"\u5e38\u91cf",id:"\u5e38\u91cf",level:2},{value:"\u53d8\u91cf",id:"\u53d8\u91cf",level:2},{value:"\u53d8\u91cf\u547d\u540d",id:"\u53d8\u91cf\u547d\u540d",level:3},{value:"string\u53d8\u91cf",id:"string\u53d8\u91cf",level:3},{value:"size\u53d8\u91cf\u547d\u540d",id:"size\u53d8\u91cf\u547d\u540d",level:3},{value:"\u58f0\u660e\u8bed\u53e5",id:"\u58f0\u660e\u8bed\u53e5",level:2},{value:"\u51fd\u6570\u6216\u65b9\u6cd5",id:"\u51fd\u6570\u6216\u65b9\u6cd5-1",level:3},{value:"\u63a7\u5236\u8bed\u53e5",id:"\u63a7\u5236\u8bed\u53e5",level:2},{value:"\u884c\u5bbd",id:"\u884c\u5bbd",level:2},{value:"\u51fd\u6570\u95f4\u8ddd",id:"\u51fd\u6570\u95f4\u8ddd",level:2},{value:"Receiver\u6216\u8005\u51fd\u6570\u4f20\u53c2\u7c7b\u578b\uff08by value or by pointer\uff09\u5efa\u8bae",id:"receiver\u6216\u8005\u51fd\u6570\u4f20\u53c2\u7c7b\u578bby-value-or-by-pointer\u5efa\u8bae",level:2},{value:"\u4ee3\u7801\u6ce8\u91ca",id:"\u4ee3\u7801\u6ce8\u91ca",level:2},{value:"\u5bfc\u5165\u6807\u51c6\u5e93\u3001\u7b2c\u4e09\u65b9\u6216\u5176\u5b83\u5305",id:"\u5bfc\u5165\u6807\u51c6\u5e93\u7b2c\u4e09\u65b9\u6216\u5176\u5b83\u5305",level:2},{value:"API\u53c2\u6570\u66b4\u9732",id:"api\u53c2\u6570\u66b4\u9732",level:2},{value:"\u53c2\u8003",id:"\u53c2\u8003",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"go-\u8bed\u8a00\u4ee3\u7801\u89c4\u8303",children:"Go \u8bed\u8a00\u4ee3\u7801\u89c4\u8303"}),"\n",(0,i.jsx)(n.h2,{id:"\u4ee3\u7801\u98ce\u683c",children:"\u4ee3\u7801\u98ce\u683c"}),"\n",(0,i.jsxs)(n.p,{children:["\u5927\u90e8\u5206\u683c\u5f0f\u95ee\u9898\u90fd\u53ef\u4ee5\u901a\u8fc7 ",(0,i.jsx)(n.strong,{children:"gofmt"})," \u89e3\u51b3\uff0cgofmt \u81ea\u52a8\u683c\u5f0f\u5316\u4ee3\u7801\uff0c\u4fdd\u8bc1\u6240\u6709\u7684go\u4ee3\u7801\u4e0e\u5b98\u65b9\u63a8\u8350\u7684\u683c\u5f0f\u4fdd\u6301\u4e00\u81f4\uff0c\u4e8e\u662f\u6240\u6709\u683c\u5f0f\u6709\u5173\u95ee\u9898\uff0c\u90fd\u4ee5gofmt\u7684\u7ed3\u679c\u4e3a\u51c6\u3002\n\u4e0d\u540c\u7684\u7f16\u8f91\u5668\u6709\u4e0d\u540c\u7684\u914d\u7f6e, sublime\u7684\u914d\u7f6e\u6559\u7a0b\uff1a",(0,i.jsx)(n.a,{href:"http://michaelwhatcott.com/gosublime-goimports/",children:"http://michaelwhatcott.com/gosublime-goimports/"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"LiteIDE\u9ed8\u8ba4\u5df2\u7ecf\u652f\u6301\u4e86goimports\uff0c\u5982\u679c\u4f60\u7684\u4e0d\u652f\u6301\u8bf7\u70b9\u51fb\u5c5e\u6027\u914d\u7f6e->golangfmt\u2192\u52fe\u9009goimports\u4fdd\u5b58\u4e4b\u524d\u81ea\u52a8fmt\u4f60\u7684\u4ee3\u7801"}),"\n",(0,i.jsxs)(n.li,{children:["\u4f7f\u7528 vim \u5f00\u53d1\u8bf7\u5b89\u88c5\u63d2\u4ef6\uff1a",(0,i.jsx)(n.a,{href:"https://github.com/fatih/vim-go",children:"https://github.com/fatih/vim-go"}),"  \u6216\u8005 coc.nvim + gopls"]}),"\n",(0,i.jsxs)(n.li,{children:["\u4f7f\u7528 vscode \u5f00\u53d1\u8bf7\u76f4\u63a5\u5b89\u88c5\u91cc\u9762\u7684 Go \u63d2\u4ef6\uff1a",(0,i.jsx)(n.a,{href:"https://github.com/golang/vscode-go",children:"https://github.com/golang/vscode-go"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u547d\u540d\u89c4\u5219",children:"\u547d\u540d\u89c4\u5219"}),"\n",(0,i.jsxs)(n.p,{children:["Go\u8bed\u8a00\u7a0b\u5e8f\u5458\u63a8\u8350\u4f7f\u7528 ",(0,i.jsx)(n.strong,{children:"\u9a7c\u5cf0\u5f0f"})," \u547d\u540d,\u5f53\u540d\u5b57\u6709\u51e0\u4e2a\u5355\u8bcd\u7ec4\u6210\u7684\u65f6\u4f18\u5148\u4f7f\u7528\u5927\u5c0f\u5199\u5206\u9694,\u800c\u4e0d\u662f\u4f18\u5148\u7528\u4e0b\u5212\u7ebf\u5206\u9694\u3002\n\u56e0\u6b64,\u5728\u6807\u51c6\u5e93\u6709 QuoteRuneToASCII \u548c parseRequestLine \u8fd9\u6837\u7684\u51fd\u6570\u547d\u540d,\u4f46\u662f\u4e00\u822c\u4e0d\u4f1a\u7528 quote_rune_to_ASCII \u548c parse_request_line \u8fd9\u6837\u7684\u547d\u540d\u3002\n\u800c\u50cfASCII\u548cHTML\u8fd9\u6837\u7684\u7f29\u7565\u8bcd\u5219\u907f\u514d\u4f7f\u7528\u5927\u5c0f\u5199\u6df7\u5408\u7684\u5199\u6cd5,\u5b83\u4eec\u53ef\u80fd\u88ab\u79f0\u4e3ahtmlEscape\u3001HTMLEscape\u6216escapeHTML,\u4f46\u4e0d\u4f1a\u662fescapeHtml\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u6587\u4ef6\u540d",children:"\u6587\u4ef6\u540d"}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5kerbab\u547d\u540d\u6cd5\u547d\u540d\uff0c\u6bd4\u5982\uff1afoo_bar.go"}),"\n",(0,i.jsx)(n.h2,{id:"\u5305\u540d-package",children:"\u5305\u540d (package)"}),"\n",(0,i.jsx)(n.p,{children:"\u5305\u540d\u4e0e\u5305\u6240\u5728\u7684\u76ee\u5f55\u540d\u4e00\u81f4\u5e76\u5c0f\u5199"}),"\n",(0,i.jsx)(n.h2,{id:"\u7ed3\u6784\u4f53-struct",children:"\u7ed3\u6784\u4f53 (Struct)"}),"\n",(0,i.jsxs)(n.p,{children:["\u4f18\u5148\u4ee5 ",(0,i.jsx)(n.strong,{children:"S"})," \u5f00\u5934\uff0c\u79c1\u6709struct\u540d\u4ee5\u5c0f\u5199 s \u5f00\u5934\n\u9075\u5faaCamelCase(\u9a7c\u5cf0\uff09\u547d\u540d\u6cd5\uff0c\u7531\u6709\u610f\u4e49\u7684\u540d\u8bcd\u7ec4\u5408\u800c\u6210"]}),"\n",(0,i.jsx)(n.h2,{id:"\u63a5\u53e3-interface",children:"\u63a5\u53e3 (Interface)"}),"\n",(0,i.jsx)(n.p,{children:"\u9075\u5faaCamelCase(\u9a7c\u5cf0\uff09\u547d\u540d\u6cd5\n\u4f18\u5148\u4ee5 I \u5f00\u5934\uff0c\u79c1\u6709interface\u540d\u4ee5\u5c0f\u5199 i \u5f00\u5934 , \u6bd4\u5982\uff1aIModelManager"}),"\n",(0,i.jsx)(n.h2,{id:"\u51fd\u6570\u6216\u65b9\u6cd5",children:"\u51fd\u6570\u6216\u65b9\u6cd5"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9075\u5faaCamelCase(\u9a7c\u5cf0\uff09\u547d\u540d\u6cd5\uff0c\u7531\u6709\u610f\u4e49\u7684\u82f1\u6587\u5355\u8bcd\u62fc\u63a5\u800c\u6210"}),"\n",(0,i.jsx)(n.li,{children:"\u82e5\u51fd\u6570\u6216\u65b9\u6cd5\u4e3a\u5224\u65ad\u7c7b\u578b\uff08\u8fd4\u56de\u503c\u4e3b\u8981\u4e3a bool \u7c7b\u578b\uff09\uff0c\u5219\u540d\u79f0\u5e94\u4ee5 Has, Is, Can \u6216 Allow \u7b49\u5224\u65ad\u6027\u52a8\u8bcd\u5f00\u5934\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"func HasPrefix(name string, prefixes []string) bool { ... }\nfunc IsEntry(name string, entries []string) bool { ... }\nfunc CanManage(name string) bool { ... }\nfunc AllowGitHook() bool { ... }\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5fc5\u987b\u4ee5\u52a8\u8bcd\u5f00\u5934\uff0c\u5982Get/Set/Make/Upload\u7b49\uff0c\u4ece\u540d\u5b57\u80fd\u770b\u51fa\u8be5\u65b9\u6cd5\u5b9e\u73b0\u7684\u529f\u80fd"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u5e38\u91cf",children:"\u5e38\u91cf"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5e38\u91cf\u5747\u9700\u4f7f\u7528\u5168\u90e8\u5927\u5199\u5b57\u6bcd\u7ec4\u6210\uff0c\u5e76\u4f7f\u7528\u4e0b\u5212\u7ebf\u5206\u8bcd\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'const APP_VER = "0.7.0.1110 Beta"\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5982\u679c\u662f\u679a\u4e3e\u7c7b\u578b\u7684\u5e38\u91cf\uff0c\u9700\u8981\u5148\u521b\u5efa\u76f8\u5e94\u7c7b\u578b\uff0c\u5e76\u4e14\u4ee5\u5927\u5199 T\uff08\u516c\u5171\u7c7b\u578b\uff09 \u6216\u5c0f\u5199 t\uff08\u79c1\u6709\u7c7b\u578b\uff09 \u5f00\u5934\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'type TScheme string\n \nconst (\n   HTTP  TScheme = "http"\n   HTTPS TScheme = "https"\n)\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5982\u679c\u6a21\u5757\u7684\u529f\u80fd\u8f83\u4e3a\u590d\u6742\u3001\u5e38\u91cf\u540d\u79f0\u5bb9\u6613\u6df7\u6dc6\u7684\u60c5\u51b5\u4e0b\uff0c\u4e3a\u4e86\u66f4\u597d\u5730\u533a\u5206\u679a\u4e3e\u7c7b\u578b\uff0c\u53ef\u4ee5\u4f7f\u7528\u5b8c\u6574\u7684\u524d\u7f00\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"type TPullRequestStatus int\n \nconst (\n   PULL_REQUEST_STATUS_CONFLICT TPullRequestStatus = iota\n   PULL_REQUEST_STATUS_CHECKING\n   PULL_REQUEST_STATUS_MERGEABLE\n)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u53d8\u91cf",children:"\u53d8\u91cf"}),"\n",(0,i.jsx)(n.h3,{id:"\u53d8\u91cf\u547d\u540d",children:"\u53d8\u91cf\u547d\u540d"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9075\u5faaCamelCase(\u9a7c\u5cf0\uff09\u547d\u540d\u6cd5\uff0c\u7531\u6709\u610f\u4e49\u7684\u82f1\u6587\u5355\u8bcd\u62fc\u63a5\u800c\u6210"}),"\n",(0,i.jsx)(n.li,{children:"\u5fc5\u987b\u4e3a\u540d\u8bcd\uff0c\u53d8\u91cf\u547d\u540d\u57fa\u672c\u4e0a\u9075\u5faa\u76f8\u5e94\u7684\u82f1\u6587\u8868\u8fbe\u6216\u7b80\u5199"}),"\n",(0,i.jsxs)(n.li,{children:["\u5728\u76f8\u5bf9\u7b80\u5355\u7684\u73af\u5883\uff08\u5bf9\u8c61\u6570\u91cf\u5c11\u3001\u9488\u5bf9\u6027\u5f3a\uff09\u4e2d\uff0c\u53ef\u4ee5\u5c06\u4e00\u4e9b\u540d\u79f0\u7531\u5b8c\u6574\u5355\u8bcd\u7b80\u5199\u4e3a\u5355\u4e2a\u5b57\u6bcd\uff0c\u4f8b\u5982\uff1a","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"user \u53ef\u4ee5\u7b80\u5199\u4e3a u"}),"\n",(0,i.jsx)(n.li,{children:"userID \u53ef\u4ee5\u7b80\u5199 uid"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"\u82e5\u53d8\u91cf\u7c7b\u578b\u4e3a bool \u7c7b\u578b\uff0c\u5219\u540d\u79f0\u5e94\u4ee5 Has, Is, Enable, Can \u6216 Allow \u5f00\u5934\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"var isExist bool\nvar hasConflict bool\nvar canManage bool\nvar allowGitHook bool\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u4e0a\u6761\u89c4\u5219\u4e5f\u9002\u7528\u4e8e\u7ed3\u6784\u5b9a\u4e49\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'// Webhook represents a web hook object.\ntype Webhook struct {\n   Id           int64 `xorm:"pk autoincr"`\n   RepoID       int64\n   OrgID        int64\n   Url          string `xorm:"url TEXT"`\n   ContentType  HookContentType\n   Secret       string `xorm:"TEXT"`\n   Events       string `xorm:"TEXT"`\n   *HookEvent   `xorm:"-"`\n   IsSSL        bool `xorm:"is_ssl"`\n   IsActive     bool\n   HookTaskType HookTaskType\n   Meta         string     `xorm:"TEXT"` // store hook-specific attributes\n   LastStatus   HookStatus // Last delivery status\n   Created      time.Time  `xorm:"CREATED"`\n   Updated      time.Time  `xorm:"UPDATED"`\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"string\u53d8\u91cf",children:"string\u53d8\u91cf"}),"\n",(0,i.jsx)(n.p,{children:"\u7c7b\u4f3cJava\u7684String\uff0cgolang\u4e2d\u7684string\u4e3aimmutable\u53d8\u91cf\uff0c\u901a\u8fc7concat\u6784\u9020string\u65f6\uff0c\u8bf7\u7528bytes.Buffer\u6216\u8005strings.Builder"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"var buf bytes.Buffer\nbuf.WriteByte('a')\nbuf.WriteString(\"b\")\nreturn buf.String()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"size\u53d8\u91cf\u547d\u540d",children:"size\u53d8\u91cf\u547d\u540d"}),"\n",(0,i.jsx)(n.p,{children:"\u5bb9\u91cf\uff0c\u5927\u5c0f\uff0c\u65f6\u95f4\u7b49\u7684\u53d8\u91cf\uff0c\u4e3a\u4e86\u907f\u514d\u91cf\u7eb2\u7684\u6df7\u6dc6\uff0c\u9700\u8981\u5e26\u4e0a\u5355\u4f4d\u91cf\u7eb2\uff0c\u4f8b\u5982\uff1asizeMb, sizeGb, intervalSeconds\u7b49\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u58f0\u660e\u8bed\u53e5",children:"\u58f0\u660e\u8bed\u53e5"}),"\n",(0,i.jsx)(n.h3,{id:"\u51fd\u6570\u6216\u65b9\u6cd5-1",children:"\u51fd\u6570\u6216\u65b9\u6cd5"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u51fd\u6570\u6216\u65b9\u6cd5\u7684\u53c2\u6570\u6392\u5217\u987a\u5e8f\u9075\u5faa\u4ee5\u4e0b\u51e0\u70b9\u539f\u5219\uff08\u4ece\u5de6\u5230\u53f3\uff09\uff1a","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u7b80\u5355\u7c7b\u578b\u4f18\u5148\u4e8e\u590d\u6742\u7c7b\u578b"}),"\n",(0,i.jsx)(n.li,{children:"\u5c3d\u53ef\u80fd\u5c06\u540c\u79cd\u7c7b\u578b\u7684\u53c2\u6570\u653e\u5728\u76f8\u90bb\u4f4d\u7f6e\uff0c\u5219\u53ea\u9700\u5199\u4e00\u6b21\u7c7b\u578b"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u51fd\u6570\u7981\u6b62\u540c\u65f6\u8fd4\u56de\u7ed3\u679c\u4e3anil, error\u4e5f\u4e3anil, \u4f8b\u5982:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"func FetcNicByMac(mac string) (*SNic, error) {\n    ...\n        return nil, nil // \u7981\u6b62\u6709\u8fd9\u79cd\u8fd4\u56de\n    ...\n    return &SNic{}, nil\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5\u4e0b\u58f0\u660e\u8bed\u53e5\uff0cUser \u7c7b\u578b\u8981\u590d\u6742\u4e8e string \u7c7b\u578b\uff0c\u4f46\u7531\u4e8e Repository \u662f User \u7684\u9644\u5c5e\u54c1\uff0c\u9996\u5148\u786e\u5b9a User \u624d\u80fd\u7ee7\u800c\u786e\u5b9a Repository\u3002\u56e0\u6b64\uff0cUser \u7684\u987a\u5e8f\u8981\u4f18\u5148\u4e8e repoName\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"func IsRepositoryExist(user *User, repoName string) (bool, error) { ...\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u51fd\u6570\u7684\u8fd4\u56de\u503c\u5c3d\u91cf\u907f\u514d\u4f7f\u7528\u547d\u540d\u7684\u51fd\u6570\u8fd4\u56de\u503c\n\u4e3e\u4f8b\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"func findCertEndPosition(certBytes []byte) (endPost int, err error) {\n    endPos = bytes.Index(certBytes, CERT_SEP)\n    if endPos < 0 {\n        err = ErrOutOfRange\n        return\n    }\n    return\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5efa\u8bae\u7684\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"func findCertEndPosition(certBytes []byte) (int, error) {\n    endPos := bytes.Index(certBytes, CERT_SEP)\n    if endPos < 0 {\n        return -1, ErrOutOfRange\n    }\n    return endPos, nil\n}\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9664\u975e\u51fd\u6570\u6267\u884c\u6d41\u7a0b\u786e\u5b9a\u65e0\u9519\u8bef\u53d1\u751f\uff0c\u6216\u8005\u9519\u8bef\u53ef\u4ee5\u786e\u5b9a\u5ffd\u7565\uff0c\u51fd\u6570\u7684\u8fd4\u56de\u503c\u5c3d\u91cf\u643a\u5e26error\u3002\u4ee3\u7801\u6d41\u7a0b\u4e2d\u9047\u5230\u9519\u8bef\u8981\u5c3d\u65e9\u8fd4\u56de\uff0c\u5e76\u4e14\u9664\u975e\u505a\u4e86\u7279\u6b8a\u5904\u7406\uff0c\u9047\u5230\u9519\u8bef\u65f6\u5e94\u8be5\u7acb\u5373\u663e\u5f0f\u8fd4\u56de\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4e3e\u4f8b\uff1a\u4e0d\u5efa\u8bae\u7684\u65b9\u5f0f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'\nfunc findCertEndPosition(certBytes []byte) (int, error) {\n    endPos := bytes.Index(certBytes, CERT_SEP)\n    if endPos < 0 {\n        log.Errorf("find not certEndPost") // find error, but no immediate return\n    }\n    ...\n    return endPos, nil\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u5efa\u8bae\u7684\u65b9\u5f0f\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'func findCertEndPosition(certBytes []byte) (int, error) {\n    endPos := bytes.Index(certBytes, CERT_SEP)\n    if endPos < 0 {\n        log.Errorf("find not certEndPost") // find error and immediately return error\n        return -1, ErrOutOfRange\n    }\n    ...\n    return endPos, nil\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u907f\u514d\u4e0d\u5fc5\u8981\u7684else\u5206\u652f"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u4e3e\u4f8b: \u4e0d\u5efa\u8bae\u7684\u65b9\u5f0f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'func (s *SReadSeeker) Read(p []byte) (int, error) {\n    if s.offset == s.readerOffset && s.offset < s.readerSize {\n        n, err := s.reader.Read(p)\n        if n > 0 {\n            wn, werr := s.tmpFile.Write(p[:n])\n            if werr != nil {\n                return n, werr\n            }\n            if wn < n {\n                return n, errors.Error("sFakeSeeker write less bytes")\n            }\n            s.offset += int64(n)\n            s.readerOffset += int64(n)\n        }\n        return n, err\n    } else {\n        n, err := s.tmpFile.ReadAt(p, s.offset)\n        if n > 0 {\n            s.offset += int64(n)\n        }\n        return n, err\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u5efa\u8bae\u7684\u65b9\u5f0f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'func (s *SReadSeeker) Read(p []byte) (int, error) {\n    if s.offset == s.readerOffset && s.offset < s.readerSize {\n        n, err := s.reader.Read(p)\n        if n > 0 {\n            wn, werr := s.tmpFile.Write(p[:n])\n            if werr != nil {\n                return n, werr\n            }\n            if wn < n {\n                return n, errors.Error("sFakeSeeker write less bytes")\n            }\n            s.offset += int64(n)\n            s.readerOffset += int64(n)\n        }\n        return n, err\n    }\n    n, err := s.tmpFile.ReadAt(p, s.offset)\n    if n > 0 {\n        s.offset += int64(n)\n    }\n    return n, err\n}\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u9664\u975e\u5fc5\u8981\uff0c\u5c3d\u91cf\u907f\u514d\u4f7f\u7528interface",", jsonutils.JSONObject\u7b49\u901a\u7528\u7684\u6570\u636e\u7c7b\u578b\u4f5c\u4e3a\u51fd\u6570\u7684\u8f93\u5165\u53c2\u6570\u548c\u8f93\u51fa\u53c2\u6570\u3002\u5efa\u8bae\u5b9a\u4e49struct\u6216\u8005\u4e13\u95e8\u7684type\u6765\u7ea6\u675f\u53c2\u6570\u7c7b\u578b\uff0c\u4ee5\u5229\u7528\u597dgolang\u7684\u9759\u6001\u7c7b\u578b\u68c0\u67e5\uff0c\u53d1\u73b0\u4f20\u53c2\u9519\u8bef\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u63a7\u5236\u8bed\u53e5",children:"\u63a7\u5236\u8bed\u53e5"}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u975e\u5fc5\u987b\uff0c\u907f\u514d\u4f7f\u7528\u8d85\u8fc73\u4e2a\u5206\u652f\u4ee5\u4e0a\u7684if ... else ... \u5d4c\u5957\uff0c\u8fd9\u79cd\u60c5\u51b5\u5e94\u8be5\u8003\u8651\u4f7f\u7528switch case\u8bed\u53e5\u66ff\u6362\u3002\n\u5c3d\u91cf\u907f\u514d\u4f7f\u7528if\u521d\u59cb\u5316\u8bed\u53e5\uff0c\u9664\u975e\u521d\u59cb\u5316\u8bed\u53e5\u53ea\u6709\u4e00\u4e2a\u5206\u652f\u3002\u7981\u6b62\u4f7f\u7528\u591a\u4e2a\u5206\u652f\u7684if\u521d\u59cb\u5316\u8bed\u53e5\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u4e3e\u4f8b\uff1a\u4e0d\u5efa\u8bae\u7684\u65b9\u5f0f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"if diskId, err := cli.CreateDisk(args.StorageType, args.NAME, args.SizeGb, args.Desc, args.Image); err != nil {\n    return err\n} else if disk, err := cli.GetDisk(diskId); err != nil {\n    return err\n} else {\n    printObject(disk)\n    return nil\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5efa\u8bae\u7684\u65b9\u5f0f:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"diskId, err := cli.CreateDisk(args.StorageType, args.NAME, args.SizeGb, args.Desc, args.Image)\nif err != nil {\n    return err\n}\ndisk, err := cli.GetDisk(diskId)\nif err != nil {\n    return err\n}\nprintObject(disk)\nreturn nil\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u4f7f\u7528range\u5faa\u73af\u679a\u4e3eArray/Slice\u548cMap\u65f6\uff0c\u9700\u8981\u6ce8\u610f\u5728\u5982\u4e0b\u7684\u6a21\u5f0f\u4e2d\uff0c\u53d8\u91cfk, v\u7684\u5185\u5b58\u5730\u5740\u5728\u6bcf\u6b21\u5faa\u73af\u65f6\u90fd\u662f\u540c\u4e00\u4e2a\uff0c\u6bcf\u6b21\u5faa\u73af\u5f00\u59cb\u65f6\u901a\u8fc7\u5185\u5b58\u62f7\u8d1d\uff0c\u5c06\u5bf9\u5e94key\u503c\u548cSlice[k]/Map[k]\u7684\u503c\u62f7\u8d1d\u5230k, v\u7684\u5185\u5b58\u4e2d\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"for k, v := range myMap {\n    // access v\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u8981\u76f4\u63a5\u8bbf\u95eeSlice[k]/Map[k]\u7684\u5185\u5b58\uff0c\u8bf7\u7528\u5982\u4e0b\u65b9\u5f0f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"for k := range myMap {\n    // access &myMap[k]\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5efa\u8bae\uff1a\u4f7f\u7528for...range\u904d\u5386map\u6216slice\u65f6\uff0c\u5982\u679c\u4e0d\u786e\u5b9a\uff0c\u8bf7\u53ea\u5bf9key(for map)\u6216index(for slice)\u8fdb\u884c\u904d\u5386\uff0c\u5728for ...range\u7684body\u91cc\uff0c\u901a\u8fc7map[key]\u6216slice[index]\u8bbf\u95eemap\u6216slice\u91cc\u7684\u5143\u7d20\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u884c\u5bbd",children:"\u884c\u5bbd"}),"\n",(0,i.jsx)(n.p,{children:"\u5c3d\u91cf\u907f\u514d\u5f88\u957f\u7684\u4e00\u884c\u4ee3\u7801"}),"\n",(0,i.jsx)(n.p,{children:"\u4e3e\u4f8b\uff1a\u4e0d\u5efa\u8bae\u7684\u65b9\u5f0f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'func init() {\n    CachedimageManager = &SCachedimageManager{SStandaloneResourceBaseManager: db.NewStandaloneResourceBaseManager(SCachedimage{}, "cachedimages_tbl", "cachedimage", "cachedimages")}\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u5efa\u8bae\u7684\u65b9\u5f0f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'func init() {\n    CachedimageManager = &SCachedimageManager{\n        SStandaloneResourceBaseManager: db.NewStandaloneResourceBaseManager(\n            SCachedimage{},\n            "cachedimages_tbl",\n            "cachedimage",\n            "cachedimages",\n        ),\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u51fd\u6570\u95f4\u8ddd",children:"\u51fd\u6570\u95f4\u8ddd"}),"\n",(0,i.jsx)(n.p,{children:"\u5c3d\u91cf\u907f\u514d\u51fd\u6570\u76f4\u63a5\u7d27\u6328\u4e00\u8d77"}),"\n",(0,i.jsx)(n.p,{children:"\u4e3e\u4f8b\uff1a\u4e0d\u5efa\u8bae\u7684\u65b9\u5f0f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"func IsRepositoryExist(user *User, repoName string) (bool, error) { ...\n    \n}\nfunc findCertEndPosition(certBytes []byte) (int, error) {\n    endPos := bytes.Index(certBytes, CERT_SEP)\n    if endPos < 0 {\n        return -1, ErrOutOfRange\n    }\n    return endPos, nil\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5efa\u8bae\u7684\u65b9\u5f0f"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"func IsRepositoryExist(user *User, repoName string) (bool, error) { ...\n    \n}\n\nfunc findCertEndPosition(certBytes []byte) (int, error) {\n    endPos := bytes.Index(certBytes, CERT_SEP)\n    if endPos < 0 {\n        return -1, ErrOutOfRange\n    }\n    return endPos, nil\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"receiver\u6216\u8005\u51fd\u6570\u4f20\u53c2\u7c7b\u578bby-value-or-by-pointer\u5efa\u8bae",children:"Receiver\u6216\u8005\u51fd\u6570\u4f20\u53c2\u7c7b\u578b\uff08by value or by pointer\uff09\u5efa\u8bae"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u65b9\u6cd5\u7684receiver\u6216\u8005\u5165\u53c2\u53ef\u4ee5by value\u6216by pointer\u6765\u4f20\u9012\uff0c\u53c2\u8003",(0,i.jsx)(n.a,{href:"https://github.com/golang/go/wiki/CodeReviewComments#receiver-type%EF%BC%8C%E4%B8%80%E8%88%AC%E6%9D%A5%E8%AF%B4%E9%81%B5%E5%BE%AA%E5%A6%82%E4%B8%8B%E5%BB%BA%E8%AE%AE%EF%BC%9A",children:"https://github.com/golang/go/wiki/CodeReviewComments#receiver-type\uff0c\u4e00\u822c\u6765\u8bf4\u9075\u5faa\u5982\u4e0b\u5efa\u8bae\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5982\u679creceiver\u6216\u5165\u53c2\u7684\u7c7b\u578b\u662fmap, func\u6216\u8005chan\uff0c\u4e0d\u8981\u7528\u6307\u9488\u3002\u5982\u679c\u662fslice\uff0c\u5982\u679c\u4e0d\u60f3\u91cd\u65b0\u5206\u914dslice\uff08reslice or reallocate the slice\uff09\uff0c\u4e5f\u4e0d\u8981\u7528\u6307\u9488\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u5982\u679c\u8be5\u65b9\u6cd5\u5185\u9700\u8981\u4fee\u6539\u8be5receiver\u6216\u5165\u53c2\u7684\u6210\u5458\u53d8\u91cf\uff0c\u5fc5\u987b\u7528\u6307\u9488"}),"\n",(0,i.jsx)(n.li,{children:"\u5982\u679creceiver\u6216\u8005\u5165\u53c2\u662f\u5305\u542bsync.Mutex\u6216\u5176\u4ed6\u7528\u4e8e\u540c\u6b65\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5fc5\u987b\u7528\u6307\u9488"}),"\n",(0,i.jsx)(n.li,{children:"\u5982\u679creceiver\u6216\u8005\u5165\u53c2\u662f\u5f88\u5927\u7684struct\u6216\u8005array\uff0c\u7528\u6307\u9488\u4f20\u9012\u4f1a\u9ad8\u6548\u4e00\u4e9b\uff08\u907f\u514d\u4e86\u5185\u5b58\u62f7\u8d1d\uff09"}),"\n",(0,i.jsx)(n.li,{children:"\u5982\u679creceiver\u6216\u8005\u5165\u53c2\u662fstruct, array, slice\uff0c\u5e76\u4e14\u5176\u6210\u5458\u53d8\u91cf\u5305\u542b\u6307\u9488\uff0c\u5e76\u4e14\u9700\u8981\u4fee\u6539\u8be5\u6307\u9488\u6307\u5411\u7684\u503c\uff0c\u90a3\u4e48\u5efa\u8bae\u7528\u6307\u9488"}),"\n",(0,i.jsx)(n.li,{children:"\u5982\u679creceiver\u6216\u8005\u5165\u53c2\u662f\u4e00\u4e2a\u57fa\u672c\u6570\u636e\uff08\u5982int, string, time.Time\uff09\uff0c\u5c0f\u7684struct\uff0c\u5e76\u4e14\u5bf9\u8be5\u6570\u7684\u4fee\u6539\u53ea\u5728\u51fd\u6570\u5185\u6709\u6548\uff0c\u90a3\u5efa\u8bae\u4f20\u503c\u3002\u503c\u4f20\u9012\u7684\u53c2\u6570\u5728\u6808\u4e0a\u5206\u914d\uff0c\u5c3d\u91cf\u4f7f\u7528\u503c\u4f20\u9012\u53ef\u4ee5\u964d\u4f4e\u5185\u5b58\u5783\u573e\u56de\u6536\u51e0\u7387\uff0c\u63d0\u9ad8\u7a0b\u5e8f\u7684\u6548\u7387"}),"\n",(0,i.jsx)(n.li,{children:"\u6700\u540e\uff0c\u5982\u679c\u4e0d\u592a\u786e\u5b9a\uff0c\u5c31\u4f20\u6307\u9488"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u4ee3\u7801\u6ce8\u91ca",children:"\u4ee3\u7801\u6ce8\u91ca"}),"\n",(0,i.jsx)(n.p,{children:"\u6ce8\u91ca\u5e94\u4f18\u5148\u4f7f\u7528\u53cc\u659c\u7ebf\uff08//\uff09\u3002\u7528\u201c/* ... */\u201d\u7684\u60c5\u51b5\uff1a\u5927\u6bb5\u6587\u5b57\uff0c\u957f\u5ea6\u8fbe\u9875\uff0c\u4f8b\u5982encoding/gob\u7684doc.go\n\u4ee3\u7801\u4e2d\u201c\u9b54\u6cd5\u201d\u7684\u90e8\u5206\uff0c\u5e94\u901a\u8fc7\u6ce8\u91ca\u63cf\u8ff0\u7f18\u7531\uff0c\u53d8\u66f4\u6b64\u5904\u7684\u6ce8\u610f\u4e8b\u9879\uff0c\u4ee5\u53ca\u53d8\u66f4\u4e0d\u5f53\u7684\u540e\u679c\u3002\u8fd9\u6837\u505a\u6539\u8fdb\u65f6\u6709\u673a\u4f1a\u53ef\u4ee5\u7167\u987e\u5230\n\u6ce8\u91ca\u5e94\u8be5\u201c\u8a00\u4e4b\u6709\u7269\u201d\uff0c\u7b80\u7ec3\u4fbf\u4e8e\u5feb\u901f\u9605\u8bfb"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u901a\u5e38\u4ee5\u88ab\u6ce8\u91ca\u7684\u540d\u5b57\u5f00\u5934\uff0c\u7528\u4e00\u4e2a\u77ed\u53e5\u6982\u62ec\u529f\u80fd\uff08who does what\uff09\uff0c\u4e0a\u4e0b\u6587\u4e00\u822c\u662f\u5f53\u524dpackage\u6216\u8005\u5176\u6240\u7ec4\u6210\u7684\u66f4\u5927\u529f\u80fd\u70b9\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u66f4\u7ec6\u8282\u7684\u63cf\u8ff0\u53e6\u5f00\u6bb5\u843d\uff0c\u4e00\u4e2a\u6bb5\u843d\u4e00\u4ef6\u4e8b\uff0c\u6bb5\u9996\u7b2c\u4e00\u53e5\u8bdd\u4f53\u73b0\u540e\u7eed\u5185\u5bb9\u4e3b\u9898\n\u4ee3\u7801\u53d8\u66f4\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u518d\u4f7f\u7528\u7684\u4ee3\u7801\u5e94\u76f4\u63a5\u5220\u9664\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528\u6ce8\u91ca\n\u4e3e\u4f8b:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'// Errorf formats according to a format specifier and returns the string\n// as a value that satisfies error.\nfunc Errorf(format string, a ...interface{}) error {\n        return errors.New(Sprintf(format, a...))\n}\n \n// Strings for use with buffer.WriteString.\n// This is less overhead than using buffer.Write with byte arrays.\nconst (\n        commaSpaceString  = ", "\n        nilAngleString    = "<nil>"\n        ...\n)\n \n// State represents the printer state passed to custom formatters.\n// It provides access to the io.Writer interface plus information about\n// the flags and options for the operand\'s format specifier.\ntype State interface {\n        // Write is the function to call to emit formatted output to be printed.\n        Write(b []byte) (n int, err error)\n        ...\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u5bfc\u5165\u6807\u51c6\u5e93\u7b2c\u4e09\u65b9\u6216\u5176\u5b83\u5305",children:"\u5bfc\u5165\u6807\u51c6\u5e93\u3001\u7b2c\u4e09\u65b9\u6216\u5176\u5b83\u5305"}),"\n",(0,i.jsx)(n.p,{children:"\u9664\u6807\u51c6\u5e93\u5916\uff0cGo \u8bed\u8a00\u7684\u5bfc\u5165\u8def\u5f84\u57fa\u672c\u4e0a\u4f9d\u8d56\u4ee3\u7801\u6258\u7ba1\u5e73\u53f0\u4e0a\u7684 URL \u8def\u5f84\uff0c\u56e0\u6b64\u4e00\u4e2a\u6e90\u6587\u4ef6\u9700\u8981\u5bfc\u5165\u7684\u5305\u6709 4 \u79cd\u5206\u7c7b\uff1a\u6807\u51c6\u5e93\u3001\u7b2c\u4e09\u65b9\u5305\u3001\u7ec4\u7ec7\u5185\u5176\u5b83\u5305\u548c\u5f53\u524d\u5305\u7684\u5b50\u5305\u3002\n\u57fa\u672c\u89c4\u5219\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5982\u679c\u540c\u65f6\u5b58\u5728 2 \u79cd\u53ca\u4ee5\u4e0a\uff0c\u5219\u9700\u8981\u4f7f\u7528\u5206\u533a\u6765\u5bfc\u5165\u3002\u6bcf\u4e2a\u5206\u7c7b\u4f7f\u7528\u4e00\u4e2a\u5206\u533a\uff0c\u91c7\u7528\u7a7a\u884c\u4f5c\u4e3a\u5206\u533a\u4e4b\u95f4\u7684\u5206\u5272\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u5728\u975e\u6d4b\u8bd5\u6587\u4ef6(*_test.go\uff09\u4e2d\uff0c\u7981\u6b62\u4f7f\u7528 . \u6765\u7b80\u5316\u5bfc\u5165\u5305\u7684\u5bf9\u8c61\u8c03\u7528\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u7981\u6b62\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\u5bfc\u5165\uff08./subpackage\uff09\uff0c\u6240\u6709\u5bfc\u5165\u8def\u5f84\u5fc5\u987b\u7b26\u5408 go get \u6807\u51c6\u3002\n\u4e0b\u9762\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u793a\u4f8b\uff1a"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'import (\n    "fmt"\n    "encoding/json"\n    "net/http"\n    "os"\n \n    "github.com/codegangsta/cli"\n    "gopkg.in/macaron.v1"\n    "k8s.io/helm/pkg/helm"\n \n    "github.com/yunionio/jsonutils"\n    "github.com/yunionio/log"\n \n    "github.com/yunionio/onecloud/pkg/cloudcommon"\n    "github.com/yunionio/onecloud/pkg/compute/models"\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"api\u53c2\u6570\u66b4\u9732",children:"API\u53c2\u6570\u66b4\u9732"}),"\n",(0,i.jsx)(n.p,{children:"\u57fa\u672c\u89c4\u5219\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u521b\u5efa\u53ca\u8fc7\u6ee4\u53c2\u6570,\u82e5\u662f\u5185\u90e8\u7684model,\u8bf7\u4f7f\u7528model\u7684keyword, \u907f\u514d\u4f7f\u7528keyword_id\u5411\u5916\u66b4\u9732\u53c2\u6570"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"type ServerCreateInput struct {\n \n    //\u4e3b\u673a\u5feb\u7167ID\u6216name\uff0c\u5c3d\u91cf\u4f7f\u7528\u4e3b\u673a\u5feb\u7167ID\u8fdb\u884c\u552f\u4e00\u5339\u914d\n    InstanceSnapshot string\n \n    //swagger:ignore \u5185\u90e8\u4f7f\u7528\uff0cAPI\u6587\u6863\u91cc\u9762\u4e0d\u4f1a\u51fa\u73b0\u6b64\u53c2\u6570\n    InstanceSnapshotId string\n}\n \nfunc (manager *SGusetManager)ValidateCreateData(...., input api.ServerCreateInput) (..., error) {\n    var err error\n    input.InstanceSnapshotId, err = InstanceSnapshotManager.FetchByIdOrName(userCred, input.InstanceSnapshot)\n    if err != nil {\n        return nil, err\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u53c2\u8003",children:"\u53c2\u8003"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/golang/go/wiki/CodeReviewComments",children:"https://github.com/golang/go/wiki/CodeReviewComments"})}),"\n",(0,i.jsxs)(n.li,{children:["Godoc documenting Go code: ",(0,i.jsx)(n.a,{href:"https://blog.golang.org/godoc-documenting-go-code",children:"https://blog.golang.org/godoc-documenting-go-code"})]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/Unknwon/go-code-convention/",children:"https://github.com/Unknwon/go-code-convention/"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>o});var i=r(96540);const s={},t=i.createContext(s);function l(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);