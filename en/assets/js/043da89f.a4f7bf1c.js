"use strict";(self.webpackChunkdocs_new=self.webpackChunkdocs_new||[]).push([[572],{1529:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>p,frontMatter:()=>h,metadata:()=>r,toc:()=>l});var i=s(74848),d=s(28453);const h={sidebar_position:4},c="Ceph\u5b58\u50a8",r={id:"guides/onpremise/storage/blockstorage/ceph",title:"Ceph\u5b58\u50a8",description:"Ceph\u662f\u8457\u540d\u7684\u5f00\u6e90\u5206\u5e03\u5f0f\u5b58\u50a8\uff0c\u4e00\u4e2a\u5b58\u50a8\u96c6\u7fa4\u53ef\u4ee5\u540c\u65f6\u63d0\u4f9b\u5757\u5b58\u50a8\uff08RBD\uff09\uff0c\u5bf9\u8c61\u5b58\u50a8\uff08RadosGw\uff09\u548c\u6587\u4ef6\u5b58\u50a8\uff08CephFs\uff09\u4e09\u79cd\u5b58\u50a8\u63a5\u53e3\u3002\u672c\u6587\u4ecb\u7ecd\u865a\u62df\u673a\u4f7f\u7528Ceph RBD\u5757\u5b58\u50a8\u7684\u914d\u7f6e\u548c\u4f7f\u7528\u65b9\u6cd5\u3002",source:"@site/docs/guides/onpremise/storage/blockstorage/ceph.md",sourceDirName:"guides/onpremise/storage/blockstorage",slug:"/guides/onpremise/storage/blockstorage/ceph",permalink:"/en/docs/guides/onpremise/storage/blockstorage/ceph",draft:!1,unlisted:!1,editUrl:"https://github.com/yunionio/website/tree/master/docs/guides/onpremise/storage/blockstorage/ceph.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"\u672c\u5730LVM\u5b58\u50a8",permalink:"/en/docs/guides/onpremise/storage/blockstorage/lvm-storage"},next:{title:"\u5b58\u50a8\u4fe1\u606f\u91c7\u96c6",permalink:"/en/docs/guides/onpremise/storage/blockstorage/storage_sync"}},t={},l=[{value:"\u652f\u6301Ceph\u7248\u672c",id:"\u652f\u6301ceph\u7248\u672c",level:2},{value:"Ceph\u7684\u5bf9\u63a5\u914d\u7f6e",id:"ceph\u7684\u5bf9\u63a5\u914d\u7f6e",level:2},{value:"\u7f51\u7edc\u8981\u6c42",id:"\u7f51\u7edc\u8981\u6c42",level:3},{value:"\u914d\u7f6e\u53c2\u6570",id:"\u914d\u7f6e\u53c2\u6570",level:3},{value:"Ceph\u8bbf\u95ee\u51ed\u8bc1",id:"ceph\u8bbf\u95ee\u51ed\u8bc1",level:2},{value:"Ceph\u5bb9\u91cf\u7684\u8bc6\u522b",id:"ceph\u5bb9\u91cf\u7684\u8bc6\u522b",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"ceph\u5b58\u50a8",children:"Ceph\u5b58\u50a8"}),"\n",(0,i.jsx)(n.p,{children:"Ceph\u662f\u8457\u540d\u7684\u5f00\u6e90\u5206\u5e03\u5f0f\u5b58\u50a8\uff0c\u4e00\u4e2a\u5b58\u50a8\u96c6\u7fa4\u53ef\u4ee5\u540c\u65f6\u63d0\u4f9b\u5757\u5b58\u50a8\uff08RBD\uff09\uff0c\u5bf9\u8c61\u5b58\u50a8\uff08RadosGw\uff09\u548c\u6587\u4ef6\u5b58\u50a8\uff08CephFs\uff09\u4e09\u79cd\u5b58\u50a8\u63a5\u53e3\u3002\u672c\u6587\u4ecb\u7ecd\u865a\u62df\u673a\u4f7f\u7528Ceph RBD\u5757\u5b58\u50a8\u7684\u914d\u7f6e\u548c\u4f7f\u7528\u65b9\u6cd5\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u652f\u6301ceph\u7248\u672c",children:"\u652f\u6301Ceph\u7248\u672c"}),"\n",(0,i.jsx)(n.p,{children:"\u5e73\u53f0\u901a\u8fc7\u8c03\u7528\u90e8\u7f72\u5728\u5bbf\u4e3b\u673a\u7684 ceph \u547d\u4ee4\u6765\u8bbf\u95eeCeph\u5b58\u50a8\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u5e73\u53f0\u90e8\u7f72\u4e00\u53f0\u5bbf\u4e3b\u673a\u65f6\uff0c\u4f1a\u9ed8\u8ba4\u5b89\u88c5\u5f00\u6e90\u7248\u672c\u7684 ceph-common\uff0c\u5176\u4e2d\u5305\u542b\u4e86 ceph \u7684\u5ba2\u6237\u7aef\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u5404\u4e2aLinux\u53d1\u884c\u7248\u5b89\u88c5\u7684 ceph-common \u7248\u672c\u5982\u4e0b\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"CentOS 7: 10.2.5"}),"\n",(0,i.jsx)(n.li,{children:"CentOS 8: 12.2.8"}),"\n",(0,i.jsx)(n.li,{children:"Kylin V10: 12.2.8"}),"\n",(0,i.jsx)(n.li,{children:"Debian 10: 12.2.11"}),"\n",(0,i.jsx)(n.li,{children:"Debian 11: 14.2.21"}),"\n",(0,i.jsx)(n.li,{children:"OpenEuler 22.03 SP1: 16.2.7"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u7528\u6237\u9700\u8981\u5176\u4ed6\u7248\u672c\u7684 ceph-common\uff0c\u6216\u8005\u7528\u6237\u5e0c\u671b\u4f7f\u7528\u5546\u7528\u7684ceph\uff0c\u5219\u9700\u8981\u81ea\u884c\u624b\u52a8\u5728\u5bbf\u4e3b\u673a\u5b89\u88c5\u5bf9\u5e94\u7248\u672c\u7684 ceph-common\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u7531\u4e8e\u8fd9\u4e2a\u673a\u5236\uff0c\u5bfc\u81f4\u5982\u4e0b\u7684\u9650\u5236\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u540c\u4e00\u53f0\u5bbf\u4e3b\u673a\u53ea\u80fd\u5bf9\u63a5\u7279\u5b9a\u7248\u672c\u8303\u56f4\u6216\u7279\u5b9a\u5382\u5546\u7684Ceph\u5b58\u50a8\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u5bf9\u4e8e\u5f00\u6e90\u7248ceph\uff0c\u5b58\u5728\u7248\u672c\u517c\u5bb9\u6027\u95ee\u9898\uff1a\u8f83\u4f4e\u7248\u672c\u7684ceph-common\u53ef\u80fd\u65e0\u6cd5\u8bbf\u95ee\u8f83\u9ad8\u7248\u672c\u7684ceph\u670d\u52a1\u96c6\u7fa4\u3002\u4f8b\u5982CentOS 7\u81ea\u5e26\u768410.2.5\u7684ceph-common\u5c31\u65e0\u6cd5\u8bbf\u95ee>=16.x\u7248\u672c\u7684ceph\u670d\u52a1\u96c6\u7fa4\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ceph\u7684\u5bf9\u63a5\u914d\u7f6e",children:"Ceph\u7684\u5bf9\u63a5\u914d\u7f6e"}),"\n",(0,i.jsx)(n.h3,{id:"\u7f51\u7edc\u8981\u6c42",children:"\u7f51\u7edc\u8981\u6c42"}),"\n",(0,i.jsx)(n.p,{children:"\u6302\u8f7d\u4f7f\u7528Ceph\u5b58\u50a8\u7684\u5bbf\u4e3b\u673a\u9700\u8981\u80fd\u591f\u76f4\u63a5\u7f51\u7edc\u8bbf\u95eeCeph\u96c6\u7fa4\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u6570",children:"\u914d\u7f6e\u53c2\u6570"}),"\n",(0,i.jsx)(n.p,{children:"\u9700\u8981\u51c6\u5907\u5982\u4e0b\u914d\u7f6e\u53c2\u6570\uff1a"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u53c2\u6570"}),(0,i.jsx)(n.th,{children:"\u662f\u5426\u53ef\u9009"}),(0,i.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RbdMonHost"}),(0,i.jsx)(n.td,{children:"\u5fc5\u586b"}),(0,i.jsx)(n.td,{children:"Ceph\u96c6\u7fa4\u7684monitor\u670d\u52a1\u7684IP\u5730\u5740\uff0c\u591a\u4e2a\u4ee5,\u53f7\u5206\u9694"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RbdPool"}),(0,i.jsx)(n.td,{children:"\u5fc5\u586b"}),(0,i.jsx)(n.td,{children:"Ceph Pool\u540d\u79f0\uff0c\u4e00\u4e2aPool\u5bf9\u5e94\u4e00\u4e2aCeph\u5b58\u50a8\u5b9e\u4f8b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RbdKey"}),(0,i.jsx)(n.td,{children:"\u53ef\u9009"}),(0,i.jsx)(n.td,{children:"Ceph\u8ba4\u8bc1key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RbdRadosMonOpTimeout"}),(0,i.jsx)(n.td,{children:"\u53ef\u9009"}),(0,i.jsx)(n.td,{children:"\u8bbf\u95eeCeph Monitor\u7684\u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RbdRadosOsdOpTimeout"}),(0,i.jsx)(n.td,{children:"\u53ef\u9009"}),(0,i.jsx)(n.td,{children:"\u8bbf\u95eeCeph OSD\u7684\u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"RbdClientMountTimeout"}),(0,i.jsx)(n.td,{children:"\u53ef\u9009"}),(0,i.jsx)(n.td,{children:"\u5ba2\u6237\u7aef\u6302\u8f7dCeph RBD\u8bbe\u5907\u7684\u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"ceph\u8bbf\u95ee\u51ed\u8bc1",children:"Ceph\u8bbf\u95ee\u51ed\u8bc1"}),"\n",(0,i.jsx)(n.p,{children:"\u6bcf\u6b21\u5728\u5bbf\u4e3b\u673a\u6267\u884cceph\u7684\u547d\u4ee4\uff0c\u5982\u679c\u8be5\u5b58\u50a8\u914d\u7f6e\u4e86rbd_key\u53c2\u6570\uff0c\u5219\u4f1a\u4f7f\u7528rbd_key\u79d8\u94a5\u751f\u6210\u4e34\u65f6ceph\u51ed\u8bc1\u6587\u4ef6\uff0c\u7528\u4e8e\u8bbf\u95eeceph\u5b58\u50a8\u3002\u4e0d\u4f1a\u4f7f\u7528\u4fdd\u5b58\u5728\u5bbf\u4e3b\u673a/etc/ceph\u7684\u51ed\u8bc1\u6587\u4ef6\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"ceph\u5bb9\u91cf\u7684\u8bc6\u522b",children:"Ceph\u5bb9\u91cf\u7684\u8bc6\u522b"}),"\n",(0,i.jsx)(n.p,{children:"\u5e73\u53f0\u5bf9\u63a5\u4e00\u4e2aCeph RBD\u5b58\u50a8\u540e\uff0c\u4f1a\u5468\u671f\u6027\u4eceCeph\u62c9\u53d6\u5b58\u50a8\u7684\u5bb9\u91cf\u4fe1\u606f\u3002"}),"\n",(0,i.jsx)(n.p,{children:"Ceph\u5b58\u50a8\u7684\u5bb9\u91cf\u4fe1\u606f\u901a\u8fc7 ceph df \u7684\u547d\u4ee4\u83b7\u53d6\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# ceph df\nRAW STORAGE:\n    CLASS     SIZE       AVAIL      USED       RAW USED     %RAW USED\n    hdd       31 TiB     21 TiB     10 TiB       10 TiB         32.72\n    TOTAL     31 TiB     21 TiB     10 TiB       10 TiB         32.72\n\nPOOLS:\n    POOL               ID     PGS     STORED      OBJECTS     USED       %USED     MAX AVAIL\n    cloudpods-test      1     128     5.0 TiB       1.54M     10 TiB     31.62        11 TiB\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5b58\u50a8\u7684\u603b\u5bb9\u91cf\u4e3a\u5bf9\u5e94Pool\u7684 STORED + MAX AVAIL\uff0c\u4f7f\u7528\u91cf\u4e3a\u5bf9\u5e94 Pool \u7684 STORED"})]})}function p(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>r});var i=s(96540);const d={},h=i.createContext(d);function c(e){const n=i.useContext(h);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:c(e.components),i.createElement(h.Provider,{value:n},e.children)}}}]);