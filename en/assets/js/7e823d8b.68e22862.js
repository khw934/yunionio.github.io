"use strict";(self.webpackChunkdocs_new=self.webpackChunkdocs_new||[]).push([[3805],{19993:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});var s=i(85893),l=i(11151);const r={sidebar_position:1},o="Component Introduction",t={id:"operations/component",title:"Component Introduction",description:"Most of the services deployed on the Cloudpods platform run in containers. Services deployed using ocboot and helm run directly on Kubernetes, while environments deployed using Docker Compose run directly on docker.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/operations/component.mdx",sourceDirName:"operations",slug:"/operations/component",permalink:"/en/docs/operations/component",draft:!1,unlisted:!1,editUrl:"https://github.com/yunionio/website/tree/master/docs/operations/component.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"OPS",permalink:"/en/docs/operations/"},next:{title:"\u5347\u7ea7",permalink:"/en/docs/operations/upgrading/"}},d={},c=[{value:"onecloud-operator",id:"onecloud-operator",level:2},{value:"web",id:"web",level:3},{value:"apigateway",id:"apigateway",level:3},{value:"keystone",id:"keystone",level:3},{value:"region",id:"region",level:3},{value:"scheduler",id:"scheduler",level:3},{value:"glance",id:"glance",level:3},{value:"baremetal",id:"baremetal",level:3},{value:"host",id:"host",level:3},{value:"host-image",id:"host-image",level:3},{value:"host-deployer",id:"host-deployer",level:3},{value:"vpcagent",id:"vpcagent",level:3},{value:"esxiagent",id:"esxiagent",level:3},{value:"cloudmon",id:"cloudmon",level:3},{value:"monitor",id:"monitor",level:3}];function a(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"component-introduction",children:"Component Introduction"}),"\n",(0,s.jsxs)(e.p,{children:["Most of the services deployed on the Cloudpods platform run in containers. Services deployed using ",(0,s.jsx)(e.code,{children:"ocboot"})," and ",(0,s.jsx)(e.code,{children:"helm"})," run directly on Kubernetes, while environments deployed using Docker Compose run directly on ",(0,s.jsx)(e.code,{children:"docker"}),"."]}),"\n",(0,s.jsx)(e.p,{children:"Next, we will introduce the component services of the platform."}),"\n",(0,s.jsx)(e.h2,{id:"onecloud-operator",children:"onecloud-operator"}),"\n",(0,s.jsx)(e.p,{children:"The Onecloud-operator component is a cluster controller that enables automatic configuration, deployment, and operational monitoring of cluster services."}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Deployment"}),": onecloud-operator"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": onecloud-operator-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Configuration"}),":"]}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Configure the operator\n$ kubectl edit oc -n onecloud\n# View the configuration of the operator\n$ kubectl get oc -n onecloud -o yaml\n"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Features"}),":","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Automatic deployment of platform services, including initialization configuration and creation of corresponding k8s resources."}),"\n",(0,s.jsx)(e.li,{children:"Upgrade and rollback: update or rollback the version of any service."}),"\n",(0,s.jsx)(e.li,{children:"Resource cleanup: release corresponding resources when the platform service cluster is deleted."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"web",children:"web"}),"\n",(0,s.jsx)(e.p,{children:"Front-end service component"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Deployment"}),": default-web"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-web-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"configmap"}),": default-web"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Features"}),":","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Hosting front-end code"}),"\n",(0,s.jsx)(e.li,{children:"Nignx-related configuration"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"apigateway",children:"apigateway"}),"\n",(0,s.jsx)(e.p,{children:"API gateway component"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Deployment"}),": default-apigateway"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-apigateway-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Features"}),":","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Provide web front-end API"}),"\n",(0,s.jsx)(e.li,{children:"Entry point for authentication and authorization."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"keystone",children:"keystone"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Deployment"}),": default-keystone"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-keystone-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Features"}),":","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Authentication"}),"\n",(0,s.jsx)(e.li,{children:"Resource ownership: domain, project"}),"\n",(0,s.jsx)(e.li,{children:"Permission: role, policy"}),"\n",(0,s.jsx)(e.li,{children:"Service directory"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"region",children:"region"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Deployment"}),": default-region"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-region-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Features"}),":","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Cloud controller"}),"\n",(0,s.jsx)(e.li,{children:"Management of cloud resources such as computing, networking, storage, and databases"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"scheduler",children:"scheduler"}),"\n",(0,s.jsx)(e.p,{children:"Resource scheduling component"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Deployment"}),": default-scheduler"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-scheduler-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Features"}),": resource scheduling"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"glance",children:"glance"}),"\n",(0,s.jsx)(e.p,{children:"Image service component"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Deployment"}),": default-glance"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-glance-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Features"}),": Image management"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"baremetal",children:"baremetal"}),"\n",(0,s.jsx)(e.p,{children:"Physical machine management service component"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Deployment"}),": default-baremetal"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-baremetal-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Features"}),":","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Provide bare metal management agent"}),"\n",(0,s.jsx)(e.li,{children:"Provide PXEboot"}),"\n",(0,s.jsx)(e.li,{children:"Provide DHCP"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"host",children:"host"}),"\n",(0,s.jsx)(e.p,{children:"Host service component"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-host-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Daemonset"}),": default-host"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Features"}),": Agent on private cloud host"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Container"}),": Under the host service, there are three containers: ",(0,s.jsx)(e.code,{children:"host"}),", ",(0,s.jsx)(e.code,{children:"ovn-controller"}),", and",(0,s.jsx)(e.code,{children:"sdnagent"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["host:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Virtual machine lifecycle management","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Enable and disable virtual machines through qemu"}),"\n",(0,s.jsx)(e.li,{children:"Perform other operations on virtual machines through qemu monitor"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["Storage management and disk lifecycle management","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"CURD operations for local disk and shared storage (Ceph, NFS, etc.) disk"}),"\n",(0,s.jsx)(e.li,{children:"Storage information detection"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["DHCP Server","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"As a DHCP Server to assign IP addresses to virtual machines"}),"\n",(0,s.jsx)(e.li,{children:"As a DHCP relay server forwarding DHCP requests when physical machines PXE boot"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["GPU device detection and initialization","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Bind GPU devices with VFIO driver and register them to the cloud platform"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.li,{children:"Host initialization and information detection"}),"\n",(0,s.jsx)(e.li,{children:"Monitoring data collection- ovn-controller: Manages virtual machine VPC networks, connects to the southbound, and converts flows in the southbound to OVS flow table rules."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["sdnagent: Manages virtual machine classic networks.","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Flow table management"}),"\n",(0,s.jsx)(e.li,{children:"Virtual machine NIC QoS"}),"\n",(0,s.jsx)(e.li,{children:"Firewall"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"host-image",children:"host-image"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-host-image-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Function"}),": Provides API for reading image content, which can be remotely mounted with ",(0,s.jsx)(e.code,{children:"fuse"}),"."]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"host-deployer",children:"host-deployer"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-host-deployer-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Function"}),": Performs relevant operations for virtual machine deployment:","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Identification and initialization of virtual machine image operating system."}),"\n",(0,s.jsx)(e.li,{children:"Partition extension, file system formatting, etc."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"vpcagent",children:"vpcagent"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Deployment"}),": default-vpcagent"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-vpcagent-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Function"}),": Manages VPC configurations for ",(0,s.jsx)(e.code,{children:"ovn"})]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"esxiagent",children:"esxiagent"}),"\n",(0,s.jsx)(e.p,{children:"VMware Management Agent"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Deployment"}),": default-esxiagent"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-esxiagent-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Function"}),": Agent for VMware management."]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"cloudmon",children:"cloudmon"}),"\n",(0,s.jsx)(e.p,{children:"Monitoring and collection service"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Deployment"}),": default-cloudmon"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-cloudmon-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Function"}),":","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Ping detection: probes IP addresses that are occupied every 5 minutes."}),"\n",(0,s.jsx)(e.li,{children:"Usage data collection"}),"\n",(0,s.jsx)(e.li,{children:"Monitoring data collection for VMware, OpenStack, public cloud platforms, etc."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"monitor",children:"monitor"}),"\n",(0,s.jsx)(e.p,{children:"Monitoring and query service"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Deployment"}),": default-monitor"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Pod"}),": default-monitor-xxx"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Function"}),": Responsible for monitoring query and alarm functions."]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}},11151:(n,e,i)=>{i.d(e,{Z:()=>t,a:()=>o});var s=i(67294);const l={},r=s.createContext(l);function o(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:o(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);