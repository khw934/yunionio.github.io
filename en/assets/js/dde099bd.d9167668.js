"use strict";(self.webpackChunkdocs_new=self.webpackChunkdocs_new||[]).push([[9240],{53990:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>j,contentTitle:()=>x,default:()=>m,frontMatter:()=>a,metadata:()=>u,toc:()=>p});var t=n(74848),i=n(28453),r=n(14902),d=(n(44586),n(21312));function l(e){const s=e.productVersion;return(0,t.jsx)("div",{children:(0,t.jsx)(r.A,{language:"bash",children:`\n# ${(0,d.T)({message:"\u786e\u4fdd git \u5df2\u7ecf\u5b89\u88c5"})}\n# ${(0,d.T)({message:"\u514b\u9686ocboot \u7684 master \u5206\u652f. \u6ce8\u610f\uff1ak3s\u7684\u90e8\u7f72\u65b9\u5f0f\uff0c\u76ee\u524d\u53ea\u5b9e\u73b0\u5728 ocboot \u7684 master\u91cc"})}\ngit clone https://github.com/yunionio/ocboot.git && cd ocboot\n\n# ${(0,d.T)({message:"\u5b89\u88c5 buildah"})}\n./scripts/install-buildah.sh\n\n# ${(0,d.T)({message:"\u9ed8\u8ba4\u90e8\u7f72 v3.11.x \u7248\u672c\u7684\u4e91\u7ba1\u7cfb\u7edf\u3002\u5982\u9700\u90e8\u7f72\u5176\u4ed6\u7248\u672c\uff0c\u8bf7\u81ea\u884c\u4fee\u6539 VERSION \u6587\u4ef6\u5230\u6307\u5b9a\u53d1\u884c\u7248\u3002"})}\n\n# ${(0,d.T)({message:"\u83b7\u53d6\u672c\u673a IP"})}\n# ${(0,d.T)({message:"\u5982\u679c\u7f51\u7edc\u60c5\u51b5\u590d\u6742(\u591a\u7f51\u5361\u3001\u591aip)\uff0c\u6b64\u5904\u4e5f\u53ef\u624b\u5de5\u6307\u5b9a IP"})}\nIP=$(ip route get 1 | awk '{print $7}' | sort -u | head -1)\n./ocboot.sh run.py ${s} $IP --k3s\n           `})})}function o(e){e.productVersion;return(0,t.jsx)("div",{children:(0,t.jsx)(r.A,{language:"bash",children:`\n# ${(0,d.T)({message:"\u53ef\u4ee5\u4f7f\u7528 -h \u9009\u9879\u6765\u67e5\u770b\u8be6\u7ec6\u53c2\u6570"})}\n./ocboot.sh add-node [-h] [--user SSH_USER] [--key-file SSH_PRIVATE_FILE] [--port SSH_PORT] [--node-port SSH_NODE_PORT] FIRST_MASTER_HOST TARGET_NODE_HOSTS [TARGET_NODE_HOSTS ...]\n\npositional arguments:\n  FIRST_MASTER_HOST     onecloud cluster primary master host, e.g., 10.1.2.56\n  TARGET_NODE_HOSTS     target nodes ip added into cluster\n\noptions:\n  -h, --help            show this help message and exit\n  --user SSH_USER, -u SSH_USER\n                        primary master host ssh user (default: root)\n  --key-file SSH_PRIVATE_FILE, -k SSH_PRIVATE_FILE\n                        primary master ssh private key file (default: /root/.ssh/id_rsa)\n  --port SSH_PORT, -p SSH_PORT\n                        primary master host ssh port (default: 22)\n  --node-port SSH_NODE_PORT, -n SSH_NODE_PORT\n                        worker node host ssh port (default: 22) `})})}function c(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h2,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,t.jsxs)(s.p,{children:["\u4e0d\u5c11\u7528\u6237\u53cd\u9988\uff0cocboot\u76ee\u524d\u7684 k8s\u5957\u4ef6\u7248\u672c\u8fc7\u4f4e\uff08",(0,t.jsx)(s.code,{children:"v1.15"}),"\uff09\uff0c\u5e0c\u671b\u80fd\u591f\u63a8\u51fa\u66f4\u9ad8\u7248\u672c\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u63a8\u51fa\u4e86\u57fa\u4e8e",(0,t.jsx)(s.code,{children:"buildah"}),"+",(0,t.jsx)(s.code,{children:"k3s"})," (",(0,t.jsx)(s.code,{children:"v1.28"}),")\u7684\u90e8\u7f72\u65b9\u5f0f\u3002"]}),"\n",(0,t.jsx)(s.admonition,{type:"warning",children:(0,t.jsx)(s.p,{children:"\u8bf7\u6ce8\u610f\uff0c\u76ee\u524d\u672c\u65b9\u6848\u5904\u4e8e\u6d4b\u8bd5\u9636\u6bb5\uff0c\u8bf7\u5728\u5145\u5206\u6d4b\u8bd5\u4e4b\u540e\uff0c\u518d\u7528\u4e8e\u60a8\u7684\u751f\u4ea7\u73af\u5883\u3002"})}),"\n",(0,t.jsxs)(s.p,{children:["\u672c\u5b89\u88c5\u65b9\u6848\uff0c\u4e0d\u518d\u4f9d\u8d56\u76ee\u6807\u673a\u5668\u4e0a\u7684",(0,t.jsx)(s.code,{children:"ansible"}),"\uff0c\u800c\u662f\u628a ansibie \u53ca\u5176\u4f9d\u8d56\u96c6\u6210\u5728",(0,t.jsx)(s.code,{children:"buildah"})," \u955c\u50cf\u91cc\u3002"]}),"\n",(0,t.jsx)(s.h2,{id:"\u90e8\u7f72\u65b9\u5f0f",children:"\u90e8\u7f72\u65b9\u5f0f"}),"\n",(0,t.jsx)(s.p,{children:"\u8bf7\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u90e8\u7f72\u3002\u8bf7\u53c2\u8003\u6ce8\u91ca\u90e8\u5206\u3002"}),"\n","\n",(0,t.jsx)(l,{productVersion:e.productVersion}),"\n",(0,t.jsx)(s.h2,{id:"\u65b0\u589e\u8282\u70b9",children:"\u65b0\u589e\u8282\u70b9"}),"\n","\n",(0,t.jsx)(o,{}),"\n",(0,t.jsx)(s.h2,{id:"\u652f\u6301\u7684\u64cd\u4f5c\u7cfb\u7edf",children:"\u652f\u6301\u7684\u64cd\u4f5c\u7cfb\u7edf"}),"\n",(0,t.jsx)(s.p,{children:"\u6ce8\uff1a3.11\u30013.10\u7b49\uff0c\u8868\u793a\u53d1\u884c\u7248 Release/3.11\u3001Release/3.10\u3002\u5176\u4f59\u540c\u7406\u3002"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Operationg system and Arch"}),(0,t.jsx)(s.th,{children:"3.11"}),(0,t.jsx)(s.th,{children:"3.10"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"CentOS 7 2009 x86_64+aarch64"}),(0,t.jsx)(s.td,{children:"\u2705"}),(0,t.jsx)(s.td,{children:"\u2705"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"OpenEuler 22.03 LTS Sp3 x86_64+aarch64"}),(0,t.jsx)(s.td,{children:"\u2705"}),(0,t.jsx)(s.td,{children:"\u2705"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Debian 11 x86_64+aarch64"}),(0,t.jsx)(s.td,{children:"\u2705"}),(0,t.jsx)(s.td,{children:"\u2705"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Ubuntu 22.04 x86_64+aarch64"}),(0,t.jsx)(s.td,{children:"\u2705"}),(0,t.jsx)(s.td,{children:"\u2705"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"CentOS Stream8 x86_64"}),(0,t.jsx)(s.td,{children:"\u2705"}),(0,t.jsx)(s.td,{children:"\u2705"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Rocky Linux 8.9 x86_64"}),(0,t.jsx)(s.td,{children:"\u2705"}),(0,t.jsx)(s.td,{children:"\u2705"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"OpencloudOS 8.8 x86_64"}),(0,t.jsx)(s.td,{children:"\u2705"}),(0,t.jsx)(s.td,{children:"\u2705"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"AlmaLinux 8.9 x86_64"}),(0,t.jsx)(s.td,{children:"\u2705"}),(0,t.jsx)(s.td,{children:"\u2705"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"AnolisOS 8.8 x86_64"}),(0,t.jsx)(s.td,{children:"\u2705"}),(0,t.jsx)(s.td,{children:"\u2705"})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"\u5982\u4f55\u5378\u8f7dk3s",children:"\u5982\u4f55\u5378\u8f7dk3s"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"./scripts/uninstall-k3s.sh\n"})}),"\n",(0,t.jsx)(s.p,{children:"\u5982\u6709\u9700\u8981\uff0c\u8bf7\u5728\u5378\u8f7dk3s\u4e4b\u540e\uff0c\u81ea\u884c\u6e05\u7406\u6570\u636e\u5e93\u3002\u672c\u6587\u6863\u4e0d\u505a\u8d58\u8ff0\u3002"}),"\n",(0,t.jsx)(s.h2,{id:"faq",children:"FAQ"}),"\n",(0,t.jsx)(s.h3,{id:"1-\u662f\u5426\u652f\u6301\u5c06-k8s-\u7684\u7cfb\u7edf\u8fc1\u79fb\u5347\u7ea7\u5230-k3s-\u7cfb\u7edf\u91cc",children:"1. \u662f\u5426\u652f\u6301\u5c06 k8s \u7684\u7cfb\u7edf\uff0c\u8fc1\u79fb/\u5347\u7ea7\u5230 k3s \u7cfb\u7edf\u91cc\uff1f"}),"\n",(0,t.jsx)(s.p,{children:"\u6682\u4e0d\u652f\u6301\u3002"}),"\n",(0,t.jsx)(s.h3,{id:"2-\u5176\u5b83\u95ee\u9898",children:"2. \u5176\u5b83\u95ee\u9898\uff1f"}),"\n",(0,t.jsxs)(s.p,{children:["\u5176\u5b83\u95ee\u9898\u6b22\u8fce\u5728 Cloudpods github issues \u754c\u9762\u63d0\u4ea4: ",(0,t.jsx)(s.a,{href:"https://github.com/yunionio/cloudpods/issues",children:"https://github.com/yunionio/cloudpods/issues"})," , \u6211\u4eec\u4f1a\u5c3d\u5feb\u56de\u590d\u3002"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}const a={edition:"ce",sidebar_position:6},x="Ocboot k3s \u5feb\u901f\u5b89\u88c5",u={id:"getting-started/onpremise/buildah-k3s",title:"Ocboot k3s \u5feb\u901f\u5b89\u88c5",description:"",source:"@site/docs/getting-started/onpremise/buildah-k3s.md",sourceDirName:"getting-started/onpremise",slug:"/getting-started/onpremise/buildah-k3s",permalink:"/en/getting-started/onpremise/buildah-k3s",draft:!1,unlisted:!1,editUrl:"https://github.com/yunionio/website/tree/master/docs/getting-started/onpremise/buildah-k3s.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{edition:"ce",sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"\u90e8\u7f72\u8d1f\u8f7d\u5747\u8861\u96c6\u7fa4",permalink:"/en/getting-started/onpremise/lbagent"},next:{title:"Multi-Cloud Management",permalink:"/en/getting-started/cmp/"}},j={},p=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u90e8\u7f72\u65b9\u5f0f",id:"\u90e8\u7f72\u65b9\u5f0f",level:2},{value:"\u65b0\u589e\u8282\u70b9",id:"\u65b0\u589e\u8282\u70b9",level:2},{value:"\u652f\u6301\u7684\u64cd\u4f5c\u7cfb\u7edf",id:"\u652f\u6301\u7684\u64cd\u4f5c\u7cfb\u7edf",level:2},{value:"\u5982\u4f55\u5378\u8f7dk3s",id:"\u5982\u4f55\u5378\u8f7dk3s",level:2},{value:"FAQ",id:"faq",level:2},{value:"1. \u662f\u5426\u652f\u6301\u5c06 k8s \u7684\u7cfb\u7edf\uff0c\u8fc1\u79fb/\u5347\u7ea7\u5230 k3s \u7cfb\u7edf\u91cc\uff1f",id:"1-\u662f\u5426\u652f\u6301\u5c06-k8s-\u7684\u7cfb\u7edf\u8fc1\u79fb\u5347\u7ea7\u5230-k3s-\u7cfb\u7edf\u91cc",level:3},{value:"2. \u5176\u5b83\u95ee\u9898\uff1f",id:"2-\u5176\u5b83\u95ee\u9898",level:3}];function g(e){const s={h1:"h1",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"ocboot-k3s-\u5feb\u901f\u5b89\u88c5",children:"Ocboot k3s \u5feb\u901f\u5b89\u88c5"}),"\n","\n",(0,t.jsx)(h,{productVersion:"virt"})]})}function m(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(g,{...e})}):g(e)}},67332:(e,s,n)=>{n.d(s,{A:()=>r});n(96540);var t=n(52830),i=n(74848);function r(e){const s={...e};return s?.code?.length>2&&(s.code=s.code.split("\n").map((e=>e.length>2&&"$ "===e.substring(0,2)?e.substring(2):e)).join("\n")),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(t.A,{...s})})}}}]);