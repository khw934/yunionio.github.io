"use strict";(self.webpackChunkdocs_new=self.webpackChunkdocs_new||[]).push([[5550],{8530:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>d,toc:()=>p});var t=n(74848),r=n(28453),s=n(59462);const i={edition:"ce",sidebar_position:2},c="Upgrading through docker compose",d={id:"operations/upgrading/docker-compose-upgrade",title:"Upgrading through docker compose",description:"This method is only applicable to upgrading environments deployed using docker compose. If your environment is deployed using ocboot, please refer to the following documentation for upgrading:",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/operations/upgrading/docker-compose-upgrade.md",sourceDirName:"operations/upgrading",slug:"/operations/upgrading/docker-compose-upgrade",permalink:"/en/docs/operations/upgrading/docker-compose-upgrade",draft:!1,unlisted:!1,editUrl:"https://github.com/yunionio/website/tree/master/docs/operations/upgrading/docker-compose-upgrade.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{edition:"ce",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Upgrading with ocboot",permalink:"/en/docs/operations/upgrading/ocboot-upgrade"},next:{title:"Kubernetes\u8fd0\u7ef4",permalink:"/en/docs/operations/k8s/"}},a={},p=[{value:"Update ocboot code",id:"update-ocboot-code",level:2},{value:"Restart the compose service",id:"restart-the-compose-service",level:2}];function l(e){const o={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.h1,{id:"upgrading-through-docker-compose",children:"Upgrading through docker compose"}),"\n",(0,t.jsxs)(o.admonition,{type:"tip",children:[(0,t.jsx)(o.p,{children:"This method is only applicable to upgrading environments deployed using docker compose. If your environment is deployed using ocboot, please refer to the following documentation for upgrading:"}),(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:(0,t.jsx)(o.a,{href:"./ocboot-upgrade",children:"Upgrade with ocboot"})}),"\n"]})]}),"\n",(0,t.jsxs)(o.p,{children:["Upgrading with docker compose is easy, just update the configuration file ",(0,t.jsx)(o.code,{children:"docker-compose.yml"}),"."]}),"\n",(0,t.jsxs)(o.p,{children:["When the ",(0,t.jsx)(o.a,{href:"https://github.com/yunionio/ocboot/blob/master/compose/docker-compose.yml",children:"ocboot/compose/docker-compose.yml"})," of upstream updates, you can use the ",(0,t.jsx)(o.code,{children:"git pull"})," command to pull the latest code, and then restart it. The steps are as follows:"]}),"\n",(0,t.jsx)(o.h2,{id:"update-ocboot-code",children:"Update ocboot code"}),"\n",(0,t.jsx)(o.p,{children:"Log in to the node where docker compose is running and enter the ocboot code directory."}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"$ cd ocboot\n"})}),"\n",(0,t.jsx)(o.p,{children:"Pull the latest code and checkout to the corresponding released version."}),"\n","\n",(0,t.jsx)(s.A,{}),"\n",(0,t.jsx)(o.h2,{id:"restart-the-compose-service",children:"Restart the compose service"}),"\n",(0,t.jsxs)(o.p,{children:["After pulling the latest ",(0,t.jsx)(o.code,{children:"docker-compose.yml"})," configuration file, use the following command to restart the service."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"$ cd compose\n$ docker compose down\n$ docker compose up -d\n"})})]})}function u(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},59462:(e,o,n)=>{n.d(o,{A:()=>i});var t=n(14902),r=n(28541),s=n(74848);function i(){const e=(0,r.c)("release_version");return(0,s.jsx)(t.A,{language:"bash",children:`$ git fetch\n$ git checkout ${e}`})}},28541:(e,o,n)=>{n.d(o,{c:()=>r});var t=n(44586);function r(e){const{siteConfig:o}=(0,t.A)();return o.customFields[e]}},67332:(e,o,n)=>{n.d(o,{A:()=>s});n(96540);var t=n(52830),r=n(74848);function s(e){const o={...e};return o?.code?.length>2&&(o.code=o.code.split("\n").map((e=>e.length>2&&"$ "===e.substring(0,2)?e.substring(2):e)).join("\n")),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(t.A,{...o})})}}}]);