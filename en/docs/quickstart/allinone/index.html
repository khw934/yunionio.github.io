<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.82.0" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>All in One Installation | OneCloud</title><meta property="og:title" content="All in One Installation" />
<meta property="og:description" content="Quickly deploy Yunion OneCloud Platform on an existing CentOS 7 machine using the ansible playbook
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://opensource.yunion.cn/en/docs/quickstart/allinone/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2021-03-23T10:04:20&#43;08:00" />

<meta itemprop="name" content="All in One Installation">
<meta itemprop="description" content="Quickly deploy Yunion OneCloud Platform on an existing CentOS 7 machine using the ansible playbook
">
<meta itemprop="dateModified" content="2021-03-23T10:04:20&#43;08:00" />
<meta itemprop="wordCount" content="1083">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="All in One Installation"/>
<meta name="twitter:description" content="Quickly deploy Yunion OneCloud Platform on an existing CentOS 7 machine using the ansible playbook
"/>





<link rel="preload" href="/scss/main.min.27e2e1f62fce918a78580b1f49853d0f5950d37f38b3e5d70988653cc2691921.css" as="style">
<link href="/scss/main.min.27e2e1f62fce918a78580b1f49853d0f5950d37f38b3e5d70988653cc2691921.css" rel="stylesheet" integrity="">


<script
  src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>


<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.3"></script>




  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  
  <a href="/en/" class="logo flex-shrink-0 navbar-brand">
    <img src="https://opensource.yunion.cn//images/logo.svg" />
  </a>

	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
      
			<li class="nav-item dropdown d-none d-lg-block">
				

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    
    v3.6
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
    
    
    
        
            <a class="dropdown-item" href="/">v3.6 (latest)</a>
        
    
        
            <a class="dropdown-item" href="/v3.4">v3.4</a>
        
    
        
            <a class="dropdown-item" href="/v3.3">v3.3</a>
        
    
        
            <a class="dropdown-item" href="/v3.2">v3.2</a>
        
    
</div>

			</li>
      
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/en/docs/quickstart/" ><span>Quick Start</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/en/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="https://github.com/yunionio/onecloud" target="_blank" ><span>Github</span></a>
			</li>
			
			
			<li class="nav-item dropdown d-none d-lg-block">
				

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	English
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/zh/docs/quickstart/allinone/">中文</a>
	
</div>
			</li>
			
		</ul>
	</div>
  
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.7de58a072a9fa0cf37dcad5f82c548bf.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    <div class="nav-item dropdown d-block d-lg-none">
      

<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	English
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/zh/docs/quickstart/allinone/">中文</a>
	
</div>
    </div>
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/en/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="endocs">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/en/docs/quickstart/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Quick Start</a>
  </li>
  <ul>
    <li class="collapse show" id="endocsquickstart">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-endocsquickstartallinone" href="/en/docs/quickstart/allinone/">All in One Installation</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">











<a href="https://github.com/yunionio/docs/edit/master/content/en/docs/quickstart/allinone.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/yunionio/docs/new/master/content/en/docs/quickstart/allinone.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" target="_blank"><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/yunionio/docs/issues/new?title=All%20in%20One%20Installation" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/yunionio/onecloud/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#environmental-preparation">Environmental Preparation</a>
      <ul>
        <li><a href="#configuration-requirements">Configuration Requirements</a></li>
        <li><a href="#related-software-dependencies">Related Software Dependencies</a></li>
        <li><a href="#local-environment-requirements">Local environment requirements</a></li>
      </ul>
    </li>
    <li><a href="#start-installation">Start Installation</a>
      <ul>
        <li><a href="#download-ocboot">Download ocboot</a></li>
        <li><a href="#write-deployment-configuration">Write deployment configuration</a></li>
        <li><a href="#start-deployment">Start Deployment</a></li>
        <li><a href="#create-the-first-virtual-machine">Create the first virtual machine</a></li>
        <li><a href="#import-public-cloud-or-other-private-cloud-platform-resources">Import public cloud or other private cloud platform resources</a></li>
      </ul>
    </li>
    <li><a href="#faq">FAQ</a>
      <ul>
        <li><a href="#1-cant-find-the-virtual-machine-menu-in-web-ui">1. Can&rsquo;t find the virtual machine menu in Web UI?</a></li>
        <li><a href="#2-change-the-hostname-of-the-node-some-services-fail-to-start">2. Change the hostname of the node, some services fail to start</a></li>
        <li><a href="#3-how-to-reinstall">3. How to reinstall</a></li>
        <li><a href="#4-other-questions">4. Other questions？</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://opensource.yunion.cn/en/docs/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://opensource.yunion.cn/en/docs/quickstart/">Quick Start</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://opensource.yunion.cn/en/docs/quickstart/allinone/">All in One Installation</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>All in One Installation</h1>
    <div class="lead">Quickly deploy Yunion OneCloud Platform on an existing CentOS 7 machine using the ansible playbook</div>
	       
	<h2 id="environmental-preparation">Environmental Preparation</h2>
<h3 id="configuration-requirements">Configuration Requirements</h3>
<ul>
<li>OS: CentOS 7.6</li>
<li>Minimum Configuration Requirements: CPU 4 cores, Memory 8G, Storage 100G</li>
</ul>
<p>The following is the environment of the machine to be deployed:</p>
<table>
<thead>
<tr>
<th style="text-align:center">IP</th>
<th style="text-align:center">Login User</th>
<th style="text-align:center">OS</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">10.168.26.216</td>
<td style="text-align:center">root</td>
<td style="text-align:center">CentOS 7.6</td>
</tr>
</tbody>
</table>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Tips</h4>
<blockquote>
<p>10.168.26.216 is the IP of this test environment, please modify accordingly according to your own environment.</p>
</blockquote>

</div>

<h3 id="related-software-dependencies">Related Software Dependencies</h3>
<ul>
<li>database: mariadb Ver 15.1 Distrib 5.5.56-MariaDB</li>
<li>docker: ce-19.03.9</li>
<li>kubernetes: v1.15.8</li>
</ul>
<h3 id="local-environment-requirements">Local environment requirements</h3>
<p>The local environment is the environment where the user performs the actual operation and deployment. The local environment for this installation is executing on a MAC OS laptop, which can also be operated on the machine to be deployed.</p>
<h4 id="configure-ssh-unencrypted-login">Configure SSH unencrypted login</h4>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Generate the local ssh keypair</span>
<span style="color:#8f5902;font-style:italic"># (SKIP this stekp if you already have ~/.ssh/id_rsa.pub locally)</span>
$ ssh-keygen

<span style="color:#8f5902;font-style:italic"># Copy the generated ~/.ssh/id_rsa.pub public key to the machine to be deployed</span>
$ ssh-copy-id -i ~/.ssh/id_rsa.pub root@10.168.26.216

<span style="color:#8f5902;font-style:italic"># Try to login to the machine to be deployed without password,</span>
<span style="color:#8f5902;font-style:italic"># should be able to get the hostname of the deployed machine</span>
<span style="color:#8f5902;font-style:italic"># without entering the login password</span>
$ ssh root@10.168.26.216 <span style="color:#4e9a06">&#34;hostname&#34;</span>
</code></pre></div><h2 id="start-installation">Start Installation</h2>
<p>The installation tool is <a href="https://github.com/yunionio/ocboot">https://github.com/yunionio/ocboot</a> , then according to the configuration of the machine to be deployed, use ansbile playbook to install and configure the Yunion OneCloud platform. The following operations are performed on the local environment and steps are as follows:</p>
<h3 id="download-ocboot">Download ocboot</h3>
<ul class="nav nav-tabs" id="ocboot_install" role="tablist"><li class="nav-item"><a data-toggle="tab" class="nav-link active" href="#ocboot_install-0" role="tab" aria-controls="ocboot_install-0" aria-selected="true">CentOS 7</a></li>
	  
		<li class="nav-item"><a data-toggle="tab" class="nav-link" href="#ocboot_install-1" role="tab" aria-controls="ocboot_install-1">Others</a></li></ul>
<div class="tab-content" id="ocboot_install"><div id="ocboot_install-0" class="tab-pane show active" role="tabpanel" aria-labelledby="ocboot_install-0">

<p><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Install ansible locally</span>
$ yum install -y epel-release ansible

<span style="color:#8f5902;font-style:italic"># Git clone the ocboot installation tool locally</span>
$ git clone -b release/3.6 https://github.com/yunionio/ocboot <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#204a87">cd</span> ./ocboot
</code></pre></div></div>
  <div id="ocboot_install-1" class="tab-pane" role="tabpanel" aria-labelledby="ocboot_install-1">

<p><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Install ansible locally</span>
$ pip install ansible

<span style="color:#8f5902;font-style:italic"># Git clone the ocboot installation tool locally</span>
$ git clone -b release/3.6 https://github.com/yunionio/ocboot <span style="color:#ce5c00;font-weight:bold">&amp;&amp;</span> <span style="color:#204a87">cd</span> ./ocboot
</code></pre></div></div></div>

<h3 id="write-deployment-configuration">Write deployment configuration</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Write config-allinone.yml configuration file</span>
$ cat <span style="color:#4e9a06">&lt;&lt;EOF &gt;./config-allinone.yml
</span><span style="color:#4e9a06"># mariadb_node indicates the node where the mariadb service needs to be deployed
</span><span style="color:#4e9a06">mariadb_node:
</span><span style="color:#4e9a06">  # IP of the machine to be deployed
</span><span style="color:#4e9a06">  hostname: 10.168.26.216
</span><span style="color:#4e9a06">  # SSH Login username of the machine to be deployed
</span><span style="color:#4e9a06">  user: root
</span><span style="color:#4e9a06">  # Username of mariadb
</span><span style="color:#4e9a06">  db_user: root
</span><span style="color:#4e9a06">  # Password of mariadb
</span><span style="color:#4e9a06">  db_password: your-sql-password
</span><span style="color:#4e9a06"># primary_master_node indicates the machine running Kubernetes and OneCloud Platform
</span><span style="color:#4e9a06">primary_master_node:
</span><span style="color:#4e9a06">  hostname: 10.168.26.216
</span><span style="color:#4e9a06">  user: root
</span><span style="color:#4e9a06">  # Database connection address
</span><span style="color:#4e9a06">  db_host: 10.168.26.216
</span><span style="color:#4e9a06">  # Database connection username
</span><span style="color:#4e9a06">  db_user: root
</span><span style="color:#4e9a06">  # Database connection password
</span><span style="color:#4e9a06">  db_password: your-sql-password
</span><span style="color:#4e9a06">  # IP of Kubernetes controlplane
</span><span style="color:#4e9a06">  controlplane_host: 10.168.26.216
</span><span style="color:#4e9a06">  # Port of Kubernetes controlplane
</span><span style="color:#4e9a06">  controlplane_port: &#34;6443&#34;
</span><span style="color:#4e9a06">  # Yunion OneCloud version
</span><span style="color:#4e9a06">  onecloud_version: &#39;v3.6.9&#39;
</span><span style="color:#4e9a06">  # Yunion OneCloud login username
</span><span style="color:#4e9a06">  onecloud_user: admin
</span><span style="color:#4e9a06">  # Yunion OneCloud login user&#39;s password
</span><span style="color:#4e9a06">  onecloud_user_password: admin@123
</span><span style="color:#4e9a06">  # This machine serves as a Yunion OneCloud private cloud computing node
</span><span style="color:#4e9a06">  as_host: true
</span><span style="color:#4e9a06">EOF</span>
</code></pre></div><h3 id="start-deployment">Start Deployment</h3>
<p>Once the config-allinone.yml deployment configuration file is filled in, you can execute the ocboot file <code>. /run.py . /config-allinone.yml</code> to deploy the cluster.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Start deployment</span>
$ ./run.py ./config-allinone.yml
....
<span style="color:#8f5902;font-style:italic"># The following output will be displayed when the deployment is completed,</span>
<span style="color:#8f5902;font-style:italic"># indicating successful operation</span>
<span style="color:#8f5902;font-style:italic"># Open with your browser at https://10.168.26.216</span>
<span style="color:#8f5902;font-style:italic"># Login with admin/admin@123 user password to access the Web UI</span>
Initialized successfully!
Web page: https://10.168.26.216
User: admin
Password: admin@123
</code></pre></div><p>Then use your browser to visit https://10.168.26.216, enter <code>admin</code> for username and <code>admin@123</code> for password and you will see the Web UI.</p>
<p><img src="../images/index.png" alt="Login UI"></p>
<h3 id="create-the-first-virtual-machine">Create the first virtual machine</h3>
<p>The first virtual machine is created in three steps as follows.</p>
<h4 id="1-import-images">1. Import Images</h4>
<p>Browse to <a href="https://cloud.centos.org/centos/7/images/">CentOS 7 cloud hosting image</a>, select a GenericCloud image, and copy the image URL.</p>
<p>In the <code>Compute</code> menu, select <code>Images</code> then select <code>Upload</code> menu. Enter the image name, select <code>Enter the image URL</code>, paste the above CentOS 7 image URL and select <code>OK</code>.</p>
<p>Additional virtual machine images can be obtained by visiting <a href="https://docs.openstack.org/image-guide/obtain-images.html">https://docs.openstack.org/image-guide/obtain-images.html</a>.</p>
<h4 id="2-create-networks-vpc-and-ip-subnets">2. Create networks (VPC and IP subnets)</h4>
<ul>
<li>Create VPC</li>
</ul>
<p>In the <code>Network</code> menu, select the <code>VPC</code> submenu and choose <code>Create</code>. Enter a name, e.g. <code>vpc0</code>, and select the target segment, e.g. <code>192.168.0.0/16</code>. Click <code>Create</code>.</p>
<ul>
<li>Create IP Subnetes</li>
</ul>
<p>After the VPC is created, select the <code>IP Subnets</code> submenu and choose <code>Create</code>. Enter a name, for example <code>vnet0</code>, select VPC as the VPC you just created <code>vpc0</code>, select the available zone. Enter <code>subnet segment</code>, e.g. <code>192.168.100.0/24</code>. Click <code>Create</code>.</p>
<h4 id="3-create-virtual-machine">3. Create Virtual Machine</h4>
<p>In the <code>Compute</code> menu, select <code>Servers</code> and choose <code>Create</code>. In this UI, enter the hostname, select the mirror and IP subnet, and create the virtual machine.</p>
<h3 id="import-public-cloud-or-other-private-cloud-platform-resources">Import public cloud or other private cloud platform resources</h3>
<p>Yunion OneCloud itself is a complete private cloud, and can also unify and manage resources from other cloud platforms.</p>
<p>In the <code>Multicloud</code> menu, select <code>Accounts</code> and create a new one, fill in the authentication information of the corresponding cloud platform according to your needs, and after configuring the cloud account, the Yunion OneCloud service will synchronize the resources of the corresponding cloud platform, and you can view them in the Web UI after the synchronization is completed.</p>
<p><img src="../images/cloudaccount.png" alt="Multicloud Management"></p>
<h2 id="faq">FAQ</h2>
<h3 id="1-cant-find-the-virtual-machine-menu-in-web-ui">1. Can&rsquo;t find the virtual machine menu in Web UI?</h3>
<p>Machine deployed using the All in One way is treated as Yunion OneCloud private cloud computing node by default, which has the ability to create and manage virtual machines.</p>
<p>If there is no virtual machine creation button it should be that the private cloud computing node is not enabled.</p>
<p>Please go to the Web UI, click <code>Compute/Physical Resources/Hosts</code> to view the list of hosts, enable the corresponding hosts, refresh the interface and the virtual machine creation button will appear.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Attention</h4>
<p>If you want to use Yunion OneCloud private cloud, you need ensure the computing machine use the kernel compiled by us. You can use the following command to check whether the host uses the kernel including the <code>yn</code> keyword.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Check if yn keyword kernel is used</span>
$ uname -a <span style="color:#000;font-weight:bold">|</span> grep yn
Linux office-controller 3.10.0-1062.4.3.el7.yn20191203.x86_64
<span style="color:#8f5902;font-style:italic"># If the kernel is not the version with the yn keyword,</span>
<span style="color:#8f5902;font-style:italic"># it may be the first time you install it using ocboot,</span>
<span style="color:#8f5902;font-style:italic"># and you can reboot into the yn kernel</span>
$ reboot
</code></pre></div>
</div>

<p><img src="../images/host.png" alt="Host"></p>
<h3 id="2-change-the-hostname-of-the-node-some-services-fail-to-start">2. Change the hostname of the node, some services fail to start</h3>
<p>Yunion OneCloud uses Kubernetes management node, depends on hostname, please change it back.</p>
<h3 id="3-how-to-reinstall">3. How to reinstall</h3>
<ol>
<li>
<p>SSH login the remote machine, execute the command <code>ocadm reset -f</code>.</p>
</li>
<li>
<p>Rerun ocboot <code>run.py</code> script.</p>
</li>
<li>
<p>Waiting for the run to finish，use command <code>kubectl edit deployment onecloud-operator -n onecloud</code>. Add the following parameters, then save to close.</p>
</li>
</ol>
<p><img src="../images/oo_syncuser.png" alt=""></p>
<ol start="4">
<li>The modification in step 3 will affect the performance of onecloud-operator, so you can restore the parameters in step 3 when all services are started.</li>
</ol>
<h3 id="4-other-questions">4. Other questions？</h3>
<p>Other questions are welcome to submit Yunion OneCloud github issues: <a href="https://github.com/yunionio/onecloud/issues">https://github.com/yunionio/onecloud/issues</a> , we will reply as soon as possible.</p>

	
		<style>
  .feedback--answer {
    display: inline-block;
  }
  .feedback--answer-no {
    margin-left: 1em;
  }
  .feedback--response {
    display: none;
    margin-top: 1em;
  }
  .feedback--response__visible {
    display: block;
  }
</style>
<h2 class="feedback--title">Feedback</h2>
<p class="feedback--question">Was this page helpful?</p>
<button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button>
<p class="feedback--response feedback--response-yes">
  Glad to hear it! Please <a href="https://github.com/yunionio/docs/issues/new">tell us how we can improve</a>.
</p>
<p class="feedback--response feedback--response-no">
  Sorry to hear that. Please <a href="https://github.com/yunionio/docs/issues/new">tell us how we can improve</a>.
</p>
<script>
  const yesButton = document.querySelector('.feedback--answer-yes');
  const noButton = document.querySelector('.feedback--answer-no');
  const yesResponse = document.querySelector('.feedback--response-yes');
  const noResponse = document.querySelector('.feedback--response-no');
  const disableButtons = () => {
    yesButton.disabled = true;
    noButton.disabled = true;
  };
  const sendFeedback = (value) => {
    if (typeof ga !== 'function') return;
    const args = {
      command: 'send',
      hitType: 'event',
      category: 'Helpful',
      action: 'click',
      label: window.location.pathname,
      value: value
    };
    ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
  };
  yesButton.addEventListener('click', () => {
    yesResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(1);
  });
  noButton.addEventListener('click', () => {
    noResponse.classList.add('feedback--response__visible');
    disableButtons();
    sendFeedback(0);
  });
</script>

		<br />
	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified 23.03.2021: <a  href="https://github.com/yunionio/docs/commit/0b6cb9001660a89a878e5faf0b7731a8a9cb7eee">feat: english version (0b6cb90)</a>
</div>
</div>


          </main>
        </div>
      </div>
      

    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>













<script src="/js/main.min.850adc61a285d99ce101da9e59e623e62775ccafff57d900b719ecf4669196b4.js" integrity="sha256-hQrcYaKF2ZzhAdqeWeYj5id1zK//V9kAtxns9GaRlrQ=" crossorigin="anonymous"></script>




  </body>
</html>