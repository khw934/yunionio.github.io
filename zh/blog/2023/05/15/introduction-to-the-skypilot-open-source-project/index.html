<!doctype html><html lang=zh class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.83.1"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>SkyPilot：构建在多云之上的 ML 和数据科学，可节约 3 倍以上成本</title><meta property="og:title" content="SkyPilot：构建在多云之上的 ML 和数据科学，可节约 3 倍以上成本"><meta property="og:description" content="整理: 高现起
导读：用于 ML 和数据科学的云计算已经比较困难，如果你想要通过成本优化削减成本，你的整体成本包括资源和人力，可能会不降反增。不想在机器闲置时停止？因为这样你可能需要反复的启停，并且重新配置环境或者准备数据。想要通过使用抢占实例降低成本？解决抢占实例的调度问题也可能会花上几周时间。如何很好的利用地区之间的巨大价格差异，或者不同云厂商之间更大的价格差异来降低成本？
如果云上有一个简单、统一的 ML 和数据科学接口，具有成本效益、容错性、多区域和多云，是不是会更好？今天就给大家介绍一个项目，会从以下几个方面展开：
 SkyPilot 项目介绍 SkyPilot 工作原理 SkyPilot 使用场景 为什么多云成为新常态？  以下为详细内容。
SkyPilot 项目介绍 SkyPilot，由加州大学伯克利分校的 Sky Computing 实验室主导研发的一个开源框架，用于在任何云上无缝且经济高效地运行 ML 和数据科学批处理作业。它的目标是让云比以往任何时候都更容易使用，成本更低，并且全程不需要云计算相关的专业知识。
近一年多来，SkyPilot 一直在加州大学伯克利分校的天空计算实验室积极开发。它被 10 多个组织用于各种用例，包括：GPU/TPU 模型训练（成本节省 3 倍）、分布式超参数调优以及 100 多个 CPU 抢占实例上的生物信息学批处理作业（在持续使用的基础上成本节省 6.5 倍）。
SkyPilot 工作原理 给定一个作业及其资源需求（CPU/GPU/TPU），SkyPilot 会自动找出哪些位置（可用区/区域/云厂商）具有运行该作业的计算能力，然后将其发送到成本最低的位置执行。
SkyPilot 自动执行云上正在运行的作业的繁重工作：
 可靠地配置集群，如果发生容量或配额错误，自动故障转移到其他位置 将用户代码和文件（从本地或云存储桶）同步到集群 管理作业排队和执行  SkyPilot 还大大减少了不断增长的云费用，通常减少 3 倍以上：
 自动找到所需资源的最便宜的可用区/区域/云厂商（节省约 2 倍的成本） Managed Spot，通过使用抢占实例节省约 3-6 倍的成本，并自动从抢占中恢复 Autostop，自动清理空闲集群——可避免的云超支的最大贡献者  SkyPilot 的使用场景 在过去的几个月里，逐渐向来自 10 多个组织的数十名 ML/数据科学从业者和研究人员推荐了 SkyPilot。从用户反馈中，看到该系统确实解决了他们遇到的常见痛点。"><meta property="og:type" content="article"><meta property="og:url" content="https://www.cloudpods.org/zh/blog/2023/05/15/introduction-to-the-skypilot-open-source-project/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-05-15T00:00:00+00:00"><meta property="article:modified_time" content="2023-05-15T00:00:00+00:00"><meta property="og:site_name" content="Cloudpods"><meta itemprop=name content="SkyPilot：构建在多云之上的 ML 和数据科学，可节约 3 倍以上成本"><meta itemprop=description content="整理: 高现起
导读：用于 ML 和数据科学的云计算已经比较困难，如果你想要通过成本优化削减成本，你的整体成本包括资源和人力，可能会不降反增。不想在机器闲置时停止？因为这样你可能需要反复的启停，并且重新配置环境或者准备数据。想要通过使用抢占实例降低成本？解决抢占实例的调度问题也可能会花上几周时间。如何很好的利用地区之间的巨大价格差异，或者不同云厂商之间更大的价格差异来降低成本？
如果云上有一个简单、统一的 ML 和数据科学接口，具有成本效益、容错性、多区域和多云，是不是会更好？今天就给大家介绍一个项目，会从以下几个方面展开：
 SkyPilot 项目介绍 SkyPilot 工作原理 SkyPilot 使用场景 为什么多云成为新常态？  以下为详细内容。
SkyPilot 项目介绍 SkyPilot，由加州大学伯克利分校的 Sky Computing 实验室主导研发的一个开源框架，用于在任何云上无缝且经济高效地运行 ML 和数据科学批处理作业。它的目标是让云比以往任何时候都更容易使用，成本更低，并且全程不需要云计算相关的专业知识。
近一年多来，SkyPilot 一直在加州大学伯克利分校的天空计算实验室积极开发。它被 10 多个组织用于各种用例，包括：GPU/TPU 模型训练（成本节省 3 倍）、分布式超参数调优以及 100 多个 CPU 抢占实例上的生物信息学批处理作业（在持续使用的基础上成本节省 6.5 倍）。
SkyPilot 工作原理 给定一个作业及其资源需求（CPU/GPU/TPU），SkyPilot 会自动找出哪些位置（可用区/区域/云厂商）具有运行该作业的计算能力，然后将其发送到成本最低的位置执行。
SkyPilot 自动执行云上正在运行的作业的繁重工作：
 可靠地配置集群，如果发生容量或配额错误，自动故障转移到其他位置 将用户代码和文件（从本地或云存储桶）同步到集群 管理作业排队和执行  SkyPilot 还大大减少了不断增长的云费用，通常减少 3 倍以上：
 自动找到所需资源的最便宜的可用区/区域/云厂商（节省约 2 倍的成本） Managed Spot，通过使用抢占实例节省约 3-6 倍的成本，并自动从抢占中恢复 Autostop，自动清理空闲集群——可避免的云超支的最大贡献者  SkyPilot 的使用场景 在过去的几个月里，逐渐向来自 10 多个组织的数十名 ML/数据科学从业者和研究人员推荐了 SkyPilot。从用户反馈中，看到该系统确实解决了他们遇到的常见痛点。"><meta itemprop=datePublished content="2023-05-15T00:00:00+00:00"><meta itemprop=dateModified content="2023-05-15T00:00:00+00:00"><meta itemprop=wordCount content="224"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="SkyPilot：构建在多云之上的 ML 和数据科学，可节约 3 倍以上成本"><meta name=twitter:description content="整理: 高现起
导读：用于 ML 和数据科学的云计算已经比较困难，如果你想要通过成本优化削减成本，你的整体成本包括资源和人力，可能会不降反增。不想在机器闲置时停止？因为这样你可能需要反复的启停，并且重新配置环境或者准备数据。想要通过使用抢占实例降低成本？解决抢占实例的调度问题也可能会花上几周时间。如何很好的利用地区之间的巨大价格差异，或者不同云厂商之间更大的价格差异来降低成本？
如果云上有一个简单、统一的 ML 和数据科学接口，具有成本效益、容错性、多区域和多云，是不是会更好？今天就给大家介绍一个项目，会从以下几个方面展开：
 SkyPilot 项目介绍 SkyPilot 工作原理 SkyPilot 使用场景 为什么多云成为新常态？  以下为详细内容。
SkyPilot 项目介绍 SkyPilot，由加州大学伯克利分校的 Sky Computing 实验室主导研发的一个开源框架，用于在任何云上无缝且经济高效地运行 ML 和数据科学批处理作业。它的目标是让云比以往任何时候都更容易使用，成本更低，并且全程不需要云计算相关的专业知识。
近一年多来，SkyPilot 一直在加州大学伯克利分校的天空计算实验室积极开发。它被 10 多个组织用于各种用例，包括：GPU/TPU 模型训练（成本节省 3 倍）、分布式超参数调优以及 100 多个 CPU 抢占实例上的生物信息学批处理作业（在持续使用的基础上成本节省 6.5 倍）。
SkyPilot 工作原理 给定一个作业及其资源需求（CPU/GPU/TPU），SkyPilot 会自动找出哪些位置（可用区/区域/云厂商）具有运行该作业的计算能力，然后将其发送到成本最低的位置执行。
SkyPilot 自动执行云上正在运行的作业的繁重工作：
 可靠地配置集群，如果发生容量或配额错误，自动故障转移到其他位置 将用户代码和文件（从本地或云存储桶）同步到集群 管理作业排队和执行  SkyPilot 还大大减少了不断增长的云费用，通常减少 3 倍以上：
 自动找到所需资源的最便宜的可用区/区域/云厂商（节省约 2 倍的成本） Managed Spot，通过使用抢占实例节省约 3-6 倍的成本，并自动从抢占中恢复 Autostop，自动清理空闲集群——可避免的云超支的最大贡献者  SkyPilot 的使用场景 在过去的几个月里，逐渐向来自 10 多个组织的数十名 ML/数据科学从业者和研究人员推荐了 SkyPilot。从用户反馈中，看到该系统确实解决了他们遇到的常见痛点。"><link rel=preload href=/scss/main.min.cb7e4d75313a8182176f2b28b0ce364c4cd309f2387eb9f5a98b59f902ffd8b3.css as=style><link href=/scss/main.min.cb7e4d75313a8182176f2b28b0ce364c4cd309f2387eb9f5a98b59f902ffd8b3.css rel=stylesheet integrity><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/fuse.js@6.6.2></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-LX0MD5KG60"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-LX0MD5KG60')</script></head><body class="td-page td-blog"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark navbar-ce flex-column flex-md-row td-navbar"><a id=cloudpods-top href=/zh/ class="logo flex-shrink-0 navbar-brand"><img src=https://www.cloudpods.org/images/cloudpods_logo_white.png height=46></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/zh/docs/quickstart/><span>快速开始</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/zh/docs/><span>文档</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://www.yunion.cn/subscription/index.html target=_blank><span>服务订阅</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/zh/blog/><span class=active>博客</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/yunionio/cloudpods target=_blank><span>GitHub</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/zh/docs/swagger><span>API</span></a></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>3.10</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/>v3.10 (latest)</a>
<a class=dropdown-item href=/v3.9>v3.9</a>
<a class=dropdown-item href=/v3.8>v3.8</a>
<a class=dropdown-item href=/v3.7>v3.7</a>
<a class=dropdown-item href=/v3.6>v3.6</a>
<a class=dropdown-item href=/v3.4>v3.4</a>
<a class=dropdown-item href=/v3.3>v3.3</a>
<a class=dropdown-item href=/v3.2>v3.2</a></div></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/en/>English</a></div></li></ul></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off data-offline-search-index-json-src=/offline-search-index.1369943116b439aef7a3bee3e532cbf8.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/en/>English</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-zhblog-li><a href=/zh/blog/ title="Cloudpods 博客" class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-zhblog><span>博客</span>
<span class=td-sidebar-section_icon-wrapper></span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhblog20230523refactoring-bash-scripts-to-comply-with-the-google-coding-style-li><a href=/zh/blog/2023/05/23/refactoring-bash-scripts-to-comply-with-the-google-coding-style/ class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhblog20230523refactoring-bash-scripts-to-comply-with-the-google-coding-style><span>记一次符合 Google Coding Style 的 Bash 脚本重构</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-zhblog20230515introduction-to-the-skypilot-open-source-project-li><a href=/zh/blog/2023/05/15/introduction-to-the-skypilot-open-source-project/ class="td-sidebar-section_flex pl-0 active td-sidebar-link td-sidebar-link__page" id=m-zhblog20230515introduction-to-the-skypilot-open-source-project><span class=td-sidebar-nav-active-item>SkyPilot：构建在多云之上的 ML 和数据科学，可节约 3 倍以上成本</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhblog20221129cloudpods-k8s-experience-sharing-li><a href=/zh/blog/2022/11/29/cloudpods-k8s-experience-sharing/ class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhblog20221129cloudpods-k8s-experience-sharing><span>Cloudpods容器化经验分享</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhblog20220202cloudpods-golang-li><a href=/zh/blog/2022/02/02/cloudpods-golang/ class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhblog20220202cloudpods-golang><span>Cloudpods Golang实践</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhblog20220121skycomputing-li><a href=/zh/blog/2022/01/21/skycomputing/ class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhblog20220121skycomputing><span>天空计算——云计算的下一个时代？</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhblog20211009rook-ceph-with-cloudpods-li><a href=/zh/blog/2021/10/09/rook-ceph-with-cloudpods/ class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhblog20211009rook-ceph-with-cloudpods><span>Cloudpods + Rook + Ceph: 轻松实现云原生的超融合私有云</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhblog20210925calico-customized-node-firewall-li><a href=/zh/blog/2021/09/25/calico-customized-node-firewall/ class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhblog20210925calico-customized-node-firewall><span>用Calico网络策略设置主机node防火墙规则</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhblog20210702ocfs2-as-san-filesystem-li><a href=/zh/blog/2021/07/02/ocfs2-as-san-filesystem/ class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhblog20210702ocfs2-as-san-filesystem><span>QEMU+OCFS2: 使用OCFS2作为虚拟机磁盘文件的SAN存储文件系统</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhblog20210701cloudpods-lb-application-intro-li><a href=/zh/blog/2021/07/01/cloudpods-lb-application-intro/ class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhblog20210701cloudpods-lb-application-intro><span>问题分析：为什么keystone的本地用户认证接口压测性能很差？</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhblog20210625cgroups-kubernetes-pid-limits-li><a href=/zh/blog/2021/06/25/cgroups-kubernetes-pid-limits/ class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhblog20210625cgroups-kubernetes-pid-limits><span>使用 Cgroups 限制 Kubernetes Pod 进程数</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhblog20210607nvidia-gpu-passthrough-record-li><a href=/zh/blog/2021/06/07/nvidia-gpu-passthrough-record/ class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhblog20210607nvidia-gpu-passthrough-record><span>使用Linux vfio将Nvidia GPU透传给QEMU虚拟机</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhblog20210531cloudpods-37-new-feature-introduction-li><a href=/zh/blog/2021/05/31/cloudpods-3.7-new-feature-introduction/ class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhblog20210531cloudpods-37-new-feature-introduction><span>直播回顾：Cloudpods 3.7版本新功能介绍</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhblog20210531cloudpods-lb-application-intro-li><a href=/zh/blog/2021/05/31/cloudpods-lb-application-intro/ class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhblog20210531cloudpods-lb-application-intro><span>直播回顾：Cloudpods负载均衡的功能介绍</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-zhblog20190613unified-iaas-for-future-li><a href=/zh/blog/2019/06/13/unified-iaas-for-future/ class="td-sidebar-section_flex pl-0 td-sidebar-link td-sidebar-link__page" id=m-zhblog20190613unified-iaas-for-future><span>面向未来的 IT 基础设施管理架构——融合云（Unified IaaS）</span></a></li></ul></li></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/yunionio/docs/edit/master/content/zh/blog/_posts/2023-05-15-introduction-to-the-skypilot-open-source-project.md target=_blank><i class="fa fa-edit fa-fw"></i> 编辑此页</a>
<a href="https://github.com/yunionio/docs/new/master/content/zh/blog/_posts/2023-05-15-introduction-to-the-skypilot-open-source-project.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> 添加子页面</a>
<a href=https://github.com/yunionio/cloudpods/issues/new/choose target=_blank><i class="fas fa-tasks fa-fw"></i> 提交项目问题</a>
<a href="https://github.com/yunionio/cloudpods/issues/new?title=[Docs]%20SkyPilot%ef%bc%9a%e6%9e%84%e5%bb%ba%e5%9c%a8%e5%a4%9a%e4%ba%91%e4%b9%8b%e4%b8%8a%e7%9a%84%20ML%20%e5%92%8c%e6%95%b0%e6%8d%ae%e7%a7%91%e5%ad%a6%ef%bc%8c%e5%8f%af%e8%8a%82%e7%ba%a6%203%20%e5%80%8d%e4%bb%a5%e4%b8%8a%e6%88%90%e6%9c%ac" target=_blank><i class="fab fa-github fa-fw"></i> 提交文档问题</a></div><div id=toc-hidden><nav id=TableOfContents><ul><li><a href=#在-gpu-和-tpu-上进行-ml-训练和超参数调整>在 GPU 和 TPU 上进行 ML 训练和超参数调整</a></li><li><a href=#cpu-抢占实例上的生物信息学批处理作业成本节省-65-倍>CPU 抢占实例上的生物信息学批处理作业，成本节省 6.5 倍</a></li><li><a href=#使用-skypilot-构建基于多云的应用>使用 SkyPilot 构建基于多云的应用</a></li></ul><ul><li><a href=#减少开支>减少开支</a></li><li><a href=#利用一流的硬件>利用一流的硬件</a></li><li><a href=#增加稀缺资源的可用性>增加稀缺资源的可用性</a></li><li><a href=#单云用户也想要多个区域>单云用户也想要多个区域</a></li></ul></nav></div><script>let tocNode=document.getElementById('toc-hidden'),list=clectionLis1(),ul=createList(list);tocNode.innerHTML='',tocNode.appendChild(ul),setTimeout(()=>{initActiveToc(),addEventListener()},0);function addEventListener(){document.getElementById('toc-hidden').onclick=function(c){let a=c||window.event,b=a.target||a.srcElement;b.nodeName.toLowerCase()=='a'&&setTimeout(()=>{changeTocActive(b.parentNode)},0)},window.onscroll=function(a){initActiveToc()}}function initActiveToc(){let a=getBoundingClientNode('h2'),b=getBoundingClientNode('h3'),c=a.currentNode||b.currentNode;if(a.currentNode&&b.currentNode&&(c=Math.abs(a.y)<Math.abs(b.y)?a.currentNode:b.currentNode),!c)return;changeTocActive(c)}function changeTocActive(c){let d=c.getAttribute('id')||c.getAttribute('text')?.replace('#',''),a=document.getElementsByClassName('li1-item'),b=document.getElementsByClassName('li2-item');for(let b=0;b<a.length;b++){let c=a[b].getAttribute('text')||'';c.replace('#','')==d?a[b].classList.add('active'):a[b].classList.remove('active')}for(let a=0;a<b.length;a++){let c=b[a].getAttribute('text')||'';c.replace('#','')==d?b[a].classList.add('active'):b[a].classList.remove('active')}}function getBoundingClientNode(c){let a={nodes:[],currentNode:null,index:-1,y:0},b=Array.from(document.getElementsByTagName(c));a.nodes=b;for(let c=0;c<b.length;c++){let d=b[c].getBoundingClientRect();if(d.y<=0&&(a.y=d.y,a.currentNode=b[c],a.index=c),d.y>0&&d.y<window.innerHeight){a.y=d.y,a.currentNode=b[c],a.index=c;break}}return a}function createList(a){let b=createNode('ul');return a.map((c,i)=>{let f=['li1-item'],g=['li1-item-topborder'];i!==0&&g.push('show');let h=['li1-item-bottomborder'];i!==a.length-1?h.push('show'):f.push('no-border');let e=createNode('li',{classList:f,text:c.href}),j=createNode('a',{href:c.href,innerHTML:c.text}),d=createNode('div',{classList:['li1-item-style']}),k=createNode('div',{classList:g}),l=createNode('div',{classList:h}),m=createNode('div',{classList:['mask-line']}),n=createNode('div',{classList:['li1-item-style-dotted']});if(d.appendChild(k),d.appendChild(l),d.appendChild(m),d.appendChild(n),e.appendChild(j),e.appendChild(d),c.ul.length){let a=createNode('ul');c.ul.map((b,f)=>{let c=createNode('li',{classList:['li2-item'],text:b.href}),d=createNode('a',{href:b.href,innerHTML:b.text}),e=createNode('div',{classList:['li2-item-style']});c.appendChild(d),c.appendChild(e),a.appendChild(c)}),e.appendChild(a)}b.appendChild(e)}),b}function createNode(g,f={}){let a=document.createElement(g);const{classList:c,innerHTML:d,href:e,text:b}=f;return c&&c.map(b=>{a.classList.add(b)}),d&&(a.innerHTML=d),e&&(a.href=e),b&&a.setAttribute('text',b),a}function clectionLis1(){let b=[],a=document.getElementById('TableOfContents')?.firstElementChild||{children:[]};for(let c=0;c<a.children.length;c++){let e=a.children[c].firstElementChild,g=a.children[c].lastChild,d=a.children[c].children[1]||'',f={text:e.innerHTML,href:e.getAttribute('href'),ul:[]};if(d)for(let a=0;a<d.children.length;a++){let b=d.children[a].firstElementChild;f.ul.push({text:b.innerHTML,href:b.getAttribute('href')})}b.push(f)}return b}</script></div><main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role=main><a class="btn btn-lg -bg-orange td-rss-button d-none d-lg-block" href=https://www.cloudpods.org/zh/blog/index.xml target=_blank>RSS <i class="fa fa-rss ml-2"></i></a><div class=td-content><h1>SkyPilot：构建在多云之上的 ML 和数据科学，可节约 3 倍以上成本</h1><div class="td-byline mb-4"><time datetime=2023-05-15 class=text-muted>15.05.2023</time></div><p><strong>整理:</strong> 高现起</p><p>导读：用于 ML 和数据科学的云计算已经比较困难，如果你想要通过成本优化削减成本，你的整体成本包括资源和人力，可能会不降反增。不想在机器闲置时停止？因为这样你可能需要反复的启停，并且重新配置环境或者准备数据。想要通过使用抢占实例降低成本？解决抢占实例的调度问题也可能会花上几周时间。如何很好的利用地区之间的巨大价格差异，或者不同云厂商之间更大的价格差异来降低成本？</p><p>如果云上有一个简单、统一的 ML 和数据科学接口，具有成本效益、容错性、多区域和多云，是不是会更好？今天就给大家介绍一个项目，会从以下几个方面展开：</p><ul><li>SkyPilot 项目介绍</li><li>SkyPilot 工作原理</li><li>SkyPilot 使用场景</li><li>为什么多云成为新常态？</li></ul><p>以下为详细内容。</p><h1 id=skypilot-项目介绍>SkyPilot 项目介绍</h1><p>SkyPilot，由加州大学伯克利分校的 Sky Computing 实验室主导研发的一个开源框架，用于在任何云上无缝且经济高效地运行 ML 和数据科学批处理作业。它的目标是让云比以往任何时候都更容易使用，成本更低，并且全程不需要云计算相关的专业知识。</p><p><img src=https://pic2.zhimg.com/v2-7f5fe6f9e99f998630929da9e8739591_b.gif alt="SkyPilot 项目介绍"></p><p>近一年多来，SkyPilot 一直在加州大学伯克利分校的天空计算实验室积极开发。它被 10 多个组织用于各种用例，包括：GPU/TPU 模型训练（成本节省 3 倍）、分布式超参数调优以及 100 多个 CPU 抢占实例上的生物信息学批处理作业（在持续使用的基础上成本节省 6.5 倍）。</p><h1 id=skypilot-工作原理>SkyPilot 工作原理</h1><p>给定一个作业及其资源需求（CPU/GPU/TPU），SkyPilot 会自动找出哪些位置（可用区/区域/云厂商）具有运行该作业的计算能力，然后将其发送到成本最低的位置执行。</p><p><img src=https://pic3.zhimg.com/v2-535dd856b0af5ad19b26aaa68914a54a_b.jpg alt="SkyPilot 工作原理"></p><p>SkyPilot 自动执行云上正在运行的作业的繁重工作：</p><ul><li>可靠地配置集群，如果发生容量或配额错误，自动故障转移到其他位置</li><li>将用户代码和文件（从本地或云存储桶）同步到集群</li><li>管理作业排队和执行</li></ul><p>SkyPilot 还大大减少了不断增长的云费用，通常减少 3 倍以上：</p><ul><li>自动找到所需资源的最便宜的可用区/区域/云厂商（节省约 2 倍的成本）</li><li>Managed Spot，通过使用抢占实例节省约 3-6 倍的成本，并自动从抢占中恢复</li><li>Autostop，自动清理空闲集群——可避免的云超支的最大贡献者</li></ul><h1 id=skypilot-的使用场景>SkyPilot 的使用场景</h1><p>在过去的几个月里，逐渐向来自 10 多个组织的数十名 ML/数据科学从业者和研究人员推荐了 SkyPilot。从用户反馈中，看到该系统确实解决了他们遇到的常见痛点。</p><p>出现了几种使用场景，从交互式开发到跨区域或跨云厂商运行许多的项目，再到横向扩展：</p><p><img src=https://pic1.zhimg.com/v2-d0c9a2e505bc9255d62b3127d85901f0_b.jpg alt="SkyPilot 的使用场景"></p><h2 id=在-gpu-和-tpu-上进行-ml-训练和超参数调整>在 GPU 和 TPU 上进行 ML 训练和超参数调整</h2><p>伯克利人工智能研究所 ( BAIR ) 和斯坦福大学的领先机器学习团队一直在使用 SkyPilot 在云端运行机器学习训练。用户通常在不更改代码的情况下启动他们现有的 ML 项目。可靠地配置 GPU 实例、在集群上排队许多作业以及同时运行约 100 个超参数试验是用户反馈的主要优点。此外，用户在 AWS 上运行的相同作业只需更改一个参数就可以在 GCP/Azure 上运行。</p><p>用户还使用 SkyPilot 在谷歌的 TPU 上训练大模型。研究人员可以通过 TRC 程序申请免费的 TPU 访问权限，然后使用 SkyPilot 快速上手 TPU。</p><h2 id=cpu-抢占实例上的生物信息学批处理作业成本节省-65-倍>CPU 抢占实例上的生物信息学批处理作业，成本节省 6.5 倍</h2><p>生物研究所 Salk 的科学家们一直在使用 SkyPilot 在抢占实例上运行每周定期执行的批处理作业任务。这些作业分别操作序列的不同部分，之前一直以一种令人尴尬的情况并行。使用 SkyPilot 的 Managed Spot 功能之后，Salk 的科学家们可以在数百个 CPU 抢占实例上进行计算，与使用按需实例相比成本降低了 6.5 倍，并且与使用繁忙的本地集群相比显著缩短了任务处理时间。Salk 用户反馈到，通过抽象化云计算技术，SkyPilot 让他们能够更专注于科学研究而非云端技术细节问题。</p><h2 id=使用-skypilot-构建基于多云的应用>使用 SkyPilot 构建基于多云的应用</h2><p>一些行业合作伙伴已经在 SkyPilot 的 API 之上构建了更多云厂商的 lib 库。SkyPilot 使更多应用从第一天起就可以使用与云厂商无关的界面在不同的云上运行（这与 Terraform 等工具形成对比，后者虽然功能强大，但专注于较低级别的基础设施而不是作业，并且需要特定于云厂商的模板）。开发人员喜欢开箱即用地在不同云厂商可靠地配置和运行作业的能力，这样他们就可以专注于应用的业务逻辑，而不是熟悉各个云厂商的功能操作。</p><h1 id=为什么多云成为新常态>为什么多云成为新常态？</h1><p>多云和多区域的增长趋势促使构建了 SkyPilot。出于战略原因，企业组织越来越多地使用多个公有云，例如更高的可靠性、避免云供应商锁定、更强的议价能力等。</p><p>即使从用户（例如，机器学习工程师或数据科学家）的角度来看，也有很多理由可以根据工作负载使用多云：</p><h2 id=减少开支>减少开支</h2><p>使用相同/相似硬件的最优惠价格的云厂商可以自动节省大量成本。以 GPU 为例。在 2022 年底时，Azure 拥有最便宜的 NVIDIA A100 GPU 实例，GCP 和 AWS 分别收取 8% 和 20% 的溢价。</p><p><img src=https://pic2.zhimg.com/v2-d7865ffc53f8bb870ccd7e6460bcc7b9_b.jpg alt=减少开支></p><p>CPU 也存在价格差异。对于最新的通用实例（相同的 vCPU/内存），差异可能超过 50%（见上图）。</p><h2 id=利用一流的硬件>利用一流的硬件</h2><p>正处于计算机体系结构的新黄金时代，专用硬件正在推动性能和效率的大幅提升。毫不奇怪，云厂商越来越多地提供定制硬件以从竞争中脱颖而出。例子包括：</p><ul><li>GCP 用于高性能 ML 训练的 TPU</li><li>用于经济高效的 ML 推理的 AWS Inferentia 和用于 CPU 工作负载的 Graviton 处理器</li><li>用于机密计算的 Azure 英特尔 SGX</li></ul><p>使用更适合工作负载的硬件，可以显著的降低成本或提高性能，一般这些硬件位于不同的云厂商那里。</p><h2 id=增加稀缺资源的可用性>增加稀缺资源的可用性</h2><p>理想的云实例很难获得。使用 NVIDIA V100 和 A100 等高端 GPU 的按需实例经常售罄。具有 GPU 或大量 CPU 的抢占实例甚至几乎不可能获得。根据经验，一般需要等待几小时或者几天的时间才能获取这些稀缺资源。</p><p>为了提高成功获取此类资源的机会，一种自然的方法是使用多云。（假设每个云有 40% 的机会提供资源；使用 3 个云将机会增加到 1–0.6³ = 78%。）</p><h2 id=单云用户也想要多个区域>单云用户也想要多个区域</h2><p>有趣的是，上述所有好处也都适用于单云的多个区域：</p><p>(1) 不同可用区/区域的价格差异也很大。对于普通的 GPU/CPU，跨区按需价格差异可能高达20%（见下图）。对于现货实例，价格差异很容易超过 3 倍。简单地说：用户可以通过在同一个云厂商跨多个可用区/区域购买来降低成本。</p><p><img src=https://pic4.zhimg.com/v2-dcc7ff73648d99e0600ba8e8114981e3_b.jpg alt=不同可用区/区域的价格差异也很大></p><p>(2) 硬件/服务产品因云区域而异。例如，GCP 的 TPU V3 仅在其 35 个全球区域中的 2 个区域可用。</p><p>(3) 分散从多个区域获取稀缺资源更容易成功。</p><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a href=/zh/blog/2022/11/29/cloudpods-k8s-experience-sharing/ class="btn btn-primary"><span class=mr-1>←</span> 上一页</a></li><a href=/zh/blog/2023/05/23/refactoring-bash-scripts-to-comply-with-the-google-coding-style/ class="btn btn-primary">下一页 <span class=ml-1>→</span></a></li></ul></div></main></div></div><script>var _hmt=_hmt||[];(function(){var a=document.createElement("script"),b;a.src="https://hm.baidu.com/hm.js?3c5253cd6530122d0f774cab69e3c07f",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script><footer class="bg-dark pt-4 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>Copyright &copy; 2017-2023 The Cloudpods Authors.</small>
<a href=https://beian.miit.gov.cn/ style=text-decoration:none;color:inherit;display:block class=text-white>京ICP备2021005745号-3</a></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.97bb03aa99e8cdba0d042be465704afbbf612fb5b518003fe3cb7df2f0d43362.js integrity="sha256-l7sDqpnozboNBCvkZXBK+79hL7W1GAA/48t98vDUM2I=" crossorigin=anonymous></script></body></html>