<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Cloudpods –
认证与权限</title><link>https://www.cloudpods.org/zh/docs/auth_security/</link><description>Recent content in 认证与权限 on Cloudpods</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Fri, 19 Jul 2019 20:51:23 +0800</lastBuildDate><atom:link href="https://www.cloudpods.org/zh/docs/auth_security/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: 域（租户）</title><link>https://www.cloudpods.org/zh/docs/auth_security/domain/</link><pubDate>Sun, 04 Aug 2019 20:51:23 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/auth_security/domain/</guid><description>
&lt;p>为了实现多租户的效果，认证服务提供了域的概念，一个域下有一个完整的用户认证体系和资源和权限体系，从而允许一个域管理员能够完全自治地管理本域的用户、组、项目、角色和权限策略。&lt;/p>
&lt;h2 id="域属性">域属性&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>字段名称&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>ID，只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>名称&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>enabled&lt;/td>
&lt;td>是否启用&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="域限制">域限制&lt;/h2>
&lt;ul>
&lt;li>域只有在域内没有项目、角色和策略之后，并且置于enabled=false状态才能够被删除&lt;/li>
&lt;li>default域无法删除&lt;/li>
&lt;li>ldap同步过来的域的如下属性无法修改：name&lt;/li>
&lt;/ul>
&lt;h2 id="域名字空间">域名字空间&lt;/h2>
&lt;p>域的名字空间为全局，也就是说域的名字全局唯一&lt;/p>
&lt;h2 id="预置值">预置值&lt;/h2>
&lt;p>系统初始化后，预置一个default域，作为初始sysadmin账户和system项目所在的域&lt;/p></description></item><item><title>Docs: 认证体系</title><link>https://www.cloudpods.org/zh/docs/auth_security/identity/</link><pubDate>Sun, 04 Aug 2019 20:51:23 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/auth_security/identity/</guid><description>
&lt;h2 id="认证源">认证源&lt;/h2>
&lt;p>Cloudpods支持如下多种认证源&lt;/p>
&lt;p>认证源类型 | 说明
&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;+&amp;mdash;&amp;mdash;-
SQL | 认证数据存储在本地MySQL数据库的认证源，这是内置的默认认证源
LDAP | LDAP
CAS | Java CAS Server
OAuth2 | OAuth2认证源
OIDC | OpenID Connect认证源
SAML | SAML 2.0认证源&lt;/p>
&lt;h2 id="ldap认证源">LDAP认证源&lt;/h2>
&lt;p>Cloudpods LDAP认证源支持从LDAP导入用户和组，其中支持Microsoft Active Directory (MSAD) 和OpenLDAP，以及通用的LDAP服务端。&lt;/p>
&lt;p>LDAP认证源支持三种模式：&lt;/p>
&lt;ol>
&lt;li>单域模式&lt;/li>
&lt;/ol>
&lt;p>将指定LDAP dn_tree下的用户和组导入到指定的一个域下。其中，该模式支持两种导入模板，一种是 msad_one_domain，也就是 MSAD 的导入模板，另外一种是 openldap_one_domain, 也就是OpenLDAP的导入模板。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">climc idp-create-ldap-single-domain --target-domain example_domain --url ldap://192.168.222.102 --suffix &lt;span style="color:#4e9a06">&amp;#39;DC=ipa,DC=example,DC=com&amp;#39;&lt;/span> --user &lt;span style="color:#4e9a06">&amp;#39;UID=dcadmin,CN=users,CN=accounts,DC=ipa,DC=example,DC=com&amp;#39;&lt;/span> --password &amp;lt;password&amp;gt; --user-tree-dn &lt;span style="color:#4e9a06">&amp;#39;CN=users,CN=accounts,DC=ipa,DC=example,DC=com&amp;#39;&lt;/span> --group-tree-dn &lt;span style="color:#4e9a06">&amp;#39;CN=groups,CN=accounts,DC=ipa,DC=example,DC=com&amp;#39;&lt;/span> mainLdap openldap_one_domain
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>多域模式&lt;/li>
&lt;/ol>
&lt;p>将指定LDAP dn_tree下的每个OU导入为一个新的域，将对应OU下的用户和组分别导入到对应域下。该模式只支持一种模板 msad_multi_domain，也就是只支持 MSAD 的导入(因为只有MSAD支持OU的概念）。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">climc idp-create-ldap-multi-domain --url &lt;span style="color:#4e9a06">&amp;#39;ldap://192.168.222.102&amp;#39;&lt;/span> --suffix &lt;span style="color:#4e9a06">&amp;#39;DC=example,DC=com&amp;#39;&lt;/span> --user &lt;span style="color:#4e9a06">&amp;#39;dcadmin&amp;#39;&lt;/span> --password &amp;lt;password&amp;gt; --domain-tree-dn &lt;span style="color:#4e9a06">&amp;#39;OU=集团公司,DC=example,DC=com&amp;#39;&lt;/span> multildap msad_multi_domain
&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>自定义模式&lt;/li>
&lt;/ol>
&lt;p>完全自定义模式，需要用户指定所有的LDAP参数。这种模式参数比较复杂，只有在以上模式不生效情况下才建议使用。&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">climc idp-create-ldap &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--no-auto-create-project&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--target-domain TARGET_DOMAIN&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--auto-create-project&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--query-scope &lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>one,sub&lt;span style="color:#ce5c00;font-weight:bold">}]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--user USER&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--password PASSWORD&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--disable-user-on-import&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--domain-tree-dn DOMAIN_TREE_DN&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--domain-filter DOMAIN_FILTER&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--domain-objectclass DOMAIN_OBJECTCLASS&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--domain-id-attribute DOMAIN_ID_ATTRIBUTE&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--domain-name-attribute DOMAIN_NAME_ATTRIBUTE&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--domain-query-scope &lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>one,sub&lt;span style="color:#ce5c00;font-weight:bold">}]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--user-tree-dn USER_TREE_DN&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--user-filter USER_FILTER&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--user-objectclass USER_OBJECTCLASS&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--user-id-attribute USER_ID_ATTRIBUTE&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--user-name-attribute USER_NAME_ATTRIBUTE&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--user-enabled-attribute USER_ENABLED_ATTRIBUTE&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--user-enabled-mask USER_ENABLED_MASK&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--user-enabled-default USER_ENABLED_DEFAULT&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--user-enabled-invert&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--user-additional-attribute USER_ADDITIONAL_ATTRIBUTE&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--user-query-scope &lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>one,sub&lt;span style="color:#ce5c00;font-weight:bold">}]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--group-tree-dn GROUP_TREE_DN&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--group-filter GROUP_FILTER&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--group-objectclass GROUP_OBJECTCLASS&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--group-id-attribute GROUP_ID_ATTRIBUTE&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--group-name-attribute GROUP_NAME_ATTRIBUTE&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--group-member-attribute GROUP_MEMBER_ATTRIBUTE&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--group-members-are-ids&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>--group-query-scope &lt;span style="color:#ce5c00;font-weight:bold">{&lt;/span>one,sub&lt;span style="color:#ce5c00;font-weight:bold">}]&lt;/span> &amp;lt;--url URL&amp;gt; &amp;lt;--suffix SUFFIX&amp;gt; &amp;lt;NAME&amp;gt;
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Docs: 资源和权限体系</title><link>https://www.cloudpods.org/zh/docs/auth_security/project/</link><pubDate>Sun, 04 Aug 2019 20:51:23 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/auth_security/project/</guid><description/></item><item><title>Docs: 配额体系</title><link>https://www.cloudpods.org/zh/docs/auth_security/quota/</link><pubDate>Sun, 04 Aug 2019 20:51:23 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/auth_security/quota/</guid><description/></item><item><title>Docs: 服务目录</title><link>https://www.cloudpods.org/zh/docs/auth_security/directory/</link><pubDate>Sun, 04 Aug 2019 20:51:23 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/auth_security/directory/</guid><description/></item></channel></rss>