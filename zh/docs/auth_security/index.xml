<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Cloudpods –
认证与权限</title><link>https://www.cloudpods.org/zh/docs/auth_security/</link><description>Recent content in 认证与权限 on Cloudpods</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Fri, 19 Jul 2019 20:51:23 +0800</lastBuildDate><atom:link href="https://www.cloudpods.org/zh/docs/auth_security/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: 域（租户）</title><link>https://www.cloudpods.org/zh/docs/auth_security/domain/</link><pubDate>Sun, 04 Aug 2019 20:51:23 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/auth_security/domain/</guid><description>
&lt;p>为了实现多租户的效果，认证服务提供了域的概念，一个域下有一个完整的用户认证体系和资源和权限体系，从而允许一个域管理员能够完全自治地管理本域的用户、组、项目、角色和权限策略。&lt;/p>
&lt;h2 id="域属性">域属性&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>字段名称&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>ID，只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>名称&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>enabled&lt;/td>
&lt;td>是否启用&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="域限制">域限制&lt;/h2>
&lt;ul>
&lt;li>域只有在域内没有项目、角色和策略之后，并且置于enabled=false状态才能够被删除&lt;/li>
&lt;li>default域无法删除&lt;/li>
&lt;li>ldap同步过来的域的如下属性无法修改：name&lt;/li>
&lt;/ul>
&lt;h2 id="域名字空间">域名字空间&lt;/h2>
&lt;p>域的名字空间为全局，也就是说域的名字全局唯一&lt;/p>
&lt;h2 id="预置值">预置值&lt;/h2>
&lt;p>系统初始化后，预置一个default域，作为初始sysadmin账户和system项目所在的域&lt;/p></description></item><item><title>Docs: 认证体系</title><link>https://www.cloudpods.org/zh/docs/auth_security/identity/</link><pubDate>Sun, 04 Aug 2019 20:51:23 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/auth_security/identity/</guid><description>
&lt;p>Keystone认证体系由&lt;em>认证源&lt;/em>、&lt;em>用户&lt;/em>和&lt;em>组&lt;/em>构成。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名称&lt;/th>
&lt;th>资源&lt;/th>
&lt;th>说明&lt;/th>
&lt;th>是否域内资源&lt;/th>
&lt;th>备注&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>认证源&lt;/td>
&lt;td>identity_providers&lt;/td>
&lt;td>定义用户和组信息的来源&lt;/td>
&lt;td>否&lt;/td>
&lt;td>认证源独立于域，认证源可以向一个或多个域提供用户认证的信息&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>用户&lt;/td>
&lt;td>users&lt;/td>
&lt;td>用户是所有资源操作的执行者，平台内任何操作都需要以一个用户的身份来执行。每个服务都需要一个服务用户，该服务所执行的操作的操作者就是这个服务用户&lt;/td>
&lt;td>是&lt;/td>
&lt;td>用户必须归属于一个域&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>组&lt;/td>
&lt;td>groups&lt;/td>
&lt;td>组是用户的集合，可以将一个组加入项目，等同于将组内的用户加入项目&lt;/td>
&lt;td>是&lt;/td>
&lt;td>组必须归属于一个域&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Docs: 资源和权限体系</title><link>https://www.cloudpods.org/zh/docs/auth_security/project/</link><pubDate>Sun, 04 Aug 2019 20:51:23 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/auth_security/project/</guid><description>
&lt;p>Keystone的资源和权限体系由&lt;em>项目&lt;/em>，&lt;em>角色&lt;/em>和&lt;em>权限&lt;/em>这三类资源定义。项目是资源的归属，用户要使用资源，必须以特定的角色加入相应的项目。角色和策略(policy)关联，定义了用户的权限。&lt;/p>
&lt;h2 id="项目projects">项目(Projects)&lt;/h2>
&lt;p>项目是资源的owner，所有虚拟资源都要归属于一个项目。用户或者用户的组加入项目后，在获得权限后才能授权访问资源。&lt;/p>
&lt;p>项目一般用&lt;em>Project&lt;/em>指代，但是为了和Keystone v2 API兼容，偶尔也用&lt;em>Tenant&lt;/em>指代。&lt;/p>
&lt;h3 id="属性">属性&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>字段&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>项目ID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>项目名称&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>domain_id&lt;/td>
&lt;td>项目归属的域ID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>project_domain&lt;/td>
&lt;td>项目归属域的名称&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="限制">限制：&lt;/h3>
&lt;p>v3.7之前，用户或者组只能加入同一个域下的项目，或者default域下的项目。Default域下的项目可以加入任意域的用户或者组，非Default域下的项目只能加入同域的用户或者组。v3.7之后，该限制解除，任意域的用或者组可以加入任意域下的项目。&lt;/p>
&lt;p>项目下在其他服务有外部资源的无法删除。他服务的资源，默认每15分钟拉取一次, 通过参数设置：fetch_project_resource_count_interval_seconds。&lt;/p>
&lt;p>包含用户和组的项目无法删除&lt;/p>
&lt;p>system项目无法删除和修改&lt;/p>
&lt;h3 id="项目名字空间">项目名字空间&lt;/h3>
&lt;p>项目的名字空间为全局，也就是项目的名称全局唯一&lt;/p>
&lt;h3 id="预置项目">预置项目&lt;/h3>
&lt;p>系统初始化时，预置项目system，作为sysadmin的项目&lt;/p>
&lt;h2 id="角色roles">角色(Roles)&lt;/h2>
&lt;p>角色是用户加入项目的角色。用户的角色确定了用户的权限。&lt;/p>
&lt;h3 id="属性-1">属性&lt;/h3>
&lt;p>角色的属性如下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>字段&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>ID，不可修改&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>名称，可修改&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>public_scope&lt;/td>
&lt;td>共享范围，可选择值为system（全局共享），domain（域共享）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>policies&lt;/td>
&lt;td>该角色对应的各个级别的权限名称的列表&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>match_policies&lt;/td>
&lt;td>该角色对应的所有权限名称的列表&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="限制-1">限制&lt;/h3>
&lt;p>一个域下的用户，只能使用项目所在域的角色或者共享的角色加入项目&lt;/p>
&lt;p>一个被用户或者组使用的角色不能被删除&lt;/p>
&lt;p>共享的角色不能被删除&lt;/p>
&lt;p>admin角色不能被删除&lt;/p>
&lt;h3 id="角色名字空间">角色名字空间&lt;/h3>
&lt;p>角色的名字空间为全局，也就是角色的名称全局唯一&lt;/p>
&lt;h3 id="预置角色">预置角色&lt;/h3>
&lt;p>系统初始化时，预置了admin的角色，作为系统用户syadmin加入system项目的缺省角色&lt;/p>
&lt;p>同时，在系统初始化完成后，安装程序会自动创建如下的共享项目，以方便用户：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>角色名称&lt;/th>
&lt;th>是否共享&lt;/th>
&lt;th>含义&lt;/th>
&lt;th>使用场景&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>admin&lt;/td>
&lt;td>是&lt;/td>
&lt;td>全局管理员&lt;/td>
&lt;td>系统管理员角色，最高权限的角色&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>sa&lt;/td>
&lt;td>是&lt;/td>
&lt;td>运维管理员&lt;/td>
&lt;td>一般给运维人员分配&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>fa&lt;/td>
&lt;td>是&lt;/td>
&lt;td>财务管理员&lt;/td>
&lt;td>一般给财务人员分配&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>domainfa&lt;/td>
&lt;td>是&lt;/td>
&lt;td>域财务管理员&lt;/td>
&lt;td>一般给域内的财务人员分配&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>projectfa&lt;/td>
&lt;td>是&lt;/td>
&lt;td>项目财务管理员&lt;/td>
&lt;td>一般给项目内的财务人员分配&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>project_owner&lt;/td>
&lt;td>是&lt;/td>
&lt;td>项目主管&lt;/td>
&lt;td>一般给项目管理员分配&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>project_editor&lt;/td>
&lt;td>是&lt;/td>
&lt;td>项目操作员&lt;/td>
&lt;td>一般给项目内管理员，但是缺少创建和删除资源的权限&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>project_viwer&lt;/td>
&lt;td>是&lt;/td>
&lt;td>项目只读人员&lt;/td>
&lt;td>一般给项目的普通成员，只能查看，无法操作，创建和删除资源&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>domainadmin&lt;/td>
&lt;td>是&lt;/td>
&lt;td>域管理员&lt;/td>
&lt;td>一般给域管理员分配&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>domaineditor&lt;/td>
&lt;td>是&lt;/td>
&lt;td>域管理员&lt;/td>
&lt;td>一般给域管理员分配&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>domainviewer&lt;/td>
&lt;td>是&lt;/td>
&lt;td>域管理员&lt;/td>
&lt;td>一般给域管理员分配&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="权限策略policies">权限策略（Policies）&lt;/h2>
&lt;p>权限定义了权限的匹配规则，权限范围和权限定义&lt;/p>
&lt;h3 id="属性-2">属性&lt;/h3>
&lt;p>权限策略的属性如下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>属性&lt;/th>
&lt;th>类型&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>String&lt;/td>
&lt;td>ID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>String&lt;/td>
&lt;td>名称&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>policy&lt;/td>
&lt;td>JSONObject&lt;/td>
&lt;td>策略定义，存储为json格式，可以yaml或者json方式呈现&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>scope&lt;/td>
&lt;td>String&lt;/td>
&lt;td>策略的权限定义范围，project（项目范围权限）, domain（域范围权限）或者system（系统/全局权限）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>public_scope&lt;/td>
&lt;td>String&lt;/td>
&lt;td>策略的共享范围，none (不共享), domain（共享到指定域），system（全局共享）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Domain_id&lt;/td>
&lt;td>String&lt;/td>
&lt;td>归属域的ID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Project_Domain&lt;/td>
&lt;td>String&lt;/td>
&lt;td>归属域的名称&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Is_System&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>是否为系统定义的权限策略&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>enabled&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>该策略是否启用&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="权限策略定义">权限策略定义&lt;/h3>
&lt;p>权限策略的Policy字段存储了定义，每个权限策略包含如下几个字段：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>权限定义&lt;/th>
&lt;th>类型&lt;/th>
&lt;th>具体的权限定义，即对特定服务的特定资源的特定操作是否有权限&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Service&lt;/td>
&lt;td>string&lt;/td>
&lt;td>适用的服务，例如：compute, identity&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Resource&lt;/td>
&lt;td>string&lt;/td>
&lt;td>适用的资源类型，例如：servers&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Operation&lt;/td>
&lt;td>string&lt;/td>
&lt;td>适用的操作，支持的操作为&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Result&lt;/td>
&lt;td>string&lt;/td>
&lt;td>策略的结果，只有两个值：Allow和Deny&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Operation支持的操作如下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>操作&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>list&lt;/td>
&lt;td>列出所有资源&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>get&lt;/td>
&lt;td>获取指定资源的详情&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>create&lt;/td>
&lt;td>创建新的资源&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>update&lt;/td>
&lt;td>更新&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>delete&lt;/td>
&lt;td>删除&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>perform&lt;/td>
&lt;td>执行操作，例如对主机进行开机关机等操作&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="权限策略举例">权限策略举例&lt;/h3>
&lt;ul>
&lt;li>管理员权限&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#204a87;font-weight:bold">scope&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">system&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">policy&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;#39;*&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">allow&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>项目内计算服务只读&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#204a87;font-weight:bold">scope&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">project&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">policy&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">compute&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">get&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">allow&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">list&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">allow&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;#39;*&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">deny&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>域内计算服务操作者（不能创建和删除资源）&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="color:#204a87;font-weight:bold">scope&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">domain&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">policy&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">compute&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;#39;*&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">create&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">deny&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">delete&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">deny&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">&amp;#39;*&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">allow&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="系统预置策略">系统预置策略&lt;/h3>
&lt;p>为了方便使用，系统内预置了150多个权限策略，例如系统管理员 sysadmin，域管理 domainadmin，项目owner：projectadmin等。&lt;/p>
&lt;p>其中，为了使用web控制台，用户需要具备一些特殊权限，预定义到了这几个预置权限策略中：sys-dashboard, domain-doshboard, project-dashboard，分别对应系统视图，域视图和项目视图的web控制台权限。如果一个角色需要访问web控制台，需要给该角色增加对应的权限策略。&lt;/p>
&lt;h3 id="角色与权限">角色与权限&lt;/h3>
&lt;p>角色需要和权限关联，关联关系定义在role_policy关联表，该关联关系具有如下属性，定义了角色和权限关联的条件：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>属性&lt;/th>
&lt;th>类型&lt;/th>
&lt;th>是否必须字段&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>role_id&lt;/td>
&lt;td>string&lt;/td>
&lt;td>是&lt;/td>
&lt;td>角色ID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>policy_id&lt;/td>
&lt;td>string&lt;/td>
&lt;td>是&lt;/td>
&lt;td>权限策略ID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>project_id&lt;/td>
&lt;td>string&lt;/td>
&lt;td>否&lt;/td>
&lt;td>如果设置了项目，则只有用户以指定角色加入该项目，才具备对应的权限&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>auth&lt;/td>
&lt;td>boolean&lt;/td>
&lt;td>否&lt;/td>
&lt;td>是否需要认证，不需要认证&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ips&lt;/td>
&lt;td>string&lt;/td>
&lt;td>否&lt;/td>
&lt;td>如果设置了IPS，则只有用户通过匹配IP登录的才具备对应的权限&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>例如，sysadmin的权限和admin角色关联，project_id为system项目的ID，auth为true，则要求用户以admin角色加入system项目，才具备sysadmin的权限。&lt;/p>
&lt;h3 id="限制-2">限制&lt;/h3>
&lt;p>启用(enabled=true)的权限无法删除
共享的权限无法删除&lt;/p>
&lt;h3 id="权限的名字空间">权限的名字空间&lt;/h3>
&lt;p>权限的名字空间为全局，也就是权限的名称全局唯一&lt;/p></description></item><item><title>Docs: 配额体系</title><link>https://www.cloudpods.org/zh/docs/auth_security/quota/</link><pubDate>Sun, 04 Aug 2019 20:51:23 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/auth_security/quota/</guid><description>
&lt;p>配额定义了一个域或者项目能够获得的资源的上限，一个域或者项目的配额由各个资源管理服务自行管理，但是由于配额和域与项目紧密关联，也在这里介绍。&lt;/p>
&lt;h2 id="域配额">域配额&lt;/h2>
&lt;p>域配额为系统管理员给域设置的配额，域下所有项目的配额的总和不能超过域的配额。&lt;/p>
&lt;h2 id="项目配额">项目配额&lt;/h2>
&lt;p>项目配额为域管理员给项目设置的资源配额。资源在创建时，只会检查项目的配额，不会检查域的配额。&lt;/p></description></item><item><title>Docs: 服务目录</title><link>https://www.cloudpods.org/zh/docs/auth_security/directory/</link><pubDate>Sun, 04 Aug 2019 20:51:23 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/auth_security/directory/</guid><description>
&lt;p>Keystone服务目录定义了区域，服务，以及服务在指定区域内的接入端点。&lt;/p>
&lt;h2 id="区域region">区域（region)&lt;/h2>
&lt;p>区域定义了一个部署区域。当给用户部署了多套服务，为了区分，则给每套服务分配一个区域标识。当访问服务时，通过指定区域，可以获得同一服务在不同区域的接入端点，从而允许多套相同服务的共存。&lt;/p>
&lt;h3 id="限制">限制&lt;/h3>
&lt;p>当该区域下有接入端点时，无法删除该区域&lt;/p>
&lt;h2 id="服务service">服务(service)&lt;/h2>
&lt;p>服务定一个了一个提供API的服务&lt;/p>
&lt;h3 id="服务属性">服务属性&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>字段&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>服务ID，不可变ID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>服务名称&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>type&lt;/td>
&lt;td>服务类型，典型的服务类型有：compute, image, identity, k8s, meter等&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>enabled&lt;/td>
&lt;td>服务是否启用&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="限制-1">限制&lt;/h3>
&lt;p>当有该服务的接入端点定义时，无法删除该服务&lt;/p>
&lt;p>服务启用时无法删除&lt;/p>
&lt;h2 id="服务接入点endpoints">服务接入点(endpoints)&lt;/h2>
&lt;p>接入点定义了一个服务在指定区域的服务URL。分为public/internal和admin等类型。&lt;/p>
&lt;h3 id="接入端点属性">接入端点属性&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>字段&lt;/th>
&lt;th>说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>id&lt;/td>
&lt;td>ID&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>name&lt;/td>
&lt;td>名称&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>region_id&lt;/td>
&lt;td>服务接入点的归属区域&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>service_id&lt;/td>
&lt;td>服务接入点的归属服务&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>url&lt;/td>
&lt;td>接入端点的访问URL&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>interface&lt;/td>
&lt;td>接入端点的接口类型，目前支持internal/public/admin/console四个类型，默认使用internal类型的接入端点。当定义了一个服务的console类型的接入端点，则会在前端控制台的服务目录里显示跳转到该URL的链接&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>enabled&lt;/td>
&lt;td>接入端点是否启用&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="限制-2">限制&lt;/h3>
&lt;p>当该接入端点启用时，不能删除&lt;/p></description></item></channel></rss>