<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Cloudpods –
API与SDK</title><link>https://www.cloudpods.org/zh/docs/development/apisdk/</link><description>Recent content in API与SDK on Cloudpods</description><generator>Hugo -- gohugo.io</generator><language>zh</language><lastBuildDate>Thu, 11 Jul 2019 20:39:39 +0800</lastBuildDate><atom:link href="https://www.cloudpods.org/zh/docs/development/apisdk/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: API调用方法</title><link>https://www.cloudpods.org/zh/docs/development/apisdk/01_api/</link><pubDate>Thu, 11 Jul 2019 20:39:39 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/development/apisdk/01_api/</guid><description>
&lt;p>本章节介绍Cloudpods API的调用方法。&lt;/p>
&lt;p>&lt;a href="../../../swagger/">详细的API内容请参考API&lt;/a>。&lt;/p>
&lt;ol>
&lt;li>使用climc先创建aksk&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code>$climc credential-create-aksk
+--------+----------------------------------------------+
| Field | Value |
+--------+----------------------------------------------+
| expire | 0 |
| secret | OGVmTXNKQWpBWHpUejZTWDNKcndSdXlHQUNFeXhLVWI= |
+--------+----------------------------------------------+
&lt;/code>&lt;/pre>&lt;ol start="2">
&lt;li>使用climc查询刚创建出来的aksk&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code>$climc credential-get-aksk
+--------+----------------------------------+----------------------------------+----------------------------------------------+----------------------+
| expire | key_id | project_id | secret | time_stamp |
+--------+----------------------------------+----------------------------------+----------------------------------------------+----------------------+
| 0 | ba92f912922044268d4ad1dc70aafe57 | 0e4416c837644f5a8f0d67c9930ff228 | OGVmTXNKQWpBWHpUejZTWDNKcndSdXlHQUNFeXhLVWI= | 2022-02-20T17:12:26Z |
+--------+----------------------------------+----------------------------------+----------------------------------------------+----------------------+
&lt;/code>&lt;/pre>&lt;ol start="3">
&lt;li>获取认证地址&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code>$ocadm cluster rcadmin
export OS_AUTH_URL=https://10.211.55.9:30500/v3
export OS_USERNAME=sysadmin
export OS_PASSWORD=qNVaPTw9fCCMJ7eJ
export OS_PROJECT_DOMAIN=default
export OS_PROJECT_NAME=system
export YUNION_INSECURE=true
export OS_REGION_NAME=region0
export OS_ENDPOINT_TYPE=publicURL
&lt;/code>&lt;/pre>&lt;ol start="4">
&lt;li>通过climc获取各个服务的endpoint&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code>// 可以看到认证地址是https://10.211.55.9:30500/v3, 在通过上面创建出来的aksk进行认证(同样可以用用户密码认证，不过需要传的参数多一些，认证也比较慢，不推荐使用), 使用climc命令时，可以通过--debug来查看传参
// 这里aksk认证加密算法可以参考 https://github.com/yunionio/cloudpods/blob/10b1d9bdd35776cf8cb597d918fa571fbc356238/pkg/mcclient/aksk.go#L80
$climc --debug --os-access-key ba92f912922044268d4ad1dc70aafe57 --os-secret-key &amp;#39;OGVmTXNKQWpBWHpUejZTWDNKcndSdXlHQUNFeXhLVWI=&amp;#39; region-list
POST /v3/auth/tokens HTTP/1.1
Host: 10.211.55.9:30500
User-Agent: yunioncloud-go/201708
Content-Length: 573
Accept: */*
Accept-Encoding: *
Content-Type: application/json
CURL: curl -X &amp;#39;POST&amp;#39; -d &amp;#39;{&amp;#34;auth&amp;#34;:{&amp;#34;context&amp;#34;:{&amp;#34;source&amp;#34;:&amp;#34;cli&amp;#34;},&amp;#34;identity&amp;#34;:{&amp;#34;access_key_secret&amp;#34;:&amp;#34;{\&amp;#34;access_key\&amp;#34;:\&amp;#34;ba92f912922044268d4ad1dc70aafe57\&amp;#34;,\&amp;#34;algorithm\&amp;#34;:\&amp;#34;AWS4-HMAC-SHA256\&amp;#34;,\&amp;#34;location\&amp;#34;:\&amp;#34;cn-beijing\&amp;#34;,\&amp;#34;request\&amp;#34;:\&amp;#34;AWS4-HMAC-SHA256\\n20220220T172931Z\\n20220220/cn-beijing/s3/aws4_request\\n5ff6dad4605ea24e0f0be6c6885eddbbe1a5619c89f682b21d719aa50dcb9264\&amp;#34;,\&amp;#34;sign_date\&amp;#34;:\&amp;#34;2022-02-20T17:29:31.000000Z\&amp;#34;,\&amp;#34;signature\&amp;#34;:\&amp;#34;4c92b91266168fc650fec9303a9dc3309f12d0fe66c5b0a605082e0260c70ce2\&amp;#34;,\&amp;#34;signed_headers\&amp;#34;:[\&amp;#34;date\&amp;#34;,\&amp;#34;host\&amp;#34;,\&amp;#34;x-amz-content-sha256\&amp;#34;,\&amp;#34;x-amz-date\&amp;#34;]}&amp;#34;,&amp;#34;methods&amp;#34;:[&amp;#34;aksk&amp;#34;]}}}&amp;#39; -H &amp;#39;Accept: */*&amp;#39; -H &amp;#39;Accept-Encoding: *&amp;#39; -H &amp;#39;Content-Length: 573&amp;#39; -H &amp;#39;Content-Type: application/json&amp;#39; -H &amp;#39;User-Agent: yunioncloud-go/201708&amp;#39; &amp;#39;https://10.211.55.9:30500/v3/auth/tokens&amp;#39;
HTTP/1.1 200 OK
Content-Length: 11253
Content-Type: application/json;charset=utf-8
Date: Sun, 20 Feb 2022 17:29:31 GMT
Server: Yunion AppServer/Go/2018.4
Vary: Origin
X-Frame-Options: SAMEORIGIN
X-Request-Host-Id: E1-kuT8w8_MRxLW1dXWRr9NPrGw=
X-Request-Id: 51fde4
X-Subject-Token: gAAAAABiEnp7Z3hP_xecU36DvRzu8Y67m2mDM9JfFip6NMcH2BjI8FT3-vaJ6JztgdGJaztXQDj1mDno-X-fHU0AvG-s56Yb-kXQj8dwo9g56EutyqVFgZ77FAdjvZNfcfEKt_sgrBbsPaVTqLOrrqHiu6UQckEJDKIp744zQOsZii66_CXwnc9MKQZO9sCw91BFDZMUrghj
X-Yunion-Peer-Service-Name: identity
X-Yunion-Remote-Addr: 10.211.55.9:43648
X-Yunion-Span-Name: auth_tokens_v3
Response body: {&amp;#34;id&amp;#34;:&amp;#34;gAAAAABiEnp7Z3hP_xecU36DvRzu8Y67m2mDM9JfFip6NMcH2BjI8FT3-vaJ6JztgdGJaztXQDj1mDno-X-fHU0AvG-s56Yb-kXQj8dwo9g56EutyqVFgZ77FAdjvZNfcfEKt_sgrBbsPaVTqLOrrqHiu6UQckEJDKIp744zQOsZii66_CXwnc9MKQZO9sCw91BFDZMUrghj&amp;#34;,&amp;#34;token&amp;#34;:{&amp;#34;access_key&amp;#34;:{&amp;#34;access_key&amp;#34;:&amp;#34;ba92f912922044268d4ad1dc70aafe57&amp;#34;,&amp;#34;expire&amp;#34;:0,&amp;#34;secret&amp;#34;:&amp;#34;OGVmTXNKQWpBWHpUejZTWDNKcndSdXlHQUNFeXhLVWI=&amp;#34;},&amp;#34;audit_ids&amp;#34;:[&amp;#34;58076f50591e288d4aa4fdc76b946f7b&amp;#34;],&amp;#34;catalog&amp;#34;:[{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;0d81a11591584b958a04804dd5abbabc&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;yunionconf-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-yunionconf:30889&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;9cfa500c785c4195831bd70161133802&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;yunionconf-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30889&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;87217758659c4cb18ba26bf0577e3427&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;yunionconf&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;yunionconf&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;0dd167cc3194438e88467a0a7bd6ef3c&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;notify-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30777&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;68f22940bccc47eb8666cfe1cbc6d256&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;notify-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-notify:30777&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;0db18c12231c4f16895f9c562128118e&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;notify&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;notify&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;264468c6e2b14ccc80a3dc174be14124&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;autoupdate-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-autoupdate:30981&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;de136a3d766d4c178b84cf10e0740592&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;autoupdate-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30981&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;cd7482a6ffa042b789185c5c1f4ab020&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;autoupdate&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;autoupdate&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;4ce974d81f494bef85b9e4f8e7654632&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;log-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30999&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;87f433df2d624ce28c1143f4d5db238e&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;log-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-logger:30999&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;60cf87cd573749b58250fa6c0d6794af&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;log&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;log&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;5123f3dab82b47f780f284637a18a518&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;admin&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;identity-admin&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30357/v3&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;885a45a04af2419783906d069c737465&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;identity-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30500/v3&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;b453e1ca7dfc4595884fed16011d1717&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;identity-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-keystone:30500/v3&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;55e14f71e0c34a8682dbeaef10a7cbb4&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;keystone&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;identity&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;67f79d211c284bc08afe707cdc81106e&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;websocket-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-apigateway:30443&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;d5d5962163c148068bf44a3341898e73&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;websocket-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30443&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;0185442fc0f040d2815a83ded61bb009&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;websocket&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;websocket&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;202b6def24134ce7813062c850e40850&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;s3gateway-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-s3gateway:30884&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;8c931e66bb874e8e80d71a509ef0fef8&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;s3gateway-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30884&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;f46030569f6e4de58c04bbbe017f0ca5&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;s3gateway&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;s3gateway&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;47226520bc0d45a6838a3e51fa29b6e4&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;image-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30292/v1&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;c1646e81c8944be98683a3d3b0c798be&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;image-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-glance:30292/v1&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;f22c933cdf37427d88ea6e9d98b4a221&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;glance&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;image&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;731c5e0a9918439683ff5467fbbc5dde&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;monitor-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30093&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;e2e88b11e60f42df80ac3d4d4b076000&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;monitor-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-monitor:30093&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;e42a56482f67437a8a8e213386da07d7&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;monitor&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;monitor&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;a9c1b32c54fb4a028803d52180e8b5a3&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;compute_v2-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-region:30888&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;adecd09b5e20436e8651b4a66d4326c8&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;compute_v2-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30888&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;efd8e0bed6cc43bf8b2c7ef0a5e1803b&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;region2&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;compute_v2&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;19f2eadbf2b9406b8e2e3aa2684ad7e5&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;offlinecloudmeta-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://yunionmeta.oss-cn-beijing.aliyuncs.com&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;7ba10412dfbc42ee82dada7eda7a1014&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;offlinecloudmeta-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://yunionmeta.oss-cn-beijing.aliyuncs.com&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;a8f6bc5429af48228d0da5dd520af0a7&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;offlinecloudmeta&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;offlinecloudmeta&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;25df9d4db3964d158d3201eb33118e09&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;influxdb-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-influxdb:30086&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;31551be071934bec8e41e15c2e7d2b45&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;influxdb-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30086&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;0b2b9c3d45e742e38fcce3063b00b2d7&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;influxdb&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;influxdb&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;3924af6d9ccd4dd28d0d5627d0f916dd&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;webconsole-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30899&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;403d0d9f349e447f809752ce1c8a2c0e&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;webconsole-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-webconsole:30899&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;017d07de150a435180f12931272ad286&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;webconsole&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;webconsole&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;650d0a29ac534d36852efeaec12ecb7b&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;k8s-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-kubeserver:30442/api&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;c9b157c4bf7b47258b17d2b9dccfc609&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;k8s-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30442/api&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;00aa0118f4bc40f38b12576675db9922&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;k8s&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;k8s&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;9361347388bf461a8a88543aa6df0af1&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudid-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30893&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;dd5f11acb719481380c7e7fcc2c57fe2&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudid-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-cloudid:30893&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;a5bc5f118c484d6b812c8f807c5e5981&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudid&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;cloudid&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;b61f4332c4594d05866634b9e7e87319&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;torrent-tracker-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://tracker.yunion.cn&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;e543ab98873c4d838a2d1950e5fc2cb6&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;torrent-tracker-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://tracker.yunion.cn&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;29a4f2e4fd8b4e6c876ac3c41fdad610&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;torrent-tracker&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;torrent-tracker&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;48e06ade707040d38a2c81054d916772&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;etcd-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;http://default-etcd-client.onecloud.svc:2379&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;012622a60c814d478d180ee28107caf0&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;etcd&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;etcd&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;84293895e9db410e8c8584afc3fde39b&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;ansible-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-ansibleserver:30890&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;a9e5c8be89254bb98c444bb04344e1f7&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;ansible-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30890&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;1313597e674a4bfc8f7dcf06f3033280&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;ansible&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;ansible&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;022b48ad6b6640858471aa2074f600ee&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;devtool-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30997&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;5ed574340c40491f8506b6aa48b2be8b&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;devtool-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-devtool:30997&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;c239df97fd0148e78ce143e7017f3859&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;devtool&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;devtool&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;05655d3ea1da4aca8b4441c2597a4a73&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudevent-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30892&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;87b37bf1dea940208d9e5731baabb4b9&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudevent-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-cloudevent:30892&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;6b78e4f08c68421d8497591c44f53965&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudevent&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;cloudevent&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;0ae9af784f2a4c35865fbf94f5e371eb&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudnet-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30891&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;18234fdf11fb453e8aeb27f5ce1a4a09&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudnet-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-cloudnet:30891&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;0164ae489d50476382544fa82d35c651&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudnet&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;cloudnet&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;10714444f63d460f89b42872c7b8a2e4&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudmeta-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://meta.yunion.cn&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;cd3f9d63e5f3486d8d6ef1a2e5de240b&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudmeta-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://meta.yunion.cn&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;5ffa814de268402d82e709e6e43c8a27&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudmeta&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;cloudmeta&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;1ae5a40781a542b284f4058e7fa57819&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudproxy-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30882&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;c4f1d6c3241c466181102cfa04db5a48&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudproxy-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-cloudproxy:30882&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;c166b15b68384f6b8d79c625a2a4d6e4&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;cloudproxy&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;cloudproxy&amp;#34;},{&amp;#34;endpoints&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;33dd58d495484d7885ac3ef6766b5cd6&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;scheduler-public&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30887&amp;#34;},{&amp;#34;id&amp;#34;:&amp;#34;36cb905a8f284bb2840d38c3af1ebab8&amp;#34;,&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;scheduler-internal&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,&amp;#34;url&amp;#34;:&amp;#34;https://default-scheduler:30887&amp;#34;}],&amp;#34;id&amp;#34;:&amp;#34;8155088ac46c4bd1816adf5537ccaedf&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;scheduler&amp;#34;,&amp;#34;type&amp;#34;:&amp;#34;scheduler&amp;#34;}],&amp;#34;context&amp;#34;:{&amp;#34;ip&amp;#34;:&amp;#34;10.211.55.9&amp;#34;,&amp;#34;source&amp;#34;:&amp;#34;cli&amp;#34;},&amp;#34;expires_at&amp;#34;:&amp;#34;2022-02-21T17:29:31.370591Z&amp;#34;,&amp;#34;is_domain&amp;#34;:false,&amp;#34;issued_at&amp;#34;:&amp;#34;2022-02-20T17:29:31.370591Z&amp;#34;,&amp;#34;methods&amp;#34;:[&amp;#34;aksk&amp;#34;],&amp;#34;policies&amp;#34;:{&amp;#34;system&amp;#34;:[&amp;#34;sysadmin&amp;#34;]},&amp;#34;project&amp;#34;:{&amp;#34;domain&amp;#34;:{&amp;#34;id&amp;#34;:&amp;#34;default&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;Default&amp;#34;},&amp;#34;id&amp;#34;:&amp;#34;0e4416c837644f5a8f0d67c9930ff228&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;system&amp;#34;},&amp;#34;roles&amp;#34;:[{&amp;#34;id&amp;#34;:&amp;#34;2c85811d739d4fca892b41df6bc0484b&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;admin&amp;#34;}],&amp;#34;user&amp;#34;:{&amp;#34;domain&amp;#34;:{&amp;#34;id&amp;#34;:&amp;#34;default&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;Default&amp;#34;},&amp;#34;id&amp;#34;:&amp;#34;a09dbd66f37245518bb2b7984dca46bf&amp;#34;,&amp;#34;name&amp;#34;:&amp;#34;sysadmin&amp;#34;}}}
从上面的请求可以看到, 第一次请求的是https://10.211.55.9:30500/v3/auth/tokens, 并且使用了刚才创建的aksk进行认证, 认证通过后返回了一个很大的json结果, 下面将对json结果做进一步说明
{
&amp;#34;id&amp;#34;:&amp;#34;gAAAAABiEnp7Z3hP_xecU36DvRzu8Y67m2mDM9JfFip6NMcH2BjI8FT3-vaJ6JztgdGJaztXQDj1mDno-X-fHU0AvG-s56Yb-kXQj8dwo9g56EutyqVFgZ77FAdjvZNfcfEKt_sgrBbsPaVTqLOrrqHiu6UQckEJDKIp744zQOsZii66_CXwnc9MKQZO9sCw91BFDZMUrghj&amp;#34;, // 这个Id是认证返回的token, 和返回header中的X-Subject-Token是一样的，后面可以用这个id作为请求的header(X-Auth-Token)进行认证
&amp;#34;token&amp;#34;:{
&amp;#34;access_key&amp;#34;:{
&amp;#34;access_key&amp;#34;:&amp;#34;ba92f912922044268d4ad1dc70aafe57&amp;#34;,
&amp;#34;expire&amp;#34;:0,
&amp;#34;secret&amp;#34;:&amp;#34;OGVmTXNKQWpBWHpUejZTWDNKcndSdXlHQUNFeXhLVWI=&amp;#34;
},
&amp;#34;audit_ids&amp;#34;:[
&amp;#34;58076f50591e288d4aa4fdc76b946f7b&amp;#34;
],
&amp;#34;catalog&amp;#34;:[ // 这个是各个服务的endpoint, 商业版会多一些服务
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;0d81a11591584b958a04804dd5abbabc&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;yunionconf-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-yunionconf:30889&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;9cfa500c785c4195831bd70161133802&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;yunionconf-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30889&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;87217758659c4cb18ba26bf0577e3427&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;yunionconf&amp;#34;, // 这个是配置服务
&amp;#34;type&amp;#34;:&amp;#34;yunionconf&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;0dd167cc3194438e88467a0a7bd6ef3c&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;notify-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30777&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;68f22940bccc47eb8666cfe1cbc6d256&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;notify-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-notify:30777&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;0db18c12231c4f16895f9c562128118e&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;notify&amp;#34;, // 这个是通知服务
&amp;#34;type&amp;#34;:&amp;#34;notify&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;264468c6e2b14ccc80a3dc174be14124&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;autoupdate-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-autoupdate:30981&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;de136a3d766d4c178b84cf10e0740592&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;autoupdate-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30981&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;cd7482a6ffa042b789185c5c1f4ab020&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;autoupdate&amp;#34;, // 这个是自动更新服务
&amp;#34;type&amp;#34;:&amp;#34;autoupdate&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;4ce974d81f494bef85b9e4f8e7654632&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;log-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30999&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;87f433df2d624ce28c1143f4d5db238e&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;log-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-logger:30999&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;60cf87cd573749b58250fa6c0d6794af&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;log&amp;#34;, // 这个是日志服务
&amp;#34;type&amp;#34;:&amp;#34;log&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;5123f3dab82b47f780f284637a18a518&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;admin&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;identity-admin&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30357/v3&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;885a45a04af2419783906d069c737465&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;identity-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30500/v3&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;b453e1ca7dfc4595884fed16011d1717&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;identity-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-keystone:30500/v3&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;55e14f71e0c34a8682dbeaef10a7cbb4&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;keystone&amp;#34;, // 这个是认证服务
&amp;#34;type&amp;#34;:&amp;#34;identity&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;67f79d211c284bc08afe707cdc81106e&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;websocket-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-apigateway:30443&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;d5d5962163c148068bf44a3341898e73&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;websocket-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30443&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;0185442fc0f040d2815a83ded61bb009&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;websocket&amp;#34;, // 这个是websocket服务
&amp;#34;type&amp;#34;:&amp;#34;websocket&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;202b6def24134ce7813062c850e40850&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;s3gateway-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-s3gateway:30884&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;8c931e66bb874e8e80d71a509ef0fef8&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;s3gateway-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30884&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;f46030569f6e4de58c04bbbe017f0ca5&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;s3gateway&amp;#34;, // s3网关服务
&amp;#34;type&amp;#34;:&amp;#34;s3gateway&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;47226520bc0d45a6838a3e51fa29b6e4&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;image-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30292/v1&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;c1646e81c8944be98683a3d3b0c798be&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;image-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-glance:30292/v1&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;f22c933cdf37427d88ea6e9d98b4a221&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;glance&amp;#34;, // 这个是镜像服务
&amp;#34;type&amp;#34;:&amp;#34;image&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;731c5e0a9918439683ff5467fbbc5dde&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;monitor-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30093&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;e2e88b11e60f42df80ac3d4d4b076000&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;monitor-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-monitor:30093&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;e42a56482f67437a8a8e213386da07d7&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;monitor&amp;#34;, // 这个是监控服务
&amp;#34;type&amp;#34;:&amp;#34;monitor&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;a9c1b32c54fb4a028803d52180e8b5a3&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;compute_v2-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-region:30888&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;adecd09b5e20436e8651b4a66d4326c8&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;compute_v2-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30888&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;efd8e0bed6cc43bf8b2c7ef0a5e1803b&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;region2&amp;#34;, // 这个是计算服务(控制节点)
&amp;#34;type&amp;#34;:&amp;#34;compute_v2&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;19f2eadbf2b9406b8e2e3aa2684ad7e5&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;offlinecloudmeta-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://yunionmeta.oss-cn-beijing.aliyuncs.com&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;7ba10412dfbc42ee82dada7eda7a1014&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;offlinecloudmeta-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://yunionmeta.oss-cn-beijing.aliyuncs.com&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;a8f6bc5429af48228d0da5dd520af0a7&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;offlinecloudmeta&amp;#34;, // 这个是套餐同步的服务
&amp;#34;type&amp;#34;:&amp;#34;offlinecloudmeta&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;25df9d4db3964d158d3201eb33118e09&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;influxdb-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-influxdb:30086&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;31551be071934bec8e41e15c2e7d2b45&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;influxdb-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30086&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;0b2b9c3d45e742e38fcce3063b00b2d7&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;influxdb&amp;#34;,
&amp;#34;type&amp;#34;:&amp;#34;influxdb&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;3924af6d9ccd4dd28d0d5627d0f916dd&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;webconsole-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30899&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;403d0d9f349e447f809752ce1c8a2c0e&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;webconsole-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-webconsole:30899&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;017d07de150a435180f12931272ad286&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;webconsole&amp;#34;, // 这个是webconsole服务
&amp;#34;type&amp;#34;:&amp;#34;webconsole&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;650d0a29ac534d36852efeaec12ecb7b&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;k8s-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-kubeserver:30442/api&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;c9b157c4bf7b47258b17d2b9dccfc609&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;k8s-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30442/api&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;00aa0118f4bc40f38b12576675db9922&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;k8s&amp;#34;, // k8s服务
&amp;#34;type&amp;#34;:&amp;#34;k8s&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;9361347388bf461a8a88543aa6df0af1&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudid-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30893&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;dd5f11acb719481380c7e7fcc2c57fe2&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudid-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-cloudid:30893&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;a5bc5f118c484d6b812c8f807c5e5981&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudid&amp;#34;, // 这个是公有云iam免密认证服务
&amp;#34;type&amp;#34;:&amp;#34;cloudid&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;b61f4332c4594d05866634b9e7e87319&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;torrent-tracker-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://tracker.yunion.cn&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;e543ab98873c4d838a2d1950e5fc2cb6&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;torrent-tracker-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://tracker.yunion.cn&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;29a4f2e4fd8b4e6c876ac3c41fdad610&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;torrent-tracker&amp;#34;,
&amp;#34;type&amp;#34;:&amp;#34;torrent-tracker&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;48e06ade707040d38a2c81054d916772&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;etcd-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;http://default-etcd-client.onecloud.svc:2379&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;012622a60c814d478d180ee28107caf0&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;etcd&amp;#34;, // etcd
&amp;#34;type&amp;#34;:&amp;#34;etcd&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;84293895e9db410e8c8584afc3fde39b&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;ansible-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-ansibleserver:30890&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;a9e5c8be89254bb98c444bb04344e1f7&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;ansible-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30890&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;1313597e674a4bfc8f7dcf06f3033280&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;ansible&amp;#34;, // ansible
&amp;#34;type&amp;#34;:&amp;#34;ansible&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;022b48ad6b6640858471aa2074f600ee&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;devtool-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30997&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;5ed574340c40491f8506b6aa48b2be8b&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;devtool-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-devtool:30997&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;c239df97fd0148e78ce143e7017f3859&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;devtool&amp;#34;, // 运维工具服务
&amp;#34;type&amp;#34;:&amp;#34;devtool&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;05655d3ea1da4aca8b4441c2597a4a73&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudevent-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30892&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;87b37bf1dea940208d9e5731baabb4b9&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudevent-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-cloudevent:30892&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;6b78e4f08c68421d8497591c44f53965&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudevent&amp;#34;, // 公有云日志服务
&amp;#34;type&amp;#34;:&amp;#34;cloudevent&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;0ae9af784f2a4c35865fbf94f5e371eb&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudnet-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30891&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;18234fdf11fb453e8aeb27f5ce1a4a09&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudnet-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-cloudnet:30891&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;0164ae489d50476382544fa82d35c651&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudnet&amp;#34;,
&amp;#34;type&amp;#34;:&amp;#34;cloudnet&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;10714444f63d460f89b42872c7b8a2e4&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudmeta-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://meta.yunion.cn&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;cd3f9d63e5f3486d8d6ef1a2e5de240b&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudmeta-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://meta.yunion.cn&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;5ffa814de268402d82e709e6e43c8a27&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudmeta&amp;#34;,
&amp;#34;type&amp;#34;:&amp;#34;cloudmeta&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;1ae5a40781a542b284f4058e7fa57819&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudproxy-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30882&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;c4f1d6c3241c466181102cfa04db5a48&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudproxy-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-cloudproxy:30882&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;c166b15b68384f6b8d79c625a2a4d6e4&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;cloudproxy&amp;#34;,
&amp;#34;type&amp;#34;:&amp;#34;cloudproxy&amp;#34;
},
{
&amp;#34;endpoints&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;33dd58d495484d7885ac3ef6766b5cd6&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;public&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;scheduler-public&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://10.211.55.9:30887&amp;#34;
},
{
&amp;#34;id&amp;#34;:&amp;#34;36cb905a8f284bb2840d38c3af1ebab8&amp;#34;,
&amp;#34;interface&amp;#34;:&amp;#34;internal&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;scheduler-internal&amp;#34;,
&amp;#34;region&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;region_id&amp;#34;:&amp;#34;region0&amp;#34;,
&amp;#34;url&amp;#34;:&amp;#34;https://default-scheduler:30887&amp;#34;
}
],
&amp;#34;id&amp;#34;:&amp;#34;8155088ac46c4bd1816adf5537ccaedf&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;scheduler&amp;#34;, //调度服务
&amp;#34;type&amp;#34;:&amp;#34;scheduler&amp;#34;
}
],
&amp;#34;context&amp;#34;:{
&amp;#34;ip&amp;#34;:&amp;#34;10.211.55.9&amp;#34;,
&amp;#34;source&amp;#34;:&amp;#34;cli&amp;#34;
},
&amp;#34;expires_at&amp;#34;:&amp;#34;2022-02-21T17:29:31.370591Z&amp;#34;, // 认证失效时间，如果超过这个时间上面的id认证就失效了，需要重新认证获取新的id
&amp;#34;is_domain&amp;#34;:false,
&amp;#34;issued_at&amp;#34;:&amp;#34;2022-02-20T17:29:31.370591Z&amp;#34;,
&amp;#34;methods&amp;#34;:[
&amp;#34;aksk&amp;#34;
],
&amp;#34;policies&amp;#34;:{
&amp;#34;system&amp;#34;:[
&amp;#34;sysadmin&amp;#34;
]
},
&amp;#34;project&amp;#34;:{
&amp;#34;domain&amp;#34;:{
&amp;#34;id&amp;#34;:&amp;#34;default&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;Default&amp;#34;
},
&amp;#34;id&amp;#34;:&amp;#34;0e4416c837644f5a8f0d67c9930ff228&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;system&amp;#34;
},
&amp;#34;roles&amp;#34;:[
{
&amp;#34;id&amp;#34;:&amp;#34;2c85811d739d4fca892b41df6bc0484b&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;admin&amp;#34;
}
],
&amp;#34;user&amp;#34;:{
&amp;#34;domain&amp;#34;:{
&amp;#34;id&amp;#34;:&amp;#34;default&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;Default&amp;#34;
},
&amp;#34;id&amp;#34;:&amp;#34;a09dbd66f37245518bb2b7984dca46bf&amp;#34;,
&amp;#34;name&amp;#34;:&amp;#34;sysadmin&amp;#34;
}
}
}
&lt;/code>&lt;/pre>&lt;ol start="4">
&lt;li>以获取虚拟机列表举例&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code>通过步骤3获取到了认证的token，并且也知道了计算服务的endpoint是 https://10.211.55.9:30888
虚拟机列表的api是 GET /servers, 因此可以构造出curl:
$curl -k -X &amp;#39;GET&amp;#39; -d &amp;#39;&amp;#39; -H &amp;#39;Accept: */*&amp;#39; -H &amp;#39;Accept-Encoding: *&amp;#39; -H &amp;#39;Content-Length: 0&amp;#39; -H &amp;#39;Content-Type: application/json&amp;#39; -H &amp;#39;User-Agent: yunioncloud-go/201708&amp;#39; -H &amp;#39;X-Auth-Token: gAAAAABiEn7_nBvGcZX-XeHRcm5oQjI6Vxz66atfQIXPCu0OEUmpkTBX4yjIz2CIVtuWuUfjTpExAxzuNybZzRf6bHnlgDdKOBJmxzvrikbTGBkltQJAi7bKzIs3MC0pmAFrULm306izk-z1AKjRIVD4x2njfriPuH9KAs3ToHzfatPi18xx3GRWpngFTQ3xJa6n4Gzigilh&amp;#39; &amp;#39;https://10.211.55.9:30888/servers&amp;#39;
{&amp;#34;servers&amp;#34;:[]}
同样这一步也可以通过climc命令进行调试: climc --debug --os-auth-token gAAAAABiEnp4SlVCjoLmRdLbuaskbHUJIMDnwZcURyEp-5REXZ-ePPd0H4ZQj7GA8-9UEs1ALuDaXklu1dYdv51AWt7UoemvHiS0_hl_rJYOgKUKZQ4RNqsdIpfNsq-9qkjmo2YvFLMrTf2Z1oxrm9WASSGPeGtGSIoJC_X6XbbxIMC4oW26Z4GJaFe1NJaw5JkmpoErA45Q server-list
&lt;/code>&lt;/pre>&lt;ol start="5">
&lt;li>总结&lt;/li>
&lt;/ol>
&lt;pre tabindex="0">&lt;code>1. 通过认证拿到token id, 和各个服务的endpoint
2. 通过组合endpoint和各个资源，并且指定X-Auth-Token header为token id,即可发送api操作资源
&lt;/code>&lt;/pre></description></item><item><title>Docs: API调用方式</title><link>https://www.cloudpods.org/zh/docs/development/apisdk/01_apigateway/</link><pubDate>Sun, 05 Jun 2022 20:39:39 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/development/apisdk/01_apigateway/</guid><description>
&lt;p>Cloudpods 的API由各个后端服务分别提供，因此为了访问API，需要API的调用方必须能够直接访问各个服务。每个服务的APi可以通过两个URL地址访问。一个是EndpointType类型为internal的URL，该URL只能在Kubernetes集群内访问；另一个是EndpointType类型为public的URL，该URL为托管Cloudpods服务的宿主机的Node Port的访问URL。&lt;/p>
&lt;p>调用API的服务有几种部署方案：&lt;/p>
&lt;h2 id="部署在hahahugoshortcode271s2hbhb的kubernetes集群内">部署在Cloudpods的Kubernetes集群内&lt;/h2>
&lt;p>这种情况，API调用方可以直接访问Cloudpods各个服务的service cluster IP，因此可以访问各个服务EndpointType为internal的地址。&lt;/p>
&lt;h2 id="和hahahugoshortcode271s4hbhb的宿主机在同一内网安全域内">和Cloudpods的宿主机在同一内网安全域内&lt;/h2>
&lt;p>这种情况，API调用方可以直接访问Cloudpods宿主机的Node Port，因此可以访问各个服务EndpointType为public的地址。&lt;/p>
&lt;h2 id="和hahahugoshortcode271s6hbhb不在一个同一个网络安全域">和Cloudpods不在一个同一个网络安全域&lt;/h2>
&lt;p>这种情况，服务调用方不能直接访问Cloudpods集群的宿主机的Node Port，需要通过一个统一的API入口访问，这样便于做网络安全策略。&lt;/p>
&lt;h3 id="统一api入口">统一API入口&lt;/h3>
&lt;p>为此，API网关提供统一的API入口。各个后端服务API的入口URL统一由API网关转发，需要在访问路径上插入如下的路径：&lt;/p>
&lt;pre tabindex="0">&lt;code>/api/s/&amp;lt;service_type&amp;gt;
&lt;/code>&lt;/pre>&lt;p>例如，访问region服务的网络（networks）列表服务的正常REST API如下，且需要直接访问region服务的internal或public的Endpoint。&lt;/p>
&lt;pre tabindex="0">&lt;code>GET /networks
&lt;/code>&lt;/pre>&lt;p>统一通过API网关的REST API如下，其中 compute_v2 为region服务的服务类型。&lt;/p>
&lt;pre tabindex="0">&lt;code>GET /api/s/compute_v2/networks
&lt;/code>&lt;/pre>&lt;h3 id="开启统一api入口">开启统一API入口&lt;/h3>
&lt;p>该统一API入口默认关闭，需要在apigateway服务通过配置打开：&lt;/p>
&lt;pre tabindex="0">&lt;code>climc service-config-edit yunionapi
&lt;/code>&lt;/pre>&lt;p>将如下配置项设置为True：&lt;/p>
&lt;pre tabindex="0">&lt;code> enable_backend_service_proxy: true
&lt;/code>&lt;/pre>&lt;p>设置后需重启apigateway服务。&lt;/p>
&lt;h3 id="sdk和climc使用统一api入口">SDK和climc使用统一API入口&lt;/h3>
&lt;p>为了方便使用统一API入口，SDK和climc做了如下的变更：&lt;/p>
&lt;ul>
&lt;li>认证服务入口需设置为：&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>https://&amp;lt;ip_or_domain_of_apigatway&amp;gt;/api/s/identity/v3
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>EndpointType 需设置为 apigateway&lt;/li>
&lt;/ul>
&lt;h3 id="climc的配置">climc的配置&lt;/h3>
&lt;p>climc需要配置如下环境变量以使用统一的API入口访问后端：&lt;/p>
&lt;pre tabindex="0">&lt;code>export OS_AUTH_URL=https://&amp;lt;ip_or_domain_of_apigatway&amp;gt;/api/s/identity/v3
export OS_ENDPOINT_TYPE=apigateway
&lt;/code>&lt;/pre>&lt;p>例如，访问Cloudpods的web控制台的地址为：https://192.168.220.71，则统一API的AUTH_URL地址为：https://192.168.220.71/api/s/identity/v3&lt;/p></description></item><item><title>Docs: 使用SDK</title><link>https://www.cloudpods.org/zh/docs/development/apisdk/02_sdk/</link><pubDate>Thu, 11 Jul 2019 20:39:39 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/development/apisdk/02_sdk/</guid><description>
&lt;p>本章节介绍Cloudpods SDK的调用方法。目前提供了golang，Java，Python3，Nodejs和PHP等多种语言的SDK：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="https://github.com/yunionio/cloudpods/tree/master/pkg/mcclient">Golang SDK&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://github.com/yunionio/mcclient_java">Java SDK&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://github.com/yunionio/mcclient_python">Python3 SDK&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://github.com/yunionio/mcclient_nodejs">NodeJS SDK&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://github.com/yunionio/mcclient_php">PHP SDK&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="第三方sdk">第三方SDK&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://github.com/lonquan/easy-cloud-pods">EasyCloudPods&lt;/a>&lt;/li>
&lt;/ul></description></item></channel></rss>