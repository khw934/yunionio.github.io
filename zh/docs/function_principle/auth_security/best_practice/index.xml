<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Cloudpods –
最佳实践</title><link>https://www.cloudpods.org/zh/docs/function_principle/auth_security/best_practice/</link><description>Recent content in 最佳实践 on Cloudpods</description><generator>Hugo -- gohugo.io</generator><language>zh</language><lastBuildDate>Fri, 11 Jun 2021 08:22:33 +0800</lastBuildDate><atom:link href="https://www.cloudpods.org/zh/docs/function_principle/auth_security/best_practice/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: 三权分立最佳实践</title><link>https://www.cloudpods.org/zh/docs/function_principle/auth_security/best_practice/separate_policy/</link><pubDate>Wed, 30 Mar 2022 11:58:33 +0800</pubDate><guid>https://www.cloudpods.org/zh/docs/function_principle/auth_security/best_practice/separate_policy/</guid><description>
&lt;p>在实际的业务使用场景中，为了避免管理员拥有过度集中的权利带来的高风险，可以设置三权分立，将管理员的权限分给安全管理员和审计管理员。&lt;/p>
&lt;p>三权分立后，系统管理员只对计算资源有管理权限，不再拥有创建用户、角色的权限以及-审计日志的权限；安全管理员对资源有-的权限，同时拥有创建用户、角色的相关权限；审计管理员默认只拥有-日志的权限。&lt;/p>
&lt;h3 id="权限说明">权限说明&lt;/h3>
&lt;p>Cloudpods平台初始化后将自动生成系统管理员、安全管理员和审计管理员的角色；并根据平台上的组织架构定义角色权限范围，生成以下角色。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>角色&lt;/th>
&lt;th>权限&lt;/th>
&lt;th>权限范围&lt;/th>
&lt;th>权限说明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>sys_opsadmin&lt;/td>
&lt;td>sys_opsadmin&lt;/td>
&lt;td>系统&lt;/td>
&lt;td>全局范围内的系统管理员，可以管理多个组织下的资源&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>sys_secadmin&lt;/td>
&lt;td>sys_secadmin&lt;/td>
&lt;td>系统&lt;/td>
&lt;td>全局范围内的安全管理员，可以管理多个组织下的安全资源&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>sys_adtadmin&lt;/td>
&lt;td>sys_adtadmin&lt;/td>
&lt;td>系统&lt;/td>
&lt;td>全局范围内的审计管理员，可以查看整个系统的审计日志&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>domain_opsadmin&lt;/td>
&lt;td>domain_opsadmin&lt;/td>
&lt;td>域&lt;/td>
&lt;td>组织范围内的系统管理员，可以管理指定组织下的资源&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>domain_secadmin&lt;/td>
&lt;td>domain_secadmin&lt;/td>
&lt;td>域&lt;/td>
&lt;td>组织范围内的安全管理员，可以管理指定组织下的安全资源&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>domain_adtadmin&lt;/td>
&lt;td>domain_adtadmin&lt;/td>
&lt;td>域&lt;/td>
&lt;td>组织范围内的审计管理员，可以查看指定组织的审计日志&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>下表表示不同角色的用户对平台的管理权限。其中：&lt;/p>
&lt;ul>
&lt;li>管理：表示支持对资源进行增删改查等相关操作；&lt;/li>
&lt;li>只读：表示只可以查看资源列表及详情；&lt;/li>
&lt;li>“-” ：表示不支持查看该类资源；&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>资源&lt;/th>
&lt;th>系统管理员(sys_opsadmin)&lt;/th>
&lt;th>安全管理员(sys_secadmin)&lt;/th>
&lt;th>审计管理员(sys_adtadmin)&lt;/th>
&lt;th>普通用户&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>虚拟机&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读（VNC）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>反亲和组&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>主机模板&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>弹性伸缩组&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>系统镜像&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>主机镜像&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>硬盘&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>硬盘快照&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>主机快照&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>自动快照策略&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>硬盘备份&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>主机备份&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>安全组&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>区域&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>可用区&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>VPC&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>二层网络&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>IP子网&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>弹性公网IP&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>密钥&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>套餐&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>宿主机&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>透传设备&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>调度标签&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>调度策略&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>动态调度标签&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>回收站&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SSH代理节点&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SSH代理服务&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>块存储&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>备份存储&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>只读&lt;/td>
&lt;td>-&lt;/td>
&lt;td>只读&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>认证源&lt;/td>
&lt;td>-&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>域&lt;/td>
&lt;td>-&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>项目&lt;/td>
&lt;td>-&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>组&lt;/td>
&lt;td>-&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>用户&lt;/td>
&lt;td>-&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>角色&lt;/td>
&lt;td>-&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>权限&lt;/td>
&lt;td>-&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>操作日志&lt;/td>
&lt;td>-&lt;/td>
&lt;td>-&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>日志管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>-&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>标签&lt;/td>
&lt;td>-&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>UI策略&lt;/td>
&lt;td>-&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>全局设置&lt;/td>
&lt;td>-&lt;/td>
&lt;td>管理&lt;/td>
&lt;td>-&lt;/td>
&lt;td>-&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="配置三权用户">配置三权用户&lt;/h3>
&lt;p>平台内置角色后，需要将用户以对应角色加入项目中，拥有对应角色的权限。&lt;/p>
&lt;h4 id="新建系统管理员">新建系统管理员&lt;/h4>
&lt;ol>
&lt;li>在左侧导航栏，选择 &lt;strong>&lt;em>&amp;ldquo;认证与安全/认证体系/用户&amp;rdquo;&lt;/em>&lt;/strong> 菜单项，进入用户页面。&lt;/li>
&lt;li>单击列表上方 &lt;strong>&lt;em>&amp;ldquo;新建&amp;rdquo;&lt;/em>&lt;/strong> 按钮，进入新建用户页面。&lt;/li>
&lt;li>配置以下参数。
&lt;ul>
&lt;li>名称：设置用户的名称。&lt;/li>
&lt;li>备注：设置用户的备注信息。&lt;/li>
&lt;li>密码：设置用户的密码。&lt;/li>
&lt;li>域：选择用户所属的域。&lt;/li>
&lt;li>显示名：用户的显示名。&lt;/li>
&lt;li>登录控制台：设置用户是否有登录云管平台的权限。&lt;/li>
&lt;li>启用MFA：Multi-Factor Authentication，基于TOTP技术的多因素认证，用户需要通过两种的认证方式才能登录Cloudpods平台。即除了使用用户名、密码外还需要使用MFA安全码验证登录。请确保全局配置中已启用了双因子认证，否则无法在用户处启用MFA。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>单击 &lt;strong>&lt;em>&amp;ldquo;新建&amp;rdquo;&lt;/em>&lt;/strong> 按钮，新建用户并进入将用户加入项目(可选)页面。&lt;/li>
&lt;li>若需要加入项目，则配置下面参数：
&lt;ul>
&lt;li>项目：选择用户需要加入的域和项目。&lt;/li>
&lt;li>角色：设置用户加入项目时的角色，如sys_opsadmin或domain_opsadmin。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>配置完成后，单击 &lt;strong>&lt;em>&amp;ldquo;加入&amp;rdquo;&lt;/em>&lt;/strong> 按钮，将用户加入项目。&lt;/li>
&lt;/ol>
&lt;h4 id="新建安全管理员">新建安全管理员&lt;/h4>
&lt;ol>
&lt;li>在左侧导航栏，选择 &lt;strong>&lt;em>&amp;ldquo;认证与安全/认证体系/用户&amp;rdquo;&lt;/em>&lt;/strong> 菜单项，进入用户页面。&lt;/li>
&lt;li>单击列表上方 &lt;strong>&lt;em>&amp;ldquo;新建&amp;rdquo;&lt;/em>&lt;/strong> 按钮，进入新建用户页面。&lt;/li>
&lt;li>配置以下参数。
&lt;ul>
&lt;li>名称：设置用户的名称。&lt;/li>
&lt;li>备注：设置用户的备注信息。&lt;/li>
&lt;li>密码：设置用户的密码。&lt;/li>
&lt;li>域：选择用户所属的域。&lt;/li>
&lt;li>显示名：用户的显示名。&lt;/li>
&lt;li>登录控制台：设置用户是否有登录云管平台的权限。&lt;/li>
&lt;li>启用MFA：Multi-Factor Authentication，基于TOTP技术的多因素认证，用户需要通过两种的认证方式才能登录Cloudpods平台。即除了使用用户名、密码外还需要使用MFA安全码验证登录。请确保全局配置中已启用了双因子认证，否则无法在用户处启用MFA。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>单击 &lt;strong>&lt;em>&amp;ldquo;新建&amp;rdquo;&lt;/em>&lt;/strong> 按钮，新建用户并进入将用户加入项目(可选)页面。&lt;/li>
&lt;li>若需要加入项目，则配置下面参数：
&lt;ul>
&lt;li>项目：选择用户需要加入的域和项目。&lt;/li>
&lt;li>角色：设置用户加入项目时的角色，如sys_secadmin或domain_secadmin。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>配置完成后，单击 &lt;strong>&lt;em>&amp;ldquo;加入&amp;rdquo;&lt;/em>&lt;/strong> 按钮，将用户加入项目。&lt;/li>
&lt;/ol>
&lt;h4 id="新建审计管理员">新建审计管理员&lt;/h4>
&lt;ol>
&lt;li>在左侧导航栏，选择 &lt;strong>&lt;em>&amp;ldquo;认证与安全/认证体系/用户&amp;rdquo;&lt;/em>&lt;/strong> 菜单项，进入用户页面。&lt;/li>
&lt;li>单击列表上方 &lt;strong>&lt;em>&amp;ldquo;新建&amp;rdquo;&lt;/em>&lt;/strong> 按钮，进入新建用户页面。&lt;/li>
&lt;li>配置以下参数。
&lt;ul>
&lt;li>名称：设置用户的名称。&lt;/li>
&lt;li>备注：设置用户的备注信息。&lt;/li>
&lt;li>密码：设置用户的密码。&lt;/li>
&lt;li>域：选择用户所属的域。&lt;/li>
&lt;li>显示名：用户的显示名。&lt;/li>
&lt;li>登录控制台：设置用户是否有登录云管平台的权限。&lt;/li>
&lt;li>启用MFA：Multi-Factor Authentication，基于TOTP技术的多因素认证，用户需要通过两种的认证方式才能登录Cloudpods平台。即除了使用用户名、密码外还需要使用MFA安全码验证登录。请确保全局配置中已启用了双因子认证，否则无法在用户处启用MFA。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>单击 &lt;strong>&lt;em>&amp;ldquo;新建&amp;rdquo;&lt;/em>&lt;/strong> 按钮，新建用户并进入将用户加入项目(可选)页面。&lt;/li>
&lt;li>若需要加入项目，则配置下面参数：
&lt;ul>
&lt;li>项目：选择用户需要加入的域和项目。&lt;/li>
&lt;li>角色：设置用户加入项目时的角色，如sys_adtadmin或domain_adtadmin。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>配置完成后，单击 &lt;strong>&lt;em>&amp;ldquo;加入&amp;rdquo;&lt;/em>&lt;/strong> 按钮，将用户加入项目。&lt;/li>
&lt;/ol></description></item><item><title>Docs: 多租户权限配置案例</title><link>https://www.cloudpods.org/zh/docs/function_principle/auth_security/best_practice/selfservice/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://www.cloudpods.org/zh/docs/function_principle/auth_security/best_practice/selfservice/</guid><description>
&lt;p>平台提供了丰富的多租户体系和权限体系功能，可以通过简单配置满足各类使用场景。&lt;/p>
&lt;h2 id="特定用户独享指定宿主机集群">特定用户独享指定宿主机集群&lt;/h2>
&lt;p>配置方案：通过域隔离&lt;/p>
&lt;ol>
&lt;li>开启三级权限&lt;/li>
&lt;li>将待共享的宿主机归属到指定域，并把共享模式设置为&amp;quot;私有&amp;quot;，则只有归属该域下项目的用户可以使用这些宿主机。其他域的用户不可访问这些宿主机。&lt;/li>
&lt;li>在同一个域下创建项目，将用户加入这些项目，分配项目级别权限，例如：project_owner, project_editor, project_viewer&lt;/li>
&lt;li>用户登入后，切换到该域下项目，则能够在这些宿主机上创建主机&lt;/li>
&lt;/ol></description></item></channel></rss>