"use strict";(self.webpackChunkdocs_new=self.webpackChunkdocs_new||[]).push([[3852],{27520:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>c});var r=o(74848),i=o(28453);const s={sidebar_position:2},l="\u6392\u67e5pod\u5f02\u5e38",t={id:"operations/k8s/poderror",title:"\u6392\u67e5pod\u5f02\u5e38",description:"\u6839\u636epod\u72b6\u6001\u6392\u67e5\u9519\u8bef\u3002",source:"@site/docs/operations/k8s/poderror.md",sourceDirName:"operations/k8s",slug:"/operations/k8s/poderror",permalink:"/v3.10/docs/operations/k8s/poderror",draft:!1,unlisted:!1,editUrl:"https://github.com/yunionio/website/tree/master/docs/operations/k8s/poderror.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"pod\u5e38\u7528\u8fd0\u7ef4\u547d\u4ee4",permalink:"/v3.10/docs/operations/k8s/commonops"},next:{title:"\u6392\u67e5Pod\u7f51\u7edc\u95ee\u9898",permalink:"/v3.10/docs/operations/k8s/dnserror"}},d={},c=[{value:"\u786e\u8ba4 pod \u72b6\u6001",id:"\u786e\u8ba4-pod-\u72b6\u6001",level:2},{value:"\u68c0\u67e5pod\u76f8\u5173\u4e8b\u4ef6",id:"\u68c0\u67e5pod\u76f8\u5173\u4e8b\u4ef6",level:2},{value:"\u67e5\u770b\u65e5\u5fd7",id:"\u67e5\u770b\u65e5\u5fd7",level:2},{value:"pod \u5e38\u89c1\u9519\u8bef\u53ca\u5904\u7406\u65b9\u6cd5",id:"pod-\u5e38\u89c1\u9519\u8bef\u53ca\u5904\u7406\u65b9\u6cd5",level:2},{value:"CrashLoopBackOff\u72b6\u6001",id:"crashloopbackoff\u72b6\u6001",level:3},{value:"Evicted\u72b6\u6001",id:"evicted\u72b6\u6001",level:3},{value:"ImagePullBackOff\u72b6\u6001",id:"imagepullbackoff\u72b6\u6001",level:3},{value:"Pending\u72b6\u6001",id:"pending\u72b6\u6001",level:3},{value:"Error\u72b6\u6001",id:"error\u72b6\u6001",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"\u6392\u67e5pod\u5f02\u5e38",children:"\u6392\u67e5pod\u5f02\u5e38"}),"\n",(0,r.jsx)(n.p,{children:"\u6839\u636epod\u72b6\u6001\u6392\u67e5\u9519\u8bef\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u786e\u8ba4-pod-\u72b6\u6001",children:"\u786e\u8ba4 pod \u72b6\u6001"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u8bbe\u7f6e\u9ed8\u8ba4\u547d\u540d\u7a7a\u95f4\uff0c\u540e\u7eed\u6267\u884c\u76f8\u5173\u547d\u4ee4\u65f6\u53ef\u4ee5\u4e0d\u5e26\u201c-n onecloud\u201d \n$ kubectl config set-context --current --namespace=onecloud\n\n# \u67e5\u770b pod \u72b6\u6001\n$ kubectl get pod\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u68c0\u67e5pod\u76f8\u5173\u4e8b\u4ef6",children:"\u68c0\u67e5pod\u76f8\u5173\u4e8b\u4ef6"}),"\n",(0,r.jsx)(n.p,{children:"\u5f53\u67e5\u770b\u5230 pod \u72b6\u6001\u4e0d\u662f running \u72b6\u6001\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 describe \u547d\u4ee4\u67e5\u770b\u66f4\u591a\u4fe1\n\u606f\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u4e3e\u4f8b\u4e3a\u67e5\u770b host \u670d\u52a1\u7684 pod \u7684\u4e8b\u4ef6\u4fe1\u606f\n$ kubectl describe pod default-host-z8j5r\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u67e5\u770b\u65e5\u5fd7",children:"\u67e5\u770b\u65e5\u5fd7"}),"\n",(0,r.jsx)(n.p,{children:"\u53ef\u4ee5\u901a\u8fc7\u68c0\u67e5\u65e5\u5fd7\u6765\u67e5\u770b\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u6b63\u5e38\u8fd0\u884c\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b host \u670d\u52a1\u7684\u65e5\u5fd7\u4fe1\u606f\n$ kubectl logs default-host-z8j5r -c host -f \n"})}),"\n",(0,r.jsx)(n.h2,{id:"pod-\u5e38\u89c1\u9519\u8bef\u53ca\u5904\u7406\u65b9\u6cd5",children:"pod \u5e38\u89c1\u9519\u8bef\u53ca\u5904\u7406\u65b9\u6cd5"}),"\n",(0,r.jsx)(n.h3,{id:"crashloopbackoff\u72b6\u6001",children:"CrashLoopBackOff\u72b6\u6001"}),"\n",(0,r.jsx)(n.p,{children:"CrashLoopBackOff \u72b6\u6001\u8bf4\u660e\u5bb9\u5668\u66fe\u7ecf\u542f\u52a8\u4e86\uff0c\u4f46\u53c8\u5f02\u5e38\u9000\u51fa\u3002\u6b64\u65f6\u53ef\u4ee5\u5148\u67e5\u770b\n\u4e00\u4e0b\u5bb9\u5668\u7684\u65e5\u5fd7\u3002\u901a\u8fc7 kubectl logs \u547d\u4ee4\u53ef\u4ee5\u53d1\u73b0\u4e00\u4e9b\u5bb9\u5668\u9000\u51fa\u7684\u539f\u56e0:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u901a\u8fc7\u67e5\u770b\u65e5\u5fd7\u53d1\u73b0\u662f\u810f\u6570\u636e\u5bfc\u81f4\u7684"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"[root@test ~]#kubectl get pod | grep region\ndefault-region-75bc7d474f-rjpkm 0/1\nCrashLoopBackOff 12 2d20h\ndefault-region-dns-88s7z 1/1 Running\n0 2d20h\n[root@test ~]# kubectl logs default-region-75bc7d474f\uffferjpkm | less\n[I 200618 16:13:32\nappsrv.(*Application).ServeHTTP(appsrv.go:237)]\nhlgxXm4i2qF10tkBXu3rAVrCC-w= 200 b5e0b2 GET\n/networks?admin=true&delete=all&details=true&filter.0=updated_at.\nge%28%272020-06-\n03+07%3A56%3A04%27%29&filter.1=manager_id.isnullorempty%28%29&fil\nter.2=external_id.isnullorempty%28%29&limit=1024&offset=0&order=a\nsc&order_by.0=updated_at&pending_delete=all (10.105.232.12:55236)\n34.50ms\n[F 200618 16:13:32 models.(*SGuest).GetDriver(guests.go:557)]\nUnsupported hypervisor Aliyun\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"pod \u4e2d\u5bf9\u5e94\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u683c\u5f0f\u4e0d\u5bf9"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:o(24509).A+"",width:"1087",height:"56"})}),"\n",(0,r.jsx)(n.h3,{id:"evicted\u72b6\u6001",children:"Evicted\u72b6\u6001"}),"\n",(0,r.jsx)(n.p,{children:"\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\uff0c\u591a\u89c1\u4e8e\u7cfb\u7edf\u5185\u5b58\u6216\u786c\u76d8\u8d44\u6e90\u4e0d\u8db3\u3002\u901a\u8fc7\u201ckubectl describe\u547d\u4ee4\u201d\u67e5\u770b\u5f02\u5e38pod\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'[root@test-interface ~]# kubectl describe -n onecloud pod default-ovn-north-7689f47894-tqp2g\nName:           default-ovn-north-7689f47894-tqp2g\nNamespace:      onecloud\nPriority:       0\nNode:           test-interface/\nStart Time:     Fri, 20 Mar 2020 18:38:27 +0800\nLabels:         app=ovn-north\n                app.kubernetes.io/component=ovn-north\n                app.kubernetes.io/instance=onecloud-cluster-8p2p\n                app.kubernetes.io/managed-by=onecloud-operator\n                app.kubernetes.io/name=onecloud-cluster\n                pod-template-hash=7689f47894\nAnnotations:    cni.projectcalico.org/podIP: 10.40.180.212/32\n                onecloud.yunion.io/last-applied-configuration:\n                  {"volumes":[{"name":"certs","secret":{"secretName":"default-certs","items":[{"key":"ca.crt","path":"ca.crt"},{"key":"service.crt","path":"...\nStatus:         Failed\nReason:         Evicted\nMessage:        The node was low on resource: ephemeral-storage. Container ovn-north was using 109956Ki, which exceeds its request of 0.\n'})}),"\n",(0,r.jsx)(n.h3,{id:"imagepullbackoff\u72b6\u6001",children:"ImagePullBackOff\u72b6\u6001"}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u5e38\u662f\u955c\u50cf\u540d\u79f0\u914d\u7f6e\u9519\u8bef\u6216\u8005\u79c1\u6709\u955c\u50cf\u7684\u5bc6\u94a5\u914d\u7f6e\u9519\u8bef\u5bfc\u81f4\u3002\u901a\u8fc7\u201ckubectl describe\u547d\u4ee4\u201d\u67e5\u770b\u5f02\u5e38pod\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'Events:\n  Type     Reason     Age                From                Message\n  ----     ------     ----               ----                -------\n  Normal   Scheduled  35s                default-scheduler   Successfully assigned onecloud/default-region-85ff9dcd5-mh8cl to yunion320\n  Normal   Pulling    34s                kubelet, yunion320  Pulling image "registry.cn-beijing.aliyuncs.com/yunionio/region:v3.2.1"\n  Normal   Pulled     33s                kubelet, yunion320  Successfully pulled image "registry.cn-beijing.aliyuncs.com/yunionio/region:v3.2.1"\n  Normal   Created    33s                kubelet, yunion320  Created container init\n  Normal   Started    33s                kubelet, yunion320  Started container init\n  Normal   Pulling    15s (x2 over 28s)  kubelet, yunion320  Pulling image "registry.cn-beijing.aliyuncs.com/yunionio/region:v3.2.2"\n  Warning  Failed     15s (x2 over 28s)  kubelet, yunion320  Failed to pull image "registry.cn-beijing.aliyuncs.com/yunionio/region:v3.2.2": rpc error: code = Unknown desc = Error response from daemon: manifest for registry.cn-beijing.aliyuncs.com/yunionio/region:v3.2.2 not found: manifest unknown: manifest unknown\n  Warning  Failed     15s (x2 over 28s)  kubelet, yunion320  Error: ErrImagePull\n  Normal   BackOff    3s                 kubelet, yunion320  Back-off pulling image "registry.cn-beijing.aliyuncs.com/yunionio/region:v3.2.2"\n  Warning  Failed     3s                 kubelet, yunion320  Error: ImagePullBackOff\n'})}),"\n",(0,r.jsx)(n.h3,{id:"pending\u72b6\u6001",children:"Pending\u72b6\u6001"}),"\n",(0,r.jsx)(n.p,{children:"Pending\u72b6\u6001\uff0c\u8fd9\u4e2a\u72b6\u6001\u610f\u5473\u7740\uff0cPod\u7684yaml\u6587\u4ef6\u5df2\u7ecf\u63d0\u4ea4\u7ed9Kubernetes\uff0cAPI\u5bf9\u8c61\u5df2\u7ecf\u88ab\u521b\u5efa\u5e76\u4fdd\u5b58\u5728Etcd \u5f53\u4e2d\u3002\u4f46\u662f\uff0c\u8fd9\u4e2aPod\u91cc\u6709\u4e9b\u5bb9\u5668\u56e0\u4e3a\u67d0\u79cd\u539f\u56e0\u800c\u4e0d\u80fd\u88ab\u987a\u5229\u521b\u5efa\u3002"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u8c03\u5ea6\u4e0d\u6210\u529f\uff08\u53ef\u4ee5\u901a\u8fc7 kubectl describe pod \u547d\u4ee4\u67e5\u770b\u5230\u5f53\u524d Pod \u7684\u4e8b\u4ef6\uff0c\u8fdb\u800c\u5224\u65ad\u4e3a\u4ec0\u4e48\u6ca1\u6709\u8c03\u5ea6\uff09\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u53ef\u80fd\u539f\u56e0\uff1a \u8d44\u6e90\u4e0d\u8db3\uff08\u96c6\u7fa4\u5185\u6240\u6709\u7684 Node \u90fd\u4e0d\u6ee1\u8db3\u8be5 Pod \u8bf7\u6c42\u7684 CPU\u3001\u5185\u5b58\u3001GPU \u7b49\u8d44\u6e90\uff09\uff1b"}),"\n",(0,r.jsx)(n.li,{children:"HostPort \u5df2\u88ab\u5360\u7528\uff08\u901a\u5e38\u63a8\u8350\u4f7f\u7528 Service \u5bf9\u5916\u5f00\u653e\u670d\u52a1\u7aef\u53e3\uff09\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"error\u72b6\u6001",children:"Error\u72b6\u6001"}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u5e38\u5904\u4e8e Error \u72b6\u6001\u8bf4\u660e Pod \u542f\u52a8\u8fc7\u7a0b\u4e2d\u53d1\u751f\u4e86\u9519\u8bef\u3002\u5e38\u89c1\u7684\u539f\u56e0\u5305\u62ec\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4f9d\u8d56\u7684 ConfigMap\u3001Secret \u6216\u8005 PV \u7b49\u4e0d\u5b58\u5728\uff1b"}),"\n",(0,r.jsx)(n.li,{children:"\u8bf7\u6c42\u7684\u8d44\u6e90\u8d85\u8fc7\u4e86\u7ba1\u7406\u5458\u8bbe\u7f6e\u7684\u9650\u5236\uff0c\u6bd4\u5982\u8d85\u8fc7\u4e86 LimitRange \u7b49\uff1b"}),"\n",(0,r.jsx)(n.li,{children:"\u8fdd\u53cd\u96c6\u7fa4\u7684\u5b89\u5168\u7b56\u7565\uff0c\u6bd4\u5982\u8fdd\u53cd\u4e86 PodSecurityPolicy \u7b49\uff1b"}),"\n",(0,r.jsx)(n.li,{children:"\u5bb9\u5668\u65e0\u6743\u64cd\u4f5c\u96c6\u7fa4\u5185\u7684\u8d44\u6e90\uff0c\u6bd4\u5982\u5f00\u542f RBAC \u540e\uff0c\u9700\u8981\u4e3a ServiceAccount \u914d\u7f6e\u89d2\u8272\u7ed1\u5b9a;"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},24509:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/configmaperror-d8168b8f61567e871c9ed8abf8b37c78.png"},28453:(e,n,o)=>{o.d(n,{R:()=>l,x:()=>t});var r=o(96540);const i={},s=r.createContext(i);function l(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);