[{"body":"Release time: 2021-09-07 14:04:37\n cloudpods Repo: https://github.com/yunionio/cloudpods\n40 commits to cloudpods - v3.6.22 since this release.\nBug Fixes (39)  resolve permission issues for samlusers and quotas (aec0affa1, Qiu Jian) avoid double counting when compute networks nic count (07aab1dae, rainzm) routes to private prefixes should be distributed on private nic (9290e6fbd, Qiu Jian) inter-vm traffic limited by eip bandwidth limit (5bbe39749, Qiu Jian) dhcp classless route encoding error (288c0d561, Qiu Jian) server migrate network to a vlan network (5fff71781, Qiu Jian) baremetal: increase ipmitool reboot sleep wait time (18c8973c6, Zexi Li) baremetal: inject mac to cmdline (53a696047, Zexi Li) baremetal: inject mac when admin nic found (89e8b1fdd, Zexi Li) baremetal: reindex nic (#12087) (17b80d528, Zexi Li) climc: add version list command (171792d6c, Qu Xuan) cloudcommon: avoid service exit when etcd unreachable (dc37976b5, Zexi Li) cloudid: avoid sync clouduser twice (1bd783aef, Qu Xuan) cloudid: azure attach enabled subscription policy (916fa8d4b, Qu Xuan) esxiagetn: keep compatible with the lower version vcenter when copying the disk (5a34578f9, rainzm) host-deployer: XFS uuid冲突 无法 mount (8e582878c, panda) keystone: appsrv listen multi port failed cause of race condition (372b2ff6a, Zexi Li) monitor: fix resource details can’t show monitor metric (4c668de66, zhaoxiangchun) region: return sql error (3fbb27b8e, Qu Xuan) region: delete dirty network (8da963476, Qu Xuan) region: azure vm disk size (b4f4bd750, Qu Xuan) region: baremetal server reuse ip address condition (3f6db673b, Zexi Li) region: return region sql error (e86e95faf, Qu Xuan) region: lb resource count (43ab653d4, Qu Xuan) region: not set baremetal is_maintenance when action is start (dc819e77f, Zexi Li) region: sync openstack multi zone storages (0025975b4, Qu Xuan) region: prohibit resizing the disk of a esxi vm with instance snapshots (c58c36eab, rainzm) region: avoid get openstack hostid panic (935d73f33, Qu Xuan) region: sync with multi worker (b9bb7679e, Qu Xuan) region: adjust the query range corresponding to the alarm strategy (8a4f0cecd, rainzm) region: allow guest network zero bandwidth limit (0abdd5195, Zexi Li) region: baremetal server resued address nic count should be subtracted (f461726f5, Zexi Li) region: resource count for cachedimages (d70235fd1, Qu Xuan) region: enable zstack allocate ip by itself (c6177d722, Qu Xuan) region: aliyun rds network sync (ca844df22, Qu Xuan) region: sync aliyun classic network ip addr (40c020e76, Qu Xuan) region: baremetal spec condition (2141af918, Zexi Li) region: raise GetNamedNetworkConfiguration error (052499e4e, Zexi Li) scheduler: make option EnableQuotaCheck work (5b9a383e4, rainzm)  Features (1)  region: check whether the esxi host is ip or domain name (8959f6675, rainzm)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.6.22 since this release.\nOthers (1)  update vendor (82417e2, Qiu Jian)   notify-plugins Repo: https://github.com/yunionio/notify-plugins\n1 commits to notify-plugins - v3.6.22 since this release.\nBug Fixes (1)  worwx: return correctly when fetch contact (a33198a, rainzm)   ocadm Repo: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.22 since this release.\nHack (1)  use 99 years certs (0ebffdd, Zexi Li)   sdnagent Repo: https://github.com/yunionio/sdnagent\n2 commits to sdnagent - v3.6.22 since this release.\nBug Fixes (2)  tc: aware of ingress qdisc (0c4b0a2, Zexi Li) tcman: delete all qdiscs before batch replace (93ff114, Zexi Li)  ","excerpt":"Release time: 2021-09-07 14:04:37\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-22/","title":"v3.6.22"},{"body":"发布时间 2021-09-07 14:04:37\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n40 commits to cloudpods - v3.6.22 since this release.\nBug Fixes (39)  resolve permission issues for samlusers and quotas (aec0affa1, Qiu Jian) avoid double counting when compute networks nic count (07aab1dae, rainzm) routes to private prefixes should be distributed on private nic (9290e6fbd, Qiu Jian) inter-vm traffic limited by eip bandwidth limit (5bbe39749, Qiu Jian) dhcp classless route encoding error (288c0d561, Qiu Jian) server migrate network to a vlan network (5fff71781, Qiu Jian) baremetal: increase ipmitool reboot sleep wait time (18c8973c6, Zexi Li) baremetal: inject mac to cmdline (53a696047, Zexi Li) baremetal: inject mac when admin nic found (89e8b1fdd, Zexi Li) baremetal: reindex nic (#12087) (17b80d528, Zexi Li) climc: add version list command (171792d6c, Qu Xuan) cloudcommon: avoid service exit when etcd unreachable (dc37976b5, Zexi Li) cloudid: avoid sync clouduser twice (1bd783aef, Qu Xuan) cloudid: azure attach enabled subscription policy (916fa8d4b, Qu Xuan) esxiagetn: keep compatible with the lower version vcenter when copying the disk (5a34578f9, rainzm) host-deployer: XFS uuid冲突 无法 mount (8e582878c, panda) keystone: appsrv listen multi port failed cause of race condition (372b2ff6a, Zexi Li) monitor: fix resource details can’t show monitor metric (4c668de66, zhaoxiangchun) region: return sql error (3fbb27b8e, Qu Xuan) region: delete dirty network (8da963476, Qu Xuan) region: azure vm disk size (b4f4bd750, Qu Xuan) region: baremetal server reuse ip address condition (3f6db673b, Zexi Li) region: return region sql error (e86e95faf, Qu Xuan) region: lb resource count (43ab653d4, Qu Xuan) region: not set baremetal is_maintenance when action is start (dc819e77f, Zexi Li) region: sync openstack multi zone storages (0025975b4, Qu Xuan) region: prohibit resizing the disk of a esxi vm with instance snapshots (c58c36eab, rainzm) region: avoid get openstack hostid panic (935d73f33, Qu Xuan) region: sync with multi worker (b9bb7679e, Qu Xuan) region: adjust the query range corresponding to the alarm strategy (8a4f0cecd, rainzm) region: allow guest network zero bandwidth limit (0abdd5195, Zexi Li) region: baremetal server resued address nic count should be subtracted (f461726f5, Zexi Li) region: resource count for cachedimages (d70235fd1, Qu Xuan) region: enable zstack allocate ip by itself (c6177d722, Qu Xuan) region: aliyun rds network sync (ca844df22, Qu Xuan) region: sync aliyun classic network ip addr (40c020e76, Qu Xuan) region: baremetal spec condition (2141af918, Zexi Li) region: raise GetNamedNetworkConfiguration error (052499e4e, Zexi Li) scheduler: make option EnableQuotaCheck work (5b9a383e4, rainzm)  Features (1)  region: check whether the esxi host is ip or domain name (8959f6675, rainzm)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.6.22 since this release.\nOthers (1)  update vendor (82417e2, Qiu Jian)   notify-plugins 仓库地址: https://github.com/yunionio/notify-plugins\n1 commits to notify-plugins - v3.6.22 since this release.\nBug Fixes (1)  worwx: return correctly when fetch contact (a33198a, rainzm)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.22 since this release.\nHack (1)  use 99 years certs (0ebffdd, Zexi Li)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n2 commits to sdnagent - v3.6.22 since this release.\nBug Fixes (2)  tc: aware of ingress qdisc (0c4b0a2, Zexi Li) tcman: delete all qdiscs before batch replace (93ff114, Zexi Li)  ","excerpt":"发布时间 2021-09-07 14:04:37\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-22/","title":"v3.6.22"},{"body":"Release time: 2021-07-27 16:28:36\n cloudpods Repo: https://github.com/yunionio/cloudpods\n7 commits to cloudpods - v3.6.21 since this release.\nBug Fixes (7)  simplify SQL for distinct field query of tenant or domain names (b5bd5cbbb, Qiu Jian) host: find same vendor iommu_group devices (980814fce, Zexi Li) region: fetch zone before syncing promise cloud provider storages (59e7fd819, rainzm) region: openstack ip pre allocate (d5fde87fc, Qu Xuan) region: cpu desc too long (1c5ef3961, Qu Xuan) region: update qcloud secgroup rule (9df734a7f, Qu Xuan) region: azure quota sync (884347369, Qu Xuan)  ","excerpt":"Release time: 2021-07-27 16:28:36\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-21/","title":"v3.6.21"},{"body":"发布时间 2021-07-27 16:28:36\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n7 commits to cloudpods - v3.6.21 since this release.\nBug Fixes (7)  simplify SQL for distinct field query of tenant or domain names (b5bd5cbbb, Qiu Jian) host: find same vendor iommu_group devices (980814fce, Zexi Li) region: fetch zone before syncing promise cloud provider storages (59e7fd819, rainzm) region: openstack ip pre allocate (d5fde87fc, Qu Xuan) region: cpu desc too long (1c5ef3961, Qu Xuan) region: update qcloud secgroup rule (9df734a7f, Qu Xuan) region: azure quota sync (884347369, Qu Xuan)  ","excerpt":"发布时间 2021-07-27 16:28:36\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-21/","title":"v3.6.21"},{"body":"Release time: 2021-07-22 16:28:31\n cloudpods Repo: https://github.com/yunionio/cloudpods\n30 commits to cloudpods - v3.6.20 since this release.\nBug Fixes (23)  migrate interface before commit desc (57a49f860, Qiu Jian) host detach wire not update netinterface (a3943097c, Qiu Jian) qemu-img create disk may fail to preallocation=metadata enable for large disk (b98201c0a, Qiu Jian) add codes to switch bridge of ovs port (ce86205aa, Qiu Jian) add cloudroot as system account, so as not using normal user id (025031883, Qiu Jian) baremetal: compatible with SN empty of MegaRaid (2a927ec7a, Zexi Li) baremetal: use ipmitool power reset when redfish power on error (9f0193574, Zexi Li) build: baremetal arm64 build (ad98d01e9, Zexi Li) host-deployer: detect UEFI supported not correct (bca3ca19e, Zexi Li) host-deployer: make SKVMGuestLVMPartition work fine (7aeb30362, rainzm) keystone: policy filter by role (8efdcbf92, Qu Xuan) keystone: user not found error fix (395f74ffd, tb365) keystone: avoid sql error (58709b21a, Qu Xuan) monitor: alert policy use ownerId when update (74e00b432, zhaoxiangchun) region: allocate server eip without hostwire restrict (f5b68f057, Qu Xuan) region: sync storage before syncing host in syncOnPremiseCloudProviderInfo (ba1202fe1, rainzm) region: set DefaultSysDiskBackend as empty for esxi guest (cafd1b990, rainzm) region: return rds networks info (ebdd4ee2a, Qu Xuan) region: rds network sync (9a1e0d26e, Qu Xuan) region: disable public cloud ip pre allocate (7594720f0, Qu Xuan) region: handle the error of RequestGuestCreateAllDisks (522aada8b, rainzm) region: sync auzre subscription health status (e624f422d, Qu Xuan) region: remove debug info (f4c279981, Qu Xuan)  Feature (1)  allow server switch network without service interruption (cc44b3a6f, Qiu Jian)  Features (4)  host: aware of kubelet eviction config (47d7b434b, Zexi Li) host: add openEuler rootFs driver (f2b068416, Zexi Li) hostdeployer: change UserAdd to CheckOrAddUser (665dd2c0d, rainzm) hostdeployer: change the way fo GetLoginAccount in windows (b9fc69576, rainzm)  Others (2)  minor fixes (55fe3fa3b, Qiu Jian) update OWNERS (468453951, Zexi Li)   sdnagent Repo: https://github.com/yunionio/sdnagent\n1 commits to sdnagent - v3.6.20 since this release.\nAgent (1)  ovn: ensure iptables fastpath for geneve traffics (c1f2dca, Yousong Zhou)  ","excerpt":"Release time: 2021-07-22 16:28:31\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-20/","title":"v3.6.20"},{"body":"发布时间 2021-07-22 16:28:31\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n30 commits to cloudpods - v3.6.20 since this release.\nBug Fixes (23)  migrate interface before commit desc (57a49f860, Qiu Jian) host detach wire not update netinterface (a3943097c, Qiu Jian) qemu-img create disk may fail to preallocation=metadata enable for large disk (b98201c0a, Qiu Jian) add codes to switch bridge of ovs port (ce86205aa, Qiu Jian) add cloudroot as system account, so as not using normal user id (025031883, Qiu Jian) baremetal: compatible with SN empty of MegaRaid (2a927ec7a, Zexi Li) baremetal: use ipmitool power reset when redfish power on error (9f0193574, Zexi Li) build: baremetal arm64 build (ad98d01e9, Zexi Li) host-deployer: detect UEFI supported not correct (bca3ca19e, Zexi Li) host-deployer: make SKVMGuestLVMPartition work fine (7aeb30362, rainzm) keystone: policy filter by role (8efdcbf92, Qu Xuan) keystone: user not found error fix (395f74ffd, tb365) keystone: avoid sql error (58709b21a, Qu Xuan) monitor: alert policy use ownerId when update (74e00b432, zhaoxiangchun) region: allocate server eip without hostwire restrict (f5b68f057, Qu Xuan) region: sync storage before syncing host in syncOnPremiseCloudProviderInfo (ba1202fe1, rainzm) region: set DefaultSysDiskBackend as empty for esxi guest (cafd1b990, rainzm) region: return rds networks info (ebdd4ee2a, Qu Xuan) region: rds network sync (9a1e0d26e, Qu Xuan) region: disable public cloud ip pre allocate (7594720f0, Qu Xuan) region: handle the error of RequestGuestCreateAllDisks (522aada8b, rainzm) region: sync auzre subscription health status (e624f422d, Qu Xuan) region: remove debug info (f4c279981, Qu Xuan)  Feature (1)  allow server switch network without service interruption (cc44b3a6f, Qiu Jian)  Features (4)  host: aware of kubelet eviction config (47d7b434b, Zexi Li) host: add openEuler rootFs driver (f2b068416, Zexi Li) hostdeployer: change UserAdd to CheckOrAddUser (665dd2c0d, rainzm) hostdeployer: change the way fo GetLoginAccount in windows (b9fc69576, rainzm)  Others (2)  minor fixes (55fe3fa3b, Qiu Jian) update OWNERS (468453951, Zexi Li)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n1 commits to sdnagent - v3.6.20 since this release.\nAgent (1)  ovn: ensure iptables fastpath for geneve traffics (c1f2dca, Yousong Zhou)  ","excerpt":"发布时间 2021-07-22 16:28:31\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-20/","title":"v3.6.20"},{"body":"Release time: 2021-07-02 19:23:36\n cloudpods Repo: https://github.com/yunionio/cloudpods\n48 commits to cloudpods - v3.6.19 since this release.\nBug Fixes (32)  do not resize LVM paritition and skip and return success (3621719de, Qiu Jian) do not use ntfsresize to resize NTFS partition (a1dfe3663, Qiu Jian) support windows 2003 (3c42e8227, Qiu Jian) Remove the nat gateway when computing network usage (bf6c114e1, rainzm) get datacenter of host via GetDatacenter (267d83bdd, rainzm) baremetal: nvme allocable (9e812526c, Zexi Li) baremetal: record uefi info (7afa25118, Zexi Li) baremetal: remove bundle libs build (aeb73f0c2, Zexi Li) baremetal: close ssh test client (7ff126472, Zexi Li) climc: update climc-base image to 20210701 (e698e1df8, Zexi Li) cloudid: avoid duplicate create saml provider (ccaf95516, Qu Xuan) cloudid: huawei group role attach and detach (bc9ca3135, Qu Xuan) host: allow server directory a symbol link to directory in other location (3bf28fd41, Qiu Jian) host: get ceph used capacity (4dae72d8a, Qu Xuan) host: update rbd storage capacity (6a6ca2663, Qu Xuan) hostman: show server status changed reason (4cd723d09, Qu Xuan) monitor: fix monitor process alert (f170d4d6b, zhaoxiangchun) monitor: fix alert record not return resource details (ffbb3a348, zhaoxiangchun) monitor: exit monitor engine in time when happen err (6d67fc5d8, zhaoxiangchun) notify: distinct field of receivers (e5097bcdc, rainzm) notify: clean verifiedNote when marking verified (69eeb1dd0, rainzm) region: clean schedule cache when host add or delete netif (f69b97689, Zexi Li) region: ignore qcloud bw pkg error (5753071cc, Qu Xuan) region: baremetal server change ip address reuse (433e03a02, Zexi Li) region: qcloud bandwidth pkg (542c10bf2, Qu Xuan) region: add project filter for cloudprovider (c86841ede, Qu Xuan) region: manager distinct field (f8140a13a, Qu Xuan) region: avoid update storage conf not work (f05468cb4, Qu Xuan) region: validate disk status when create snapshot (481fdfb65, Qu Xuan) region,scheduler: baremetal reuse ip (b122f1eef, Zexi Li) scheduler: baremetal network free address out of count (bd882c061, Zexi Li) webconsole: aliyun vnc windows ctl+alt+del (8eced7fd0, Qu Xuan)  Features (9)  add interface INetworkNicCountGetter (bab148685, rainzm) apigateway: support export dict keys (c2e2a0b24, Qu Xuan) baremetal: support management of none BMC host (e53e36deb, Zexi Li) baremetal: add UEFI related util (b6aa4cd39, Zexi Li) esxi: reduce the number of requests and the amount of data transferred (7692132ac, rainzm) esxi: disable sync cloudimage from image cache (59e52eb7f, rainzm) host: support netplan configuration (067b2f7fa, Zexi Li) region: add ProhibitRefreshingCloudImage for options (236b92773, rainzm) scheduler: optimize the speed of network predicate (6b92d1d4f, rainzm)  Mcclient (1)  Sshkeypairs: add FetchPrivateKey (40f7da9ea, Yousong Zhou)  Procutils (4)  WaitZombieLoop: remove unneeded info request (d6c4eeef5, Yousong Zhou) WaitZombieLoop: less verbose iota (1aae46c8d, Yousong Zhou) WaitZombieLoop: use const str “1” for my pid (e8955c6c7, Yousong Zhou) add WaitZombieLoop (80a1d4330, Yousong Zhou)  Treewide (1)  wait possible zombies (1f10232af, Yousong Zhou)  Webconsole (1)  wait zombies (b508901b5, Yousong Zhou)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.6.19 since this release.\nBug Fixes (2)  update process.total name (3549431, zhaoxiangchun) update system commonalert param (f6f14dc, zhaoxiangchun)  Features (1)  add process common alert policy (c1193b6, zhaoxiangchun)   ocadm Repo: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.19 since this release.\nFeatures (1)  calico,k8s,ovn: 部置calico-node时调整默认配置提升ovn隧道流量的性能 (85383f5, Zhang Dongliang)  ","excerpt":"Release time: 2021-07-02 19:23:36\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-19/","title":"v3.6.19"},{"body":"发布时间 2021-07-02 19:23:36\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n48 commits to cloudpods - v3.6.19 since this release.\nBug Fixes (32)  do not resize LVM paritition and skip and return success (3621719de, Qiu Jian) do not use ntfsresize to resize NTFS partition (a1dfe3663, Qiu Jian) support windows 2003 (3c42e8227, Qiu Jian) Remove the nat gateway when computing network usage (bf6c114e1, rainzm) get datacenter of host via GetDatacenter (267d83bdd, rainzm) baremetal: nvme allocable (9e812526c, Zexi Li) baremetal: record uefi info (7afa25118, Zexi Li) baremetal: remove bundle libs build (aeb73f0c2, Zexi Li) baremetal: close ssh test client (7ff126472, Zexi Li) climc: update climc-base image to 20210701 (e698e1df8, Zexi Li) cloudid: avoid duplicate create saml provider (ccaf95516, Qu Xuan) cloudid: huawei group role attach and detach (bc9ca3135, Qu Xuan) host: allow server directory a symbol link to directory in other location (3bf28fd41, Qiu Jian) host: get ceph used capacity (4dae72d8a, Qu Xuan) host: update rbd storage capacity (6a6ca2663, Qu Xuan) hostman: show server status changed reason (4cd723d09, Qu Xuan) monitor: fix monitor process alert (f170d4d6b, zhaoxiangchun) monitor: fix alert record not return resource details (ffbb3a348, zhaoxiangchun) monitor: exit monitor engine in time when happen err (6d67fc5d8, zhaoxiangchun) notify: distinct field of receivers (e5097bcdc, rainzm) notify: clean verifiedNote when marking verified (69eeb1dd0, rainzm) region: clean schedule cache when host add or delete netif (f69b97689, Zexi Li) region: ignore qcloud bw pkg error (5753071cc, Qu Xuan) region: baremetal server change ip address reuse (433e03a02, Zexi Li) region: qcloud bandwidth pkg (542c10bf2, Qu Xuan) region: add project filter for cloudprovider (c86841ede, Qu Xuan) region: manager distinct field (f8140a13a, Qu Xuan) region: avoid update storage conf not work (f05468cb4, Qu Xuan) region: validate disk status when create snapshot (481fdfb65, Qu Xuan) region,scheduler: baremetal reuse ip (b122f1eef, Zexi Li) scheduler: baremetal network free address out of count (bd882c061, Zexi Li) webconsole: aliyun vnc windows ctl+alt+del (8eced7fd0, Qu Xuan)  Features (9)  add interface INetworkNicCountGetter (bab148685, rainzm) apigateway: support export dict keys (c2e2a0b24, Qu Xuan) baremetal: support management of none BMC host (e53e36deb, Zexi Li) baremetal: add UEFI related util (b6aa4cd39, Zexi Li) esxi: reduce the number of requests and the amount of data transferred (7692132ac, rainzm) esxi: disable sync cloudimage from image cache (59e52eb7f, rainzm) host: support netplan configuration (067b2f7fa, Zexi Li) region: add ProhibitRefreshingCloudImage for options (236b92773, rainzm) scheduler: optimize the speed of network predicate (6b92d1d4f, rainzm)  Mcclient (1)  Sshkeypairs: add FetchPrivateKey (40f7da9ea, Yousong Zhou)  Procutils (4)  WaitZombieLoop: remove unneeded info request (d6c4eeef5, Yousong Zhou) WaitZombieLoop: less verbose iota (1aae46c8d, Yousong Zhou) WaitZombieLoop: use const str “1” for my pid (e8955c6c7, Yousong Zhou) add WaitZombieLoop (80a1d4330, Yousong Zhou)  Treewide (1)  wait possible zombies (1f10232af, Yousong Zhou)  Webconsole (1)  wait zombies (b508901b5, Yousong Zhou)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.6.19 since this release.\nBug Fixes (2)  update process.total name (3549431, zhaoxiangchun) update system commonalert param (f6f14dc, zhaoxiangchun)  Features (1)  add process common alert policy (c1193b6, zhaoxiangchun)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.19 since this release.\nFeatures (1)  calico,k8s,ovn: 部置calico-node时调整默认配置提升ovn隧道流量的性能 (85383f5, Zhang Dongliang)  ","excerpt":"发布时间 2021-07-02 19:23:36\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-19/","title":"v3.6.19"},{"body":"Release time: 2021-06-07 23:03:55\n cloudpods Repo: https://github.com/yunionio/cloudpods\n3 commits to cloudpods - v3.6.18 since this release.\nBug Fixes (3)  region: validate attached disk size and backend (8d519ce2e, Qu Xuan) region: skip server migrate quota check (b024ce902, Qu Xuan) telegraf-raid-plugin: add image-telegraf-raid-plugin in Makefile (de6285b19, zhaoxiangchun)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.6.18 since this release.\nBug Fixes (1)  update raid-plugin image tag (b5c2791, zhaoxiangchun)  ","excerpt":"Release time: 2021-06-07 23:03:55\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-18/","title":"v3.6.18"},{"body":"发布时间 2021-06-07 23:03:55\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n3 commits to cloudpods - v3.6.18 since this release.\nBug Fixes (3)  region: validate attached disk size and backend (8d519ce2e, Qu Xuan) region: skip server migrate quota check (b024ce902, Qu Xuan) telegraf-raid-plugin: add image-telegraf-raid-plugin in Makefile (de6285b19, zhaoxiangchun)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.6.18 since this release.\nBug Fixes (1)  update raid-plugin image tag (b5c2791, zhaoxiangchun)  ","excerpt":"发布时间 2021-06-07 23:03:55\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-18/","title":"v3.6.18"},{"body":"Release time: 2021-06-07 09:19:49\n cloudpods Repo: https://github.com/yunionio/cloudpods\n24 commits to cloudpods - v3.6.17 since this release.\nBug Fixes (20)  secgroup cache policy (43ca3f325, Qu Xuan) hpssacli should skip empty slots (16c2e6bd2, Qiu Jian) get apigateway auth/regions with error of illegal mix of collations (7f0f640e8, Qiu Jian) 修复云账号和宿主机报警问题 (a1a324aec, zhaoxiangchun) windows resize file system (b34c35ead, Qiu Jian) cloudid: avoid location missing api-version (3b5e38f47, Qu Xuan) host: raid status fix (b3932c70b, zhaoxiangchun) host: raid status (12dc56258, zhaoxiangchun) host: avoid delete removed disk failed (406d81e5d, Qu Xuan) host: avoid panic when params is nil (9fcaf499d, Qu Xuan) monitor: fix storage tag (2ae6c7b6c, zhaoxiangchun) region: resuce mode of migrate (06459b3db, Zexi Li) region: lbcert cache clean duplicate data fix (0e86ff6b2, tb365) region: show azure deploy failed error (aa904b972, Qu Xuan) region: migrate use rescue mode (15bca887a, Zexi Li) region: avoid deadlock when resize disk (63f1c984e, Qu Xuan) region: check sku request error (a6d520608, Qu Xuan) region: avoid azure secgroup sync removed (66a490565, Qu Xuan) region: avoid guest delete not with disks (391ca1efb, Qu Xuan) region: ctyun delete secgroup fix (e61bf0ec7, TangBin)  Features (3)  ansible: add rolePublic and timeout options (bad342f78, rainzm) monitor: add storage monitor metric (a729729bd, zhaoxiangchun) region: add server migration predication API (e3b3b7ab1, Zexi Li)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.6.17 since this release.\nBug Fixes (2)  cloudmon timeout fix (d8df42e, zhaoxiangchun) raid plugin: raid status fix (db0c9d2, zhaoxiangchun)  Features (1)  cloudmon: add storage monitor metric config and modify cloudmon config infection func (7812637, zhaoxiangchun)   ocadm Repo: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.17 since this release.\nBug Fixes (1)  k8s,keepalived: 解决 k8s 高可用集群在部署时无法获取 nodeip 的问题 (d0d0421, Zhang Dongliang)  ","excerpt":"Release time: 2021-06-07 09:19:49\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-17/","title":"v3.6.17"},{"body":"发布时间 2021-06-07 09:19:49\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n24 commits to cloudpods - v3.6.17 since this release.\nBug Fixes (20)  secgroup cache policy (43ca3f325, Qu Xuan) hpssacli should skip empty slots (16c2e6bd2, Qiu Jian) get apigateway auth/regions with error of illegal mix of collations (7f0f640e8, Qiu Jian) 修复云账号和宿主机报警问题 (a1a324aec, zhaoxiangchun) windows resize file system (b34c35ead, Qiu Jian) cloudid: avoid location missing api-version (3b5e38f47, Qu Xuan) host: raid status fix (b3932c70b, zhaoxiangchun) host: raid status (12dc56258, zhaoxiangchun) host: avoid delete removed disk failed (406d81e5d, Qu Xuan) host: avoid panic when params is nil (9fcaf499d, Qu Xuan) monitor: fix storage tag (2ae6c7b6c, zhaoxiangchun) region: resuce mode of migrate (06459b3db, Zexi Li) region: lbcert cache clean duplicate data fix (0e86ff6b2, tb365) region: show azure deploy failed error (aa904b972, Qu Xuan) region: migrate use rescue mode (15bca887a, Zexi Li) region: avoid deadlock when resize disk (63f1c984e, Qu Xuan) region: check sku request error (a6d520608, Qu Xuan) region: avoid azure secgroup sync removed (66a490565, Qu Xuan) region: avoid guest delete not with disks (391ca1efb, Qu Xuan) region: ctyun delete secgroup fix (e61bf0ec7, TangBin)  Features (3)  ansible: add rolePublic and timeout options (bad342f78, rainzm) monitor: add storage monitor metric (a729729bd, zhaoxiangchun) region: add server migration predication API (e3b3b7ab1, Zexi Li)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.6.17 since this release.\nBug Fixes (2)  cloudmon timeout fix (d8df42e, zhaoxiangchun) raid plugin: raid status fix (db0c9d2, zhaoxiangchun)  Features (1)  cloudmon: add storage monitor metric config and modify cloudmon config infection func (7812637, zhaoxiangchun)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.17 since this release.\nBug Fixes (1)  k8s,keepalived: 解决 k8s 高可用集群在部署时无法获取 nodeip 的问题 (d0d0421, Zhang Dongliang)  ","excerpt":"发布时间 2021-06-07 09:19:49\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-17/","title":"v3.6.17"},{"body":"Release time: 2021-05-19 10:16:33\n cloudpods Repo: https://github.com/yunionio/cloudpods\n16 commits to cloudpods - v3.6.16 since this release.\nBug Fixes (16)  missing yunionconf log (16f8b30a9, Qiu Jian) baremetal: register baremetal name invalid (bd3c6cff5, Zexi Li) cloudid: clouduser use default domain (7ccdb1a49, Qu Xuan) esxiagent: make the copied disk type as thin (f4ddc6172, rainzm) esxiagent: execute deploy operation by default in AgentDeployGuest (5f168c283, rainzm) glance: make image is_standard updatable (4a7b6f941, Zexi Li) region: optimized server sku sku (c4dc82599, Qu Xuan) region: aws sync disk missing image id fix (86ba641ff, TangBin) region: send webhook notification when delete dbinstance (20148fdff, rainzm) region: allow update sku status (eabcf3f37, Qu Xuan) region: optimized sku sched clear (7725e7947, Qu Xuan) region: aliyun vpc endpoint (6cd1a33e6, Qu Xuan) region: send webhook when the creation task is completely completed (784f517c6, rainzm) region: check whether the disks of the instance snapshot is empty when creating vm (9a28d0944, rainzm) region: wire sql fix (11a2696c8, Qu Xuan) region: continue to sync the snapshots that are being created when syncing auto created snapshot (735e74973, rainzm)   kubecomps Repo: https://github.com/yunionio/kubecomps\n2 commits to kubecomps - v3.6.16 since this release.\nBug Fixes (2)  kubeserver: helm release resource object’s name and id missed (178dfad, Zexi Li) kubeserver: helm release resource list (07fb880, Zexi Li)  ","excerpt":"Release time: 2021-05-19 10:16:33\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-16/","title":"v3.6.16"},{"body":"发布时间 2021-05-19 10:16:33\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n16 commits to cloudpods - v3.6.16 since this release.\nBug Fixes (16)  missing yunionconf log (16f8b30a9, Qiu Jian) baremetal: register baremetal name invalid (bd3c6cff5, Zexi Li) cloudid: clouduser use default domain (7ccdb1a49, Qu Xuan) esxiagent: make the copied disk type as thin (f4ddc6172, rainzm) esxiagent: execute deploy operation by default in AgentDeployGuest (5f168c283, rainzm) glance: make image is_standard updatable (4a7b6f941, Zexi Li) region: optimized server sku sku (c4dc82599, Qu Xuan) region: aws sync disk missing image id fix (86ba641ff, TangBin) region: send webhook notification when delete dbinstance (20148fdff, rainzm) region: allow update sku status (eabcf3f37, Qu Xuan) region: optimized sku sched clear (7725e7947, Qu Xuan) region: aliyun vpc endpoint (6cd1a33e6, Qu Xuan) region: send webhook when the creation task is completely completed (784f517c6, rainzm) region: check whether the disks of the instance snapshot is empty when creating vm (9a28d0944, rainzm) region: wire sql fix (11a2696c8, Qu Xuan) region: continue to sync the snapshots that are being created when syncing auto created snapshot (735e74973, rainzm)   kubecomps 仓库地址: https://github.com/yunionio/kubecomps\n2 commits to kubecomps - v3.6.16 since this release.\nBug Fixes (2)  kubeserver: helm release resource object’s name and id missed (178dfad, Zexi Li) kubeserver: helm release resource list (07fb880, Zexi Li)  ","excerpt":"发布时间 2021-05-19 10:16:33\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-16/","title":"v3.6.16"},{"body":"Release time: 2021-05-08 11:06:00\n ocadm Repo: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.15 since this release.\nBug Fixes (1)  keepalived: 解决 高可用架构部署的默认网卡传递参数问题 (a0ce5d6, Zhang Dongliang)  ","excerpt":"Release time: 2021-05-08 11:06:00\n ocadm Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-15/","title":"v3.6.15"},{"body":"发布时间 2021-05-08 11:06:00\n ocadm 仓库地址: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.15 since this release.\nBug Fixes (1)  keepalived: 解决 高可用架构部署的默认网卡传递参数问题 (a0ce5d6, Zhang Dongliang)  ","excerpt":"发布时间 2021-05-08 11:06:00\n ocadm 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-15/","title":"v3.6.15"},{"body":"Release time: 2021-05-06 15:31:56\n cloudpods Repo: https://github.com/yunionio/cloudpods\n35 commits to cloudpods - v3.6.14 since this release.\nAnsibleserver (1)  wait zombie subprocesses (42ec59e81, Yousong Zhou)  Bug Fixes (30)  require password for imported user (c3d0b0fe1, Qiu Jian) avoid host worker is locked when image cache is deleted (adff20026, Qu Xuan) add options for pre allow ip add (170b37374, Qu Xuan) avoid panic (d43e645ed, Qu Xuan) add region id params (951e9218c, Qu Xuan) add rbdcli commond for debug (2ca8d0f7e, Qu Xuan) baremetal: baremetal ipmi probe reset link up state (906a591f0, Qiu Jian) baremetal,esxiagent: no cloudroot user initialized (da585a7b3, Qiu Jian) common: add debug info for lock (91141d643, Qu Xuan) esxi: prevent fake template and real template from duplication (ed676427d, rainzm) keystone: tag list for keystone service (8504d364f, Qu Xuan) region: account arrears (9dfb23c28, Qu Xuan) region: avoid panic when sync resources (7c90d219b, Qu Xuan) region: Refuse to recommend the corresponding network for the ip that crosses the limit (b595f59ef, rainzm) region: add egress_mbps params for lb (df79388de, Qu Xuan) region: add all.servers.any_pool/all.hosts.any_pool metrics (da0a7c7b6, Qiu Jian) region: make cloudprovider sync worker configurable (46517ebd1, rainzm) region: allow owner to operate snapshotpolicy cache (b95b553b9, rainzm) region: avoid using LocalTaskworker in time-consuming synchronization of cloudaccount (c0ba43e5f, rainzm) region: optimized vm account name code (824fc247a, Qu Xuan) region: avoid panic when sync aliyun networks (e1c1c0b84, Qu Xuan) region: fetch cached image from glance by default (3adae60e2, Zexi Li) region: vm list order by disk size (09f44d79a, Qu Xuan) region: avoid assign vm ip addr not effect (e82392107, Qu Xuan) region: make SScheduledTaskLabel implement IJointModelManager (75a007ea1, rainzm) region: qcloud redis sync fix (9464fbe6b, tangbin) region: use special localtask to run time-consuming provider synchronization task (aa539bff9, rainzm) region: tag list key case insensitive (1dc421a6d, Qu Xuan) region: download cached image from source host before migrating (243953ba6, Zexi Li) region: avoid network create failed when vpc is ok but wire not sync (cfef1fe2a, Qu Xuan)  Features (4)  arm64,build: arm 编译时,不编译 rbdcli (aebe35a85, Zhang Dongliang) region: support to specify zone for the created wire (f3ae127f2, rainzm) region: support creating a network with a native vmware network name (07292089f, rainzm) region: increase the log for debugging when syncing cloudimage (e13885e22, rainzm)   kubecomps Repo: https://github.com/yunionio/kubecomps\n1 commits to kubecomps - v3.6.14 since this release.\nBug Fixes (1)  kubeserver: cluster ca and key field nullable deleted (db982b7, Zexi Li)   ocadm Repo: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.14 since this release.\nFeatures (1)  keepalived,ha: 新增 keepalived_interface 变量支持,以便在安装高可用多网卡情况下支持非默认网卡绑定 vip (2027909, Zhang Dongliang)  ","excerpt":"Release time: 2021-05-06 15:31:56\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-14/","title":"v3.6.14"},{"body":"发布时间 2021-05-06 15:31:56\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n35 commits to cloudpods - v3.6.14 since this release.\nAnsibleserver (1)  wait zombie subprocesses (42ec59e81, Yousong Zhou)  Bug Fixes (30)  require password for imported user (c3d0b0fe1, Qiu Jian) avoid host worker is locked when image cache is deleted (adff20026, Qu Xuan) add options for pre allow ip add (170b37374, Qu Xuan) avoid panic (d43e645ed, Qu Xuan) add region id params (951e9218c, Qu Xuan) add rbdcli commond for debug (2ca8d0f7e, Qu Xuan) baremetal: baremetal ipmi probe reset link up state (906a591f0, Qiu Jian) baremetal,esxiagent: no cloudroot user initialized (da585a7b3, Qiu Jian) common: add debug info for lock (91141d643, Qu Xuan) esxi: prevent fake template and real template from duplication (ed676427d, rainzm) keystone: tag list for keystone service (8504d364f, Qu Xuan) region: account arrears (9dfb23c28, Qu Xuan) region: avoid panic when sync resources (7c90d219b, Qu Xuan) region: Refuse to recommend the corresponding network for the ip that crosses the limit (b595f59ef, rainzm) region: add egress_mbps params for lb (df79388de, Qu Xuan) region: add all.servers.any_pool/all.hosts.any_pool metrics (da0a7c7b6, Qiu Jian) region: make cloudprovider sync worker configurable (46517ebd1, rainzm) region: allow owner to operate snapshotpolicy cache (b95b553b9, rainzm) region: avoid using LocalTaskworker in time-consuming synchronization of cloudaccount (c0ba43e5f, rainzm) region: optimized vm account name code (824fc247a, Qu Xuan) region: avoid panic when sync aliyun networks (e1c1c0b84, Qu Xuan) region: fetch cached image from glance by default (3adae60e2, Zexi Li) region: vm list order by disk size (09f44d79a, Qu Xuan) region: avoid assign vm ip addr not effect (e82392107, Qu Xuan) region: make SScheduledTaskLabel implement IJointModelManager (75a007ea1, rainzm) region: qcloud redis sync fix (9464fbe6b, tangbin) region: use special localtask to run time-consuming provider synchronization task (aa539bff9, rainzm) region: tag list key case insensitive (1dc421a6d, Qu Xuan) region: download cached image from source host before migrating (243953ba6, Zexi Li) region: avoid network create failed when vpc is ok but wire not sync (cfef1fe2a, Qu Xuan)  Features (4)  arm64,build: arm 编译时,不编译 rbdcli (aebe35a85, Zhang Dongliang) region: support to specify zone for the created wire (f3ae127f2, rainzm) region: support creating a network with a native vmware network name (07292089f, rainzm) region: increase the log for debugging when syncing cloudimage (e13885e22, rainzm)   kubecomps 仓库地址: https://github.com/yunionio/kubecomps\n1 commits to kubecomps - v3.6.14 since this release.\nBug Fixes (1)  kubeserver: cluster ca and key field nullable deleted (db982b7, Zexi Li)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.14 since this release.\nFeatures (1)  keepalived,ha: 新增 keepalived_interface 变量支持,以便在安装高可用多网卡情况下支持非默认网卡绑定 vip (2027909, Zhang Dongliang)  ","excerpt":"发布时间 2021-05-06 15:31:56\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-14/","title":"v3.6.14"},{"body":"Release time: 2021-04-16 12:00:57\n cloudpods Repo: https://github.com/yunionio/cloudpods\n24 commits to cloudpods - v3.6.13 since this release.\nBug Fixes (21)  private cloud sku attached disk count (38d23b073, Qu Xuan) aliyun lb charge type (59e153422, Qu Xuan) actions domain filter by project doamin id (85f6e95c1, Qu Xuan) baremetal: use command timeout context replace timeout command (b55c2f7d2, Zexi Li) baremetal-agent: baremetal will probe status in status unknown (8a71e73af, Qiu Jian) cloudcommon: unify OS_ARCH constants (85f85e394, Zexi Li) cloudcommon: use rbac authentication dedicated to the list interface in GetModelProperty (2bf31dbd3, rainzm) esxi: correctly set the imagePath outside the if block (5fdde01be, rainzm) host: detect ovs version (ab0c6f128, Zexi Li) host: update host metric tags when server or host changeowner (95a03ad58, zhaoxiangchun) host-deployer: mkfs.ext4 add ‘-T largefile’ option (35d8cba97, Zexi Li) keystone: role_assignment effective list ignore groups without user (2ee1af186, Qiu Jian) readme: rename OneCloud to YunionCloud (b4f5f1a99, Zexi Li) region: purge instancesnapshot when purging guest (a14ab9820, rainzm) region: avoid refreshing when checking the image (be065e872, rainzm) region: allow ipmi probe in status unknown (4c27add0b, Qiu Jian) region: guest sync eip fix (d238540dc, tangbin) region: guest associate eip checking fix (fdd0bf77e, tangbin) region: sync baremetal desc before do ipmi probing (bd69dc44d, Qiu Jian) region: decouple region and etcd service (aa7c5f1b1, Zexi Li) region: remove i18n lock and logs (14e537fc6, Qiu Jian)  Features (2)  fetcherfs: make rpm and deb package (adaa7fa2c, Zexi Li) region: allow to update account with provider vmware (62a4bce19, rainzm)  Vpcagent (1)  ovn: fix port match condition formation (94d2bc456, Yousong Zhou)   kubecomps Repo: https://github.com/yunionio/kubecomps\n1 commits to kubecomps - v3.6.13 since this release.\nBug Fixes (1)  kubeserver: import cluster input data unmarshal error (d033e53, Zexi Li)  ","excerpt":"Release time: 2021-04-16 12:00:57\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-13/","title":"v3.6.13"},{"body":"发布时间 2021-04-16 12:00:57\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n24 commits to cloudpods - v3.6.13 since this release.\nBug Fixes (21)  private cloud sku attached disk count (38d23b073, Qu Xuan) aliyun lb charge type (59e153422, Qu Xuan) actions domain filter by project doamin id (85f6e95c1, Qu Xuan) baremetal: use command timeout context replace timeout command (b55c2f7d2, Zexi Li) baremetal-agent: baremetal will probe status in status unknown (8a71e73af, Qiu Jian) cloudcommon: unify OS_ARCH constants (85f85e394, Zexi Li) cloudcommon: use rbac authentication dedicated to the list interface in GetModelProperty (2bf31dbd3, rainzm) esxi: correctly set the imagePath outside the if block (5fdde01be, rainzm) host: detect ovs version (ab0c6f128, Zexi Li) host: update host metric tags when server or host changeowner (95a03ad58, zhaoxiangchun) host-deployer: mkfs.ext4 add ‘-T largefile’ option (35d8cba97, Zexi Li) keystone: role_assignment effective list ignore groups without user (2ee1af186, Qiu Jian) readme: rename OneCloud to YunionCloud (b4f5f1a99, Zexi Li) region: purge instancesnapshot when purging guest (a14ab9820, rainzm) region: avoid refreshing when checking the image (be065e872, rainzm) region: allow ipmi probe in status unknown (4c27add0b, Qiu Jian) region: guest sync eip fix (d238540dc, tangbin) region: guest associate eip checking fix (fdd0bf77e, tangbin) region: sync baremetal desc before do ipmi probing (bd69dc44d, Qiu Jian) region: decouple region and etcd service (aa7c5f1b1, Zexi Li) region: remove i18n lock and logs (14e537fc6, Qiu Jian)  Features (2)  fetcherfs: make rpm and deb package (adaa7fa2c, Zexi Li) region: allow to update account with provider vmware (62a4bce19, rainzm)  Vpcagent (1)  ovn: fix port match condition formation (94d2bc456, Yousong Zhou)   kubecomps 仓库地址: https://github.com/yunionio/kubecomps\n1 commits to kubecomps - v3.6.13 since this release.\nBug Fixes (1)  kubeserver: import cluster input data unmarshal error (d033e53, Zexi Li)  ","excerpt":"发布时间 2021-04-16 12:00:57\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-13/","title":"v3.6.13"},{"body":"Release time: 2021-04-06 08:18:55\n cloudpods Repo: https://github.com/yunionio/cloudpods\n11 commits to cloudpods - v3.6.12 since this release.\nBug Fixes (9)  adjust primary key length when sqlchemy utf8 default to utf8mb4 (d090d76f9, Qiu Jian) new aws region (d6a0764b2, Qu Xuan) time sync duration (e841a4214, Qu Xuan) baremetal: sas2iru parse line (aa9ad9fe0, Zexi Li) esxi: determine whether the disk is a root disk more reasonably (4cf674992, rainzm) esxi: add ListPath for storage and use it to check iso (aede49450, rainzm) hostman: recycle local disk file when rebuilding root (1333d39c6, Qiu Jian) region: add usage cache, speedup response (d7ff1314e, Qiu Jian) region: allow ipmi probe when probe fail (615cb1e33, Qiu Jian)  Features (1)  esxi: change parameters for NewDiskDev and avoid unnecessary deploy (5565bb306, rainzm)  Others (1)  response scope-specific metrics (dcb8898c0, Qiu Jian)  ","excerpt":"Release time: 2021-04-06 08:18:55\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-12/","title":"v3.6.12"},{"body":"发布时间 2021-04-06 08:18:55\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n11 commits to cloudpods - v3.6.12 since this release.\nBug Fixes (9)  adjust primary key length when sqlchemy utf8 default to utf8mb4 (d090d76f9, Qiu Jian) new aws region (d6a0764b2, Qu Xuan) time sync duration (e841a4214, Qu Xuan) baremetal: sas2iru parse line (aa9ad9fe0, Zexi Li) esxi: determine whether the disk is a root disk more reasonably (4cf674992, rainzm) esxi: add ListPath for storage and use it to check iso (aede49450, rainzm) hostman: recycle local disk file when rebuilding root (1333d39c6, Qiu Jian) region: add usage cache, speedup response (d7ff1314e, Qiu Jian) region: allow ipmi probe when probe fail (615cb1e33, Qiu Jian)  Features (1)  esxi: change parameters for NewDiskDev and avoid unnecessary deploy (5565bb306, rainzm)  Others (1)  response scope-specific metrics (dcb8898c0, Qiu Jian)  ","excerpt":"发布时间 2021-04-06 08:18:55\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-12/","title":"v3.6.12"},{"body":"Release time: 2021-04-02 12:52:44\n cloudpods Repo: https://github.com/yunionio/cloudpods\n22 commits to cloudpods - v3.6.11 since this release.\nBug Fixes (17)  vendor update (73cda1d90, Qu Xuan) avoid listener worker leak (0c904591c, Qu Xuan) sku zone (2f7ee9fc7, Qu Xuan) cloudaccount auto sync (1c1fab0ef, Qu Xuan) account auto sync time (71171ed0d, Qu Xuan) remove qcloud region and zone prefix (0ee42cffe, Qu Xuan) baremetal: megactl driver fail to find device by key (be71185b1, Qiu Jian) build: build telegraf-raid-plugin (14bd5def5, Zexi Li) esxi: be compatible with disconnected host (5e8549b30, rainzm) host: arm vm virtio-net-pci without addr (4c83b1af4, Zexi Li) host: modification of netio collection field of local virtual machine (288927928, zhaoxiangchun) image: update min_disk of iso image (65748b374, Qiu Jian) monitor: filter alertquery result according to onecloud resources (2df45f0a3, zhaoxiangchun) monitor: modify onecloud replacement code (04f4d036c, zhaoxiangchun) monitor: alertQuery fix (d7380f3ec, zhaoxiangchun) region: add more usage metrics, e.g. ports.eip, servers.last_week, pending_delete_servers.last_week (5261b52b8, Qiu Jian) region: show storage capacity to project users (45d219ac5, Qiu Jian)  Features (2)  region: disks and eip delete with server (44ed68493, Qu Xuan) region: add server delete options (1b1cccab9, Qu Xuan)  Others (2)  fix(monitor):修复监控总览图标钻取后返回数据异常的问题 (88d1f93e3, zhaoxiangchun) (fix) region: qcloud elb https listener create fix (08b74642f, tangbin)  Vpcagent (1)  ovn: fix qos for eip upload (5b2195858, Yousong Zhou)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.6.11 since this release.\nBug Fixes (1)  access_url of common service config (49c0768, Zexi Li)   kubecomps Repo: https://github.com/yunionio/kubecomps\n1 commits to kubecomps - v3.6.11 since this release.\nBug Fixes (1)  kubeserver: make system cluster resource getable (be80724, Zexi Li)   ocadm Repo: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.11 since this release.\nBug Fixes (1)  set operator imagePullPolicy IfNotPresent (7258d95, Zexi Li)  ","excerpt":"Release time: 2021-04-02 12:52:44\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-11/","title":"v3.6.11"},{"body":"发布时间 2021-04-02 12:52:44\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n22 commits to cloudpods - v3.6.11 since this release.\nBug Fixes (17)  vendor update (73cda1d90, Qu Xuan) avoid listener worker leak (0c904591c, Qu Xuan) sku zone (2f7ee9fc7, Qu Xuan) cloudaccount auto sync (1c1fab0ef, Qu Xuan) account auto sync time (71171ed0d, Qu Xuan) remove qcloud region and zone prefix (0ee42cffe, Qu Xuan) baremetal: megactl driver fail to find device by key (be71185b1, Qiu Jian) build: build telegraf-raid-plugin (14bd5def5, Zexi Li) esxi: be compatible with disconnected host (5e8549b30, rainzm) host: arm vm virtio-net-pci without addr (4c83b1af4, Zexi Li) host: modification of netio collection field of local virtual machine (288927928, zhaoxiangchun) image: update min_disk of iso image (65748b374, Qiu Jian) monitor: filter alertquery result according to onecloud resources (2df45f0a3, zhaoxiangchun) monitor: modify onecloud replacement code (04f4d036c, zhaoxiangchun) monitor: alertQuery fix (d7380f3ec, zhaoxiangchun) region: add more usage metrics, e.g. ports.eip, servers.last_week, pending_delete_servers.last_week (5261b52b8, Qiu Jian) region: show storage capacity to project users (45d219ac5, Qiu Jian)  Features (2)  region: disks and eip delete with server (44ed68493, Qu Xuan) region: add server delete options (1b1cccab9, Qu Xuan)  Others (2)  fix(monitor):修复监控总览图标钻取后返回数据异常的问题 (88d1f93e3, zhaoxiangchun) (fix) region: qcloud elb https listener create fix (08b74642f, tangbin)  Vpcagent (1)  ovn: fix qos for eip upload (5b2195858, Yousong Zhou)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.6.11 since this release.\nBug Fixes (1)  access_url of common service config (49c0768, Zexi Li)   kubecomps 仓库地址: https://github.com/yunionio/kubecomps\n1 commits to kubecomps - v3.6.11 since this release.\nBug Fixes (1)  kubeserver: make system cluster resource getable (be80724, Zexi Li)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.11 since this release.\nBug Fixes (1)  set operator imagePullPolicy IfNotPresent (7258d95, Zexi Li)  ","excerpt":"发布时间 2021-04-02 12:52:44\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-11/","title":"v3.6.11"},{"body":"Release time: 2021-03-23 14:17:23\n cloudpods Repo: https://github.com/yunionio/cloudpods\n43 commits to cloudpods - v3.6.10 since this release.\nBug Fixes (29)  sync cloud tags when set tags (9d1c0dbd9, Qu Xuan) optimized bucket tag (5910ac16c, Qu Xuan) add index for image_type (c5c00f38b, Qu Xuan) change rds config skip zone check (0285e7735, Qu Xuan) avoid panic when use idc vpc (be2e979c9, Qu Xuan) skip zone check when rds change config (32623f7c7, Qu Xuan) sync new project for azure resource group (d7a738843, Qu Xuan) tag sync (0b2945131, Qu Xuan) avoid stop or start vm failed (a7b3b1cf4, Qu Xuan) qcloud bucket refer (cdd209b59, Qu Xuan) build: build arm64 image (4032ae669, Zexi Li) build: DOCKER_CLI_EXPERIMENTAL=enabled (2d53b542d, Zexi Li) host: ignore parted resize disk unknown partition table error (546f2fcfa, Zexi Li) hostdeployer: windows rootfs umount leak (cc1b6a2d6, Zexi Li) keystone: update default role associated policy name (845d9a1dc, Qiu Jian) keystone: allow joint projects across domains by default (7de3adac3, Qiu Jian) keystone: adjust default system policy names (141196103, Qiu Jian) log: add filters to baremetal event logs (b9e0c22b2, Qiu Jian) monitor: fix monitor export err (b46f95ae7, zhaoxiangchun) notify: enable filter of contact type ‘email’ and ‘mobile’ (a2faac769, rainzm) region: Compatible with messages that have no recipient and contact information (10f0e0c8b, rainzm) region: cloud provider filter by domain_id ignore private case (0f9f2f6ee, Qiu Jian) region: network eip stats not correct (d44327998, Qiu Jian) region: fail to update network gateway (112e7aac8, Qiu Jian) region: cloud provider filter by domain (22486c31b, Qiu Jian) region: check whether guest is nil (024c14d96, rainzm) region: including domain info in project-role results (538097ef7, Qiu Jian) region: scoped policy filter by project id (6afe83e47, Qiu Jian) telegraf: megactl raid add rebuild status (9da39105f, zhaoxiangchun)  Etcd (1)  fix “fatal error: concurrent map writes” (bc50f0948, Yousong Zhou)  Features (6)  build: make multi arch manifest docker image (55431b87b, Zexi Li) esxi: update guest os info (bfb01f563, rainzm) host: adjust qemu args to support aarch64 (ab00f0140, Zexi Li) region: send webhook message when changing ipaddr (33cb189cb, rainzm) region: filter schedtags from cloudprovider_id (9d3c44fe9, rainzm) region: increase the network number and host number limit when recommending the network (4f462d614, rainzm)  Others (5)  fix(region) qcloud multi zone instance sync account fix (5145f1250, tangbin) feat(region) qcloud redis support multi zones (acd7765b3, tangbin) host 编译跨平台兼容 (ec3909af5, Zhang Dongliang) copyright update brand_cn\u0026brand_en fix (31fce9fb7, tangbin) infos copyright add brand_en\u0026brand_cn (695139c04, tangbin)  Region (2)  fix setting nic index (b4a4cd61d, Yousong Zhou) attachnetwork: allow attach by network name (02022c4c2, Yousong Zhou)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n5 commits to cloudpods-operator - v3.6.10 since this release.\nBug Fixes (4)  update vendor (334e0bc, Qiu Jian) default policy name should be separated by dash (9e50165, Qiu Jian) monitor: raid卡监控规则status过滤参数调整 (69eac28, zhaoxiangchun) ovn: change ovn image to support arm (7d29d32, Zexi Li)  Features (1)  build: support multi arch docker image (76aab36, Zexi Li)   cloudpods-service-operator Repo: https://github.com/yunionio/cloudpods-service-operator\n1 commits to cloudpods-service-operator - v3.6.10 since this release.\nFeatures (1)  build: support arm64 build (3f41fdf, Zexi Li)   kubecomps Repo: https://github.com/yunionio/kubecomps\n1 commits to kubecomps - v3.6.10 since this release.\nFeatures (1)  build: support arm64 build (e095428, Zexi Li)   notify-plugins Repo: https://github.com/yunionio/notify-plugins\n1 commits to notify-plugins - v3.6.10 since this release.\nBug Fixes (1)  build: build arm64 image (3a1f881, Zexi Li)   ocadm Repo: https://github.com/yunionio/ocadm\n3 commits to ocadm - v3.6.10 since this release.\nBug Fixes (2)  cluster: set OS_PROJECT_DOMAIN of cluster auth info (37c8b46, Zexi Li) preflight: more accurate of mysql grant error (2f006f3, Zexi Li)  Features (1)  build: 增加arm 下编译 ocadm deb 的步骤(make deb)； 统一跨平台metrics-server 的 tag 名称；升级 k8s-sidecar 到 0.1.275 (ddf0777, Zhang Dongliang)   sdnagent Repo: https://github.com/yunionio/sdnagent\n4 commits to sdnagent - v3.6.10 since this release.\nBuild (2)  note on deploying ovs, ovn components (ba1147a, Yousong Zhou) reword README.md for deploying eipgw (fb516c4, Yousong Zhou)  Features (1)  build: make multi arch manifest docker image (fb7799d, Zexi Li)  Ovn (1)  mapped: fix possible traffic loop across different vpcs (2a45ce1, Yousong Zhou)  ","excerpt":"Release time: 2021-03-23 14:17:23\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-10/","title":"v3.6.10"},{"body":"发布时间 2021-03-23 14:17:23\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n43 commits to cloudpods - v3.6.10 since this release.\nBug Fixes (29)  sync cloud tags when set tags (9d1c0dbd9, Qu Xuan) optimized bucket tag (5910ac16c, Qu Xuan) add index for image_type (c5c00f38b, Qu Xuan) change rds config skip zone check (0285e7735, Qu Xuan) avoid panic when use idc vpc (be2e979c9, Qu Xuan) skip zone check when rds change config (32623f7c7, Qu Xuan) sync new project for azure resource group (d7a738843, Qu Xuan) tag sync (0b2945131, Qu Xuan) avoid stop or start vm failed (a7b3b1cf4, Qu Xuan) qcloud bucket refer (cdd209b59, Qu Xuan) build: build arm64 image (4032ae669, Zexi Li) build: DOCKER_CLI_EXPERIMENTAL=enabled (2d53b542d, Zexi Li) host: ignore parted resize disk unknown partition table error (546f2fcfa, Zexi Li) hostdeployer: windows rootfs umount leak (cc1b6a2d6, Zexi Li) keystone: update default role associated policy name (845d9a1dc, Qiu Jian) keystone: allow joint projects across domains by default (7de3adac3, Qiu Jian) keystone: adjust default system policy names (141196103, Qiu Jian) log: add filters to baremetal event logs (b9e0c22b2, Qiu Jian) monitor: fix monitor export err (b46f95ae7, zhaoxiangchun) notify: enable filter of contact type ‘email’ and ‘mobile’ (a2faac769, rainzm) region: Compatible with messages that have no recipient and contact information (10f0e0c8b, rainzm) region: cloud provider filter by domain_id ignore private case (0f9f2f6ee, Qiu Jian) region: network eip stats not correct (d44327998, Qiu Jian) region: fail to update network gateway (112e7aac8, Qiu Jian) region: cloud provider filter by domain (22486c31b, Qiu Jian) region: check whether guest is nil (024c14d96, rainzm) region: including domain info in project-role results (538097ef7, Qiu Jian) region: scoped policy filter by project id (6afe83e47, Qiu Jian) telegraf: megactl raid add rebuild status (9da39105f, zhaoxiangchun)  Etcd (1)  fix “fatal error: concurrent map writes” (bc50f0948, Yousong Zhou)  Features (6)  build: make multi arch manifest docker image (55431b87b, Zexi Li) esxi: update guest os info (bfb01f563, rainzm) host: adjust qemu args to support aarch64 (ab00f0140, Zexi Li) region: send webhook message when changing ipaddr (33cb189cb, rainzm) region: filter schedtags from cloudprovider_id (9d3c44fe9, rainzm) region: increase the network number and host number limit when recommending the network (4f462d614, rainzm)  Others (5)  fix(region) qcloud multi zone instance sync account fix (5145f1250, tangbin) feat(region) qcloud redis support multi zones (acd7765b3, tangbin) host 编译跨平台兼容 (ec3909af5, Zhang Dongliang) copyright update brand_cn\u0026brand_en fix (31fce9fb7, tangbin) infos copyright add brand_en\u0026brand_cn (695139c04, tangbin)  Region (2)  fix setting nic index (b4a4cd61d, Yousong Zhou) attachnetwork: allow attach by network name (02022c4c2, Yousong Zhou)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n5 commits to cloudpods-operator - v3.6.10 since this release.\nBug Fixes (4)  update vendor (334e0bc, Qiu Jian) default policy name should be separated by dash (9e50165, Qiu Jian) monitor: raid卡监控规则status过滤参数调整 (69eac28, zhaoxiangchun) ovn: change ovn image to support arm (7d29d32, Zexi Li)  Features (1)  build: support multi arch docker image (76aab36, Zexi Li)   cloudpods-service-operator 仓库地址: https://github.com/yunionio/cloudpods-service-operator\n1 commits to cloudpods-service-operator - v3.6.10 since this release.\nFeatures (1)  build: support arm64 build (3f41fdf, Zexi Li)   kubecomps 仓库地址: https://github.com/yunionio/kubecomps\n1 commits to kubecomps - v3.6.10 since this release.\nFeatures (1)  build: support arm64 build (e095428, Zexi Li)   notify-plugins 仓库地址: https://github.com/yunionio/notify-plugins\n1 commits to notify-plugins - v3.6.10 since this release.\nBug Fixes (1)  build: build arm64 image (3a1f881, Zexi Li)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n3 commits to ocadm - v3.6.10 since this release.\nBug Fixes (2)  cluster: set OS_PROJECT_DOMAIN of cluster auth info (37c8b46, Zexi Li) preflight: more accurate of mysql grant error (2f006f3, Zexi Li)  Features (1)  build: 增加arm 下编译 ocadm deb 的步骤(make deb)； 统一跨平台metrics-server 的 tag 名称；升级 k8s-sidecar 到 0.1.275 (ddf0777, Zhang Dongliang)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n4 commits to sdnagent - v3.6.10 since this release.\nBuild (2)  note on deploying ovs, ovn components (ba1147a, Yousong Zhou) reword README.md for deploying eipgw (fb516c4, Yousong Zhou)  Features (1)  build: make multi arch manifest docker image (fb7799d, Zexi Li)  Ovn (1)  mapped: fix possible traffic loop across different vpcs (2a45ce1, Yousong Zhou)  ","excerpt":"发布时间 2021-03-23 14:17:23\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-10/","title":"v3.6.10"},{"body":"Release time: 2021-02-25 12:59:00\n cloudpods Repo: https://github.com/yunionio/cloudpods\n9 commits to cloudpods - v3.4.16 since this release.\nBug Fixes (9)  apigateway: add enable_quota_check and return-domain-list attributes to fe params (833a8058d, Qiu Jian) cloudevent: optimized cloudevent sql (7453b5a4a, Qu Xuan) host-deployer: remove escape character on windows passwd (97167be07, wanyaoqi) region: avoid not sync dns zone (105157dd2, Qu Xuan) region: secgroup clone set status (e5e9d5465, Qu Xuan) region: add option auto reconcile backup servers (709daa66d, wanyaoqi) region: delete virtual nics with network (2cbb4f978, Qu Xuan) region: add azure new region (7815cb0a0, Qu Xuan) region: secgroup priority fix (0722788a5, Qu Xuan)  ","excerpt":"Release time: 2021-02-25 12:59:00\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-16/","title":"v3.4.16"},{"body":"发布时间 2021-02-25 12:59:00\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n9 commits to cloudpods - v3.4.16 since this release.\nBug Fixes (9)  apigateway: add enable_quota_check and return-domain-list attributes to fe params (833a8058d, Qiu Jian) cloudevent: optimized cloudevent sql (7453b5a4a, Qu Xuan) host-deployer: remove escape character on windows passwd (97167be07, wanyaoqi) region: avoid not sync dns zone (105157dd2, Qu Xuan) region: secgroup clone set status (e5e9d5465, Qu Xuan) region: add option auto reconcile backup servers (709daa66d, wanyaoqi) region: delete virtual nics with network (2cbb4f978, Qu Xuan) region: add azure new region (7815cb0a0, Qu Xuan) region: secgroup priority fix (0722788a5, Qu Xuan)  ","excerpt":"发布时间 2021-02-25 12:59:00\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-16/","title":"v3.4.16"},{"body":"Release time: 2021-01-27 16:24:13\n cloudpods Repo: https://github.com/yunionio/cloudpods\n9 commits to cloudpods - v3.4.15 since this release.\nBug Fixes (8)  cloudcommon: missing set_meta opslog (#9918) (ce630362f, Jian Qiu) host: fix wait time after mount fuse fs (44a135bba, wanyaoqi) keystone: user create without password can login with any password (ec9631f99, Qiu Jian) notify: add a time limit for resending notifications (ecb169d9f, rainzm) region: avoid clean all rules when sync secgroups (60dad1582, Qu Xuan) region: cloudaccount: allow only one sync func in flight (571d2d297, Yousong Zhou) region: aws elb backendgroup sync bugfix (7b47c9bb8, tangbin) region: optimized secgroup rule sync (08d969baf, Qu Xuan)  Others (1)  loadbalancer add lb purge validate (f05a913cb, tangbin)   notify-plugins Repo: https://github.com/yunionio/notify-plugins\n1 commits to notify-plugins - v3.4.15 since this release.\nFeatures (1)  robot: support mutli WebhookPrefix (e3ce515, rainzm)  ","excerpt":"Release time: 2021-01-27 16:24:13\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-15/","title":"v3.4.15"},{"body":"发布时间 2021-01-27 16:24:13\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n9 commits to cloudpods - v3.4.15 since this release.\nBug Fixes (8)  cloudcommon: missing set_meta opslog (#9918) (ce630362f, Jian Qiu) host: fix wait time after mount fuse fs (44a135bba, wanyaoqi) keystone: user create without password can login with any password (ec9631f99, Qiu Jian) notify: add a time limit for resending notifications (ecb169d9f, rainzm) region: avoid clean all rules when sync secgroups (60dad1582, Qu Xuan) region: cloudaccount: allow only one sync func in flight (571d2d297, Yousong Zhou) region: aws elb backendgroup sync bugfix (7b47c9bb8, tangbin) region: optimized secgroup rule sync (08d969baf, Qu Xuan)  Others (1)  loadbalancer add lb purge validate (f05a913cb, tangbin)   notify-plugins 仓库地址: https://github.com/yunionio/notify-plugins\n1 commits to notify-plugins - v3.4.15 since this release.\nFeatures (1)  robot: support mutli WebhookPrefix (e3ce515, rainzm)  ","excerpt":"发布时间 2021-01-27 16:24:13\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-15/","title":"v3.4.15"},{"body":"Release time: 2021-01-15 10:42:54\n cloudpods Repo: https://github.com/yunionio/cloudpods\n1 commits to cloudpods - v3.4.14 since this release.\nBug Fixes (1)  region: AWS buckets in us-east-1 have null location (0b7a4f08e, Qiu Jian)  ","excerpt":"Release time: 2021-01-15 10:42:54\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-14/","title":"v3.4.14"},{"body":"发布时间 2021-01-15 10:42:54\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n1 commits to cloudpods - v3.4.14 since this release.\nBug Fixes (1)  region: AWS buckets in us-east-1 have null location (0b7a4f08e, Qiu Jian)  ","excerpt":"发布时间 2021-01-15 10:42:54\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-14/","title":"v3.4.14"},{"body":"Release time: 2021-01-13 17:02:33\n cloudpods Repo: https://github.com/yunionio/cloudpods\n10 commits to cloudpods - v3.4.13 since this release.\nBug Fixes (7)  climc: host add netif add params bridge/interface (c5dd4389d, wanyaoqi) esxiagent: nicIndex should be incremented (a4dcc91d0, rainzm) host-deployer: add log line on blkid failed (a66c1aa1b, wanyaoqi) notify: inject domain info in ReceiverManager.FetchOwnerId (9b993f1a9, rainzm) region: server start check host memory is enough (18a751548, wanyaoqi) region: omit vpc quota check if vpc created by owner (d3ad4967a, Qiu Jian) region,host: sync status check block jobs (edba3c3df, wanyaoqi)  Features (2)  db: progressive inspection when determining the required scope (0e4ea782e, rainzm) region: stop guest before freeze (b3285aebc, wanyaoqi)  Guest_deploy_task (1)  log other deploy details with i18n (559d30afa, Yousong Zhou)  ","excerpt":"Release time: 2021-01-13 17:02:33\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-13/","title":"v3.4.13"},{"body":"发布时间 2021-01-13 17:02:33\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n10 commits to cloudpods - v3.4.13 since this release.\nBug Fixes (7)  climc: host add netif add params bridge/interface (c5dd4389d, wanyaoqi) esxiagent: nicIndex should be incremented (a4dcc91d0, rainzm) host-deployer: add log line on blkid failed (a66c1aa1b, wanyaoqi) notify: inject domain info in ReceiverManager.FetchOwnerId (9b993f1a9, rainzm) region: server start check host memory is enough (18a751548, wanyaoqi) region: omit vpc quota check if vpc created by owner (d3ad4967a, Qiu Jian) region,host: sync status check block jobs (edba3c3df, wanyaoqi)  Features (2)  db: progressive inspection when determining the required scope (0e4ea782e, rainzm) region: stop guest before freeze (b3285aebc, wanyaoqi)  Guest_deploy_task (1)  log other deploy details with i18n (559d30afa, Yousong Zhou)  ","excerpt":"发布时间 2021-01-13 17:02:33\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-13/","title":"v3.4.13"},{"body":"Release time: 2020-12-29 03:01:23\n cloudpods Repo: https://github.com/yunionio/cloudpods\n34 commits to cloudpods - v3.4.12 since this release.\nBug Fixes (23)  baremetal: clear jbod disks do PDMakeGood (ec5995da4, Zexi Li) cloudevent,devtool: missing metadata table (df7d68e40, Qiu Jian) host: telegraf listen on local ipv4 address explicitly (c3fd4937d, Qiu Jian) host: add print migrate progress info (cf8b54839, wanyaoqi) keystone: always upload\u0026refresh service config whenever service restart (9561c0c8d, Qiu Jian) mcclient: options: webconsole: fix passing ssh port (2add6fc1f, Yousong Zhou) monitor: other servier create alert add used_by param as a agreement (b01a477cb, –global) region: do not change disk status on migrating (a898d7609, wanyaoqi) region: eip_allocate_task: set eip status allocate_fail on task failure (5b0247a35, Yousong Zhou) region: add huawei gpssd desc (1ec3d6ddf, Qu Xuan) region: fix openstack instance os type (db60e37c4, Qu Xuan) region: lbbackend: better error reporting for finding influxdb info (4ac56f7fc, Yousong Zhou) region: guest to create input keep billing info (35c0e52de, wanyaoqi) region: openstack network is regional (869744d1b, Qu Xuan) region: sync servers (c069179ad, Qu Xuan) region: optimized disk allocate sched failed log (cd9b632d0, Qu Xuan) region: guestnetworks: use net calculated mtu (995b24c31, Yousong Zhou) region,baremetal: pxe net reuse converted server access ip (014170e74, Zexi Li) region,baremetal: choose candidate network not according by types (3da4dd195, Zexi Li) region,climc: eips: rename arg name for requested eip addr (62c39c62c, Yousong Zhou) scheduler: storage predicate add actualCapacity filter (5bce2bd95, Zexi Li) scheduler: remove unused k8s extender (da66f2650, Zexi Li) taskman: use admin token if task userCred token expired (70d2e5c84, Qiu Jian)  Code Refactoring (6)  climc: webconsole: use helper methods of response struct (45eda7c70, Yousong Zhou) host: startvm: for compat (f2e3766be, Yousong Zhou) host: startvm: nic_speed: use raw string (2154e7c18, Yousong Zhou) host: startvm: add QEMU_CMD_KVM_ARG (27dc7b629, Yousong Zhou) webconsole: api: add helper methods for response struct (85008a7b0, Yousong Zhou) webconsole: use structured response (2f9cfae37, Yousong Zhou)  Feature (1)  climc: policy save data into file (9cdd7dd2d, Qiu Jian)  Features (4)  apis: add const VPC_OVN_ENCAP_COST (208a49e3d, Yousong Zhou) host: startvm: set vpc nic mtu (c8388cab1, Yousong Zhou) host: startvm: add nic_mtu shell func (45b538bd2, Yousong Zhou) region: networks: add getMtu method (82e1234ed, Yousong Zhou)  ","excerpt":"Release time: 2020-12-29 03:01:23\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-12/","title":"v3.4.12"},{"body":"发布时间 2020-12-29 03:01:23\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n34 commits to cloudpods - v3.4.12 since this release.\nBug Fixes (23)  baremetal: clear jbod disks do PDMakeGood (ec5995da4, Zexi Li) cloudevent,devtool: missing metadata table (df7d68e40, Qiu Jian) host: telegraf listen on local ipv4 address explicitly (c3fd4937d, Qiu Jian) host: add print migrate progress info (cf8b54839, wanyaoqi) keystone: always upload\u0026refresh service config whenever service restart (9561c0c8d, Qiu Jian) mcclient: options: webconsole: fix passing ssh port (2add6fc1f, Yousong Zhou) monitor: other servier create alert add used_by param as a agreement (b01a477cb, –global) region: do not change disk status on migrating (a898d7609, wanyaoqi) region: eip_allocate_task: set eip status allocate_fail on task failure (5b0247a35, Yousong Zhou) region: add huawei gpssd desc (1ec3d6ddf, Qu Xuan) region: fix openstack instance os type (db60e37c4, Qu Xuan) region: lbbackend: better error reporting for finding influxdb info (4ac56f7fc, Yousong Zhou) region: guest to create input keep billing info (35c0e52de, wanyaoqi) region: openstack network is regional (869744d1b, Qu Xuan) region: sync servers (c069179ad, Qu Xuan) region: optimized disk allocate sched failed log (cd9b632d0, Qu Xuan) region: guestnetworks: use net calculated mtu (995b24c31, Yousong Zhou) region,baremetal: pxe net reuse converted server access ip (014170e74, Zexi Li) region,baremetal: choose candidate network not according by types (3da4dd195, Zexi Li) region,climc: eips: rename arg name for requested eip addr (62c39c62c, Yousong Zhou) scheduler: storage predicate add actualCapacity filter (5bce2bd95, Zexi Li) scheduler: remove unused k8s extender (da66f2650, Zexi Li) taskman: use admin token if task userCred token expired (70d2e5c84, Qiu Jian)  Code Refactoring (6)  climc: webconsole: use helper methods of response struct (45eda7c70, Yousong Zhou) host: startvm: for compat (f2e3766be, Yousong Zhou) host: startvm: nic_speed: use raw string (2154e7c18, Yousong Zhou) host: startvm: add QEMU_CMD_KVM_ARG (27dc7b629, Yousong Zhou) webconsole: api: add helper methods for response struct (85008a7b0, Yousong Zhou) webconsole: use structured response (2f9cfae37, Yousong Zhou)  Feature (1)  climc: policy save data into file (9cdd7dd2d, Qiu Jian)  Features (4)  apis: add const VPC_OVN_ENCAP_COST (208a49e3d, Yousong Zhou) host: startvm: set vpc nic mtu (c8388cab1, Yousong Zhou) host: startvm: add nic_mtu shell func (45b538bd2, Yousong Zhou) region: networks: add getMtu method (82e1234ed, Yousong Zhou)  ","excerpt":"发布时间 2020-12-29 03:01:23\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-12/","title":"v3.4.12"},{"body":"Release time: 2020-12-17 13:20:29\n cloudpods Repo: https://github.com/yunionio/cloudpods\n42 commits to cloudpods - v3.4.11 since this release.\nBug Fixes (37)  climc vpc-create missing cloudregion_id (07bcf6a7a, Qiu Jian) baremetal: convert to host failed (c5655ed2b, Zexi Li) climc: fix marshal perform params (3e3d356ff, wanyaoqi) climc: server-create –desc not work (433807432, Zexi Li) cloudcommon: disable quota check by default (2d248612e, Qiu Jian) cloudcommon: perform public should check the sharing scope of resource (c55309958, Qiu Jian) cloudcommon: quota checkout turnd on by default at release/3.4 (8d842b0d2, Qiu Jian) git,make: 更新获取 git branch 的规则 (f82e51af6, Zhang Dongliang) git,make: 修正 gitbranch 变量的获取方式，允许外部传入，解决自动升级版本 tag 不统一的问题 (c3be52698, Zhang Dongliang) git,make: git branch 获取方式优化 (5920af6ae, Zhang Dongliang) host: fix check hugepage enabled (0ee2cbcf6, wanyaoqi) host: fix set windows password with escape charater (e6206944d, wanyaoqi) host: check lease living on restart etcd session (31436641c, wanyaoqi) host-deployer: cancel rename centos vgname (8471421b8, wanyaoqi) keystone: ignore service config update without changes (ee391ed98, Qiu Jian) notify: check for changes before updating config (d357f0375, rainzm) notify: avoid deadlock (9122c7e10, rainzm) notify: repull subcontact after changing config (3d99fe914, rainzm) region: openstack available zones (ab6d57afe, Qu Xuan) region: openstack hosts sync (5863e4a73, Qu Xuan) region: inspect invalid guest template (e762b2e2e, rainzm) region: server login info\u0026 keypair import input parameter trimspace (2ff318a5b, TangBin) region: goimports check fix (3817b9e6a, TangBin) region: attach network on register baremetal server (5d69ae9a0, wanyaoqi) region: network reserved ip count not consider expiration of reserved ips (47fdfc78c, Qiu Jian) region: sanitize eip charge type on all callsites (475842e81, Yousong Zhou) region: support openstack subnet allocation pools (d1d62de88, Qu Xuan) region: validate isolated devices on migrate (c74b89332, wanyaoqi) region: baremetal post update related server (36a931442, Zexi Li) region,host: fix hot remove nic (2864b15ec, wanyaoqi) scheduler: get candidates error more info (1c86c0d73, Zexi Li) scheduler: select resource unordered (986fa9881, Zexi Li) scheduler: fetch input network when specified (b1bec7337, Zexi Li) scheduler: sku filter check zone if only prefer region specified (532ada4bf, Zexi Li) scheduler: sku by region and fill onecloud vpc networks (aad036a82, Zexi Li) vpcagent: ovn: stable dns A record value (0f973234b, Yousong Zhou) webconsole: trim api_server url if end with slashes (5364ba564, Zexi Li)  Code Refactoring (2)  apis: compute: remove EIP_CHARGE_TYPE_DEFAULT (5e3861b28, Yousong Zhou) notify: add StartSubcontactPullTask for receiver (28e5b39ff, rainzm)  Features (3)  region: support sync skus by cloudregion (96d199724, TangBin) region: support sync skus by cloudregion (e4c07c030, TangBin) region: regiondriver: add methods on eip charge type (f3fee1171, Yousong Zhou)   sdnagent Repo: https://github.com/yunionio/sdnagent\n7 commits to sdnagent - v3.4.11 since this release.\nTc (6)  QdiscTree: add Root() method (2353968, Yousong Zhou) NewQdiscTree: special case mq (f71d4e0, Yousong Zhou) NewQdiscTree: fix children key (d8c06dc, Yousong Zhou) NewQdiscTree: use qbase for BaseQdisc() return (c3726a1, Yousong Zhou) NewQdiscTree: rename vars (707229b, Yousong Zhou) NewQdiscTree: use current tree instead of the root (119e1d0, Yousong Zhou)  Tcman (1)  skip devices with mq qdisc (537d80d, Yousong Zhou)  ","excerpt":"Release time: 2020-12-17 13:20:29\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-11/","title":"v3.4.11"},{"body":"发布时间 2020-12-17 13:20:29\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n42 commits to cloudpods - v3.4.11 since this release.\nBug Fixes (37)  climc vpc-create missing cloudregion_id (07bcf6a7a, Qiu Jian) baremetal: convert to host failed (c5655ed2b, Zexi Li) climc: fix marshal perform params (3e3d356ff, wanyaoqi) climc: server-create –desc not work (433807432, Zexi Li) cloudcommon: disable quota check by default (2d248612e, Qiu Jian) cloudcommon: perform public should check the sharing scope of resource (c55309958, Qiu Jian) cloudcommon: quota checkout turnd on by default at release/3.4 (8d842b0d2, Qiu Jian) git,make: 更新获取 git branch 的规则 (f82e51af6, Zhang Dongliang) git,make: 修正 gitbranch 变量的获取方式，允许外部传入，解决自动升级版本 tag 不统一的问题 (c3be52698, Zhang Dongliang) git,make: git branch 获取方式优化 (5920af6ae, Zhang Dongliang) host: fix check hugepage enabled (0ee2cbcf6, wanyaoqi) host: fix set windows password with escape charater (e6206944d, wanyaoqi) host: check lease living on restart etcd session (31436641c, wanyaoqi) host-deployer: cancel rename centos vgname (8471421b8, wanyaoqi) keystone: ignore service config update without changes (ee391ed98, Qiu Jian) notify: check for changes before updating config (d357f0375, rainzm) notify: avoid deadlock (9122c7e10, rainzm) notify: repull subcontact after changing config (3d99fe914, rainzm) region: openstack available zones (ab6d57afe, Qu Xuan) region: openstack hosts sync (5863e4a73, Qu Xuan) region: inspect invalid guest template (e762b2e2e, rainzm) region: server login info\u0026 keypair import input parameter trimspace (2ff318a5b, TangBin) region: goimports check fix (3817b9e6a, TangBin) region: attach network on register baremetal server (5d69ae9a0, wanyaoqi) region: network reserved ip count not consider expiration of reserved ips (47fdfc78c, Qiu Jian) region: sanitize eip charge type on all callsites (475842e81, Yousong Zhou) region: support openstack subnet allocation pools (d1d62de88, Qu Xuan) region: validate isolated devices on migrate (c74b89332, wanyaoqi) region: baremetal post update related server (36a931442, Zexi Li) region,host: fix hot remove nic (2864b15ec, wanyaoqi) scheduler: get candidates error more info (1c86c0d73, Zexi Li) scheduler: select resource unordered (986fa9881, Zexi Li) scheduler: fetch input network when specified (b1bec7337, Zexi Li) scheduler: sku filter check zone if only prefer region specified (532ada4bf, Zexi Li) scheduler: sku by region and fill onecloud vpc networks (aad036a82, Zexi Li) vpcagent: ovn: stable dns A record value (0f973234b, Yousong Zhou) webconsole: trim api_server url if end with slashes (5364ba564, Zexi Li)  Code Refactoring (2)  apis: compute: remove EIP_CHARGE_TYPE_DEFAULT (5e3861b28, Yousong Zhou) notify: add StartSubcontactPullTask for receiver (28e5b39ff, rainzm)  Features (3)  region: support sync skus by cloudregion (96d199724, TangBin) region: support sync skus by cloudregion (e4c07c030, TangBin) region: regiondriver: add methods on eip charge type (f3fee1171, Yousong Zhou)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n7 commits to sdnagent - v3.4.11 since this release.\nTc (6)  QdiscTree: add Root() method (2353968, Yousong Zhou) NewQdiscTree: special case mq (f71d4e0, Yousong Zhou) NewQdiscTree: fix children key (d8c06dc, Yousong Zhou) NewQdiscTree: use qbase for BaseQdisc() return (c3726a1, Yousong Zhou) NewQdiscTree: rename vars (707229b, Yousong Zhou) NewQdiscTree: use current tree instead of the root (119e1d0, Yousong Zhou)  Tcman (1)  skip devices with mq qdisc (537d80d, Yousong Zhou)  ","excerpt":"发布时间 2020-12-17 13:20:29\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-11/","title":"v3.4.11"},{"body":"Release time: 2020-12-03 16:20:08\n cloudpods Repo: https://github.com/yunionio/cloudpods\n19 commits to cloudpods - v3.4.10 since this release.\nBug Fixes (13)  cloudid: avoid new public account sync system policy delay 1 day (b9d08c74a, Qu Xuan) host: make sure it won’t match vpc guests by accident (b54ebf45f, Yousong Zhou) keystone: not allow to disable sql driver (e77ca8487, Qiu Jian) monitor: modify influxdbSuggestDriver query err (fd7fe6293, zhaoxiangchun) notify: return the result of the second attempt to execute the rpc call (e2ab5190c, rainzm) region: auto sync cloudaccount resources (43f5c8495, Qu Xuan) region: delete guest without ‘purge’ in GuestDetachScalingGroupTask (af006498f, rainzm) region: secgrouprule: set model manager (ec47e4773, Yousong Zhou) region: sort excludedNets correctly (220fb5bca, rainzm) region: pass up error from InitializeData (f80c6a214, Yousong Zhou) region: avoid qcloud sync local disk error (c2765f5fd, Qu Xuan) region,scheduler: fix netwrok predicate (43407d3d7, wanyaoqi) taskman: SSubTask: set model manager (1c68b97c8, Yousong Zhou)  Bugfix (1)  region: fix list by srever type normal (eba5bd84d, wanyaoqi)  Features (5)  host: add option OvnEncapIpDetectionMethod can-reach:xx (1615426f2, Yousong Zhou) netutils2: add MyIPTo (3df0be2fd, Yousong Zhou) region: add list filter server type (ee9e59df8, wanyaoqi) region: options: allow setting default vpc external access mode (0ea12ffcc, Yousong Zhou) region: search server by substr of ip or mac (9e5018b14, Yousong Zhou)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n2 commits to cloudpods-operator - v3.4.10 since this release.\nFeatures (1)  host: allow setting ovnEncapIpDetectionMethod (176999a, Yousong Zhou)  Vendor (1)  update yunion.io/x/master to current release/3.4 (05ccca2, Yousong Zhou)   ocadm Repo: https://github.com/yunionio/ocadm\n2 commits to ocadm - v3.4.10 since this release.\nBug Fixes (1)  update: cluster update operator parse image digest (50c3663, Zexi Li)  Chore (1)  vendor: resolve onecloud-operator preceding tag not found (bf6f45a, Zexi Li)   sdnagent Repo: https://github.com/yunionio/sdnagent\n3 commits to sdnagent - v3.4.10 since this release.\nBuild (1)  eipgw: track to ensure stop state as well (71e82fb, Yousong Zhou)  Others (1)  .circleci: bump go to 1.14 (d5a7f19, Yousong Zhou)  Vendor (1)  bump yunion.io/x/onecloud to current tip of release/3.3 (cd98fe2, Yousong Zhou)  ","excerpt":"Release time: 2020-12-03 16:20:08\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-10/","title":"v3.4.10"},{"body":"发布时间 2020-12-03 16:20:08\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n19 commits to cloudpods - v3.4.10 since this release.\nBug Fixes (13)  cloudid: avoid new public account sync system policy delay 1 day (b9d08c74a, Qu Xuan) host: make sure it won’t match vpc guests by accident (b54ebf45f, Yousong Zhou) keystone: not allow to disable sql driver (e77ca8487, Qiu Jian) monitor: modify influxdbSuggestDriver query err (fd7fe6293, zhaoxiangchun) notify: return the result of the second attempt to execute the rpc call (e2ab5190c, rainzm) region: auto sync cloudaccount resources (43f5c8495, Qu Xuan) region: delete guest without ‘purge’ in GuestDetachScalingGroupTask (af006498f, rainzm) region: secgrouprule: set model manager (ec47e4773, Yousong Zhou) region: sort excludedNets correctly (220fb5bca, rainzm) region: pass up error from InitializeData (f80c6a214, Yousong Zhou) region: avoid qcloud sync local disk error (c2765f5fd, Qu Xuan) region,scheduler: fix netwrok predicate (43407d3d7, wanyaoqi) taskman: SSubTask: set model manager (1c68b97c8, Yousong Zhou)  Bugfix (1)  region: fix list by srever type normal (eba5bd84d, wanyaoqi)  Features (5)  host: add option OvnEncapIpDetectionMethod can-reach:xx (1615426f2, Yousong Zhou) netutils2: add MyIPTo (3df0be2fd, Yousong Zhou) region: add list filter server type (ee9e59df8, wanyaoqi) region: options: allow setting default vpc external access mode (0ea12ffcc, Yousong Zhou) region: search server by substr of ip or mac (9e5018b14, Yousong Zhou)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n2 commits to cloudpods-operator - v3.4.10 since this release.\nFeatures (1)  host: allow setting ovnEncapIpDetectionMethod (176999a, Yousong Zhou)  Vendor (1)  update yunion.io/x/master to current release/3.4 (05ccca2, Yousong Zhou)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n2 commits to ocadm - v3.4.10 since this release.\nBug Fixes (1)  update: cluster update operator parse image digest (50c3663, Zexi Li)  Chore (1)  vendor: resolve onecloud-operator preceding tag not found (bf6f45a, Zexi Li)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n3 commits to sdnagent - v3.4.10 since this release.\nBuild (1)  eipgw: track to ensure stop state as well (71e82fb, Yousong Zhou)  Others (1)  .circleci: bump go to 1.14 (d5a7f19, Yousong Zhou)  Vendor (1)  bump yunion.io/x/onecloud to current tip of release/3.3 (cd98fe2, Yousong Zhou)  ","excerpt":"发布时间 2020-12-03 16:20:08\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-10/","title":"v3.4.10"},{"body":"Release time: 2021-08-27 13:13:35\n cloudpods Repo: https://github.com/yunionio/cloudpods\n995 commits to cloudpods - v3.8.0 since this release.\nAdd (1)  hcso iam (42fda4401, Qu Xuan)  Ansibleserver (2)  wait zombie subprocesses (89b4f6e9f, Yousong Zhou) use mcclient module method for fetching keypair info (44871c6b1, Yousong Zhou)  Apigateway (3)  handler: add cloudproxy (6137a3d45, Yousong Zhou) try return httperrors (ab7c5e039, Yousong Zhou) reword error messages (2d1d4f3dc, Yousong Zhou)  Apihelper (1)  move to yunion.io/x/onecloud/pkg/{vpcagent/,}apihelper (4c550665f, Yousong Zhou)  Bug Fixes (631)  actions domain filter by project doamin id (12bb6ac8e, Qu Xuan) openstack health should be normal (5ab3d3ab2, Qu Xuan) add reddit contact (cfd3a15b6, Qiu Jian) update README embed image (13f61a1d7, Qiu Jian) update README 20210610 (2354722cc, Qiu Jian) README improvement (cd1c24290, Qiu Jian) improve documentation (2cc64af6f, Qiu Jian) update README 20210610 (b4bb9c724, Qiu Jian) nas misc (e35c1d48b, Qu Xuan) improve readme (89a83dea5, Qiu Jian) 修复云账号和宿主机报警问题 (cf29c44bb, zhaoxiangchun) improve README (09e1e1ced, Qiu Jian) change site URL to www.cloudpods.org (#11396) (93d946816, Jian Qiu) hpssacli should skip empty slots (b7133f715, Qiu Jian) add default security group rules and priorities to JDCloud (276102a22, rainzm) do not resize LVM paritition and skip and return success (4e65ec00c, Qiu Jian) truncate columns longer than 512 bytes by default (4e76d3571, Qiu Jian) disable pretty table try os width by default (6b24c0600, Qiu Jian) support windows 2003 (56025bc55, Qiu Jian) windows resize file system (6c8b8441d, Qiu Jian) remove meter client codes (567856cad, Qiu Jian) get apigateway auth/regions with error of illegal mix of collations (a087863ab, Qiu Jian) dhcp classless route encoding error (381b7e694, Qiu Jian) adjust primary key length when sqlchemy utf8 default to utf8mb4 (6c66f8913, Qiu Jian) automatically setup object miemtype when uploading (e2e18efd1, Qiu Jian) aliyun lb charge type (7c4e4645b, Qu Xuan) add trans info (fdc8f8b3e, Qu Xuan) bill-tasks-create parameters (ae1894003, Qiu Jian) update README to add user list and bilibili URL (32bfd5211, Qiu Jian) optimized aliyun error (bef65e7d7, Qu Xuan) resolve conflict of climc docker build (49807175f, Qiu Jian) update README installation steps (f408012c9, Qiu Jian) init cloud shell by apigateway (ea6797c60, Qiu Jian) qcloud eip bandwidth (e088570af, Qu Xuan) missing yunionconf log (740b3c94a, Qiu Jian) add tag for databricks vm (12b72a6e1, Qu Xuan) routes to private prefixes should be distributed on private nic (3672f1bdd, Qiu Jian) update version of file-repo (13768a053, rainzm) secgroup cache policy (e806674a0, Qu Xuan) avoid return no data result (298179baa, Qu Xuan) validate secgroup references (d44403d69, Qu Xuan) resolve permission issues for samlusers and quotas (afe11dbee, Qiu Jian) get region nil pointer error (6815f63c1, Qiu Jian) add more organization command (c6cd80351, Qiu Jian) allow set server-disk cache mode as directsync (4fc194a1b, Qiu Jian) inter-vm traffic limited by eip bandwidth limit (93bceeafd, Qiu Jian) require password for imported user (896596731, Qiu Jian) get datacenter of host via GetDatacenter (e52a9a7ad, rainzm) avoid host worker is locked when image cache is deleted (b13cdefb7, Qu Xuan) optimized rbd storage input and update (f83b8b043, Qu Xuan) optimzed tag sync (68e28bfe4, Qu Xuan) private cloud sku attached disk count (73f952a5b, Qu Xuan) add nat sku provider filter (2af2a977b, Qu Xuan) add secgroup filter opts (169b1ec86, Qu Xuan) new aws region (432435e5b, Qu Xuan) optimized bucket tag (531e142a1, Qu Xuan) add nat sku policy (04ad3d4df, Qu Xuan) add cancel expire action (c3b80cb6b, Qu Xuan) support prepaid instance change config (cf0b2f556, Qu Xuan) simplify installation stes to two steps (09570b0f1, Qiu Jian) sync nat sku when sync cloudaccount (91abafe71, Qu Xuan) time sync duration (f9ce72ca6, Qu Xuan) migrate interface before commit desc (d3da7426f, Qiu Jian) add purge split log commands for cloudevent and cloudlog (c8e881874, Qiu Jian) aliyun public ip bandwidth (02fa0373b, Qu Xuan) aliyun tag list api (4d9f00772, Qu Xuan) optimize change vm config and prepaid change config (56948a97e, Qu Xuan) add bucket tooltip (db11d67f4, Qu Xuan) sync new project for azure resource group (11be3494c, Qu Xuan) 优化同步，避免长时间加锁 (f9f0c8f3c, ioito) optimzed tag update and sync (e71b6fce4, Qu Xuan) skip zone check when rds change config (6bd71f5eb, Qu Xuan) vpc public with nat (e1de34e9a, Qu Xuan) sync cloud tags when set tags (511111aec, Qu Xuan) qcloud bucket refer (113e2ab87, Qu Xuan) avoid double counting when compute networks nic count (7d2fadb84, rainzm) change rds config skip zone check (8eaa25625, Qu Xuan) optimized nat entry (20a64f934, Qu Xuan) purge splitable logs for cloudevents and logger (8f16f7eee, Qiu Jian) do not use ntfsresize to resize NTFS partition (179562bc4, Qiu Jian) avoid stop or start vm failed (e08a99061, Qu Xuan) nat sku env (0446859f0, Qu Xuan) add license upload (6b35605de, Qu Xuan) simplify SQL for distinct field query of tenant or domain names (a1d472d41, Qiu Jian) add qcloud get tags and remove unused interface (7c3c8bc2b, Qu Xuan) avoid panic when use idc vpc (e723b2418, Qu Xuan) add index for image_type (2218e4624, Qu Xuan) compatible with new io scheduler(bfq/mq-deadline) of new Linux kernel (0529327e1, Qiu Jian) remove qcloud region and zone prefix (adaf389bf, Qu Xuan) nat delete and create fix (45d3e8329, Qu Xuan) minor changes of LICENSE and README (#11553) (64af16114, Jian Qiu) add cloudroot as system account, so as not using normal user id (31b5866e4, Qiu Jian) qemu-img create disk may fail to preallocation=metadata enable for large disk (af03ed60e, Qiu Jian) sku zone (888c8c200, Qu Xuan) account auto sync time (6b89fb57e, Qu Xuan) peer secgroup rule fix (97f086cc2, Qu Xuan) nas for huawei (a3c676f7e, Qu Xuan) instance with eip charge type (f387f32fa, Qu Xuan) add region id params (8de1b3c69, Qu Xuan) nat sku domain policy (baacfddbd, Qu Xuan) cloudaccount auto sync (b9627f034, Qu Xuan) vendor update (a4b387dd2, Qu Xuan) avoid listener worker leak (2a4e80879, Qu Xuan) avoid update protocol with any faild (80580fa2e, Qu Xuan) before insert (7f8cf5adc, Qu Xuan) avoid panic (ab2fc8feb, Qu Xuan) secgroup cache reference (b7fe92f50, Qu Xuan) add options for pre allow ip add (5be136c9c, Qu Xuan) add rbdcli commond for debug (8a26d54a9, Qu Xuan) server migrate network to a vlan network (c53b87cc5, Qiu Jian) add codes to switch bridge of ovs port (58313432f, Qiu Jian) host detach wire not update netinterface (184a6a081, Qiu Jian) anisbleserver: support complex yaml config in ansibleplaybook_instance (9a01d83ee, rainzm) ansibleserver: add LF for privateKey if not (0d1f54bab, rainzm) ansibleserver: be compatible with empty params (67d7c571f, rainzm) ansibleserver: don’t init privateKey for ansibleplaybook if it already have one (cad24302d, rainzm) ansibleserver: correct playbook path (cb410623d, rainzm) apigateway: add auth/stats api to retrieve system info (#10181) (c96c0cc26, Jian Qiu) apigateway: ignore fetch IDP errors in getRegions (#10070) (b2e00a8ad, Jian Qiu) apigateway: recover remove apigateway locale messages (9628e1210, Qiu Jian) apigateway: totp passcode verify error code fix (c377f1972, tb365) apigateway: count city servers (613662c07, Qu Xuan) apigateway: add enable_quota_check and return-domain-list (#10158) (7191d9df1, Jian Qiu) apigateway: use info response service type of console endpoints (bfc522a89, Qiu Jian) apigateway: getRegions return value of api_server (217a54b9f, Qiu Jian) baremetal: nvme allocable (35e425889, Zexi Li) baremetal: close ssh test client (3f87a6fc6, Zexi Li) baremetal: use ipmitool power reset when redfish power on error (539f68309, Zexi Li) baremetal: use command timeout context replace timeout command (0bb78f1b4, Zexi Li) baremetal: inject mac when admin nic found (865e2671e, Zexi Li) baremetal: register baremetal name invalid (64878713e, Zexi Li) baremetal: compatible with SN empty of MegaRaid (625d1451f, Zexi Li) baremetal: sas2iru parse line (089594599, Zexi Li) baremetal: inject mac to cmdline (96dc4ca4d, Zexi Li) baremetal: remove bundle libs build (54250d3d8, Zexi Li) baremetal: baremetal ipmi probe reset link up state (55cfb0ba4, Qiu Jian) baremetal: megactl driver fail to find device by key (ffc67460b, Qiu Jian) baremetal: record uefi info (6179886b7, Zexi Li) baremetal: try channel 8 for default profile (fee2ef355, Qiu Jian) baremetal: increase ipmitool reboot sleep wait time (784e99690, Zexi Li) baremetal,esxiagent: no cloudroot user initialized (952cc03ae, Qiu Jian) baremetal-agent: baremetal will probe status in status unknown (b91e41e71, Qiu Jian) baremetal-agent: baremetal fail to stop due to power off soft failed (75d7b30d2, Qiu Jian) build: chage template of ‘Abnormal Login’ (d0fed292f, rainzm) build: build telegraf-raid-plugin (61c47dd39, Zexi Li) build: baremetal arm64 build (9617ca437, Zexi Li) build: DOCKER_CLI_EXPERIMENTAL=enabled (cac364054, Zexi Li) climc: mv climc rpm package .bashrc to /etc/profile.d/climc.sh (386b8e5c7, Zexi Li) climc: modify the code logic of starting “Port-Forward SSH” (0a48cde82, Stargic) climc: host add netif add params bridge/interface (cecd329fe, wanyaoqi) climc: add version list command (1f87214bb, Qu Xuan) climc: update climc-base image to 20210701 (3b06b4c0e, Zexi Li) climc: json tag (4bb922eb0, Qu Xuan) cloudcommon: splitable may not initialize underlying table (50a0d167f, Qiu Jian) cloudcommon: avoid service exit when etcd unreachable (c8966f7e8, Zexi Li) cloudcommon: remove unnecessary debug info (15ee20a4a, rainzm) cloudcommon: use NewGeneralError to construct error (ec4dfc471, rainzm) cloudcommon: missing set_meta opslog (#9914) (9a7b9bec2, Jian Qiu) cloudcommon: unify OS_ARCH constants (e82a3deb7, Zexi Li) cloudcommon: disable EventNotify for now (a28ff0400, rainzm) cloudcommon: use rbac authentication dedicated to the list interface in GetModelProperty (ed6f183db, rainzm) cloudcommon: add default domain of common options (29ef9d8ba, Zexi Li) cloudevent: hcso event fix (6f129378e, Qu Xuan) cloudevent: optimized cloudevent sync (aa0915b55, Qu Xuan) cloudevent: add distinct filed for cloudevent (cdd111ca0, Qu Xuan) cloudevent: default policy (874c5af09, Qu Xuan) cloudevent: hcso resource name (013b9b0e3, Qu Xuan) cloudevent: adjust cloudevents resource scope (7daa123c7, Qiu Jian) cloudevent: optimized cloudevent sql (8837b2d64, Qu Xuan) cloudevent: add aws cloudevent (ba5f19bc1, Qu Xuan) cloudevent: update aliyun lookupevent api (1fdf9031f, Qu Xuan) cloudevent: cloudevent is domain level resource (5610dd674, Qu Xuan) cloudid: add en-US html templte (39025c263, Qu Xuan) cloudid: remove debug code (814bec45f, Qu Xuan) cloudid: avoid sync clouduser twice (59e5e22b5, Qu Xuan) cloudid: hcso enable multi tenant saml provider (1eec6039e, Qu Xuan) cloudid: avoid duplicate create saml provider (6ff1610ff, Qu Xuan) cloudid: clouduser use default domain (8bc0ad557, Qu Xuan) cloudid: optimized saml sso (ab15a751e, Qu Xuan) cloudid: fix azure saml provider delete error (13eaa4eb5, Qu Xuan) cloudid: huawei group role attach and detach (85f3ddc3f, Qu Xuan) cloudid: sync role policy (04afc689e, Qu Xuan) cloudid: multi cloudaccount with saml user (f85dc7d4c, Qu Xuan) cloudid: hcso custom role (8deacfcf5, Qu Xuan) cloudid: saml navigation template support i18n (0f68973d7, Qiu Jian) cloudid: azure attach enabled subscription policy (163a4e14f, Qu Xuan) cloudid: azure saml confirm (5eb0c1842, Qu Xuan) cloudproxy: ssh proxy endpoint\u0026match query (62f9243ba, TangBin) cloudproxy: correct fetch projectId from server for PE (f906d15a5, rainzm) cloudproxy: keep the proxy endpoint project and server consistent (51e75c48f, rainzm) common: supported dry run (705e068a6, Qu Xuan) common: add debug info for lock (5edf37c54, Qu Xuan) common: dump task info when stucking (7b845d17c, Qu Xuan) common: batch validate create (a87a8f2f4, Qu Xuan) devtool: wait for the remote forward to run normally (c6ae4706d, rainzm) devtool: add scope=system query when list proxy endpoints (33bdc9d2f, rainzm) devtool: fix a bug that may trigger panic (9b994792e, rainzm) devtool: correct output error (489ddc90f, rainzm) devtool: get ‘lastseen’ not ‘last_seen’ of forward (09a9d4e49, rainzm) devtool: set ‘task_id’ and ‘task_notify_url’ in header (9b7a33f43, rainzm) devtool: extend the waiting time when checking remote forward (314ac5ac4, rainzm) docs: update swagger api (23290092d, Qu Xuan) esxi: be compatible with disconnected host (885a483e0, rainzm) esxi: prevent fake template and real template from duplication (ca0f88877, rainzm) esxi: correctly set the imagePath outside the if block (1d732e913, rainzm) esxi: determine whether the disk is a root disk more reasonably (564470de0, rainzm) esxi: add ListPath for storage and use it to check iso (b073ae9cb, rainzm) esxiagent: nicIndex should be incremented (f6e2c2fd1, rainzm) esxiagent: make the copied disk type as thin (5d3257126, rainzm) esxiagent: execute deploy operation by default in AgentDeployGuest (b44a6a053, rainzm) esxiagetn: keep compatible with the lower version vcenter when copying the disk (f6648296a, rainzm) github: PR template typo (995eb229a, Zexi Li) github: document template add enhancement label (e709bb2f9, Zexi Li) glance: image can’t removed when size is 0 (35ad91f70, Zexi Li) glance: add option of s3 image status check (00069a607, Zexi Li) glance: make image is_standard updatable (d88af7a6f, Zexi Li) glance: set fail status when upload image to s3 (48cfdd5ed, Zexi Li) host: ignore parted resize disk unknown partition table error (bf13a14ed, Zexi Li) host: allow server directory a symbol link to directory in other location (7765ec0e3, Qiu Jian) host: avoid panic when params is nil (8192af65e, Qu Xuan) host: find same vendor iommu_group devices (675fc64fa, Zexi Li) host: raid status (219b853ec, zhaoxiangchun) host: arm vm virtio-net-pci without addr (c7b85ca30, Zexi Li) host: update rbd storage capacity (d76f366c5, Qu Xuan) host: get ceph used capacity (0144f03cd, Qu Xuan) host: update host metric tags when server or host changeowner (14f0342b3, zhaoxiangchun) host: detect ovs version (5afa999fe, Zexi Li) host: modification of netio collection field of local virtual machine (8c5915067, zhaoxiangchun) host: raid status fix (392f5ab23, zhaoxiangchun) host: fix wait time after mount fuse fs (c6a7ddc44, wanyaoqi) host: avoid delete removed disk failed (352ceefed, Qu Xuan) host,region: disable health checker by default (2b404c89d, Zexi Li) host-deployer: remove escape character on windows passwd (11896e65d, wanyaoqi) host-deployer: add retry on check is vgactived (eb79cc79e, wanyaoqi) host-deployer: XFS uuid冲突 无法 mount (1248b88c7, panda) host-deployer: add log line on blkid failed (ee2f54f4d, wanyaoqi) host-deployer: make SKVMGuestLVMPartition work fine (0a75aaad6, rainzm) host-deployer: mkfs.ext4 add ‘-T largefile’ option (768ab3036, Zexi Li) host-deployer: detect UEFI supported not correct (cf7b226c3, Zexi Li) host-deployer: mount may fail to lock /etc/mtab, add retrier (63bbd5c34, Qiu Jian) hostdeployer: windows rootfs umount leak (b72f60f34, Zexi Li) hostman: show server status changed reason (dc879ab8d, Qu Xuan) hostman: fix kvm create disk failed error (bf6cadd5a, Qu Xuan) hostman: avoid panic when disk is nil (19705cc05, Qu Xuan) hostman: recycle local disk file when rebuilding root (225afd447, Qiu Jian) image: update min_disk of iso image (298568772, Qiu Jian) keystone: user create without password can login with any password (65096570a, Qiu Jian) keystone: allow delete sso imported non-local user (84f776069, Qiu Jian) keystone: avoid panic when call logclient (4ba014cf5, Qu Xuan) keystone: add alertrecords to default dashboard permission (#10160) (1af001357, Jian Qiu) keystone: correctly pass domain id to role-assignments (9a9890900, rainzm) keystone: avoid sql error (4fe0e8e5b, Qu Xuan) keystone: idp filter by sso_domain returns domain’s idp only (01abd8997, Qiu Jian) keystone: don’t send the administrator’s message to the party (6b25d78ad, rainzm) keystone: allow joint projects across domains by default (bf1aed7a1, Qiu Jian) keystone: allow filter identity_providers with name of ssoDomain (0886e6092, Qiu Jian) keystone: add suggestion previliges to meter admin (30453233c, Qiu Jian) keystone: SSO created user name may be duplicated (209ba5d54, Qiu Jian) keystone: adjust default system policy names (222f9cdeb, Qiu Jian) keystone: role_assignment effective list ignore groups without user (e9a4a659f, Qiu Jian) keystone: clear failed auth when enable user (2c1eeb89e, rainzm) keystone: update default role associated policy name (4490adedb, Qiu Jian) keystone: policy filter by role (7ec42db3c, Qu Xuan) keystone: cas sso may create new project whenever user login (515a4de9b, Qiu Jian) keystone: user not found error fix (05b8eccb1, tb365) keystone: policy name duplication (#10199) (9ba3709b3, Jian Qiu) keystone: hide system scope policies in domain scope view (#10194) (010049e5e, Jian Qiu) keystone: tag list for keystone service (ad68cfbeb, Qu Xuan) keystone: avoid repeated abnormal login notifications (21d8b7226, rainzm) keystone: send to the admin and the party separately when Abnormal login occurs (6e6f5ddde, rainzm) keystone: ensure comparing id with non-utf8 string (c68c3f17a, Qiu Jian) log: add filters to baremetal event logs (d4a2dbbea, Qiu Jian) logger: distinct field optimized for logger (2cfbda9a5, Qu Xuan) make,buildx: 使用 buildx 编译时，拉镜像到本地 (3d9d34ac1, Zhang Dongliang) monitor: fix storage tag (391b8b517, zhaoxiangchun) monitor: fix monitor overview (f6d7f07c7, zhaoxiangchun) monitor: add used_by list filter (bdb2a85ae, zhaoxiangchun) monitor: alertPanel add dumplicate name check (d361c2dbb, zhaoxiangchun) monitor: modify rds,redis,oss field descriptions (42a549ad8, zhaoxiangchun) monitor: set alertdashboard scope (d73a76b12, zhaoxiangchun) monitor: fix agent monitor query (40f33db2a, zhaoxiangchun) monitor: fix 报警静默期和未恢复告警策略的兼容 (8fb4e1555, zhaoxiangchun) monitor: fix monitor slow query (b8bdcb077, zhaoxiangchun) monitor: alertpanel update don’t chcek uniq name (ef607c52f, zhaoxiangchun) monitor: monitor notify international and 3.6 bugfix (4ac6d48c6, –global) monitor: fix update alert duration fail (be4b9a580, zhaoxiangchun) monitor: fix monitor resourece update (4c2bca8f8, zhaoxiangchun) monitor: update apiHelper field and log (1285bcb06, zhaoxiangchun) monitor: 3.7 nodata and alertOverview fix (4e0ce5b9e, zhaoxiangchun) monitor: fix alert duration (ac0bb066d, zhaoxiangchun) monitor: add resType filter (79e6d163d, –global) monitor: exit monitor engine in time when happen err (9b493fb59, zhaoxiangchun) monitor: update monitor resourece joint scope (f8b690602, zhaoxiangchun) monitor: monitor query : cloudaccount no data fix (f0eb80a2a, zhaoxiangchun) monitor: registry alertPanel in mcclient (ed4bffa9a, zhaoxiangchun) monitor: fix monitor bug (1eaccaf72, zhaoxiangchun) monitor: fix alert notify info do not contain resourceName (ec589c470, zhaoxiangchun) monitor: fix alert record not return resource details (7310d612e, zhaoxiangchun) monitor: fix monitoroverview and meter send alerting info to notify (abb4deebb, zhaoxiangchun) monitor: alertQuery fix (cb177bc4d, zhaoxiangchun) monitor: fix resource details can’t show monitor metric (f3ddc9747, zhaoxiangchun) monitor: alertdashboard setscope (d62467097, zhaoxiangchun) monitor: modify nodata feishu notifyinfo; fix send email err (e2a5addc2, zhaoxiangchun) monitor: alert policy use ownerId when update (3c499f209, zhaoxiangchun) monitor: modify alertrecord list input (ce02a6556, zhaoxiangchun) monitor: domain view can list scope is domain or project alertrecords; fix nodata alert return info (83a6fd7f1, zhaoxiangchun) monitor: monitor overview throw err (7988fa1f1, zhaoxiangchun) monitor: update alert panel scope by alert dashboard (b2835c5d8, zhaoxiangchun) monitor: sore reture info：resourceType,measurement (567fc991c, –global) monitor: fix monitor export err (97c107f7e, zhaoxiangchun) monitor: alertpanel create fix; nodealert filterbyowner fix (3a10cd66b, zhaoxiangchun) monitor: modify onecloud replacement code (65a9d7945, zhaoxiangchun) monitor: filter alertquery result according to onecloud resources (beff4578c, zhaoxiangchun) monitor: fix monitor process alert (9c6d0b825, zhaoxiangchun) monitor: modify totalrecord query (5d6ffa16f, zhaoxiangchun) monitor,host: replace space to ‘+’ when write to influxdb and replace ‘+’ to space when query (1e08a5199, zhaoxiangchun) monitor,suggestion: order commonalert metric and modify alertresoruce type value and add suggestion models climc (b23519b03, zhaoxiangchun) multicloud: get the storage type of the disk correctly (74f186855, rainzm) multicloud: set isEmulated as false for ecloud vpc (2d04115ab, rainzm) notify: exempt the administrator to create the receiver verification (390476e69, rainzm) notify: remote ‘lang’ filter when contact type is ‘mobile’ (9db54d1dd, rainzm) notify: fix for subscriber_receiver (3dea565c8, rainzm) notify: correctly filter those recipients who join the domain (5a39fc18c, rainzm) notify: add list option ‘enabled’ for topic (c89ae949e, rainzm) notify: loose phone number rules in updating receiver (d12185d43, rainzm) notify: loose mobile phone number matching rules (64e79a934, rainzm) notify: fix create and list of subscriber (fc1adcedf, rainzm) notify: optimization of print log (edcd98e5f, rainzm) notify: set ModelManager in Receiver() (479e1e2f3, rainzm) notify: be compatible with robots and webhooks (6b1f63efc, rainzm) notify: set status after sending (349ac011e, rainzm) notify: clean verifiedNote when marking verified (6f0290ca7, rainzm) notify: init config name (8b0b4bdf3, rainzm) notify: init robot correctly from old data (cd8529556, rainzm) notify: enable filter of contact type ‘email’ and ‘mobile’ (c3b4cbef5, rainzm) notify: distinct field of receivers (1c865268f, rainzm) notify: panic for err (7175e124e, rainzm) notify: avoid duplication of notification names (07114b53d, rainzm) notify: update receiver’s lang when update event occurs (89d604a26, rainzm) notify: get the receiver corresponding to the role correctly (650e25560, rainzm) notify: add create tag fro Attribution in SConfig (cd40909de, rainzm) notify: add index fro receiver_notification (26192eac3, rainzm) notify: be compatible with webconsole type hack (4269a482b, rainzm) notify: be compatible with member’s permission changes (95de795c8, rainzm) notify: set default lang ‘zh_CN’ for robot (5ab4cc9e7, rainzm) notify: add a time limit for resending notifications (a23cd0576, rainzm) notify: Support selective update of robot field (06f23b26e, rainzm) notify: send websocket messages according to language preference (09337d923, rainzm) notify: choose template in NotifyFilter (5b79ad315, rainzm) notify: inject domain info in ReceiverManager.FetchOwnerId (cfae818d0, rainzm) readme: rename OneCloud to YunionCloud (71e9e953e, Zexi Li) readme: remove deadlinks (fc2088dee, Zexi Li) region: try to connect when new a SEcloudClient (a41734482, rainzm) region: remove useless Environment (ee834af5b, rainzm) region: azure cache capability (7f3ac39f3, Qu Xuan) region: avoid sync azure china redis failed (247d10f65, Qu Xuan) region: validate jdcloud rds err (875abe66d, Qu Xuan) region: decouple region and etcd service (8dbc2213f, Zexi Li) region: Remind that cloud account synchronization failed due to network synchronization failure (f8a37d941, rainzm) region: purge instancesnapshot when purging guest (a80fdaadd, rainzm) region: update manager name (9187d9abf, Qu Xuan) region: update jdcloud rds port (53746609a, Qu Xuan) region: qcloud redis sync fix (7c56f4fbb, tangbin) region: set DefaultSysDiskBackend as empty for esxi guest (8f9219592, rainzm) region: ignore aliyun region not supported error (c85d4ac71, Qu Xuan) region: convert eip with same project with vm (7df3891a9, Qu Xuan) region: sync storage before syncing host in syncOnPremiseCloudProviderInfo (606045bce, rainzm) region: allocate server eip without hostwire restrict (04872867c, Qu Xuan) region: nas owner id fix (1f2099ac0, Qu Xuan) region: wait more time for creating nas (a6ef9b66f, Qu Xuan) region: optimized peer secgroup (7aa9bda8e, Qu Xuan) region: remove code about getting service url (790376c53, rainzm) region: avoid assign vm ip addr not effect (44a48fef6, Qu Xuan) region: sync baremetal desc before do ipmi probing (ca3e60d27, Qiu Jian) region: vm list order by disk size (add10f340, Qu Xuan) region: fetch cached image from glance by default (c3cad7ef0, Zexi Li) region: rigorously merge the network under wire (692754b94, rainzm) region: avoid refreshing when checking the image (170ceb1b5, rainzm) region: allow ipmi probe in status unknown (0a5c5a44b, Qiu Jian) region: guest sync eip fix (3be7a103c, tangbin) region: guest associate eip checking fix (cd9a97aef, tangbin) region: remove debug info (20b151fbc, Qu Xuan) region: avoid panic when sync aliyun networks (3f485c7c3, Qu Xuan) region: remove i18n lock and logs (c03f0da14, Qiu Jian) region: aws waf sync (53825d536, Qu Xuan) region: add usage cache, speedup response (82d2604d7, Qiu Jian) region: add qcloud tdsql (809448134, Qu Xuan) region: support aws waf label (144ffbf59, Qu Xuan) region: expand the bridge field (3ba9adeea, rainzm) region: de-duplication when obtaining the number of hosts (21285f753, rainzm) region: optimized vm account name code (45667bffe, Qu Xuan) region: avoid using LocalTaskworker in time-consuming synchronization of cloudaccount (ea790cc82, rainzm) region: sync auzre subscription health status (75f7188bc, Qu Xuan) region: gofmt fix (f11938559, TangBin) region: sync azure waf instance (67e393b67, Qu Xuan) region: allow ipmi probe when probe fail (848a5b9a1, Qiu Jian) region: avoid aws waf sync lost id (d881abf9a, Qu Xuan) region: make cloudprovider sync worker configurable (10793b985, rainzm) region: kafka usage (ca7989c76, Qu Xuan) region: avoid network create failed when vpc is ok but wire not sync (63a2faea7, Qu Xuan) region: add egress_mbps params for lb (dd427a014, Qu Xuan) region: rds network sync (b8c443263, Qu Xuan) region: return rds networks info (155b03652, Qu Xuan) region: admin update without verification (38debd386, rainzm) region: return disk type (5d1b90793, Qu Xuan) region: avoid panic when sync resources (568687c43, Qu Xuan) region: add more usage metrics, e.g. ports.eip, servers.last_week, pending_delete_servers.last_week (e76a84a01, Qiu Jian) region: allow owner to operate snapshotpolicy cache (1eb493b11, rainzm) region: show storage capacity to project users (d6f588c5c, Qiu Jian) region: waf cloud resources (fe84e0f0e, Qu Xuan) region: make SScheduledTaskLabel implement IJointModelManager (bc9264b1c, rainzm) region: aliyun kafka delete (7cfbaaf0e, Qu Xuan) region: use special localtask to run time-consuming provider synchronization task (520fae50a, rainzm) region: aws sts assume role fail break account initialization (9f81122cb, Qiu Jian) region: optimized azure rebuild root (35f76875e, Qu Xuan) region: avoid set multi resources tags failed (ea8638b0c, Qu Xuan) region: avoid panic when locking (3485be17e, rainzm) region: sync aws waf default action (42046aaf6, Qu Xuan) region: sync multi region resource at same time (acad67555, Qu Xuan) region: qcloud elb https listener create fix (dea9f77a2, tangbin) region: azure quota sync (9193558e0, Qu Xuan) region: update qcloud secgroup rule (4f8942974, Qu Xuan) region: account arrears (f233311cc, Qu Xuan) region: aws lb create tags param (4f8ebb8d0, lvyangyang) region: add all.servers.any_pool/all.hosts.any_pool metrics (86c282c0a, Qiu Jian) region: cpu desc too long (e82228ac1, Qu Xuan) region: cloudregion\u0026zone add namei18n (ea7ea1f08, TangBin) region: add qcloud memcached sync (f615862db, Qu Xuan) region: tag list key case insensitive (3e3e9b7cf, Qu Xuan) region: openstack ip pre allocate (6b2999e15, Qu Xuan) region: fetch zone before syncing promise cloud provider storages (84f2e555e, rainzm) region: update swagger api (fa5d5a6eb, Qu Xuan) region: raise GetNamedNetworkConfiguration error (cc5bc646b, Zexi Li) region: including domain info in project-role results (42b40b8e2, Qiu Jian) region: scoped policy filter by project id (7613e287e, Qiu Jian) region: prevent the creation of redundant network segments when managing vmware (b02a8a4ee, rainzm) region: avoid storage update not work (9c520ee7a, Qu Xuan) region: baremetal spec condition (e3a15c04d, Zexi Li) region: aws sync vpc access mode bugfix (01d5977bd, TangBin) region: remove i18n fix \u0026 zone \u0026region name support i18n (b67be9b0d, TangBin) region: download cached image from source host before migrating (3a6e7f55a, Zexi Li) region: mongodb sync fix (b5a45e853, Qu Xuan) region: cloud provider filter by domain_id ignore private case (18d495f10, Qiu Jian) region: mongodb sync fix (b5d0467bd, Qu Xuan) region: baremetal server resued address nic count should be subtracted (71b16e5e9, Zexi Li) region: fail to update network gateway (2bca43bc5, Qiu Jian) region: cloud provider filter by domain (9b7796bb6, Qiu Jian) region: avoid panic when sync snapshot project (049cf670a, Qu Xuan) region: waf purge with account delete (71b0c07bc, Qu Xuan) region: baremetal server change ip address reuse (2d5e9b157, Zexi Li) region: allow domain admin to obtain ssh private keys (0e77703c7, rainzm) region: sync aliyun classic network ip addr (a0170df03, Qu Xuan) region: remove app gateway (9d6dc3540, Qu Xuan) region: add trans and mongodb backup list (3110923be, Qu Xuan) region: record sync cost time (7fc35d0e0, Qu Xuan) region: network eip stats not correct (a2ff5b38c, Qiu Jian) region: struct input for detach server network (95a9327d9, Qu Xuan) region: avoid get openstack hostid panic (6632d5f14, Qu Xuan) region: continue to sync the snapshots that are being created when syncing auto created snapshot (a96621043, rainzm) region: kafka purge (3ff012f8c, Qu Xuan) region: support nas tags (8db0a79fa, Qu Xuan) region: prohibit resizing the disk of a esxi vm with instance snapshots (a493c7022, rainzm) region: add resource statistics filter params (3a380377a, Qu Xuan) region: wire sql fix (e2efeece3, Qu Xuan) region: check whether guest is nil (74a8cc7f4, rainzm) region: sync openstack multi zone storages (a1501da0c, Qu Xuan) region: account aksk error (07f6771f2, Qu Xuan) region: format jd cloud balance (bc4d1d7b8, Qu Xuan) region: support project mapping (ff43472c6, Qu Xuan) region: not set baremetal is_maintenance when action is start (bf904da0f, Zexi Li) region: goimport fix (4cf354fcf, tb365) region: update huawei cloud stack update credential (d36878bbc, tb365) region: add azure new region (ada5fd0d1, Qu Xuan) region: add RequestRemoteUpdate for ESXiGuestDriver (2c26b6fb3, rainzm) region: redis change spec bugfix (e08c07bb8, tangbin) region: optimized qcloud error code (34c6c5257, Qu Xuan) region: aliyun request retry (0a06c7486, Qu Xuan) region: more details for get aws region error (b02fb7eac, Qu Xuan) region: fix rds tag set error (5882c2041, Qu Xuan) region: set redis reboot timeout to 30 mins (a8aa18f0d, tangbin) region: support peer secgroup (7417452ec, Qu Xuan) region: avoid not sync dns zone (da83837b6, Qu Xuan) region: aws rebuild instance os_arch mismatch fix (487539725, TangBin) region: qcloud quota sync (d1de64ce0, Qu Xuan) region: optimized aws cloudtrail sync (941ff2992, Qu Xuan) region: aliyun nas endpoint (b725729f0, Qu Xuan) region: baremetal server reuse ip address condition (ab33fcc37, Zexi Li) region: set next stage for start vm (39dfce961, Qu Xuan) region: add azure sql server (89f06f2f1, Qu Xuan) region: maintain compatibility with webhook notify (ff47f8177, rainzm) region: pull the network correctly (b3d876a6c, rainzm) region: ignore qcloud vm start error (1c27836c7, Qu Xuan) region: host search by any ip (b459bc7e8, Qiu Jian) region: optimzed guest disks (8c21558fe, Qu Xuan) region: aliyun vpc endpoint (7f37398ae, Qu Xuan) region: openstack network is regional (d38b7ce46, Qu Xuan) region: optimized sku sched clear (65d52dbab, Qu Xuan) region: return sql error (f664cc25a, Qu Xuan) region: remove snapshots checking for huawei cloud while delete server (113ef352c, TangBin) region: use the previous method for guest notification instead of message subscription (f5008a432, rainzm) region: allow update sku status (d35206bf1, Qu Xuan) region: fetch wires correctly (2283caa46, rainzm) region: delete dirty network (11c0bc826, Qu Xuan) region: optimized server sku sku (ec45559d3, Qu Xuan) region: mongodb misc fix (d2b19ae00, Qu Xuan) region: aws sync disk missing image id fix (7a861689f, TangBin) region: send webhook notification when delete dbinstance (4a83028f7, rainzm) region: azure vm disk size (b6d1029c7, Qu Xuan) region: hcso regional eip (a0d43326d, Qu Xuan) region: bucket size stats should not count invalid sizes of -1 (0733e4575, Qiu Jian) region: delete not exist disk failed (5aa26cd36, Qu Xuan) region: optimized secgroup rule sync (d0cc334ca, Qu Xuan) region: skip cloud image sync error (5aa763fd0, Qu Xuan) region: send webhook when the creation task is completely completed (f3e3a94ed, rainzm) region: mongodb zone\u0026network sync fix (aa493f6c8, Qu Xuan) region: project mapping optional (0fbbe57e4, 屈轩) region: check the global network situation when expanding the network (5906cf8a0, rainzm) region: add option auto reconcile backup servers (37a479075, wanyaoqi) region: avoid sync huawei unusable account (38266154b, Qu Xuan) region: delete virtual nics with network (f78fa04b1, Qu Xuan) region: check whether the disks of the instance snapshot is empty when creating vm (2d725011d, rainzm) region: filter resource by classic vpc (6bb9098d0, Qu Xuan) region: avoid update tags task loop (965315ac7, Qu Xuan) region: ctyun delete secgroup fix (33b0517d4, TangBin) region: skip disabled project mapping (711fbb6c3, Qu Xuan) region: more accounts details for project mapping (a33179e76, Qu Xuan) region: avoid azure secgroup sync removed (d83bc8477, Qu Xuan) region: check sku request error (b12c26587, Qu Xuan) region: return region sql error (e79abc5d6, Qu Xuan) region: add host_id options for storage filter (4fcbef3e7, Qu Xuan) region: avoid stuck at http request (e59ae6c41, Qu Xuan) region: add huawei credit amount check (86bd47d3f, Qu Xuan) region: add aliyun credit amount check (1d641f8b1, Qu Xuan) region: secgroup priority fix (e7407d368, Qu Xuan) region: avoid worker discarded after state unchanged (74eeb43e4, Qu Xuan) region: sync azure rds memeory (3488515fb, Qu Xuan) region: purge snapshot with not status check (7b7ed59dd, Qu Xuan) region: optimized secgroup rule sync (48b03cbaa, Qu Xuan) region: avoid aws session not assume role (6456fa3af, Qu Xuan) region: check sku request error (74f0d51ae, Qu Xuan) region: exported number of vpcs less than listed (0868fc815, Qiu Jian) region: add project and domain info for project mapping rules (9d6813cee, Qu Xuan) region: vpcpeering error message translation (8cf11aa3f, lvyangyang) region: huawei cloud sync vm os arch (fffe8c650, tb365) region: aws not support create server with public ip (1e3d38acc, Qu Xuan) region: azure sqlserver dtu (68bb75b41, Qu Xuan) region: empty aliyun resource tag (82b9cdc1c, Qu Xuan) region: avoid only query one guest disk (e7502720a, Qu Xuan) region: avoid clean all rules when sync secgroups (17c33bd45, Qu Xuan) region: apsara optimized (dc673a80d, Qu Xuan) region: azure uniform tags (ef70a95da, Qu Xuan) region: cloudaccount: allow only one sync func in flight (76d3c4833, Yousong Zhou) region: lb resource count (7e838d61b, Qu Xuan) region: restrict account project mapping (8907dd4e8, Qu Xuan) region: show azure deploy failed error (f8d58a4ed, Qu Xuan) region: aws vpc network eip disk tags sync (920369021, Qu Xuan) region: fix zstack delete server with local disks (0d38de3d0, Qu Xuan) region: lb cert name fix (2252e1951, tb365) region: sync with multi worker (345f78621, Qu Xuan) region: azure default subscription id (bb9140708, Qu Xuan) region: translation errors (314d664ff, Qu Xuan) region: optimized azure aliyun qcloud tags sync (d1c34a60c, Qu Xuan) region: migrate use rescue mode (72d779c1b, Zexi Li) region: manager distinct field (bda473751, Qu Xuan) region: adjust the query range corresponding to the alarm strategy (56e9d9576, rainzm) region: avoid azure detach disk failed (bec909943, Qu Xuan) region: update google latitude and langtitude (4c6cc713f, Qu Xuan) region: optimized disk eip snapshot project sync (e80be2b58, Qu Xuan) region: sync cloudpods secgroup (baa48550d, Qu Xuan) region: project sync condition (ec72fbbcc, Qu Xuan) region: lbcert cache clean duplicate data fix (9cfc6a1e5, tb365) region: clean schedule cache when host add or delete netif (574e1f3cd, Zexi Li) region: optimized azure reset linux pasword (2bc4e7798, Qu Xuan) region: split provider tag sync (4af24a292, Qu Xuan) region: fix aws json unmarshal error (4a2e3e066, Qu Xuan) region: disable public cloud ip pre allocate (a7c9ba376, Qu Xuan) region: AWS buckets in us-east-1 have null location (029d2fa27, Qiu Jian) region: add project filter for cloudprovider (8ab645e60, Qu Xuan) region: update tags status (af4f07822, lvyangyang) region: avoid deadlock when resize disk (30800f732, Qu Xuan) region: tag bugs fix -azure tags replace/refresh -tags action logs -忽略创建中主机的metadate同步任务 (481e176ea, lvyangyang) region: ignore qcloud bw pkg error (502718ec1, Qu Xuan) region: allow guest network zero bandwidth limit (ab496d0e4, Zexi Li) region: show project mapping managers info (b5cc187ec, Qu Xuan) region: resource count for cachedimages (b19715d45, Qu Xuan) region: lb local cert sync fix (daf496a5b, tb365) region: enable zstack allocate ip by itself (f1d422e85, Qu Xuan) region: aws elb backendgroup sync bugfix (97192c3af, tangbin) region: add status resource statistic (aef09a050, Qu Xuan) region: avoid vmware sync hosts panic (0a5ec5248, Qu Xuan) region: avoid cachedimage never be in sync when it deleted (31aec9f96, Qu Xuan) region: huawei disk tags (7b6f28eef, Qu Xuan) region: optimized for qcloud prepaid instance delete (374b56adb, Qu Xuan) region: allowed to manually refresh cloudimage (c226568ec, Qu Xuan) region: avoid guest delete not with disks (b5aa64d91, Qu Xuan) region: qcloud bandwidth pkg (4763059f7, Qu Xuan) region: avoid auzre request timeout (0ba310062, Qu Xuan) region: try to find mediumType matched storage when create disk for kvm (38582f5f9, Zexi Li) region: avoid panic when register service not work (89296df81, Qu Xuan) region: sync cachedimage info (4c3d736a1, Qu Xuan) region: aliyun support public ip (88bf0333e, Qu Xuan) region: replace cloud tags (9014be05a, lvyangyang) region: sync tags with new guest (e461f87a9, Qu Xuan) region: support cloudprovider bind project mapping (1bc8e3845, Qu Xuan) region: validate disk status when create snapshot (82af2f702, Qu Xuan) region: server start check host memory is enough (7a684d347, wanyaoqi) region: check instancesnapshot in correct place when resize disk (297d905d4, rainzm) region: rds list with secgorups info (0f0c0eb5a, Qu Xuan) region: obtain ProviderFactory correctly (ab3c7d914, rainzm) region: aliyun rds network sync (f89c9b933, Qu Xuan) region: skip server migrate quota check (ba25d3910, Qu Xuan) region: validate attached disk size and backend (90cc8250b, Qu Xuan) region: cdn misc fix (08c5f3c81, Qu Xuan) region: omit vpc quota check if vpc created by owner (90f40d47c, Qiu Jian) region: purge private cloud sku (b21903a32, Qu Xuan) region: handle the error of RequestGuestCreateAllDisks (4dd1ecc79, rainzm) region: avoid index out of range panic (df26704b3, Qu Xuan) region: support rds secgroup operation (bc90e4fc4, Qu Xuan) region,host: sync status check block jobs (5e2d34642, wanyaoqi) region,scheduler: filter enabled skus (4a6474caf, Qu Xuan) region,scheduler: baremetal reuse ip (49749609b, Zexi Li) scheduler: storage medium type should not exact match (#10190) (3bb48e937, Jian Qiu) scheduler: make option EnableQuotaCheck work (a34e59f21, rainzm) scheduler: baremetal network free address out of count (c8facc948, Zexi Li) telegraf: megactl raid add rebuild status (ff644319c, zhaoxiangchun) telegraf-raid-plugin: add image-telegraf-raid-plugin in Makefile (9a3310b92, zhaoxiangchun) vendor: github dependabot alerts (375d8bf4b, Zexi Li) vendor: use creack/pty v1.1.11 to adapt go 1.15 (f0862574d, Zexi Li) webconsole: aliyun vnc windows ctl+alt+del (1498e69e4, Qu Xuan) webconsole: add jdcloud vnc (c1be18524, Qu Xuan) wire: init and change status (be5d6ca77, rainzm)  Bugfix (1)  monitor: 导出信息中添加全局字典配置 (3ba8168a6, zhaoxiangchun)  Build (12)  ansibleserver: use ansibleserver-base:v1.0.3 (de402bcf2, Yousong Zhou) ansibleserver-base: v1.0.3: add sshpass (a0d066ab0, Yousong Zhou) cloudproxy: add dockerfile (e3e51731a, Yousong Zhou) y18n: add apigateway (eb84a308a, Yousong Zhou) skip y18n-check for now (89f541fca, Yousong Zhou) add y18n-check, y18n-gen (131723cbe, Yousong Zhou) use centos-build:1.1-4 (de7a88bf3, Yousong Zhou) docker: add ModName (39461740d, Yousong Zhou) docker: move to Makefile.common.mk (431f2e87e, Yousong Zhou) docker: align centos variant with the alpine one (bfe4d2a73, Yousong Zhou) docker: make target GOARCH/GOOS/CGO_ENABLED aware (8997ae39f, Yousong Zhou) docker: remove GOFLAGS export (2cd6f1274, Yousong Zhou)  Chore (1)  utils: add deb build script (429b87266, wanyaoqi)  Climc (4)  add commands server-make-sshable, server-make-sshable-cmd (1e330e8f3, Yousong Zhou) compute: add command server-sshable (a16cea6fa, Yousong Zhou) add commands for cloudproxy (1bcaa9b3f, Yousong Zhou) costreports: fix bad struct tag (9e1ec4438, Yousong Zhou)  Cloudproxy (18)  agent: no collision between ports of ssh conn and forwards (f6271885c, Yousong Zhou) agent: refresh every 11 seconds (a4d35457c, Yousong Zhou) agent: ssh: wait ssh conn state while passing it out (1457b37c7, Yousong Zhou) test proxy endpoint connectivity and remote config (cba91b54d, Yousong Zhou) agent: more verbose log for ssh connect failure (1a93f26dd, Yousong Zhou) agent: wait a while on connect error (d5f162787, Yousong Zhou) forwards: show details for fwd returned from create-from-server (532961f52, Yousong Zhou) proxy_endpoints: create-from-server: allow name as arg (675fe334f, Yousong Zhou) agent: return when ctx is Done (cd14aa111, Yousong Zhou) agent: avoid stallment caused by client timeout (bd2122357, Yousong Zhou) agent: ssh: cancel on return from Start (a4697d081, Yousong Zhou) add metadata model (43f48e6b3, Yousong Zhou) agent: fix possible invalid memory access (d57e2d249, Yousong Zhou) agent: use yunion.io/x/onecloud/pkg/util/ssh (8ee597818, Yousong Zhou) forwards: more list filter conditional keys (e3a54dcfd, Yousong Zhou) apis: add ForwardDetails definition (43a4cc6be, Yousong Zhou) agent: refresh bindAddr, advertiseAddr when needed (d9b3d3ee8, Yousong Zhou) initial version (22145cbe0, Yousong Zhou)  Code Refactoring (2)  climc: use shell.NewResourceCmd for notice (45159e2ec, rainzm) climc: remove dependence for yunion.io/x/pkg/cloudcommon/db (a68888979, rainzm)  Db (1)  add GetItemDetails (627ea8ccc, Yousong Zhou)  Etcd (1)  fix “fatal error: concurrent map writes” (651c4b687, Yousong Zhou)  Feature (9)  allow server switch network without service interruption (0d3cfac32, Qiu Jian) support Google Oauth2.0 (f08ea8b2c, Qiu Jian) add a standalone dhcp relay service (f5a1522ab, Qiu Jian) climc: support put objects in directory (b264a0eba, Qiu Jian) climc: add policy-clone command (dcfb2f322, Qiu Jian) climc: policy save data into file (d02d82963, Qiu Jian) compute: allow live migration with checking Host CPU modes (3944d9ce0, Qiu Jian) region: support AWS organization (567990df1, Qiu Jian) region: sync cloud tags to local user tags (#9752) (376dfa44d, Jian Qiu)  Features (198)  add interface INetworkNicCountGetter (cc5b93ea4, rainzm) add nas sync (8639e95a3, Qu Xuan) support jdcloud pull monitor metric (81da6c3af, zhaoxiangchun) support JDCloud (Host read only) (00f94399f, rainzm) update host-deployer-base from 0.6 to 1.0 (3db8adc38, rainzm) support EventNotify (b45edf2f1, rainzm) change go version from 1.12 to 1.13 in go.mod (31c23b45b, rainzm) call EventNotify when event occurs (c67bd977e, rainzm) use yunion’s customized version of telegraf in file-repo (0e06f9c6c, rainzm) support install monitor agent in baremetal (83b73bf63, rainzm) update file-repo version (bbb95343e, rainzm) hcso sku sync (963cc7fac, Qu Xuan) ansible: add rolePublic and timeout options (8b3e591cf, rainzm) ansibleserver: update file_reop version in dockerfile (ac06c8fb1, rainzm) ansibleserver: record running cmd to debug (33e45e46c, Zexi Li) ansibleserver: add reference and instance (f8f99365a, rainzm) ansibleserver: respect keepTmpdir when running ansibleplaybook v1 (0894df5e1, rainzm) ansibleserver: update file-repo to v0.3.3 and use telegraf 1.19.2 (754551ce9, Zexi Li) apigateway: support export dict keys (557fd96cc, Qu Xuan) apigateway: differentiate error messages when logging in (d67ded441, rainzm) arm64,build: arm 编译时,不编译 rbdcli (a54becaf2, Zhang Dongliang) baremetal: support H3C oem baremetal (3a3675108, Zexi Li) baremetal: support management of none BMC host (6c5bba7dd, Zexi Li) baremetal: add UEFI related util (ef7bc9e09, Zexi Li) build: update glance and torrent base image (3b11bda68, Zexi Li) build: change file repo version in Dockerfile.ansibleserver (95412c129, rainzm) build: make multi arch manifest docker image (44d6c90a1, Zexi Li) build: update ansibleserver dockerfile (e49a25adb, Zexi Li) climc: k8s cluster addon add enable native ip alloc option (8234510a5, Zexi Li) climc: add operation of app and appenvironment (cd79e2d4a, rainzm) climc: register billsanalysis climc (ba50eed63, zhaoxiangchun) climc: add enable monitor minio component command (78f3853c0, Zexi Li) climc: update meter dimension climc (cff9cbc2f, zhaoxiangchun) climc: add Port-Forward SSH in server-ssh (d5298db0b, Stargic) climc: wires: allow filter by bandwidth (57eceae70, Yousong Zhou) climc: add SSH through EIP in server-ssh (d42b2a6dd, Stargic) cloudcommon: set TaskNotifyUrl in GetTaskRequestHeader (f7add5530, rainzm) cloudcommon: expand notifyclient (7357b6e0a, rainzm) cloudcommon: move ignore_nonrunning_guests option to common (e9b0203da, Zexi Li) cloudcommon: add rolecache (f352cf4e3, rainzm) cloudcommon: opslog: log joint models (0cfc5f231, Yousong Zhou) cloudcommon: send it directly if there is no template corresponding to the topic (8316dadb0, rainzm) cloudcommon: send message with mobile in NotifyWithTag (1c3eea688, rainzm) cloudid: add azure saml (627503cdc, Qu Xuan) cloudmon: support huaweistack monitor metric (a6f5b047d, zhaoxiangchun) cloudmon: support HuaweiCloudStack rds metric (1df2e03b7, zhaoxiangchun) cloudmon: add cloudmon component (8fa4e577d, zhaoxiangchun) cloudproxy: add GetDetailsLastseen for forwards (f261db7ae, rainzm) db: progressive inspection when determining the required scope (cc11aed9e, rainzm) devtool: makes the process of installing the agent more rigorous (fd458a603, rainzm) devtool: add script (1cc917e98, rainzm) devtool: support batch applying for virtual machines (39d93ebb9, rainzm) devtool: add some tags (0d33ecd28, rainzm) devtool: check sshable before applying ansible playbook for server (7e452712e, rainzm) devtool: use server forward direct for guest with kvm hypervisor (955cf6500, rainzm) devtool: add ScriptApplyId fro ScriptApplyRecord (f246e6679, rainzm) docker: inject playbook and telegraf installation packages (4250b1475, rainzm) esxi: update guest os info (0d5a44155, rainzm) esxi: support iso when creating vm (cd97edf07, rainzm) esxi: reduce the number of requests and the amount of data transferred (9a114b5fe, rainzm) esxi: change parameters for NewDiskDev and avoid unnecessary deploy (f71f1d831, rainzm) esxi: disable sync cloudimage from image cache (17db82c1e, rainzm) esxi: fetch vmware network configuration info (e4fc71eca, rainzm) esxiagent: determine vs by bridge and network when creating vm (4be58eef5, rainzm) fetcherfs: make rpm and deb package (811730e7c, Zexi Li) github: add document issue template (9790f54b7, Zexi Li) github: update github PR and issue template (2b475685e, Zexi Li) glance: support backend storage s3 (a48f0040a, wanyaoqi) glance: image support filter by os_type and distribution (3b235402a, Zexi Li) host: adjust qemu args to support aarch64 (3b2160552, Zexi Li) host: support netplan configuration (02e57f7e8, Zexi Li) host: add openEuler rootFs driver (6e8993a22, Zexi Li) host: aware of kubelet eviction config (e770f4f65, Zexi Li) hostdeployer: change UserAdd to CheckOrAddUser (941b6df11, rainzm) hostdeployer: find vg name and id via pv (de60724ba, rainzm) hostdeployer: change the way fo GetLoginAccount in windows (6e164070d, rainzm) hostman: options: add sdn_allow_conntrack_invalid (9ddb01a95, Yousong Zhou) keystone: add GetDefaultAdminSession (41139dc72, rainzm) keystone: support filter ‘project_domain_id’ in role_assignments (334a47e38, rainzm) keystone: support alertNotify when abnormal login occur (274729eb5, rainzm) keystone: more specific error return during authentication (1c325f747, rainzm) keystone: support projectDomainId in SAssignmentManager.FetchAll (2a0e36a43, rainzm) keystone: add options to set admin and domain admin role to notify (349db2dce, rainzm) keystone,apigateway: return a readable message when the user is locked or disabled (c5223f913, rainzm) locale: update (b83c26f1f, rainzm) mcclient: add k8s cluster monitor component disable option (28eb0ab98, Zexi Li) mcclient: add bills dimension climc (79f08937a, zhaoxiangchun) mcclient,itsm: modify itsm mcclient rpc func (2bae6527d, zhaoxiangchun) misc: update build and service base image to use go v1.15.15 (d0dd242bc, Zexi Li) monitor: update monitor resource overview (0919c2ee3, zhaoxiangchun) monitor: query reduce percentile (fa29f3d9b, zhaoxiangchun) monitor: add agent monitor metric (4c932ee96, zhaoxiangchun) monitor: influxQuery add P95 reduce (64e587f97, zhaoxiangchun) monitor: Lists the records that are currently alarting (aedf73f14, zhaoxiangchun) monitor: add storage monitor metric (8685e9619, zhaoxiangchun) monitor: add ext mysql,rabbitmq,redis metric (e9f3def6e, zhaoxiangchun) monitor: support temperature metrics (9ff03af40, Zexi Li) monitor: add jenkins metric desc (589c80356, zhaoxiangchun) monitor: support monitor overview influxdb query pass through (33975b5c1, zhaoxiangchun) monitor: monitor alert policy add mobile notify (5c2d88c6d, zhaoxiangchun) monitor: meter相关报警内容处理 (70c9dd397, zhaoxiangchun) monitor: alert add silent period param (352fc030e, zhaoxiangchun) monitor: alert record add silentPeriod info (730c13b83, zhaoxiangchun) monitor: add dashboard and panel clone (65f0f6143, zhaoxiangchun) monitor: monitor add trigger value when send notify info (0e7a04350, zhaoxiangchun) monitor: alert policy filter by res_type (e37ee880f, zhaoxiangchun) monitor: get today alerting resource info (e8442bea6, zhaoxiangchun) monitor: support monitor shield (805c80370, zhaoxiangchun) monitor: monitor alertRecord support set shield (0a7c58711, zhaoxiangchun) monitor: 处理编排mysql，redis，rabbitmq 相关监控 (edaf51e5d, zhaoxiangchun) multicloud: add JdcloudTags (4783fb754, rainzm) multicloud: support webapp for azure (64f5e0943, rainzm) multicloud: add snapshots list for ecloud (85c761e02, rainzm) notify: add template about topic USER_LOGIN_EXCEPTION (f8bace5b4, rainzm) notify: filter all recipients in this domain and recipients who have joined projects in this domain (ed5dac624, rainzm) notify: send notifications of different templates according to language (76e7aa401, rainzm) notify: 管理后台新建的联系人，手机号和邮箱无需进行校验 (623f1f17f, rainzm) notify: Gets the available notification types for the receiver (f59101335, rainzm) notify: add params for create notification (51f0e6f10, rainzm) notify: advanced notify config and robot (1d1bb6c38, rainzm) notify: mandatory update of VERIFY and USER_LOGIN_EXCEPTION templates (f6a2bbe9b, rainzm) notify: add save api for notify template (0b3f18830, rainzm) notify: show only users under the domain in the recipient details of the message (052b017cf, rainzm) notify: topic and subscriber at the domain level (04d930ab2, rainzm) notify: delete the notification 1 month ago and remove the data migration (4ef01d432, rainzm) notify: exempt the administrator to update the receiver verification (a9f3392e7, rainzm) notify: filter receivers who join the project under the domain where the requester is currently located (c88d01598, rainzm) notify: remove disk’s event notify for now (fd7b2a7ff, rainzm) notify: be compatible with mobile in event notify (c7b8d88d7, rainzm) notify: clean data for receiver_notifications (36bae206a, rainzm) notify: add action ‘change_ipaddr’ for notify topic (763058946, rainzm) notify: add receivers query in receivers/get-types (9058aecac, rainzm) notify: support international mobile (019e70f60, rainzm) notify: add local template (a6b24e373, rainzm) notify: add subscription in notify (3719b8b7f, rainzm) notify: verification email style optimization (195e3c5c6, rainzm) notify: adjust subscribers when deleting bots and recipients (066efeea6, rainzm) notify: compatible with webhook configuration (83ac62965, rainzm) notify: change default verify expire interval 5m =\u003e 2m (beb6ad860, rainzm) notify: add default area code for mobile (70c767c10, rainzm) notify: add ResourceAttributionName for subscriber (c2d7dd6a4, rainzm) notify,region: improvement of news subscription (311d0efb8, rainzm) region: add cloudpods (6a735d485, Qu Xuan) region: support merging mutli wires to a wire (a4d3d5fa3, rainzm) region: sync Esxi HostWire for esxi host (e2bbb4e73, rainzm) region: support synchronize vmware’s network configuration to the local (cef91402f, rainzm) region: check whether the esxi host is ip or domain name (6af6c8167, rainzm) region: remove webhook notify in guest.PostUpdate (cb335c108, rainzm) region: add ecloud monitor metric (4365c28ae, zhaoxiangchun) region: add options DeleteSnapshotExpiredRelease (91e45883a, rainzm) region: aws elasticahe (36e5c9ccf, lvyangyang) region: add host count when list wires (6309e2da8, rainzm) region: nat op support (b21e6ff25, Qu Xuan) region: disks and eip delete with server (108d6827e, Qu Xuan) region: add server delete options (a9ea3839d, Qu Xuan) region: add host_type filter for listing wires (47da51e04, rainzm) region: add App and AppEnvironment (f8e53027d, rainzm) region: add host_type filter for listing network (2d7fba494, rainzm) region: add tags implement (8641e9232, lvyangyang) region: wire: allow filter by bandwidth (2fe912f51, Yousong Zhou) region: add status count filter by params (d7f4eafee, Qu Xuan) region: azure rds (1755f55c8, lvyangyang) region: set metadata for guest with agent installed (e20fd94b5, rainzm) region: add kafka sync (d725cf059, Qu Xuan) region: return forwardDetails when query server sshable (9a651dad3, rainzm) region: support merging wire (2177b6211, rainzm) region: allow to update account with provider vmware (be1f33c60, rainzm) region: add azure redis (59eb84fb2, Qu Xuan) region: nat op support (22937c4af, Qu Xuan) region: add zone disk capability api (d4255d71e, TangBin) region: increase the log for debugging when syncing cloudimage (d7224cd06, rainzm) region: add direct field for vpc (9c2502db8, rainzm) region: support Ecloud (readonly) (77457fbae, rainzm) region: host list order by server count (ac491f4f5, Zexi Li) region: filter schedtags from cloudprovider_id (f8c7abf37, rainzm) region: cloudregion add disk capability api (65b597566, TangBin) region: add mongodb (69a6aedf1, Qu Xuan) region: add ProhibitRefreshingCloudImage for options (9f0fdb291, rainzm) region: add server migration predication API (ff7c514f5, Zexi Li) region: support jd cloud rds (11f1f9756, Qu Xuan) region: add qcloud cdn (3ce18ea71, Qu Xuan) region: add wire info in HostNetwork details (01ce700ec, rainzm) region: waf (f3dbe3367, Qu Xuan) region: disable synchronization of some special storage (8009ca8d7, rainzm) region: make DeleteSnapshotExpiredRelease applies to postpaid vm (763086d62, rainzm) region: virtually display the esxiagent of the cached image as a host (961d6e484, rainzm) region: support elasticsearch sync (021f5d924, Qu Xuan) region: stop guest before freeze (fa077dbe9, wanyaoqi) region: add app gateway resource (77c8d9f78, Qu Xuan) region: be compatible with changes in monitor api in scaling group (e347d6a51, rainzm) region: multilingual timer description (c4b6d7e64, rainzm) region: server sku os_arch \u0026 cpu_arch checking (0413898aa, tangbin) scheduler: optimize the speed of network predicate (bf977bb74, rainzm) suggestion,apigateway: add analysispredict climc (788a5df8b, zhaoxiangchun) suggestion,mcclient: add suggestsysalert-delete climc (28858d947, zhaoxiangchun) util: support uint64 in bitmap (f204b5e60, rainzm) vpcs: list: add order_by_network_count (95a5af1c1, Yousong Zhou) yunionapi: pre login hook fix (6f91fa7a4, tb365)  Fi (1)  region: avoid opslog without resource id (7fc23cb68, Qu Xuan)  Guest_deploy_task (1)  log other deploy details with i18n (e40ca53b6, Yousong Zhou)  Guests (3)  sshable: fix breaking out from wait loop (59f99c653, Yousong Zhou) sshable: wait and retry for newly created forward (ce98d7dd1, Yousong Zhou) sshable: log error should unmarshal fail (1c18dbb7d, Yousong Zhou)  Hostman (1)  ovn: do not set external_ids:iface-id for backup (db89640df, Yousong Zhou)  Keystone (1)  reword error messages (a71c87547, Yousong Zhou)  Locales (4)  generate (78a6ebd57, Yousong Zhou) zh-CN: add some translations (b66ccd78a, Yousong Zhou) regenerate locales.go (a17d88c78, Yousong Zhou) zh-CN: regenerate messages.gotext.json (d18f612af, Yousong Zhou)  Mcclient (3)  models: Server: add fields for eip and nics (8ab1db998, Yousong Zhou) Sshkeypairs: add FetchPrivateKey (21032a1df, Yousong Zhou) auth: add SessionCache (87f93c287, Yousong Zhou)  Networks (1)  server_type: do not allow update (d54fdf6e7, Yousong Zhou)  Optimized (1)  region: qcloud bucket policy set and get operation (fbd5be2fd, Qu Xuan)  Others (61)  hcso support sync vm host (afe7f5d82, tb365) fix(monitor):fix monitor query top 5 (c24c923a8, zhaoxiangchun) add azure capacity (972bdb8e7, tb365) huawei cloud getInstanceByIP add ip filter (5ca544400, tb365) zone list timeout fix (cfae94871, tb365) ProviderFactory add method IsMultiTenant (7b579e80c, tb365) add default dns for subnet (444ebd952, tb365) huawei cloud stack client fix (682a27633, tb365) huawei client update (88efcda2f, tb365) add host type count api (7aa8802a1, tb365) add meter cost conversion (afd560c6f, bistuzx@163.com) minor fixes (fe1dd1daa, Qiu Jian) azure health check fix (05729f87f, tb365) azure lb sync listener frontip fix (9d0f27f73, tb365) update vendor (a83ff5bf9, tb365) minor fixes (788ad518c, Qiu Jian) azure elb support sync ip backend (5649af219, tb365) azure application lb sync fix (be5aeda1b, tb365) azure lb global id to lowercase (a0a5d088d, tb365) lb backend group details add lb_listener_count (eb5556943, tb365) update OWNERS (75a745368, Zexi Li) support azure elb sync (bb10f3ef3, tb365) Create CODE_OF_CONDUCT.md (d0a7d89f3, Jian Qiu) feat(monitor) 3.7 add monitor resource overview (4ac004215, zhaoxiangchun) add module billing exchange rate (f88ea19a7, bistuzx@163.com) README.md: update icon URLs (98d5fb072, Yousong Zhou) add secgroup-list (bbbcadced, rainzm) update vendor (928a801c8, rainzm) add jdcloud reigon\u0026host\u0026guest driver (458ff4662, tb365) add jd cloud constants (4c369d19f, tb365) avoid log loss when token expired fix #10738 (05716c7d7, Qu Xuan) fix wire status close #10737 (be0117dd7, Qu Xuan) Update feature_request.md (625118057, Zexi Li) Update bug_report.md (6aa8aa269, Zexi Li) response scope-specific metrics (8dff78422, Qiu Jian) fix(monitor):修复监控总览图标钻取后返回数据异常的问题 (1391839ad, zhaoxiangchun) fix(region) qcloud multi zone instance sync account fix (ebdb9fbc9, tangbin) feat(region) qcloud redis support multi zones (33285eb77, tangbin) copyright update brand_cn\u0026brand_en fix (ff51bf449, tangbin) infos copyright add brand_en\u0026brand_cn (e27737037, tangbin) redis update tags fix (c45573b77, tangbin) aws change flavor fix (dac711343, TangBin) server create sku parameter fix (176f32e80, TangBin) change os_arch_arm to os_arch_aarch64 (03d96ca48, tangbin) update vendor (340b914db, rainzm) host 编译跨平台兼容 (c7782f240, Zhang Dongliang) imagetools NormalizeImageInfo update (dba28b7fa, TangBin) warp aws err with errors.Wrap (3f4094e9d, TangBin) add cost report module (b803de070, bistuzx@163.com) server skus filter by mem size fix (0511cc0c7, tangbin) loadbalancer add lb purge validate (bc960367a, tangbin) add budget set alert log (a2ddd9358, bistuzx@163.com) fix reservation columns (d5d72a977, bistuzx@163.com) add cost\u0026prepaid_cost to reservation (5f7d84872, bistuzx@163.com) fix budget import format (6af676b93, bistuzx@163.com) fix reservation import format (005ed23fa, bistuzx@163.com) add meter budget\u0026event\u0026reservation module (4bd398db5, bistuzx@163.com) .circleci: use centos-build:1.1-4 (dfc9b4393, Yousong Zhou) scripts/docker_push.sh: minor polishments (d37762578, Yousong Zhou) scripts/docker_push.sh: use toplevel Makefile target (aa45c158c, Yousong Zhou) scripts/coverage.sh: detect use of “-mod vendor” (e01492df4, Yousong Zhou)  Procutils (4)  WaitZombieLoop: remove unneeded info request (709ddccc2, Yousong Zhou) WaitZombieLoop: less verbose iota (f970e22b9, Yousong Zhou) WaitZombieLoop: use const str “1” for my pid (26013e66b, Yousong Zhou) add WaitZombieLoop (a1044c1af, Yousong Zhou)  Refact (1)  region: resource tags (68cf1eaea, lvyangyang)  Region (16)  guests: sshable: more compact make-sshable-cmd (5b2fe2100, Yousong Zhou) guests: sshable: add GET /servers//make-sshable-cmd (264c58073, Yousong Zhou) guests: sshable: add POST /servers//make-sshable (b090a63c3, Yousong Zhou) guests: sshable: add field sshable_last_state (cba83b48a, Yousong Zhou) guests: sshable: refactor for reusability (98489ca03, Yousong Zhou) guests: sshable: only check sshable state when in running state (460e54c91, Yousong Zhou) guests: sshable: return early on sshable=true (ba71fcaaa, Yousong Zhou) guests: sshable: more friendly fail reason for proxy_forward (012df167d, Yousong Zhou) guests: add GET /servers//sshable (d34091127, Yousong Zhou) apis: route: add nexthop type “IP” (98cd08bac, Yousong Zhou) fix setting nic index (5ede377c8, Yousong Zhou) attachnetwork: allow attach by network name (5fda85f83, Yousong Zhou) usages: add [{all,domain}.]networks etc. (79a4f27ec, Yousong Zhou) wires: totalCountQ: filter networks by scope and owner (b471c727a, Yousong Zhou) usages: fix field name of vpcs for system scope (aa60527b8, Yousong Zhou) fix error msg for invalid wire_level_for_vmware (ce05e5290, Yousong Zhou)  Regions (1)  lbagents: move pb update/create as mcclient module method (cc7ffd707, Yousong Zhou)  Treewide (1)  wait possible zombies (3a18af8d7, Yousong Zhou)  Util (1)  ssh: add ConnectContext method for ClientConfig (bbd2114f9, Yousong Zhou)  Validators (1)  set xx_id when possible (2f7bd7a7a, Yousong Zhou)  Vpcagent (6)  ovn: fix port match condition formation (c800b240d, Yousong Zhou) ovn: fix qos for eip upload (e5a44d2b6, Yousong Zhou) ovn: add ClaimRoutes (bf5ef89a9, Yousong Zhou) ovn: resolveRoutes from API models (5fd1c309c, Yousong Zhou) models: annotate guest with guestnetworks (1b2878d69, Yousong Zhou) models: add route tables (3b8e4811b, Yousong Zhou)  Webconsole (1)  wait zombies (f519b88f6, Yousong Zhou)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n43 commits to cloudpods-operator - v3.8.0 since this release.\nApigateway (2)  cors: rename spec field name to corsHosts (cd56410, Yousong Zhou) allow setting cors_hosts (15fa2b1, Yousong Zhou)  Bug Fixes (19)  default policy name should be separated by dash (3f6cfc3, Qiu Jian) raid plugin: raid status fix (ad34504, zhaoxiangchun) update vendor (aa53086, Qiu Jian) update process.total name (c182e81, zhaoxiangchun) update system commonalert param (069f1da, zhaoxiangchun) update raid-plugin image tag (557553b, zhaoxiangchun) cloudmon timeout fix (f5e1f64, zhaoxiangchun) make system roles private (9376cb6, Qiu Jian) access_url of common service config (d3ffcfd, Zexi Li) fail to init policy (07c0408, Qiu Jian) update vendor (0dcc5d2, Qiu Jian) build: update vendor (f18a924, Zexi Li) cloudmon: crond commond fmt err (98a21dc, zhaoxiangchun) glance: comment s3 switch logical (be1c5c9, Zexi Li) glance: s3 endpoint should use domain resolve (0f5438f, Zexi Li) minio: disable minio component when status is fail (6b95148, Zexi Li) monitor: raid卡监控规则status过滤参数调整 (ffe5273, zhaoxiangchun) operator: modify crontab default interval (977e222, zhaoxiangchun) region: let region server system init resources only once (233c6fb, Zexi Li)  Features (15)  add process common alert policy (218503c, zhaoxiangchun) init devtool script and ansible reference for devtool (ff793ee, rainzm) deploy minio (cb8e727, Zexi Li) support jdcloud monitor metric (18fdf83, zhaoxiangchun) support HuaweiCloudStack rds metric (009e560, zhaoxiangchun) build: support multi arch docker image (0343a32, Zexi Li) cloudmon: support HuaweiCloudStack metric (cf4989a, zhaoxiangchun) cloudmon: add storage monitor metric config and modify cloudmon config infection func (27f1f15, zhaoxiangchun) cloudmon: update cloudmon component image info (7a390f5, zhaoxiangchun) cloudmon: add cloudmon alertrecord crontab (16d16e5, zhaoxiangchun) crd: support inject imagePullSecrets (9ee00e5, Zexi Li) glance: add minio support (e37d8b6, wanyaoqi) k8s: enable kubeserver (90ccd61, Zexi Li) monitor-stack: add monitor stack component (dee274f, Zexi Li) operator: set default resources limits for each component (38914e4, Zexi Li)  Others (6)  update vendor (f0b98aa, Qiu Jian) feat：add jdcloud rds metric (a113f84, zhaoxiangchun) update manifest version to v3.7.5 (87770c0, Zexi Li) update vendor (ba527ad, rainzm) Add cloudproxy (9c6acee, Yousong Zhou) update vendor (5af2ebd, Qiu Jian)  Vendor (1)  bump to current tip of release/3.7 (e85056c, Yousong Zhou)   cloudpods-service-operator Repo: https://github.com/yunionio/cloudpods-service-operator\n1 commits to cloudpods-service-operator - v3.8.0 since this release.\nFeatures (1)  build: support arm64 build (c817154, Zexi Li)   dashboard Repo: https://github.com/yunionio/dashboard\n516 commits to dashboard - v3.8.0 since this release.\nBug Fixes (126)  dashboard public default config (88aea0f0e, mj) cdn action (f272a5cae, Qu Xuan) add cdn permission (dd8f3a13a, Qu Xuan) cdn menu and permission (c5e1a88ee, Qu Xuan) menu icon (f7c4d4465, dongliping) cdn domain info (af59ec05e, Qu Xuan) webapp status (8c5a269ba, mj) webapp and i18n (83daec04e, mj) 账单访问信息引用字段错误，应为关联账号 (dab853cc5, mj) azure dtu (59527a01e, Qu Xuan) webapp (3ed7f2db4, mj) add OWNERS (0bc7bc257, Zexi Li) nas create fix (b69000ff7, Qu Xuan) nas misc fix (0cef00e75, Qu Xuan) enable hcso saml auth (5b6bcb2ee, Qu Xuan) variable errors when list without details (d516ad3e8, Qiu Jian) action policy (2191e10fe, Qu Xuan) misc fixed for cloudbox (a2842b754, Qiu Jian) access group details (32f6da42d, Qu Xuan) format gb for nas capacity (67e260957, Qu Xuan) change route global config repeat relod (d3537b948, mj) update redis status i18n (fc8e452a1, mj) 修复主机创建系统盘容量检测问题 (a56bec06d, mj) init xterm for cloudshell, needs more work (4796c01b7, Qiu Jian) close socket when close cloud shell (4b5dad6d4, Qiu Jian) show file system tags (b21f17589, Qu Xuan) enable openstack vm migrate (a118e8ef5, Qu Xuan) 云账号导出的参数项应与自定义列表的参数项一致，目前缺少域、项目等信息 (193336115, mj) 项目选项更新时，显示不全 (30357fd1f, mj) server price comparator provider (44f2a7e67, mj) server statics filter (6f9cd09bf, mj) optimized distinct filed filter (f9b7bf05d, Qu Xuan) vpc创建参数修复，及速度优化 (2d547989f, Qu Xuan) support update sku postpaid and prepaid status (7f0efb288, Qu Xuan) xterm fit (1603de154, houjiazong) cloudShell UE improvements (5ad66571c, houjiazong)   add cloud SSO and update password to user menu 2. fix monitor translation issue (6e09b37d9, Qiu Jian)   管理后台登录时，相应项目寻找失败 (3693a1ed2, mj) 配额开关打开，域和项目详情页仍然没有配额信息 (ebc902456, mj) add cloudpods guide (f3a89fc45, Qu Xuan) remove debug info (41ecf9f8e, Qu Xuan) storage providers missing generic S3 providers (824b96939, mj) improve prompt when no host/accoutns available (8a6fd7032, Qiu Jian) support replaceAll for lower broswer (f09e90c01, mj) rds field show (659960c75, Qu Xuan) eslint rule (ee69e7170, mj) hidden bill in public (941ebb5e8, mj) rds details (0a2ec3f29, Qu Xuan) network edit style (06fffddfe, gaomingjiu@yunion.cn) disk type (3428f2153, mj) add qcloud tdsql (6757c815d, Qu Xuan) add jdcloud rds trans (d96e9f5c1, Qu Xuan) add jdcloud disaster category (e9bd81656, Qu Xuan) menu i18n (f90cdff50, mj) refine baremetal nic list info and set up l2 wire logic (c18cd024e, Qiu Jian) init cloudshell in apigateway (54e392863, Qiu Jian) Cloudenv/AwsHuawei: #7431 创建天翼云云账号，开启免密登录时创建报错 (0ea5af172, mj) Compute: #10789 baremetal install sys with zone and region error (e328c4237, mj) Compute/AdjustConfig: 调整配置磁盘显示问题 (1152e1a74, mj) Compute/AdjustConfig: 调整配置磁盘显示问题 (a79a2018d, mj) Compute/Host: host access ip i18n (e7005cb47, mj) Compute/vminstance: #7471 京东云链接vnc按钮不应该禁用，且提示信息不对 (155c8c21b, mj) Compute/vminstance: #7471 移动云链接vnc按钮不应该禁用，且提示信息不对 (9ea62e219, mj) Disk: #7450 VMware主机同步磁盘状态后状态为未知，再次同步主机状态，磁盘状态正常 (857ad71e8, mj) DiskCreate: split error (302a75500, mj) Locales: image save fail i18n (e53ed2a1b, mj) Navbar: no project loading (acc44951d, mj) Network: #7264 1366*768分辨率（14寸）创建VPC页面样式显示不全 (c52c509f2, mj) Network: #7449 VMware不支持主机修改IP (45e5ca6da, mj) Network: 新建IP子网，无法选择平台 (c3f670e73, mj) Network: update cloudregion params (33e0370ca, mj) Notify: notice refresh (6c207ab1e, mj) OsSelect: #7261 创建vmware虚拟机时，vmware平台镜像vm-test应该归属于RHEL，不应该归属于linux (db63800e5, mj) OsSelect: #7274 从ISO启动的windows系统vmware虚拟机重装系统选择windows系统时无法选中，前端报错 (9f511e9c8, mj) OsSelect: select instance snapshot params and console error (3ad4cfaac, mj) SearchBox: #7430 云上日志使用时间范围过滤，此前、此后这两种情况点击确定前端报错 (8d8e7407a, mj) SearchBox: change date filter error (cb8cbfdd8, mj) SearchBox: search mutiple error (81d0f9259, mj) SearchInput: update search input placehoder i18n (0a0499da6, mj) ServerPassword: 使用主机快照创建主机，不应该显示设置密码的输入框 (1beacbdfa, mj) ServerPassword: 主机快照默认选中保留镜像设置且不支持更改类型 (41be20264, mj) SkuList: #3134 批量设置销售状态位置修改 (cd8c47fdd, mj) Tag: identity tag params (2cf18965f, mj) Tag: identity tag details api version (32bc683e7, mj) TagFilter: update tag filter (195d20f40, mj) TagSelect: add max-width (87a9a59da, mj) TagTableColumn: #7435 列表鼠标hover标签icon时，只展示user的标签，不展示ext的 (f0a0c89e3, mj) ThirdProcess: comment show empty (edb4076bc, mj) Vpc: 新建vpc无法切换域 (845025160, mj) Xterm: refresh page method error (6cddf8180, mj) bill: fix bill overview overflow tilte (2142e2f33, GuoLiBin6) cloudenv: modify api for clouduser userselect (e794fb495, GuoLiBin6) cloudenv: update scope params (85af40a2e, mj) cloudenv: add success tip when account sync success (69ec92314, GuoLiBin6) cloudenv: change cloudenv resource_name field (bab3f2acb, GuoLiBin6) cloudenv: add account domain check (e64233a2b, GuoLiBin6) cloudenv: cloudgroup list add domain filter (6bbc75694, GuoLiBin6) cloudenv: bind local user (496fe4962, GuoLiBin6) compute: transfer i18n (2d539298c, songdengju) compute: add data disk backend (3c7a1ab83, mj) compute: 修复功能选择vmware，没有显示主机快照菜单 (bdd7db3f0, mj) compute: no use network fill error (372258d65, mj) compute: add network default params limit (bc11a48f2, mj) compute: 网络切换到自动调度后弹性公网IP使用默认，不支持新建 (ce284434d, mj) compute: os select backfill (0ad4b1860, mj) compute/createServer: eslint error (bf4bc54b3, mj) dashboard: modify i18n in userinfo panel (249b939df, GuoLiBin6) dashboard: fix global search pagenation (ee80af409, GuoLiBin6) dashboard: price \u0026 aliyun elb create fix (3de61f61f, tangbin) dashboard: modify userInfo panel username (73a4d8c81, GuoLiBin6) dashboard: env,brand,region remove default value (71158160f, mj) db: mongodb event-drawer add filter (b8398537d, GuoLiBin6) db: modify db router hidden (533598b7f, GuoLiBin6) db: fix can’t show network when dependent parameters are updated (rds-create) (96f772620, GuoLiBin6) eslint: update eslint rule (270bafb4c, mj) eslint: update eslint rule (f2d2d9532, mj) helm: get chart by version (36427f1d6, Zexi Li) host: 宿主机详情的type签应该不变 (6c2f0f8c0, mj) i18n: add ecloud i18n (0799dc0ea, mj) k8s: ingresses manager get rawdata (c09b23dad, Zexi Li) k8s: service create selector (9cc8c66f1, Zexi Li) network: fix waf show text (1dff3bf60, GuoLiBin6) rds: After recovery action to refresh rds list (8b0bc6ee8, GuoLiBin6) utils: add details check before the secend fetch (007d3eecb, GuoLiBin6) workflow: 通过主机工单创建虚拟机失败，工单详情中缺少查看失败原因的链接 (6730e5020, mj) workflow: 工单走到系统管理员，待我审批中当前环节错误 (2a2e6cf8a, mj)  Bugfix (15)  cloudenv: modify projectmapping aciton scope (cf71ad0fe, GuoLiBin6) cloudenv: add project-mapping menu hidden (89c95e2be, GuoLiBin6) cloudenv: show sort column title (64324a507, GuoLiBin6) cloudenv: project mapping (66aa47bfb, GuoLiBin6) clouduser: delete extra title in clouduser (bdaaf13c5, GuoLiBin6) compute: close vminstance filter(vmem_size \u0026 disk) (3c2d75733, GuoLiBin6) compute: fix osselect imageselect (2db84ef08, GuoLiBin6) compute: restore arch column (c81e9f8f9, GuoLiBin6) dashboard: adjust echart (10a47262b, GuoLiBin6) k8s: show detail list (1e0973ac9, GuoLiBin6) navbar: change notifyPopover visiable (373c0a2e8, GuoLiBin6) projectmapping: modify detail sidepage (d10a08e1f, GuoLiBin6) projectmapping: modify tags validate when the tags value is undefined (7545e5b28, GuoLiBin6) sku: add sku update default checked (fcb1ec962, GuoLiBin6) vminstance: modify Cumpute vminstance label (7e21cdacf, dongliping)  Code Refactoring (1)  monitor: vminstance and baremetal sidepage (9e8bdbb13, Zexi Li)  Feature (21)  request list without details first and then with details (df38c3bc3, Qiu Jian) support Google OIDC IDP (276076512, Qiu Jian) add a eip sidepage to server (e7577fd66, Qiu Jian) bill: add budget tags (7fdcd399c, GuoLiBin6) cloudenv: config router (ab9b2ecde, GuoLiBin6) cloudenv: delete-pricecomparator-list-sync (034995df1, GuoLiBin6) cloudenv: add project-mapping function (cf24e6ed8, GuoLiBin6) clouduser: add Cloud Account in SamluserList (ff20d6ae9, root) compute: fix compute datadisk type (929ff5000, GuoLiBin6) compute: add delete disk\u0026instance options (8e1bdc19a, GuoLiBin6) compute: add #vm sort (ded830de7, GuoLiBin6) cumpute: add cumpute vminstance filter (7de0f1825, 郭丽斌) dashboard: add quota sort (7e55548b3, GuoLiBin6) dashboard: add dashboard metric url (a7b6628c0, GuoLiBin6) host: add host vm sortable (e8ccb17d1, GuoLiBin6) scope: config menu list (a407d110f, GuoLiBin6) scope: fix feishu verify (4ecaeeefd, GuoLiBin6) scope: smaluser action (903489452, GuoLiBin6) system: add project instance snapshots (f12ebd543, GuoLiBin6) tag: expend tagcolumn (659ae641d, GuoLiBin6) vminstance: modify default checked on deletevm (ecfbbd99c, GuoLiBin6)  Features (106)  add back index time (2dc3d4150, mj) update font (1c57393a9, dongliping) update icon (936a33545, dongliping) update ui style (c410209da, gaomingjiu@yunion.cn) update params and i18n (e4e3e79d7, dongliping) add cdn (38b850bc1, Qu Xuan) remove refresh (aa91e70f8, mj) update menu icon and refresh i18n (bc7591f81, mj) update dashbord icon (fc4f2a237, gaomingjiu@yunion.cn) update logo (5bc780059, mj) server data mac loading (75c64e167, mj) server data sync loading (6d338ab48, mj) page list column data loading (ebaf44040, mj) server data sync loading (dca0bfa70, mj) add hcso (a6afbecb4, Qu Xuan) add github PR template (b9e7c5360, Zexi Li) update openeuler image icon (5ef85d9fa, mj) add bill global config (e55fa1c35, mj) hidden yaml tpl (edb89bab3, mj) add kafka (44e02e9b6, Qu Xuan) 支持数据自定义处理 (3380b684b, mj) RDS、REDIS列表增加状态统计 (0f65ec993, mj) remove component register (88541309b, mj) update 计算模块资源增加状态统计条 (e435f5b9a, mj) 物理机列表增加状态统计 (2b11d93ad, mj) webapp只有选择azure平台展示及UI策略支持 (dd7b05c13, mj) add elastic search (033930880, Qu Xuan) update webapp (d12afda42, mj) add webapp icon (5488a1c4e, mj) update webapp i18n (0996f4a0a, mj) update webapp (b4644f87e, mj) add webapp (b2e6a35ad, mj) support ext tag control (9a6fffc05, mj) host add statistics (baecdd9cd, mj) add baremetal statics (9ede67a5e, mj) update nav projects (adba89149, mj) 优化下拉选择框在内容过多时无法有效查看信息 (87b4f765d, mj) 二次定价支持对账单类型进行限制 (b3cbcc04e, mj) add cloudpods (a2066d098, Qu Xuan) add external_id support (e8c09d942, mj) BaseDialog: add dialog drag (503bf5b13, mj) Cloudaccount: add jdcloud support bill (dd1c25be7, mj) Cloudenv: 只有管理后台下展示提示信息 (fe7206b4c, mj) Compute: vm addbackup add forcast (e3b717695, mj) Compute: server list action add permission (8c9462cfc, mj) Compute: vm transfer add forcast (b3b8787d2, mj) Compute: update transfer host i18n (aba1be9f0, mj) Compute: vm addbackup add forcast (d6afc0512, mj) Compute/SnapshotPolicy: #2608 快照策略批量关联硬盘 (42721986f, mj) Compute/snapshotpolicy: 快照策略批量关联硬盘参数处理 (d793f1a09, mj) Host/Storage: add single actions in host sidepage storage (fc1f2b416, mj) Logo: 开源版logo替换为cloudpod的logo (479233f99, mj) Network: add vlan id filter (78e52272a, mj) OcSelect: update OcSelect Component (ee603a86f, mj) OcSelect: add OcSelect component (8bd922bc3, mj) OcSelect: add OcSelect component (240e5eafe, mj) OcSelect: update OcSelelct Component (1180ba9d2, mj) OcTerm: 优化CloudShell拖拽卡顿问题 (68f3aca18, mj) OcTerm: update octerm (f3217ed51, mj) OcTerm: update octerm style (acb87a0c7, mj) Page: change website title (af5e69b81, mj) ProjectMapping: update sync policy support bind subscription (10904a80d, mj) ProjectMapping: sync policysupport bind subscription (05f637e7c, mj) ProjectMapping: update sync policy support bind subscription (f669a5b7f, mj) ProjectMapping: update sync policy support bind subscription (2d3da9ab5, mj) ResStatusTab: 列表返回各状态的资源数量，方便用户统计、分析 (0eb8491ad, mj) ResStatusTab: update interface (465c96c58, mj) ResStatusTab: update res status tab (3fe2cabe7, mj) ResStatusTab: update i18n (517d4591f, mj) ServerNetwork: support i18n (399519a64, mj) ServerNetwork: 调整主机创建网络部分使用OcSelect组件 (3910c79a9, mj) Tag: add identity tag (e0c2a033d, mj) Tag: add permission support (959899425, mj) TagDetailColumn: add permission support (921820fd0, mj) TagFilter: 标签增加优化，支持选择同一个key不同的value (6aa731864, mj) TagSelect: #3087 标签的复杂搜索，支持contains, startswith, endswith, not (f22c9e83f, mj) TagSelect: support min-width (99c53985a, mj) bill: adjust bill currency opts (c1ba19afb, GuoLiBin6) bill: add suggestion i18n (63f6a2a69, mj) build: add makefile (df73e8563, Zexi Li) cloudaccount: add account filter (b43816589, GuoLiBin6) cloudaccount: account column add cloudprovider (c3d4b8105, GuoLiBin6) cloudaccount: jdcloud account support bill tasks (d2a68b0ba, GuoLiBin6) cloudenv: cloudprovider support delete (ae18c87c4, GuoLiBin6) cloudenv,monitor: update receivers params for domain mode (a757f7d6e, mj) cloudenv,monitor: update receivers params for domain mode (1077e6a78, mj) compute: support modify disk driver and cache mode (a2158afca, GuoLiBin6) compute: add medium_type for kvm local disk (164766708, GuoLiBin6) compute, network: add action permission (2cb451784, mj) constants: add exchange rate status in i18n (9f9973763, GuoLiBin6) curency: 巴西币种支持 (19c46c9b4, mj) currency: 增加全局币种映射常量 (49a63cc59, mj) dashboard: add userinfo panel (2822e97e7, GuoLiBin6) dashboard: modify currency opts (d7a852449, GuoLiBin6) dashboard: modify more to icon (d575558ea, GuoLiBin6) db: add mongodb (206f9fa13, GuoLiBin6) github: update PR template (957ba0274, Zexi Li) i18n: 移动云文案处理 (0233046dd, mj) i18n: vm instance (5fa763e39, mj) image: update web-base image to v3.6.1 (f7a3a8171, Zexi Li) monitor: temperature monitor (a3846e9e8, Zexi Li) monitor: extend alert record (464584b8f, GuoLiBin6) network: show waf resource name (4aee8586c, GuoLiBin6) rds: rds recovery (6d07beb61, GuoLiBin6) readme: update README (995cb0c5b, Zexi Li) suggestion: update i18n (c0f764afe, mj)  Fit (1)  add cloudpods vm op (a4ff2ed00, Qu Xuan)  Optimized (1)  middleware (c5264ee5b, Qu Xuan)  Others (245)  华为云Stack删除主机同时删除硬盘等 (3bd42d76a, GuoLiBin6) rds details page add hcso (fc121340c, tb365) 恢复磁贴限制 (f412d0cc1, GuoLiBin6) 调整首页样式 (98c2ce015, GuoLiBin6) hcso create vm add cloudprovider (d08647051, tb365) image overview summary (eee1d628c, tb365) image list add getOsTypeFilter (1667ed392, tb365) basic monitor chart add mem used percent (000f63534, tb365) robots label (9a79341d4, tb365) 修磁贴内容多溢出问题 (e77d123b7, GuoLiBin6) monitor query data add limit offset (73944184f, tb365) monitor query data add limit offset (702dd3d33, tb365) SshProxyCreateForm change name to generate_name (2346a0ebe, tb365) add pe zh docs (b230ee870, tb365) monitoroverview watch scope change (4a60e08e2, tb365) batch install agent (7f8c43de3, tb365) update setup ssh form (0a533b8ff, tb365) add capacity (7fd17a97b, tb365) 调整dashboard磁贴样式 (82d6b3b7c, GuoLiBin6) 修改MongoDB备份列表展示 (383e42ca9, GuoLiBin6) ajust config fix (73b708a0d, tb365) add default dns setting (74ff22165, tb365) 添加资源翻译 (9783a697c, GuoLiBin6) add route (7649a191a, tb365) add cloudgroup for huaweicloudstack (e6970cc20, tb365) server price compare fix (a2d6e78bc, tb365) adjust config fix (6901644b3, tb365) 修复硬盘操作对华为私有云平台的验证 (ccb44aa4c, GuoLiBin6) add route for hcso (5dd4ed2d7, tb365) 修复编排-虚拟机实例无数据时默认值问题 (4ffb3fe23, GuoLiBin6) object download (6e299d470, tb365) huawei private cloud adjust config (18db04bf7, tb365) 调整mongodb实例类型 (17f7f5b4f, GuoLiBin6) mongodb去除访问方式 (b4687e0a1, GuoLiBin6) huawei cloud stack fix (3ada6adc5, tb365) huawei cloud stack fix (bf84e43c0, tb365) huawei private resources create actions (1728c7c52, tb365) 修复个人信息查询权限 (29876ba11, GuoLiBin6) 价格清单添加新建按钮 (b3ba10353, GuoLiBin6) MongoDB优化 (b368efbe1, GuoLiBin6) add huawei private cloud account create page (43b82d342, tb365) fix the secend fetch (8f56e9614, GuoLiBin6) 个人信息磁贴添加域 (2f91ee4cb, GuoLiBin6) feat(#2212): 新建主机时，选择平台，过滤相应的宿主机，用宿主机的网络来过滤可用的虚拟机网络 (b39bb3ea5, mj) totp qr image display fix (bb8e12315, tb365) 关联本地用户必填验证 (cbe06dc59, GuoLiBin6) 新建免密登录用户,默认显示自己 (a3eb90d21, GuoLiBin6) 修改英文翻译 (e134cdbc9, GuoLiBin6) 修改备份列表 (a63152632, GuoLiBin6) 修改文案大小写 (fa6e5a670, GuoLiBin6) 修改文案 (44de8c22e, GuoLiBin6) 修改文案 (a4aab36a8, GuoLiBin6) 尝试解决ext标签过滤问题 (bf0e637f3, GuoLiBin6) baremetal install agent (d03390e8f, tb365) cloudshell fix (3b0758220, tb365) 调整批量操作验证顺序 (b571454ff, GuoLiBin6) 修改云订阅删除验证顺序及提示文案 (bec13cd44, GuoLiBin6) 云订阅启用禁用添加弹框提示 (133de038e, GuoLiBin6) 修复多币种对控制面板的影响 (5281fa97a, GuoLiBin6) 添加云订阅删除的Azure平台限制 (f98c2e5b0, GuoLiBin6) 添加定时器清除,修改跳转地址 (1f30ed048, GuoLiBin6) 修复错误页因未跳转出现倒计时负数问题 (b3c93de74, GuoLiBin6) fix vue.config.js path errror (a2938cf39, tb365) disable google translator (3f6972ca4, tb365) import vue config from scope dictionary (3f2251453, tb365) 为top5磁贴添加跳转 (c01ba5fbf, GuoLiBin6) waf策略 (a0927629a, GuoLiBin6) waf条件 (305a31405, GuoLiBin6) dictionary add jenkins (b42378ef2, tb365) Adjust the order (73c201a75, tb365) add notify topic page (e793f6d9c, tb365) waf-statement (28e90b1b0, GuoLiBin6) translations fix (c420001d7, tb365) kvm install agent fix (06cd85fcb, tb365) summary-cards style fix (fddb5b85c, tb365) host overview card fix (95a46df08, tb365) overview card histogram chart fix (aa39a187c, tb365) host overview card fix (69eb67ca6, tb365) 忽略证书错误 (66a8e925f, tb365) alert history chart fix (a54f9711e, tb365) monitor overview card fix (9b2aea9fc, tb365) temp (3f503c564, GuoLiBin6) monitor alert contact channel fix (1251f4154, tb365) overview card fix (1c6cfd441, tb365) azure listener show front ip (5ddc7e42a, tb365) update 通知渠道设置 (a4258fc40, mj) 修改同步策略详情页icon (0fd6421dd, GuoLiBin6) license fix (96b375bcf, tb365) 去除误添加的公共tablefilter (bd0a91dbc, GuoLiBin6) 扩展列表搜索,添加资源类型搜索条件 (2b08440ae, GuoLiBin6) rds jdcloud monitor (201b1c21c, tb365) support azure elb sync (f59fb2528, tb365) vminstance monitor chart fix (bce15bfcd, tb365) fetch monitor pannel fix (9379fd99a, tb365) 列表扩展 (b2777b228, GuoLiBin6) monitor diskip chart fix (3e85a0f5a, tb365) commonalerts update fix (0e501211e, tb365) agent_diskio add selectFunction (5d3df9feb, tb365) agent_diskio add selectFunction (bb9e3379c, tb365) vminstance detail monitor page update (9efa39906, tb365) fix count error (cedd6b5c5, mj) monitor ring chart event fix (124e21ecf, tb365) update metric alert database fix (02579280c, tb365) add res status tab (86afe36ae, mj) adjust system route order (9c439d75a, tb365) vminstall basic info add agent install status (d622aa0a0, tb365) lbcert status icon fix (132bcf629, tb365) add features icons (f2ff3c2c7, tb365) 修改验证 (693970f93, GuoLiBin6) monitor overview add resource summary (557764696, tb365) 权限-扩展按钮权限验证 (c024b850f, GuoLiBin6) support license v4.0 (5600db04b, tb365) 修改磁贴展示金额单位 (ca4fda900, GuoLiBin6) 修改-资源消费占比磁贴首次添加不展示问题 (619541868, GuoLiBin6) 修改云账号-azure/aws-billing_scpte未选择时默认为managed (34633db39, GuoLiBin6) 多币种 (7a16c90c0, GuoLiBin6) 默认改为all (fcd47d85a, GuoLiBin6) 云账号-更新账单文件-azure添加账单分析范围 (906110481, GuoLiBin6) 修改磁贴位置 (6ae29fcfb, GuoLiBin6) 修复云账号详情页启用禁用 (299bd9130, GuoLiBin6) lbacl source ip desc fix (9c978e9b5, tb365) lb style update (9d1e860cd, tb365) add jd cloud docs link (e4ed9ddc1, tb365) install agent pe help link fix (4379e1d29, tb365) contact page update (e7610bf05, tb365) Update README-CN.md (45b25b6e3, Jian Qiu) Update README.md (64b5fb16b, Jian Qiu) 宿主机.云账号添加 删除 启用 禁用后同步刷新云资源信息 (118f1bafd, GuoLiBin6) 拆分导出的列表项 (371f467b4, GuoLiBin6) 修改宿主机及物理机导出列 (d3210da64, GuoLiBin6) 调整磁贴展示 (c7a44f8d5, GuoLiBin6) 样式 (0e22853fe, GuoLiBin6) 添加虚拟机关机不收费 (5bdd65183, GuoLiBin6) 调换磁贴位置 (738b88ef7, GuoLiBin6) 费用添加负数说明 (492ed5381, GuoLiBin6) 修改磁贴权限 (1e6a9f90a, GuoLiBin6) 添加云账号健康状态磁贴 (b1d551740, GuoLiBin6) 修改过滤条件 (14f4b9c5d, GuoLiBin6) 添加近30天告警与消费趋势柱状图 (8fb4a0c6a, GuoLiBin6) change network select helplink style (899eafaf1, tb365) 添加磁贴饼图 (27f4fbac2, GuoLiBin6) redis\u0026rds network select fix (6c7c41a6f, tb365) 修改磁盘-已挂载的磁盘-扩容接口 (cf5ad4c65, GuoLiBin6) 添加平台-列的排序筛选项 (cd1dc0b9a, GuoLiBin6) fix:移动云文案修改 (0363f0996, dongliping) server price compare fix (2d46d734d, tb365) redis\u0026rds network select add helplink (e7906fca5, tb365) base select add projects (a70df8e85, tb365) monitor line chart display fix (919fb0767, tb365) change jd cloud logo (bdbd5f4f6, tb365) support jd cloud (512d589c0, tb365) 修复-删除虚拟机参数丢失 (5d9d3d518, GuoLiBin6) 更新提示 (77aee97a1, GuoLiBin6) 修改匹配条件提示文案 (a931177a9, GuoLiBin6) loadbalancer listener rule add domain column (0a7ecba28, tb365) 详情页-标签扩展 (c368452a3, GuoLiBin6) price comparator fix (ab366837f, tb365) 添加匹配条件的默认值 (baf59ce95, GuoLiBin6) 添加标签支持修改 (216a92dfc, GuoLiBin6) common alert add default chart name (d9af982c8, tb365) dashboard chart save add default name (939d38db2, tb365) lbcert cache add common name \u0026 subject_alternative_names (8dc759cc8, tb365) 添加新建匹配条件的默认值 (030ae41db, GuoLiBin6) 添加已绑定云账号不可选中 (0d9f7b8b8, GuoLiBin6) 添加详情页操作组 (705af9ef3, GuoLiBin6) 修改标签key 修改规则删除保留之前的分割线 添加规则-规则管理的跳转 (415a6017d, GuoLiBin6) 修改-同步策略-更新-标签反显问题 (50825f457, GuoLiBin6) 修改同步策略删除时的提示文案 (a6f307295, GuoLiBin6) 添加标签个数限制及删除规则 (8393a4b15, GuoLiBin6) 优化 (41cfce0a0, GuoLiBin6) add month \u0026 year price (23c66a205, tb365) monitor query add metric translations for storage (3aa286521, tb365) monitor table add storage_name (f1dc04a45, tb365) 删除无用文件 (b909527e9, GuoLiBin6) 规则列支持扩展 (c46c553e0, GuoLiBin6) 修改过滤状态 (262daf990, GuoLiBin6) monitor query add metric translations for storage (21c1eb7c4, TangBin) create ucloud account support subaccount (b05adc214, TangBin) lbcert add is complete (11fd1b2e7, TangBin) dashboard table sort fix (d5ad62d6c, TangBin) dashboard default name fix (6ccbd5b4d, TangBin) dashboard overview table sort by number (8d1e126c3, TangBin) username tranlations fix (7e929dc0b, TangBin) ctyun not support create prepaid instance (517e24c92, TangBin) login chanllenge after login fix (4c73b5aef, TangBin) overview add event data loading (4b6b11d20, TangBin) delete vminstance temp (7a86ec444, GuoLiBin6) network list export add ports used (4870d29b6, TangBin) vminstall agent install fail reason (3789a8745, TangBin) vue router meta add propertity canRenderDefaultLayout (f3c2c2ab6, TangBin) network route hidden fix (2c1dc44cb, TangBin) monitor line chart add data smooth (731d02242, TangBin) scopedpolicybindings update (d766c6c04, TangBin) scopedpolicybindings update (375975317, TangBin) monitor line chart add scale (cb42876cb, TangBin) monitor line chart add scale (c0213b0ea, TangBin) monitor dashboard chart scope fix (3b01cc3cd, TangBin) rejust monitor ssh agent menus order (0a9bff721, TangBin) add agent trans (4320c888d, TangBin) line chart title fix (170deb576, TangBin) sys disk default size fix (9b0054b14, TangBin) image select image arch fix (7fd89fc19, TangBin) add price info scope (ef9209cb4, bistuzx) image select image arch fix (6379cd342, TangBin) fix disk price (8f1b5ec6d, bistuzx) image select image arch ifx (32ca51a3f, TangBin) add tooltips for ssh proxy endpoint create form (7b010238d, TangBin) domain project select fix (0a4026288, tangbin) hidden common alert tips while scope is projct (d5f0172c2, TangBin) public cloud image filter add os_arch (c0aeff014, TangBin) instance price comparator fix (161063116, TangBin) 修改成本优化英文 (ed88f6359, GuoLiBin6) 修改图标 (e3e9c3175, GuoLiBin6) global search hidden menus fix (9beb18e46, TangBin) setup altert for monitor charts fix (47a197904, TangBin) install agent form i18n fix (78879605e, TangBin) server-price-comparator capability fix (a66d57ebd, TangBin) update help link (77aae4aed, TangBin) windows not support install agent (75f477c80, TangBin) change security optimization to security inspection (d16aeb1d9, bistuzx) username tips fix (3571cba85, TangBin) sku add column cpu arch (7e75edef9, TangBin) setup ssh username tips (11b5e2a0f, TangBin) dashboard database fix (c28977081, TangBin) exporer dashboard create name repeated fix (6176348d3, TangBin) disk create domain fix (5a4921c63, TangBin) monitor dashboard domain select style fix (f9fbaf124, TangBin) ssh setup proxy validator fix (5b3986788, TangBin) ssh setup proxy validator fix (b6c6f7d7d, TangBin) add bucket not found warning to cloudaccount (2936567d0, bistuzx) domain fix (e7fd07451, TangBin) create monitor dashboard chart fix (cefa31628, TangBin) ssh proxy bugfix (b635bc564, TangBin) add proxy endpoint list tips (7962863c9, TangBin) add dock (72b6d31a6, TangBin) cloudproxy match scope vpc/network fetch (a9017ecee, TangBin) remove ssh proxy domain filter (dfa565fcc, TangBin) create ssh proxy title fix (b7758050e, TangBin) add ssh proxy batch delete (11ccb8724, TangBin) remove dashboard chart name repeat check (e294187e6, TangBin) hidden monitor dashboard fix (f5ee20081, TangBin) support ssh proxy (08d8fd008, tangbin) fix conflict (ea8839f26, mj) temp commit 20201231 (4b904a5e8, tangbin) temp (96b51ccff, tangbin)   kubecomps Repo: https://github.com/yunionio/kubecomps\n25 commits to kubecomps - v3.8.0 since this release.\nBug Fixes (12)  build: embed heml pkgs remove it (36636f7, Zexi Li) kubeserver: grafana inject system dashboard when ingress used (be9ac29, Zexi Li) kubeserver: chart_ignores use regexp (3fbcb9c, Zexi Li) kubeserver: clean up zombies (b94dc0c, Zexi Li) kubeserver: helm release resource object’s name and id missed (4fab9e2, Zexi Li) kubeserver: helm release resource list (b1a59d2, Zexi Li) kubeserver: helm repo remove (73df2be, Zexi Li) kubeserver: helm add repo already exists error (f3bd5c7, Zexi Li) kubeserver: import cluster input data unmarshal error (1c70127, Zexi Li) kubeserver: make system cluster resource getable (ed024dd, Zexi Li) kubeserver: sync cluster not fatal (d74b7d9, Zexi Li) kubeserver: cluster ca and key field nullable deleted (8da6044, Zexi Li)  Features (13)  build: go generate use vendor (e172ef3, Zexi Li) build: support arm64 build (6715da6, Zexi Li) kubeserver: resources limits for component (6d94271, Zexi Li) kubeserver: monitor component support disable (cc00d34, Zexi Li) kubeserver: update system cluster components setting (10839d5, Zexi Li) kubeserver: add monitor minio component (ad81bbf, Zexi Li) kubeserver: sync telegraf dashboard to system grafana (529615e, Zexi Li) kubeserver: add cluster precheck api (98c8d8a, Zexi Li) kubeserver: change configuration of minio (3e7aeff, Zexi Li) kubeserver: chart ignores options (f488734, Zexi Li) readme: add readme (b245c65, Zexi Li) readme: add build steps (39bdda4, Zexi Li) repo: repo url allow updated (51bbedd, Zexi Li)   notify-plugins Repo: https://github.com/yunionio/notify-plugins\n5 commits to notify-plugins - v3.8.0 since this release.\nBug Fixes (3)  build: build arm64 image (4a11361, Zexi Li) workwx: no user exist (41dc5d9, rainzm) worwx: return correctly when fetch contact (08c831e, rainzm)  Features (2)  adds domain attributes for notify config (77e72b7, rainzm) be compatible with notify’s change to support international mobile (caaa6ed, rainzm)   ocadm Repo: https://github.com/yunionio/ocadm\n13 commits to ocadm - v3.8.0 since this release.\nBug Fixes (7)  set operator imagePullPolicy IfNotPresent (9643215, Zexi Li) cluster: update vendor make build pass (76a69b5, Zexi Li) cluster: set OS_PROJECT_DOMAIN of cluster auth info (1096ccc, Zexi Li) git: 切分支例行更新 version tag (b7a0163, Zhang Dongliang) k8s,keepalived: 解决 k8s 高可用集群在部署时无法获取 nodeip 的问题 (1536c29, Zhang Dongliang) keepalived: 解决 高可用架构部署的默认网卡传递参数问题 (676a364, Zhang Dongliang) preflight: more accurate of mysql grant error (df3afb6, Zexi Li)  Features (4)  build: 增加arm 下编译 ocadm deb 的步骤(make deb)； 统一跨平台metrics-server 的 tag 名称；升级 k8s-sidecar 到 0.1.275 (d672ebe, Zhang Dongliang) calico,k8s,ovn: 部置calico-node时调整默认配置提升ovn隧道流量的性能 (c4a14ec, Zhang Dongliang) keepalived,ha: 新增 keepalived_interface 变量支持,以便在安装高可用多网卡情况下支持非默认网卡绑定 vip (866ef39, Zhang Dongliang) longhorn: support migrate to source pvc from longhorn pvc (2df20ec, wanyaoqi)  Misc (1)  vendor: update vendor to master branch (051f70f, Zexi Li)  Others (1)  update mod (0cc9f1e, TangBin)   sdnagent Repo: https://github.com/yunionio/sdnagent\n13 commits to sdnagent - v3.8.0 since this release.\nAgent (1)  ovn: ensure iptables fastpath for geneve traffics (352547c, Yousong Zhou)  Bug Fixes (2)  tc: aware of ingress qdisc (06a0244, Zexi Li) tcman: delete all qdiscs before batch replace (9f4715c, Zexi Li)  Build (2)  note on deploying ovs, ovn components (246ce3e, Yousong Zhou) reword README.md for deploying eipgw (a71f02e, Yousong Zhou)  Features (1)  build: make multi arch manifest docker image (591a93d, Zexi Li)  Flowsource (1)  allow conntrack invalid packets (f2e212e, Yousong Zhou)  Others (3)  ovn-md: ovnMdServer: local origNs (a3b8eae, Yousong Zhou) ovn-md: ovnMdServer: fix logging typo on Stop (bf4efbc, Yousong Zhou) .circleci: go test with “-mod vendor” (f59f416, Yousong Zhou)  Ovn (1)  mapped: fix possible traffic loop across different vpcs (b8c2af6, Yousong Zhou)  Utils (1)  guest: ignore “secgroup” or “secgroups” (394ccc0, Yousong Zhou)  Vendor (1)  bump to current tip of release/3.7 (bf49b2d, Yousong Zhou)  ","excerpt":"Release time: 2021-08-27 13:13:35\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.8/3-8-0/","title":"v3.8.0"},{"body":"发布时间 2021-08-27 13:13:35\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n995 commits to cloudpods - v3.8.0 since this release.\nAdd (1)  hcso iam (42fda4401, Qu Xuan)  Ansibleserver (2)  wait zombie subprocesses (89b4f6e9f, Yousong Zhou) use mcclient module method for fetching keypair info (44871c6b1, Yousong Zhou)  Apigateway (3)  handler: add cloudproxy (6137a3d45, Yousong Zhou) try return httperrors (ab7c5e039, Yousong Zhou) reword error messages (2d1d4f3dc, Yousong Zhou)  Apihelper (1)  move to yunion.io/x/onecloud/pkg/{vpcagent/,}apihelper (4c550665f, Yousong Zhou)  Bug Fixes (631)  actions domain filter by project doamin id (12bb6ac8e, Qu Xuan) openstack health should be normal (5ab3d3ab2, Qu Xuan) add reddit contact (cfd3a15b6, Qiu Jian) update README embed image (13f61a1d7, Qiu Jian) update README 20210610 (2354722cc, Qiu Jian) README improvement (cd1c24290, Qiu Jian) improve documentation (2cc64af6f, Qiu Jian) update README 20210610 (b4bb9c724, Qiu Jian) nas misc (e35c1d48b, Qu Xuan) improve readme (89a83dea5, Qiu Jian) 修复云账号和宿主机报警问题 (cf29c44bb, zhaoxiangchun) improve README (09e1e1ced, Qiu Jian) change site URL to www.cloudpods.org (#11396) (93d946816, Jian Qiu) hpssacli should skip empty slots (b7133f715, Qiu Jian) add default security group rules and priorities to JDCloud (276102a22, rainzm) do not resize LVM paritition and skip and return success (4e65ec00c, Qiu Jian) truncate columns longer than 512 bytes by default (4e76d3571, Qiu Jian) disable pretty table try os width by default (6b24c0600, Qiu Jian) support windows 2003 (56025bc55, Qiu Jian) windows resize file system (6c8b8441d, Qiu Jian) remove meter client codes (567856cad, Qiu Jian) get apigateway auth/regions with error of illegal mix of collations (a087863ab, Qiu Jian) dhcp classless route encoding error (381b7e694, Qiu Jian) adjust primary key length when sqlchemy utf8 default to utf8mb4 (6c66f8913, Qiu Jian) automatically setup object miemtype when uploading (e2e18efd1, Qiu Jian) aliyun lb charge type (7c4e4645b, Qu Xuan) add trans info (fdc8f8b3e, Qu Xuan) bill-tasks-create parameters (ae1894003, Qiu Jian) update README to add user list and bilibili URL (32bfd5211, Qiu Jian) optimized aliyun error (bef65e7d7, Qu Xuan) resolve conflict of climc docker build (49807175f, Qiu Jian) update README installation steps (f408012c9, Qiu Jian) init cloud shell by apigateway (ea6797c60, Qiu Jian) qcloud eip bandwidth (e088570af, Qu Xuan) missing yunionconf log (740b3c94a, Qiu Jian) add tag for databricks vm (12b72a6e1, Qu Xuan) routes to private prefixes should be distributed on private nic (3672f1bdd, Qiu Jian) update version of file-repo (13768a053, rainzm) secgroup cache policy (e806674a0, Qu Xuan) avoid return no data result (298179baa, Qu Xuan) validate secgroup references (d44403d69, Qu Xuan) resolve permission issues for samlusers and quotas (afe11dbee, Qiu Jian) get region nil pointer error (6815f63c1, Qiu Jian) add more organization command (c6cd80351, Qiu Jian) allow set server-disk cache mode as directsync (4fc194a1b, Qiu Jian) inter-vm traffic limited by eip bandwidth limit (93bceeafd, Qiu Jian) require password for imported user (896596731, Qiu Jian) get datacenter of host via GetDatacenter (e52a9a7ad, rainzm) avoid host worker is locked when image cache is deleted (b13cdefb7, Qu Xuan) optimized rbd storage input and update (f83b8b043, Qu Xuan) optimzed tag sync (68e28bfe4, Qu Xuan) private cloud sku attached disk count (73f952a5b, Qu Xuan) add nat sku provider filter (2af2a977b, Qu Xuan) add secgroup filter opts (169b1ec86, Qu Xuan) new aws region (432435e5b, Qu Xuan) optimized bucket tag (531e142a1, Qu Xuan) add nat sku policy (04ad3d4df, Qu Xuan) add cancel expire action (c3b80cb6b, Qu Xuan) support prepaid instance change config (cf0b2f556, Qu Xuan) simplify installation stes to two steps (09570b0f1, Qiu Jian) sync nat sku when sync cloudaccount (91abafe71, Qu Xuan) time sync duration (f9ce72ca6, Qu Xuan) migrate interface before commit desc (d3da7426f, Qiu Jian) add purge split log commands for cloudevent and cloudlog (c8e881874, Qiu Jian) aliyun public ip bandwidth (02fa0373b, Qu Xuan) aliyun tag list api (4d9f00772, Qu Xuan) optimize change vm config and prepaid change config (56948a97e, Qu Xuan) add bucket tooltip (db11d67f4, Qu Xuan) sync new project for azure resource group (11be3494c, Qu Xuan) 优化同步，避免长时间加锁 (f9f0c8f3c, ioito) optimzed tag update and sync (e71b6fce4, Qu Xuan) skip zone check when rds change config (6bd71f5eb, Qu Xuan) vpc public with nat (e1de34e9a, Qu Xuan) sync cloud tags when set tags (511111aec, Qu Xuan) qcloud bucket refer (113e2ab87, Qu Xuan) avoid double counting when compute networks nic count (7d2fadb84, rainzm) change rds config skip zone check (8eaa25625, Qu Xuan) optimized nat entry (20a64f934, Qu Xuan) purge splitable logs for cloudevents and logger (8f16f7eee, Qiu Jian) do not use ntfsresize to resize NTFS partition (179562bc4, Qiu Jian) avoid stop or start vm failed (e08a99061, Qu Xuan) nat sku env (0446859f0, Qu Xuan) add license upload (6b35605de, Qu Xuan) simplify SQL for distinct field query of tenant or domain names (a1d472d41, Qiu Jian) add qcloud get tags and remove unused interface (7c3c8bc2b, Qu Xuan) avoid panic when use idc vpc (e723b2418, Qu Xuan) add index for image_type (2218e4624, Qu Xuan) compatible with new io scheduler(bfq/mq-deadline) of new Linux kernel (0529327e1, Qiu Jian) remove qcloud region and zone prefix (adaf389bf, Qu Xuan) nat delete and create fix (45d3e8329, Qu Xuan) minor changes of LICENSE and README (#11553) (64af16114, Jian Qiu) add cloudroot as system account, so as not using normal user id (31b5866e4, Qiu Jian) qemu-img create disk may fail to preallocation=metadata enable for large disk (af03ed60e, Qiu Jian) sku zone (888c8c200, Qu Xuan) account auto sync time (6b89fb57e, Qu Xuan) peer secgroup rule fix (97f086cc2, Qu Xuan) nas for huawei (a3c676f7e, Qu Xuan) instance with eip charge type (f387f32fa, Qu Xuan) add region id params (8de1b3c69, Qu Xuan) nat sku domain policy (baacfddbd, Qu Xuan) cloudaccount auto sync (b9627f034, Qu Xuan) vendor update (a4b387dd2, Qu Xuan) avoid listener worker leak (2a4e80879, Qu Xuan) avoid update protocol with any faild (80580fa2e, Qu Xuan) before insert (7f8cf5adc, Qu Xuan) avoid panic (ab2fc8feb, Qu Xuan) secgroup cache reference (b7fe92f50, Qu Xuan) add options for pre allow ip add (5be136c9c, Qu Xuan) add rbdcli commond for debug (8a26d54a9, Qu Xuan) server migrate network to a vlan network (c53b87cc5, Qiu Jian) add codes to switch bridge of ovs port (58313432f, Qiu Jian) host detach wire not update netinterface (184a6a081, Qiu Jian) anisbleserver: support complex yaml config in ansibleplaybook_instance (9a01d83ee, rainzm) ansibleserver: add LF for privateKey if not (0d1f54bab, rainzm) ansibleserver: be compatible with empty params (67d7c571f, rainzm) ansibleserver: don’t init privateKey for ansibleplaybook if it already have one (cad24302d, rainzm) ansibleserver: correct playbook path (cb410623d, rainzm) apigateway: add auth/stats api to retrieve system info (#10181) (c96c0cc26, Jian Qiu) apigateway: ignore fetch IDP errors in getRegions (#10070) (b2e00a8ad, Jian Qiu) apigateway: recover remove apigateway locale messages (9628e1210, Qiu Jian) apigateway: totp passcode verify error code fix (c377f1972, tb365) apigateway: count city servers (613662c07, Qu Xuan) apigateway: add enable_quota_check and return-domain-list (#10158) (7191d9df1, Jian Qiu) apigateway: use info response service type of console endpoints (bfc522a89, Qiu Jian) apigateway: getRegions return value of api_server (217a54b9f, Qiu Jian) baremetal: nvme allocable (35e425889, Zexi Li) baremetal: close ssh test client (3f87a6fc6, Zexi Li) baremetal: use ipmitool power reset when redfish power on error (539f68309, Zexi Li) baremetal: use command timeout context replace timeout command (0bb78f1b4, Zexi Li) baremetal: inject mac when admin nic found (865e2671e, Zexi Li) baremetal: register baremetal name invalid (64878713e, Zexi Li) baremetal: compatible with SN empty of MegaRaid (625d1451f, Zexi Li) baremetal: sas2iru parse line (089594599, Zexi Li) baremetal: inject mac to cmdline (96dc4ca4d, Zexi Li) baremetal: remove bundle libs build (54250d3d8, Zexi Li) baremetal: baremetal ipmi probe reset link up state (55cfb0ba4, Qiu Jian) baremetal: megactl driver fail to find device by key (ffc67460b, Qiu Jian) baremetal: record uefi info (6179886b7, Zexi Li) baremetal: try channel 8 for default profile (fee2ef355, Qiu Jian) baremetal: increase ipmitool reboot sleep wait time (784e99690, Zexi Li) baremetal,esxiagent: no cloudroot user initialized (952cc03ae, Qiu Jian) baremetal-agent: baremetal will probe status in status unknown (b91e41e71, Qiu Jian) baremetal-agent: baremetal fail to stop due to power off soft failed (75d7b30d2, Qiu Jian) build: chage template of ‘Abnormal Login’ (d0fed292f, rainzm) build: build telegraf-raid-plugin (61c47dd39, Zexi Li) build: baremetal arm64 build (9617ca437, Zexi Li) build: DOCKER_CLI_EXPERIMENTAL=enabled (cac364054, Zexi Li) climc: mv climc rpm package .bashrc to /etc/profile.d/climc.sh (386b8e5c7, Zexi Li) climc: modify the code logic of starting “Port-Forward SSH” (0a48cde82, Stargic) climc: host add netif add params bridge/interface (cecd329fe, wanyaoqi) climc: add version list command (1f87214bb, Qu Xuan) climc: update climc-base image to 20210701 (3b06b4c0e, Zexi Li) climc: json tag (4bb922eb0, Qu Xuan) cloudcommon: splitable may not initialize underlying table (50a0d167f, Qiu Jian) cloudcommon: avoid service exit when etcd unreachable (c8966f7e8, Zexi Li) cloudcommon: remove unnecessary debug info (15ee20a4a, rainzm) cloudcommon: use NewGeneralError to construct error (ec4dfc471, rainzm) cloudcommon: missing set_meta opslog (#9914) (9a7b9bec2, Jian Qiu) cloudcommon: unify OS_ARCH constants (e82a3deb7, Zexi Li) cloudcommon: disable EventNotify for now (a28ff0400, rainzm) cloudcommon: use rbac authentication dedicated to the list interface in GetModelProperty (ed6f183db, rainzm) cloudcommon: add default domain of common options (29ef9d8ba, Zexi Li) cloudevent: hcso event fix (6f129378e, Qu Xuan) cloudevent: optimized cloudevent sync (aa0915b55, Qu Xuan) cloudevent: add distinct filed for cloudevent (cdd111ca0, Qu Xuan) cloudevent: default policy (874c5af09, Qu Xuan) cloudevent: hcso resource name (013b9b0e3, Qu Xuan) cloudevent: adjust cloudevents resource scope (7daa123c7, Qiu Jian) cloudevent: optimized cloudevent sql (8837b2d64, Qu Xuan) cloudevent: add aws cloudevent (ba5f19bc1, Qu Xuan) cloudevent: update aliyun lookupevent api (1fdf9031f, Qu Xuan) cloudevent: cloudevent is domain level resource (5610dd674, Qu Xuan) cloudid: add en-US html templte (39025c263, Qu Xuan) cloudid: remove debug code (814bec45f, Qu Xuan) cloudid: avoid sync clouduser twice (59e5e22b5, Qu Xuan) cloudid: hcso enable multi tenant saml provider (1eec6039e, Qu Xuan) cloudid: avoid duplicate create saml provider (6ff1610ff, Qu Xuan) cloudid: clouduser use default domain (8bc0ad557, Qu Xuan) cloudid: optimized saml sso (ab15a751e, Qu Xuan) cloudid: fix azure saml provider delete error (13eaa4eb5, Qu Xuan) cloudid: huawei group role attach and detach (85f3ddc3f, Qu Xuan) cloudid: sync role policy (04afc689e, Qu Xuan) cloudid: multi cloudaccount with saml user (f85dc7d4c, Qu Xuan) cloudid: hcso custom role (8deacfcf5, Qu Xuan) cloudid: saml navigation template support i18n (0f68973d7, Qiu Jian) cloudid: azure attach enabled subscription policy (163a4e14f, Qu Xuan) cloudid: azure saml confirm (5eb0c1842, Qu Xuan) cloudproxy: ssh proxy endpoint\u0026match query (62f9243ba, TangBin) cloudproxy: correct fetch projectId from server for PE (f906d15a5, rainzm) cloudproxy: keep the proxy endpoint project and server consistent (51e75c48f, rainzm) common: supported dry run (705e068a6, Qu Xuan) common: add debug info for lock (5edf37c54, Qu Xuan) common: dump task info when stucking (7b845d17c, Qu Xuan) common: batch validate create (a87a8f2f4, Qu Xuan) devtool: wait for the remote forward to run normally (c6ae4706d, rainzm) devtool: add scope=system query when list proxy endpoints (33bdc9d2f, rainzm) devtool: fix a bug that may trigger panic (9b994792e, rainzm) devtool: correct output error (489ddc90f, rainzm) devtool: get ‘lastseen’ not ‘last_seen’ of forward (09a9d4e49, rainzm) devtool: set ‘task_id’ and ‘task_notify_url’ in header (9b7a33f43, rainzm) devtool: extend the waiting time when checking remote forward (314ac5ac4, rainzm) docs: update swagger api (23290092d, Qu Xuan) esxi: be compatible with disconnected host (885a483e0, rainzm) esxi: prevent fake template and real template from duplication (ca0f88877, rainzm) esxi: correctly set the imagePath outside the if block (1d732e913, rainzm) esxi: determine whether the disk is a root disk more reasonably (564470de0, rainzm) esxi: add ListPath for storage and use it to check iso (b073ae9cb, rainzm) esxiagent: nicIndex should be incremented (f6e2c2fd1, rainzm) esxiagent: make the copied disk type as thin (5d3257126, rainzm) esxiagent: execute deploy operation by default in AgentDeployGuest (b44a6a053, rainzm) esxiagetn: keep compatible with the lower version vcenter when copying the disk (f6648296a, rainzm) github: PR template typo (995eb229a, Zexi Li) github: document template add enhancement label (e709bb2f9, Zexi Li) glance: image can’t removed when size is 0 (35ad91f70, Zexi Li) glance: add option of s3 image status check (00069a607, Zexi Li) glance: make image is_standard updatable (d88af7a6f, Zexi Li) glance: set fail status when upload image to s3 (48cfdd5ed, Zexi Li) host: ignore parted resize disk unknown partition table error (bf13a14ed, Zexi Li) host: allow server directory a symbol link to directory in other location (7765ec0e3, Qiu Jian) host: avoid panic when params is nil (8192af65e, Qu Xuan) host: find same vendor iommu_group devices (675fc64fa, Zexi Li) host: raid status (219b853ec, zhaoxiangchun) host: arm vm virtio-net-pci without addr (c7b85ca30, Zexi Li) host: update rbd storage capacity (d76f366c5, Qu Xuan) host: get ceph used capacity (0144f03cd, Qu Xuan) host: update host metric tags when server or host changeowner (14f0342b3, zhaoxiangchun) host: detect ovs version (5afa999fe, Zexi Li) host: modification of netio collection field of local virtual machine (8c5915067, zhaoxiangchun) host: raid status fix (392f5ab23, zhaoxiangchun) host: fix wait time after mount fuse fs (c6a7ddc44, wanyaoqi) host: avoid delete removed disk failed (352ceefed, Qu Xuan) host,region: disable health checker by default (2b404c89d, Zexi Li) host-deployer: remove escape character on windows passwd (11896e65d, wanyaoqi) host-deployer: add retry on check is vgactived (eb79cc79e, wanyaoqi) host-deployer: XFS uuid冲突 无法 mount (1248b88c7, panda) host-deployer: add log line on blkid failed (ee2f54f4d, wanyaoqi) host-deployer: make SKVMGuestLVMPartition work fine (0a75aaad6, rainzm) host-deployer: mkfs.ext4 add ‘-T largefile’ option (768ab3036, Zexi Li) host-deployer: detect UEFI supported not correct (cf7b226c3, Zexi Li) host-deployer: mount may fail to lock /etc/mtab, add retrier (63bbd5c34, Qiu Jian) hostdeployer: windows rootfs umount leak (b72f60f34, Zexi Li) hostman: show server status changed reason (dc879ab8d, Qu Xuan) hostman: fix kvm create disk failed error (bf6cadd5a, Qu Xuan) hostman: avoid panic when disk is nil (19705cc05, Qu Xuan) hostman: recycle local disk file when rebuilding root (225afd447, Qiu Jian) image: update min_disk of iso image (298568772, Qiu Jian) keystone: user create without password can login with any password (65096570a, Qiu Jian) keystone: allow delete sso imported non-local user (84f776069, Qiu Jian) keystone: avoid panic when call logclient (4ba014cf5, Qu Xuan) keystone: add alertrecords to default dashboard permission (#10160) (1af001357, Jian Qiu) keystone: correctly pass domain id to role-assignments (9a9890900, rainzm) keystone: avoid sql error (4fe0e8e5b, Qu Xuan) keystone: idp filter by sso_domain returns domain’s idp only (01abd8997, Qiu Jian) keystone: don’t send the administrator’s message to the party (6b25d78ad, rainzm) keystone: allow joint projects across domains by default (bf1aed7a1, Qiu Jian) keystone: allow filter identity_providers with name of ssoDomain (0886e6092, Qiu Jian) keystone: add suggestion previliges to meter admin (30453233c, Qiu Jian) keystone: SSO created user name may be duplicated (209ba5d54, Qiu Jian) keystone: adjust default system policy names (222f9cdeb, Qiu Jian) keystone: role_assignment effective list ignore groups without user (e9a4a659f, Qiu Jian) keystone: clear failed auth when enable user (2c1eeb89e, rainzm) keystone: update default role associated policy name (4490adedb, Qiu Jian) keystone: policy filter by role (7ec42db3c, Qu Xuan) keystone: cas sso may create new project whenever user login (515a4de9b, Qiu Jian) keystone: user not found error fix (05b8eccb1, tb365) keystone: policy name duplication (#10199) (9ba3709b3, Jian Qiu) keystone: hide system scope policies in domain scope view (#10194) (010049e5e, Jian Qiu) keystone: tag list for keystone service (ad68cfbeb, Qu Xuan) keystone: avoid repeated abnormal login notifications (21d8b7226, rainzm) keystone: send to the admin and the party separately when Abnormal login occurs (6e6f5ddde, rainzm) keystone: ensure comparing id with non-utf8 string (c68c3f17a, Qiu Jian) log: add filters to baremetal event logs (d4a2dbbea, Qiu Jian) logger: distinct field optimized for logger (2cfbda9a5, Qu Xuan) make,buildx: 使用 buildx 编译时，拉镜像到本地 (3d9d34ac1, Zhang Dongliang) monitor: fix storage tag (391b8b517, zhaoxiangchun) monitor: fix monitor overview (f6d7f07c7, zhaoxiangchun) monitor: add used_by list filter (bdb2a85ae, zhaoxiangchun) monitor: alertPanel add dumplicate name check (d361c2dbb, zhaoxiangchun) monitor: modify rds,redis,oss field descriptions (42a549ad8, zhaoxiangchun) monitor: set alertdashboard scope (d73a76b12, zhaoxiangchun) monitor: fix agent monitor query (40f33db2a, zhaoxiangchun) monitor: fix 报警静默期和未恢复告警策略的兼容 (8fb4e1555, zhaoxiangchun) monitor: fix monitor slow query (b8bdcb077, zhaoxiangchun) monitor: alertpanel update don’t chcek uniq name (ef607c52f, zhaoxiangchun) monitor: monitor notify international and 3.6 bugfix (4ac6d48c6, –global) monitor: fix update alert duration fail (be4b9a580, zhaoxiangchun) monitor: fix monitor resourece update (4c2bca8f8, zhaoxiangchun) monitor: update apiHelper field and log (1285bcb06, zhaoxiangchun) monitor: 3.7 nodata and alertOverview fix (4e0ce5b9e, zhaoxiangchun) monitor: fix alert duration (ac0bb066d, zhaoxiangchun) monitor: add resType filter (79e6d163d, –global) monitor: exit monitor engine in time when happen err (9b493fb59, zhaoxiangchun) monitor: update monitor resourece joint scope (f8b690602, zhaoxiangchun) monitor: monitor query : cloudaccount no data fix (f0eb80a2a, zhaoxiangchun) monitor: registry alertPanel in mcclient (ed4bffa9a, zhaoxiangchun) monitor: fix monitor bug (1eaccaf72, zhaoxiangchun) monitor: fix alert notify info do not contain resourceName (ec589c470, zhaoxiangchun) monitor: fix alert record not return resource details (7310d612e, zhaoxiangchun) monitor: fix monitoroverview and meter send alerting info to notify (abb4deebb, zhaoxiangchun) monitor: alertQuery fix (cb177bc4d, zhaoxiangchun) monitor: fix resource details can’t show monitor metric (f3ddc9747, zhaoxiangchun) monitor: alertdashboard setscope (d62467097, zhaoxiangchun) monitor: modify nodata feishu notifyinfo; fix send email err (e2a5addc2, zhaoxiangchun) monitor: alert policy use ownerId when update (3c499f209, zhaoxiangchun) monitor: modify alertrecord list input (ce02a6556, zhaoxiangchun) monitor: domain view can list scope is domain or project alertrecords; fix nodata alert return info (83a6fd7f1, zhaoxiangchun) monitor: monitor overview throw err (7988fa1f1, zhaoxiangchun) monitor: update alert panel scope by alert dashboard (b2835c5d8, zhaoxiangchun) monitor: sore reture info：resourceType,measurement (567fc991c, –global) monitor: fix monitor export err (97c107f7e, zhaoxiangchun) monitor: alertpanel create fix; nodealert filterbyowner fix (3a10cd66b, zhaoxiangchun) monitor: modify onecloud replacement code (65a9d7945, zhaoxiangchun) monitor: filter alertquery result according to onecloud resources (beff4578c, zhaoxiangchun) monitor: fix monitor process alert (9c6d0b825, zhaoxiangchun) monitor: modify totalrecord query (5d6ffa16f, zhaoxiangchun) monitor,host: replace space to ‘+’ when write to influxdb and replace ‘+’ to space when query (1e08a5199, zhaoxiangchun) monitor,suggestion: order commonalert metric and modify alertresoruce type value and add suggestion models climc (b23519b03, zhaoxiangchun) multicloud: get the storage type of the disk correctly (74f186855, rainzm) multicloud: set isEmulated as false for ecloud vpc (2d04115ab, rainzm) notify: exempt the administrator to create the receiver verification (390476e69, rainzm) notify: remote ‘lang’ filter when contact type is ‘mobile’ (9db54d1dd, rainzm) notify: fix for subscriber_receiver (3dea565c8, rainzm) notify: correctly filter those recipients who join the domain (5a39fc18c, rainzm) notify: add list option ‘enabled’ for topic (c89ae949e, rainzm) notify: loose phone number rules in updating receiver (d12185d43, rainzm) notify: loose mobile phone number matching rules (64e79a934, rainzm) notify: fix create and list of subscriber (fc1adcedf, rainzm) notify: optimization of print log (edcd98e5f, rainzm) notify: set ModelManager in Receiver() (479e1e2f3, rainzm) notify: be compatible with robots and webhooks (6b1f63efc, rainzm) notify: set status after sending (349ac011e, rainzm) notify: clean verifiedNote when marking verified (6f0290ca7, rainzm) notify: init config name (8b0b4bdf3, rainzm) notify: init robot correctly from old data (cd8529556, rainzm) notify: enable filter of contact type ‘email’ and ‘mobile’ (c3b4cbef5, rainzm) notify: distinct field of receivers (1c865268f, rainzm) notify: panic for err (7175e124e, rainzm) notify: avoid duplication of notification names (07114b53d, rainzm) notify: update receiver’s lang when update event occurs (89d604a26, rainzm) notify: get the receiver corresponding to the role correctly (650e25560, rainzm) notify: add create tag fro Attribution in SConfig (cd40909de, rainzm) notify: add index fro receiver_notification (26192eac3, rainzm) notify: be compatible with webconsole type hack (4269a482b, rainzm) notify: be compatible with member’s permission changes (95de795c8, rainzm) notify: set default lang ‘zh_CN’ for robot (5ab4cc9e7, rainzm) notify: add a time limit for resending notifications (a23cd0576, rainzm) notify: Support selective update of robot field (06f23b26e, rainzm) notify: send websocket messages according to language preference (09337d923, rainzm) notify: choose template in NotifyFilter (5b79ad315, rainzm) notify: inject domain info in ReceiverManager.FetchOwnerId (cfae818d0, rainzm) readme: rename OneCloud to YunionCloud (71e9e953e, Zexi Li) readme: remove deadlinks (fc2088dee, Zexi Li) region: try to connect when new a SEcloudClient (a41734482, rainzm) region: remove useless Environment (ee834af5b, rainzm) region: azure cache capability (7f3ac39f3, Qu Xuan) region: avoid sync azure china redis failed (247d10f65, Qu Xuan) region: validate jdcloud rds err (875abe66d, Qu Xuan) region: decouple region and etcd service (8dbc2213f, Zexi Li) region: Remind that cloud account synchronization failed due to network synchronization failure (f8a37d941, rainzm) region: purge instancesnapshot when purging guest (a80fdaadd, rainzm) region: update manager name (9187d9abf, Qu Xuan) region: update jdcloud rds port (53746609a, Qu Xuan) region: qcloud redis sync fix (7c56f4fbb, tangbin) region: set DefaultSysDiskBackend as empty for esxi guest (8f9219592, rainzm) region: ignore aliyun region not supported error (c85d4ac71, Qu Xuan) region: convert eip with same project with vm (7df3891a9, Qu Xuan) region: sync storage before syncing host in syncOnPremiseCloudProviderInfo (606045bce, rainzm) region: allocate server eip without hostwire restrict (04872867c, Qu Xuan) region: nas owner id fix (1f2099ac0, Qu Xuan) region: wait more time for creating nas (a6ef9b66f, Qu Xuan) region: optimized peer secgroup (7aa9bda8e, Qu Xuan) region: remove code about getting service url (790376c53, rainzm) region: avoid assign vm ip addr not effect (44a48fef6, Qu Xuan) region: sync baremetal desc before do ipmi probing (ca3e60d27, Qiu Jian) region: vm list order by disk size (add10f340, Qu Xuan) region: fetch cached image from glance by default (c3cad7ef0, Zexi Li) region: rigorously merge the network under wire (692754b94, rainzm) region: avoid refreshing when checking the image (170ceb1b5, rainzm) region: allow ipmi probe in status unknown (0a5c5a44b, Qiu Jian) region: guest sync eip fix (3be7a103c, tangbin) region: guest associate eip checking fix (cd9a97aef, tangbin) region: remove debug info (20b151fbc, Qu Xuan) region: avoid panic when sync aliyun networks (3f485c7c3, Qu Xuan) region: remove i18n lock and logs (c03f0da14, Qiu Jian) region: aws waf sync (53825d536, Qu Xuan) region: add usage cache, speedup response (82d2604d7, Qiu Jian) region: add qcloud tdsql (809448134, Qu Xuan) region: support aws waf label (144ffbf59, Qu Xuan) region: expand the bridge field (3ba9adeea, rainzm) region: de-duplication when obtaining the number of hosts (21285f753, rainzm) region: optimized vm account name code (45667bffe, Qu Xuan) region: avoid using LocalTaskworker in time-consuming synchronization of cloudaccount (ea790cc82, rainzm) region: sync auzre subscription health status (75f7188bc, Qu Xuan) region: gofmt fix (f11938559, TangBin) region: sync azure waf instance (67e393b67, Qu Xuan) region: allow ipmi probe when probe fail (848a5b9a1, Qiu Jian) region: avoid aws waf sync lost id (d881abf9a, Qu Xuan) region: make cloudprovider sync worker configurable (10793b985, rainzm) region: kafka usage (ca7989c76, Qu Xuan) region: avoid network create failed when vpc is ok but wire not sync (63a2faea7, Qu Xuan) region: add egress_mbps params for lb (dd427a014, Qu Xuan) region: rds network sync (b8c443263, Qu Xuan) region: return rds networks info (155b03652, Qu Xuan) region: admin update without verification (38debd386, rainzm) region: return disk type (5d1b90793, Qu Xuan) region: avoid panic when sync resources (568687c43, Qu Xuan) region: add more usage metrics, e.g. ports.eip, servers.last_week, pending_delete_servers.last_week (e76a84a01, Qiu Jian) region: allow owner to operate snapshotpolicy cache (1eb493b11, rainzm) region: show storage capacity to project users (d6f588c5c, Qiu Jian) region: waf cloud resources (fe84e0f0e, Qu Xuan) region: make SScheduledTaskLabel implement IJointModelManager (bc9264b1c, rainzm) region: aliyun kafka delete (7cfbaaf0e, Qu Xuan) region: use special localtask to run time-consuming provider synchronization task (520fae50a, rainzm) region: aws sts assume role fail break account initialization (9f81122cb, Qiu Jian) region: optimized azure rebuild root (35f76875e, Qu Xuan) region: avoid set multi resources tags failed (ea8638b0c, Qu Xuan) region: avoid panic when locking (3485be17e, rainzm) region: sync aws waf default action (42046aaf6, Qu Xuan) region: sync multi region resource at same time (acad67555, Qu Xuan) region: qcloud elb https listener create fix (dea9f77a2, tangbin) region: azure quota sync (9193558e0, Qu Xuan) region: update qcloud secgroup rule (4f8942974, Qu Xuan) region: account arrears (f233311cc, Qu Xuan) region: aws lb create tags param (4f8ebb8d0, lvyangyang) region: add all.servers.any_pool/all.hosts.any_pool metrics (86c282c0a, Qiu Jian) region: cpu desc too long (e82228ac1, Qu Xuan) region: cloudregion\u0026zone add namei18n (ea7ea1f08, TangBin) region: add qcloud memcached sync (f615862db, Qu Xuan) region: tag list key case insensitive (3e3e9b7cf, Qu Xuan) region: openstack ip pre allocate (6b2999e15, Qu Xuan) region: fetch zone before syncing promise cloud provider storages (84f2e555e, rainzm) region: update swagger api (fa5d5a6eb, Qu Xuan) region: raise GetNamedNetworkConfiguration error (cc5bc646b, Zexi Li) region: including domain info in project-role results (42b40b8e2, Qiu Jian) region: scoped policy filter by project id (7613e287e, Qiu Jian) region: prevent the creation of redundant network segments when managing vmware (b02a8a4ee, rainzm) region: avoid storage update not work (9c520ee7a, Qu Xuan) region: baremetal spec condition (e3a15c04d, Zexi Li) region: aws sync vpc access mode bugfix (01d5977bd, TangBin) region: remove i18n fix \u0026 zone \u0026region name support i18n (b67be9b0d, TangBin) region: download cached image from source host before migrating (3a6e7f55a, Zexi Li) region: mongodb sync fix (b5a45e853, Qu Xuan) region: cloud provider filter by domain_id ignore private case (18d495f10, Qiu Jian) region: mongodb sync fix (b5d0467bd, Qu Xuan) region: baremetal server resued address nic count should be subtracted (71b16e5e9, Zexi Li) region: fail to update network gateway (2bca43bc5, Qiu Jian) region: cloud provider filter by domain (9b7796bb6, Qiu Jian) region: avoid panic when sync snapshot project (049cf670a, Qu Xuan) region: waf purge with account delete (71b0c07bc, Qu Xuan) region: baremetal server change ip address reuse (2d5e9b157, Zexi Li) region: allow domain admin to obtain ssh private keys (0e77703c7, rainzm) region: sync aliyun classic network ip addr (a0170df03, Qu Xuan) region: remove app gateway (9d6dc3540, Qu Xuan) region: add trans and mongodb backup list (3110923be, Qu Xuan) region: record sync cost time (7fc35d0e0, Qu Xuan) region: network eip stats not correct (a2ff5b38c, Qiu Jian) region: struct input for detach server network (95a9327d9, Qu Xuan) region: avoid get openstack hostid panic (6632d5f14, Qu Xuan) region: continue to sync the snapshots that are being created when syncing auto created snapshot (a96621043, rainzm) region: kafka purge (3ff012f8c, Qu Xuan) region: support nas tags (8db0a79fa, Qu Xuan) region: prohibit resizing the disk of a esxi vm with instance snapshots (a493c7022, rainzm) region: add resource statistics filter params (3a380377a, Qu Xuan) region: wire sql fix (e2efeece3, Qu Xuan) region: check whether guest is nil (74a8cc7f4, rainzm) region: sync openstack multi zone storages (a1501da0c, Qu Xuan) region: account aksk error (07f6771f2, Qu Xuan) region: format jd cloud balance (bc4d1d7b8, Qu Xuan) region: support project mapping (ff43472c6, Qu Xuan) region: not set baremetal is_maintenance when action is start (bf904da0f, Zexi Li) region: goimport fix (4cf354fcf, tb365) region: update huawei cloud stack update credential (d36878bbc, tb365) region: add azure new region (ada5fd0d1, Qu Xuan) region: add RequestRemoteUpdate for ESXiGuestDriver (2c26b6fb3, rainzm) region: redis change spec bugfix (e08c07bb8, tangbin) region: optimized qcloud error code (34c6c5257, Qu Xuan) region: aliyun request retry (0a06c7486, Qu Xuan) region: more details for get aws region error (b02fb7eac, Qu Xuan) region: fix rds tag set error (5882c2041, Qu Xuan) region: set redis reboot timeout to 30 mins (a8aa18f0d, tangbin) region: support peer secgroup (7417452ec, Qu Xuan) region: avoid not sync dns zone (da83837b6, Qu Xuan) region: aws rebuild instance os_arch mismatch fix (487539725, TangBin) region: qcloud quota sync (d1de64ce0, Qu Xuan) region: optimized aws cloudtrail sync (941ff2992, Qu Xuan) region: aliyun nas endpoint (b725729f0, Qu Xuan) region: baremetal server reuse ip address condition (ab33fcc37, Zexi Li) region: set next stage for start vm (39dfce961, Qu Xuan) region: add azure sql server (89f06f2f1, Qu Xuan) region: maintain compatibility with webhook notify (ff47f8177, rainzm) region: pull the network correctly (b3d876a6c, rainzm) region: ignore qcloud vm start error (1c27836c7, Qu Xuan) region: host search by any ip (b459bc7e8, Qiu Jian) region: optimzed guest disks (8c21558fe, Qu Xuan) region: aliyun vpc endpoint (7f37398ae, Qu Xuan) region: openstack network is regional (d38b7ce46, Qu Xuan) region: optimized sku sched clear (65d52dbab, Qu Xuan) region: return sql error (f664cc25a, Qu Xuan) region: remove snapshots checking for huawei cloud while delete server (113ef352c, TangBin) region: use the previous method for guest notification instead of message subscription (f5008a432, rainzm) region: allow update sku status (d35206bf1, Qu Xuan) region: fetch wires correctly (2283caa46, rainzm) region: delete dirty network (11c0bc826, Qu Xuan) region: optimized server sku sku (ec45559d3, Qu Xuan) region: mongodb misc fix (d2b19ae00, Qu Xuan) region: aws sync disk missing image id fix (7a861689f, TangBin) region: send webhook notification when delete dbinstance (4a83028f7, rainzm) region: azure vm disk size (b6d1029c7, Qu Xuan) region: hcso regional eip (a0d43326d, Qu Xuan) region: bucket size stats should not count invalid sizes of -1 (0733e4575, Qiu Jian) region: delete not exist disk failed (5aa26cd36, Qu Xuan) region: optimized secgroup rule sync (d0cc334ca, Qu Xuan) region: skip cloud image sync error (5aa763fd0, Qu Xuan) region: send webhook when the creation task is completely completed (f3e3a94ed, rainzm) region: mongodb zone\u0026network sync fix (aa493f6c8, Qu Xuan) region: project mapping optional (0fbbe57e4, 屈轩) region: check the global network situation when expanding the network (5906cf8a0, rainzm) region: add option auto reconcile backup servers (37a479075, wanyaoqi) region: avoid sync huawei unusable account (38266154b, Qu Xuan) region: delete virtual nics with network (f78fa04b1, Qu Xuan) region: check whether the disks of the instance snapshot is empty when creating vm (2d725011d, rainzm) region: filter resource by classic vpc (6bb9098d0, Qu Xuan) region: avoid update tags task loop (965315ac7, Qu Xuan) region: ctyun delete secgroup fix (33b0517d4, TangBin) region: skip disabled project mapping (711fbb6c3, Qu Xuan) region: more accounts details for project mapping (a33179e76, Qu Xuan) region: avoid azure secgroup sync removed (d83bc8477, Qu Xuan) region: check sku request error (b12c26587, Qu Xuan) region: return region sql error (e79abc5d6, Qu Xuan) region: add host_id options for storage filter (4fcbef3e7, Qu Xuan) region: avoid stuck at http request (e59ae6c41, Qu Xuan) region: add huawei credit amount check (86bd47d3f, Qu Xuan) region: add aliyun credit amount check (1d641f8b1, Qu Xuan) region: secgroup priority fix (e7407d368, Qu Xuan) region: avoid worker discarded after state unchanged (74eeb43e4, Qu Xuan) region: sync azure rds memeory (3488515fb, Qu Xuan) region: purge snapshot with not status check (7b7ed59dd, Qu Xuan) region: optimized secgroup rule sync (48b03cbaa, Qu Xuan) region: avoid aws session not assume role (6456fa3af, Qu Xuan) region: check sku request error (74f0d51ae, Qu Xuan) region: exported number of vpcs less than listed (0868fc815, Qiu Jian) region: add project and domain info for project mapping rules (9d6813cee, Qu Xuan) region: vpcpeering error message translation (8cf11aa3f, lvyangyang) region: huawei cloud sync vm os arch (fffe8c650, tb365) region: aws not support create server with public ip (1e3d38acc, Qu Xuan) region: azure sqlserver dtu (68bb75b41, Qu Xuan) region: empty aliyun resource tag (82b9cdc1c, Qu Xuan) region: avoid only query one guest disk (e7502720a, Qu Xuan) region: avoid clean all rules when sync secgroups (17c33bd45, Qu Xuan) region: apsara optimized (dc673a80d, Qu Xuan) region: azure uniform tags (ef70a95da, Qu Xuan) region: cloudaccount: allow only one sync func in flight (76d3c4833, Yousong Zhou) region: lb resource count (7e838d61b, Qu Xuan) region: restrict account project mapping (8907dd4e8, Qu Xuan) region: show azure deploy failed error (f8d58a4ed, Qu Xuan) region: aws vpc network eip disk tags sync (920369021, Qu Xuan) region: fix zstack delete server with local disks (0d38de3d0, Qu Xuan) region: lb cert name fix (2252e1951, tb365) region: sync with multi worker (345f78621, Qu Xuan) region: azure default subscription id (bb9140708, Qu Xuan) region: translation errors (314d664ff, Qu Xuan) region: optimized azure aliyun qcloud tags sync (d1c34a60c, Qu Xuan) region: migrate use rescue mode (72d779c1b, Zexi Li) region: manager distinct field (bda473751, Qu Xuan) region: adjust the query range corresponding to the alarm strategy (56e9d9576, rainzm) region: avoid azure detach disk failed (bec909943, Qu Xuan) region: update google latitude and langtitude (4c6cc713f, Qu Xuan) region: optimized disk eip snapshot project sync (e80be2b58, Qu Xuan) region: sync cloudpods secgroup (baa48550d, Qu Xuan) region: project sync condition (ec72fbbcc, Qu Xuan) region: lbcert cache clean duplicate data fix (9cfc6a1e5, tb365) region: clean schedule cache when host add or delete netif (574e1f3cd, Zexi Li) region: optimized azure reset linux pasword (2bc4e7798, Qu Xuan) region: split provider tag sync (4af24a292, Qu Xuan) region: fix aws json unmarshal error (4a2e3e066, Qu Xuan) region: disable public cloud ip pre allocate (a7c9ba376, Qu Xuan) region: AWS buckets in us-east-1 have null location (029d2fa27, Qiu Jian) region: add project filter for cloudprovider (8ab645e60, Qu Xuan) region: update tags status (af4f07822, lvyangyang) region: avoid deadlock when resize disk (30800f732, Qu Xuan) region: tag bugs fix -azure tags replace/refresh -tags action logs -忽略创建中主机的metadate同步任务 (481e176ea, lvyangyang) region: ignore qcloud bw pkg error (502718ec1, Qu Xuan) region: allow guest network zero bandwidth limit (ab496d0e4, Zexi Li) region: show project mapping managers info (b5cc187ec, Qu Xuan) region: resource count for cachedimages (b19715d45, Qu Xuan) region: lb local cert sync fix (daf496a5b, tb365) region: enable zstack allocate ip by itself (f1d422e85, Qu Xuan) region: aws elb backendgroup sync bugfix (97192c3af, tangbin) region: add status resource statistic (aef09a050, Qu Xuan) region: avoid vmware sync hosts panic (0a5ec5248, Qu Xuan) region: avoid cachedimage never be in sync when it deleted (31aec9f96, Qu Xuan) region: huawei disk tags (7b6f28eef, Qu Xuan) region: optimized for qcloud prepaid instance delete (374b56adb, Qu Xuan) region: allowed to manually refresh cloudimage (c226568ec, Qu Xuan) region: avoid guest delete not with disks (b5aa64d91, Qu Xuan) region: qcloud bandwidth pkg (4763059f7, Qu Xuan) region: avoid auzre request timeout (0ba310062, Qu Xuan) region: try to find mediumType matched storage when create disk for kvm (38582f5f9, Zexi Li) region: avoid panic when register service not work (89296df81, Qu Xuan) region: sync cachedimage info (4c3d736a1, Qu Xuan) region: aliyun support public ip (88bf0333e, Qu Xuan) region: replace cloud tags (9014be05a, lvyangyang) region: sync tags with new guest (e461f87a9, Qu Xuan) region: support cloudprovider bind project mapping (1bc8e3845, Qu Xuan) region: validate disk status when create snapshot (82af2f702, Qu Xuan) region: server start check host memory is enough (7a684d347, wanyaoqi) region: check instancesnapshot in correct place when resize disk (297d905d4, rainzm) region: rds list with secgorups info (0f0c0eb5a, Qu Xuan) region: obtain ProviderFactory correctly (ab3c7d914, rainzm) region: aliyun rds network sync (f89c9b933, Qu Xuan) region: skip server migrate quota check (ba25d3910, Qu Xuan) region: validate attached disk size and backend (90cc8250b, Qu Xuan) region: cdn misc fix (08c5f3c81, Qu Xuan) region: omit vpc quota check if vpc created by owner (90f40d47c, Qiu Jian) region: purge private cloud sku (b21903a32, Qu Xuan) region: handle the error of RequestGuestCreateAllDisks (4dd1ecc79, rainzm) region: avoid index out of range panic (df26704b3, Qu Xuan) region: support rds secgroup operation (bc90e4fc4, Qu Xuan) region,host: sync status check block jobs (5e2d34642, wanyaoqi) region,scheduler: filter enabled skus (4a6474caf, Qu Xuan) region,scheduler: baremetal reuse ip (49749609b, Zexi Li) scheduler: storage medium type should not exact match (#10190) (3bb48e937, Jian Qiu) scheduler: make option EnableQuotaCheck work (a34e59f21, rainzm) scheduler: baremetal network free address out of count (c8facc948, Zexi Li) telegraf: megactl raid add rebuild status (ff644319c, zhaoxiangchun) telegraf-raid-plugin: add image-telegraf-raid-plugin in Makefile (9a3310b92, zhaoxiangchun) vendor: github dependabot alerts (375d8bf4b, Zexi Li) vendor: use creack/pty v1.1.11 to adapt go 1.15 (f0862574d, Zexi Li) webconsole: aliyun vnc windows ctl+alt+del (1498e69e4, Qu Xuan) webconsole: add jdcloud vnc (c1be18524, Qu Xuan) wire: init and change status (be5d6ca77, rainzm)  Bugfix (1)  monitor: 导出信息中添加全局字典配置 (3ba8168a6, zhaoxiangchun)  Build (12)  ansibleserver: use ansibleserver-base:v1.0.3 (de402bcf2, Yousong Zhou) ansibleserver-base: v1.0.3: add sshpass (a0d066ab0, Yousong Zhou) cloudproxy: add dockerfile (e3e51731a, Yousong Zhou) y18n: add apigateway (eb84a308a, Yousong Zhou) skip y18n-check for now (89f541fca, Yousong Zhou) add y18n-check, y18n-gen (131723cbe, Yousong Zhou) use centos-build:1.1-4 (de7a88bf3, Yousong Zhou) docker: add ModName (39461740d, Yousong Zhou) docker: move to Makefile.common.mk (431f2e87e, Yousong Zhou) docker: align centos variant with the alpine one (bfe4d2a73, Yousong Zhou) docker: make target GOARCH/GOOS/CGO_ENABLED aware (8997ae39f, Yousong Zhou) docker: remove GOFLAGS export (2cd6f1274, Yousong Zhou)  Chore (1)  utils: add deb build script (429b87266, wanyaoqi)  Climc (4)  add commands server-make-sshable, server-make-sshable-cmd (1e330e8f3, Yousong Zhou) compute: add command server-sshable (a16cea6fa, Yousong Zhou) add commands for cloudproxy (1bcaa9b3f, Yousong Zhou) costreports: fix bad struct tag (9e1ec4438, Yousong Zhou)  Cloudproxy (18)  agent: no collision between ports of ssh conn and forwards (f6271885c, Yousong Zhou) agent: refresh every 11 seconds (a4d35457c, Yousong Zhou) agent: ssh: wait ssh conn state while passing it out (1457b37c7, Yousong Zhou) test proxy endpoint connectivity and remote config (cba91b54d, Yousong Zhou) agent: more verbose log for ssh connect failure (1a93f26dd, Yousong Zhou) agent: wait a while on connect error (d5f162787, Yousong Zhou) forwards: show details for fwd returned from create-from-server (532961f52, Yousong Zhou) proxy_endpoints: create-from-server: allow name as arg (675fe334f, Yousong Zhou) agent: return when ctx is Done (cd14aa111, Yousong Zhou) agent: avoid stallment caused by client timeout (bd2122357, Yousong Zhou) agent: ssh: cancel on return from Start (a4697d081, Yousong Zhou) add metadata model (43f48e6b3, Yousong Zhou) agent: fix possible invalid memory access (d57e2d249, Yousong Zhou) agent: use yunion.io/x/onecloud/pkg/util/ssh (8ee597818, Yousong Zhou) forwards: more list filter conditional keys (e3a54dcfd, Yousong Zhou) apis: add ForwardDetails definition (43a4cc6be, Yousong Zhou) agent: refresh bindAddr, advertiseAddr when needed (d9b3d3ee8, Yousong Zhou) initial version (22145cbe0, Yousong Zhou)  Code Refactoring (2)  climc: use shell.NewResourceCmd for notice (45159e2ec, rainzm) climc: remove dependence for yunion.io/x/pkg/cloudcommon/db (a68888979, rainzm)  Db (1)  add GetItemDetails (627ea8ccc, Yousong Zhou)  Etcd (1)  fix “fatal error: concurrent map writes” (651c4b687, Yousong Zhou)  Feature (9)  allow server switch network without service interruption (0d3cfac32, Qiu Jian) support Google Oauth2.0 (f08ea8b2c, Qiu Jian) add a standalone dhcp relay service (f5a1522ab, Qiu Jian) climc: support put objects in directory (b264a0eba, Qiu Jian) climc: add policy-clone command (dcfb2f322, Qiu Jian) climc: policy save data into file (d02d82963, Qiu Jian) compute: allow live migration with checking Host CPU modes (3944d9ce0, Qiu Jian) region: support AWS organization (567990df1, Qiu Jian) region: sync cloud tags to local user tags (#9752) (376dfa44d, Jian Qiu)  Features (198)  add interface INetworkNicCountGetter (cc5b93ea4, rainzm) add nas sync (8639e95a3, Qu Xuan) support jdcloud pull monitor metric (81da6c3af, zhaoxiangchun) support JDCloud (Host read only) (00f94399f, rainzm) update host-deployer-base from 0.6 to 1.0 (3db8adc38, rainzm) support EventNotify (b45edf2f1, rainzm) change go version from 1.12 to 1.13 in go.mod (31c23b45b, rainzm) call EventNotify when event occurs (c67bd977e, rainzm) use yunion’s customized version of telegraf in file-repo (0e06f9c6c, rainzm) support install monitor agent in baremetal (83b73bf63, rainzm) update file-repo version (bbb95343e, rainzm) hcso sku sync (963cc7fac, Qu Xuan) ansible: add rolePublic and timeout options (8b3e591cf, rainzm) ansibleserver: update file_reop version in dockerfile (ac06c8fb1, rainzm) ansibleserver: record running cmd to debug (33e45e46c, Zexi Li) ansibleserver: add reference and instance (f8f99365a, rainzm) ansibleserver: respect keepTmpdir when running ansibleplaybook v1 (0894df5e1, rainzm) ansibleserver: update file-repo to v0.3.3 and use telegraf 1.19.2 (754551ce9, Zexi Li) apigateway: support export dict keys (557fd96cc, Qu Xuan) apigateway: differentiate error messages when logging in (d67ded441, rainzm) arm64,build: arm 编译时,不编译 rbdcli (a54becaf2, Zhang Dongliang) baremetal: support H3C oem baremetal (3a3675108, Zexi Li) baremetal: support management of none BMC host (6c5bba7dd, Zexi Li) baremetal: add UEFI related util (ef7bc9e09, Zexi Li) build: update glance and torrent base image (3b11bda68, Zexi Li) build: change file repo version in Dockerfile.ansibleserver (95412c129, rainzm) build: make multi arch manifest docker image (44d6c90a1, Zexi Li) build: update ansibleserver dockerfile (e49a25adb, Zexi Li) climc: k8s cluster addon add enable native ip alloc option (8234510a5, Zexi Li) climc: add operation of app and appenvironment (cd79e2d4a, rainzm) climc: register billsanalysis climc (ba50eed63, zhaoxiangchun) climc: add enable monitor minio component command (78f3853c0, Zexi Li) climc: update meter dimension climc (cff9cbc2f, zhaoxiangchun) climc: add Port-Forward SSH in server-ssh (d5298db0b, Stargic) climc: wires: allow filter by bandwidth (57eceae70, Yousong Zhou) climc: add SSH through EIP in server-ssh (d42b2a6dd, Stargic) cloudcommon: set TaskNotifyUrl in GetTaskRequestHeader (f7add5530, rainzm) cloudcommon: expand notifyclient (7357b6e0a, rainzm) cloudcommon: move ignore_nonrunning_guests option to common (e9b0203da, Zexi Li) cloudcommon: add rolecache (f352cf4e3, rainzm) cloudcommon: opslog: log joint models (0cfc5f231, Yousong Zhou) cloudcommon: send it directly if there is no template corresponding to the topic (8316dadb0, rainzm) cloudcommon: send message with mobile in NotifyWithTag (1c3eea688, rainzm) cloudid: add azure saml (627503cdc, Qu Xuan) cloudmon: support huaweistack monitor metric (a6f5b047d, zhaoxiangchun) cloudmon: support HuaweiCloudStack rds metric (1df2e03b7, zhaoxiangchun) cloudmon: add cloudmon component (8fa4e577d, zhaoxiangchun) cloudproxy: add GetDetailsLastseen for forwards (f261db7ae, rainzm) db: progressive inspection when determining the required scope (cc11aed9e, rainzm) devtool: makes the process of installing the agent more rigorous (fd458a603, rainzm) devtool: add script (1cc917e98, rainzm) devtool: support batch applying for virtual machines (39d93ebb9, rainzm) devtool: add some tags (0d33ecd28, rainzm) devtool: check sshable before applying ansible playbook for server (7e452712e, rainzm) devtool: use server forward direct for guest with kvm hypervisor (955cf6500, rainzm) devtool: add ScriptApplyId fro ScriptApplyRecord (f246e6679, rainzm) docker: inject playbook and telegraf installation packages (4250b1475, rainzm) esxi: update guest os info (0d5a44155, rainzm) esxi: support iso when creating vm (cd97edf07, rainzm) esxi: reduce the number of requests and the amount of data transferred (9a114b5fe, rainzm) esxi: change parameters for NewDiskDev and avoid unnecessary deploy (f71f1d831, rainzm) esxi: disable sync cloudimage from image cache (17db82c1e, rainzm) esxi: fetch vmware network configuration info (e4fc71eca, rainzm) esxiagent: determine vs by bridge and network when creating vm (4be58eef5, rainzm) fetcherfs: make rpm and deb package (811730e7c, Zexi Li) github: add document issue template (9790f54b7, Zexi Li) github: update github PR and issue template (2b475685e, Zexi Li) glance: support backend storage s3 (a48f0040a, wanyaoqi) glance: image support filter by os_type and distribution (3b235402a, Zexi Li) host: adjust qemu args to support aarch64 (3b2160552, Zexi Li) host: support netplan configuration (02e57f7e8, Zexi Li) host: add openEuler rootFs driver (6e8993a22, Zexi Li) host: aware of kubelet eviction config (e770f4f65, Zexi Li) hostdeployer: change UserAdd to CheckOrAddUser (941b6df11, rainzm) hostdeployer: find vg name and id via pv (de60724ba, rainzm) hostdeployer: change the way fo GetLoginAccount in windows (6e164070d, rainzm) hostman: options: add sdn_allow_conntrack_invalid (9ddb01a95, Yousong Zhou) keystone: add GetDefaultAdminSession (41139dc72, rainzm) keystone: support filter ‘project_domain_id’ in role_assignments (334a47e38, rainzm) keystone: support alertNotify when abnormal login occur (274729eb5, rainzm) keystone: more specific error return during authentication (1c325f747, rainzm) keystone: support projectDomainId in SAssignmentManager.FetchAll (2a0e36a43, rainzm) keystone: add options to set admin and domain admin role to notify (349db2dce, rainzm) keystone,apigateway: return a readable message when the user is locked or disabled (c5223f913, rainzm) locale: update (b83c26f1f, rainzm) mcclient: add k8s cluster monitor component disable option (28eb0ab98, Zexi Li) mcclient: add bills dimension climc (79f08937a, zhaoxiangchun) mcclient,itsm: modify itsm mcclient rpc func (2bae6527d, zhaoxiangchun) misc: update build and service base image to use go v1.15.15 (d0dd242bc, Zexi Li) monitor: update monitor resource overview (0919c2ee3, zhaoxiangchun) monitor: query reduce percentile (fa29f3d9b, zhaoxiangchun) monitor: add agent monitor metric (4c932ee96, zhaoxiangchun) monitor: influxQuery add P95 reduce (64e587f97, zhaoxiangchun) monitor: Lists the records that are currently alarting (aedf73f14, zhaoxiangchun) monitor: add storage monitor metric (8685e9619, zhaoxiangchun) monitor: add ext mysql,rabbitmq,redis metric (e9f3def6e, zhaoxiangchun) monitor: support temperature metrics (9ff03af40, Zexi Li) monitor: add jenkins metric desc (589c80356, zhaoxiangchun) monitor: support monitor overview influxdb query pass through (33975b5c1, zhaoxiangchun) monitor: monitor alert policy add mobile notify (5c2d88c6d, zhaoxiangchun) monitor: meter相关报警内容处理 (70c9dd397, zhaoxiangchun) monitor: alert add silent period param (352fc030e, zhaoxiangchun) monitor: alert record add silentPeriod info (730c13b83, zhaoxiangchun) monitor: add dashboard and panel clone (65f0f6143, zhaoxiangchun) monitor: monitor add trigger value when send notify info (0e7a04350, zhaoxiangchun) monitor: alert policy filter by res_type (e37ee880f, zhaoxiangchun) monitor: get today alerting resource info (e8442bea6, zhaoxiangchun) monitor: support monitor shield (805c80370, zhaoxiangchun) monitor: monitor alertRecord support set shield (0a7c58711, zhaoxiangchun) monitor: 处理编排mysql，redis，rabbitmq 相关监控 (edaf51e5d, zhaoxiangchun) multicloud: add JdcloudTags (4783fb754, rainzm) multicloud: support webapp for azure (64f5e0943, rainzm) multicloud: add snapshots list for ecloud (85c761e02, rainzm) notify: add template about topic USER_LOGIN_EXCEPTION (f8bace5b4, rainzm) notify: filter all recipients in this domain and recipients who have joined projects in this domain (ed5dac624, rainzm) notify: send notifications of different templates according to language (76e7aa401, rainzm) notify: 管理后台新建的联系人，手机号和邮箱无需进行校验 (623f1f17f, rainzm) notify: Gets the available notification types for the receiver (f59101335, rainzm) notify: add params for create notification (51f0e6f10, rainzm) notify: advanced notify config and robot (1d1bb6c38, rainzm) notify: mandatory update of VERIFY and USER_LOGIN_EXCEPTION templates (f6a2bbe9b, rainzm) notify: add save api for notify template (0b3f18830, rainzm) notify: show only users under the domain in the recipient details of the message (052b017cf, rainzm) notify: topic and subscriber at the domain level (04d930ab2, rainzm) notify: delete the notification 1 month ago and remove the data migration (4ef01d432, rainzm) notify: exempt the administrator to update the receiver verification (a9f3392e7, rainzm) notify: filter receivers who join the project under the domain where the requester is currently located (c88d01598, rainzm) notify: remove disk’s event notify for now (fd7b2a7ff, rainzm) notify: be compatible with mobile in event notify (c7b8d88d7, rainzm) notify: clean data for receiver_notifications (36bae206a, rainzm) notify: add action ‘change_ipaddr’ for notify topic (763058946, rainzm) notify: add receivers query in receivers/get-types (9058aecac, rainzm) notify: support international mobile (019e70f60, rainzm) notify: add local template (a6b24e373, rainzm) notify: add subscription in notify (3719b8b7f, rainzm) notify: verification email style optimization (195e3c5c6, rainzm) notify: adjust subscribers when deleting bots and recipients (066efeea6, rainzm) notify: compatible with webhook configuration (83ac62965, rainzm) notify: change default verify expire interval 5m =\u003e 2m (beb6ad860, rainzm) notify: add default area code for mobile (70c767c10, rainzm) notify: add ResourceAttributionName for subscriber (c2d7dd6a4, rainzm) notify,region: improvement of news subscription (311d0efb8, rainzm) region: add cloudpods (6a735d485, Qu Xuan) region: support merging mutli wires to a wire (a4d3d5fa3, rainzm) region: sync Esxi HostWire for esxi host (e2bbb4e73, rainzm) region: support synchronize vmware’s network configuration to the local (cef91402f, rainzm) region: check whether the esxi host is ip or domain name (6af6c8167, rainzm) region: remove webhook notify in guest.PostUpdate (cb335c108, rainzm) region: add ecloud monitor metric (4365c28ae, zhaoxiangchun) region: add options DeleteSnapshotExpiredRelease (91e45883a, rainzm) region: aws elasticahe (36e5c9ccf, lvyangyang) region: add host count when list wires (6309e2da8, rainzm) region: nat op support (b21e6ff25, Qu Xuan) region: disks and eip delete with server (108d6827e, Qu Xuan) region: add server delete options (a9ea3839d, Qu Xuan) region: add host_type filter for listing wires (47da51e04, rainzm) region: add App and AppEnvironment (f8e53027d, rainzm) region: add host_type filter for listing network (2d7fba494, rainzm) region: add tags implement (8641e9232, lvyangyang) region: wire: allow filter by bandwidth (2fe912f51, Yousong Zhou) region: add status count filter by params (d7f4eafee, Qu Xuan) region: azure rds (1755f55c8, lvyangyang) region: set metadata for guest with agent installed (e20fd94b5, rainzm) region: add kafka sync (d725cf059, Qu Xuan) region: return forwardDetails when query server sshable (9a651dad3, rainzm) region: support merging wire (2177b6211, rainzm) region: allow to update account with provider vmware (be1f33c60, rainzm) region: add azure redis (59eb84fb2, Qu Xuan) region: nat op support (22937c4af, Qu Xuan) region: add zone disk capability api (d4255d71e, TangBin) region: increase the log for debugging when syncing cloudimage (d7224cd06, rainzm) region: add direct field for vpc (9c2502db8, rainzm) region: support Ecloud (readonly) (77457fbae, rainzm) region: host list order by server count (ac491f4f5, Zexi Li) region: filter schedtags from cloudprovider_id (f8c7abf37, rainzm) region: cloudregion add disk capability api (65b597566, TangBin) region: add mongodb (69a6aedf1, Qu Xuan) region: add ProhibitRefreshingCloudImage for options (9f0fdb291, rainzm) region: add server migration predication API (ff7c514f5, Zexi Li) region: support jd cloud rds (11f1f9756, Qu Xuan) region: add qcloud cdn (3ce18ea71, Qu Xuan) region: add wire info in HostNetwork details (01ce700ec, rainzm) region: waf (f3dbe3367, Qu Xuan) region: disable synchronization of some special storage (8009ca8d7, rainzm) region: make DeleteSnapshotExpiredRelease applies to postpaid vm (763086d62, rainzm) region: virtually display the esxiagent of the cached image as a host (961d6e484, rainzm) region: support elasticsearch sync (021f5d924, Qu Xuan) region: stop guest before freeze (fa077dbe9, wanyaoqi) region: add app gateway resource (77c8d9f78, Qu Xuan) region: be compatible with changes in monitor api in scaling group (e347d6a51, rainzm) region: multilingual timer description (c4b6d7e64, rainzm) region: server sku os_arch \u0026 cpu_arch checking (0413898aa, tangbin) scheduler: optimize the speed of network predicate (bf977bb74, rainzm) suggestion,apigateway: add analysispredict climc (788a5df8b, zhaoxiangchun) suggestion,mcclient: add suggestsysalert-delete climc (28858d947, zhaoxiangchun) util: support uint64 in bitmap (f204b5e60, rainzm) vpcs: list: add order_by_network_count (95a5af1c1, Yousong Zhou) yunionapi: pre login hook fix (6f91fa7a4, tb365)  Fi (1)  region: avoid opslog without resource id (7fc23cb68, Qu Xuan)  Guest_deploy_task (1)  log other deploy details with i18n (e40ca53b6, Yousong Zhou)  Guests (3)  sshable: fix breaking out from wait loop (59f99c653, Yousong Zhou) sshable: wait and retry for newly created forward (ce98d7dd1, Yousong Zhou) sshable: log error should unmarshal fail (1c18dbb7d, Yousong Zhou)  Hostman (1)  ovn: do not set external_ids:iface-id for backup (db89640df, Yousong Zhou)  Keystone (1)  reword error messages (a71c87547, Yousong Zhou)  Locales (4)  generate (78a6ebd57, Yousong Zhou) zh-CN: add some translations (b66ccd78a, Yousong Zhou) regenerate locales.go (a17d88c78, Yousong Zhou) zh-CN: regenerate messages.gotext.json (d18f612af, Yousong Zhou)  Mcclient (3)  models: Server: add fields for eip and nics (8ab1db998, Yousong Zhou) Sshkeypairs: add FetchPrivateKey (21032a1df, Yousong Zhou) auth: add SessionCache (87f93c287, Yousong Zhou)  Networks (1)  server_type: do not allow update (d54fdf6e7, Yousong Zhou)  Optimized (1)  region: qcloud bucket policy set and get operation (fbd5be2fd, Qu Xuan)  Others (61)  hcso support sync vm host (afe7f5d82, tb365) fix(monitor):fix monitor query top 5 (c24c923a8, zhaoxiangchun) add azure capacity (972bdb8e7, tb365) huawei cloud getInstanceByIP add ip filter (5ca544400, tb365) zone list timeout fix (cfae94871, tb365) ProviderFactory add method IsMultiTenant (7b579e80c, tb365) add default dns for subnet (444ebd952, tb365) huawei cloud stack client fix (682a27633, tb365) huawei client update (88efcda2f, tb365) add host type count api (7aa8802a1, tb365) add meter cost conversion (afd560c6f, bistuzx@163.com) minor fixes (fe1dd1daa, Qiu Jian) azure health check fix (05729f87f, tb365) azure lb sync listener frontip fix (9d0f27f73, tb365) update vendor (a83ff5bf9, tb365) minor fixes (788ad518c, Qiu Jian) azure elb support sync ip backend (5649af219, tb365) azure application lb sync fix (be5aeda1b, tb365) azure lb global id to lowercase (a0a5d088d, tb365) lb backend group details add lb_listener_count (eb5556943, tb365) update OWNERS (75a745368, Zexi Li) support azure elb sync (bb10f3ef3, tb365) Create CODE_OF_CONDUCT.md (d0a7d89f3, Jian Qiu) feat(monitor) 3.7 add monitor resource overview (4ac004215, zhaoxiangchun) add module billing exchange rate (f88ea19a7, bistuzx@163.com) README.md: update icon URLs (98d5fb072, Yousong Zhou) add secgroup-list (bbbcadced, rainzm) update vendor (928a801c8, rainzm) add jdcloud reigon\u0026host\u0026guest driver (458ff4662, tb365) add jd cloud constants (4c369d19f, tb365) avoid log loss when token expired fix #10738 (05716c7d7, Qu Xuan) fix wire status close #10737 (be0117dd7, Qu Xuan) Update feature_request.md (625118057, Zexi Li) Update bug_report.md (6aa8aa269, Zexi Li) response scope-specific metrics (8dff78422, Qiu Jian) fix(monitor):修复监控总览图标钻取后返回数据异常的问题 (1391839ad, zhaoxiangchun) fix(region) qcloud multi zone instance sync account fix (ebdb9fbc9, tangbin) feat(region) qcloud redis support multi zones (33285eb77, tangbin) copyright update brand_cn\u0026brand_en fix (ff51bf449, tangbin) infos copyright add brand_en\u0026brand_cn (e27737037, tangbin) redis update tags fix (c45573b77, tangbin) aws change flavor fix (dac711343, TangBin) server create sku parameter fix (176f32e80, TangBin) change os_arch_arm to os_arch_aarch64 (03d96ca48, tangbin) update vendor (340b914db, rainzm) host 编译跨平台兼容 (c7782f240, Zhang Dongliang) imagetools NormalizeImageInfo update (dba28b7fa, TangBin) warp aws err with errors.Wrap (3f4094e9d, TangBin) add cost report module (b803de070, bistuzx@163.com) server skus filter by mem size fix (0511cc0c7, tangbin) loadbalancer add lb purge validate (bc960367a, tangbin) add budget set alert log (a2ddd9358, bistuzx@163.com) fix reservation columns (d5d72a977, bistuzx@163.com) add cost\u0026prepaid_cost to reservation (5f7d84872, bistuzx@163.com) fix budget import format (6af676b93, bistuzx@163.com) fix reservation import format (005ed23fa, bistuzx@163.com) add meter budget\u0026event\u0026reservation module (4bd398db5, bistuzx@163.com) .circleci: use centos-build:1.1-4 (dfc9b4393, Yousong Zhou) scripts/docker_push.sh: minor polishments (d37762578, Yousong Zhou) scripts/docker_push.sh: use toplevel Makefile target (aa45c158c, Yousong Zhou) scripts/coverage.sh: detect use of “-mod vendor” (e01492df4, Yousong Zhou)  Procutils (4)  WaitZombieLoop: remove unneeded info request (709ddccc2, Yousong Zhou) WaitZombieLoop: less verbose iota (f970e22b9, Yousong Zhou) WaitZombieLoop: use const str “1” for my pid (26013e66b, Yousong Zhou) add WaitZombieLoop (a1044c1af, Yousong Zhou)  Refact (1)  region: resource tags (68cf1eaea, lvyangyang)  Region (16)  guests: sshable: more compact make-sshable-cmd (5b2fe2100, Yousong Zhou) guests: sshable: add GET /servers//make-sshable-cmd (264c58073, Yousong Zhou) guests: sshable: add POST /servers//make-sshable (b090a63c3, Yousong Zhou) guests: sshable: add field sshable_last_state (cba83b48a, Yousong Zhou) guests: sshable: refactor for reusability (98489ca03, Yousong Zhou) guests: sshable: only check sshable state when in running state (460e54c91, Yousong Zhou) guests: sshable: return early on sshable=true (ba71fcaaa, Yousong Zhou) guests: sshable: more friendly fail reason for proxy_forward (012df167d, Yousong Zhou) guests: add GET /servers//sshable (d34091127, Yousong Zhou) apis: route: add nexthop type “IP” (98cd08bac, Yousong Zhou) fix setting nic index (5ede377c8, Yousong Zhou) attachnetwork: allow attach by network name (5fda85f83, Yousong Zhou) usages: add [{all,domain}.]networks etc. (79a4f27ec, Yousong Zhou) wires: totalCountQ: filter networks by scope and owner (b471c727a, Yousong Zhou) usages: fix field name of vpcs for system scope (aa60527b8, Yousong Zhou) fix error msg for invalid wire_level_for_vmware (ce05e5290, Yousong Zhou)  Regions (1)  lbagents: move pb update/create as mcclient module method (cc7ffd707, Yousong Zhou)  Treewide (1)  wait possible zombies (3a18af8d7, Yousong Zhou)  Util (1)  ssh: add ConnectContext method for ClientConfig (bbd2114f9, Yousong Zhou)  Validators (1)  set xx_id when possible (2f7bd7a7a, Yousong Zhou)  Vpcagent (6)  ovn: fix port match condition formation (c800b240d, Yousong Zhou) ovn: fix qos for eip upload (e5a44d2b6, Yousong Zhou) ovn: add ClaimRoutes (bf5ef89a9, Yousong Zhou) ovn: resolveRoutes from API models (5fd1c309c, Yousong Zhou) models: annotate guest with guestnetworks (1b2878d69, Yousong Zhou) models: add route tables (3b8e4811b, Yousong Zhou)  Webconsole (1)  wait zombies (f519b88f6, Yousong Zhou)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n43 commits to cloudpods-operator - v3.8.0 since this release.\nApigateway (2)  cors: rename spec field name to corsHosts (cd56410, Yousong Zhou) allow setting cors_hosts (15fa2b1, Yousong Zhou)  Bug Fixes (19)  default policy name should be separated by dash (3f6cfc3, Qiu Jian) raid plugin: raid status fix (ad34504, zhaoxiangchun) update vendor (aa53086, Qiu Jian) update process.total name (c182e81, zhaoxiangchun) update system commonalert param (069f1da, zhaoxiangchun) update raid-plugin image tag (557553b, zhaoxiangchun) cloudmon timeout fix (f5e1f64, zhaoxiangchun) make system roles private (9376cb6, Qiu Jian) access_url of common service config (d3ffcfd, Zexi Li) fail to init policy (07c0408, Qiu Jian) update vendor (0dcc5d2, Qiu Jian) build: update vendor (f18a924, Zexi Li) cloudmon: crond commond fmt err (98a21dc, zhaoxiangchun) glance: comment s3 switch logical (be1c5c9, Zexi Li) glance: s3 endpoint should use domain resolve (0f5438f, Zexi Li) minio: disable minio component when status is fail (6b95148, Zexi Li) monitor: raid卡监控规则status过滤参数调整 (ffe5273, zhaoxiangchun) operator: modify crontab default interval (977e222, zhaoxiangchun) region: let region server system init resources only once (233c6fb, Zexi Li)  Features (15)  add process common alert policy (218503c, zhaoxiangchun) init devtool script and ansible reference for devtool (ff793ee, rainzm) deploy minio (cb8e727, Zexi Li) support jdcloud monitor metric (18fdf83, zhaoxiangchun) support HuaweiCloudStack rds metric (009e560, zhaoxiangchun) build: support multi arch docker image (0343a32, Zexi Li) cloudmon: support HuaweiCloudStack metric (cf4989a, zhaoxiangchun) cloudmon: add storage monitor metric config and modify cloudmon config infection func (27f1f15, zhaoxiangchun) cloudmon: update cloudmon component image info (7a390f5, zhaoxiangchun) cloudmon: add cloudmon alertrecord crontab (16d16e5, zhaoxiangchun) crd: support inject imagePullSecrets (9ee00e5, Zexi Li) glance: add minio support (e37d8b6, wanyaoqi) k8s: enable kubeserver (90ccd61, Zexi Li) monitor-stack: add monitor stack component (dee274f, Zexi Li) operator: set default resources limits for each component (38914e4, Zexi Li)  Others (6)  update vendor (f0b98aa, Qiu Jian) feat：add jdcloud rds metric (a113f84, zhaoxiangchun) update manifest version to v3.7.5 (87770c0, Zexi Li) update vendor (ba527ad, rainzm) Add cloudproxy (9c6acee, Yousong Zhou) update vendor (5af2ebd, Qiu Jian)  Vendor (1)  bump to current tip of release/3.7 (e85056c, Yousong Zhou)   cloudpods-service-operator 仓库地址: https://github.com/yunionio/cloudpods-service-operator\n1 commits to cloudpods-service-operator - v3.8.0 since this release.\nFeatures (1)  build: support arm64 build (c817154, Zexi Li)   dashboard 仓库地址: https://github.com/yunionio/dashboard\n516 commits to dashboard - v3.8.0 since this release.\nBug Fixes (126)  dashboard public default config (88aea0f0e, mj) cdn action (f272a5cae, Qu Xuan) add cdn permission (dd8f3a13a, Qu Xuan) cdn menu and permission (c5e1a88ee, Qu Xuan) menu icon (f7c4d4465, dongliping) cdn domain info (af59ec05e, Qu Xuan) webapp status (8c5a269ba, mj) webapp and i18n (83daec04e, mj) 账单访问信息引用字段错误，应为关联账号 (dab853cc5, mj) azure dtu (59527a01e, Qu Xuan) webapp (3ed7f2db4, mj) add OWNERS (0bc7bc257, Zexi Li) nas create fix (b69000ff7, Qu Xuan) nas misc fix (0cef00e75, Qu Xuan) enable hcso saml auth (5b6bcb2ee, Qu Xuan) variable errors when list without details (d516ad3e8, Qiu Jian) action policy (2191e10fe, Qu Xuan) misc fixed for cloudbox (a2842b754, Qiu Jian) access group details (32f6da42d, Qu Xuan) format gb for nas capacity (67e260957, Qu Xuan) change route global config repeat relod (d3537b948, mj) update redis status i18n (fc8e452a1, mj) 修复主机创建系统盘容量检测问题 (a56bec06d, mj) init xterm for cloudshell, needs more work (4796c01b7, Qiu Jian) close socket when close cloud shell (4b5dad6d4, Qiu Jian) show file system tags (b21f17589, Qu Xuan) enable openstack vm migrate (a118e8ef5, Qu Xuan) 云账号导出的参数项应与自定义列表的参数项一致，目前缺少域、项目等信息 (193336115, mj) 项目选项更新时，显示不全 (30357fd1f, mj) server price comparator provider (44f2a7e67, mj) server statics filter (6f9cd09bf, mj) optimized distinct filed filter (f9b7bf05d, Qu Xuan) vpc创建参数修复，及速度优化 (2d547989f, Qu Xuan) support update sku postpaid and prepaid status (7f0efb288, Qu Xuan) xterm fit (1603de154, houjiazong) cloudShell UE improvements (5ad66571c, houjiazong)   add cloud SSO and update password to user menu 2. fix monitor translation issue (6e09b37d9, Qiu Jian)   管理后台登录时，相应项目寻找失败 (3693a1ed2, mj) 配额开关打开，域和项目详情页仍然没有配额信息 (ebc902456, mj) add cloudpods guide (f3a89fc45, Qu Xuan) remove debug info (41ecf9f8e, Qu Xuan) storage providers missing generic S3 providers (824b96939, mj) improve prompt when no host/accoutns available (8a6fd7032, Qiu Jian) support replaceAll for lower broswer (f09e90c01, mj) rds field show (659960c75, Qu Xuan) eslint rule (ee69e7170, mj) hidden bill in public (941ebb5e8, mj) rds details (0a2ec3f29, Qu Xuan) network edit style (06fffddfe, gaomingjiu@yunion.cn) disk type (3428f2153, mj) add qcloud tdsql (6757c815d, Qu Xuan) add jdcloud rds trans (d96e9f5c1, Qu Xuan) add jdcloud disaster category (e9bd81656, Qu Xuan) menu i18n (f90cdff50, mj) refine baremetal nic list info and set up l2 wire logic (c18cd024e, Qiu Jian) init cloudshell in apigateway (54e392863, Qiu Jian) Cloudenv/AwsHuawei: #7431 创建天翼云云账号，开启免密登录时创建报错 (0ea5af172, mj) Compute: #10789 baremetal install sys with zone and region error (e328c4237, mj) Compute/AdjustConfig: 调整配置磁盘显示问题 (1152e1a74, mj) Compute/AdjustConfig: 调整配置磁盘显示问题 (a79a2018d, mj) Compute/Host: host access ip i18n (e7005cb47, mj) Compute/vminstance: #7471 京东云链接vnc按钮不应该禁用，且提示信息不对 (155c8c21b, mj) Compute/vminstance: #7471 移动云链接vnc按钮不应该禁用，且提示信息不对 (9ea62e219, mj) Disk: #7450 VMware主机同步磁盘状态后状态为未知，再次同步主机状态，磁盘状态正常 (857ad71e8, mj) DiskCreate: split error (302a75500, mj) Locales: image save fail i18n (e53ed2a1b, mj) Navbar: no project loading (acc44951d, mj) Network: #7264 1366*768分辨率（14寸）创建VPC页面样式显示不全 (c52c509f2, mj) Network: #7449 VMware不支持主机修改IP (45e5ca6da, mj) Network: 新建IP子网，无法选择平台 (c3f670e73, mj) Network: update cloudregion params (33e0370ca, mj) Notify: notice refresh (6c207ab1e, mj) OsSelect: #7261 创建vmware虚拟机时，vmware平台镜像vm-test应该归属于RHEL，不应该归属于linux (db63800e5, mj) OsSelect: #7274 从ISO启动的windows系统vmware虚拟机重装系统选择windows系统时无法选中，前端报错 (9f511e9c8, mj) OsSelect: select instance snapshot params and console error (3ad4cfaac, mj) SearchBox: #7430 云上日志使用时间范围过滤，此前、此后这两种情况点击确定前端报错 (8d8e7407a, mj) SearchBox: change date filter error (cb8cbfdd8, mj) SearchBox: search mutiple error (81d0f9259, mj) SearchInput: update search input placehoder i18n (0a0499da6, mj) ServerPassword: 使用主机快照创建主机，不应该显示设置密码的输入框 (1beacbdfa, mj) ServerPassword: 主机快照默认选中保留镜像设置且不支持更改类型 (41be20264, mj) SkuList: #3134 批量设置销售状态位置修改 (cd8c47fdd, mj) Tag: identity tag params (2cf18965f, mj) Tag: identity tag details api version (32bc683e7, mj) TagFilter: update tag filter (195d20f40, mj) TagSelect: add max-width (87a9a59da, mj) TagTableColumn: #7435 列表鼠标hover标签icon时，只展示user的标签，不展示ext的 (f0a0c89e3, mj) ThirdProcess: comment show empty (edb4076bc, mj) Vpc: 新建vpc无法切换域 (845025160, mj) Xterm: refresh page method error (6cddf8180, mj) bill: fix bill overview overflow tilte (2142e2f33, GuoLiBin6) cloudenv: modify api for clouduser userselect (e794fb495, GuoLiBin6) cloudenv: update scope params (85af40a2e, mj) cloudenv: add success tip when account sync success (69ec92314, GuoLiBin6) cloudenv: change cloudenv resource_name field (bab3f2acb, GuoLiBin6) cloudenv: add account domain check (e64233a2b, GuoLiBin6) cloudenv: cloudgroup list add domain filter (6bbc75694, GuoLiBin6) cloudenv: bind local user (496fe4962, GuoLiBin6) compute: transfer i18n (2d539298c, songdengju) compute: add data disk backend (3c7a1ab83, mj) compute: 修复功能选择vmware，没有显示主机快照菜单 (bdd7db3f0, mj) compute: no use network fill error (372258d65, mj) compute: add network default params limit (bc11a48f2, mj) compute: 网络切换到自动调度后弹性公网IP使用默认，不支持新建 (ce284434d, mj) compute: os select backfill (0ad4b1860, mj) compute/createServer: eslint error (bf4bc54b3, mj) dashboard: modify i18n in userinfo panel (249b939df, GuoLiBin6) dashboard: fix global search pagenation (ee80af409, GuoLiBin6) dashboard: price \u0026 aliyun elb create fix (3de61f61f, tangbin) dashboard: modify userInfo panel username (73a4d8c81, GuoLiBin6) dashboard: env,brand,region remove default value (71158160f, mj) db: mongodb event-drawer add filter (b8398537d, GuoLiBin6) db: modify db router hidden (533598b7f, GuoLiBin6) db: fix can’t show network when dependent parameters are updated (rds-create) (96f772620, GuoLiBin6) eslint: update eslint rule (270bafb4c, mj) eslint: update eslint rule (f2d2d9532, mj) helm: get chart by version (36427f1d6, Zexi Li) host: 宿主机详情的type签应该不变 (6c2f0f8c0, mj) i18n: add ecloud i18n (0799dc0ea, mj) k8s: ingresses manager get rawdata (c09b23dad, Zexi Li) k8s: service create selector (9cc8c66f1, Zexi Li) network: fix waf show text (1dff3bf60, GuoLiBin6) rds: After recovery action to refresh rds list (8b0bc6ee8, GuoLiBin6) utils: add details check before the secend fetch (007d3eecb, GuoLiBin6) workflow: 通过主机工单创建虚拟机失败，工单详情中缺少查看失败原因的链接 (6730e5020, mj) workflow: 工单走到系统管理员，待我审批中当前环节错误 (2a2e6cf8a, mj)  Bugfix (15)  cloudenv: modify projectmapping aciton scope (cf71ad0fe, GuoLiBin6) cloudenv: add project-mapping menu hidden (89c95e2be, GuoLiBin6) cloudenv: show sort column title (64324a507, GuoLiBin6) cloudenv: project mapping (66aa47bfb, GuoLiBin6) clouduser: delete extra title in clouduser (bdaaf13c5, GuoLiBin6) compute: close vminstance filter(vmem_size \u0026 disk) (3c2d75733, GuoLiBin6) compute: fix osselect imageselect (2db84ef08, GuoLiBin6) compute: restore arch column (c81e9f8f9, GuoLiBin6) dashboard: adjust echart (10a47262b, GuoLiBin6) k8s: show detail list (1e0973ac9, GuoLiBin6) navbar: change notifyPopover visiable (373c0a2e8, GuoLiBin6) projectmapping: modify detail sidepage (d10a08e1f, GuoLiBin6) projectmapping: modify tags validate when the tags value is undefined (7545e5b28, GuoLiBin6) sku: add sku update default checked (fcb1ec962, GuoLiBin6) vminstance: modify Cumpute vminstance label (7e21cdacf, dongliping)  Code Refactoring (1)  monitor: vminstance and baremetal sidepage (9e8bdbb13, Zexi Li)  Feature (21)  request list without details first and then with details (df38c3bc3, Qiu Jian) support Google OIDC IDP (276076512, Qiu Jian) add a eip sidepage to server (e7577fd66, Qiu Jian) bill: add budget tags (7fdcd399c, GuoLiBin6) cloudenv: config router (ab9b2ecde, GuoLiBin6) cloudenv: delete-pricecomparator-list-sync (034995df1, GuoLiBin6) cloudenv: add project-mapping function (cf24e6ed8, GuoLiBin6) clouduser: add Cloud Account in SamluserList (ff20d6ae9, root) compute: fix compute datadisk type (929ff5000, GuoLiBin6) compute: add delete disk\u0026instance options (8e1bdc19a, GuoLiBin6) compute: add #vm sort (ded830de7, GuoLiBin6) cumpute: add cumpute vminstance filter (7de0f1825, 郭丽斌) dashboard: add quota sort (7e55548b3, GuoLiBin6) dashboard: add dashboard metric url (a7b6628c0, GuoLiBin6) host: add host vm sortable (e8ccb17d1, GuoLiBin6) scope: config menu list (a407d110f, GuoLiBin6) scope: fix feishu verify (4ecaeeefd, GuoLiBin6) scope: smaluser action (903489452, GuoLiBin6) system: add project instance snapshots (f12ebd543, GuoLiBin6) tag: expend tagcolumn (659ae641d, GuoLiBin6) vminstance: modify default checked on deletevm (ecfbbd99c, GuoLiBin6)  Features (106)  add back index time (2dc3d4150, mj) update font (1c57393a9, dongliping) update icon (936a33545, dongliping) update ui style (c410209da, gaomingjiu@yunion.cn) update params and i18n (e4e3e79d7, dongliping) add cdn (38b850bc1, Qu Xuan) remove refresh (aa91e70f8, mj) update menu icon and refresh i18n (bc7591f81, mj) update dashbord icon (fc4f2a237, gaomingjiu@yunion.cn) update logo (5bc780059, mj) server data mac loading (75c64e167, mj) server data sync loading (6d338ab48, mj) page list column data loading (ebaf44040, mj) server data sync loading (dca0bfa70, mj) add hcso (a6afbecb4, Qu Xuan) add github PR template (b9e7c5360, Zexi Li) update openeuler image icon (5ef85d9fa, mj) add bill global config (e55fa1c35, mj) hidden yaml tpl (edb89bab3, mj) add kafka (44e02e9b6, Qu Xuan) 支持数据自定义处理 (3380b684b, mj) RDS、REDIS列表增加状态统计 (0f65ec993, mj) remove component register (88541309b, mj) update 计算模块资源增加状态统计条 (e435f5b9a, mj) 物理机列表增加状态统计 (2b11d93ad, mj) webapp只有选择azure平台展示及UI策略支持 (dd7b05c13, mj) add elastic search (033930880, Qu Xuan) update webapp (d12afda42, mj) add webapp icon (5488a1c4e, mj) update webapp i18n (0996f4a0a, mj) update webapp (b4644f87e, mj) add webapp (b2e6a35ad, mj) support ext tag control (9a6fffc05, mj) host add statistics (baecdd9cd, mj) add baremetal statics (9ede67a5e, mj) update nav projects (adba89149, mj) 优化下拉选择框在内容过多时无法有效查看信息 (87b4f765d, mj) 二次定价支持对账单类型进行限制 (b3cbcc04e, mj) add cloudpods (a2066d098, Qu Xuan) add external_id support (e8c09d942, mj) BaseDialog: add dialog drag (503bf5b13, mj) Cloudaccount: add jdcloud support bill (dd1c25be7, mj) Cloudenv: 只有管理后台下展示提示信息 (fe7206b4c, mj) Compute: vm addbackup add forcast (e3b717695, mj) Compute: server list action add permission (8c9462cfc, mj) Compute: vm transfer add forcast (b3b8787d2, mj) Compute: update transfer host i18n (aba1be9f0, mj) Compute: vm addbackup add forcast (d6afc0512, mj) Compute/SnapshotPolicy: #2608 快照策略批量关联硬盘 (42721986f, mj) Compute/snapshotpolicy: 快照策略批量关联硬盘参数处理 (d793f1a09, mj) Host/Storage: add single actions in host sidepage storage (fc1f2b416, mj) Logo: 开源版logo替换为cloudpod的logo (479233f99, mj) Network: add vlan id filter (78e52272a, mj) OcSelect: update OcSelect Component (ee603a86f, mj) OcSelect: add OcSelect component (8bd922bc3, mj) OcSelect: add OcSelect component (240e5eafe, mj) OcSelect: update OcSelelct Component (1180ba9d2, mj) OcTerm: 优化CloudShell拖拽卡顿问题 (68f3aca18, mj) OcTerm: update octerm (f3217ed51, mj) OcTerm: update octerm style (acb87a0c7, mj) Page: change website title (af5e69b81, mj) ProjectMapping: update sync policy support bind subscription (10904a80d, mj) ProjectMapping: sync policysupport bind subscription (05f637e7c, mj) ProjectMapping: update sync policy support bind subscription (f669a5b7f, mj) ProjectMapping: update sync policy support bind subscription (2d3da9ab5, mj) ResStatusTab: 列表返回各状态的资源数量，方便用户统计、分析 (0eb8491ad, mj) ResStatusTab: update interface (465c96c58, mj) ResStatusTab: update res status tab (3fe2cabe7, mj) ResStatusTab: update i18n (517d4591f, mj) ServerNetwork: support i18n (399519a64, mj) ServerNetwork: 调整主机创建网络部分使用OcSelect组件 (3910c79a9, mj) Tag: add identity tag (e0c2a033d, mj) Tag: add permission support (959899425, mj) TagDetailColumn: add permission support (921820fd0, mj) TagFilter: 标签增加优化，支持选择同一个key不同的value (6aa731864, mj) TagSelect: #3087 标签的复杂搜索，支持contains, startswith, endswith, not (f22c9e83f, mj) TagSelect: support min-width (99c53985a, mj) bill: adjust bill currency opts (c1ba19afb, GuoLiBin6) bill: add suggestion i18n (63f6a2a69, mj) build: add makefile (df73e8563, Zexi Li) cloudaccount: add account filter (b43816589, GuoLiBin6) cloudaccount: account column add cloudprovider (c3d4b8105, GuoLiBin6) cloudaccount: jdcloud account support bill tasks (d2a68b0ba, GuoLiBin6) cloudenv: cloudprovider support delete (ae18c87c4, GuoLiBin6) cloudenv,monitor: update receivers params for domain mode (a757f7d6e, mj) cloudenv,monitor: update receivers params for domain mode (1077e6a78, mj) compute: support modify disk driver and cache mode (a2158afca, GuoLiBin6) compute: add medium_type for kvm local disk (164766708, GuoLiBin6) compute, network: add action permission (2cb451784, mj) constants: add exchange rate status in i18n (9f9973763, GuoLiBin6) curency: 巴西币种支持 (19c46c9b4, mj) currency: 增加全局币种映射常量 (49a63cc59, mj) dashboard: add userinfo panel (2822e97e7, GuoLiBin6) dashboard: modify currency opts (d7a852449, GuoLiBin6) dashboard: modify more to icon (d575558ea, GuoLiBin6) db: add mongodb (206f9fa13, GuoLiBin6) github: update PR template (957ba0274, Zexi Li) i18n: 移动云文案处理 (0233046dd, mj) i18n: vm instance (5fa763e39, mj) image: update web-base image to v3.6.1 (f7a3a8171, Zexi Li) monitor: temperature monitor (a3846e9e8, Zexi Li) monitor: extend alert record (464584b8f, GuoLiBin6) network: show waf resource name (4aee8586c, GuoLiBin6) rds: rds recovery (6d07beb61, GuoLiBin6) readme: update README (995cb0c5b, Zexi Li) suggestion: update i18n (c0f764afe, mj)  Fit (1)  add cloudpods vm op (a4ff2ed00, Qu Xuan)  Optimized (1)  middleware (c5264ee5b, Qu Xuan)  Others (245)  华为云Stack删除主机同时删除硬盘等 (3bd42d76a, GuoLiBin6) rds details page add hcso (fc121340c, tb365) 恢复磁贴限制 (f412d0cc1, GuoLiBin6) 调整首页样式 (98c2ce015, GuoLiBin6) hcso create vm add cloudprovider (d08647051, tb365) image overview summary (eee1d628c, tb365) image list add getOsTypeFilter (1667ed392, tb365) basic monitor chart add mem used percent (000f63534, tb365) robots label (9a79341d4, tb365) 修磁贴内容多溢出问题 (e77d123b7, GuoLiBin6) monitor query data add limit offset (73944184f, tb365) monitor query data add limit offset (702dd3d33, tb365) SshProxyCreateForm change name to generate_name (2346a0ebe, tb365) add pe zh docs (b230ee870, tb365) monitoroverview watch scope change (4a60e08e2, tb365) batch install agent (7f8c43de3, tb365) update setup ssh form (0a533b8ff, tb365) add capacity (7fd17a97b, tb365) 调整dashboard磁贴样式 (82d6b3b7c, GuoLiBin6) 修改MongoDB备份列表展示 (383e42ca9, GuoLiBin6) ajust config fix (73b708a0d, tb365) add default dns setting (74ff22165, tb365) 添加资源翻译 (9783a697c, GuoLiBin6) add route (7649a191a, tb365) add cloudgroup for huaweicloudstack (e6970cc20, tb365) server price compare fix (a2d6e78bc, tb365) adjust config fix (6901644b3, tb365) 修复硬盘操作对华为私有云平台的验证 (ccb44aa4c, GuoLiBin6) add route for hcso (5dd4ed2d7, tb365) 修复编排-虚拟机实例无数据时默认值问题 (4ffb3fe23, GuoLiBin6) object download (6e299d470, tb365) huawei private cloud adjust config (18db04bf7, tb365) 调整mongodb实例类型 (17f7f5b4f, GuoLiBin6) mongodb去除访问方式 (b4687e0a1, GuoLiBin6) huawei cloud stack fix (3ada6adc5, tb365) huawei cloud stack fix (bf84e43c0, tb365) huawei private resources create actions (1728c7c52, tb365) 修复个人信息查询权限 (29876ba11, GuoLiBin6) 价格清单添加新建按钮 (b3ba10353, GuoLiBin6) MongoDB优化 (b368efbe1, GuoLiBin6) add huawei private cloud account create page (43b82d342, tb365) fix the secend fetch (8f56e9614, GuoLiBin6) 个人信息磁贴添加域 (2f91ee4cb, GuoLiBin6) feat(#2212): 新建主机时，选择平台，过滤相应的宿主机，用宿主机的网络来过滤可用的虚拟机网络 (b39bb3ea5, mj) totp qr image display fix (bb8e12315, tb365) 关联本地用户必填验证 (cbe06dc59, GuoLiBin6) 新建免密登录用户,默认显示自己 (a3eb90d21, GuoLiBin6) 修改英文翻译 (e134cdbc9, GuoLiBin6) 修改备份列表 (a63152632, GuoLiBin6) 修改文案大小写 (fa6e5a670, GuoLiBin6) 修改文案 (44de8c22e, GuoLiBin6) 修改文案 (a4aab36a8, GuoLiBin6) 尝试解决ext标签过滤问题 (bf0e637f3, GuoLiBin6) baremetal install agent (d03390e8f, tb365) cloudshell fix (3b0758220, tb365) 调整批量操作验证顺序 (b571454ff, GuoLiBin6) 修改云订阅删除验证顺序及提示文案 (bec13cd44, GuoLiBin6) 云订阅启用禁用添加弹框提示 (133de038e, GuoLiBin6) 修复多币种对控制面板的影响 (5281fa97a, GuoLiBin6) 添加云订阅删除的Azure平台限制 (f98c2e5b0, GuoLiBin6) 添加定时器清除,修改跳转地址 (1f30ed048, GuoLiBin6) 修复错误页因未跳转出现倒计时负数问题 (b3c93de74, GuoLiBin6) fix vue.config.js path errror (a2938cf39, tb365) disable google translator (3f6972ca4, tb365) import vue config from scope dictionary (3f2251453, tb365) 为top5磁贴添加跳转 (c01ba5fbf, GuoLiBin6) waf策略 (a0927629a, GuoLiBin6) waf条件 (305a31405, GuoLiBin6) dictionary add jenkins (b42378ef2, tb365) Adjust the order (73c201a75, tb365) add notify topic page (e793f6d9c, tb365) waf-statement (28e90b1b0, GuoLiBin6) translations fix (c420001d7, tb365) kvm install agent fix (06cd85fcb, tb365) summary-cards style fix (fddb5b85c, tb365) host overview card fix (95a46df08, tb365) overview card histogram chart fix (aa39a187c, tb365) host overview card fix (69eb67ca6, tb365) 忽略证书错误 (66a8e925f, tb365) alert history chart fix (a54f9711e, tb365) monitor overview card fix (9b2aea9fc, tb365) temp (3f503c564, GuoLiBin6) monitor alert contact channel fix (1251f4154, tb365) overview card fix (1c6cfd441, tb365) azure listener show front ip (5ddc7e42a, tb365) update 通知渠道设置 (a4258fc40, mj) 修改同步策略详情页icon (0fd6421dd, GuoLiBin6) license fix (96b375bcf, tb365) 去除误添加的公共tablefilter (bd0a91dbc, GuoLiBin6) 扩展列表搜索,添加资源类型搜索条件 (2b08440ae, GuoLiBin6) rds jdcloud monitor (201b1c21c, tb365) support azure elb sync (f59fb2528, tb365) vminstance monitor chart fix (bce15bfcd, tb365) fetch monitor pannel fix (9379fd99a, tb365) 列表扩展 (b2777b228, GuoLiBin6) monitor diskip chart fix (3e85a0f5a, tb365) commonalerts update fix (0e501211e, tb365) agent_diskio add selectFunction (5d3df9feb, tb365) agent_diskio add selectFunction (bb9e3379c, tb365) vminstance detail monitor page update (9efa39906, tb365) fix count error (cedd6b5c5, mj) monitor ring chart event fix (124e21ecf, tb365) update metric alert database fix (02579280c, tb365) add res status tab (86afe36ae, mj) adjust system route order (9c439d75a, tb365) vminstall basic info add agent install status (d622aa0a0, tb365) lbcert status icon fix (132bcf629, tb365) add features icons (f2ff3c2c7, tb365) 修改验证 (693970f93, GuoLiBin6) monitor overview add resource summary (557764696, tb365) 权限-扩展按钮权限验证 (c024b850f, GuoLiBin6) support license v4.0 (5600db04b, tb365) 修改磁贴展示金额单位 (ca4fda900, GuoLiBin6) 修改-资源消费占比磁贴首次添加不展示问题 (619541868, GuoLiBin6) 修改云账号-azure/aws-billing_scpte未选择时默认为managed (34633db39, GuoLiBin6) 多币种 (7a16c90c0, GuoLiBin6) 默认改为all (fcd47d85a, GuoLiBin6) 云账号-更新账单文件-azure添加账单分析范围 (906110481, GuoLiBin6) 修改磁贴位置 (6ae29fcfb, GuoLiBin6) 修复云账号详情页启用禁用 (299bd9130, GuoLiBin6) lbacl source ip desc fix (9c978e9b5, tb365) lb style update (9d1e860cd, tb365) add jd cloud docs link (e4ed9ddc1, tb365) install agent pe help link fix (4379e1d29, tb365) contact page update (e7610bf05, tb365) Update README-CN.md (45b25b6e3, Jian Qiu) Update README.md (64b5fb16b, Jian Qiu) 宿主机.云账号添加 删除 启用 禁用后同步刷新云资源信息 (118f1bafd, GuoLiBin6) 拆分导出的列表项 (371f467b4, GuoLiBin6) 修改宿主机及物理机导出列 (d3210da64, GuoLiBin6) 调整磁贴展示 (c7a44f8d5, GuoLiBin6) 样式 (0e22853fe, GuoLiBin6) 添加虚拟机关机不收费 (5bdd65183, GuoLiBin6) 调换磁贴位置 (738b88ef7, GuoLiBin6) 费用添加负数说明 (492ed5381, GuoLiBin6) 修改磁贴权限 (1e6a9f90a, GuoLiBin6) 添加云账号健康状态磁贴 (b1d551740, GuoLiBin6) 修改过滤条件 (14f4b9c5d, GuoLiBin6) 添加近30天告警与消费趋势柱状图 (8fb4a0c6a, GuoLiBin6) change network select helplink style (899eafaf1, tb365) 添加磁贴饼图 (27f4fbac2, GuoLiBin6) redis\u0026rds network select fix (6c7c41a6f, tb365) 修改磁盘-已挂载的磁盘-扩容接口 (cf5ad4c65, GuoLiBin6) 添加平台-列的排序筛选项 (cd1dc0b9a, GuoLiBin6) fix:移动云文案修改 (0363f0996, dongliping) server price compare fix (2d46d734d, tb365) redis\u0026rds network select add helplink (e7906fca5, tb365) base select add projects (a70df8e85, tb365) monitor line chart display fix (919fb0767, tb365) change jd cloud logo (bdbd5f4f6, tb365) support jd cloud (512d589c0, tb365) 修复-删除虚拟机参数丢失 (5d9d3d518, GuoLiBin6) 更新提示 (77aee97a1, GuoLiBin6) 修改匹配条件提示文案 (a931177a9, GuoLiBin6) loadbalancer listener rule add domain column (0a7ecba28, tb365) 详情页-标签扩展 (c368452a3, GuoLiBin6) price comparator fix (ab366837f, tb365) 添加匹配条件的默认值 (baf59ce95, GuoLiBin6) 添加标签支持修改 (216a92dfc, GuoLiBin6) common alert add default chart name (d9af982c8, tb365) dashboard chart save add default name (939d38db2, tb365) lbcert cache add common name \u0026 subject_alternative_names (8dc759cc8, tb365) 添加新建匹配条件的默认值 (030ae41db, GuoLiBin6) 添加已绑定云账号不可选中 (0d9f7b8b8, GuoLiBin6) 添加详情页操作组 (705af9ef3, GuoLiBin6) 修改标签key 修改规则删除保留之前的分割线 添加规则-规则管理的跳转 (415a6017d, GuoLiBin6) 修改-同步策略-更新-标签反显问题 (50825f457, GuoLiBin6) 修改同步策略删除时的提示文案 (a6f307295, GuoLiBin6) 添加标签个数限制及删除规则 (8393a4b15, GuoLiBin6) 优化 (41cfce0a0, GuoLiBin6) add month \u0026 year price (23c66a205, tb365) monitor query add metric translations for storage (3aa286521, tb365) monitor table add storage_name (f1dc04a45, tb365) 删除无用文件 (b909527e9, GuoLiBin6) 规则列支持扩展 (c46c553e0, GuoLiBin6) 修改过滤状态 (262daf990, GuoLiBin6) monitor query add metric translations for storage (21c1eb7c4, TangBin) create ucloud account support subaccount (b05adc214, TangBin) lbcert add is complete (11fd1b2e7, TangBin) dashboard table sort fix (d5ad62d6c, TangBin) dashboard default name fix (6ccbd5b4d, TangBin) dashboard overview table sort by number (8d1e126c3, TangBin) username tranlations fix (7e929dc0b, TangBin) ctyun not support create prepaid instance (517e24c92, TangBin) login chanllenge after login fix (4c73b5aef, TangBin) overview add event data loading (4b6b11d20, TangBin) delete vminstance temp (7a86ec444, GuoLiBin6) network list export add ports used (4870d29b6, TangBin) vminstall agent install fail reason (3789a8745, TangBin) vue router meta add propertity canRenderDefaultLayout (f3c2c2ab6, TangBin) network route hidden fix (2c1dc44cb, TangBin) monitor line chart add data smooth (731d02242, TangBin) scopedpolicybindings update (d766c6c04, TangBin) scopedpolicybindings update (375975317, TangBin) monitor line chart add scale (cb42876cb, TangBin) monitor line chart add scale (c0213b0ea, TangBin) monitor dashboard chart scope fix (3b01cc3cd, TangBin) rejust monitor ssh agent menus order (0a9bff721, TangBin) add agent trans (4320c888d, TangBin) line chart title fix (170deb576, TangBin) sys disk default size fix (9b0054b14, TangBin) image select image arch fix (7fd89fc19, TangBin) add price info scope (ef9209cb4, bistuzx) image select image arch fix (6379cd342, TangBin) fix disk price (8f1b5ec6d, bistuzx) image select image arch ifx (32ca51a3f, TangBin) add tooltips for ssh proxy endpoint create form (7b010238d, TangBin) domain project select fix (0a4026288, tangbin) hidden common alert tips while scope is projct (d5f0172c2, TangBin) public cloud image filter add os_arch (c0aeff014, TangBin) instance price comparator fix (161063116, TangBin) 修改成本优化英文 (ed88f6359, GuoLiBin6) 修改图标 (e3e9c3175, GuoLiBin6) global search hidden menus fix (9beb18e46, TangBin) setup altert for monitor charts fix (47a197904, TangBin) install agent form i18n fix (78879605e, TangBin) server-price-comparator capability fix (a66d57ebd, TangBin) update help link (77aae4aed, TangBin) windows not support install agent (75f477c80, TangBin) change security optimization to security inspection (d16aeb1d9, bistuzx) username tips fix (3571cba85, TangBin) sku add column cpu arch (7e75edef9, TangBin) setup ssh username tips (11b5e2a0f, TangBin) dashboard database fix (c28977081, TangBin) exporer dashboard create name repeated fix (6176348d3, TangBin) disk create domain fix (5a4921c63, TangBin) monitor dashboard domain select style fix (f9fbaf124, TangBin) ssh setup proxy validator fix (5b3986788, TangBin) ssh setup proxy validator fix (b6c6f7d7d, TangBin) add bucket not found warning to cloudaccount (2936567d0, bistuzx) domain fix (e7fd07451, TangBin) create monitor dashboard chart fix (cefa31628, TangBin) ssh proxy bugfix (b635bc564, TangBin) add proxy endpoint list tips (7962863c9, TangBin) add dock (72b6d31a6, TangBin) cloudproxy match scope vpc/network fetch (a9017ecee, TangBin) remove ssh proxy domain filter (dfa565fcc, TangBin) create ssh proxy title fix (b7758050e, TangBin) add ssh proxy batch delete (11ccb8724, TangBin) remove dashboard chart name repeat check (e294187e6, TangBin) hidden monitor dashboard fix (f5ee20081, TangBin) support ssh proxy (08d8fd008, tangbin) fix conflict (ea8839f26, mj) temp commit 20201231 (4b904a5e8, tangbin) temp (96b51ccff, tangbin)   kubecomps 仓库地址: https://github.com/yunionio/kubecomps\n25 commits to kubecomps - v3.8.0 since this release.\nBug Fixes (12)  build: embed heml pkgs remove it (36636f7, Zexi Li) kubeserver: grafana inject system dashboard when ingress used (be9ac29, Zexi Li) kubeserver: chart_ignores use regexp (3fbcb9c, Zexi Li) kubeserver: clean up zombies (b94dc0c, Zexi Li) kubeserver: helm release resource object’s name and id missed (4fab9e2, Zexi Li) kubeserver: helm release resource list (b1a59d2, Zexi Li) kubeserver: helm repo remove (73df2be, Zexi Li) kubeserver: helm add repo already exists error (f3bd5c7, Zexi Li) kubeserver: import cluster input data unmarshal error (1c70127, Zexi Li) kubeserver: make system cluster resource getable (ed024dd, Zexi Li) kubeserver: sync cluster not fatal (d74b7d9, Zexi Li) kubeserver: cluster ca and key field nullable deleted (8da6044, Zexi Li)  Features (13)  build: go generate use vendor (e172ef3, Zexi Li) build: support arm64 build (6715da6, Zexi Li) kubeserver: resources limits for component (6d94271, Zexi Li) kubeserver: monitor component support disable (cc00d34, Zexi Li) kubeserver: update system cluster components setting (10839d5, Zexi Li) kubeserver: add monitor minio component (ad81bbf, Zexi Li) kubeserver: sync telegraf dashboard to system grafana (529615e, Zexi Li) kubeserver: add cluster precheck api (98c8d8a, Zexi Li) kubeserver: change configuration of minio (3e7aeff, Zexi Li) kubeserver: chart ignores options (f488734, Zexi Li) readme: add readme (b245c65, Zexi Li) readme: add build steps (39bdda4, Zexi Li) repo: repo url allow updated (51bbedd, Zexi Li)   notify-plugins 仓库地址: https://github.com/yunionio/notify-plugins\n5 commits to notify-plugins - v3.8.0 since this release.\nBug Fixes (3)  build: build arm64 image (4a11361, Zexi Li) workwx: no user exist (41dc5d9, rainzm) worwx: return correctly when fetch contact (08c831e, rainzm)  Features (2)  adds domain attributes for notify config (77e72b7, rainzm) be compatible with notify’s change to support international mobile (caaa6ed, rainzm)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n13 commits to ocadm - v3.8.0 since this release.\nBug Fixes (7)  set operator imagePullPolicy IfNotPresent (9643215, Zexi Li) cluster: update vendor make build pass (76a69b5, Zexi Li) cluster: set OS_PROJECT_DOMAIN of cluster auth info (1096ccc, Zexi Li) git: 切分支例行更新 version tag (b7a0163, Zhang Dongliang) k8s,keepalived: 解决 k8s 高可用集群在部署时无法获取 nodeip 的问题 (1536c29, Zhang Dongliang) keepalived: 解决 高可用架构部署的默认网卡传递参数问题 (676a364, Zhang Dongliang) preflight: more accurate of mysql grant error (df3afb6, Zexi Li)  Features (4)  build: 增加arm 下编译 ocadm deb 的步骤(make deb)； 统一跨平台metrics-server 的 tag 名称；升级 k8s-sidecar 到 0.1.275 (d672ebe, Zhang Dongliang) calico,k8s,ovn: 部置calico-node时调整默认配置提升ovn隧道流量的性能 (c4a14ec, Zhang Dongliang) keepalived,ha: 新增 keepalived_interface 变量支持,以便在安装高可用多网卡情况下支持非默认网卡绑定 vip (866ef39, Zhang Dongliang) longhorn: support migrate to source pvc from longhorn pvc (2df20ec, wanyaoqi)  Misc (1)  vendor: update vendor to master branch (051f70f, Zexi Li)  Others (1)  update mod (0cc9f1e, TangBin)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n13 commits to sdnagent - v3.8.0 since this release.\nAgent (1)  ovn: ensure iptables fastpath for geneve traffics (352547c, Yousong Zhou)  Bug Fixes (2)  tc: aware of ingress qdisc (06a0244, Zexi Li) tcman: delete all qdiscs before batch replace (9f4715c, Zexi Li)  Build (2)  note on deploying ovs, ovn components (246ce3e, Yousong Zhou) reword README.md for deploying eipgw (a71f02e, Yousong Zhou)  Features (1)  build: make multi arch manifest docker image (591a93d, Zexi Li)  Flowsource (1)  allow conntrack invalid packets (f2e212e, Yousong Zhou)  Others (3)  ovn-md: ovnMdServer: local origNs (a3b8eae, Yousong Zhou) ovn-md: ovnMdServer: fix logging typo on Stop (bf4efbc, Yousong Zhou) .circleci: go test with “-mod vendor” (f59f416, Yousong Zhou)  Ovn (1)  mapped: fix possible traffic loop across different vpcs (b8c2af6, Yousong Zhou)  Utils (1)  guest: ignore “secgroup” or “secgroups” (394ccc0, Yousong Zhou)  Vendor (1)  bump to current tip of release/3.7 (bf49b2d, Yousong Zhou)  ","excerpt":"发布时间 2021-08-27 13:13:35\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.8/3-8-0/","title":"v3.8.0"},{"body":"Release time: 2021-09-14 10:41:59\n cloudpods Repo: https://github.com/yunionio/cloudpods\n145 commits to cloudpods - v3.7.7 since this release.\nAdd (1)  hcso iam (629626458, Qu Xuan)  Bug Fixes (95)  routes to private prefixes should be distributed on private nic (9c0f99d46, Qiu Jian) avoid double counting when compute networks nic count (597f2b149, rainzm) resolve permission issues for samlusers and quotas (bed1c36fd, Qiu Jian) inter-vm traffic limited by eip bandwidth limit (a212d77de, Qiu Jian) add ceph-common to climc image, so as to make rbcli work (e1e58ef11, Qiu Jian) set disk driver and network driver for converting esxi to kvm (f678eb97b, Qiu Jian) do not lock system account user (e6fbedf77, Qiu Jian) add purge split log commands for cloudevent and cloudlog (3423a9105, Qiu Jian) server migrate network to a vlan network (b70e15851, Qiu Jian) purge splitable logs for cloudevents and logger (feb19332a, Qiu Jian) dhcp classless route encoding error (a865e922d, Qiu Jian) apigateway: totp passcode verify error code fix (c4e41a412, tb365) baremetal: inject mac to cmdline (c222e532a, Zexi Li) baremetal: inject mac when admin nic found (4dbecc450, Zexi Li) baremetal: reindex nic (#12088) (0d20002e6, Zexi Li) baremetal: increase ipmitool reboot sleep wait time (16ed81e1d, Zexi Li) climc: modify the code logic of starting “Port-Forward SSH” (344804b0f, Stargic) climc: host-delete use batch delete function (b3c3d1faf, Zexi Li) climc: SSH terminal window changes with the change of local terminal (b3932b0c7, Stargic) climc-base: update tag to 20210901 (8f7de66cf, Zexi Li) cloudcommon: avoid service exit when etcd unreachable (242d7eaa0, Zexi Li) cloudevent: hcso event fix (89ad3778c, Qu Xuan) cloudevent: hcso resource name (37c05a19e, Qu Xuan) cloudid: azure attach enabled subscription policy (5fe7e3e3b, Qu Xuan) cloudid: hcso enable multi tenant saml provider (b7ccd3503, Qu Xuan) cloudid: hcso custom role (7416933ac, Qu Xuan) cloudid: avoid sync clouduser twice (6135e4a7b, Qu Xuan) cloudmon: update ReportOptions field (e0b6acb6a, zhaoxiangchun) devtool: get tenant info via correct field (dd5a0e93b, rainzm) devtool: create serviceurl (d8d330d3d, rainzm) esxiagetn: keep compatible with the lower version vcenter when copying the disk (8ce51213f, rainzm) glance: image fuzzy match by distro (54dbd4b8f, Zexi Li) host,region: disable health checker by default (36e6dddd8, Zexi Li) host-deployer: XFS uuid冲突 无法 mount (38ac153d6, panda) keystone: appsrv listen multi port failed cause of race condition (00aa056e7, Zexi Li) monitor: monitor resource apiHelper fix (9904a6c4e, zhaoxiangchun) monitor: add monitor resource details field (9e9d72d3c, zhaoxiangchun) monitor: fix resource details can’t show monitor metric (b8f7eca40, zhaoxiangchun) monitor: fix monitor slow query (a0fc7d493, zhaoxiangchun) monitor: fix monitor bug (bd82868c9, zhaoxiangchun) monitor: update apiHelper field and log (d8c1b49bd, zhaoxiangchun) monitor: fix agent monitor query (f9bf35fed, zhaoxiangchun) region: sync aliyun qcloud default project (7c71578ae, Qu Xuan) region: allow guest network zero bandwidth limit (ae809ca53, Zexi Li) region: resource count for cachedimages (d8e2f448b, Qu Xuan) region: enable zstack allocate ip by itself (f60d419d9, Qu Xuan) region: adjust the query range corresponding to the alarm strategy (70864334d, rainzm) region: check instancesnapshot in correct place when resize disk (27aa38040, rainzm) region: aliyun rds network sync (a90dbebf5, Qu Xuan) region: lb resource count (5b2dd8027, Qu Xuan) region: sync aliyun classic network ip addr (4b90b74ff, Qu Xuan) region: sync vm os type (92fc4f009, Qu Xuan) region: empty aliyun resource tag (28891dfbe, Qu Xuan) region: delete the wrong tag ‘nullable:false’ (68d5efad0, rainzm) region: eip project sync (80d49a1e7, Qu Xuan) region: access group policy (209b23044, Qu Xuan) region: huawei cloud sync vm os arch (ee28e8903, tb365) region: lb list search address fix (7416d71d7, tb365) region: return region sql error (5b8209d60, Qu Xuan) region: hcso regional eip (5528a163a, Qu Xuan) region: apsara resource group (02201abea, Qu Xuan) region: azure vm disk size (30b112545, Qu Xuan) region: delete dirty network (92e3b7ab4, Qu Xuan) region: return sql error (1500639f0, Qu Xuan) region: apsara endpoint fix (679437989, Qu Xuan) region: update huawei cloud stack update credential (1587eba9e, tb365) region: goimport fix (9e09a7591, tb365) region: baremetal server reuse ip address condition (524182fa2, Zexi Li) region: apsara default region (85c052a6e, Qu Xuan) region: hcso sync server fix (4a32b970b, tb365) region: not set baremetal is_maintenance when action is start (49dd563c6, Zexi Li) region: sync openstack multi zone storages (81341af53, Qu Xuan) region: raise GetNamedNetworkConfiguration error (ebf519bd6, Zexi Li) region: change disk and network drivers for Esxi converted VM (056243e99, Qiu Jian) region: add resource statistics filter params (1e7dce8c3, Qu Xuan) region: prohibit resizing the disk of a esxi vm with instance snapshots (e01cdbb27, rainzm) region: support nas tags (5ad118518, Qu Xuan) region: apsara default region (768560c4d, Qu Xuan) region: avoid get openstack hostid panic (fcba57f1c, Qu Xuan) region: resource apsara resource id not found error (c4ba8aa63, Qu Xuan) region: sync apsara region (51917559d, Qu Xuan) region: optimized qcloud tag sync (18aff683f, Qu Xuan) region: prevent the creation of redundant network segments when managing vmware (c128ad3a8, rainzm) region: huawei region id with project name (a093ab58d, Qu Xuan) region: 不能通过华为云用户创建时间判断云账号注册时间 (0dc41ca79, Qu Xuan) region: support apsara project (36e37958d, Qu Xuan) region: sync apsara project info (054d3f91b, Qu Xuan) region: qcloud database sync (727cc2dcd, Qu Xuan) region: sync with multi worker (54bfc1403, Qu Xuan) region: baremetal spec condition (ef7ae54d2, Zexi Li) region: baremetal server resued address nic count should be subtracted (0d6fe4f4e, Zexi Li) scheduler: options for openstack scheduler (fbdd5a531, Qu Xuan) scheduler: make option EnableQuotaCheck work (e84aee02a, rainzm) vendor: use creack/pty v1.1.11 to adapt go 1.15 (44ef03219, Zexi Li) webconsole: add jdcloud vnc (d0908d992, Qu Xuan)  Fea (1)  monitor: monitor apiHelper add domain,project (c11ae1235, zhaoxiangchun)  Features (28)  hcso sku sync (b064162f9, Qu Xuan) ansibleserver: update file-repo to v0.3.3 and use telegraf 1.19.2 (2877d8fc7, Zexi Li) ansibleserver: record running cmd to debug (714792297, Zexi Li) build: update ansibleserver dockerfile (19124cb9e, Zexi Li) build: update glance and torrent base image (fe673fcb6, Zexi Li) climc: add Port-Forward SSH in server-ssh (1355d9e38, Stargic) climc: add SSH through EIP in server-ssh (306e807fd, Stargic) cloudcommon: move ignore_nonrunning_guests option to common (b8c5d18ac, Zexi Li) cloudmon: 3.7 add cloudmon component (8aea54e84, zhaoxiangchun) cloudmon: support huaweistack monitor metric (449b9d85a, zhaoxiangchun) cloudmon: support HuaweiCloudStack rds metric (b96c56091, zhaoxiangchun) cloudmon: support classic vm metrics (2747de8fb, Zexi Li) devtool: add sshinfo and serviceurl (5151880ec, rainzm) devtool: support batch applying for virtual machines (0395b5146, rainzm) glance: image support filter by os_type and distribution (7409e8cb1, Zexi Li) mcclient: add k8s cluster monitor component disable option (1d3fcea40, Zexi Li) misc: update build and service base image to use go v1.15.15 (0549d821f, Zexi Li) monitor: add ext mysql,rabbitmq,redis metric (218ee0a46, zhaoxiangchun) monitor: 处理编排mysql，redis，rabbitmq 相关监控 (83c216a41, zhaoxiangchun) monitor: add agent monitor metric (c6082abae, zhaoxiangchun) monitor: support temperature metrics (8ee769f31, Zexi Li) region: add host_type filter for listing wires (2b9c4be9e, rainzm) region: check whether the esxi host is ip or domain name (0267b9a8b, rainzm) region: add host_type filter for listing network (374be4927, rainzm) region: allow custom sshport when make sshable (b56e56bcb, rainzm) region: add direct field for vpc (59dc000c0, rainzm) region: be compatible with changes in monitor api in scaling group (9c36154c3, rainzm) region: add no_tags options to filter guests (c2ff56a00, rainzm)  Others (20)  pure hcso zone is not empty fix (4500feb2f, tb365) NetworkUsableZoneIds remove duplicate zone ids (50d8f10b4, tb365) lb list api support search elastic ip (68019186a, tb365) change host type to hcso (92b8720bb, tb365) count host fix (aeab880a6, tb365) make fmt (72ba92c35, tb365) rename huaweicloudstack to hcso (28f381b60, tb365) syncRemoveCloudHost purge host (3b55b9882, tb365) hcso support sync vm host (d57d2be97, tb365) fix(monitor):fix monitor query top 5 (43d87e83e, zhaoxiangchun) huawei cloud getInstanceByIP add ip filter (7c026aa8d, tb365) zone list timeout fix (87503be37, tb365) ProviderFactory add method IsMultiTenant (85fafb47a, tb365) add default dns for subnet (5aeaaa8e6, tb365) goimports fix (ed9396e71, tb365) huawei cloud stack client fix (3d6789e8f, tb365) goimports fix (b51d6ee92, tb365) conflict fix (fc6806ad1, tb365) huawei client update (2996dfcd7, tb365) add host type count api (1bc51e386, tb365)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n11 commits to cloudpods-operator - v3.7.7 since this release.\nBug Fixes (3)  add apsara mon (84a216b, Qu Xuan) cloudmon: fix cloudmon HCSO provider (397a6bb, zhaoxiangchun) region: let region server system init resources only once (2d37c91, Zexi Li)  Features (6)  support HuaweiCloudStack rds metric (744ab45, zhaoxiangchun) cloudmon: support HuaweiCloudStack metric (dac2991, zhaoxiangchun) cloudmon: update cloudmon component image info (0d25e0c, zhaoxiangchun) crd: support inject imagePullSecrets (a38276e, Zexi Li) monitor-stack: add monitor stack component (83d2bd1, Zexi Li) operator: set default resources limits for each component (bc99310, Zexi Li)  Misc (1)  update vendor (30d4356, Zexi Li)  Others (1)  update vendor (91df06f, Qiu Jian)   dashboard Repo: https://github.com/yunionio/dashboard\n132 commits to dashboard - v3.7.7 since this release.\nBug Fixes (36)  #12046 在系统镜像点击新建虚拟机后应该加上cpu架构的参数 (e051b0070, gaomingjiu@yunion.cn) add lb create region filter (37366dfdb, GuoLiBin6) 添加网卡选择子网去除host筛选 (f095f482a, GuoLiBin6) minor alignment format error (c638b3c1b, Qiu Jian) #7738 新建虚拟机且添加数据盘时CPU架构不应该从X86自动跳到aarch64 (31ba5c794, gaomingjiu@yunion.cn) add apsara default region (71ee7eb16, Qu Xuan) add nas export field (6e8a1d773, Qu Xuan) update user metadata interface params (415020d0e, gaomingjiu@yunion.cn) disk mount and unmount (bdda5efed, gaomingjiu@yunion.cn) rds列表，IP复制icon不应该一直显示 (0ed43df15, gaomingjiu@yunion.cn) 支持卸载本地数据盘 (14b1ea2cb, gaomingjiu@yunion.cn) 全局搜索优化 (25b927072, gaomingjiu@yunion.cn) optimized distinct filed filter (aad622e59, Qu Xuan) server price comparator provider (800f7e0c4, gaomingjiu@yunion.cn) 项目选项更新时，显示不全 (2954321a0, gaomingjiu@yunion.cn) 功能选择文案优化 (87c26e0f4, gaomingjiu@yunion.cn) update dashboard theme color (28b6a115e, gaomingjiu@yunion.cn) 云账号导出的参数项应与自定义列表的参数项一致，目前缺少域、项目等信息 (cd3624ae6, gaomingjiu@yunion.cn) change route global config repeat relod (3c1a81f11, gaomingjiu@yunion.cn) enable openstack vm migrate (6797d2393, Qu Xuan) network edit style (ad504a729, gaomingjiu@yunion.cn) menu icon (845ed3c3b, dongliping) 账单访问信息引用字段错误，应为关联账号 (220e64381, gaomingjiu@yunion.cn) show file system tags (bb4d2a9eb, Qu Xuan) 修复主机创建系统盘容量检测问题 (878b9b073, gaomingjiu@yunion.cn) enable hcso saml auth (56766da74, Qu Xuan) title (1851d1484, gaomingjiu@yunion.cn) update redis status i18n (3fe9b70f6, gaomingjiu@yunion.cn) vpc创建参数修复，及速度优化 (75b266b78, Qu Xuan) cloudenv: change cloudenv resource_name field (fd714931e, GuoLiBin6) compute: add cloudpods disk info (e18406390, GuoLiBin6) dashboard: modify top5 30 minutes (5f50eaa24, GuoLiBin6) dashboard: fix top5 host (c9b9abe5e, GuoLiBin6) dashboard: modfify dashboard userinfo color (537b5d217, GuoLiBin6) helm: get chart by version (9ffdc1c64, Zexi Li) rds: fix rds rds_conn param (51269b178, GuoLiBin6)  Code Refactoring (1)  monitor: vminstance and baremetal sidepage (e417c4414, Zexi Li)  Feature (1)  add a eip sidepage to server (330485c5d, Qiu Jian)  Features (26)  #3344 update login page (f1d4f61f6, gaomingjiu@yunion.cn) update oem info (c2a353acb, gaomingjiu@yunion.cn) update custome font color (1248b2199, gaomingjiu@yunion.cn) update login bg and font (4a3b93cca, gaomingjiu@yunion.cn) update login icon (3fcc4a7ac, gaomingjiu@yunion.cn) update login page (c08772c19, gaomingjiu@yunion.cn) 如果是开源版本则取消调用meter服务 (cbad978a5, gaomingjiu@yunion.cn) hidden yaml tpl (148f13e9f, gaomingjiu@yunion.cn) disk i18n (825ab84f8, gaomingjiu@yunion.cn) 支持卸载本地数据盘 (2e5b47bd2, gaomingjiu@yunion.cn) #3328 新建主机前端磁盘的判断逻辑，只针对openstack，其他平台暂不支持限制 (5af3c838f, gaomingjiu@yunion.cn) #3318 硬盘列表增加存储类型列显示 (2759b5dce, gaomingjiu@yunion.cn) #3321 支持显示云上的系统标签，只读 (74fd504bc, gaomingjiu@yunion.cn) 全局搜索范围增加LB支持 (a1293d9d3, gaomingjiu@yunion.cn) update dashbord icon (063d9bdef, gaomingjiu@yunion.cn) update font (00b13cd24, dongliping) update icon (9a9e8b58e, dongliping) update ui style (e0cc64b01, gaomingjiu@yunion.cn) update params and i18n (c6ce8e978, dongliping) remove refresh (01adc0974, gaomingjiu@yunion.cn) update menu icon and refresh i18n (f17375b89, gaomingjiu@yunion.cn) add hcso (dfa14ccca, Qu Xuan) support ext tag control (cb2e09313, gaomingjiu@yunion.cn) bill: adjust bill currency opts (d3bb62ad6, GuoLiBin6) kvm: adjust local storage max disk size to 20T (765d696a9, Zexi Li) monitor: temperature monitor (aee578001, Zexi Li)  Others (68)  aliyun default backend group list fix (9419ace4a, tb365) monitor charts fix (5e194634c, tb365) monitor charts fix (9c6888b39, tb365) monitor charts fix (b5281f0c8, tb365) monitor overview add mem used percent (330c67ae2, tb365) monitor overview add disk used percent (300c5d1db, tb365) fix[3.7]: 修改BRL币种文案 (0f6e0ac1b, GuoLiBin6) fix[3.7]: 修复rds备份操作按钮与详情状态不一致 (ee3bbe293, GuoLiBin6) fix[3.7]: 新建公有云磁盘,对provider添加域过滤条件 (695b2fe24, GuoLiBin6) fix[3.7]: 阿里云rds调整配置时禁用存储类型 (756a78864, GuoLiBin6) loadbalancer search fix (a32e681b8, tb365) fix[3.7]: 修复ip子网修改属性确定按钮失效 (8e253ee73, GuoLiBin6) fix [3.7] 磁盘信息使用配置文件和i18n双重翻译, 以免新增的磁盘i18n信息不全 (77bc1595b, GuoLiBin6) 华为云监控维度修改 (6e7d1ee0f, GuoLiBin6) 调整币种为通用文案 (6729f8b78, GuoLiBin6) 修改top5磁贴单位 (94872f5f2, GuoLiBin6) networks global input error fix (d7ecb408c, tb365) change huaweicloudstack to hcso (45b852ce1, tb365) change huaweicloudstack to hcso (d9dcc1383, tb365) add ssh port (f3ab83cba, tb365) 修改首页点赞颜色 (0b2ee375f, GuoLiBin6) 去除不必要的平台磁盘信息 (c931ded8c, GuoLiBin6) fix/conflict (940c1f4cb, GuoLiBin6) 修改首页点赞颜色 (472e0c25d, GuoLiBin6) conflict (76be29c73, GuoLiBin6) fix tag (e3c0b6c4e, GuoLiBin6) 华为云Stack删除主机同时删除硬盘等 (dbdf4b9bd, GuoLiBin6) rds details page add hcso (35b78db89, tb365) 调整首页样式 (0c222c872, GuoLiBin6) hcso create vm add cloudprovider (89d3b6226, tb365) image overview summary (013c1586c, tb365) image list add getOsTypeFilter (c914ab363, tb365) basic monitor chart add mem used percent (a94bf351f, tb365) SshProxyCreateForm change name to generate_name (640fd3cdd, tb365) add pe zh docs (f6bfab0c5, tb365) monitoroverview watch scope change (97888f526, tb365) 修磁贴内容多溢出问题 (ee1a8d390, GuoLiBin6) monitor query data add limit offset (18e0dc822, tb365) monitor query data add limit offset (f03a83405, tb365) batch install agent (2fd9782f2, tb365) update setup ssh form (e601fdc4c, tb365) 调整dashboard磁贴样式 (75f026b89, GuoLiBin6) ajust config fix (3ba0cd8e9, tb365) add default dns setting (1fc4814d6, tb365) conflict (0271af3b2, GuoLiBin6) add route (6babc0240, tb365) add cloudgroup for huaweicloudstack (18987ab4a, tb365) server price compare fix (b556f0bb1, tb365) adjust config fix (376cd32ce, tb365) 修复硬盘操作对华为私有云平台的验证 (890ef6a9e, GuoLiBin6) add route for hcso (b77634699, tb365) 修复编排-虚拟机实例无数据时默认值问题 (09ac2888b, GuoLiBin6) object download (a2ed10c24, tb365) huawei private cloud adjust config (01c14538d, tb365) huawei cloud stack fix (1327b91b6, tb365) huawei cloud stack fix (69aa4b2b9, tb365) huawei private resources create actions (f58f70f44, tb365) 修复个人信息查询权限 (0efb27363, GuoLiBin6) add huawei private cloud account create page (296cb03f1, tb365) reflict (db93d92e0, GuoLiBin6) feat(#2212): 新建主机时，选择平台，过滤相应的宿主机，用宿主机的网络来过滤可用的虚拟机网络 (a572e90c4, gaomingjiu@yunion.cn) totp qr image display fix (16d74f236, tb365) baremetal install agent (1e6607e0e, tb365) 修改文案大小写 (739c54634, GuoLiBin6) 修改文案 (aed47c134, GuoLiBin6) 修改文案 (03a3522ff, GuoLiBin6) 尝试解决ext标签过滤问题 (954c33617, GuoLiBin6) cloudshell fix (3aa53b26a, tb365)   kubecomps Repo: https://github.com/yunionio/kubecomps\n9 commits to kubecomps - v3.7.7 since this release.\nBug Fixes (3)  kubeserver: grafana inject system dashboard when ingress used (c32a6d7, Zexi Li) kubeserver: chart_ignores use regexp (9722832, Zexi Li) kubeserver: clean up zombies (0b216de, Zexi Li)  Features (6)  kubeserver: resources limits for component (2f5f886, Zexi Li) kubeserver: chart ignores options (aa20627, Zexi Li) kubeserver: sync telegraf dashboard to system grafana (8d63ffc, Zexi Li) kubeserver: monitor component support disable (106641a, Zexi Li) kubeserver: update system cluster components setting (79d6a02, Zexi Li) kubeserver: add monitor minio component (358c619, Zexi Li)   notify-plugins Repo: https://github.com/yunionio/notify-plugins\n2 commits to notify-plugins - v3.7.7 since this release.\nBug Fixes (2)  workwx: no user exist (9d390fc, rainzm) worwx: return correctly when fetch contact (063ccb1, rainzm)   ocadm Repo: https://github.com/yunionio/ocadm\n3 commits to ocadm - v3.7.7 since this release.\nHack (1)  use 99 years certs (420457c, Zexi Li)  Misc (2)  update vendor (90c9707, Zexi Li) vendor: update vendor to v3.7 (f9c306d, Zexi Li)   sdnagent Repo: https://github.com/yunionio/sdnagent\n2 commits to sdnagent - v3.7.7 since this release.\nBug Fixes (2)  tc: aware of ingress qdisc (055eba7, Zexi Li) tcman: delete all qdiscs before batch replace (eaaf25a, Zexi Li)  ","excerpt":"Release time: 2021-09-14 10:41:59\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.7/3-7-7/","title":"v3.7.7"},{"body":"发布时间 2021-09-14 10:41:59\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n145 commits to cloudpods - v3.7.7 since this release.\nAdd (1)  hcso iam (629626458, Qu Xuan)  Bug Fixes (95)  routes to private prefixes should be distributed on private nic (9c0f99d46, Qiu Jian) avoid double counting when compute networks nic count (597f2b149, rainzm) resolve permission issues for samlusers and quotas (bed1c36fd, Qiu Jian) inter-vm traffic limited by eip bandwidth limit (a212d77de, Qiu Jian) add ceph-common to climc image, so as to make rbcli work (e1e58ef11, Qiu Jian) set disk driver and network driver for converting esxi to kvm (f678eb97b, Qiu Jian) do not lock system account user (e6fbedf77, Qiu Jian) add purge split log commands for cloudevent and cloudlog (3423a9105, Qiu Jian) server migrate network to a vlan network (b70e15851, Qiu Jian) purge splitable logs for cloudevents and logger (feb19332a, Qiu Jian) dhcp classless route encoding error (a865e922d, Qiu Jian) apigateway: totp passcode verify error code fix (c4e41a412, tb365) baremetal: inject mac to cmdline (c222e532a, Zexi Li) baremetal: inject mac when admin nic found (4dbecc450, Zexi Li) baremetal: reindex nic (#12088) (0d20002e6, Zexi Li) baremetal: increase ipmitool reboot sleep wait time (16ed81e1d, Zexi Li) climc: modify the code logic of starting “Port-Forward SSH” (344804b0f, Stargic) climc: host-delete use batch delete function (b3c3d1faf, Zexi Li) climc: SSH terminal window changes with the change of local terminal (b3932b0c7, Stargic) climc-base: update tag to 20210901 (8f7de66cf, Zexi Li) cloudcommon: avoid service exit when etcd unreachable (242d7eaa0, Zexi Li) cloudevent: hcso event fix (89ad3778c, Qu Xuan) cloudevent: hcso resource name (37c05a19e, Qu Xuan) cloudid: azure attach enabled subscription policy (5fe7e3e3b, Qu Xuan) cloudid: hcso enable multi tenant saml provider (b7ccd3503, Qu Xuan) cloudid: hcso custom role (7416933ac, Qu Xuan) cloudid: avoid sync clouduser twice (6135e4a7b, Qu Xuan) cloudmon: update ReportOptions field (e0b6acb6a, zhaoxiangchun) devtool: get tenant info via correct field (dd5a0e93b, rainzm) devtool: create serviceurl (d8d330d3d, rainzm) esxiagetn: keep compatible with the lower version vcenter when copying the disk (8ce51213f, rainzm) glance: image fuzzy match by distro (54dbd4b8f, Zexi Li) host,region: disable health checker by default (36e6dddd8, Zexi Li) host-deployer: XFS uuid冲突 无法 mount (38ac153d6, panda) keystone: appsrv listen multi port failed cause of race condition (00aa056e7, Zexi Li) monitor: monitor resource apiHelper fix (9904a6c4e, zhaoxiangchun) monitor: add monitor resource details field (9e9d72d3c, zhaoxiangchun) monitor: fix resource details can’t show monitor metric (b8f7eca40, zhaoxiangchun) monitor: fix monitor slow query (a0fc7d493, zhaoxiangchun) monitor: fix monitor bug (bd82868c9, zhaoxiangchun) monitor: update apiHelper field and log (d8c1b49bd, zhaoxiangchun) monitor: fix agent monitor query (f9bf35fed, zhaoxiangchun) region: sync aliyun qcloud default project (7c71578ae, Qu Xuan) region: allow guest network zero bandwidth limit (ae809ca53, Zexi Li) region: resource count for cachedimages (d8e2f448b, Qu Xuan) region: enable zstack allocate ip by itself (f60d419d9, Qu Xuan) region: adjust the query range corresponding to the alarm strategy (70864334d, rainzm) region: check instancesnapshot in correct place when resize disk (27aa38040, rainzm) region: aliyun rds network sync (a90dbebf5, Qu Xuan) region: lb resource count (5b2dd8027, Qu Xuan) region: sync aliyun classic network ip addr (4b90b74ff, Qu Xuan) region: sync vm os type (92fc4f009, Qu Xuan) region: empty aliyun resource tag (28891dfbe, Qu Xuan) region: delete the wrong tag ‘nullable:false’ (68d5efad0, rainzm) region: eip project sync (80d49a1e7, Qu Xuan) region: access group policy (209b23044, Qu Xuan) region: huawei cloud sync vm os arch (ee28e8903, tb365) region: lb list search address fix (7416d71d7, tb365) region: return region sql error (5b8209d60, Qu Xuan) region: hcso regional eip (5528a163a, Qu Xuan) region: apsara resource group (02201abea, Qu Xuan) region: azure vm disk size (30b112545, Qu Xuan) region: delete dirty network (92e3b7ab4, Qu Xuan) region: return sql error (1500639f0, Qu Xuan) region: apsara endpoint fix (679437989, Qu Xuan) region: update huawei cloud stack update credential (1587eba9e, tb365) region: goimport fix (9e09a7591, tb365) region: baremetal server reuse ip address condition (524182fa2, Zexi Li) region: apsara default region (85c052a6e, Qu Xuan) region: hcso sync server fix (4a32b970b, tb365) region: not set baremetal is_maintenance when action is start (49dd563c6, Zexi Li) region: sync openstack multi zone storages (81341af53, Qu Xuan) region: raise GetNamedNetworkConfiguration error (ebf519bd6, Zexi Li) region: change disk and network drivers for Esxi converted VM (056243e99, Qiu Jian) region: add resource statistics filter params (1e7dce8c3, Qu Xuan) region: prohibit resizing the disk of a esxi vm with instance snapshots (e01cdbb27, rainzm) region: support nas tags (5ad118518, Qu Xuan) region: apsara default region (768560c4d, Qu Xuan) region: avoid get openstack hostid panic (fcba57f1c, Qu Xuan) region: resource apsara resource id not found error (c4ba8aa63, Qu Xuan) region: sync apsara region (51917559d, Qu Xuan) region: optimized qcloud tag sync (18aff683f, Qu Xuan) region: prevent the creation of redundant network segments when managing vmware (c128ad3a8, rainzm) region: huawei region id with project name (a093ab58d, Qu Xuan) region: 不能通过华为云用户创建时间判断云账号注册时间 (0dc41ca79, Qu Xuan) region: support apsara project (36e37958d, Qu Xuan) region: sync apsara project info (054d3f91b, Qu Xuan) region: qcloud database sync (727cc2dcd, Qu Xuan) region: sync with multi worker (54bfc1403, Qu Xuan) region: baremetal spec condition (ef7ae54d2, Zexi Li) region: baremetal server resued address nic count should be subtracted (0d6fe4f4e, Zexi Li) scheduler: options for openstack scheduler (fbdd5a531, Qu Xuan) scheduler: make option EnableQuotaCheck work (e84aee02a, rainzm) vendor: use creack/pty v1.1.11 to adapt go 1.15 (44ef03219, Zexi Li) webconsole: add jdcloud vnc (d0908d992, Qu Xuan)  Fea (1)  monitor: monitor apiHelper add domain,project (c11ae1235, zhaoxiangchun)  Features (28)  hcso sku sync (b064162f9, Qu Xuan) ansibleserver: update file-repo to v0.3.3 and use telegraf 1.19.2 (2877d8fc7, Zexi Li) ansibleserver: record running cmd to debug (714792297, Zexi Li) build: update ansibleserver dockerfile (19124cb9e, Zexi Li) build: update glance and torrent base image (fe673fcb6, Zexi Li) climc: add Port-Forward SSH in server-ssh (1355d9e38, Stargic) climc: add SSH through EIP in server-ssh (306e807fd, Stargic) cloudcommon: move ignore_nonrunning_guests option to common (b8c5d18ac, Zexi Li) cloudmon: 3.7 add cloudmon component (8aea54e84, zhaoxiangchun) cloudmon: support huaweistack monitor metric (449b9d85a, zhaoxiangchun) cloudmon: support HuaweiCloudStack rds metric (b96c56091, zhaoxiangchun) cloudmon: support classic vm metrics (2747de8fb, Zexi Li) devtool: add sshinfo and serviceurl (5151880ec, rainzm) devtool: support batch applying for virtual machines (0395b5146, rainzm) glance: image support filter by os_type and distribution (7409e8cb1, Zexi Li) mcclient: add k8s cluster monitor component disable option (1d3fcea40, Zexi Li) misc: update build and service base image to use go v1.15.15 (0549d821f, Zexi Li) monitor: add ext mysql,rabbitmq,redis metric (218ee0a46, zhaoxiangchun) monitor: 处理编排mysql，redis，rabbitmq 相关监控 (83c216a41, zhaoxiangchun) monitor: add agent monitor metric (c6082abae, zhaoxiangchun) monitor: support temperature metrics (8ee769f31, Zexi Li) region: add host_type filter for listing wires (2b9c4be9e, rainzm) region: check whether the esxi host is ip or domain name (0267b9a8b, rainzm) region: add host_type filter for listing network (374be4927, rainzm) region: allow custom sshport when make sshable (b56e56bcb, rainzm) region: add direct field for vpc (59dc000c0, rainzm) region: be compatible with changes in monitor api in scaling group (9c36154c3, rainzm) region: add no_tags options to filter guests (c2ff56a00, rainzm)  Others (20)  pure hcso zone is not empty fix (4500feb2f, tb365) NetworkUsableZoneIds remove duplicate zone ids (50d8f10b4, tb365) lb list api support search elastic ip (68019186a, tb365) change host type to hcso (92b8720bb, tb365) count host fix (aeab880a6, tb365) make fmt (72ba92c35, tb365) rename huaweicloudstack to hcso (28f381b60, tb365) syncRemoveCloudHost purge host (3b55b9882, tb365) hcso support sync vm host (d57d2be97, tb365) fix(monitor):fix monitor query top 5 (43d87e83e, zhaoxiangchun) huawei cloud getInstanceByIP add ip filter (7c026aa8d, tb365) zone list timeout fix (87503be37, tb365) ProviderFactory add method IsMultiTenant (85fafb47a, tb365) add default dns for subnet (5aeaaa8e6, tb365) goimports fix (ed9396e71, tb365) huawei cloud stack client fix (3d6789e8f, tb365) goimports fix (b51d6ee92, tb365) conflict fix (fc6806ad1, tb365) huawei client update (2996dfcd7, tb365) add host type count api (1bc51e386, tb365)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n11 commits to cloudpods-operator - v3.7.7 since this release.\nBug Fixes (3)  add apsara mon (84a216b, Qu Xuan) cloudmon: fix cloudmon HCSO provider (397a6bb, zhaoxiangchun) region: let region server system init resources only once (2d37c91, Zexi Li)  Features (6)  support HuaweiCloudStack rds metric (744ab45, zhaoxiangchun) cloudmon: support HuaweiCloudStack metric (dac2991, zhaoxiangchun) cloudmon: update cloudmon component image info (0d25e0c, zhaoxiangchun) crd: support inject imagePullSecrets (a38276e, Zexi Li) monitor-stack: add monitor stack component (83d2bd1, Zexi Li) operator: set default resources limits for each component (bc99310, Zexi Li)  Misc (1)  update vendor (30d4356, Zexi Li)  Others (1)  update vendor (91df06f, Qiu Jian)   dashboard 仓库地址: https://github.com/yunionio/dashboard\n132 commits to dashboard - v3.7.7 since this release.\nBug Fixes (36)  #12046 在系统镜像点击新建虚拟机后应该加上cpu架构的参数 (e051b0070, gaomingjiu@yunion.cn) add lb create region filter (37366dfdb, GuoLiBin6) 添加网卡选择子网去除host筛选 (f095f482a, GuoLiBin6) minor alignment format error (c638b3c1b, Qiu Jian) #7738 新建虚拟机且添加数据盘时CPU架构不应该从X86自动跳到aarch64 (31ba5c794, gaomingjiu@yunion.cn) add apsara default region (71ee7eb16, Qu Xuan) add nas export field (6e8a1d773, Qu Xuan) update user metadata interface params (415020d0e, gaomingjiu@yunion.cn) disk mount and unmount (bdda5efed, gaomingjiu@yunion.cn) rds列表，IP复制icon不应该一直显示 (0ed43df15, gaomingjiu@yunion.cn) 支持卸载本地数据盘 (14b1ea2cb, gaomingjiu@yunion.cn) 全局搜索优化 (25b927072, gaomingjiu@yunion.cn) optimized distinct filed filter (aad622e59, Qu Xuan) server price comparator provider (800f7e0c4, gaomingjiu@yunion.cn) 项目选项更新时，显示不全 (2954321a0, gaomingjiu@yunion.cn) 功能选择文案优化 (87c26e0f4, gaomingjiu@yunion.cn) update dashboard theme color (28b6a115e, gaomingjiu@yunion.cn) 云账号导出的参数项应与自定义列表的参数项一致，目前缺少域、项目等信息 (cd3624ae6, gaomingjiu@yunion.cn) change route global config repeat relod (3c1a81f11, gaomingjiu@yunion.cn) enable openstack vm migrate (6797d2393, Qu Xuan) network edit style (ad504a729, gaomingjiu@yunion.cn) menu icon (845ed3c3b, dongliping) 账单访问信息引用字段错误，应为关联账号 (220e64381, gaomingjiu@yunion.cn) show file system tags (bb4d2a9eb, Qu Xuan) 修复主机创建系统盘容量检测问题 (878b9b073, gaomingjiu@yunion.cn) enable hcso saml auth (56766da74, Qu Xuan) title (1851d1484, gaomingjiu@yunion.cn) update redis status i18n (3fe9b70f6, gaomingjiu@yunion.cn) vpc创建参数修复，及速度优化 (75b266b78, Qu Xuan) cloudenv: change cloudenv resource_name field (fd714931e, GuoLiBin6) compute: add cloudpods disk info (e18406390, GuoLiBin6) dashboard: modify top5 30 minutes (5f50eaa24, GuoLiBin6) dashboard: fix top5 host (c9b9abe5e, GuoLiBin6) dashboard: modfify dashboard userinfo color (537b5d217, GuoLiBin6) helm: get chart by version (9ffdc1c64, Zexi Li) rds: fix rds rds_conn param (51269b178, GuoLiBin6)  Code Refactoring (1)  monitor: vminstance and baremetal sidepage (e417c4414, Zexi Li)  Feature (1)  add a eip sidepage to server (330485c5d, Qiu Jian)  Features (26)  #3344 update login page (f1d4f61f6, gaomingjiu@yunion.cn) update oem info (c2a353acb, gaomingjiu@yunion.cn) update custome font color (1248b2199, gaomingjiu@yunion.cn) update login bg and font (4a3b93cca, gaomingjiu@yunion.cn) update login icon (3fcc4a7ac, gaomingjiu@yunion.cn) update login page (c08772c19, gaomingjiu@yunion.cn) 如果是开源版本则取消调用meter服务 (cbad978a5, gaomingjiu@yunion.cn) hidden yaml tpl (148f13e9f, gaomingjiu@yunion.cn) disk i18n (825ab84f8, gaomingjiu@yunion.cn) 支持卸载本地数据盘 (2e5b47bd2, gaomingjiu@yunion.cn) #3328 新建主机前端磁盘的判断逻辑，只针对openstack，其他平台暂不支持限制 (5af3c838f, gaomingjiu@yunion.cn) #3318 硬盘列表增加存储类型列显示 (2759b5dce, gaomingjiu@yunion.cn) #3321 支持显示云上的系统标签，只读 (74fd504bc, gaomingjiu@yunion.cn) 全局搜索范围增加LB支持 (a1293d9d3, gaomingjiu@yunion.cn) update dashbord icon (063d9bdef, gaomingjiu@yunion.cn) update font (00b13cd24, dongliping) update icon (9a9e8b58e, dongliping) update ui style (e0cc64b01, gaomingjiu@yunion.cn) update params and i18n (c6ce8e978, dongliping) remove refresh (01adc0974, gaomingjiu@yunion.cn) update menu icon and refresh i18n (f17375b89, gaomingjiu@yunion.cn) add hcso (dfa14ccca, Qu Xuan) support ext tag control (cb2e09313, gaomingjiu@yunion.cn) bill: adjust bill currency opts (d3bb62ad6, GuoLiBin6) kvm: adjust local storage max disk size to 20T (765d696a9, Zexi Li) monitor: temperature monitor (aee578001, Zexi Li)  Others (68)  aliyun default backend group list fix (9419ace4a, tb365) monitor charts fix (5e194634c, tb365) monitor charts fix (9c6888b39, tb365) monitor charts fix (b5281f0c8, tb365) monitor overview add mem used percent (330c67ae2, tb365) monitor overview add disk used percent (300c5d1db, tb365) fix[3.7]: 修改BRL币种文案 (0f6e0ac1b, GuoLiBin6) fix[3.7]: 修复rds备份操作按钮与详情状态不一致 (ee3bbe293, GuoLiBin6) fix[3.7]: 新建公有云磁盘,对provider添加域过滤条件 (695b2fe24, GuoLiBin6) fix[3.7]: 阿里云rds调整配置时禁用存储类型 (756a78864, GuoLiBin6) loadbalancer search fix (a32e681b8, tb365) fix[3.7]: 修复ip子网修改属性确定按钮失效 (8e253ee73, GuoLiBin6) fix [3.7] 磁盘信息使用配置文件和i18n双重翻译, 以免新增的磁盘i18n信息不全 (77bc1595b, GuoLiBin6) 华为云监控维度修改 (6e7d1ee0f, GuoLiBin6) 调整币种为通用文案 (6729f8b78, GuoLiBin6) 修改top5磁贴单位 (94872f5f2, GuoLiBin6) networks global input error fix (d7ecb408c, tb365) change huaweicloudstack to hcso (45b852ce1, tb365) change huaweicloudstack to hcso (d9dcc1383, tb365) add ssh port (f3ab83cba, tb365) 修改首页点赞颜色 (0b2ee375f, GuoLiBin6) 去除不必要的平台磁盘信息 (c931ded8c, GuoLiBin6) fix/conflict (940c1f4cb, GuoLiBin6) 修改首页点赞颜色 (472e0c25d, GuoLiBin6) conflict (76be29c73, GuoLiBin6) fix tag (e3c0b6c4e, GuoLiBin6) 华为云Stack删除主机同时删除硬盘等 (dbdf4b9bd, GuoLiBin6) rds details page add hcso (35b78db89, tb365) 调整首页样式 (0c222c872, GuoLiBin6) hcso create vm add cloudprovider (89d3b6226, tb365) image overview summary (013c1586c, tb365) image list add getOsTypeFilter (c914ab363, tb365) basic monitor chart add mem used percent (a94bf351f, tb365) SshProxyCreateForm change name to generate_name (640fd3cdd, tb365) add pe zh docs (f6bfab0c5, tb365) monitoroverview watch scope change (97888f526, tb365) 修磁贴内容多溢出问题 (ee1a8d390, GuoLiBin6) monitor query data add limit offset (18e0dc822, tb365) monitor query data add limit offset (f03a83405, tb365) batch install agent (2fd9782f2, tb365) update setup ssh form (e601fdc4c, tb365) 调整dashboard磁贴样式 (75f026b89, GuoLiBin6) ajust config fix (3ba0cd8e9, tb365) add default dns setting (1fc4814d6, tb365) conflict (0271af3b2, GuoLiBin6) add route (6babc0240, tb365) add cloudgroup for huaweicloudstack (18987ab4a, tb365) server price compare fix (b556f0bb1, tb365) adjust config fix (376cd32ce, tb365) 修复硬盘操作对华为私有云平台的验证 (890ef6a9e, GuoLiBin6) add route for hcso (b77634699, tb365) 修复编排-虚拟机实例无数据时默认值问题 (09ac2888b, GuoLiBin6) object download (a2ed10c24, tb365) huawei private cloud adjust config (01c14538d, tb365) huawei cloud stack fix (1327b91b6, tb365) huawei cloud stack fix (69aa4b2b9, tb365) huawei private resources create actions (f58f70f44, tb365) 修复个人信息查询权限 (0efb27363, GuoLiBin6) add huawei private cloud account create page (296cb03f1, tb365) reflict (db93d92e0, GuoLiBin6) feat(#2212): 新建主机时，选择平台，过滤相应的宿主机，用宿主机的网络来过滤可用的虚拟机网络 (a572e90c4, gaomingjiu@yunion.cn) totp qr image display fix (16d74f236, tb365) baremetal install agent (1e6607e0e, tb365) 修改文案大小写 (739c54634, GuoLiBin6) 修改文案 (aed47c134, GuoLiBin6) 修改文案 (03a3522ff, GuoLiBin6) 尝试解决ext标签过滤问题 (954c33617, GuoLiBin6) cloudshell fix (3aa53b26a, tb365)   kubecomps 仓库地址: https://github.com/yunionio/kubecomps\n9 commits to kubecomps - v3.7.7 since this release.\nBug Fixes (3)  kubeserver: grafana inject system dashboard when ingress used (c32a6d7, Zexi Li) kubeserver: chart_ignores use regexp (9722832, Zexi Li) kubeserver: clean up zombies (0b216de, Zexi Li)  Features (6)  kubeserver: resources limits for component (2f5f886, Zexi Li) kubeserver: chart ignores options (aa20627, Zexi Li) kubeserver: sync telegraf dashboard to system grafana (8d63ffc, Zexi Li) kubeserver: monitor component support disable (106641a, Zexi Li) kubeserver: update system cluster components setting (79d6a02, Zexi Li) kubeserver: add monitor minio component (358c619, Zexi Li)   notify-plugins 仓库地址: https://github.com/yunionio/notify-plugins\n2 commits to notify-plugins - v3.7.7 since this release.\nBug Fixes (2)  workwx: no user exist (9d390fc, rainzm) worwx: return correctly when fetch contact (063ccb1, rainzm)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n3 commits to ocadm - v3.7.7 since this release.\nHack (1)  use 99 years certs (420457c, Zexi Li)  Misc (2)  update vendor (90c9707, Zexi Li) vendor: update vendor to v3.7 (f9c306d, Zexi Li)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n2 commits to sdnagent - v3.7.7 since this release.\nBug Fixes (2)  tc: aware of ingress qdisc (055eba7, Zexi Li) tcman: delete all qdiscs before batch replace (eaaf25a, Zexi Li)  ","excerpt":"发布时间 2021-09-14 10:41:59\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.7/3-7-7/","title":"v3.7.7"},{"body":"Release time: 2021-07-29 14:07:59\n cloudpods Repo: https://github.com/yunionio/cloudpods\n52 commits to cloudpods - v3.7.6 since this release.\nBug Fixes (36)  qemu-img create disk may fail to preallocation=metadata enable for large disk (1f7d9e2cf, Qiu Jian) simplify SQL for distinct field query of tenant or domain names (db876b448, Qiu Jian) add cloudroot as system account, so as not using normal user id (490e7e4ef, Qiu Jian) host detach wire not update netinterface (9630e1b7d, Qiu Jian) add codes to switch bridge of ovs port (ad8a5ed95, Qiu Jian) migrate interface before commit desc (b2a3742fb, Qiu Jian) do not use ntfsresize to resize NTFS partition (b21c1f1a8, Qiu Jian) baremetal: use ipmitool power reset when redfish power on error (0ed305cd0, Zexi Li) baremetal: compatible with SN empty of MegaRaid (db125a6df, Zexi Li) build: baremetal arm64 build (c12ed7b8e, Zexi Li) climc: update climc-base image to 20210701 (5673d1d11, Zexi Li) climc: json tag (760427c88, Qu Xuan) climc: add version list command (4c0b8d831, Qu Xuan) host: find same vendor iommu_group devices (c0f3090d2, Zexi Li) host-deployer: make SKVMGuestLVMPartition work fine (233b97977, rainzm) host-deployer: detect UEFI supported not correct (15a160c87, Zexi Li) keystone: avoid sql error (c629e7fce, Qu Xuan) keystone: policy filter by role (4722fae11, Qu Xuan) keystone: user not found error fix (285b0f252, tb365) monitor: fix monitor resourece update (c27cec019, zhaoxiangchun) monitor: alert policy use ownerId when update (3b8eaaf55, zhaoxiangchun) region: update manager name (2ef57b2d1, Qu Xuan) region: allocate server eip without hostwire restrict (092cc351b, Qu Xuan) region: remove debug info (9384e81c8, Qu Xuan) region: sync storage before syncing host in syncOnPremiseCloudProviderInfo (162c3315c, rainzm) region: set DefaultSysDiskBackend as empty for esxi guest (742b05540, rainzm) region: cpu desc too long (5f4b9c2b5, Qu Xuan) region: sync auzre subscription health status (1c54d09ec, Qu Xuan) region: openstack ip pre allocate (2e720737a, Qu Xuan) region: rds network sync (bd5bd0ae7, Qu Xuan) region: return rds networks info (8ea004084, Qu Xuan) region: handle the error of RequestGuestCreateAllDisks (cdfb16ec1, rainzm) region: account aksk error (898fa5d16, Qu Xuan) region: fetch zone before syncing promise cloud provider storages (6c30b0436, rainzm) region: update qcloud secgroup rule (ed7d6715a, Qu Xuan) region: azure quota sync (c0e969368, Qu Xuan)  Feature (1)  allow server switch network without service interruption (a9ada013c, Qiu Jian)  Features (12)  support install monitor agent in baremetal (bea159274, rainzm) update file-repo version (c3a652bad, rainzm) use yunion’s customized version of telegraf in file-repo (09666490c, rainzm) climc: register billsanalysis climc (6152c9be0, zhaoxiangchun) climc: add enable monitor minio component command (92a8880f9, Zexi Li) devtool: use server forward direct for guest with kvm hypervisor (9d17f7091, rainzm) host: aware of kubelet eviction config (580f9ca3c, Zexi Li) host: add openEuler rootFs driver (d112a0a27, Zexi Li) hostdeployer: change UserAdd to CheckOrAddUser (48729ae9b, rainzm) hostdeployer: change the way fo GetLoginAccount in windows (b3f298afd, rainzm) monitor: update monitor resource overview (90300c1af, zhaoxiangchun) region: add status count filter by params (5cdf5051a, Qu Xuan)  Others (3)  minor fixes (9faf2d553, Qiu Jian) add meter cost conversion (c069baa46, bistuzx@163.com) update OWNERS (4a3230aee, Zexi Li)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.7.6 since this release.\nBug Fixes (1)  build: update vendor (778e3fe, Zexi Li)   dashboard Repo: https://github.com/yunionio/dashboard\n57 commits to dashboard - v3.7.6 since this release.\nBug Fixes (23)  menu i18n (a36ba3818, gaomingjiu@yunion.cn) xterm fit (717fc4b46, houjiazong) cloudShell UE improvements (d3c24d31e, houjiazong) refine baremetal nic list info and set up l2 wire logic (49745a064, Qiu Jian) 管理后台登录时，相应项目寻找失败 (82eb1c604, gaomingjiu@yunion.cn) 配额开关打开，域和项目详情页仍然没有配额信息 (b419d636d, gaomingjiu@yunion.cn) storage providers missing generic S3 providers (a0a4e48e3, gaomingjiu@yunion.cn) support replaceAll for lower broswer (1c61fefe0, gaomingjiu@yunion.cn) dashboard public default config (8ab265312, gaomingjiu@yunion.cn) eslint rule (ade776331, gaomingjiu@yunion.cn) hidden bill in public (f6d45bfbf, gaomingjiu@yunion.cn) disk type (ae50ddcbc, gaomingjiu@yunion.cn) Navbar: no project loading (886b0d13f, gaomingjiu@yunion.cn) bill: fix bill overview overflow tilte (edc35b2ec, GuoLiBin6) cloudenv: add success tip when account sync success (c4e28d8fe, GuoLiBin6) cloudenv: cloudgroup list add domain filter (c04ccd161, GuoLiBin6) dashboard: fix global search pagenation (597c0988b, GuoLiBin6) db: fix db router hidden (afc414f1f, GuoLiBin6) db: fix can’t show network when dependent parameters are updated (rds-create) (300040b0a, GuoLiBin6) eslint: update eslint rule (11a1eddc9, gaomingjiu@yunion.cn) eslint: update eslint rule (113510121, mj) k8s: service create selector (969d5173f, Zexi Li) k8s: ingresses manager get rawdata (6078ebef4, Zexi Li)  Features (14)  update logo (24e342e13, gaomingjiu@yunion.cn) 优化下拉选择框在内容过多时无法有效查看信息 (ce9df5e0d, gaomingjiu@yunion.cn) 二次定价支持对账单类型进行限制 (5eca0321b, gaomingjiu@yunion.cn) add back index time (386fd6563, gaomingjiu@yunion.cn) add bill global config (ef1704793, gaomingjiu@yunion.cn) update nav projects (345be1ff6, gaomingjiu@yunion.cn) update openeuler image icon (7e9533061, gaomingjiu@yunion.cn) BaseDialog: add dialog drag (2fbb26848, gaomingjiu@yunion.cn) Page: change website title (4e72119fb, gaomingjiu@yunion.cn) build: add makefile (701b57d7e, Zexi Li) cloudaccount: add account filter (8fa7da7f7, GuoLiBin6) cloudaccount: account column add cloudprovider (6db3b5f96, GuoLiBin6) cloudenv: cloudprovider support delete (45ef9c1d6, GuoLiBin6) constants: add exchange rate status in i18n (ab4500053, GuoLiBin6)  Others (20)  调整批量操作验证顺序 (5c5f0ed69, GuoLiBin6) 修改云订阅删除验证顺序及提示文案 (68532dce9, GuoLiBin6) 云订阅启用禁用添加弹框提示 (b3e4fb924, GuoLiBin6) 添加云订阅删除的Azure平台限制 (81334565b, GuoLiBin6) 添加定时器清除,修改跳转地址 (36cbadc1d, GuoLiBin6) 修复错误页因未跳转出现倒计时负数问题 (7b88bc28a, GuoLiBin6) disable google translator (85f964f7e, tb365) dictionary add jenkins (688ea7148, tb365) translations fix (b16af1594, tb365) kvm install agent fix (d563f4b42, tb365) summary-cards style fix (0707e752a, tb365) host overview card fix (057919257, tb365) overview card histogram chart fix (531396b84, tb365) host overview card fix (253c1537b, tb365) alert history chart fix (5ac00b570, tb365) remove feature select from 3.7 (8fbef189b, tb365) monitor alert contact channel fix (552fc0fc7, tb365) add features icons (fe8c7f32a, tb365) 修改同步策略详情页icon (bcb910671, GuoLiBin6) vminstance monitor chart fix (7c9165424, tb365)   sdnagent Repo: https://github.com/yunionio/sdnagent\n1 commits to sdnagent - v3.7.6 since this release.\nAgent (1)  ovn: ensure iptables fastpath for geneve traffics (f3ecbdf, Yousong Zhou)  ","excerpt":"Release time: 2021-07-29 14:07:59\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.7/3-7-6/","title":"v3.7.6"},{"body":"发布时间 2021-07-29 14:07:59\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n52 commits to cloudpods - v3.7.6 since this release.\nBug Fixes (36)  qemu-img create disk may fail to preallocation=metadata enable for large disk (1f7d9e2cf, Qiu Jian) simplify SQL for distinct field query of tenant or domain names (db876b448, Qiu Jian) add cloudroot as system account, so as not using normal user id (490e7e4ef, Qiu Jian) host detach wire not update netinterface (9630e1b7d, Qiu Jian) add codes to switch bridge of ovs port (ad8a5ed95, Qiu Jian) migrate interface before commit desc (b2a3742fb, Qiu Jian) do not use ntfsresize to resize NTFS partition (b21c1f1a8, Qiu Jian) baremetal: use ipmitool power reset when redfish power on error (0ed305cd0, Zexi Li) baremetal: compatible with SN empty of MegaRaid (db125a6df, Zexi Li) build: baremetal arm64 build (c12ed7b8e, Zexi Li) climc: update climc-base image to 20210701 (5673d1d11, Zexi Li) climc: json tag (760427c88, Qu Xuan) climc: add version list command (4c0b8d831, Qu Xuan) host: find same vendor iommu_group devices (c0f3090d2, Zexi Li) host-deployer: make SKVMGuestLVMPartition work fine (233b97977, rainzm) host-deployer: detect UEFI supported not correct (15a160c87, Zexi Li) keystone: avoid sql error (c629e7fce, Qu Xuan) keystone: policy filter by role (4722fae11, Qu Xuan) keystone: user not found error fix (285b0f252, tb365) monitor: fix monitor resourece update (c27cec019, zhaoxiangchun) monitor: alert policy use ownerId when update (3b8eaaf55, zhaoxiangchun) region: update manager name (2ef57b2d1, Qu Xuan) region: allocate server eip without hostwire restrict (092cc351b, Qu Xuan) region: remove debug info (9384e81c8, Qu Xuan) region: sync storage before syncing host in syncOnPremiseCloudProviderInfo (162c3315c, rainzm) region: set DefaultSysDiskBackend as empty for esxi guest (742b05540, rainzm) region: cpu desc too long (5f4b9c2b5, Qu Xuan) region: sync auzre subscription health status (1c54d09ec, Qu Xuan) region: openstack ip pre allocate (2e720737a, Qu Xuan) region: rds network sync (bd5bd0ae7, Qu Xuan) region: return rds networks info (8ea004084, Qu Xuan) region: handle the error of RequestGuestCreateAllDisks (cdfb16ec1, rainzm) region: account aksk error (898fa5d16, Qu Xuan) region: fetch zone before syncing promise cloud provider storages (6c30b0436, rainzm) region: update qcloud secgroup rule (ed7d6715a, Qu Xuan) region: azure quota sync (c0e969368, Qu Xuan)  Feature (1)  allow server switch network without service interruption (a9ada013c, Qiu Jian)  Features (12)  support install monitor agent in baremetal (bea159274, rainzm) update file-repo version (c3a652bad, rainzm) use yunion’s customized version of telegraf in file-repo (09666490c, rainzm) climc: register billsanalysis climc (6152c9be0, zhaoxiangchun) climc: add enable monitor minio component command (92a8880f9, Zexi Li) devtool: use server forward direct for guest with kvm hypervisor (9d17f7091, rainzm) host: aware of kubelet eviction config (580f9ca3c, Zexi Li) host: add openEuler rootFs driver (d112a0a27, Zexi Li) hostdeployer: change UserAdd to CheckOrAddUser (48729ae9b, rainzm) hostdeployer: change the way fo GetLoginAccount in windows (b3f298afd, rainzm) monitor: update monitor resource overview (90300c1af, zhaoxiangchun) region: add status count filter by params (5cdf5051a, Qu Xuan)  Others (3)  minor fixes (9faf2d553, Qiu Jian) add meter cost conversion (c069baa46, bistuzx@163.com) update OWNERS (4a3230aee, Zexi Li)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.7.6 since this release.\nBug Fixes (1)  build: update vendor (778e3fe, Zexi Li)   dashboard 仓库地址: https://github.com/yunionio/dashboard\n57 commits to dashboard - v3.7.6 since this release.\nBug Fixes (23)  menu i18n (a36ba3818, gaomingjiu@yunion.cn) xterm fit (717fc4b46, houjiazong) cloudShell UE improvements (d3c24d31e, houjiazong) refine baremetal nic list info and set up l2 wire logic (49745a064, Qiu Jian) 管理后台登录时，相应项目寻找失败 (82eb1c604, gaomingjiu@yunion.cn) 配额开关打开，域和项目详情页仍然没有配额信息 (b419d636d, gaomingjiu@yunion.cn) storage providers missing generic S3 providers (a0a4e48e3, gaomingjiu@yunion.cn) support replaceAll for lower broswer (1c61fefe0, gaomingjiu@yunion.cn) dashboard public default config (8ab265312, gaomingjiu@yunion.cn) eslint rule (ade776331, gaomingjiu@yunion.cn) hidden bill in public (f6d45bfbf, gaomingjiu@yunion.cn) disk type (ae50ddcbc, gaomingjiu@yunion.cn) Navbar: no project loading (886b0d13f, gaomingjiu@yunion.cn) bill: fix bill overview overflow tilte (edc35b2ec, GuoLiBin6) cloudenv: add success tip when account sync success (c4e28d8fe, GuoLiBin6) cloudenv: cloudgroup list add domain filter (c04ccd161, GuoLiBin6) dashboard: fix global search pagenation (597c0988b, GuoLiBin6) db: fix db router hidden (afc414f1f, GuoLiBin6) db: fix can’t show network when dependent parameters are updated (rds-create) (300040b0a, GuoLiBin6) eslint: update eslint rule (11a1eddc9, gaomingjiu@yunion.cn) eslint: update eslint rule (113510121, mj) k8s: service create selector (969d5173f, Zexi Li) k8s: ingresses manager get rawdata (6078ebef4, Zexi Li)  Features (14)  update logo (24e342e13, gaomingjiu@yunion.cn) 优化下拉选择框在内容过多时无法有效查看信息 (ce9df5e0d, gaomingjiu@yunion.cn) 二次定价支持对账单类型进行限制 (5eca0321b, gaomingjiu@yunion.cn) add back index time (386fd6563, gaomingjiu@yunion.cn) add bill global config (ef1704793, gaomingjiu@yunion.cn) update nav projects (345be1ff6, gaomingjiu@yunion.cn) update openeuler image icon (7e9533061, gaomingjiu@yunion.cn) BaseDialog: add dialog drag (2fbb26848, gaomingjiu@yunion.cn) Page: change website title (4e72119fb, gaomingjiu@yunion.cn) build: add makefile (701b57d7e, Zexi Li) cloudaccount: add account filter (8fa7da7f7, GuoLiBin6) cloudaccount: account column add cloudprovider (6db3b5f96, GuoLiBin6) cloudenv: cloudprovider support delete (45ef9c1d6, GuoLiBin6) constants: add exchange rate status in i18n (ab4500053, GuoLiBin6)  Others (20)  调整批量操作验证顺序 (5c5f0ed69, GuoLiBin6) 修改云订阅删除验证顺序及提示文案 (68532dce9, GuoLiBin6) 云订阅启用禁用添加弹框提示 (b3e4fb924, GuoLiBin6) 添加云订阅删除的Azure平台限制 (81334565b, GuoLiBin6) 添加定时器清除,修改跳转地址 (36cbadc1d, GuoLiBin6) 修复错误页因未跳转出现倒计时负数问题 (7b88bc28a, GuoLiBin6) disable google translator (85f964f7e, tb365) dictionary add jenkins (688ea7148, tb365) translations fix (b16af1594, tb365) kvm install agent fix (d563f4b42, tb365) summary-cards style fix (0707e752a, tb365) host overview card fix (057919257, tb365) overview card histogram chart fix (531396b84, tb365) host overview card fix (253c1537b, tb365) alert history chart fix (5ac00b570, tb365) remove feature select from 3.7 (8fbef189b, tb365) monitor alert contact channel fix (552fc0fc7, tb365) add features icons (fe8c7f32a, tb365) 修改同步策略详情页icon (bcb910671, GuoLiBin6) vminstance monitor chart fix (7c9165424, tb365)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n1 commits to sdnagent - v3.7.6 since this release.\nAgent (1)  ovn: ensure iptables fastpath for geneve traffics (f3ecbdf, Yousong Zhou)  ","excerpt":"发布时间 2021-07-29 14:07:59\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.7/3-7-6/","title":"v3.7.6"},{"body":"Release time: 2021-07-01 10:27:04\n cloudpods Repo: https://github.com/yunionio/cloudpods\n9 commits to cloudpods - v3.7.5 since this release.\nBug Fixes (8)  get datacenter of host via GetDatacenter (d00578d6e, rainzm) host: allow server directory a symbol link to directory in other location (79f801337, Qiu Jian) monitor: fix monitor process alert (2488a5dab, zhaoxiangchun) monitor: update alert panel scope by alert dashboard (f4cb3d2be, zhaoxiangchun) monitor: fix alert record not return resource details (6ee987c87, zhaoxiangchun) region: avoid panic when sync snapshot project (8f7653c14, Qu Xuan) scheduler: baremetal network free address out of count (1f9a66d00, Zexi Li) webconsole: aliyun vnc windows ctl+alt+del (8cae1408f, Qu Xuan)  Fi (1)  region: avoid opslog without resource id (b44871933, Qu Xuan)   dashboard Repo: https://github.com/yunionio/dashboard\n5 commits to dashboard - v3.7.5 since this release.\nBug Fixes (2)  Network: 新建IP子网，无法选择平台 (2b99f5550, gaomingjiu@yunion.cn) Vpc: 新建vpc无法切换域 (a5986ad19, gaomingjiu@yunion.cn)  Features (1)  Logo: 开源版logo替换为cloudpod的logo (5880450a0, gaomingjiu@yunion.cn)  Others (2)  fetch monitor pannel fix (14d14bb05, tb365) 列表扩展 (539e5c95b, GuoLiBin6)  ","excerpt":"Release time: 2021-07-01 10:27:04\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.7/3-7-5/","title":"v3.7.5"},{"body":"发布时间 2021-07-01 10:27:04\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n9 commits to cloudpods - v3.7.5 since this release.\nBug Fixes (8)  get datacenter of host via GetDatacenter (d00578d6e, rainzm) host: allow server directory a symbol link to directory in other location (79f801337, Qiu Jian) monitor: fix monitor process alert (2488a5dab, zhaoxiangchun) monitor: update alert panel scope by alert dashboard (f4cb3d2be, zhaoxiangchun) monitor: fix alert record not return resource details (6ee987c87, zhaoxiangchun) region: avoid panic when sync snapshot project (8f7653c14, Qu Xuan) scheduler: baremetal network free address out of count (1f9a66d00, Zexi Li) webconsole: aliyun vnc windows ctl+alt+del (8cae1408f, Qu Xuan)  Fi (1)  region: avoid opslog without resource id (b44871933, Qu Xuan)   dashboard 仓库地址: https://github.com/yunionio/dashboard\n5 commits to dashboard - v3.7.5 since this release.\nBug Fixes (2)  Network: 新建IP子网，无法选择平台 (2b99f5550, gaomingjiu@yunion.cn) Vpc: 新建vpc无法切换域 (a5986ad19, gaomingjiu@yunion.cn)  Features (1)  Logo: 开源版logo替换为cloudpod的logo (5880450a0, gaomingjiu@yunion.cn)  Others (2)  fetch monitor pannel fix (14d14bb05, tb365) 列表扩展 (539e5c95b, GuoLiBin6)  ","excerpt":"发布时间 2021-07-01 10:27:04\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.7/3-7-5/","title":"v3.7.5"},{"body":"Release time: 2021-06-28 15:30:39\n cloudpods Repo: https://github.com/yunionio/cloudpods\n50 commits to cloudpods - v3.7.4 since this release.\nBug Fixes (31)  do not resize LVM paritition and skip and return success (2d1884da5, Qiu Jian) support windows 2003 (a481666ba, Qiu Jian) anisbleserver: support complex yaml config in ansibleplaybook_instance (e7dc0213f, rainzm) baremetal: remove bundle libs build (3258a1c26, Zexi Li) baremetal: close ssh test client (30d4b3b7c, Zexi Li) baremetal: record uefi info (e76592de7, Zexi Li) baremetal: nvme allocable (382962fd0, Zexi Li) cloudid: avoid duplicate create saml provider (87c1c0e29, Qu Xuan) cloudid: huawei group role attach and detach (cf7f5f680, Qu Xuan) host: update rbd storage capacity (8f4ae62aa, Qu Xuan) host: get ceph used capacity (2d791dd54, Qu Xuan) hostman: show server status changed reason (3c844caa4, Qu Xuan) monitor: exit monitor engine in time when happen err (894d12f90, zhaoxiangchun) monitor: fix monitor overview (8c51294fe, zhaoxiangchun) notify: clean verifiedNote when marking verified (66ad8ace3, rainzm) notify: distinct field of receivers (8304b3777, rainzm) region: baremetal server change ip address reuse (55011704c, Zexi Li) region: show project mapping managers info (ad5d66758, Qu Xuan) region: ignore qcloud bw pkg error (f36688d4b, Qu Xuan) region: add status resource statistic (638d01485, Qu Xuan) region: qcloud bandwidth pkg (1de62d60e, Qu Xuan) region: add project filter for cloudprovider (b7c3e5373, Qu Xuan) region: clean schedule cache when host add or delete netif (5054e618c, Zexi Li) region: support cloudprovider bind project mapping (9c41deb42, Qu Xuan) region: manager distinct field (9e5408856, Qu Xuan) region: validate disk status when create snapshot (9f50a5394, Qu Xuan) region: avoid storage update not work (d11fcc794, Qu Xuan) region: skip disabled project mapping (92b0d323f, Qu Xuan) region: ignore qcloud vm start error (8679dbee2, Qu Xuan) region: skip server migrate quota check (f13c01d20, Qu Xuan) region,scheduler: baremetal reuse ip (4087fa459, Zexi Li)  Features (15)  add interface INetworkNicCountGetter (c317f05b7, rainzm) apigateway: support export dict keys (ebe101d9a, Qu Xuan) baremetal: support management of none BMC host (160a6e4db, Zexi Li) baremetal: add UEFI related util (0f74c9ba0, Zexi Li) build: change file repo version in Dockerfile.ansibleserver (02252842e, rainzm) climc: update meter dimension climc (4dc9ef631, zhaoxiangchun) devtool: add some tags (21c33d484, rainzm) esxi: reduce the number of requests and the amount of data transferred (d791cba14, rainzm) esxi: disable sync cloudimage from image cache (882d885aa, rainzm) host: support netplan configuration (e1e6a72b4, Zexi Li) mcclient: add bills dimension climc (910372ea0, zhaoxiangchun) monitor: add jenkins metric desc (0f55252c5, zhaoxiangchun) notify: filter all recipients in this domain and recipients who have joined projects in this domain (c1d792dc8, rainzm) region: add ProhibitRefreshingCloudImage for options (7cf931cc1, rainzm) scheduler: optimize the speed of network predicate (5741782cc, rainzm)  Others (3)  utomated cherry pick of #11428: feat(monitor) 3.7 add monitor resource overview (ae085eace, zhaoxiangchun) feat(monitor) 3.7 add monitor resource overview (629a3c55f, zhaoxiangchun) add module billing exchange rate (fe622c89d, bistuzx@163.com)  Webconsole (1)  wait zombies (bcc8f0b58, Yousong Zhou)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n4 commits to cloudpods-operator - v3.7.4 since this release.\nBug Fixes (3)  update process.total name (775fc8a, zhaoxiangchun) update system commonalert param (161458b, zhaoxiangchun) glance: s3 endpoint should use domain resolve (67d922e, Zexi Li)  Features (1)  add process common alert policy (14cf7ac, zhaoxiangchun)   dashboard Repo: https://github.com/yunionio/dashboard\n38 commits to dashboard - v3.7.4 since this release.\nBug Fixes (8)  rds details (6abdda771, Qu Xuan) Notify: notice refresh (e08c7db33, gaomingjiu@yunion.cn) SearchBox: search mutiple error (2bdcda51a, gaomingjiu@yunion.cn) SearchInput: update search input placehoder i18n (707890482, gaomingjiu@yunion.cn) TagFilter: update tag filter (b6902a3f2, gaomingjiu@yunion.cn) TagSelect: add max-width (b8281af05, gaomingjiu@yunion.cn) ThirdProcess: comment show empty (feb8b2912, gaomingjiu@yunion.cn) i18n: add ecloud i18n (c38c0bc44, gaomingjiu@yunion.cn)  Features (6)  add external_id support (73bdfcf36, gaomingjiu@yunion.cn) ProjectMapping: update sync policy support bind subscription (46bc70d4e, gaomingjiu@yunion.cn) ProjectMapping: update sync policy support bind subscription (01740085f, gaomingjiu@yunion.cn) ProjectMapping: update sync policy support bind subscription (e3b6ac7ae, gaomingjiu@yunion.cn) ProjectMapping: sync policysupport bind subscription (4d91523ee, gaomingjiu@yunion.cn) TagFilter: 标签增加优化，支持选择同一个key不同的value (951663ef2, gaomingjiu@yunion.cn)  Others (24)  monitor diskip chart fix (51e4627a1, tb365) commonalerts update fix (c9a50ddf2, tb365) agent_diskio add selectFunction (24d977b19, tb365) agent_diskio add selectFunction (6125a1133, tb365) vminstance detail monitor page update (16258ba9e, tb365) monitor ring chart event fix (415f7c4d2, tb365) update metric alert database fix (13d5b9348, tb365) lbacl source ip desc fix (5797ee1d8, tb365) lb style update (45c48da07, tb365) vminstall basic info add agent install status (cd419f64c, tb365) lbcert status icon fix (8804f21df, tb365) 修改验证 (811a882a1, GuoLiBin6) monitor overview add resource summary (ce6f67930, tb365) 权限-扩展按钮权限验证 (4cced1fc0, GuoLiBin6) 多币种3.7 (1d63f347a, GuoLiBin6) 修改云账号-azure/aws-billing_scpte未选择时默认为managed (7cfd2d2d6, GuoLiBin6) 默认改为all (1586c0f32, GuoLiBin6) 云账号-更新账单文件-azure添加账单分析范围 (0610058d4, GuoLiBin6) 修复云账号详情页启用禁用 (711792494, GuoLiBin6) install agent pe help link fix (dcddb75c5, tb365) contact page update (41be89378, tb365) 宿主机.云账号添加 删除 启用 禁用后同步刷新云资源信息 (63a20e8f7, GuoLiBin6) 拆分导出的列表项 (85829400e, GuoLiBin6) 修改宿主机及物理机导出列 (784577bf9, GuoLiBin6)   ocadm Repo: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.7.4 since this release.\nFeatures (1)  calico,k8s,ovn: 部置calico-node时调整默认配置提升ovn隧道流量的性能 (3aca095, Zhang Dongliang)  ","excerpt":"Release time: 2021-06-28 15:30:39\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.7/3-7-4/","title":"v3.7.4"},{"body":"发布时间 2021-06-28 15:30:39\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n50 commits to cloudpods - v3.7.4 since this release.\nBug Fixes (31)  do not resize LVM paritition and skip and return success (2d1884da5, Qiu Jian) support windows 2003 (a481666ba, Qiu Jian) anisbleserver: support complex yaml config in ansibleplaybook_instance (e7dc0213f, rainzm) baremetal: remove bundle libs build (3258a1c26, Zexi Li) baremetal: close ssh test client (30d4b3b7c, Zexi Li) baremetal: record uefi info (e76592de7, Zexi Li) baremetal: nvme allocable (382962fd0, Zexi Li) cloudid: avoid duplicate create saml provider (87c1c0e29, Qu Xuan) cloudid: huawei group role attach and detach (cf7f5f680, Qu Xuan) host: update rbd storage capacity (8f4ae62aa, Qu Xuan) host: get ceph used capacity (2d791dd54, Qu Xuan) hostman: show server status changed reason (3c844caa4, Qu Xuan) monitor: exit monitor engine in time when happen err (894d12f90, zhaoxiangchun) monitor: fix monitor overview (8c51294fe, zhaoxiangchun) notify: clean verifiedNote when marking verified (66ad8ace3, rainzm) notify: distinct field of receivers (8304b3777, rainzm) region: baremetal server change ip address reuse (55011704c, Zexi Li) region: show project mapping managers info (ad5d66758, Qu Xuan) region: ignore qcloud bw pkg error (f36688d4b, Qu Xuan) region: add status resource statistic (638d01485, Qu Xuan) region: qcloud bandwidth pkg (1de62d60e, Qu Xuan) region: add project filter for cloudprovider (b7c3e5373, Qu Xuan) region: clean schedule cache when host add or delete netif (5054e618c, Zexi Li) region: support cloudprovider bind project mapping (9c41deb42, Qu Xuan) region: manager distinct field (9e5408856, Qu Xuan) region: validate disk status when create snapshot (9f50a5394, Qu Xuan) region: avoid storage update not work (d11fcc794, Qu Xuan) region: skip disabled project mapping (92b0d323f, Qu Xuan) region: ignore qcloud vm start error (8679dbee2, Qu Xuan) region: skip server migrate quota check (f13c01d20, Qu Xuan) region,scheduler: baremetal reuse ip (4087fa459, Zexi Li)  Features (15)  add interface INetworkNicCountGetter (c317f05b7, rainzm) apigateway: support export dict keys (ebe101d9a, Qu Xuan) baremetal: support management of none BMC host (160a6e4db, Zexi Li) baremetal: add UEFI related util (0f74c9ba0, Zexi Li) build: change file repo version in Dockerfile.ansibleserver (02252842e, rainzm) climc: update meter dimension climc (4dc9ef631, zhaoxiangchun) devtool: add some tags (21c33d484, rainzm) esxi: reduce the number of requests and the amount of data transferred (d791cba14, rainzm) esxi: disable sync cloudimage from image cache (882d885aa, rainzm) host: support netplan configuration (e1e6a72b4, Zexi Li) mcclient: add bills dimension climc (910372ea0, zhaoxiangchun) monitor: add jenkins metric desc (0f55252c5, zhaoxiangchun) notify: filter all recipients in this domain and recipients who have joined projects in this domain (c1d792dc8, rainzm) region: add ProhibitRefreshingCloudImage for options (7cf931cc1, rainzm) scheduler: optimize the speed of network predicate (5741782cc, rainzm)  Others (3)  utomated cherry pick of #11428: feat(monitor) 3.7 add monitor resource overview (ae085eace, zhaoxiangchun) feat(monitor) 3.7 add monitor resource overview (629a3c55f, zhaoxiangchun) add module billing exchange rate (fe622c89d, bistuzx@163.com)  Webconsole (1)  wait zombies (bcc8f0b58, Yousong Zhou)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n4 commits to cloudpods-operator - v3.7.4 since this release.\nBug Fixes (3)  update process.total name (775fc8a, zhaoxiangchun) update system commonalert param (161458b, zhaoxiangchun) glance: s3 endpoint should use domain resolve (67d922e, Zexi Li)  Features (1)  add process common alert policy (14cf7ac, zhaoxiangchun)   dashboard 仓库地址: https://github.com/yunionio/dashboard\n38 commits to dashboard - v3.7.4 since this release.\nBug Fixes (8)  rds details (6abdda771, Qu Xuan) Notify: notice refresh (e08c7db33, gaomingjiu@yunion.cn) SearchBox: search mutiple error (2bdcda51a, gaomingjiu@yunion.cn) SearchInput: update search input placehoder i18n (707890482, gaomingjiu@yunion.cn) TagFilter: update tag filter (b6902a3f2, gaomingjiu@yunion.cn) TagSelect: add max-width (b8281af05, gaomingjiu@yunion.cn) ThirdProcess: comment show empty (feb8b2912, gaomingjiu@yunion.cn) i18n: add ecloud i18n (c38c0bc44, gaomingjiu@yunion.cn)  Features (6)  add external_id support (73bdfcf36, gaomingjiu@yunion.cn) ProjectMapping: update sync policy support bind subscription (46bc70d4e, gaomingjiu@yunion.cn) ProjectMapping: update sync policy support bind subscription (01740085f, gaomingjiu@yunion.cn) ProjectMapping: update sync policy support bind subscription (e3b6ac7ae, gaomingjiu@yunion.cn) ProjectMapping: sync policysupport bind subscription (4d91523ee, gaomingjiu@yunion.cn) TagFilter: 标签增加优化，支持选择同一个key不同的value (951663ef2, gaomingjiu@yunion.cn)  Others (24)  monitor diskip chart fix (51e4627a1, tb365) commonalerts update fix (c9a50ddf2, tb365) agent_diskio add selectFunction (24d977b19, tb365) agent_diskio add selectFunction (6125a1133, tb365) vminstance detail monitor page update (16258ba9e, tb365) monitor ring chart event fix (415f7c4d2, tb365) update metric alert database fix (13d5b9348, tb365) lbacl source ip desc fix (5797ee1d8, tb365) lb style update (45c48da07, tb365) vminstall basic info add agent install status (cd419f64c, tb365) lbcert status icon fix (8804f21df, tb365) 修改验证 (811a882a1, GuoLiBin6) monitor overview add resource summary (ce6f67930, tb365) 权限-扩展按钮权限验证 (4cced1fc0, GuoLiBin6) 多币种3.7 (1d63f347a, GuoLiBin6) 修改云账号-azure/aws-billing_scpte未选择时默认为managed (7cfd2d2d6, GuoLiBin6) 默认改为all (1586c0f32, GuoLiBin6) 云账号-更新账单文件-azure添加账单分析范围 (0610058d4, GuoLiBin6) 修复云账号详情页启用禁用 (711792494, GuoLiBin6) install agent pe help link fix (dcddb75c5, tb365) contact page update (41be89378, tb365) 宿主机.云账号添加 删除 启用 禁用后同步刷新云资源信息 (63a20e8f7, GuoLiBin6) 拆分导出的列表项 (85829400e, GuoLiBin6) 修改宿主机及物理机导出列 (784577bf9, GuoLiBin6)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.7.4 since this release.\nFeatures (1)  calico,k8s,ovn: 部置calico-node时调整默认配置提升ovn隧道流量的性能 (3aca095, Zhang Dongliang)  ","excerpt":"发布时间 2021-06-28 15:30:39\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.7/3-7-4/","title":"v3.7.4"},{"body":"Release time: 2021-06-08 16:17:35\n cloudpods Repo: https://github.com/yunionio/cloudpods\n8 commits to cloudpods - v3.7.3 since this release.\nBug Fixes (8)  hpssacli should skip empty slots (162dd766f, Qiu Jian) 修复云账号和宿主机报警问题 (1389d2176, zhaoxiangchun) region: validate attached disk size and backend (c6e99bf80, Qu Xuan) region: sync tags with new guest (4484a2082, Qu Xuan) region: avoid guest delete not with disks (64a86f7cc, Qu Xuan) region: huawei disk tags (5b5310c6e, Qu Xuan) region: lb local cert sync fix (1c7c3e05b, tb365) telegraf-raid-plugin: add image-telegraf-raid-plugin in Makefile (754c2e62e, zhaoxiangchun)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.7.3 since this release.\nBug Fixes (3)  update raid-plugin image tag (3b500fb, zhaoxiangchun) cloudmon timeout fix (0482807, zhaoxiangchun) raid plugin: raid status fix (6509fc5, zhaoxiangchun)   dashboard Repo: https://github.com/yunionio/dashboard\n6 commits to dashboard - v3.7.3 since this release.\nBug Fixes (1)  improve prompt when no host/accoutns available (937715f21, Qiu Jian)  Bugfix (1)  cloudenv: project mapping (52a57faf2, GuoLiBin6)  Feature (1)  cloudenv: delete-pricecomparator-list-sync (3cd70ed46, GuoLiBin6)  Features (1)  image: update web-base image to v3.6.1 (c196725c7, Zexi Li)  Others (2)  删除虚拟机时增加可选项 (c57dcb618, GuoLiBin6) change network select helplink style (1ebf24952, tb365)  ","excerpt":"Release time: 2021-06-08 16:17:35\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.7/3-7-3/","title":"v3.7.3"},{"body":"发布时间 2021-06-08 16:17:35\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n8 commits to cloudpods - v3.7.3 since this release.\nBug Fixes (8)  hpssacli should skip empty slots (162dd766f, Qiu Jian) 修复云账号和宿主机报警问题 (1389d2176, zhaoxiangchun) region: validate attached disk size and backend (c6e99bf80, Qu Xuan) region: sync tags with new guest (4484a2082, Qu Xuan) region: avoid guest delete not with disks (64a86f7cc, Qu Xuan) region: huawei disk tags (5b5310c6e, Qu Xuan) region: lb local cert sync fix (1c7c3e05b, tb365) telegraf-raid-plugin: add image-telegraf-raid-plugin in Makefile (754c2e62e, zhaoxiangchun)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.7.3 since this release.\nBug Fixes (3)  update raid-plugin image tag (3b500fb, zhaoxiangchun) cloudmon timeout fix (0482807, zhaoxiangchun) raid plugin: raid status fix (6509fc5, zhaoxiangchun)   dashboard 仓库地址: https://github.com/yunionio/dashboard\n6 commits to dashboard - v3.7.3 since this release.\nBug Fixes (1)  improve prompt when no host/accoutns available (937715f21, Qiu Jian)  Bugfix (1)  cloudenv: project mapping (52a57faf2, GuoLiBin6)  Feature (1)  cloudenv: delete-pricecomparator-list-sync (3cd70ed46, GuoLiBin6)  Features (1)  image: update web-base image to v3.6.1 (c196725c7, Zexi Li)  Others (2)  删除虚拟机时增加可选项 (c57dcb618, GuoLiBin6) change network select helplink style (1ebf24952, tb365)  ","excerpt":"发布时间 2021-06-08 16:17:35\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.7/3-7-3/","title":"v3.7.3"},{"body":"Release time: 2021-06-03 16:45:16\n cloudpods Repo: https://github.com/yunionio/cloudpods\n30 commits to cloudpods - v3.7.2 since this release.\nBug Fixes (28)  get apigateway auth/regions with error of illegal mix of collations (1dbe7b930, Qiu Jian) windows resize file system (4948869ad, Qiu Jian) glance: add option of s3 image status check (ec926f9b6, Zexi Li) host: avoid delete removed disk failed (913757f13, Qu Xuan) host: avoid panic when params is nil (41806c938, Qu Xuan) host: raid status fix (12209ee0c, zhaoxiangchun) host: raid status (daf14eb73, zhaoxiangchun) monitor: fix storage tag (d1da58b42, zhaoxiangchun) region: optimized azure aliyun qcloud tags sync (e76c1d6c0, Qu Xuan) region: lbcert cache clean duplicate data fix (55525a990, tb365) region: project sync condition (e51e0a7ab, Qu Xuan) region: optimized disk eip snapshot project sync (c7a9f726b, Qu Xuan) region: migrate use rescue mode (644a9c103, Zexi Li) region: split provider tag sync (93a7f1b81, Qu Xuan) region: fix aws json unmarshal error (35f7844c5, Qu Xuan) region: translation errors (018ef0d98, Qu Xuan) region: lb cert name fix (b71406e6e, tb365) region: disable public cloud ip pre allocate (fd94dc34d, Qu Xuan) region: aws vpc network eip disk tags sync (c73de5f64, Qu Xuan) region: show azure deploy failed error (88046eea1, Qu Xuan) region: restrict account project mapping (984790c18, Qu Xuan) region: azure uniform tags (1d4b2a04b, Qu Xuan) region: gofmt fix (cf5dcc611, TangBin) region: check sku request error (1456b93ec, Qu Xuan) region: add project and domain info for project mapping rules (b5fcfb5d1, Qu Xuan) region: avoid deadlock when resize disk (767aa5c37, Qu Xuan) region: avoid aws session not assume role (78a9a1ea8, Qu Xuan) region: add host_id options for storage filter (2fb095bc5, Qu Xuan)  Features (1)  region: add server migration predication API (7c7687ae4, Zexi Li)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n2 commits to cloudpods-operator - v3.7.2 since this release.\nBug Fixes (1)  minio: disable minio component when status is fail (7dc9dd2, Zexi Li)  Features (1)  cloudmon: add storage monitor metric config and modify cloudmon config infection func (7291ab5, zhaoxiangchun)   dashboard Repo: https://github.com/yunionio/dashboard\n55 commits to dashboard - v3.7.2 since this release.\nBug Fixes (5)  Compute/AdjustConfig: 调整配置磁盘显示问题 (b0b917c22, gaomingjiu@yunion.cn) Compute/AdjustConfig: 调整配置磁盘显示问题 (34da707be, gaomingjiu@yunion.cn) Compute/Host: host access ip i18n (b9c1aab0a, gaomingjiu@yunion.cn) Compute/vminstance: #7471 移动云链接vnc按钮不应该禁用，且提示信息不对 (5b4314e57, gaomingjiu@yunion.cn) Network: #7449 VMware不支持主机修改IP (e97be20af, gaomingjiu@yunion.cn)  Bugfix (7)  cloudenv: add project-mapping menu hidden (8347cedfb, GuoLiBin6) cloudenv: modify projectmapping aciton scope (a83ca3afa, GuoLiBin6) cloudenv: show sort column title (6ec630c45, GuoLiBin6) clouduser: delete extra title in clouduser (563ed490c, GuoLiBin6) projectmapping: modify tags validate when the tags value is undefined (0021c66f6, GuoLiBin6) projectmapping: modify detail sidepage (d970a1580, GuoLiBin6) sku: add sku update default checked (1dc9f53dd, GuoLiBin6)  Feature (2)  cloudenv: add project-mapping function (feaeab0f0, GuoLiBin6) tag: expend tagcolumn (87d67b3b2, GuoLiBin6)  Features (8)  Cloudenv: 只有管理后台下展示提示信息 (76d17e409, gaomingjiu@yunion.cn) Compute: update transfer host i18n (69251e223, gaomingjiu@yunion.cn) Compute: vm addbackup add forcast (92f9a2077, gaomingjiu@yunion.cn) Compute: vm transfer add forcast (62539c2e1, gaomingjiu@yunion.cn) curency: 巴西币种支持 (a99886288, gaomingjiu@yunion.cn) currency: 增加全局币种映射常量 (0abaaaad5, gaomingjiu@yunion.cn) i18n: 移动云文案处理 (fd76e3f34, gaomingjiu@yunion.cn) i18n: vm instance (a7267e8ff, gaomingjiu@yunion.cn)  Others (33)  redis\u0026rds network select fix (732df1db6, tb365) 修改磁盘-已挂载的磁盘-扩容接口 (b6fb8eb3c, GuoLiBin6) 添加平台-列的排序筛选项 (6b834c342, GuoLiBin6) fix:移动云文案修改 (5f0fb089c, dongliping) server price compare fix (bfff9d2a5, tb365) redis\u0026rds network select add helplink (b5037abd9, tb365) base select add projects (35407be1f, tb365) monitor line chart display fix (6217dc982, tb365) 修改匹配条件提示文案 (3610d4480, GuoLiBin6) 添加匹配条件的默认值 (a0666c071, GuoLiBin6) loadbalancer listener rule add domain column (af3b0f63a, tb365) 详情页-标签扩展 (8c6c8c61f, GuoLiBin6) price comparator fix (494d334de, tb365) 添加标签支持修改 (a65b1fb78, GuoLiBin6) common alert add default chart name (50b97b87a, tb365) dashboard chart save add default name (2e706b97d, tb365) 添加新建匹配条件的默认值 (ba5531834, GuoLiBin6) 添加已绑定云账号不可选中 (b763f59f2, GuoLiBin6) 添加详情页操作组 (36a45d4ef, GuoLiBin6) 修改标签key 修改规则删除保留之前的分割线 添加规则-规则管理的跳转 (7eb7cc28a, GuoLiBin6) lbcert cache add common name \u0026 subject_alternative_names (41c4cd49f, tb365) 修改-同步策略-更新-标签反显问题 (09139deec, GuoLiBin6) 修改同步策略删除时的提示文案 (dfe0d3342, GuoLiBin6) 添加英文翻译 (32dc362a1, GuoLiBin6) 添加标签个数限制及删除规则 (3c07129c8, GuoLiBin6) 优化 (834290053, GuoLiBin6) add month \u0026 year price (60afdb33e, tb365) monitor query add metric translations for storage (b158d15b4, tb365) 删除无用文件 (c7a4391a2, GuoLiBin6) ctyun not support create prepaid instance (5cb1426cb, TangBin) 规则列支持扩展 (74aa04e1a, GuoLiBin6) 修改过滤状态 (e4700229d, GuoLiBin6) monitor table add storage_name (605664d3d, tb365)   ocadm Repo: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.7.2 since this release.\nBug Fixes (1)  k8s,keepalived: 解决 k8s 高可用集群在部署时无法获取 nodeip 的问题 (ad4fd9e, Zhang Dongliang)  ","excerpt":"Release time: 2021-06-03 16:45:16\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.7/3-7-2/","title":"v3.7.2"},{"body":"发布时间 2021-06-03 16:45:16\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n30 commits to cloudpods - v3.7.2 since this release.\nBug Fixes (28)  get apigateway auth/regions with error of illegal mix of collations (1dbe7b930, Qiu Jian) windows resize file system (4948869ad, Qiu Jian) glance: add option of s3 image status check (ec926f9b6, Zexi Li) host: avoid delete removed disk failed (913757f13, Qu Xuan) host: avoid panic when params is nil (41806c938, Qu Xuan) host: raid status fix (12209ee0c, zhaoxiangchun) host: raid status (daf14eb73, zhaoxiangchun) monitor: fix storage tag (d1da58b42, zhaoxiangchun) region: optimized azure aliyun qcloud tags sync (e76c1d6c0, Qu Xuan) region: lbcert cache clean duplicate data fix (55525a990, tb365) region: project sync condition (e51e0a7ab, Qu Xuan) region: optimized disk eip snapshot project sync (c7a9f726b, Qu Xuan) region: migrate use rescue mode (644a9c103, Zexi Li) region: split provider tag sync (93a7f1b81, Qu Xuan) region: fix aws json unmarshal error (35f7844c5, Qu Xuan) region: translation errors (018ef0d98, Qu Xuan) region: lb cert name fix (b71406e6e, tb365) region: disable public cloud ip pre allocate (fd94dc34d, Qu Xuan) region: aws vpc network eip disk tags sync (c73de5f64, Qu Xuan) region: show azure deploy failed error (88046eea1, Qu Xuan) region: restrict account project mapping (984790c18, Qu Xuan) region: azure uniform tags (1d4b2a04b, Qu Xuan) region: gofmt fix (cf5dcc611, TangBin) region: check sku request error (1456b93ec, Qu Xuan) region: add project and domain info for project mapping rules (b5fcfb5d1, Qu Xuan) region: avoid deadlock when resize disk (767aa5c37, Qu Xuan) region: avoid aws session not assume role (78a9a1ea8, Qu Xuan) region: add host_id options for storage filter (2fb095bc5, Qu Xuan)  Features (1)  region: add server migration predication API (7c7687ae4, Zexi Li)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n2 commits to cloudpods-operator - v3.7.2 since this release.\nBug Fixes (1)  minio: disable minio component when status is fail (7dc9dd2, Zexi Li)  Features (1)  cloudmon: add storage monitor metric config and modify cloudmon config infection func (7291ab5, zhaoxiangchun)   dashboard 仓库地址: https://github.com/yunionio/dashboard\n55 commits to dashboard - v3.7.2 since this release.\nBug Fixes (5)  Compute/AdjustConfig: 调整配置磁盘显示问题 (b0b917c22, gaomingjiu@yunion.cn) Compute/AdjustConfig: 调整配置磁盘显示问题 (34da707be, gaomingjiu@yunion.cn) Compute/Host: host access ip i18n (b9c1aab0a, gaomingjiu@yunion.cn) Compute/vminstance: #7471 移动云链接vnc按钮不应该禁用，且提示信息不对 (5b4314e57, gaomingjiu@yunion.cn) Network: #7449 VMware不支持主机修改IP (e97be20af, gaomingjiu@yunion.cn)  Bugfix (7)  cloudenv: add project-mapping menu hidden (8347cedfb, GuoLiBin6) cloudenv: modify projectmapping aciton scope (a83ca3afa, GuoLiBin6) cloudenv: show sort column title (6ec630c45, GuoLiBin6) clouduser: delete extra title in clouduser (563ed490c, GuoLiBin6) projectmapping: modify tags validate when the tags value is undefined (0021c66f6, GuoLiBin6) projectmapping: modify detail sidepage (d970a1580, GuoLiBin6) sku: add sku update default checked (1dc9f53dd, GuoLiBin6)  Feature (2)  cloudenv: add project-mapping function (feaeab0f0, GuoLiBin6) tag: expend tagcolumn (87d67b3b2, GuoLiBin6)  Features (8)  Cloudenv: 只有管理后台下展示提示信息 (76d17e409, gaomingjiu@yunion.cn) Compute: update transfer host i18n (69251e223, gaomingjiu@yunion.cn) Compute: vm addbackup add forcast (92f9a2077, gaomingjiu@yunion.cn) Compute: vm transfer add forcast (62539c2e1, gaomingjiu@yunion.cn) curency: 巴西币种支持 (a99886288, gaomingjiu@yunion.cn) currency: 增加全局币种映射常量 (0abaaaad5, gaomingjiu@yunion.cn) i18n: 移动云文案处理 (fd76e3f34, gaomingjiu@yunion.cn) i18n: vm instance (a7267e8ff, gaomingjiu@yunion.cn)  Others (33)  redis\u0026rds network select fix (732df1db6, tb365) 修改磁盘-已挂载的磁盘-扩容接口 (b6fb8eb3c, GuoLiBin6) 添加平台-列的排序筛选项 (6b834c342, GuoLiBin6) fix:移动云文案修改 (5f0fb089c, dongliping) server price compare fix (bfff9d2a5, tb365) redis\u0026rds network select add helplink (b5037abd9, tb365) base select add projects (35407be1f, tb365) monitor line chart display fix (6217dc982, tb365) 修改匹配条件提示文案 (3610d4480, GuoLiBin6) 添加匹配条件的默认值 (a0666c071, GuoLiBin6) loadbalancer listener rule add domain column (af3b0f63a, tb365) 详情页-标签扩展 (8c6c8c61f, GuoLiBin6) price comparator fix (494d334de, tb365) 添加标签支持修改 (a65b1fb78, GuoLiBin6) common alert add default chart name (50b97b87a, tb365) dashboard chart save add default name (2e706b97d, tb365) 添加新建匹配条件的默认值 (ba5531834, GuoLiBin6) 添加已绑定云账号不可选中 (b763f59f2, GuoLiBin6) 添加详情页操作组 (36a45d4ef, GuoLiBin6) 修改标签key 修改规则删除保留之前的分割线 添加规则-规则管理的跳转 (7eb7cc28a, GuoLiBin6) lbcert cache add common name \u0026 subject_alternative_names (41c4cd49f, tb365) 修改-同步策略-更新-标签反显问题 (09139deec, GuoLiBin6) 修改同步策略删除时的提示文案 (dfe0d3342, GuoLiBin6) 添加英文翻译 (32dc362a1, GuoLiBin6) 添加标签个数限制及删除规则 (3c07129c8, GuoLiBin6) 优化 (834290053, GuoLiBin6) add month \u0026 year price (60afdb33e, tb365) monitor query add metric translations for storage (b158d15b4, tb365) 删除无用文件 (c7a4391a2, GuoLiBin6) ctyun not support create prepaid instance (5cb1426cb, TangBin) 规则列支持扩展 (74aa04e1a, GuoLiBin6) 修改过滤状态 (e4700229d, GuoLiBin6) monitor table add storage_name (605664d3d, tb365)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.7.2 since this release.\nBug Fixes (1)  k8s,keepalived: 解决 k8s 高可用集群在部署时无法获取 nodeip 的问题 (ad4fd9e, Zhang Dongliang)  ","excerpt":"发布时间 2021-06-03 16:45:16\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.7/3-7-2/","title":"v3.7.2"},{"body":"Release time: 2021-05-20 18:22:17\n cloudpods Repo: https://github.com/yunionio/cloudpods\n22 commits to cloudpods - v3.7.1 since this release.\nBug Fixes (20)  ansibleserver: correct playbook path (25db02f5d, rainzm) cloudid: clouduser use default domain (e8b432a99, Qu Xuan) esxiagent: make the copied disk type as thin (f6bf63fa8, rainzm) esxiagent: execute deploy operation by default in AgentDeployGuest (a0f7a5e7b, rainzm) glance: make image is_standard updatable (31c1cbd4f, Zexi Li) region: send webhook when the creation task is completely completed (e65e38f50, rainzm) region: ctyun delete secgroup fix (f53f9566b, TangBin) region: check whether the disks of the instance snapshot is empty when creating vm (e40c98d60, rainzm) region: project mapping optional (a14a43495, 屈轩) region: more accounts details for project mapping (7cb4da8bd, Qu Xuan) region: avoid index out of range panic (11a2f89f6, Qu Xuan) region: send webhook notification when delete dbinstance (80f07d067, rainzm) region: aws sync disk missing image id fix (c3a11613d, TangBin) region: avoid azure secgroup sync removed (74847d573, Qu Xuan) region: optimized server sku sku (1c19d1d9c, Qu Xuan) region: allow update sku status (29c77119f, Qu Xuan) region: use the previous method for guest notification instead of message subscription (b3c8cf6cd, rainzm) region: optimized sku sched clear (16cfab47e, Qu Xuan) region: aliyun vpc endpoint (c2fbd90bc, Qu Xuan) region: check sku request error (45d3b7521, Qu Xuan)  Features (2)  ansible: add rolePublic and timeout options (d6791e607, rainzm) monitor: add storage monitor metric (c501123b6, zhaoxiangchun)   dashboard Repo: https://github.com/yunionio/dashboard\n23 commits to dashboard - v3.7.1 since this release.\nBug Fixes (11)    add cloud SSO and update password to user menu 2. fix monitor translation issue (9b6d42520, Qiu Jian)   support update sku postpaid and prepaid status (15d4528a8, Qu Xuan) Cloudenv/AwsHuawei: #7431 创建天翼云云账号，开启免密登录时创建报错 (d6a98e99e, gaomingjiu@yunion.cn) Disk: #7450 VMware主机同步磁盘状态后状态为未知，再次同步主机状态，磁盘状态正常 (3be5cf474, gaomingjiu@yunion.cn) Locales: image save fail i18n (9c19b33e7, gaomingjiu@yunion.cn) OsSelect: select instance snapshot params and console error (9922de1fd, gaomingjiu@yunion.cn) SearchBox: change date filter error (5901834bb, gaomingjiu@yunion.cn) SearchBox: #7430 云上日志使用时间范围过滤，此前、此后这两种情况点击确定前端报错 (1c2bbae2d, gaomingjiu@yunion.cn) ServerPassword: 主机快照默认选中保留镜像设置且不支持更改类型 (b86f8c330, gaomingjiu@yunion.cn) SkuList: #3134 批量设置销售状态位置修改 (1f892349b, gaomingjiu@yunion.cn) TagTableColumn: #7435 列表鼠标hover标签icon时，只展示user的标签，不展示ext的 (3054835d9, gaomingjiu@yunion.cn)  Features (1)  Network: add vlan id filter (5d2d58ad0, gaomingjiu@yunion.cn)  Others (11)  monitor query add metric translations for storage (0ec170ac2, TangBin) create ucloud account support subaccount (9ae2892a7, TangBin) lbcert add is complete (942836b53, TangBin) dashboard table sort fix (3ddae5cd7, TangBin) dashboard default name fix (bc1be253b, TangBin) dashboard overview table sort by number (a4146eb41, TangBin) username tranlations fix (3d87fdf33, TangBin) overview add event data loading (7e29b5629, TangBin) network list export add ports used (731a8e084, TangBin) vminstall agent install fail reason (63bb5df9f, TangBin) vue router meta add propertity canRenderDefaultLayout (91be189c5, TangBin)  ","excerpt":"Release time: 2021-05-20 18:22:17\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.7/3-7-1/","title":"v3.7.1"},{"body":"发布时间 2021-05-20 18:22:17\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n22 commits to cloudpods - v3.7.1 since this release.\nBug Fixes (20)  ansibleserver: correct playbook path (25db02f5d, rainzm) cloudid: clouduser use default domain (e8b432a99, Qu Xuan) esxiagent: make the copied disk type as thin (f6bf63fa8, rainzm) esxiagent: execute deploy operation by default in AgentDeployGuest (a0f7a5e7b, rainzm) glance: make image is_standard updatable (31c1cbd4f, Zexi Li) region: send webhook when the creation task is completely completed (e65e38f50, rainzm) region: ctyun delete secgroup fix (f53f9566b, TangBin) region: check whether the disks of the instance snapshot is empty when creating vm (e40c98d60, rainzm) region: project mapping optional (a14a43495, 屈轩) region: more accounts details for project mapping (7cb4da8bd, Qu Xuan) region: avoid index out of range panic (11a2f89f6, Qu Xuan) region: send webhook notification when delete dbinstance (80f07d067, rainzm) region: aws sync disk missing image id fix (c3a11613d, TangBin) region: avoid azure secgroup sync removed (74847d573, Qu Xuan) region: optimized server sku sku (1c19d1d9c, Qu Xuan) region: allow update sku status (29c77119f, Qu Xuan) region: use the previous method for guest notification instead of message subscription (b3c8cf6cd, rainzm) region: optimized sku sched clear (16cfab47e, Qu Xuan) region: aliyun vpc endpoint (c2fbd90bc, Qu Xuan) region: check sku request error (45d3b7521, Qu Xuan)  Features (2)  ansible: add rolePublic and timeout options (d6791e607, rainzm) monitor: add storage monitor metric (c501123b6, zhaoxiangchun)   dashboard 仓库地址: https://github.com/yunionio/dashboard\n23 commits to dashboard - v3.7.1 since this release.\nBug Fixes (11)    add cloud SSO and update password to user menu 2. fix monitor translation issue (9b6d42520, Qiu Jian)   support update sku postpaid and prepaid status (15d4528a8, Qu Xuan) Cloudenv/AwsHuawei: #7431 创建天翼云云账号，开启免密登录时创建报错 (d6a98e99e, gaomingjiu@yunion.cn) Disk: #7450 VMware主机同步磁盘状态后状态为未知，再次同步主机状态，磁盘状态正常 (3be5cf474, gaomingjiu@yunion.cn) Locales: image save fail i18n (9c19b33e7, gaomingjiu@yunion.cn) OsSelect: select instance snapshot params and console error (9922de1fd, gaomingjiu@yunion.cn) SearchBox: change date filter error (5901834bb, gaomingjiu@yunion.cn) SearchBox: #7430 云上日志使用时间范围过滤，此前、此后这两种情况点击确定前端报错 (1c2bbae2d, gaomingjiu@yunion.cn) ServerPassword: 主机快照默认选中保留镜像设置且不支持更改类型 (b86f8c330, gaomingjiu@yunion.cn) SkuList: #3134 批量设置销售状态位置修改 (1f892349b, gaomingjiu@yunion.cn) TagTableColumn: #7435 列表鼠标hover标签icon时，只展示user的标签，不展示ext的 (3054835d9, gaomingjiu@yunion.cn)  Features (1)  Network: add vlan id filter (5d2d58ad0, gaomingjiu@yunion.cn)  Others (11)  monitor query add metric translations for storage (0ec170ac2, TangBin) create ucloud account support subaccount (9ae2892a7, TangBin) lbcert add is complete (942836b53, TangBin) dashboard table sort fix (3ddae5cd7, TangBin) dashboard default name fix (bc1be253b, TangBin) dashboard overview table sort by number (a4146eb41, TangBin) username tranlations fix (3d87fdf33, TangBin) overview add event data loading (7e29b5629, TangBin) network list export add ports used (731a8e084, TangBin) vminstall agent install fail reason (63bb5df9f, TangBin) vue router meta add propertity canRenderDefaultLayout (91be189c5, TangBin)  ","excerpt":"发布时间 2021-05-20 18:22:17\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.7/3-7-1/","title":"v3.7.1"},{"body":"Release time: 2021-05-12 16:45:43\n cloudpods Repo: https://github.com/yunionio/cloudpods\n953 commits to cloudpods - v3.7.0 since this release.\nAnsibleserver (2)  wait zombie subprocesses (7f80003d2, Yousong Zhou) use mcclient module method for fetching keypair info (6de0b2e35, Yousong Zhou)  Apigateway (3)  handler: add cloudproxy (39c169582, Yousong Zhou) try return httperrors (1d1a5c327, Yousong Zhou) reword error messages (583d1889f, Yousong Zhou)  Apihelper (1)  move to yunion.io/x/onecloud/pkg/{vpcagent/,}apihelper (98fcdb2be, Yousong Zhou)  Bug Fixes (565)  actions domain filter by project doamin id (287d5a555, Qu Xuan) add trans info (bc991fda7, Qu Xuan) optimized aliyun error (3e984f115, Qu Xuan) openstack health should be normal (1e7cf0af4, Qu Xuan) resolve conflict of climc docker build (7db688a9c, Qiu Jian) nas misc (a874c2a75, Qu Xuan) aliyun lb charge type (7730e87fc, Qu Xuan) qcloud eip bandwidth (c12125d86, Qu Xuan) secgroup cache policy (f60e95641, Qu Xuan) validate secgroup references (3e88e3093, Qu Xuan) get region nil pointer error (2a3a85f3a, Qiu Jian) init cloud shell by apigateway (d80d9f13b, Qiu Jian) add more organization command (0d6c17e31, Qiu Jian) missing yunionconf log (eda02abc9, Qiu Jian) optimzed tag sync (d7be39edf, Qu Xuan) add nat sku provider filter (14246f483, Qu Xuan) add secgroup filter opts (1ae3fbc74, Qu Xuan) add tag for databricks vm (082d5a9d6, Qu Xuan) update version of file-repo (f89f43d16, rainzm) optimized bucket tag (84f8cc1b3, Qu Xuan) add nat sku policy (8e2092e18, Qu Xuan) add cancel expire action (e17fca6c4, Qu Xuan) sync nat sku when sync cloudaccount (7b6cac88a, Qu Xuan) avoid return no data result (8ba639bb4, Qu Xuan) aliyun public ip bandwidth (f853cc4c0, Qu Xuan) aliyun tag list api (b63241b2f, Qu Xuan) support prepaid instance change config (8ce4f109b, Qu Xuan) optimize change vm config and prepaid change config (a65b2f633, Qu Xuan) add bucket tooltip (0cb8100ad, Qu Xuan) require password for imported user (a17c84613, Qiu Jian) avoid host worker is locked when image cache is deleted (251afc7d6, Qu Xuan) sync new project for azure resource group (2b3741885, Qu Xuan) optimzed tag update and sync (a1820bc33, Qu Xuan) optimized rbd storage input and update (fae6d333c, Qu Xuan) sku zone (038faf791, Qu Xuan) skip zone check when rds change config (3ed28eea2, Qu Xuan) avoid panic (7012a8cfb, Qu Xuan) sync cloud tags when set tags (3b2c804e2, Qu Xuan) private cloud sku attached disk count (295d4b993, Qu Xuan) add rbdcli commond for debug (83c108d48, Qu Xuan) add panic log for worker task (5cba23d8c, Qu Xuan) qcloud bucket refer (7c2200c35, Qu Xuan) change rds config skip zone check (dd55eae07, Qu Xuan) optimized nat entry (790366c93, Qu Xuan) before insert (0c72b07c3, Qu Xuan) avoid panic when use idc vpc (1aeb8a9a8, Qu Xuan) add index for image_type (1fd9bd5b2, Qu Xuan) nat sku env (22756d495, Qu Xuan) add qcloud get tags and remove unused interface (cc8a40000, Qu Xuan) add options for pre allow ip add (b8530c26d, Qu Xuan) remove qcloud region and zone prefix (82ac67123, Qu Xuan) nat delete and create fix (740937ff6, Qu Xuan) new aws region (bc1c1c20b, Qu Xuan) add region id params (cfba238f8, Qu Xuan) account auto sync time (0a81e8a54, Qu Xuan) time sync duration (67df9bb41, Qu Xuan) secgroup cache reference (2d5744376, Qu Xuan) peer secgroup rule fix (14be7b8a0, Qu Xuan) vpc public with nat (aea94c066, Qu Xuan) instance with eip charge type (4f00223df, Qu Xuan) nat sku domain policy (263db9b8c, Qu Xuan) cloudaccount auto sync (15efe1933, Qu Xuan) vendor update (8e65757b9, Qu Xuan) avoid listener worker leak (7b79a8e49, Qu Xuan) avoid update protocol with any faild (71b0a4fae, Qu Xuan) avoid stop or start vm failed (e8b70d483, Qu Xuan) adjust primary key length when sqlchemy utf8 default to utf8mb4 (0c57a713e, Qiu Jian) nas for huawei (19b617b1e, Qu Xuan) ansibleserver: don’t init privateKey for ansibleplaybook if it already have one (9502cfebf, rainzm) ansibleserver: add LF for privateKey if not (4088e47f9, rainzm) ansibleserver: be compatible with empty params (630729ca8, rainzm) apigateway: add auth/stats api to retrieve system info (#10182) (31854889d, Jian Qiu) apigateway: recover remove apigateway locale messages (e65d6cdf2, Qiu Jian) apigateway: use info response service type of console endpoints (2990e5d47, Qiu Jian) apigateway: count city servers (34b12241f, Qu Xuan) apigateway: getRegions return value of api_server (6549d886c, Qiu Jian) apigateway: allow logout by get method (d2caac95d, Qiu Jian) apigateway: ignore fetch IDP errors in getRegions (#10071) (f5f02b5e0, Jian Qiu) apigateway: add enable_quota_check and return-domain-list attributes to fe params (#10159) (43e858265, Jian Qiu) awscli: instance-rebuild-root fix (5d6c8c761, TangBin) baremetal: sas2iru parse line (20c041ec0, Zexi Li) baremetal: try channel 8 for default profile (50ad5a76b, Qiu Jian) baremetal: use command timeout context replace timeout command (6d5cd8ca8, Zexi Li) baremetal: convert to host failed (8cc0b63c8, Zexi Li) baremetal: megactl driver fail to find device by key (6945b6250, Qiu Jian) baremetal: baremetal ipmi probe reset link up state (c1868f1dd, Qiu Jian) baremetal: register baremetal name invalid (a8312c5e2, Zexi Li) baremetal: clear jbod disks do PDMakeGood (77e4c806f, Zexi Li) baremetal,esxiagent: no cloudroot user initialized (9ae991c15, Qiu Jian) baremetal-agent: baremetal will probe status in status unknown (32311f989, Qiu Jian) baremetal-agent: baremetal fail to stop due to power off soft failed (d8b1a992f, Qiu Jian) build: fmt: ignore auto-generated files (a290a6a49, Yousong Zhou) build: chage template of ‘Abnormal Login’ (06634a63a, rainzm) build: DOCKER_CLI_EXPERIMENTAL=enabled (a083cc510, Zexi Li) build: build telegraf-raid-plugin (183e9cfa5, Zexi Li) climc: server-create –desc not work (6acf96e87, Zexi Li) climc: use printObjectRecursive for PerformXxx calls (d6463f955, Yousong Zhou) climc: mv climc rpm package .bashrc to /etc/profile.d/climc.sh (01d2612ab, Zexi Li) climc: host add netif add params bridge/interface (447882a00, wanyaoqi) climc: replace ' -\u003e \" (5c64f32f0, Qu Xuan) cloudcommon: add default domain of common options (772579d3e, Zexi Li) cloudcommon: unify OS_ARCH constants (e1816106a, Zexi Li) cloudcommon: missing set_meta opslog (#9915) (2f3a3766c, Jian Qiu) cloudcommon: perform public should check the sharing scope of resource (faf00d8d6, Qiu Jian) cloudcommon: use rbac authentication dedicated to the list interface in GetModelProperty (c8d1ac215, rainzm) cloudcommon: splitable may not initialize underlying table (658c59327, Qiu Jian) cloudcommon: disable EventNotify for now (15abea72a, rainzm) cloudcommon: use NewGeneralError to construct error (9f927922a, rainzm) cloudcommon: supplement i18n translations (fbdcbeb75, Qiu Jian) cloudcommon: disable quota check by default (0a7513cce, Qiu Jian) cloudcommon: adjust policy refresh to default 30 seconds (ef8ad8966, Qiu Jian) cloudcommon: query filter ineffective for splitable (abbcac09a, Qiu Jian) cloudcommon: panic when query an empty splitable model manager (d01f89a2c, Qiu Jian) cloudcommon: add rbac_policy_refresh_internval_seconds option (792bfe533, Qiu Jian) cloudevent: default policy (0ff3997a2, Qu Xuan) cloudevent: add aws cloudevent (e91b5dbc3, Qu Xuan) cloudevent: update aliyun lookupevent api (22a41fb05, Qu Xuan) cloudevent: adjust cloudevents resource scope (e12eea679, Qiu Jian) cloudevent: cloudevent is domain level resource (84b9e1fb0, Qu Xuan) cloudevent: add distinct filed for cloudevent (53969f14e, Qu Xuan) cloudevent: optimized cloudevent sql (ae90bbd20, Qu Xuan) cloudevent: optimized cloudevent sync (a5834180f, Qu Xuan) cloudevent,devtool: missing metadata table (ba08d9d46, Qiu Jian) cloudid: add en-US html templte (49c90a381, Qu Xuan) cloudid: optimized system policy sync (7760e0c3a, Qu Xuan) cloudid: add for notify templete (21820fe2d, Qu Xuan) cloudid: avoid empty auth url (79ea27170, Qu Xuan) cloudid: fix azure saml provider delete error (9ff20ed93, Qu Xuan) cloudid: avoid new public account sync system policy delay 1 day (3b0710d98, Qu Xuan) cloudid: sync role policy (c0e3427df, Qu Xuan) cloudid: auto update saml provider metadata (ac146af36, Qu Xuan) cloudid: saml navigation template support i18n (e3fb7729d, Qiu Jian) cloudid: optimized saml sso (0165d8391, Qu Xuan) cloudid: huawei saml provider create issue (5f8461461, Qu Xuan) cloudid: azure saml confirm (f00bc6d19, Qu Xuan) cloudid: sync qcloud collaborators user (f841fd85a, Qu Xuan) cloudid: avoid use invalid character for role name (1e5014aa4, Qu Xuan) cloudmon: deal cannot get azure metric (369872f7a, –global) cloudproxy: correct fetch projectId from server for PE (4ba3a2670, rainzm) cloudproxy: keep the proxy endpoint project and server consistent (de7ef8baa, rainzm) cloudproxy: ssh proxy endpoint\u0026match query (e965d1d9e, TangBin) common: add debug info for lock (5d88767c9, Qu Xuan) devtool: set ‘task_id’ and ‘task_notify_url’ in header (b5d4b30dd, rainzm) devtool: get ‘lastseen’ not ‘last_seen’ of forward (7a1ba77d9, rainzm) devtool: correct output error (93dad50d7, rainzm) devtool: add scope=system query when list proxy endpoints (93e1f48cb, rainzm) devtool: extend the waiting time when checking remote forward (73db546f5, rainzm) devtool: fix a bug that may trigger panic (377f9d00e, rainzm) devtool: wait for the remote forward to run normally (93af6514d, rainzm) esxi: be compatible with disconnected host (d9040773f, rainzm) esxi: determine whether the disk is a root disk more reasonably (18bececcf, rainzm) esxi: prevent fake template and real template from duplication (63fd7e589, rainzm) esxi: correctly set the imagePath outside the if block (de8fd509d, rainzm) esxi: add ListPath for storage and use it to check iso (f8a822c5f, rainzm) esxiagent: add humanized tips when searching vm failed (b9e983787, rainzm) esxiagent: nicIndex should be incremented (02931f509, rainzm) git,make: 更新获取 git branch 的规则 (eb7372263, Zhang Dongliang) git,make: 修正 gitbranch 变量的获取方式，解决自动升级版本 tag 不统一的问题 (0b2aed858, Zhang Dongliang) git,make: git branch 获取方式优化 (71e63e2ed, Zhang Dongliang) glance: list image by os arch use startwith (838650656, wanyaoqi) glance: image can’t removed when size is 0 (61f06ee3c, Zexi Li) glance: set fail status when upload image to s3 (0c4c46b2f, Zexi Li) go.mod: remove k8s.io/kubernetes dependency (c025944d1, Zexi Li) host: guestman: variable name typo (2acca1a70, Yousong Zhou) host: arm vm virtio-net-pci without addr (45b6072f2, Zexi Li) host: fix check hugepage enabled (97d96aa32, wanyaoqi) host: modification of netio collection field of local virtual machine (83a836411, zhaoxiangchun) host: telegraf listen on local ipv4 address explicitly (89df58844, Qiu Jian) host: fix wait time after mount fuse fs (ad2d472d0, wanyaoqi) host: add print migrate progress info (8161d86df, wanyaoqi) host: update host metric tags when server or host changeowner (466153363, zhaoxiangchun) host: make sure it won’t match vpc guests by accident (6db750347, Yousong Zhou) host: detect ovs version (d6d28cf01, Zexi Li) host: check lease living on restart etcd session (92e0ed343, wanyaoqi) host: ignore parted resize disk unknown partition table error (fc1abe2eb, Zexi Li) host: fix set windows password with escape charater (1d8879ef7, wanyaoqi) host: update telegraf conf adapter to container environment (38a9218e9, wanyaoqi) host-deployer: add retry on check is vgactived (4841fbdb1, wanyaoqi) host-deployer: remove escape character on windows passwd (645cf64b9, wanyaoqi) host-deployer: mkfs.ext4 add ‘-T largefile’ option (ecaa03594, Zexi Li) host-deployer: add log line on blkid failed (550159af7, wanyaoqi) host-deployer: probe image info umount rootfs first (37b036ed3, wanyaoqi) host-deployer: cancel rename centos vgname (c302bae2b, wanyaoqi) host-deployer: mount may fail to lock /etc/mtab, add retrier (e35fa898e, Qiu Jian) hostdeployer: windows rootfs umount leak (c308bdbb0, Zexi Li) hostman: avoid panic when disk is nil (24928469f, Qu Xuan) hostman: recycle local disk file when rebuilding root (20c4dad4e, Qiu Jian) hostman: fix kvm create disk failed error (f5ed30759, Qu Xuan) image: update min_disk of iso image (c23b169e1, Qiu Jian) keystone: update default role associated policy name (94f72124f, Qiu Jian) keystone: avoid repeated abnormal login notifications (c4c3b925b, rainzm) keystone: SSO created user name may be duplicated (9342987aa, Qiu Jian) keystone: add suggestion previliges to meter admin (5ef93ed03, Qiu Jian) keystone: avoid panic when call logclient (7e35db104, Qu Xuan) keystone: adjust default system policy names (b034a7a95, Qiu Jian) keystone: allow refresh scope resource (c14b245fa, Qu Xuan) keystone: ignore deleted policies when matching policies (234c37c49, Qiu Jian) keystone: tag list for keystone service (962e19bbd, Qu Xuan) keystone: ensure comparing id with non-utf8 string (601112dd7, Qiu Jian) keystone: always upload\u0026refresh service config whenever service restart (80229fa1e, Qiu Jian) keystone: allow joint projects across domains by default (e6868d5d0, Qiu Jian) keystone: user create without password can login with any password (bc0a4a7b6, Qiu Jian) keystone: not allow to disable sql driver (ef648b5b8, Qiu Jian) keystone: allow delete sso imported non-local user (6428ca9a1, Qiu Jian) keystone: add i18n description for policy and role (7c8455458, Qiu Jian) keystone: oidc driver turn on debug mode if log-level is debug (57a0e8d63, Qiu Jian) keystone: service config ignore deploy server socket path (c2978b820, wanyaoqi) keystone: allow unlink a domain from an IDP (076fa5498, Qiu Jian) keystone: rolepolicies list panic if filter by domain scope (4411c4e5b, Qiu Jian) keystone: send to the admin and the party separately when Abnormal login occurs (697685199, rainzm) keystone: add alertrecords to default dashboard permission (#10161) (739637b8f, Jian Qiu) keystone: panic if request with an invalid token (0eaf20da2, Qiu Jian) keystone: update user attributes whenever user login (a0350d053, Qiu Jian) keystone: role_assignment effective list ignore groups without user (128f895c5, Qiu Jian) keystone: allow filter identity_providers with name of ssoDomain (db7a92178, Qiu Jian) keystone: clear failed auth when enable user (9c630dc31, rainzm) keystone: policy name duplication (#10200) (058a0a072, Jian Qiu) keystone: ignore service config update without changes (1d7b7057a, Qiu Jian) keystone: idp filter by sso_domain returns domain’s idp only (1a24034c6, Qiu Jian) keystone: hide system scope policies in domain scope view (#10195) (e43bea673, Jian Qiu) keystone: don’t send the administrator’s message to the party (c5fd65160, rainzm) keystone: cas sso may create new project whenever user login (34e5a36b2, Qiu Jian) keystone: correctly pass domain id to role-assignments (988c90e8f, rainzm) log: add filters to baremetal event logs (1e4b1f3d3, Qiu Jian) log: fail to submit action log (b01a3c153, Qiu Jian) logger: distinct field optimized for logger (14979480e, Qu Xuan) make,buildx: 使用 buildx 编译时，拉镜像到本地 (7b6ce2b05, Zhang Dongliang) mcclient: options: webconsole: fix passing ssh port (b06be9ea5, Yousong Zhou) monitor: fix monitor export err (c068badd3, zhaoxiangchun) monitor: sore reture info：resourceType,measurement (333c83778, –global) monitor: add resType filter (ee00fd319, –global) monitor: alertpanel create fix; nodealert filterbyowner fix (1c8b54f11, zhaoxiangchun) monitor: 3.7 nodata and alertOverview fix (a43a4e617, zhaoxiangchun) monitor: modify rds,redis,oss field descriptions (d88ec4c39, zhaoxiangchun) monitor: monitor notify international and 3.6 bugfix (2f11e6012, –global) monitor: domain view can list scope is domain or project alertrecords; fix nodata alert return info (5c12f9e1f, zhaoxiangchun) monitor: modify totalrecord query (5e054a25a, zhaoxiangchun) monitor: fix nodata alertresource list (f408ef027, –global) monitor: alertPanel add dumplicate name check (383709d8e, zhaoxiangchun) monitor: fix update alert duration fail (523cbab84, zhaoxiangchun) monitor: fix alert duration (1bce5eaa6, zhaoxiangchun) monitor: alertQuery fix (1b045d59c, zhaoxiangchun) monitor: fix 报警静默期和未恢复告警策略的兼容 (26721fc50, zhaoxiangchun) monitor: registry alertPanel in mcclient (23e44d83d, zhaoxiangchun) monitor: modify suggestrule process influxdb data (91d1f64ef, zhaoxiangchun) monitor: alertpanel update don’t chcek uniq name (8bc086e8d, zhaoxiangchun) monitor: fix monitoroverview and meter send alerting info to notify (107c1745d, zhaoxiangchun) monitor: suggestalert ignore throw err (b8c008a8a, zhaoxiangchun) monitor: modify alertrecord list input (e8a8d121f, zhaoxiangchun) monitor: modify monitor serviceType in StartService() (dcdf3a128, zhaoxiangchun) monitor: fix alert notify info do not contain resourceName (7fd2b865e, zhaoxiangchun) monitor: modify nodata feishu notifyinfo; fix send email err (92fbf93cb, zhaoxiangchun) monitor: modify influxdbSuggestDriver query err (df6a2634f, zhaoxiangchun) monitor: other servier create alert add used_by param as a agreement (752660450, –global) monitor: monitor query : cloudaccount no data fix (4f7ad853d, zhaoxiangchun) monitor: modify onecloud replacement code (fdafdeb8a, zhaoxiangchun) monitor: set alertdashboard scope (9901f56b7, zhaoxiangchun) monitor: alertdashboard setscope (c78defe39, zhaoxiangchun) monitor: monitor overview throw err (23f80dced, zhaoxiangchun) monitor: delete suggestConfig auto init data (2a7f9ab51, zhaoxiangchun) monitor: modify monitor nodata alert matching onecloud host func (73ec2db41, zhaoxiangchun) monitor: filter alertquery result according to onecloud resources (4ad8729f7, zhaoxiangchun) monitor,host: replace space to ‘+’ when write to influxdb and replace ‘+’ to space when query (c86dab4d6, zhaoxiangchun) monitor,suggestion: order commonalert metric and modify alertresoruce type value and add suggestion models climc (73ab024df, zhaoxiangchun) multicloud: set isEmulated as false for ecloud vpc (e96c43b21, rainzm) notify: be compatible with robots and webhooks (ad1d065ac, rainzm) notify: update receiver’s lang when update event occurs (8c717e1ae, rainzm) notify: set ModelManager in Receiver() (bb7b179c4, rainzm) notify: avoid duplication of notification names (78c16bfc0, rainzm) notify: enable filter of contact type ‘email’ and ‘mobile’ (fb6064fa2, rainzm) notify: loose phone number rules in updating receiver (9503546d0, rainzm) notify: loose mobile phone number matching rules (50c8636ce, rainzm) notify: exempt the administrator to create the receiver verification (3805119c4, rainzm) notify: set status after sending (9a9c9acb8, rainzm) notify: send websocket messages according to language preference (4f4538834, rainzm) notify: choose template in NotifyFilter (15cd89808, rainzm) notify: correctly filter those recipients who join the domain (60f2dfed8, rainzm) notify: panic for err (36853a6cf, rainzm) notify: fit correctly when send notification via contact (4f386fea1, rainzm) notify: check for changes before updating config (5bc847f05, rainzm) notify: inject domain info in ReceiverManager.FetchOwnerId (ac8f20ca1, rainzm) notify: repull subcontact after changing config (75998a132, rainzm) notify: avoid deadlock (54ed4b619, rainzm) notify: get the receiver corresponding to the role correctly (0de209502, rainzm) notify: be compatible with webconsole type hack (c89116938, rainzm) notify: return the result of the second attempt to execute the rpc call (4135b3729, rainzm) notify: add a time limit for resending notifications (75b375bc7, rainzm) notify: remote ‘lang’ filter when contact type is ‘mobile’ (97e9be3b2, rainzm) notify: be compatible with member’s permission changes (d8b92dd97, rainzm) notify: add index fro receiver_notification (3063a7fdf, rainzm) readme: rename OneCloud to YunionCloud (4c4c01562, Zexi Li) region: avoid azure detach disk failed (8d75e55b4, Qu Xuan) region: azure default subscription id (8eb682c4b, Qu Xuan) region: fix zstack delete server with local disks (9d93ddf9a, Qu Xuan) region: cloudaccount: allow only one sync func in flight (2940c350c, Yousong Zhou) region: avoid clean all rules when sync secgroups (18ba99747, Qu Xuan) region: aws not support create server with public ip (c49ceb0b9, Qu Xuan) region: optimized azure reset linux pasword (9aa8a3ab6, Qu Xuan) region: exported number of vpcs less than listed (298fe5d90, Qiu Jian) region: optimized secgroup rule sync (633734719, Qu Xuan) region: purge snapshot with not status check (b9c344e3d, Qu Xuan) region: AWS buckets in us-east-1 have null location (52e2051df, Qiu Jian) region: vpcpeering error message translation (d4878cc7a, lvyangyang) region: update tags status (fa9e5fd84, lvyangyang) region: avoid worker discarded after state unchanged (199a7d678, Qu Xuan) region: tag bugs fix -azure tags replace/refresh -tags action logs -忽略创建中主机的metadate同步任务 (9a10a3460, lvyangyang) region: optimized secgroup rule sync (6eec828ee, Qu Xuan) region: secgroup priority fix (2d5f1a982, Qu Xuan) region: add aliyun credit amount check (5fe6909c3, Qu Xuan) region: add huawei credit amount check (d144b893f, Qu Xuan) region: avoid stuck at http request (f9f0716da, Qu Xuan) region: avoid update tags task loop (0b324945d, Qu Xuan) region: aws elb backendgroup sync bugfix (6c2464047, tangbin) region: filter resource by classic vpc (de96f6e18, Qu Xuan) region: delete virtual nics with network (80d9f50cf, Qu Xuan) region: avoid cachedimage never be in sync when it deleted (b9f3e329a, Qu Xuan) region: avoid sync huawei unusable account (9cad6163d, Qu Xuan) region: optimized for qcloud prepaid instance delete (5e418ab66, Qu Xuan) region: allowed to manually refresh cloudimage (b056c0ce7, Qu Xuan) region: add option auto reconcile backup servers (8f542beac, wanyaoqi) region: check the global network situation when expanding the network (da89673f0, rainzm) region: avoid auzre request timeout (d3a531724, Qu Xuan) region: fix set bucket referer (6a480937b, lvyangyang) region: avoid panic when register service not work (da35a6358, Qu Xuan) region: aliyun support public ip (54ba8cfe4, Qu Xuan) region: sync cachedimage info (124f280fe, Qu Xuan) region: replace cloud tags (499f4624b, lvyangyang) region: delete not exist disk failed (70166a131, Qu Xuan) region: bucket size stats should not count invalid sizes of -1 (607c10bbe, Qiu Jian) region: obtain ProviderFactory correctly (b7b903ff6, rainzm) region: maintain compatibility with webhook notify (780a024e7, rainzm) region: server start check host memory is enough (678f2b3dd, wanyaoqi) region: fetch wires correctly (cbca7e518, rainzm) region: rds list with secgorups info (5e736e183, Qu Xuan) region: avoid public ip bandwidth is zero (e6b75b853, Qu Xuan) region: omit vpc quota check if vpc created by owner (9081b5dc4, Qiu Jian) region: change_ipaddr: retain eip_id on detach and attach (2c8c3b790, Yousong Zhou) region: host search by any ip (06fb5ac5e, Qiu Jian) region: pull the network correctly (3ad9cb0da, rainzm) region: set next stage for start vm (d56078d13, Qu Xuan) region: optimized aws cloudtrail sync (be065ec82, Qu Xuan) region: qcloud quota sync (e760263fa, Qu Xuan) region: aws rebuild instance os_arch mismatch fix (a8ded06ba, TangBin) region: skip cloud image sync error (e08f9a8f7, Qu Xuan) region: openstack network is regional (e3b975713, Qu Xuan) region: remove i18n fix \u0026 zone \u0026region name support i18n (1cca1b568, TangBin) region: aws sync vpc access mode bugfix (7178a2d3c, TangBin) region: cloudregion\u0026zone add namei18n (d097679e4, TangBin) region: support rds secgroup operation (dddfdbd5b, Qu Xuan) region: purge private cloud sku (1d320035b, Qu Xuan) region: apsara optimized (ca578cbb2, Qu Xuan) region: optimized azure rebuild root (7fb008c50, Qu Xuan) region: aws lb create tags param (50bc20b2a, lvyangyang) region: avoid not sync dns zone (6677ae43b, Qu Xuan) region: set redis reboot timeout to 30 mins (aa96cb748, tangbin) region: fix rds tag set error (60b3e5386, Qu Xuan) region: sku.meta use global proxy (a8cc140b5, Qu Xuan) region: optimized disk allocate sched failed log (d78f4a98b, Qu Xuan) region: avolid panic when list role’s policies (a75e6c906, Qu Xuan) region: avoid openstack change config error (78ef400b1, Qu Xuan) region: support peer secgroup (73fe4866d, Qu Xuan) region: private cloud sku create (09a039eb6, Qu Xuan) region: more details for get aws region error (0ffa3e514, Qu Xuan) region: aliyun request retry (1c6d6c90f, Qu Xuan) region: optimized qcloud error code (195793c88, Qu Xuan) region: redis change spec bugfix (a275b46a7, tangbin) region: add azure new region (12e0b3c90, Qu Xuan) region: check whether guest is nil (23328aa12, rainzm) region: network eip stats not correct (4f474ad8b, Qiu Jian) region: add huawei gpssd desc (b5a25b9c6, Qu Xuan) region: 避免从云上同步下来的主机，创建相同配置时network_id为空 (61c25a597, Qu Xuan) region: validate cloudaccount saml auth params (c05b75385, Qu Xuan) region: cloud provider filter by domain (bb1e1382a, Qiu Jian) region: valid qcloud hssd for system disk (c5c77b406, Qu Xuan) region: fix openstack instance os type (5674b5e5f, Qu Xuan) region: lbacl \u0026lbcert default share scope (b52a7d019, TangBin) region: lbbackend: better error reporting for finding influxdb info (754359b95, Yousong Zhou) region: fail to update network gateway (b92d3a93f, Qiu Jian) region: struct input for detach server network (da4cf61cc, Qu Xuan) region: cloud provider filter by domain_id ignore private case (72e805ab9, Qiu Jian) region: aliyun nas endpoint (b7b030fc2, Qu Xuan) region: add RequestRemoteUpdate for ESXiGuestDriver (72bc3b864, rainzm) region: set qcloud instance del timeout to 20m (bd9f961bd, Qu Xuan) region: scoped policy filter by project id (8ca6d176f, Qiu Jian) region: azure secgroup rule not allow with same priority and direction (bd99ad219, Qu Xuan) region: azure async task (f60c1835d, Qu Xuan) region: sync servers (ae060f234, Qu Xuan) region: including domain info in project-role results (3288fe9da, Qiu Jian) region: aws sts assume role fail break account initialization (51dfb8f73, Qiu Jian) region: do not change disk status on migrating (97864f96e, wanyaoqi) region: elb acl validate create data fix (4cdd768ce, TangBin) region: aliyun elb listener\u0026lbbg sync project (e19a022f6, TangBin) region: cert\u0026acl cache delete condition check (d91c7a62d, TangBin) region: guest to create input keep billing info (36102e97d, wanyaoqi) region: qcloud redis sync fix (f93e9f1cd, tangbin) region: fix change config forecast (2dc5b4791, wanyaoqi) region: remove unnecessary vpc validate create date error wrap (3f19bb1ef, TangBin) region: network create mask length validate (f3c8bede5, TangBin) region: show storage capacity to project users (a44eb70df, Qiu Jian) region: vpc create data cird validate (72321d011, TangBin) region: ctyun delete server bugfix (c50c47d65, TangBin) region: guestnetworks: use net calculated mtu (44b6391a6, Yousong Zhou) region: create vm with eip task fix (e2f1e5548, TangBin) region: add more usage metrics, e.g. ports.eip, servers.last_week, pending_delete_servers.last_week (762664fd0, Qiu Jian) region: apsara metrics fix (edae255a0, Qu Xuan) region: skus add cloudenv (cfc5fe9f2, TangBin) region: exclude network recommended for host when suggesting network for guest (c91ad4a70, rainzm) region: allow delete storagecachedimage with ‘cache_failed’ status (052a10f63, rainzm) region: eip_allocate_task: set eip status allocate_fail on task failure (719a9608c, Yousong Zhou) region: allow reset huawei system disk (332f752ae, TangBin) region: allow ipmi probe when probe fail (14bd5ea08, Qiu Jian) region: de-duplication when obtaining the number of hosts (052442ef6, rainzm) region: expand the bridge field (841ec1f25, rainzm) region: add usage cache, speedup response (3248f5725, Qiu Jian) region: remove i18n lock and logs (2749d2c70, Qiu Jian) region: guest associate eip checking fix (e728f62fd, tangbin) region: vpc sync external access mode fix (5d20bf280, TangBin) region: vpc usable fix (982db46e8, TangBin) region: aws create vpc with igw add defaultroute (d37ec27d7, TangBin) region: aws delete vpc skipped delete main route table (1cb6980b1, TangBin) region: aws vpc delete skip delete default secgroup (52ef2c2d5, TangBin) region: aws vpc delete related route table \u0026 internet gateway (6aa2fc581, TangBin) region: guest sync eip fix (2f075de8c, tangbin) region: sku list query print missing error info (687deac24, TangBin) region: aws create storage type fix (208adf8a0, TangBin) region: aws create root device name fix (fc64ea325, TangBin) region: vpc create validate cidr mask length (6591c5a75, TangBin) region: continue to sync the snapshots that are being created when syncing auto created snapshot (eb049034c, rainzm) region: vpc list usable fix (dbc1c7cdf, TangBin) region: allow ipmi probe in status unknown (79452d771, Qiu Jian) region: update translations (a537c0e39, TangBin) region: baremetal post update related server (9cd2cb779, Zexi Li) region: purge all instance snapshots when purging guest (33a702617, rainzm) region: avoid refreshing when checking the image (c24cb9092, rainzm) region: rigorously merge the network under wire (4ea606730, rainzm) region: save when canceling pendingUsage (b4011db91, rainzm) region: make project of instance snapshot be consistent with the instance (e6c908da2, rainzm) region: support project mapping (0b4e459e0, Qu Xuan) region: sync baremetal desc before do ipmi probing (39de7daae, Qiu Jian) region: add size and storageType for VMware InstanceSnapshot (be76d1eb4, rainzm) region: network reserved ip count not consider expiration of reserved ips (b581c6dab, Qiu Jian) region: optimized server stop code (7c6d4fddf, Qu Xuan) region: server login info\u0026 keypair import input parameter trimspace (b26249811, TangBin) region: remove code about getting service url (24be43090, rainzm) region: update google latitude and langtitude (dd3da3c4c, Qu Xuan) region: sku enabled (be63b02b9, Qu Xuan) region: ignore params.Disks when cloning vm from snapshot (da03a979f, rainzm) region: decouple region and etcd service (febd9b7f6, Zexi Li) region: gpu server change config use reserved resources (9c04a7bf3, wanyaoqi) region: wire sql fix (8b1b5c0f5, Qu Xuan) region: import rule error hint (ed9675a90, Qu Xuan) region: try to connect when new a SEcloudClient (6bc4baa9b, rainzm) region: openstack hosts sync (77f515a93, Qu Xuan) region: aws default account (b511db2e0, Qu Xuan) region: remove useless Environment (507523a52, rainzm) region: Remind that cloud account synchronization failed due to network synchronization failure (d105e0556, rainzm) region: purge instancesnapshot when purging guest (7b8043545, rainzm) region: ignore aliyun region not supported error (ec2e51a72, Qu Xuan) region: sanitize eip charge type on all callsites (82e297a55, Yousong Zhou) region: optimized openstack change config (20ca72cd4, Qu Xuan) region: optimized qcloud prepaid instance delete (691a5fc77, Qu Xuan) region: support openstack subnet allocation pools (792b4cdd8, Qu Xuan) region: convert eip with same project with vm (c79495dbf, Qu Xuan) region: nas owner id fix (1761b0fd6, Qu Xuan) region: sync account id (561f64267, Qu Xuan) region: restore password validate condition (06207c4a3, Qu Xuan) region: validate isolated devices on migrate (97a542890, wanyaoqi) region: openstack available zones (9ddf20744, Qu Xuan) region: wait more time for creating nas (f514514ea, Qu Xuan) region: attach network on register baremetal server (92727def0, wanyaoqi) region: optimized peer secgroup (c28f3f68a, Qu Xuan) region: azure instance data disk storage type (38507661f, Qu Xuan) region: avoid assign vm ip addr not effect (8a84c690c, Qu Xuan) region: temp url sign wrong (3a7d6fb14, Qu Xuan) region: vm list order by disk size (f0fe75250, Qu Xuan) region: fetch cached image from glance by default (13800c5d9, Zexi Li) region: fix backup server start task (d2a3d200f, wanyaoqi) region: azure reset windows os password (2d46a73d4, Qu Xuan) region: avoid timeout for waiting azure async task (ab8d1238c, Qu Xuan) region: lbcert\u0026lbacl releated listener count bugfix (2dcc1d610, TangBin) region: avoid panic when sync aliyun networks (8a52933a8, Qu Xuan) region: lb listener filter by acl_id (b3736ab20, TangBin) region: avoid resize azure disk error (64849240b, Qu Xuan) region: redis master zone empty fix (485cf8b3c, TangBin) region: elastic cache name is empty fix (db20769cf, TangBin) region: optimized vm account name code (fe9280421, Qu Xuan) region: region qcloud secgroup project id (d9d3fe26b, Qu Xuan) region: validate invalid character for password (c9ca2c875, Qu Xuan) region: change dbinstance sku sync info log to warn (f6abe165b, TangBin) region: optimized qcloud secgroup sync, only redis need secgroup be in same project (6183f3916, Qu Xuan) region: azure metric request path (9c7145fd5, Qu Xuan) region: avoid using LocalTaskworker in time-consuming synchronization of cloudaccount (c41d974d0, rainzm) region: dbinstance skus sync log level fix (43d4ddd82, TangBin) region: server skus add cloud_env (8dcd685e4, TangBin) region: remove default value of diskConfig.Medium (4f8d86cb1, rainzm) region: make cloudprovider sync worker configurable (afbc3cc8d, rainzm) region: network clean schedule cache after real deleted (b7835f979, Zexi Li) region: inspect invalid guest template (797039a39, rainzm) region: fix modify tags log (d2e5329f3, lvyangyang) region: huawei vnc protocal fix (4b171e163, TangBin) region: climc add base projects options (8686b77b8, TangBin) region: avoid network create failed when vpc is ok but wire not sync (857cc0d2b, Qu Xuan) region: elb cached acl sync (11d12ca7d, TangBin) region: avoid qcloud sync local disk error (39d86735f, Qu Xuan) region: add egress_mbps params for lb (52f3b6938, Qu Xuan) region: admin update without verification (7e054ee0f, rainzm) region: azure win os defualt user (794e7494b, Qu Xuan) region: avoid panic when sync resources (f3a514a41, Qu Xuan) region: allow delete resource which status is unknown (b7ed3a683, Qu Xuan) region: allow update rds account and database desc (b14f6be82, Qu Xuan) region: delete guest without ‘purge’ in GuestDetachScalingGroupTask (6f92fef69, rainzm) region: allow owner to operate snapshotpolicy cache (f642bc959, rainzm) region: make SScheduledTaskLabel implement IJointModelManager (8c07b3cb6, rainzm) region: code gen api error (54537e65c, Qu Xuan) region: wire get vpc releated hosts is empty (b7a8b37f7, Zexi Li) region: secgrouprule: set model manager (3a0303df6, Yousong Zhou) region: reserved name checking while create redis account (1cf8bfb0a, TangBin) region: sort excludedNets correctly (517390395, rainzm) region: pass up error from InitializeData (d5a815834, Yousong Zhou) region: optimized rds backup create (4ab1fe75c, Qu Xuan) region: use special localtask to run time-consuming provider synchronization task (702133be5, rainzm) region: apsara is private cloud (f27ab3cc7, Qu Xuan) region: avoid set multi resources tags failed (f9e212254, Qu Xuan) region: account arrears (f68afc4aa, Qu Xuan) region: bucket get referer fix (ad4c3a38e, lvyangyang) region: add all.servers.any_pool/all.hosts.any_pool metrics (5bb395854, Qiu Jian) region: allow member user get saml auth addr (880e09ee3, Qu Xuan) region: get provider name via GetProviderName (c6592cadc, rainzm) region: get provider name via GetProviderName (83f017a07, rainzm) region: tag list key case insensitive (909eeeb78, Qu Xuan) region: download cached image from source host before migrating (708db7b95, Zexi Li) region: auto sync cloudaccount resources (b574323cb, Qu Xuan) region: allow domain admin to obtain ssh private keys (835a31127, rainzm) region: huawei sync storages bugfix (797101e6c, TangBin) region: qcloud request retry (bd8cf2453, Qu Xuan) region: aws detach igw before delete vpc (80c3f6b2c, TangBin) region: avolid aliyun fin bucket list objects error (5a82bffeb, Qu Xuan) region: 避免OneCloud密码校验通过，公有云厂商密码校验不通过 (0da66b071, Qu Xuan) region,baremetal: pxe net reuse converted server access ip (2c7f8d93f, Zexi Li) region,baremetal: choose candidate network not according by types (e2201a80f, Zexi Li) region,climc: eips: rename arg name for requested eip addr (4a8eee0db, Yousong Zhou) region,esxiagent: allow host behind a nat (a5327c3ce, Qiu Jian) region,glance: list by os arch adapt to empty strings (8a82407f9, wanyaoqi) region,host: fix hot remove nic (d9137720a, wanyaoqi) region,host: sync status check block jobs (5bbf364f2, wanyaoqi) region,scheduler: fix netwrok predicate (ff9d051fa, wanyaoqi) region,scheduler: filter enabled skus (646a6e388, Qu Xuan) region,yunionapi,glance: using global proxy (57ae68949, Qu Xuan) scheduler: check candidate tag resource is nil (a7e40d36c, Zexi Li) scheduler: storage medium type should not exact match (#10191) (7a37232aa, Jian Qiu) scheduler: select resource unordered (6a80a1266, Zexi Li) scheduler: get candidates error more info (7d836f77a, Zexi Li) scheduler: storage predicate add actualCapacity filter (bdd112e80, Zexi Li) scheduler: sku by region and fill onecloud vpc networks (a78c565d4, Zexi Li) scheduler: clean expire cache before schedule (c0da4cc52, Zexi Li) scheduler: sku filter check zone if only prefer region specified (c87c2b384, Zexi Li) scheduler: fetch input network when specified (870db8e87, Zexi Li) taskman: use admin token if task userCred token expired (4043cd834, Qiu Jian) taskman: SSubTask: set model manager (da4c2dcaa, Yousong Zhou) telegraf: megactl raid add rebuild status (85f971a21, zhaoxiangchun) treewide: fix task error recording (c6970e9a2, Yousong Zhou) vpcagent: models: guestnetworks: accomodate change_ipaddr (9beb3706e, Yousong Zhou) vpcagent: ovn: stable dns A record value (25cd80884, Yousong Zhou) webconsole: trim api_server url if end with slashes (859e2078a, Zexi Li) wire: init and change status (e54d1e1cb, rainzm)  Bugfix (3)  monitor: 导出信息中添加全局字典配置 (839df9025, zhaoxiangchun) region: server change config rebase to sched task (999cc74bd, wanyaoqi) region: fix list by srever type normal (23e4a483d, wanyaoqi)  Build (13)  ansibleserver: use ansibleserver-base:v1.0.3 (ea0523e02, Yousong Zhou) ansibleserver-base: v1.0.3: add sshpass (88311daca, Yousong Zhou) cloudproxy: add dockerfile (361e20c33, Yousong Zhou) y18n: add apigateway (9766594da, Yousong Zhou) skip y18n-check for now (7042f97cd, Yousong Zhou) add y18n-check, y18n-gen (c786a56ef, Yousong Zhou) use centos-build:1.1-4 (139740613, Yousong Zhou) docker: add ModName (87e08c49d, Yousong Zhou) docker: move to Makefile.common.mk (7a01f72d6, Yousong Zhou) docker: align centos variant with the alpine one (d7804f6da, Yousong Zhou) docker: make target GOARCH/GOOS/CGO_ENABLED aware (3d7e5aaf9, Yousong Zhou) docker: remove GOFLAGS export (6c7a12448, Yousong Zhou) docker: use openvswitch 2.10.5-1 (ce86ed816, Yousong Zhou)  Chore (5)  host: options: use rundir /var/run/onecloud for sdnagent (1709aa2e1, Yousong Zhou) monitor: delete suggestion files (ad0c063fb, zhaoxiangchun) util: update centos build version to 1.1-3 (84d64df0c, wanyaoqi) utils: add deb build script (2d0b3c452, wanyaoqi) vendor: update google.golang.org/grpc@v1.29.1 (665de6d56, Yousong Zhou)  Climc (7)  add commands server-make-sshable, server-make-sshable-cmd (51cd8bd2f, Yousong Zhou) compute: add command server-sshable (f9cfee055, Yousong Zhou) add commands for cloudproxy (034bf55af, Yousong Zhou) costreports: fix bad struct tag (229c02472, Yousong Zhou) helper: add BatchCreate helper (027817f56, Yousong Zhou) helper: create call as a standalone method (85aa05f1f, Yousong Zhou) s/Keyworkd/Keyword/ (a56aca9cb, Yousong Zhou)  Cloudprovider (2)  add ErrAddressCountExceed (325623a70, Yousong Zhou) ICloudNic: add methods for secondary addresses (d0f64150c, Yousong Zhou)  Cloudproxy (18)  agent: no collision between ports of ssh conn and forwards (cb35bc306, Yousong Zhou) agent: refresh every 11 seconds (96bcefd50, Yousong Zhou) agent: ssh: wait ssh conn state while passing it out (0a3136519, Yousong Zhou) test proxy endpoint connectivity and remote config (50395f7f7, Yousong Zhou) agent: more verbose log for ssh connect failure (20f04d2fc, Yousong Zhou) agent: wait a while on connect error (2cfdb0a08, Yousong Zhou) forwards: show details for fwd returned from create-from-server (92a4bebb2, Yousong Zhou) proxy_endpoints: create-from-server: allow specify name (f8b4d799a, Yousong Zhou) agent: return when ctx is Done (3407b98a8, Yousong Zhou) agent: avoid stallment caused by client timeout (2bda95c62, Yousong Zhou) agent: ssh: cancel on return from Start (ed061d082, Yousong Zhou) add metadata model (8701114f7, Yousong Zhou) agent: fix possible invalid memory access (ba7fe6f54, Yousong Zhou) agent: use yunion.io/x/onecloud/pkg/util/ssh (4b01916e6, Yousong Zhou) forwards: more list filter conditional keys (148481f03, Yousong Zhou) apis: add ForwardDetails definition (6ec27d22b, Yousong Zhou) agent: refresh bindAddr, advertiseAddr when needed (4c2c0c3d2, Yousong Zhou) initial version (5eefa38f8, Yousong Zhou)  Code Refactoring (16)  apis: compute: remove EIP_CHARGE_TYPE_DEFAULT (a48d0ab7f, Yousong Zhou) climc: use shell.NewResourceCmd for notice (59218fa31, rainzm) climc: remove dependence for yunion.io/x/pkg/cloudcommon/db (8e128a986, rainzm) climc: webconsole: use helper methods of response struct (db8307822, Yousong Zhou) host: host_health: do not import guestman (1e4c294fd, Yousong Zhou) host: startvm: for compat (52c3e93af, Yousong Zhou) host: startvm: nic_speed: use raw string (d4093e215, Yousong Zhou) host: startvm: add QEMU_CMD_KVM_ARG (dae06cb50, Yousong Zhou) host: hostdhcp: do not import guestman (50e681064, Yousong Zhou) host: metadata: eliminate ref of guestNic (de2f1ec3b, Yousong Zhou) hostman: metadata: eliminate import of guestman (6dce7d8eb, Yousong Zhou) hostman: use metadata.DescGetterFunc (38b6e011e, Yousong Zhou) notify: add StartSubcontactPullTask for receiver (aabb20058, rainzm) scheduler: remove unused k8s predicates code (dbfd5a8e5, Zexi Li) webconsole: api: add helper methods for response struct (4cd1d4ba7, Yousong Zhou) webconsole: use structured response (c7d099b6f, Yousong Zhou)  Db (8)  add GetItemDetails (2e8239920, Yousong Zhou) interface: manager: add HasName() method (1d25083bf, Yousong Zhou) standalone_anon: empty result for name query (8e2c8feab, Yousong Zhou) add standalone_anon (3d53f8dab, Yousong Zhou) add manager methods appliers (6bf5be5b0, Yousong Zhou) virtualjoint: add FilterById on RowId (6c65eb1ea, Yousong Zhou) modelbase: BatchCreateValidateCreateData: return orig data (89361aee2, Yousong Zhou) check funcs required by dispatcher (805002005, Yousong Zhou)  Db_dispatcher (3)  allow batch create for models without name (b271ab463, Yousong Zhou) delay compute to where needed (a57a63bf5, Yousong Zhou) remove unused GetExtraDetails call (fd98674c9, Yousong Zhou)  Etcd (1)  fix “fatal error: concurrent map writes” (b424a8f67, Yousong Zhou)  Feature (7)  add a standalone dhcp relay service (baabc8290, Qiu Jian) climc: add policy-clone command (c03325975, Qiu Jian) climc: policy save data into file (56d583e90, Qiu Jian) cloudcommon: split opslog table (ab75c8f93, Qiu Jian) compute: allow live migration with checking Host CPU modes (566012589, Qiu Jian) keystone: user add language attribute (5cf5576e0, Qiu Jian) region: support AWS organization (2da59aa89, Qiu Jian)  Features (186)  change go version from 1.12 to 1.13 in go.mod (1ddebfff5, rainzm) add keep_tmpdir options (cfa426bc1, rainzm) add nas sync (0343daa1f, Qu Xuan) support EventNotify (755e00750, rainzm) download the role to tmpdir not system role dir (6d7764550, rainzm) call EventNotify when event occurs (e991bc345, rainzm) ansibleserver: update file_reop version in dockerfile (bf839f9ad, rainzm) ansibleserver: respect keepTmpdir when running ansibleplaybook v1 (7b0f45261, rainzm) ansibleserver: add reference and instance (c95f064d1, rainzm) apigateway: differentiate error messages when logging in (4762afc32, rainzm) apis: region: names for guest forward API (447770dfc, Yousong Zhou) apis: add host forward request/response struct (e7f618228, Yousong Zhou) apis: add const VPC_OVN_ENCAP_COST (e201573d6, Yousong Zhou) appsrv: Application: add Stop method for shutdown behaviour (771824d30, Yousong Zhou) arm64,build: arm 编译时,不编译 rbdcli (31363d8d0, Zhang Dongliang) baremetal: support H3C oem baremetal (b5813e81b, Zexi Li) build: make multi arch manifest docker image (7c6bc61dc, Zexi Li) climc: add cloud-account-preparenets-vmware command (9d048f8f9, rainzm) climc: add k8s component minio and thanos operate subcmd (2c5671545, Zexi Li) climc: servers: add server forward commands (549ae15a4, Yousong Zhou) climc: wires: allow filter by bandwidth (9844d1c29, Yousong Zhou) climc: k8s cluster addon add enable native ip alloc option (347d9ad1c, Zexi Li) climc: print json object support array (47a2f5a9d, Zexi Li) cloudcommon: determine the notification template based on the user’s language preference (2eebef810, rainzm) cloudcommon: add NotifyWithContact (66f373d07, rainzm) cloudcommon: opslog: log joint models (456ed5f74, Yousong Zhou) cloudcommon: db: jointbase: add list:“user” for RowId (64dc5219f, Yousong Zhou) cloudcommon: send message with mobile in NotifyWithTag (bab03027c, rainzm) cloudcommon: send it directly if there is no template corresponding to the topic (87a8bc1a0, rainzm) cloudcommon: allways send webconsole notification via contacts (a8ea8b10c, rainzm) cloudcommon: expand notifyclient (80092443a, rainzm) cloudcommon: set TaskNotifyUrl in GetTaskRequestHeader (e671a218e, rainzm) cloudcommon: add rolecache (7dba32d99, rainzm) cloudid: notify clouduser created (fc0f05286, Qu Xuan) cloudid: add azure saml (075251258, Qu Xuan) cloudid: support aliyun saml auth (3cf6d2f32, Qu Xuan) cloudproxy: add GetDetailsLastseen for forwards (8d7a991d6, rainzm) db: progressive inspection when determining the required scope (167a65cd0, rainzm) devtool: add ScriptApplyId fro ScriptApplyRecord (0078bde42, rainzm) devtool: check sshable before applying ansible playbook for server (a1f508929, rainzm) devtool: makes the process of installing the agent more rigorous (769425f58, rainzm) devtool: add script (abd7771c7, rainzm) docker: inject playbook and telegraf installation packages (c043af3ae, rainzm) esxi: fetch vmware network configuration info (51167aa8c, rainzm) esxi: update guest os info (37c1ba363, rainzm) esxi: change parameters for NewDiskDev and avoid unnecessary deploy (6cb91fdea, rainzm) esxi: support iso when creating vm (dd7524122, rainzm) esxiagent: determine vs by bridge and network when creating vm (639e7b16f, rainzm) fetcherfs: make rpm and deb package (d518257c3, Zexi Li) glance: support backend storage s3 (6e2894df2, wanyaoqi) host: startvm: set vpc nic mtu (319d2cc56, Yousong Zhou) host: kvm: add GetVpcNIC (eb6febcc1, Yousong Zhou) host: add option OvnEncapIpDetectionMethod can-reach:xx (bbc511f6d, Yousong Zhou) host: options: add option SdnSocketPath (7b55e756e, Yousong Zhou) host: guestman: add {Open,Close,List}Forward handler (daf863bd4, Yousong Zhou) host: startvm: add nic_mtu shell func (0139611d1, Yousong Zhou) host: add forwarder.proto (d07bece95, Yousong Zhou) host: go generate forwarder api (e8ec0718c, Yousong Zhou) host: forwarder: add NewClient func (925cc31b4, Yousong Zhou) host: adjust qemu args to support aarch64 (1cd6cf50a, Zexi Li) host: metadata: make vpc aware metadata handler (43215c2ad, Yousong Zhou) host-deployer: add deploy driver libguestfs (948f926bf, wanyaoqi) hostman: options: add sdn_allow_conntrack_invalid (bf9ecdfd1, Yousong Zhou) keystone: add options to set admin and domain admin role to notify (1b96a290d, rainzm) keystone: support alertNotify when abnormal login occur (f41c840d8, rainzm) keystone: support filter ‘project_domain_id’ in role_assignments (399bce619, rainzm) keystone: more specific error return during authentication (46a131233, rainzm) keystone: add GetDefaultAdminSession (c22f22189, rainzm) keystone: support projectDomainId in SAssignmentManager.FetchAll (afbb4a047, rainzm) keystone,apigateway: return a readable message when the user is locked or disabled (9c4fd94d7, rainzm) locale: update (851b36d74, rainzm) mcclient,itsm: modify itsm mcclient rpc func (8881be5a2, zhaoxiangchun) monitor: influxQuery add P95 reduce (1b71ba64b, zhaoxiangchun) monitor: monitor add trigger value when send notify info (ab33ae692, zhaoxiangchun) monitor: add alert slience time and modify scoperesource FetchUniqValues func (54271b78a, –global) monitor: alert policy filter by res_type (3fa8520c5, zhaoxiangchun) monitor: support monitor overview influxdb query pass through (3f51fa67e, zhaoxiangchun) monitor: meter相关报警内容处理 (36ed09cd1, zhaoxiangchun) monitor: Lists the records that are currently alarting (7e9dfe0f9, zhaoxiangchun) monitor: add global alertrecord (c39e6778e, –global) monitor: support create nodata alert from web (805ea5c0f, zhaoxiangchun) monitor: alert add silent period param (be09fc046, zhaoxiangchun) monitor: alert record add silentPeriod info (508c8b926, zhaoxiangchun) monitor: monitor alert policy add mobile notify (df7afc852, zhaoxiangchun) monitor: query reduce percentile (2b22f227a, zhaoxiangchun) monitor: add nodata alert policy (4888f7d81, zhaoxiangchun) monitor: add metric description (33074ba81, zhaoxiangchun) monitor: get today alerting resource info (376d18e5e, zhaoxiangchun) multicloud: add snapshots list for ecloud (e3be35923, rainzm) netutils2: add MyIPTo (1c39030ed, Yousong Zhou) notify: filter receivers who join the project under the domain where the requester is currently located (c1ef5f28f, rainzm) notify: user cmdline helpler for climc notify-receiver-xxx (e8a085a94, rainzm) notify: exempt the administrator to update the receiver verification (66b6a2f62, rainzm) notify: show only users under the domain in the recipient details of the message (b31f69926, rainzm) notify: delete the notification 1 month ago and remove the data migration (094b85773, rainzm) notify: add params for create notification (f9fa70d32, rainzm) notify: add template about topic USER_LOGIN_EXCEPTION (1669947a5, rainzm) notify: add intellij-get for receiver (6ed0b5e9f, rainzm) notify: send notifications of different templates according to language (ebc32e693, rainzm) notify: clean data for receiver_notifications (b292982fc, rainzm) notify: change default verify expire interval 5m =\u003e 2m (d28a12d6e, rainzm) notify: be compatible with mobile in event notify (15c506086, rainzm) notify: 管理后台新建的联系人，手机号和邮箱无需进行校验 (956850ae3, rainzm) notify: add local template (f265be1c5, rainzm) notify: add webconsole in enabled contact types (8aeda8f84, rainzm) notify: support international mobile (bdb6df6e4, rainzm) notify: verification email style optimization (304248ce1, rainzm) notify: remove disk’s event notify for now (1f8ed8724, rainzm) notify: add default area code for mobile (5f9cee49b, rainzm) notify: permit admin sending notification via contact (3ba52355b, rainzm) notify: add subscription in notify (50be5c5f7, rainzm) notify: mandatory update of VERIFY and USER_LOGIN_EXCEPTION templates (cafe1d7b5, rainzm) region: guest: add fetchGuestNICs method (8f5486627, Yousong Zhou) region: bucket list uploads (ef9d2df3c, lvyangyang) region: azure tags (351e2cc38, lvyangyang) region: add instance_snapshot for regionquota (d1ed0ec67, rainzm) region: add options DeleteSnapshotExpiredRelease (17f04c338, rainzm) region: set pendingUsage before creating instance snapshots (4b7313976, rainzm) region: make DeleteSnapshotExpiredRelease applies to postpaid vm (ebb29b21e, rainzm) region: send webhook server_create when canceling pending delete (bf378452a, rainzm) region: distinguish between pending delete and delete notification (81588c92a, rainzm) region: networks: add getMtu method (a0ad62711, Yousong Zhou) region: add server delete options (ffc1dd2cb, Qu Xuan) region: disks and eip delete with server (6081595ad, Qu Xuan) region: add tags implement (66009c332, lvyangyang) region: nat op support (18445ba43, Qu Xuan) region: guest: add {open,close,list}-forward API (1427d1b3a, Yousong Zhou) region: add SCloudregionResourceBase for SInstanceSnapshot (e4cd054b7, rainzm) region: guestdrivers: guest forward open, close, list methods (4dd394580, Yousong Zhou) region: multilingual timer description (377177cfd, rainzm) region: nat op support (9dd3bb218, Qu Xuan) region: filter schedtags from cloudprovider_id (6ec0b38b1, rainzm) region: add wire info in HostNetwork details (16e734687, rainzm) region: virtually display the esxiagent of the cached image as a host (791f94219, rainzm) region: host list order by server count (0cd7fdd8b, Zexi Li) region: stop guest before freeze (3c7f2ff16, wanyaoqi) region: disable synchronization of some special storage (6a9f2a416, rainzm) region: server sku os_arch \u0026 cpu_arch checking (0ac88cfe0, tangbin) region: server list add parameter eip_associable (2d19d961c, TangBin) region: support synchronize vmware’s network configuration to the local (d9e75aaa0, rainzm) region: add test for CloudaccountManger.PerformPrepareNets (292716b26, rainzm) region: support sync skus by cloudregion (04fa96d9c, TangBin) region: larger suggest network and more complete vlanid (fee218c59, rainzm) region: support sync skus by cloudregion (c862f0699, TangBin) region: add host count when list wires (68c621616, rainzm) region: support Ecloud (readonly) (34cbe2d55, rainzm) region: support merging mutli wires to a wire (c4dbd9bb5, rainzm) region: support merging wire (0aa5c2ef1, rainzm) region: sync Esxi HostWire for esxi host (f654636e5, rainzm) region: regiondriver: add methods on eip charge type (555080366, Yousong Zhou) region: allow to update account with provider vmware (12d1aa805, rainzm) region: save image for public cloud (a1a025eec, Qu Xuan) region: azure rds (378b7d39b, lvyangyang) region: add ecloud monitor metric (1883e7259, zhaoxiangchun) region: allow prepare nets for existed cloudaccounts (9a23c9da6, rainzm) region: add wire level for preparing network (a7eadb54e, rainzm) region: add bucket cloud tags support (2edde62fc, lvyangyang) region: add zone disk capability api (22cc784a4, TangBin) region: 多云 bucket website.cors,referer 配置 (8a9ec04f9, lvyangyang) region: huawei recovery new rds (1f91cc0f1, Qu Xuan) region: add instance storage capability (f4df3223b, Qu Xuan) region: add list filter server type (64e844425, wanyaoqi) region: increase the log for debugging when syncing cloudimage (74874d35d, rainzm) region: wire: allow filter by bandwidth (104e5c5c0, Yousong Zhou) region: search server by substr of ip or mac (639d05dd4, Yousong Zhou) region: set qcloud bucket policy (1591f0ab8, lvyangyang) region: set metadata for guest with agent installed (4ea920466, rainzm) region: return forwardDetails when query server sshable (fb1fb906f, rainzm) region: networkaddresses: filter by guest ids (9dfea3835, Yousong Zhou) region: options: allow setting default vpc external access mode (984dc8423, Yousong Zhou) region: cloudregion add disk capability api (71ee5d851, TangBin) region: aws elasticahe (336135b66, lvyangyang) region: optimized public image sync (7bac9144e, Qu Xuan) region: export user tags support virtual resources (2675f75c8, wanyaoqi) region/glance: update cpu arch apis (3f8e46943, wanyaoqi) region/schedtag: schedtag support set multi resources (3edf8c1d0, Zexi Li) scripts: add export DOCKER_BUILDKIT=1 (e52da6ca5, rainzm) scripts: add more reasonable title for cherry pick PR (c5f94e13a, rainzm) scripts: add prompt of hub version (d6d108204, rainzm) suggestion,apigateway: add analysispredict climc (b0293b11f, zhaoxiangchun) suggestion,mcclient: add suggestsysalert-delete climc (eeb77e4c3, zhaoxiangchun) util: support uint64 in bitmap (ed8a88fc5, rainzm) vpcagent: export subnet mac gen funcs (65220a6f5, Yousong Zhou) vpcs: list: add order_by_network_count (3b9412056, Yousong Zhou) webconsole: add huawei vnc support (512929674, TangBin) webhook: send webhook notification when c/d loadbalancerlisterrule (93f98d55a, rainzm)  Guest_deploy_task (1)  log other deploy details with i18n (827c298bc, Yousong Zhou)  Guests (3)  sshable: fix breaking out from wait loop (50f0ca529, Yousong Zhou) sshable: wait and retry for newly created forward (bfe665bbf, Yousong Zhou) sshable: log error should unmarshal fail (b242af75f, Yousong Zhou)  Hostman (2)  ovn: do not set external_ids:iface-id for backup (4e19feccc, Yousong Zhou) metadata: add handler for /local-sub-ipv4s (9f3136541, Yousong Zhou)  Keystone (1)  reword error messages (a012496cb, Yousong Zhou)  Locales (4)  generate (8a922ad81, Yousong Zhou) zh-CN: add some translations (ac1232f94, Yousong Zhou) regenerate locales.go (eb6be534e, Yousong Zhou) zh-CN: regenerate messages.gotext.json (719f91902, Yousong Zhou)  Mcclient (3)  models: Server: add fields for eip and nics (b7f200467, Yousong Zhou) Sshkeypairs: add FetchPrivateKey (fc7fe4cca, Yousong Zhou) auth: add SessionCache (0440f4a30, Yousong Zhou)  Multicloud (12)  qcloud: fix instancenic (d7a11d1ab, Yousong Zhou) qcloud: add ptr deref func (77af00ec7, Yousong Zhou) qcloud: add apiDomainByRegion (cd4d0a27b, Yousong Zhou) qcloud: add getVpcClient (101abde5a, Yousong Zhou) qcloud: add getSdkClient (68b8b7f7c, Yousong Zhou) aliyun: instancenic: handle InvalidOperation.Ipv4CountExceeded (d14a35fa2, Yousong Zhou) aws: subaddress management (8042a7429, Yousong Zhou) aws: instancenic: add interface id attribute (f65650458, Yousong Zhou) aliyun: instancenic: secondary address management (33fdcda95, Yousong Zhou) ICloudNic: add GetId() (ab7ad856b, Yousong Zhou) ICloudNic: fix GetMAC() (1569966aa, Yousong Zhou) aliyun: make getSdkClient proxy aware (ff525a959, Yousong Zhou)  Networkaddresses (6)  handle cloudprovider.ErrAddressCountExceed (18ac0205b, Yousong Zhou) do server sync for on premise servers (374b96553, Yousong Zhou) disallow batch create for external resources (b0f958e8a, Yousong Zhou) cloudprovider support (4c04e48ac, Yousong Zhou) add to nics field of guest desc (e3b55426a, Yousong Zhou) add parent_type guestnetwork (1476f5913, Yousong Zhou)  Networks (4)  server_type: do not allow update (c3fdda2ac, Yousong Zhou) usedAddressQuery: rename with baseq, ownerq, retq (2306fbb6f, Yousong Zhou) split getUsedAddressQuery as method of each manager (4ec791f03, Yousong Zhou) fix typo in log (10042037a, Yousong Zhou)  Optimized (1)  region: qcloud bucket policy set and get operation (addf12f43, Qu Xuan)  Others (34)  avoid log loss when token expired fix #10738 (84820637f, Qu Xuan) fix wire status close #10737 (3e16bf9d0, Qu Xuan) response scope-specific metrics (c2d3355ba, Qiu Jian) fix(monitor):修复监控总览图标钻取后返回数据异常的问题 (36bdc18a8, zhaoxiangchun) (fix) region: qcloud elb https listener create fix (07eea2f70, tangbin) fix(region) qcloud multi zone instance sync account fix (8d153bcf2, tangbin) feat(region) qcloud redis support multi zones (678bcf75c, tangbin) host 编译跨平台兼容 (18d8292f1, Zhang Dongliang) copyright update brand_cn\u0026brand_en fix (43a879ccb, tangbin) infos copyright add brand_en\u0026brand_cn (b5958bb6b, tangbin) redis update tags fix (6ae4883db, tangbin) aws change flavor fix (f4e98cc71, TangBin) server create sku parameter fix (cfaadc29c, TangBin) change os_arch_arm to os_arch_aarch64 (bbaf32a47, tangbin) update vendor (d9229ef16, rainzm) imagetools NormalizeImageInfo update (80a235e3a, TangBin) warp aws err with errors.Wrap (7b7a7a561, TangBin) add cost report module (cc175615f, bistuzx@163.com) server skus filter by mem size fix (9c7d6f54d, tangbin) loadbalancer add lb purge validate (f6a665260, tangbin) add budget set alert log (54d4356d3, bistuzx@163.com) Automated cherry pick of #9752: feature(region): sync cloud tags to local user tags (#9753) (7e60397c1, Jian Qiu) fix reservation columns (66d2820f0, bistuzx@163.com) add cost\u0026prepaid_cost to reservation (fe1e9ff93, bistuzx@163.com) fix budget import format (802f2d9f4, bistuzx@163.com) fix reservation import format (2fbe01505, bistuzx@163.com) add meter budget\u0026event\u0026reservation module (3d82632e9, bistuzx@163.com) .circleci: use centos-build:1.1-4 (f31a2175c, Yousong Zhou) scripts/docker_push.sh: minor polishments (ac713700a, Yousong Zhou) scripts/docker_push.sh: use toplevel Makefile target (e778b99b7, Yousong Zhou) scripts/coverage.sh: detect use of “-mod vendor” (57b4cec5d, Yousong Zhou) update vendor (4895175a5, Qiu Jian) update vendor (e31abb6f0, Qiu Jian) 负载均衡ACL\u0026证书增加项目和共享 (18a185aec, TangBin)  Procutils (4)  WaitZombieLoop: remove unneeded info request (9da0b2e7d, Yousong Zhou) WaitZombieLoop: less verbose iota (6acc3e8cc, Yousong Zhou) WaitZombieLoop: use const str “1” for my pid (970aa949a, Yousong Zhou) add WaitZombieLoop (26183d0de, Yousong Zhou)  Refact (1)  region: resource tags (66b97aa11, lvyangyang)  Region (18)  guests: sshable: more compact make-sshable-cmd (c63e05d92, Yousong Zhou) guests: sshable: add GET /servers//make-sshable-cmd (554e03fde, Yousong Zhou) guests: sshable: add POST /servers//make-sshable (d4451640a, Yousong Zhou) guests: sshable: add field sshable_last_state (db0e28434, Yousong Zhou) guests: sshable: refactor for reusability (4ab5c2c29, Yousong Zhou) guests: sshable: only check sshable state when in running state (042a57281, Yousong Zhou) guests: sshable: return early on sshable=true (188cac1fd, Yousong Zhou) guests: sshable: more friendly fail reason for proxy_forward (59e224518, Yousong Zhou) guests: add GET /servers//sshable (05545a0e4, Yousong Zhou) apis: route: add nexthop type “IP” (97433ccfa, Yousong Zhou) fix setting nic index (1b07ee798, Yousong Zhou) attachnetwork: allow attach by network name (90fd8c868, Yousong Zhou) usages: add [{all,domain}.]networks etc. (b2980ce2b, Yousong Zhou) wires: totalCountQ: filter networks by scope and owner (7a498b88f, Yousong Zhou) usages: fix field name of vpcs for system scope (098f99314, Yousong Zhou) fix error msg for invalid wire_level_for_vmware (a90a26a4e, Yousong Zhou) networks: attach func use struct args (97dbd1899, Yousong Zhou) networkresource: fix signature of GetExtraDetails (744423498, Yousong Zhou)  Regions (1)  lbagents: move pb update/create as mcclient module method (dfc168017, Yousong Zhou)  Schedtags (1)  add ListItemExportKeys (cc00e58f5, Yousong Zhou)  Treewide (1)  wait possible zombies (a8857a34a, Yousong Zhou)  Util (1)  ssh: add ConnectContext method for ClientConfig (e4662b77f, Yousong Zhou)  Validators (1)  set xx_id when possible (9b13becd1, Yousong Zhou)  Vendor (5)  add tencentcloud-sdk-go vpc (00da68cb1, Yousong Zhou) bump alibaba-cloud-sdk-go to v1.61.684 (fe6714b28, Yousong Zhou) add github.com/aliyun/alibaba-cloud-sdk-go/services/ecs (3bbaedaa7, Yousong Zhou) bump yunion.io/x/pkg (02315bdd8, Yousong Zhou) bump yunion.io/x/sqlchemy (d67eeac5d, Yousong Zhou)  Vpcagent (9)  ovn: fix port match condition formation (840273c18, Yousong Zhou) ovn: fix qos for eip upload (eee6e59b8, Yousong Zhou) ovn: add ClaimRoutes (0a929ed33, Yousong Zhou) ovn: resolveRoutes from API models (2ec4a1cec, Yousong Zhou) models: annotate guest with guestnetworks (3c3cd4c59, Yousong Zhou) models: add route tables (f7c4e38e1, Yousong Zhou) ovn: make aware of sub ips (929fa87c5, Yousong Zhou) models: join network addresses (be478c443, Yousong Zhou) apihelper: filter by cloud_env=onpremise (d96d51603, Yousong Zhou)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n42 commits to cloudpods-operator - v3.7.0 since this release.\nApigateway (2)  cors: rename spec field name to corsHosts (b0cbe70, Yousong Zhou) allow setting cors_hosts (5ddbf03, Yousong Zhou)  Bug Fixes (15)  policy description supports i18n (032591f, Qiu Jian) role-policy-create many create extra role-policies (5e9f0dc, Qiu Jian) update vendor (05059bd, Qiu Jian) default policy name should be separated by dash (39a2f9c, Qiu Jian) skip create policies error (9f8c24f, Qiu Jian) fail to init policy (e4eb386, Qiu Jian) update vendor (b487d58, Qiu Jian) make system roles private (58d2937, Qiu Jian) access_url of common service config (55c2d57, Zexi Li) cloudmon: crond commond fmt err (bf42fd5, zhaoxiangchun) glance: comment s3 switch logical (6951110, Zexi Li) monitor: system alert policy cancel description update limit (c527f29, zhaoxiangchun) monitor: raid卡监控规则status过滤参数调整 (8c6d8a4, zhaoxiangchun) operator: modify crontab default interval (c7a5a15, zhaoxiangchun) telegraf: fix collect disk measurements (1aab711, wanyaoqi)  Bugfix (1)  suggestion: fix err when suggestion syncConfigMap (958d441, zhaoxiangchun)  Chore (2)  monitor: add new service: suggestion (40ead5a, zhaoxiangchun) vendor: make mod (99f2910, wanyaoqi)  Defaults (1)  using openvswitch image of tag 2.10.5-1 (1682469, Yousong Zhou)  Feature (1)  keystone: add default member role (f37d918, Qiu Jian)  Features (11)  deploy minio (a84723b, Zexi Li) init devtool script and ansible reference for devtool (730c215, rainzm) build: support multi arch docker image (7099dfe, Zexi Li) cloudmon: add cloudmon alertrecord crontab (a8c841c, zhaoxiangchun) component: remove kube-rbac-proxy (aece1da, rainzm) framework: support multi zone (3915d94, wanyaoqi) glance: add minio support (3a80810, wanyaoqi) host: allow setting ovnEncapIpDetectionMethod (eb09d88, Yousong Zhou) host-deployer: update host-deployer spec (5b718db, wanyaoqi) k8s: enable kubeserver (e104bf9, Zexi Li) operator: add nodata alert policy (0abeaf1, zhaoxiangchun)  Others (6)  update vendor (5b8650f, rainzm) update vendor (b5c3e21, Qiu Jian) Add cloudproxy (842686c, Yousong Zhou) update vendor (db410a7, Qiu Jian) feat:(monitor): update system monitor alert when alert has diff info (9121222, zhaoxiangchun) update vendor (61f46bf, Qiu Jian)  Vendor (2)  bump to current tip of release/3.7 (acfe470, Yousong Zhou) update yunion.io/x/master to current release/3.6 (c6a629e, Yousong Zhou)  Web (1)  add docs image (0edeaff, Zexi Li)   cloudpods-service-operator Repo: https://github.com/yunionio/cloudpods-service-operator\n1 commits to cloudpods-service-operator - v3.7.0 since this release.\nFeatures (1)  build: support arm64 build (1b8385a, Zexi Li)   dashboard Repo: https://github.com/yunionio/dashboard\n847 commits to dashboard - v3.7.0 since this release.\nBug Fixes (242)  vpc create missing doamin params (c370a636d, Qu Xuan) nat misc (a12734226, Qu Xuan) huawei price and nat sku scope params (c190b1f63, Qu Xuan) init cloudshell in apigateway (c1a0c51b9, Qiu Jian) 修复工单回复状态及参数问题 (395851c0d, mj) support prepaid vm change config (f9090d188, Qu Xuan) close socket when close cloud shell (dcd69c06f, Qiu Jian) resolve conflict (e660708cd, Qu Xuan) 修复工单记录数及状态 (9757c0ad8, mj) init xterm for cloudshell, needs more work (fbf3d0be5, Qiu Jian) init xterm for cloudshell, needs more work (c98eca20e, Qiu Jian) aliyun support public ip (259d3020e, Qu Xuan) format gb for nas capacity (37419f484, Qu Xuan) access group details (dd2fbfdcb, Qu Xuan) misc fixed for cloudbox (44385e40b, Qiu Jian) add account filter (f2538bbe3, Qu Xuan) add region filter (1fc642e60, Qu Xuan) eip associate support nat (858c7c612, Qu Xuan) nat params (88799b0d4, Qu Xuan) nat filter and details (aecf72e69, Qu Xuan) support peer secgroup (4d65ce7d4, Qu Xuan) nat price issue (d56dd264a, Qu Xuan) remove public operation (94b78693b, Qu Xuan) trans server status (6e23e7009, Qu Xuan) only aliyun eip support bind nat (274db611f, Qu Xuan) add azure saml auth (2d8766db2, Qu Xuan) add nat domain permission (8876ed8fc, Qu Xuan) secgroup cache policy (5af109c97, Qu Xuan) secgroup scope (70ce641e6, Qu Xuan) capacity (369e8c32c, Qu Xuan) tooltip for peer secgroup (58d1ada61, Qu Xuan) nas misc fix (1ac8dc743, Qu Xuan) nas create fix (71872107c, Qu Xuan) add OWNERS (d192ec0b9, Zexi Li) action policy (0c0ee0518, Qu Xuan) add log (be604dea9, mj) typo for filter key (9c1d09dfa, Qu Xuan) add action log filter (23df001f7, Qu Xuan) #7303 云账号-订阅-区域 全量同步报错 (1f1602c05, mj) nas policy (b26df510d, Qu Xuan) action log (66021f4f5, Qu Xuan) add tooltip for disk create (36e40719a, Qu Xuan) add color reverse (6297455f8, Qu Xuan) lable format (b69616b7d, Qu Xuan) validate secgroup delete (713654aa9, Qu Xuan) no skus when change multi vm config (07066457f, Qu Xuan) #7298 vmware虚拟机主机快照没有显示大小 (0b9f4035d, mj) google disk max size limit (106830e0e, Qu Xuan) add color show for input (c001568de, Qu Xuan) add filter (151183d97, Qu Xuan) private sku filter params (b55f14404, Qu Xuan) nat details (a5f69f718, Qu Xuan) show end time (5e26d14f0, Qu Xuan) 3.7: #6839 change date delay 1 hours (7166d5f0b, mj) 3.7: #3035 域管理员能够看到本域下其他用户提交的工单 (0a9c3d601, mj) 3.7: #6926 规则配置操作日志中类型应该翻译成中文 (9ae79fb7d, mj) 3.7: const to let (c4003d6e4, mj) 3.7: #7241 创建虚拟机时操作系统切换到“vmware平台镜像”中linux后Application-\u003eLocal Storage-\u003eoc_selected_image中imageOS不应该仍是CentOs (1a9965440, mj) 3.7: change currency fetch data (4cb77dbf8, mj) 3.7: #6885 切换二级菜单账单类型不应该发生变化 (c2f50d536, mj) 3.7: fix style (eb03cd3e5, mj) 3.7: fix style (e7e44839c, mj) 3.7: #6803 小屏，英文模式下创建虚拟机页面添加数据盘后按钮没有了 (2df98771c, mj) 3.7: #6839 change date delay 1 hours (2007d5da2, mj) 3.7: filter params (93cc04e07, mj) 3.7: #6839 change date delay 1 hours (c8b832482, mj) 3.7: 币种cookie值初始化问题 (26c453b5d, mj) 3.7: #7249 硬盘列表及自定义设置列中缺少“虚拟机” (b69d42855, mj) 3.7/navbar: 去除运营平台的单独处理逻辑 (c2aee1836, 郝程宇) 3.7/redis create bottombar: 修改费用估算实际金额对应字段 (070618ebc, 郝程宇) Compute: #10789 baremetal install sys with zone and region error (d24079b57, gaomingjiu@yunion.cn) DiskCreate: split error (3b927ff55, gaomingjiu@yunion.cn) Network: update cloudregion params (bc6f0cb2a, gaomingjiu@yunion.cn) Network: #7264 1366*768分辨率（14寸）创建VPC页面样式显示不全 (94e9ed9cc, gaomingjiu@yunion.cn) OsSelect: #7261 创建vmware虚拟机时，vmware平台镜像vm-test应该归属于RHEL，不应该归属于linux (88d57f681, gaomingjiu@yunion.cn) OsSelect: #7274 从ISO启动的windows系统vmware虚拟机重装系统选择windows系统时无法选中，前端报错 (b828a64a2, gaomingjiu@yunion.cn) ServerPassword: 使用主机快照创建主机，不应该显示设置密码的输入框 (bbc53d663, gaomingjiu@yunion.cn) Tag: identity tag params (a02fb18d3, gaomingjiu@yunion.cn) Tag: identity tag details api version (d90a27e65, gaomingjiu@yunion.cn) Xterm: refresh page method error (cdc0c0998, gaomingjiu@yunion.cn) automation: adjust menu order (93a44f481, Qiu Jian) cloudenv: remove the ‘number’ prefix before date (e021ee25e, Qiu Jian) cloudenv: translation 20210114 (c84018bc2, Qiu Jian) cloudenv: menu adjustment (159447bd8, Qiu Jian) cloudenv: store dispatch should await (3c2c564bc, Qiu Jian) cloudenv: english translation 20210206 (30efedfcc, Qiu Jian) cloudenv: minor fixes (641c3ca06, Qiu Jian) cloudenv: hide group actions in external projects (039de5a6c, Qiu Jian) cloudenv: english translation 20210131 (e15d91673, Qiu Jian) cloudenv: remove create account tip if an account is created (9a7d59785, Qiu Jian) cloudenv: update scope params (4113d97de, gaomingjiu@yunion.cn) cloudenv: english translation 20210207 (88c7d3998, Qiu Jian) cloudenv: english translation 20210125 (e4ff2ad06, Qiu Jian) cloudenv: english translation 20210205 (952971024, Qiu Jian) cloudenv: english transtion 20210109 (9cd38a321, Qiu Jian) cloudenv: english translation 20210220 (d68c9c431, Qiu Jian) cloudenv: from menus of policy to system (39f2cb1a0, Qiu Jian) cloudevent: add filter for cloudevent (366eac69d, Qu Xuan) common: allow use domain-specific hostname (28e97a269, Qiu Jian) common: english translation 20210116 (e5b0bbe64, Qiu Jian) common: translation 20210116 (9ef11828b, Qiu Jian) common: add suggestion type of EXPIRE_SERVER_SKU (b0f72a515, Qiu Jian) common: english translation 20210220 (c771ca596, Qiu Jian) common: fix misc bugs reported (7355fd904, Qiu Jian) common: prevent searchBox multiple search keys (0401b18d0, Qiu Jian) common: change menu cloudevents to cloudlogs (1c923de72, Qiu Jian) common: fetch region with domain params on login page (51b3ccb33, Qiu Jian) common: remove irrelivent translation (564114ed6, Qiu Jian) common: save login domain in cookie (f6375f037, Qiu Jian) common: do not record login record when login through SSO (9974b1bdd, Qiu Jian) common: english translation (1961f7be9, Qiu Jian) common: compatible with yunionapi without sending api_server (892459161, Qiu Jian) common: remind on topAlert using wrong hostname (d2653ae90, Qiu Jian) common: fetch api_server from auth/regions (9973406f8, Qiu Jian) common: cancel domain should reload login page (d3ca7ae9a, Qiu Jian) common: search box keep text in search bar (7da7eef77, Qiu Jian) common: support cloud provider link in sidepage (029ec7049, Qiu Jian) common: hide external links when its empty (1415fd379, Qiu Jian) common: english translation 20210209 (ad77ca8a7, Qiu Jian) common: add hotline tooltips beside ticket title (30541b94f, Qiu Jian) common: add navbar switch to turn off license fetch (9deaed6b9, Qiu Jian) common: update metrics to disks.mounted (e91712779, Qiu Jian) common: allow set copy message in name column (c112a7f27, Qiu Jian) common: add user-info to common (69e864947, Qiu Jian) common: english translation (6a62bade0, Qiu Jian) common: clean menu policy after login and logout (b966dab3c, Qiu Jian) common: english translation 20210127 (b58431c47, Qiu Jian) common: fix login page interactive issues (e8c452b35, Qiu Jian) common: english translation 20210131 (02125217b, Qiu Jian) common: english translation 20210125 (8129705d7, Qiu Jian) common: english translations, login page lauyout (e28b3553a, Qiu Jian) common: english translation 20210307 (0d8654b0d, Qiu Jian) common: englis translation 20210203 (8fb7a2714, Qiu Jian) common: show external links with type external-service only (264e6d5cb, Qiu Jian) common: global search support server template and snapshotpolicy (86135f797, Qiu Jian) common: english translation 20210312 (3040fef05, Qiu Jian) common: remove city from area-selects (16b85f2b1, Qiu Jian) common: add cloud_env constants (f03ec1093, Qiu Jian) common: domain login UI recode (51f0d4286, Qiu Jian) common: adjust english translation 20200103 (8f30c20f4, Qiu Jian) common: replace @:dictionary.identity_provider with Identity Provider (20f94069e, Qiu Jian) common: english translation 20210205 (7a0160e2b, Qiu Jian) common: missing scope for newly added metrics (d2ee5a71e, Qiu Jian) common: allow set login domain manually (b0f66e370, Qiu Jian) compute: disk disabled when no cloud account ready (d29bcf6f1, Qiu Jian) compute: hide group actions for several list (b88413ce9, Qiu Jian) compute: add prompt for saveing image on public cloud (0ac2dabae, Qiu Jian) compute: replace webConsolePath env var with api_server/web-console/ (bb3340e4c, Qiu Jian) compute: adjust menu order (4289da461, Qiu Jian) compute: menu adjustment 20210319 (f22c2acc7, Qiu Jian) compute: english translation 20210206 (0f270525d, Qiu Jian) compute: remove city from area-selects (ca63f06da, Qiu Jian) compute: 修复功能选择vmware，没有显示主机快照菜单 (b8dfb376c, gaomingjiu@yunion.cn) compute: change network security menu text (c6fe7bbee, Qiu Jian) compute: english translation 20210220 (9597302fd, Qiu Jian) compute: add network default params limit (a303ceb19, gaomingjiu@yunion.cn) compute: english translation 20210205 (1aadec6f8, Qiu Jian) compute: filter out disabled server skus (1e669af1a, Qiu Jian) compute: translation fix 20200109 (8dee0d628, Qiu Jian) compute: enable iso for vmware (7ae0a034c, Qiu Jian) compute: server create missing storage id (4c4298446, Qiu Jian) compute: english translation (4368bf37c, Qiu Jian) compute: english translation 20210131 (3025c5af4, Qiu Jian) compute: show schedtag in domain and project views (4ebeeeda0, Qiu Jian) compute: allow create images for public cloud (29e1ff077, Qiu Jian) compute: 网络切换到自动调度后弹性公网IP使用默认，不支持新建 (a29dd5282, gaomingjiu@yunion.cn) compute: no use network fill error (f85ab8992, gaomingjiu@yunion.cn) compute: translation 20210114 (5a50f76fc, Qiu Jian) compute: transfer i18n (01c3e9e88, songdengju) compute: os select backfill (b3e1cb1cb, gaomingjiu@yunion.cn) compute: check ownership when import secgroup rules (fa49f8e6c, Qiu Jian) compute/createServer: eslint error (b0c66f245, gaomingjiu@yunion.cn) dashboard: add more nics metrics (34c08cf3f, Qiu Jian) dashboard: minor quote error (e31960448, Qiu Jian) dashboard: record dashboard widget (3f1c8156d, Qiu Jian) dashboard: english translation 20210129 (9121918b8, Qiu Jian) dashboard: filter usage keys by scope on dashboard numbercard (5e34eb301, Qiu Jian) dashboard: translation 20210117 (6e64746ef, Qiu Jian) dashboard: price \u0026 aliyun elb create fix (087f53165, tangbin) dashboard: use eip.floating_ip as metrics for EIP (8e3aa2eb9, Qiu Jian) dashboard: ring add reverse color attributes in default dashboards (35ae744ea, Qiu Jian) dashboard: env,brand,region remove default value (e297d10d5, gaomingjiu@yunion.cn) dashboard: no k8s usage keys in numbercard (a453310d4, Qiu Jian) dashboard: import ring widget (b1992ca58, Qiu Jian) dashboard: ring data not init (4b7ae7b11, Qiu Jian) dashboard: missing metrics on dashboard numbercard (9ac4ae794, Qiu Jian) dashboard: optimize english translation 20210104 (4f9522af5, Qiu Jian) dashboard: dashboard usage filter by cloudenv (15810f25a, Qiu Jian) dashboard: cost optimization widget updates (f3073eb29, Qiu Jian) dashboard: allow modify default dashboard (3fae929bf, Qiu Jian) dashboard: show container in numbercard only if k8s enabled (96ca58221, Qiu Jian) dashboard: english translation 20210104 (7a8549cb7, Qiu Jian) db: english translation (96547d72d, Qiu Jian) db: no cloud account issues, but seems not working (d8f15d3c6, Qiu Jian) db: adjust menu order (d0d514fc2, Qiu Jian) db: translation 20210117 (530e0ad57, Qiu Jian) db: remove city from area-selects (3ac728422, Qiu Jian) docs: wrong url prefix (aa15c4558, Zexi Li) helm: english translation 20210125 (75e049fcb, Qiu Jian) helm: not including monitor menu (5e50dfddc, Qiu Jian) helm: hide menus temporarily (cdb86640e, Qiu Jian) helm: english translation 20210131 (94eeeb030, Qiu Jian) host: 宿主机详情的type签应该不变 (114b733c4, gaomingjiu@yunion.cn) i18n: alert firing (d74d269eb, Zexi Li) k8s: adjust menu order (fd96c44db, Qiu Jian) k8s: english translation 20210127 (6cadf3372, Qiu Jian) k8s: english translation 20210203 (e243fd7b1, Qiu Jian) monitor: no translation if lang is pt (5797a143a, Qiu Jian) monitor: english translation 20210182 (1e7e22509, Qiu Jian) monitor: translation minor 20210116 (b663ea46f, Qiu Jian) monitor: minor issues that raise browser warnings (d6d5505c1, Qiu Jian) monitor: alert translation (f04413949, Qiu Jian) monitor: normal =\u003e Normal (7e66ea9b7, Qiu Jian) monitor: adjust menu order (77b27d92e, Qiu Jian) multicloud: adjust menu order (c887f7221, Qiu Jian) network: remove city from area-selects (845807484, Qiu Jian) network: adjust menu order (7bb396a78, Qiu Jian) network: translation 20210114 (29bccbc26, Qiu Jian) network: add cloudenv check logic, but not work (10c4028d7, Qiu Jian) network: english translation 20210220 (8b2a13622, Qiu Jian) network: hide group actions in lbacls (bb9ed9b80, Qiu Jian) network: english translation 20210131 (83d10774b, Qiu Jian) network: domain name validation should be updated to include new domains (5d63e7bf9, Qiu Jian) network: english translation 20210205 (d2d2bf3cf, Qiu Jian) network: menu adjustment 20210319 (852c3f99e, Qiu Jian) network: simplify lb create title (efacb75a6, Qiu Jian) storage: remove city from area-selects (df62330da, Qiu Jian) storage: english translation 20210131 (a75567e53, Qiu Jian) storage: translation 20210117 (7d46f12bd, Qiu Jian) storage: adjust menu order (df861f1cd, Qiu Jian) storage: english translation 20210127 (8753b60b2, Qiu Jian) tagselect: tag select search style (4b6f1ac68, mj) trans: batch action (e4baebff7, Zexi Li) trans: batch action (9edc85e40, Zexi Li) translate: en (bc2edff5f, Zexi Li) translate: en (2293fef93, Zexi Li) translate: en (53a222aaf, Zexi Li) translate: en (df20b98df, Zexi Li) vminstance: 去掉调度策略选择云账号的逻辑处理 (c6ef90624, mj) workflow: 工单走到系统管理员，待我审批中当前环节错误 (bef545e2b, gaomingjiu@yunion.cn) workflow: 通过主机工单创建虚拟机失败，工单详情中缺少查看失败原因的链接 (dfe12f910, gaomingjiu@yunion.cn) workflow: domain name validation should be updated to include new domains (2322ad714, Qiu Jian)  Bugfix (7)  compute: close vminstance filter(vmem_size \u0026 disk) (5879bb8bb, GuoLiBin6) compute: fix osselect imageselect (04df87cef, GuoLiBin6) compute: restore arch column (d1be4c868, GuoLiBin6) dashboard: adjust echart (a33dd2d6b, GuoLiBin6) k8s: show detail list (1ce148d21, GuoLiBin6) navbar: change notifyPopover visiable (0dbdc9412, GuoLiBin6) vminstance: modify Cumpute vminstance label (da033b05d, dongliping)  Feat (3)  3.7: #3042 巴西反馈优化，value搜索没有值就直接消失了，应该为空 (01e89e706, mj) 3.7: #2812 控制面板 save and cancel 的按钮样式放大一些，意外退出提示保存 (45b11a95a, mj) 3.7: #2811 创建机器时 订阅选择 显示相应的云账号 (427a32eee, mj)  Feature (24)  bill: add budget tags (bc02a92e0, GuoLiBin6) billing: support billing analysis scope (071e6b4cd, Qiu Jian) cloudenv: config router (ccbeb77a7, GuoLiBin6) cloudenv: ui policies support hide sys menus (2e3efd05e, Qiu Jian) clouduser: add Cloud Account in SamluserList (3885c2512, root) common: ui policies support hide menus (e065d28fb, Qiu Jian) common: add FetchLabel components (dd2db9ca6, Qiu Jian) compute: fix compute datadisk type (035639824, GuoLiBin6) compute: ui policies support hide sys menus (74e7d8c61, Qiu Jian) compute: use list select to select block storage (44c70e9d0, Qiu Jian) compute: add #vm sort (38ea211fd, GuoLiBin6) cumpute: add cumpute vminstance filter (4f920b549, 郭丽斌) dashboard: add dashboard metric url (fa0f5aba9, GuoLiBin6) dashboard: add quota sort (f1e429892, GuoLiBin6) db: ui policies support hide sys menus (ffd59c4fe, Qiu Jian) helm: ui policies hide system menus (1f995678a, Qiu Jian) host: add host vm sortable (0c0910850, GuoLiBin6) k8s: ui policies hide system menus (ed619260c, Qiu Jian) monitor: ui policies hide sys menus (d19e17ccc, Qiu Jian) network: ui policies hide system menus (6479b571b, Qiu Jian) scope: fix feishu verify (4bbbd1910, GuoLiBin6) scope: config menu list (ed0005069, GuoLiBin6) storage: ui policies hide system menus (8589fb939, Qiu Jian) system: add project instance snapshots (203a20830, GuoLiBin6)  Features (75)  add server compara price (8e52bd5fd, mj) add workflow support (9420de6b1, mj) 技术支持工单分离 (a5db601bf, mj) change link (00b4e20ff, mj) add i18n (296e0f2ec, mj) add browse (cfbd4f857, mj) add broswe i18n (094c6a5ce, mj) add github PR template (3bb23dfbe, Zexi Li) update login challenge style (b7a8c5bb2, mj) update i18n (9f13b117b, mj) update browse (7ac10bd42, mj) add check process (5aa7f61e8, mj) 调整技术支持工单 (d783be3ae, mj) update i18n (abca31078, mj) 发起人和技术支持的头像颜色区分 (1c8d5d409, mj) add i18n (f35a74aef, mj) add comment (1cad64cab, mj) 增加回复信息展示隐藏处理 (e6f1ac513, mj) update tag filter add params (d4a2cf769, mj) update state and check reply (3f19976a1, mj) 迁移第三方工单到技术支持 (9b5178764, mj) 我发起的列表暂时不用多选框先隐藏掉 (587b388a3, mj) add nas (dd1d81605, Qu Xuan) add nas (b0e31dfd6, Qu Xuan) update cloudprovider (657a774fc, mj) update 新建云主机时，选择平台后即可指定云订阅 (a094f2678, mj) update price comparator (6d4f84b8b, mj) update price comparator (ae18a4c69, mj) 控制第三方是否展示 (fb20242df, mj) update price comparator (e331165a5, mj) add nat operation (b37c3e4c1, Qu Xuan) 3.7: add logout socket handle (cb9b9ec9d, mj) 3.7: add logout socket handle (b3cb81880, mj) 3.7: #2991 新建云主机时，选择平台后即可指定云订阅 (89847d021, mingjiu) 3.7: 增加401无token跳转登录页面 (247cfcaf5, mj) 3.7: add cloudshell (fb36a6a1a, mj) 3.7: add cloudshell (2e1904fde, mj) 3.7: update cloudshell (e3ceb44f1, mj) 3.7: change currency i18n (e076c3206, mj) 3.7: hide cloudshell (c24673266, mj) 3.7: add ecloud (d9b55153e, mj) 3.7: update ecloud icon (15279ec78, mj) 3.7: #2735 工单系统，需要增加“优先级”字段 (2b9dd81b9, mj) 3.7: change fee menu icon (f5628bda5, mj) 3.7: #2823 Azure除全球区外，其他区该按钮需禁用且提示：Azure xxx区不支持免密认证 (5aca5a880, mj) 3.7: #2823 目前只有全球区支持，所以账号类型为全球区时才有开启开启免密登录的开关 (093865b82, mj) 3.7: #2991 新建云主机时，选择平台后即可指定云订阅 (4bfa9bd31, mj) 3.7: #2823 目前只有全球区支持，所以账号类型为全球区时才有开启开启免密登录的开关 (7e440f7eb, mj) 3.7: update cloudshell content (ac6f562d4, mj) 3.7: 调整设置语言失败后默认语言回退到英文 (e15a9a41c, mj) 3.7: add currency (d9ae53c82, mj) 3.7: add currencys (d1230d3a1, mj) 3.7: add currency cookie (4a66e6b83, mj) 3.7: #2753 工单优先级增加到4级 (315a7138d, mj) 3.7: #2723 功能选择控制IP子网新建 (ebce57efe, mj) 3.7: change menu icon (ef54538e0, mj) 3.7: #2823 用户点击Azure 「免密登录」按钮时进行弹窗提示且复制 (9450d65ef, mj) 3.7: #2820 打开云账号之后，就可以看这个账号的资源的OverView (e5f5128ab, mj) Compute: server list action add permission (1c730b2c0, gaomingjiu@yunion.cn) OcTerm: 优化CloudShell拖拽卡顿问题 (fb53109cd, gaomingjiu@yunion.cn) OcTerm: update octerm style (007070e68, gaomingjiu@yunion.cn) OcTerm: update octerm (d85e4d6ca, gaomingjiu@yunion.cn) Tag: add permission support (cbb52de06, gaomingjiu@yunion.cn) Tag: add identity tag (7bcab12a9, gaomingjiu@yunion.cn) TagDetailColumn: add permission support (66be37c95, gaomingjiu@yunion.cn) TagSelect: #3087 标签的复杂搜索，支持contains, startswith, endswith, not (e5305eef7, gaomingjiu@yunion.cn) TagSelect: support min-width (00677525a, gaomingjiu@yunion.cn) bill: add suggestion i18n (24d2e1083, gaomingjiu@yunion.cn) cloudenv,monitor: update receivers params for domain mode (689e9d376, gaomingjiu@yunion.cn) cloudenv,monitor: update receivers params for domain mode (0ea370388, gaomingjiu@yunion.cn) common: support show predict cost with dashed lines (adfc95916, Qiu Jian) compute, network: add action permission (51bdb0e2d, gaomingjiu@yunion.cn) docs: docs url by scope (bd3ccd8d8, Zexi Li) docs: docs url by scope (34ea69401, Zexi Li) suggestion: update i18n (863736940, gaomingjiu@yunion.cn)  Fix (13)  3.7: #7257 创建云联壹云平台虚拟机，高级配置-\u003e调度策略中不应该有“指定云订阅” (f8cf9e717, mj) 3.7: #7065 规则配置与建议列表 建议降配的虚拟机的规则字段 没有翻译对 (8f133a1e1, mj) 3.7: #7021 云账号详情资源统计中“对象存储容量”单位错误 (9c5939bd2, mj) 3.7: #7017 控制面板、监控大屏 本月支出可下降空间百分比显示错误 (098777307, mj) 3.7: #6975 云账号鼠标悬停信息去掉 (52ce93206, mj) 3.7: dashboard top5 (c9e0bc49e, mj) 3.7: #6943 控制面板：费用优化切换币种后数据不准确 (39f0608e3, mj) 3.7: #6914 backport 到最早版本 云账号-更新账单文件信息回显有误 (81d7834bc, mj) 3.7: #6886 新建弹性伸缩组时修改最大实例数时期望和最小实例数不应该联动修改 (9d4f34782, mj) 3.7: #6865 控制面板优化建议相关的磁贴的设置条件中币种的值按照实际有的账单类型取 (167904c5e, mj) 3.7: #6765 虚拟机有3个IP，页面只暂时2个，优化MAC信息展示 (64fadabf8, mj) 3.7: #6765 虚拟机有3个IP，页面只暂时2个，优化MAC信息展示 (5bcecd57a, mj) 3.7: #6825 虚拟机调整配置-费用估算价格没有正常查到 (3a834b776, mj)  I18n (134)  en: fix json (bf8e0d8b4, Yousong Zhou) zh-CN rewording (c7c9d2d18, Yousong Zhou) views/zone/components/List.vue (545e3ddd2, Yousong Zhou) views/tag/mixins/columns.js (a69484e40, Yousong Zhou) views/strategydefinition/create/index.vue (279693d0c, Yousong Zhou) views/strategydefinition/create/components/FormItem.js (2b64456e2, Yousong Zhou) views/strategydefinition/config/index.js (5d5f9ea95, Yousong Zhou) views/strategyallocation/mixins/columns.js (53a044e4f, Yousong Zhou) views/scheduledtask/mixins/singleActions.js (78b86b79d, Yousong Zhou) views/scheduledtask/index.vue (c8c2d326b, Yousong Zhou) views/scheduledtask/dialogs/ScheduledtaskDisabled.vue (180f8c8eb, Yousong Zhou) views/scheduledtask/create/index.vue (c50a42c49, Yousong Zhou) views/scheduledtask/components/List.vue (88921a317, Yousong Zhou) views/schedtag/mixins/singleActions.js (0012cc53a, Yousong Zhou) views/schedtag/components/List.vue (b99bfed83, Yousong Zhou) views/samluser/dialogs/Create.vue (e22ad385c, Yousong Zhou) views/proxysetting/mixins/singleActions.js (db4b18a4d, Yousong Zhou) views/proxysetting/dialogs/Create.vue (360e975ba, Yousong Zhou) views/proxysetting/components/List.vue (ca61a9219, Yousong Zhou) views/proxysetting/components/CommonFormItems.vue (6232d46ff, Yousong Zhou) views/policydefinition/index.vue (d351d0518, Yousong Zhou) views/externalproject/components/List.vue (bf64ebd7e, Yousong Zhou) views/dynamicschedtag/sidepage/Detail.vue (539f9b91a, Yousong Zhou) views/dynamicschedtag/mixins/singleActions.js (be5a29dd8, Yousong Zhou) views/clouduser/dialogs/Create.vue (8bb14f0a4, Yousong Zhou) views/cloudproviderregion/mixins/columns.js (78037414f, Yousong Zhou) views/cloudproviderregion/dialogs/SetAutoSync.vue (61dde6154, Yousong Zhou) views/cloudprovider/mixins/singleActions.js (a25605538, Yousong Zhou) views/cloudprovider/mixins/columns.js (7f866969f, Yousong Zhou) views/cloudprovider/dialogs/Create.vue (e2a8d80ba, Yousong Zhou) views/cloudprovider/components/List.vue (bd9a5da37, Yousong Zhou) views/cloudgroup/sidepage/Detail.vue (cfc9c95eb, Yousong Zhou) views/cloudgroup/index.vue (58ed94feb, Yousong Zhou) views/cloudgroup/dialogs/AddUser.vue (395e05374, Yousong Zhou) views/cloudevent/components/List.vue (d47be244e, Yousong Zhou) views/cloudaccount/sidepage/index.vue (63dabd696, Yousong Zhou) views/cloudaccount/sidepage/Detail.vue (5e5171458, Yousong Zhou) views/cloudaccount/mixins/singleActions.js (b32ea144d, Yousong Zhou) views/cloudaccount/mixins/columns.js (c85c6a94a, Yousong Zhou) views/cloudaccount/dialogs/SetShare.vue (6e162fc11, Yousong Zhou) views/cloudaccount/dialogs/SetDiscount.vue (9996e71bd, Yousong Zhou) views/cloudaccount/create/form/components/OpenstackZstack.vue (790ad19e8, Yousong Zhou) views/cloudaccount/create/form/components/IpSubnets.vue (78f5db6a9, Yousong Zhou) views/cloudaccount/create/form/components/ContentInfo.vue (dcb3a60bb, Yousong Zhou) views/cloudaccount/create/form/components/AliyunUcloud.vue (3f88a9089, Yousong Zhou) views/cloudaccount/create/form/VmNetwork.vue (38c612f4f, Yousong Zhou) views/cloudaccount/create/form/SelectCloudaccount.vue (515d9dc2a, Yousong Zhou) views/cloudaccount/create/form/BillForm.vue (f9fb775c9, Yousong Zhou) views/cloudaccount/create/components/PrepareNetsForm.vue (e9f89180e, Yousong Zhou) views/cloudaccount/create/components/PrepareNets.vue (d3aa5938f, Yousong Zhou) views/cloudaccount/constants.js (6b7de8023, Yousong Zhou) views/cloudaccount/components/UploadJsonFile.vue (89d456052, Yousong Zhou) views/cloudaccount/components/ProxySetting.vue (a855621b6, Yousong Zhou) views/cloudaccount/components/List.vue (a1d533cf9, Yousong Zhou) views/cloudaccount/components/DomainProject.vue (fa379be25, Yousong Zhou) views/cloudaccount/components/AutoSync.vue (aa633ed18, Yousong Zhou) sections/UsageSidepage/constants.js (6cf38b5ea, Yousong Zhou) router/index.js (d2c2d00ba, Yousong Zhou) constants/sched.js (cb48167c8, Yousong Zhou) zh-CN also (705a4870c, Yousong Zhou) views/wire/dialogs/Update.vue (27bb84673, Yousong Zhou) views/wire/components/List.vue (ada53c61b, Yousong Zhou) views/vpc/sidepage/Detail.vue (339d24808, Yousong Zhou) views/vpc/create/index.vue (642fb90cb, Yousong Zhou) views/network/sidepage/IPList.vue (0f8a174cf, Yousong Zhou) views/network/sidepage/FlexIp.vue (a04f5ef9e, Yousong Zhou) views/network/dialogs/ReversedIP.vue (ab53554bb, Yousong Zhou) views/network/dialogs/NetworkSplitDialog.vue (3191e916f, Yousong Zhou) views/network/components/List.vue (0305b162b, Yousong Zhou) views/network/EditAttributes.vue (fc19c2ea8, Yousong Zhou) views/network/Create.vue (d56120488, Yousong Zhou) views/agent/dialogs/Deploy.vue (6afc3efc8, Yousong Zhou) views/nats/sidepage/Dnat.vue (17008086f, Yousong Zhou) views/loadbalancerlistenerrule/sidepage/Detail.vue (891f33001, Yousong Zhou) views/loadbalancerlistener/sidepage/Detail.vue (3f1dc8668, Yousong Zhou) views/loadbalancerlistener/components/RedirectFormItems.vue (d8b5b4f75, Yousong Zhou) views/loadbalancerbackend/dialogs/Create.vue (a464e588b, Yousong Zhou) views/lbcerts/sidepage/Cache.vue (c835c8522, Yousong Zhou) views/lbacls/sidepage/Cache.vue (7523da3bb, Yousong Zhou) views/lb/dialogs/Create.vue (de2c45fea, Yousong Zhou) views/lb/components/List.vue (a8069e2a2, Yousong Zhou) views/flex-network/sidepage/Detail.vue (88d1a8860, Yousong Zhou) views/flex-network/components/List.vue (4539f3009, Yousong Zhou) views/eip/sidepage/Detail.vue (649c6c0b3, Yousong Zhou) views/eip/dialogs/BindServerDialog.vue (5e9d181c3, Yousong Zhou) views/eip/create/index.vue (a9c5bb82e, Yousong Zhou) views/eip/components/List.vue (3c8e2f9b6, Yousong Zhou) views/dns/sidepage/Detail.vue (6ddd493ad, Yousong Zhou) views/dns/dialogs/Create.vue (659fd17d7, Yousong Zhou) views/dns/components/List.vue (9b3ba1c72, Yousong Zhou) views/dns-zone/create/components/Step1.vue (ebda5ae1d, Yousong Zhou) views/agent/sidepage/Detail.vue (099ce836f, Yousong Zhou) views/agent/sidepage/Asbook.vue (0b42a8220, Yousong Zhou) views/agent/form/index.vue (4935dc47e, Yousong Zhou) views/agent/dialogs/Deploy.vue (fac248137, Yousong Zhou) views/agent/dialogs/Asbook.vue (1d8966b18, Yousong Zhou) views/wire/mixins/columns.js (619b73964, Yousong Zhou) views/vpc/mixins/singleActions.js (c36363ebe, Yousong Zhou) views/vpc/mixins/columns.js (f58970b76, Yousong Zhou) views/route-table/mixins/columns.js (bf9cf4cda, Yousong Zhou) views/reserved-ip/mixins/columns.js (f90f96bb1, Yousong Zhou) views/network/mixins/singleActions.js (8ec4019a7, Yousong Zhou) views/network/mixins/columns.js (8e280b75a, Yousong Zhou) views/nats/mixins/columns.js (0b5adb804, Yousong Zhou) views/loadbalancerlistenerrule/mixins/singleActions.js (94349661f, Yousong Zhou) views/loadbalancerlistener/sidepage/dashboard/utils.js (5497e74d5, Yousong Zhou) views/loadbalancerlistener/sidepage/dashboard/constants.js (61f6313be, Yousong Zhou) views/loadbalancerlistener/mixins/singleActions.js (fccd8071d, Yousong Zhou) views/loadbalancerlistener/mixins/columns.js (fbc093848, Yousong Zhou) views/loadbalancerlistener/create/form/utils.js (6f4a7099f, Yousong Zhou) views/loadbalancercluster/mixins/singleActions.js (ae187ff5b, Yousong Zhou) views/loadbalancerbackendgroup/mixins/singleActions.js (ae3e3dcf4, Yousong Zhou) views/loadbalancerbackend/mixins/singleActions.js (48724bc9f, Yousong Zhou) views/lbcerts/mixins/columns.js (86e8725d4, Yousong Zhou) views/lbacls/mixins/columns.js (ef146808f, Yousong Zhou) views/lb/utils.js (43ecf0731, Yousong Zhou) views/lb/mixins/singleActions.js (66a30ddf6, Yousong Zhou) views/lb/create/form/mixin.js (567519de8, Yousong Zhou) views/lb/constants/index.js (d7b218e2f, Yousong Zhou) views/global-vpc/mixins/columns.js (3f1be141d, Yousong Zhou) views/flex-network/mixins/columns.js (81e889bd0, Yousong Zhou) views/eip/utils/columns.js (cff48f403, Yousong Zhou) views/eip/mixins/singleActions.js (4e420af02, Yousong Zhou) views/dns/mixins/columns.js (24b920ef0, Yousong Zhou) views/dns-zonecache/mixins/columns.js (66aa4fd62, Yousong Zhou) views/dns-zone/utils/columns.js (98a708cf2, Yousong Zhou) views/dns-zone/mixins/singleActions.js (4b94b4631, Yousong Zhou) views/dns-zone/constants/index.js (2d2c79588, Yousong Zhou) views/dns-recordset/utils/columns.js (584d54ff0, Yousong Zhou) views/agent/mixins/singleActions.js (37184c9cc, Yousong Zhou) views/agent/mixins/columns.js (1868e338c, Yousong Zhou) constants/lb.js (acf90f81b, Yousong Zhou) constants/index.js (a981f4e65, Yousong Zhou) s/Overview/Big Screen/ (beded6f39, Yousong Zhou)  NavBar (1)  make monitoring dashboard visible in domain mode (1c217134b, Yousong Zhou)  Navbar (1)  fix importing isDomainMode getters (86d4400e9, Yousong Zhou)  Optimized (2)  nat entry (6395379ce, Qu Xuan) nat rate (f4d3d6f44, Qu Xuan)  Others (338)  network route hidden fix (253306506, TangBin) monitor line chart add data smooth (6b70d80b5, TangBin) scopedpolicybindings update (a95d8701d, TangBin) scopedpolicybindings update (97235b311, TangBin) monitor line chart add scale (4865cc116, TangBin) monitor line chart add scale (cd6ad59d5, TangBin) monitor dashboard chart scope fix (001c49d52, TangBin) rejust monitor ssh agent menus order (467b8839e, TangBin) add agent trans (779a30dc5, TangBin) line chart title fix (eb0b3e0f8, TangBin) sys disk default size fix (646d326ef, TangBin) image select image arch fix (213b81430, TangBin) image select image arch fix (1e8a2dbb1, TangBin) image select image arch ifx (654f86bd1, TangBin) add tooltips for ssh proxy endpoint create form (49ce4fb99, TangBin) add price info scope (58b2bdb16, bistuzx) fix disk price (ec6986e8b, bistuzx) domain project select fix (e524abdae, tangbin) hidden common alert tips while scope is projct (98cedc64d, TangBin) public cloud image filter add os_arch (e34a741f5, TangBin) instance price comparator fix (d51686196, TangBin) 修改成本优化英文 (255be457c, GuoLiBin6) 修改图标 (6a0760d7b, GuoLiBin6) global search hidden menus fix (e87628302, TangBin) setup altert for monitor charts fix (827460486, TangBin) install agent form i18n fix (402a2809b, TangBin) server-price-comparator capability fix (549bc21a8, TangBin) update help link (064ae3a7c, TangBin) windows not support install agent (d2e85d87e, TangBin) change security optimization to security inspection (ca70d6f7d, bistuzx) username tips fix (0b413b980, TangBin) sku add column cpu arch (e81ba067c, TangBin) setup ssh username tips (4f2010ac2, TangBin) dashboard database fix (53e94d9ef, TangBin) exporer dashboard create name repeated fix (b590c1281, TangBin) disk create domain fix (c19abfa18, TangBin) monitor dashboard domain select style fix (5c8235f2f, TangBin) add bucket not found warning to cloudaccount (6808d2288, bistuzx) ssh setup proxy validator fix (9c0697709, TangBin) ssh setup proxy validator fix (ebb09e243, TangBin) domain fix (eb1ce5ca8, TangBin) create monitor dashboard chart fix (9e2860ff4, TangBin) ssh proxy bugfix (e5efa4d77, TangBin) add proxy endpoint list tips (260cbe61b, TangBin) add dock (a71fe270e, TangBin) cloudproxy match scope vpc/network fetch (32a00ba7b, TangBin) remove ssh proxy domain filter (828e272e0, TangBin) create ssh proxy title fix (20c2b2b5d, TangBin) add ssh proxy batch delete (d2d7a858e, TangBin) remove dashboard chart name repeat check (bedab239a, TangBin) hidden monitor dashboard fix (8d4105ba0, TangBin) support ssh proxy (d76da1b9e, tangbin) fix (64b1a2c0f, mj) fix (80d72e0d1, mj) fix (0feed2200, mj) fix (e2c095229, mj) condition add units (4bc8ec0a0, tangbin) update svg assets (1b9e7ccba, tangbin) 修改按钮样式 (a59f05f45, songdengju) 文案调整 (1b9057852, songdengju) 文案调整 (0a43bf90b, songdengju) add monitor dashboard pannel name check (b235adbf4, tangbin) 价格对比字段修改 (52a660f43, songdengju) tag bugfix (d7a381fc6, tangbin) monitor dashboard bugfix (b04135aad, tangbin) block storage change tab fix (aae668417, tangbin) common alert query add param scope (3d6c26e46, tangbin) 文案修改 (ad2f1d53c, songdengju) add min width of line chart axis (6d7a48c68, tangbin) vmware平台磁盘仅在关机状态支持扩容 (b9c0762b9, songdengju) add line chart language (82250db82, tangbin) dashboard create bugfix (81e34fdbd, tangbin) dashboard add goback (c5261fe38, tangbin) update monitor dashboard select (99f162a47, tangbin) add chart save (97e3d2069, tangbin) monitor overview fix (800692316, tangbin) monitor dashboard chart add name field (b14f8951a, tangbin) conflict fix (fe69c7238, tangbin) style fix (279113593, tangbin) 禁用vmware挂载/卸载ISO按钮 (26967954d, songdengju) moniotr overview alerts undefined fix (4e740cf55, tangbin) ws logout minor logs (6f40dc580, Zhang Dongliang) ws logout minor logs (2bef8058d, Zhang Dongliang) database undefined bugfix (75d40f08f, tangbin) ws logout minor logs (96884feb8, Zhang Dongliang) ws logout minor logs (45c8351b8, Zhang Dongliang) ws logout minor logs (2aff9cf36, Zhang Dongliang) monitor overview alerts add stack (0a3490cc5, tangbin) ws logout minor logs (45a14cb76, Zhang Dongliang) ws logout minor logs (cf6b71961, Zhang Dongliang) ws logout minor logs (76fae7011, Zhang Dongliang) ws logout minor logs (2183b83e8, Zhang Dongliang) ws logout minor logs (9a6786a1e, Zhang Dongliang) ws logout minor (577238657, Zhang Dongliang) ws logout minor (5fc25cedf, Zhang Dongliang) update logout socket (7f459a7b8, mj) 文案调整 (a468a0d17, songdengju) update logout socket (f7a25853a, mj) update logout socket (0d6630fa5, mj) 修改提示文案 (ae7d8031b, songdengju) 修改提示文案 (891a0104f, songdengju) fix(7254)添加调度策略改为添加调度标签 (bfafb3c40, dongliping) monitor overview fix (674db60bd, tangbin) fix(7254):创建虚拟机指定高级配置调度策略，指定调度标签-添加网卡改成添加调度策略 (15c725a98, dongliping) 文案调整 (971fd92d5, songdengju) 文案调整 (011fb254e, songdengju) add monitor dashboard (f71bf9d46, tangbin) restore overview page (ca943a898, tangbin) monitor add dashboard view (11ccf7f9e, tangbin) 虚拟机增加禁用提示信息 (f72574ef3, songdengju) fix(NAT)优化NAT网关弹框间距文案 (935e9b6ca, dongliping) monitor overview fix (b6fe4c679, tangbin) monitor overview fix (49726610e, tangbin) fix(7225)nat网关详情中应该有更多的操作选项 (a4e53391e, dongliping) fix(#7204): 创建主机快照配额不足，点击跳转到调整配额页面，新建快照的对话框应该关闭 (02b386034, mj) silent_period fix (b3950bc16, tangbin) monitor overview fix (33e8faa67, tangbin) qcloud eip create fix (ea239df79, tangbin) qcloud eip create fix (52ed8564e, tangbin) alertrecords alert_duration fix (b92683b34, tangbin) vminstance list os_type fix (1077e4772, tangbin) dns resolve path fix (2ba07f4c2, tangbin) add locales (6b184d421, tangbin) monitor overview optimazation (45c7b629e, tangbin) fix format (b1984820f, dongliping) fix(7213)技术支持工单“我发起的”工单列表数据不应该有选择框 (2e43cf99f, dongliping) Fix(#7126 ): 创建主机模板：网络计费方式没有默认值 (981fa6457, mj) feat(3.7)快照和主机快照列表过滤项支持通过虚拟机过滤 (dfba75697, dongliping) fix(3.7)lb列表过滤项添加状态 (d34fe533e, dongliping) fix(3.7)审批工单去掉问题级别 (33000fb8f, dongliping) fix(itsm)工单结束状态判断条件及提示 (f0e3da436, dongliping) fix(vm)批量操作-同步状态放在第一个 (8a7eaa949, dongliping) fix(lb)lb支持同步状态操作 (f8029f578, dongliping) fix(lb)Onecloud平台LB不支持同步状态操作 (e11633003, dongliping) fix(lb)lb支持同步状态，以及启用禁用操作放在更多 (ccd0712b8, dongliping) feat(#2995): 技术支持工单优化 (ffa53759c, mj) feat(vm)将同步状态操作放在开机上面 (1114c73cd, dongliping) feat(#2904): 技术支持工单样式优化 (1df4f94fd, mj) 文案调整 (e330dd67d, songdengju) fix(#7168): 所有的技术支持工单tab页面，列表不应有“审批人”列且把自定义列中去掉“审批人” (e0963a07d, mj) 详情页隐藏外部标签 (772d4f32b, songdengju) 详情页隐藏外部标签 (540aaff75, songdengju) 详情页隐藏外部标签 (009dca72f, songdengju) 详情页隐藏外部标签 (9e790d62d, songdengju) 隐藏详情页外部标签 (1fd16f946, songdengju) 隐藏详情页外部标签 (9fe1009ea, songdengju) 隐藏详情页外部标签 (53dffa359, songdengju) 隐藏详情页外部标签信息 (8f35bd290, songdengju) 详情页隐藏外部标签 (92defec0e, songdengju) 标签过滤调整 (59fcd5545, songdengju) 调整修改标签弹窗 (90e41d0f6, songdengju) fix(nat)详情添加云账号，云订阅的信息 (3ac1879f9, dongliping) fix word (3dded5fde, dongliping) fix(nat)新建SNAT条目选择新建弹性公网IP时新打开的标签应该跳转到eip的列表 (af7eae408, dongliping) Fix(#7167): 列表组件没有勾选框，无法支持批量操作 (a21f01bfb, mj) fix(#7167): 列表组件没有勾选框，无法支持批量操作 (681c72049, mj) fix(#7154): 技术支持工单“我发起的”tab页面状态搜索框不应该显示两条“已关闭” (6464e66bd, mj) fix(#7151): 系统管理后台在“我发起的”tab页面不应该有“申请技术支持”按钮 (b542fc585, mj) fix(#7141): 点击云管平台页面右上角“申请技术支持工单”按钮，没有反应也没有报错 (6ceb7b821, mj) 安全组缓存列表支持平台、区域、云账号搜索 (50efe708f, songdengju) feat(3.7)项目视图添加不支持迁移操作的提示 (740b3cb2c, dongliping) feat(3.7)更换IP过滤PXE和IPMI类型的IP子网 (b78e60b6a, dongliping) fix 调整样式 (820a7b86c, dongliping) non project user fetch alterts 403 error fix (5dbb41942, tangbin) reids\u0026 rds create fix (99b24005c, tangbin) add nat op (0de0b5cde, Qu Xuan) 文案调整 (edba28c63, songdengju) 文案调整 (442f797e9, songdengju) 文案调整 (e5a030646, songdengju) 文案调整 (b0ae29c36, songdengju) fix(3.7)多维度分析文案 (64bcd1055, weichunling) remove Aws from redis create (d898f6698, tangbin) redis change spec mem choices fix (78ecdaffa, tangbin) qcloud rds basic edition bind secgroup fix (070abffcf, tangbin) 文案增加 (32025cf83, songdengju) alert resource display fix (e9b2da41f, tangbin) 文案调整 (377ccefef, songdengju) wire merge add more descriptions (7b593b1b8, tangbin) image tooltips fix (b147c665a, tangbin) cloudprovider region status checking fix (427f24b5a, tangbin) image market pagination display bugfix (502ec00ac, tangbin) 状态增加翻译 (a605d67ef, songdengju) 文案整理 (1f5325f75, songdengju) 文案整理 (2c8292324, songdengju) 文案整理 (e3305891e, songdengju) 文案整理 (d5c72ba7e, songdengju) 文案整理 (d090ee976, songdengju) add response log (1e2b635c9, mj) change common alert form reduce min width to 70px (69a173d7e, tangbin) common alert monitor line table show fix (e92abed88, tangbin) 修改中文逗号为英文 (4c5ed1152, songdengju) wire merge auto refresh after success (2c66ffa4c, tangbin) common alert list display fix (9bf84a194, tangbin) commonalert update fix (f756ff023, tangbin) add getTimeRangeFilter (c5ee12b3a, tangbin) add getTimeRangeFilter (dc4dae751, tangbin) add getTimeRangeFilter (5138f2932, tangbin) host sidepage network list add more columns (1635d88f4, tangbin) 调整搜索字段顺序 (7516a5cd1, songdengju) notice fix (e87bef28a, tangbin) wire merge sources parameter fix (ec5ac5f7b, tangbin) add locales (0c9733fdd, tangbin) add region filter (0550df347, tangbin) add region filter (6bc4ffe75, tangbin) notice show more button (65b33d641, tangbin) notice show more button (4746d9fca, tangbin) alertrecord display fix (a53fdacca, tangbin) add locales (14fdcfd9b, tangbin) add locales (f25fa38b9, tangbin) cloud event list fix (36b3bd376, tangbin) add locales (bc17a903c, tangbin) 替换为兼容 arm64 的 docker base (5b184d949, Zhang Dongliang) common alert form hadRobot fix (39e3d76de, tangbin) trans brand onecloud to yunioncloud (888253920, tangbin) 文案修复 (dc36439e1, songdengju) remove useless steps for create vmware account (02e06d271, tangbin) update common alert field dispaly fix (5a72cba6d, tangbin) chart show is update (c4c08677d, tangbin) guest metric line chart display bugfix (05b407130, tangbin) add style utils (43be411f1, mj) #7107 控制面板、监控大屏 本月支出可下降空间百分比样式问题 (e8fecea4d, mj) add metric description (0de393628, tangbin) add silent period (a69cac978, tangbin) fix:云账号详情资源统计“IP使用率”和“EIP使用率”文案写反了。 (0c809d069, dongliping) 数据库模块英文翻译修改与 大小写校对 (bd249189b, weichunling) add wire expected status (a51cbe888, tangbin) wire merge (dbb8dbae9, tangbin) wire merge (ba05ee2ed, tangbin) fix:英文模式下，参数显示不全问题需前端调整 (abbcf914c, dongliping) fix:英文模式下，参数显示不全问题需前端调整 (4bce8d6fe, dongliping) fix:英文模式下，参数显示不全问题需前端调整 (e9fa06983, dongliping) fix:英文模式下，参数显示不全问题需前端调整 (99d2207fb, dongliping) fix:英文模式下，参数显示不全问题需前端调整 (3d17d72b4, dongliping) fix(storage)存储使用情况的中文显示问题 (651a9d703, dongliping) fix(network):IP子网使用情况的中文显示 (0782f3150, dongliping) update desc form layout (d3824cf05, mj) fix(Redis)免密访问的英文文案 (e9d912d5a, dongliping) wire merge (b8df3063c, tangbin) fix ticket status words (5487487d2, dongliping) fix(3.7)费用模块英文文案修改 (0afba1d3b, weichunling) fix revoked-\u003ecanceled (def7db31d, dongliping) fix add netword card word (49a31a4e0, dongliping) fix(common) tickets submitted and closed time (f364de259, dongliping) add buckets (480e883df, mj) 文案统一 (dcb9522bd, songdengju) common alert create bugfix (3a0b20b65, tangbin) common alert form display (f8c55b1a5, tangbin) 增加翻译 (2b3f145a8, songdengju) 增加翻译 (7fb719911, songdengju) 英文翻译校对 (b340c615f, Zhang Dongliang) 英文翻译校对 (d96884d0f, Zhang Dongliang) 报警历史文案修改 (a36f0f546, songdengju) 文案优化 (57575361d, songdengju) 修复显示不全问题 (4d0297519, songdengju) openstack \u0026 zstack create account bugfix (3b2e75854, tangbin) add area_code search (457ef6752, tangbin) get-types url change\u0026 mobile fix (d6ad8f1b3, tangbin) Alertresource bugfix (ad65c4c83, tangbin) fix BareMetal-\u003eBaremetal (3d699c7ae, dongliping) fix BareMetal-\u003eBaremetal (7fe6e85c5, dongliping) fix BareMetal-\u003eBaremetal (b5adc73b0, dongliping) fix(3.7)英文文案修改 (12a9a9f4f, weichunling) search box tag display fix (ac0ca4293, tangbin) fix(3.7)多云管理模块英文显示不全 (167a3889a, weichunling) alert records add params alert_duration \u0026 reduece (20851b13d, tangbin) nav bar add resource tips (77df50961, tangbin) fix area_code word (2f84ec572, 董丽萍) international_mobile format fix (3ad5a9e64, tangbin) add contact types column (72aaa845f, tangbin) add res_type filter (929d159e8, tangbin) fix (f10a07fed, mj) temp (11d6a568c, tangbin) add chalk lib (1bd0d9700, mj) add automatic deployment tool (e3e087b4e, mj) add mock support (a01e1c548, mj) add mock support (757636826, mj) common alert list add column res_type (1f61958b5, tangbin) commonalerts comparator param fix (5e62f1e39, tangbin) monitor overview use last points as chart data (4ff28c8a4, tangbin) alert channel fix (37a0f1d32, tangbin) base select add props option-label-prop (84164685b, tangbin) alert channel bugfix (c8a5e4b3a, tangbin) commonalerts comparator param fix (b6a5ae4e2, tangbin) keypair modify name fix (97af6a0ad, tangbin) disk trans fix (7789bbce6, tangbin) fix(3.7)资源类型字段英文文案优化 (4a75e2fbb, weichunling) fix(3.7)预算管理相关文案修改 (1aa58bc65, weichunling) add server update tag translation (2de01312f, hoganlxj) disk expansion tooptips fix (412d29bc2, tangbin) translation fix (df3a98cca, tangbin) vm instance change vm setting fix (82364a5af, tangbin) 修改英文统一：Modify (2bf3fe52d, songdengju) 更多文案统一 (29fd2c5b1, songdengju) 文案统一 (0e93ea95e, songdengju) page footer fix (ad088cf61, tangbin) fix(3.7)优化建议字段翻译 (236a342c9, weichunling) fix modifypolicies中间加空格 (138113992, 董丽萍) region filter add scope params (038bfaa84, tangbin) monitor overview fix (4c77b4bd4, tangbin) fix(3.7)优化建议两条新增规则的规则类型的中英文映射 (f5a8cec2b, weichunling) 文案统一 (479748ed2, songdengju) 文案统一 (5b369a9a0, songdengju) 文案统一 (daa9aadbd, songdengju) add get region filter (d2b4b5427, tangbin) add get region filter (e1649cbe8, tangbin) add get region filter (8e3127219, tangbin) fix(3.7)修改工单的英文文案 (18bedb34a, weichunling) fix(3.7)修改工单的英文文案 (64061e34c, weichunling) add class monitor-overview-breadcrumb (3c5ca7a88, tangbin) add trans up size \u0026 down size (809a5f5a3, tangbin) add iam security (ae2f4a58b, tangbin) change cloudaccount side page tabs order (ee33aed1b, tangbin) 创建主机系统盘最小值fix (5b0571e08, tangbin) 子网创建增加zone status过滤 (6672d1994, tangbin) base chart support props chartevents (1547c01da, tangbin) monitor overview support chart drill (96d38e316, tangbin) fix 报警定义改为报警策略 (063838488, 董丽萍) fix 报警定义改为报警策略 (e595f9dbd, 董丽萍) monitor overview unit fix (320896a3a, tangbin) monitor measurements query params bugifx (019c2d997, tangbin) fix Alters-\u003eAlerts (f2e00c20d, 董丽萍) aliyun cloud account create support smal (54ea1f285, tangbin) feat(3.7)国际化手机号校验规则修改为6-14位的数字 (5c972e6d5, 董丽萍) monitor_metric_6 fix (e5b2c32d7, tangbin) alert policy add condition nodata (092c8f8d0, tangbin) alert of last 7days query fix (51aa55a8a, tangbin) style fix (4f069ab22, tangbin) i18n fix (d4bfca52c, tangbin) i18n fix (c6073a559, tangbin) style fix (a1ded2da0, tangbin) add monitor icon (8306f30bf, tangbin) style fix (f09f96b56, tangbin) add monitor menu icon (13ed30b73, tangbin) monitor menu layout (aaa099595, tangbin) monitor menu layout (12252d61b, tangbin) style fix (d2c3705f1, tangbin) monitor overview page (40bd6d8d8, tangbin) fix word (65b9b703d, 董丽萍)  Vminstance (6)  ssh: include all ips in default vpc (55a512a85, Yousong Zhou) ssh: fix length check on fwds (238cab985, Yousong Zhou) ssh: allow onecloud vpc ip (49fd4e640, Yousong Zhou) ssh: use server forward for onecloud vpc (a780690cc, Yousong Zhou) ssh: use ipInfoList (08809dda6, Yousong Zhou) ssh: adjust meta func identifier scope (6721ab24c, Yousong Zhou)   kubecomps Repo: https://github.com/yunionio/kubecomps\n14 commits to kubecomps - v3.7.0 since this release.\nBug Fixes (9)  build: embed heml pkgs remove it (b26121b, Zexi Li) kubeserver: helm release resource object’s name and id missed (b1a78d3, Zexi Li) kubeserver: helm release resource list (bb24301, Zexi Li) kubeserver: helm repo remove (4021c66, Zexi Li) kubeserver: helm add repo already exists error (a249b23, Zexi Li) kubeserver: import cluster input data unmarshal error (ad07bb2, Zexi Li) kubeserver: make system cluster resource getable (53262af, Zexi Li) kubeserver: sync cluster not fatal (a662e92, Zexi Li) kubeserver: cluster ca and key field nullable deleted (102aef8, Zexi Li)  Features (5)  build: support arm64 build (4adf7ae, Zexi Li) build: go generate use vendor (6b1507b, Zexi Li) kubeserver: change configuration of minio (4dfe3b1, Zexi Li) kubeserver: add cluster precheck api (eed0372, Zexi Li) repo: repo url allow updated (4de7ab5, Zexi Li)   notify-plugins Repo: https://github.com/yunionio/notify-plugins\n3 commits to notify-plugins - v3.7.0 since this release.\nBug Fixes (1)  build: build arm64 image (731cf18, Zexi Li)  Features (2)  be compatible with notify’s change to support international mobile (0e0d80a, rainzm) robot: support mutli WebhookPrefix (34f7ebf, rainzm)   ocadm Repo: https://github.com/yunionio/ocadm\n13 commits to ocadm - v3.7.0 since this release.\nBug Fixes (7)  set operator imagePullPolicy IfNotPresent (80df3f2, Zexi Li) build,make: 修改新分支的编译变量 release‘’ (4b74ce5, Zhang Dongliang) cluster: set OS_PROJECT_DOMAIN of cluster auth info (a962c69, Zexi Li) cluster: update vendor make build pass (3e1d3b8, Zexi Li) keepalived: 解决 高可用架构部署的默认网卡传递参数问题 (c18bbee, Zhang Dongliang) preflight: more accurate of mysql grant error (f83dc25, Zexi Li) update: cluster update operator parse image digest (dff44e8, Zexi Li)  Chore (2)  vendor: update vendor (bca87f7, Zexi Li) vendor: update to resolve onecloud-operator tag deleted (afae090, Zexi Li)  Features (3)  build: 增加arm 下编译 ocadm deb 的步骤(make deb)； 统一跨平台metrics-server 的 tag 名称；升级 k8s-sidecar 到 0.1.275 (66e7726, Zhang Dongliang) keepalived,ha: 新增 keepalived_interface 变量支持,以便在安装高可用多网卡情况下支持非默认网卡绑定 vip (146d04a, Zhang Dongliang) longhorn: support migrate to source pvc from longhorn pvc (46d1f11, wanyaoqi)  Others (1)  update mod (316fcbe, TangBin)   sdnagent Repo: https://github.com/yunionio/sdnagent\n39 commits to sdnagent - v3.7.0 since this release.\nAgent (5)  server: register ForwardService (a993132, Yousong Zhou) server: enable ovnMdMan (fd5c3c8, Yousong Zhou) server: add metadata server (d485c37, Yousong Zhou) server: watch: add FindGuestDescByNetIdIP (d486ab8, Yousong Zhou) server: use utils.RunOvsctl (bab3851, Yousong Zhou)  Build (4)  note on deploying ovs, ovn components (7800cf9, Yousong Zhou) reword README.md for deploying eipgw (7434581, Yousong Zhou) docker: use openvswitch:2.10.5-1 (56b9693, Yousong Zhou) eipgw: track to ensure stop state as well (9b317cc, Yousong Zhou)  Features (1)  build: make multi arch manifest docker image (9304d46, Zexi Li)  Flowsource (2)  allow conntrack invalid packets (e558321, Yousong Zhou) make aware of sub ips (676cbc7, Yousong Zhou)  Others (8)  ovn-md: ovnMdServer: local origNs (8a90039, Yousong Zhou) ovn-md: ovnMdServer: fix logging typo on Stop (5d90d3f, Yousong Zhou) .circleci: go test with “-mod vendor” (b860eec, Yousong Zhou) ovn-md: add 24 hours timeout for forward listener (ce30249, Yousong Zhou) ovn-md: ovnMdServer: serve grpc forward open, close, list (dfdc470, Yousong Zhou) ovn-md: add ovnMdForward (570052b, Yousong Zhou) ovn-md: use newOvnMdServer (e67a1f1, Yousong Zhou) .circleci: bump go to 1.14 (24b3998, Yousong Zhou)  Ovn (1)  mapped: fix possible traffic loop across different vpcs (bc53d0b, Yousong Zhou)  Server (1)  fix closing listener too early (1f46e95, Yousong Zhou)  Tc (6)  QdiscTree: add Root() method (36d70d3, Yousong Zhou) NewQdiscTree: special case mq (6a05b05, Yousong Zhou) NewQdiscTree: fix children key (3280a78, Yousong Zhou) NewQdiscTree: use qbase for BaseQdisc() return (9b10183, Yousong Zhou) NewQdiscTree: rename vars (5d5507f, Yousong Zhou) NewQdiscTree: use current tree instead of the root (be12940, Yousong Zhou)  Tcman (1)  skip devices with mq qdisc (c8c1d25, Yousong Zhou)  Treewide (1)  use sdn socket path from config (027db60, Yousong Zhou)  Utils (5)  guest: ignore “secgroup” or “secgroups” (0cd17fe, Yousong Zhou) add RunOvsctl (305d3bf, Yousong Zhou) guest: add GetJSONObjectDesc (3c1b6bb, Yousong Zhou) guest: add FindNicByNetIdIP (9840fe3, Yousong Zhou) guest: make aware of sub ips (89fdb32, Yousong Zhou)  Vendor (4)  bump to current tip of release/3.7 (07e6d8a, Yousong Zhou) onecloud: use v0.0.0-20201219023906-3eb25e6dd1cd (66a4da9, Yousong Zhou) bump to onecloud master branch (beb7661b9fc) (5109afe, Yousong Zhou) bump yunion.io/x/onecloud to current tip of release/3.3 (8a8e6be, Yousong Zhou)  ","excerpt":"Release time: 2021-05-12 16:45:43\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.7/3-7-0/","title":"v3.7.0"},{"body":"发布时间 2021-05-12 16:45:43\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n953 commits to cloudpods - v3.7.0 since this release.\nAnsibleserver (2)  wait zombie subprocesses (7f80003d2, Yousong Zhou) use mcclient module method for fetching keypair info (6de0b2e35, Yousong Zhou)  Apigateway (3)  handler: add cloudproxy (39c169582, Yousong Zhou) try return httperrors (1d1a5c327, Yousong Zhou) reword error messages (583d1889f, Yousong Zhou)  Apihelper (1)  move to yunion.io/x/onecloud/pkg/{vpcagent/,}apihelper (98fcdb2be, Yousong Zhou)  Bug Fixes (565)  actions domain filter by project doamin id (287d5a555, Qu Xuan) add trans info (bc991fda7, Qu Xuan) optimized aliyun error (3e984f115, Qu Xuan) openstack health should be normal (1e7cf0af4, Qu Xuan) resolve conflict of climc docker build (7db688a9c, Qiu Jian) nas misc (a874c2a75, Qu Xuan) aliyun lb charge type (7730e87fc, Qu Xuan) qcloud eip bandwidth (c12125d86, Qu Xuan) secgroup cache policy (f60e95641, Qu Xuan) validate secgroup references (3e88e3093, Qu Xuan) get region nil pointer error (2a3a85f3a, Qiu Jian) init cloud shell by apigateway (d80d9f13b, Qiu Jian) add more organization command (0d6c17e31, Qiu Jian) missing yunionconf log (eda02abc9, Qiu Jian) optimzed tag sync (d7be39edf, Qu Xuan) add nat sku provider filter (14246f483, Qu Xuan) add secgroup filter opts (1ae3fbc74, Qu Xuan) add tag for databricks vm (082d5a9d6, Qu Xuan) update version of file-repo (f89f43d16, rainzm) optimized bucket tag (84f8cc1b3, Qu Xuan) add nat sku policy (8e2092e18, Qu Xuan) add cancel expire action (e17fca6c4, Qu Xuan) sync nat sku when sync cloudaccount (7b6cac88a, Qu Xuan) avoid return no data result (8ba639bb4, Qu Xuan) aliyun public ip bandwidth (f853cc4c0, Qu Xuan) aliyun tag list api (b63241b2f, Qu Xuan) support prepaid instance change config (8ce4f109b, Qu Xuan) optimize change vm config and prepaid change config (a65b2f633, Qu Xuan) add bucket tooltip (0cb8100ad, Qu Xuan) require password for imported user (a17c84613, Qiu Jian) avoid host worker is locked when image cache is deleted (251afc7d6, Qu Xuan) sync new project for azure resource group (2b3741885, Qu Xuan) optimzed tag update and sync (a1820bc33, Qu Xuan) optimized rbd storage input and update (fae6d333c, Qu Xuan) sku zone (038faf791, Qu Xuan) skip zone check when rds change config (3ed28eea2, Qu Xuan) avoid panic (7012a8cfb, Qu Xuan) sync cloud tags when set tags (3b2c804e2, Qu Xuan) private cloud sku attached disk count (295d4b993, Qu Xuan) add rbdcli commond for debug (83c108d48, Qu Xuan) add panic log for worker task (5cba23d8c, Qu Xuan) qcloud bucket refer (7c2200c35, Qu Xuan) change rds config skip zone check (dd55eae07, Qu Xuan) optimized nat entry (790366c93, Qu Xuan) before insert (0c72b07c3, Qu Xuan) avoid panic when use idc vpc (1aeb8a9a8, Qu Xuan) add index for image_type (1fd9bd5b2, Qu Xuan) nat sku env (22756d495, Qu Xuan) add qcloud get tags and remove unused interface (cc8a40000, Qu Xuan) add options for pre allow ip add (b8530c26d, Qu Xuan) remove qcloud region and zone prefix (82ac67123, Qu Xuan) nat delete and create fix (740937ff6, Qu Xuan) new aws region (bc1c1c20b, Qu Xuan) add region id params (cfba238f8, Qu Xuan) account auto sync time (0a81e8a54, Qu Xuan) time sync duration (67df9bb41, Qu Xuan) secgroup cache reference (2d5744376, Qu Xuan) peer secgroup rule fix (14be7b8a0, Qu Xuan) vpc public with nat (aea94c066, Qu Xuan) instance with eip charge type (4f00223df, Qu Xuan) nat sku domain policy (263db9b8c, Qu Xuan) cloudaccount auto sync (15efe1933, Qu Xuan) vendor update (8e65757b9, Qu Xuan) avoid listener worker leak (7b79a8e49, Qu Xuan) avoid update protocol with any faild (71b0a4fae, Qu Xuan) avoid stop or start vm failed (e8b70d483, Qu Xuan) adjust primary key length when sqlchemy utf8 default to utf8mb4 (0c57a713e, Qiu Jian) nas for huawei (19b617b1e, Qu Xuan) ansibleserver: don’t init privateKey for ansibleplaybook if it already have one (9502cfebf, rainzm) ansibleserver: add LF for privateKey if not (4088e47f9, rainzm) ansibleserver: be compatible with empty params (630729ca8, rainzm) apigateway: add auth/stats api to retrieve system info (#10182) (31854889d, Jian Qiu) apigateway: recover remove apigateway locale messages (e65d6cdf2, Qiu Jian) apigateway: use info response service type of console endpoints (2990e5d47, Qiu Jian) apigateway: count city servers (34b12241f, Qu Xuan) apigateway: getRegions return value of api_server (6549d886c, Qiu Jian) apigateway: allow logout by get method (d2caac95d, Qiu Jian) apigateway: ignore fetch IDP errors in getRegions (#10071) (f5f02b5e0, Jian Qiu) apigateway: add enable_quota_check and return-domain-list attributes to fe params (#10159) (43e858265, Jian Qiu) awscli: instance-rebuild-root fix (5d6c8c761, TangBin) baremetal: sas2iru parse line (20c041ec0, Zexi Li) baremetal: try channel 8 for default profile (50ad5a76b, Qiu Jian) baremetal: use command timeout context replace timeout command (6d5cd8ca8, Zexi Li) baremetal: convert to host failed (8cc0b63c8, Zexi Li) baremetal: megactl driver fail to find device by key (6945b6250, Qiu Jian) baremetal: baremetal ipmi probe reset link up state (c1868f1dd, Qiu Jian) baremetal: register baremetal name invalid (a8312c5e2, Zexi Li) baremetal: clear jbod disks do PDMakeGood (77e4c806f, Zexi Li) baremetal,esxiagent: no cloudroot user initialized (9ae991c15, Qiu Jian) baremetal-agent: baremetal will probe status in status unknown (32311f989, Qiu Jian) baremetal-agent: baremetal fail to stop due to power off soft failed (d8b1a992f, Qiu Jian) build: fmt: ignore auto-generated files (a290a6a49, Yousong Zhou) build: chage template of ‘Abnormal Login’ (06634a63a, rainzm) build: DOCKER_CLI_EXPERIMENTAL=enabled (a083cc510, Zexi Li) build: build telegraf-raid-plugin (183e9cfa5, Zexi Li) climc: server-create –desc not work (6acf96e87, Zexi Li) climc: use printObjectRecursive for PerformXxx calls (d6463f955, Yousong Zhou) climc: mv climc rpm package .bashrc to /etc/profile.d/climc.sh (01d2612ab, Zexi Li) climc: host add netif add params bridge/interface (447882a00, wanyaoqi) climc: replace ' -\u003e \" (5c64f32f0, Qu Xuan) cloudcommon: add default domain of common options (772579d3e, Zexi Li) cloudcommon: unify OS_ARCH constants (e1816106a, Zexi Li) cloudcommon: missing set_meta opslog (#9915) (2f3a3766c, Jian Qiu) cloudcommon: perform public should check the sharing scope of resource (faf00d8d6, Qiu Jian) cloudcommon: use rbac authentication dedicated to the list interface in GetModelProperty (c8d1ac215, rainzm) cloudcommon: splitable may not initialize underlying table (658c59327, Qiu Jian) cloudcommon: disable EventNotify for now (15abea72a, rainzm) cloudcommon: use NewGeneralError to construct error (9f927922a, rainzm) cloudcommon: supplement i18n translations (fbdcbeb75, Qiu Jian) cloudcommon: disable quota check by default (0a7513cce, Qiu Jian) cloudcommon: adjust policy refresh to default 30 seconds (ef8ad8966, Qiu Jian) cloudcommon: query filter ineffective for splitable (abbcac09a, Qiu Jian) cloudcommon: panic when query an empty splitable model manager (d01f89a2c, Qiu Jian) cloudcommon: add rbac_policy_refresh_internval_seconds option (792bfe533, Qiu Jian) cloudevent: default policy (0ff3997a2, Qu Xuan) cloudevent: add aws cloudevent (e91b5dbc3, Qu Xuan) cloudevent: update aliyun lookupevent api (22a41fb05, Qu Xuan) cloudevent: adjust cloudevents resource scope (e12eea679, Qiu Jian) cloudevent: cloudevent is domain level resource (84b9e1fb0, Qu Xuan) cloudevent: add distinct filed for cloudevent (53969f14e, Qu Xuan) cloudevent: optimized cloudevent sql (ae90bbd20, Qu Xuan) cloudevent: optimized cloudevent sync (a5834180f, Qu Xuan) cloudevent,devtool: missing metadata table (ba08d9d46, Qiu Jian) cloudid: add en-US html templte (49c90a381, Qu Xuan) cloudid: optimized system policy sync (7760e0c3a, Qu Xuan) cloudid: add for notify templete (21820fe2d, Qu Xuan) cloudid: avoid empty auth url (79ea27170, Qu Xuan) cloudid: fix azure saml provider delete error (9ff20ed93, Qu Xuan) cloudid: avoid new public account sync system policy delay 1 day (3b0710d98, Qu Xuan) cloudid: sync role policy (c0e3427df, Qu Xuan) cloudid: auto update saml provider metadata (ac146af36, Qu Xuan) cloudid: saml navigation template support i18n (e3fb7729d, Qiu Jian) cloudid: optimized saml sso (0165d8391, Qu Xuan) cloudid: huawei saml provider create issue (5f8461461, Qu Xuan) cloudid: azure saml confirm (f00bc6d19, Qu Xuan) cloudid: sync qcloud collaborators user (f841fd85a, Qu Xuan) cloudid: avoid use invalid character for role name (1e5014aa4, Qu Xuan) cloudmon: deal cannot get azure metric (369872f7a, –global) cloudproxy: correct fetch projectId from server for PE (4ba3a2670, rainzm) cloudproxy: keep the proxy endpoint project and server consistent (de7ef8baa, rainzm) cloudproxy: ssh proxy endpoint\u0026match query (e965d1d9e, TangBin) common: add debug info for lock (5d88767c9, Qu Xuan) devtool: set ‘task_id’ and ‘task_notify_url’ in header (b5d4b30dd, rainzm) devtool: get ‘lastseen’ not ‘last_seen’ of forward (7a1ba77d9, rainzm) devtool: correct output error (93dad50d7, rainzm) devtool: add scope=system query when list proxy endpoints (93e1f48cb, rainzm) devtool: extend the waiting time when checking remote forward (73db546f5, rainzm) devtool: fix a bug that may trigger panic (377f9d00e, rainzm) devtool: wait for the remote forward to run normally (93af6514d, rainzm) esxi: be compatible with disconnected host (d9040773f, rainzm) esxi: determine whether the disk is a root disk more reasonably (18bececcf, rainzm) esxi: prevent fake template and real template from duplication (63fd7e589, rainzm) esxi: correctly set the imagePath outside the if block (de8fd509d, rainzm) esxi: add ListPath for storage and use it to check iso (f8a822c5f, rainzm) esxiagent: add humanized tips when searching vm failed (b9e983787, rainzm) esxiagent: nicIndex should be incremented (02931f509, rainzm) git,make: 更新获取 git branch 的规则 (eb7372263, Zhang Dongliang) git,make: 修正 gitbranch 变量的获取方式，解决自动升级版本 tag 不统一的问题 (0b2aed858, Zhang Dongliang) git,make: git branch 获取方式优化 (71e63e2ed, Zhang Dongliang) glance: list image by os arch use startwith (838650656, wanyaoqi) glance: image can’t removed when size is 0 (61f06ee3c, Zexi Li) glance: set fail status when upload image to s3 (0c4c46b2f, Zexi Li) go.mod: remove k8s.io/kubernetes dependency (c025944d1, Zexi Li) host: guestman: variable name typo (2acca1a70, Yousong Zhou) host: arm vm virtio-net-pci without addr (45b6072f2, Zexi Li) host: fix check hugepage enabled (97d96aa32, wanyaoqi) host: modification of netio collection field of local virtual machine (83a836411, zhaoxiangchun) host: telegraf listen on local ipv4 address explicitly (89df58844, Qiu Jian) host: fix wait time after mount fuse fs (ad2d472d0, wanyaoqi) host: add print migrate progress info (8161d86df, wanyaoqi) host: update host metric tags when server or host changeowner (466153363, zhaoxiangchun) host: make sure it won’t match vpc guests by accident (6db750347, Yousong Zhou) host: detect ovs version (d6d28cf01, Zexi Li) host: check lease living on restart etcd session (92e0ed343, wanyaoqi) host: ignore parted resize disk unknown partition table error (fc1abe2eb, Zexi Li) host: fix set windows password with escape charater (1d8879ef7, wanyaoqi) host: update telegraf conf adapter to container environment (38a9218e9, wanyaoqi) host-deployer: add retry on check is vgactived (4841fbdb1, wanyaoqi) host-deployer: remove escape character on windows passwd (645cf64b9, wanyaoqi) host-deployer: mkfs.ext4 add ‘-T largefile’ option (ecaa03594, Zexi Li) host-deployer: add log line on blkid failed (550159af7, wanyaoqi) host-deployer: probe image info umount rootfs first (37b036ed3, wanyaoqi) host-deployer: cancel rename centos vgname (c302bae2b, wanyaoqi) host-deployer: mount may fail to lock /etc/mtab, add retrier (e35fa898e, Qiu Jian) hostdeployer: windows rootfs umount leak (c308bdbb0, Zexi Li) hostman: avoid panic when disk is nil (24928469f, Qu Xuan) hostman: recycle local disk file when rebuilding root (20c4dad4e, Qiu Jian) hostman: fix kvm create disk failed error (f5ed30759, Qu Xuan) image: update min_disk of iso image (c23b169e1, Qiu Jian) keystone: update default role associated policy name (94f72124f, Qiu Jian) keystone: avoid repeated abnormal login notifications (c4c3b925b, rainzm) keystone: SSO created user name may be duplicated (9342987aa, Qiu Jian) keystone: add suggestion previliges to meter admin (5ef93ed03, Qiu Jian) keystone: avoid panic when call logclient (7e35db104, Qu Xuan) keystone: adjust default system policy names (b034a7a95, Qiu Jian) keystone: allow refresh scope resource (c14b245fa, Qu Xuan) keystone: ignore deleted policies when matching policies (234c37c49, Qiu Jian) keystone: tag list for keystone service (962e19bbd, Qu Xuan) keystone: ensure comparing id with non-utf8 string (601112dd7, Qiu Jian) keystone: always upload\u0026refresh service config whenever service restart (80229fa1e, Qiu Jian) keystone: allow joint projects across domains by default (e6868d5d0, Qiu Jian) keystone: user create without password can login with any password (bc0a4a7b6, Qiu Jian) keystone: not allow to disable sql driver (ef648b5b8, Qiu Jian) keystone: allow delete sso imported non-local user (6428ca9a1, Qiu Jian) keystone: add i18n description for policy and role (7c8455458, Qiu Jian) keystone: oidc driver turn on debug mode if log-level is debug (57a0e8d63, Qiu Jian) keystone: service config ignore deploy server socket path (c2978b820, wanyaoqi) keystone: allow unlink a domain from an IDP (076fa5498, Qiu Jian) keystone: rolepolicies list panic if filter by domain scope (4411c4e5b, Qiu Jian) keystone: send to the admin and the party separately when Abnormal login occurs (697685199, rainzm) keystone: add alertrecords to default dashboard permission (#10161) (739637b8f, Jian Qiu) keystone: panic if request with an invalid token (0eaf20da2, Qiu Jian) keystone: update user attributes whenever user login (a0350d053, Qiu Jian) keystone: role_assignment effective list ignore groups without user (128f895c5, Qiu Jian) keystone: allow filter identity_providers with name of ssoDomain (db7a92178, Qiu Jian) keystone: clear failed auth when enable user (9c630dc31, rainzm) keystone: policy name duplication (#10200) (058a0a072, Jian Qiu) keystone: ignore service config update without changes (1d7b7057a, Qiu Jian) keystone: idp filter by sso_domain returns domain’s idp only (1a24034c6, Qiu Jian) keystone: hide system scope policies in domain scope view (#10195) (e43bea673, Jian Qiu) keystone: don’t send the administrator’s message to the party (c5fd65160, rainzm) keystone: cas sso may create new project whenever user login (34e5a36b2, Qiu Jian) keystone: correctly pass domain id to role-assignments (988c90e8f, rainzm) log: add filters to baremetal event logs (1e4b1f3d3, Qiu Jian) log: fail to submit action log (b01a3c153, Qiu Jian) logger: distinct field optimized for logger (14979480e, Qu Xuan) make,buildx: 使用 buildx 编译时，拉镜像到本地 (7b6ce2b05, Zhang Dongliang) mcclient: options: webconsole: fix passing ssh port (b06be9ea5, Yousong Zhou) monitor: fix monitor export err (c068badd3, zhaoxiangchun) monitor: sore reture info：resourceType,measurement (333c83778, –global) monitor: add resType filter (ee00fd319, –global) monitor: alertpanel create fix; nodealert filterbyowner fix (1c8b54f11, zhaoxiangchun) monitor: 3.7 nodata and alertOverview fix (a43a4e617, zhaoxiangchun) monitor: modify rds,redis,oss field descriptions (d88ec4c39, zhaoxiangchun) monitor: monitor notify international and 3.6 bugfix (2f11e6012, –global) monitor: domain view can list scope is domain or project alertrecords; fix nodata alert return info (5c12f9e1f, zhaoxiangchun) monitor: modify totalrecord query (5e054a25a, zhaoxiangchun) monitor: fix nodata alertresource list (f408ef027, –global) monitor: alertPanel add dumplicate name check (383709d8e, zhaoxiangchun) monitor: fix update alert duration fail (523cbab84, zhaoxiangchun) monitor: fix alert duration (1bce5eaa6, zhaoxiangchun) monitor: alertQuery fix (1b045d59c, zhaoxiangchun) monitor: fix 报警静默期和未恢复告警策略的兼容 (26721fc50, zhaoxiangchun) monitor: registry alertPanel in mcclient (23e44d83d, zhaoxiangchun) monitor: modify suggestrule process influxdb data (91d1f64ef, zhaoxiangchun) monitor: alertpanel update don’t chcek uniq name (8bc086e8d, zhaoxiangchun) monitor: fix monitoroverview and meter send alerting info to notify (107c1745d, zhaoxiangchun) monitor: suggestalert ignore throw err (b8c008a8a, zhaoxiangchun) monitor: modify alertrecord list input (e8a8d121f, zhaoxiangchun) monitor: modify monitor serviceType in StartService() (dcdf3a128, zhaoxiangchun) monitor: fix alert notify info do not contain resourceName (7fd2b865e, zhaoxiangchun) monitor: modify nodata feishu notifyinfo; fix send email err (92fbf93cb, zhaoxiangchun) monitor: modify influxdbSuggestDriver query err (df6a2634f, zhaoxiangchun) monitor: other servier create alert add used_by param as a agreement (752660450, –global) monitor: monitor query : cloudaccount no data fix (4f7ad853d, zhaoxiangchun) monitor: modify onecloud replacement code (fdafdeb8a, zhaoxiangchun) monitor: set alertdashboard scope (9901f56b7, zhaoxiangchun) monitor: alertdashboard setscope (c78defe39, zhaoxiangchun) monitor: monitor overview throw err (23f80dced, zhaoxiangchun) monitor: delete suggestConfig auto init data (2a7f9ab51, zhaoxiangchun) monitor: modify monitor nodata alert matching onecloud host func (73ec2db41, zhaoxiangchun) monitor: filter alertquery result according to onecloud resources (4ad8729f7, zhaoxiangchun) monitor,host: replace space to ‘+’ when write to influxdb and replace ‘+’ to space when query (c86dab4d6, zhaoxiangchun) monitor,suggestion: order commonalert metric and modify alertresoruce type value and add suggestion models climc (73ab024df, zhaoxiangchun) multicloud: set isEmulated as false for ecloud vpc (e96c43b21, rainzm) notify: be compatible with robots and webhooks (ad1d065ac, rainzm) notify: update receiver’s lang when update event occurs (8c717e1ae, rainzm) notify: set ModelManager in Receiver() (bb7b179c4, rainzm) notify: avoid duplication of notification names (78c16bfc0, rainzm) notify: enable filter of contact type ‘email’ and ‘mobile’ (fb6064fa2, rainzm) notify: loose phone number rules in updating receiver (9503546d0, rainzm) notify: loose mobile phone number matching rules (50c8636ce, rainzm) notify: exempt the administrator to create the receiver verification (3805119c4, rainzm) notify: set status after sending (9a9c9acb8, rainzm) notify: send websocket messages according to language preference (4f4538834, rainzm) notify: choose template in NotifyFilter (15cd89808, rainzm) notify: correctly filter those recipients who join the domain (60f2dfed8, rainzm) notify: panic for err (36853a6cf, rainzm) notify: fit correctly when send notification via contact (4f386fea1, rainzm) notify: check for changes before updating config (5bc847f05, rainzm) notify: inject domain info in ReceiverManager.FetchOwnerId (ac8f20ca1, rainzm) notify: repull subcontact after changing config (75998a132, rainzm) notify: avoid deadlock (54ed4b619, rainzm) notify: get the receiver corresponding to the role correctly (0de209502, rainzm) notify: be compatible with webconsole type hack (c89116938, rainzm) notify: return the result of the second attempt to execute the rpc call (4135b3729, rainzm) notify: add a time limit for resending notifications (75b375bc7, rainzm) notify: remote ‘lang’ filter when contact type is ‘mobile’ (97e9be3b2, rainzm) notify: be compatible with member’s permission changes (d8b92dd97, rainzm) notify: add index fro receiver_notification (3063a7fdf, rainzm) readme: rename OneCloud to YunionCloud (4c4c01562, Zexi Li) region: avoid azure detach disk failed (8d75e55b4, Qu Xuan) region: azure default subscription id (8eb682c4b, Qu Xuan) region: fix zstack delete server with local disks (9d93ddf9a, Qu Xuan) region: cloudaccount: allow only one sync func in flight (2940c350c, Yousong Zhou) region: avoid clean all rules when sync secgroups (18ba99747, Qu Xuan) region: aws not support create server with public ip (c49ceb0b9, Qu Xuan) region: optimized azure reset linux pasword (9aa8a3ab6, Qu Xuan) region: exported number of vpcs less than listed (298fe5d90, Qiu Jian) region: optimized secgroup rule sync (633734719, Qu Xuan) region: purge snapshot with not status check (b9c344e3d, Qu Xuan) region: AWS buckets in us-east-1 have null location (52e2051df, Qiu Jian) region: vpcpeering error message translation (d4878cc7a, lvyangyang) region: update tags status (fa9e5fd84, lvyangyang) region: avoid worker discarded after state unchanged (199a7d678, Qu Xuan) region: tag bugs fix -azure tags replace/refresh -tags action logs -忽略创建中主机的metadate同步任务 (9a10a3460, lvyangyang) region: optimized secgroup rule sync (6eec828ee, Qu Xuan) region: secgroup priority fix (2d5f1a982, Qu Xuan) region: add aliyun credit amount check (5fe6909c3, Qu Xuan) region: add huawei credit amount check (d144b893f, Qu Xuan) region: avoid stuck at http request (f9f0716da, Qu Xuan) region: avoid update tags task loop (0b324945d, Qu Xuan) region: aws elb backendgroup sync bugfix (6c2464047, tangbin) region: filter resource by classic vpc (de96f6e18, Qu Xuan) region: delete virtual nics with network (80d9f50cf, Qu Xuan) region: avoid cachedimage never be in sync when it deleted (b9f3e329a, Qu Xuan) region: avoid sync huawei unusable account (9cad6163d, Qu Xuan) region: optimized for qcloud prepaid instance delete (5e418ab66, Qu Xuan) region: allowed to manually refresh cloudimage (b056c0ce7, Qu Xuan) region: add option auto reconcile backup servers (8f542beac, wanyaoqi) region: check the global network situation when expanding the network (da89673f0, rainzm) region: avoid auzre request timeout (d3a531724, Qu Xuan) region: fix set bucket referer (6a480937b, lvyangyang) region: avoid panic when register service not work (da35a6358, Qu Xuan) region: aliyun support public ip (54ba8cfe4, Qu Xuan) region: sync cachedimage info (124f280fe, Qu Xuan) region: replace cloud tags (499f4624b, lvyangyang) region: delete not exist disk failed (70166a131, Qu Xuan) region: bucket size stats should not count invalid sizes of -1 (607c10bbe, Qiu Jian) region: obtain ProviderFactory correctly (b7b903ff6, rainzm) region: maintain compatibility with webhook notify (780a024e7, rainzm) region: server start check host memory is enough (678f2b3dd, wanyaoqi) region: fetch wires correctly (cbca7e518, rainzm) region: rds list with secgorups info (5e736e183, Qu Xuan) region: avoid public ip bandwidth is zero (e6b75b853, Qu Xuan) region: omit vpc quota check if vpc created by owner (9081b5dc4, Qiu Jian) region: change_ipaddr: retain eip_id on detach and attach (2c8c3b790, Yousong Zhou) region: host search by any ip (06fb5ac5e, Qiu Jian) region: pull the network correctly (3ad9cb0da, rainzm) region: set next stage for start vm (d56078d13, Qu Xuan) region: optimized aws cloudtrail sync (be065ec82, Qu Xuan) region: qcloud quota sync (e760263fa, Qu Xuan) region: aws rebuild instance os_arch mismatch fix (a8ded06ba, TangBin) region: skip cloud image sync error (e08f9a8f7, Qu Xuan) region: openstack network is regional (e3b975713, Qu Xuan) region: remove i18n fix \u0026 zone \u0026region name support i18n (1cca1b568, TangBin) region: aws sync vpc access mode bugfix (7178a2d3c, TangBin) region: cloudregion\u0026zone add namei18n (d097679e4, TangBin) region: support rds secgroup operation (dddfdbd5b, Qu Xuan) region: purge private cloud sku (1d320035b, Qu Xuan) region: apsara optimized (ca578cbb2, Qu Xuan) region: optimized azure rebuild root (7fb008c50, Qu Xuan) region: aws lb create tags param (50bc20b2a, lvyangyang) region: avoid not sync dns zone (6677ae43b, Qu Xuan) region: set redis reboot timeout to 30 mins (aa96cb748, tangbin) region: fix rds tag set error (60b3e5386, Qu Xuan) region: sku.meta use global proxy (a8cc140b5, Qu Xuan) region: optimized disk allocate sched failed log (d78f4a98b, Qu Xuan) region: avolid panic when list role’s policies (a75e6c906, Qu Xuan) region: avoid openstack change config error (78ef400b1, Qu Xuan) region: support peer secgroup (73fe4866d, Qu Xuan) region: private cloud sku create (09a039eb6, Qu Xuan) region: more details for get aws region error (0ffa3e514, Qu Xuan) region: aliyun request retry (1c6d6c90f, Qu Xuan) region: optimized qcloud error code (195793c88, Qu Xuan) region: redis change spec bugfix (a275b46a7, tangbin) region: add azure new region (12e0b3c90, Qu Xuan) region: check whether guest is nil (23328aa12, rainzm) region: network eip stats not correct (4f474ad8b, Qiu Jian) region: add huawei gpssd desc (b5a25b9c6, Qu Xuan) region: 避免从云上同步下来的主机，创建相同配置时network_id为空 (61c25a597, Qu Xuan) region: validate cloudaccount saml auth params (c05b75385, Qu Xuan) region: cloud provider filter by domain (bb1e1382a, Qiu Jian) region: valid qcloud hssd for system disk (c5c77b406, Qu Xuan) region: fix openstack instance os type (5674b5e5f, Qu Xuan) region: lbacl \u0026lbcert default share scope (b52a7d019, TangBin) region: lbbackend: better error reporting for finding influxdb info (754359b95, Yousong Zhou) region: fail to update network gateway (b92d3a93f, Qiu Jian) region: struct input for detach server network (da4cf61cc, Qu Xuan) region: cloud provider filter by domain_id ignore private case (72e805ab9, Qiu Jian) region: aliyun nas endpoint (b7b030fc2, Qu Xuan) region: add RequestRemoteUpdate for ESXiGuestDriver (72bc3b864, rainzm) region: set qcloud instance del timeout to 20m (bd9f961bd, Qu Xuan) region: scoped policy filter by project id (8ca6d176f, Qiu Jian) region: azure secgroup rule not allow with same priority and direction (bd99ad219, Qu Xuan) region: azure async task (f60c1835d, Qu Xuan) region: sync servers (ae060f234, Qu Xuan) region: including domain info in project-role results (3288fe9da, Qiu Jian) region: aws sts assume role fail break account initialization (51dfb8f73, Qiu Jian) region: do not change disk status on migrating (97864f96e, wanyaoqi) region: elb acl validate create data fix (4cdd768ce, TangBin) region: aliyun elb listener\u0026lbbg sync project (e19a022f6, TangBin) region: cert\u0026acl cache delete condition check (d91c7a62d, TangBin) region: guest to create input keep billing info (36102e97d, wanyaoqi) region: qcloud redis sync fix (f93e9f1cd, tangbin) region: fix change config forecast (2dc5b4791, wanyaoqi) region: remove unnecessary vpc validate create date error wrap (3f19bb1ef, TangBin) region: network create mask length validate (f3c8bede5, TangBin) region: show storage capacity to project users (a44eb70df, Qiu Jian) region: vpc create data cird validate (72321d011, TangBin) region: ctyun delete server bugfix (c50c47d65, TangBin) region: guestnetworks: use net calculated mtu (44b6391a6, Yousong Zhou) region: create vm with eip task fix (e2f1e5548, TangBin) region: add more usage metrics, e.g. ports.eip, servers.last_week, pending_delete_servers.last_week (762664fd0, Qiu Jian) region: apsara metrics fix (edae255a0, Qu Xuan) region: skus add cloudenv (cfc5fe9f2, TangBin) region: exclude network recommended for host when suggesting network for guest (c91ad4a70, rainzm) region: allow delete storagecachedimage with ‘cache_failed’ status (052a10f63, rainzm) region: eip_allocate_task: set eip status allocate_fail on task failure (719a9608c, Yousong Zhou) region: allow reset huawei system disk (332f752ae, TangBin) region: allow ipmi probe when probe fail (14bd5ea08, Qiu Jian) region: de-duplication when obtaining the number of hosts (052442ef6, rainzm) region: expand the bridge field (841ec1f25, rainzm) region: add usage cache, speedup response (3248f5725, Qiu Jian) region: remove i18n lock and logs (2749d2c70, Qiu Jian) region: guest associate eip checking fix (e728f62fd, tangbin) region: vpc sync external access mode fix (5d20bf280, TangBin) region: vpc usable fix (982db46e8, TangBin) region: aws create vpc with igw add defaultroute (d37ec27d7, TangBin) region: aws delete vpc skipped delete main route table (1cb6980b1, TangBin) region: aws vpc delete skip delete default secgroup (52ef2c2d5, TangBin) region: aws vpc delete related route table \u0026 internet gateway (6aa2fc581, TangBin) region: guest sync eip fix (2f075de8c, tangbin) region: sku list query print missing error info (687deac24, TangBin) region: aws create storage type fix (208adf8a0, TangBin) region: aws create root device name fix (fc64ea325, TangBin) region: vpc create validate cidr mask length (6591c5a75, TangBin) region: continue to sync the snapshots that are being created when syncing auto created snapshot (eb049034c, rainzm) region: vpc list usable fix (dbc1c7cdf, TangBin) region: allow ipmi probe in status unknown (79452d771, Qiu Jian) region: update translations (a537c0e39, TangBin) region: baremetal post update related server (9cd2cb779, Zexi Li) region: purge all instance snapshots when purging guest (33a702617, rainzm) region: avoid refreshing when checking the image (c24cb9092, rainzm) region: rigorously merge the network under wire (4ea606730, rainzm) region: save when canceling pendingUsage (b4011db91, rainzm) region: make project of instance snapshot be consistent with the instance (e6c908da2, rainzm) region: support project mapping (0b4e459e0, Qu Xuan) region: sync baremetal desc before do ipmi probing (39de7daae, Qiu Jian) region: add size and storageType for VMware InstanceSnapshot (be76d1eb4, rainzm) region: network reserved ip count not consider expiration of reserved ips (b581c6dab, Qiu Jian) region: optimized server stop code (7c6d4fddf, Qu Xuan) region: server login info\u0026 keypair import input parameter trimspace (b26249811, TangBin) region: remove code about getting service url (24be43090, rainzm) region: update google latitude and langtitude (dd3da3c4c, Qu Xuan) region: sku enabled (be63b02b9, Qu Xuan) region: ignore params.Disks when cloning vm from snapshot (da03a979f, rainzm) region: decouple region and etcd service (febd9b7f6, Zexi Li) region: gpu server change config use reserved resources (9c04a7bf3, wanyaoqi) region: wire sql fix (8b1b5c0f5, Qu Xuan) region: import rule error hint (ed9675a90, Qu Xuan) region: try to connect when new a SEcloudClient (6bc4baa9b, rainzm) region: openstack hosts sync (77f515a93, Qu Xuan) region: aws default account (b511db2e0, Qu Xuan) region: remove useless Environment (507523a52, rainzm) region: Remind that cloud account synchronization failed due to network synchronization failure (d105e0556, rainzm) region: purge instancesnapshot when purging guest (7b8043545, rainzm) region: ignore aliyun region not supported error (ec2e51a72, Qu Xuan) region: sanitize eip charge type on all callsites (82e297a55, Yousong Zhou) region: optimized openstack change config (20ca72cd4, Qu Xuan) region: optimized qcloud prepaid instance delete (691a5fc77, Qu Xuan) region: support openstack subnet allocation pools (792b4cdd8, Qu Xuan) region: convert eip with same project with vm (c79495dbf, Qu Xuan) region: nas owner id fix (1761b0fd6, Qu Xuan) region: sync account id (561f64267, Qu Xuan) region: restore password validate condition (06207c4a3, Qu Xuan) region: validate isolated devices on migrate (97a542890, wanyaoqi) region: openstack available zones (9ddf20744, Qu Xuan) region: wait more time for creating nas (f514514ea, Qu Xuan) region: attach network on register baremetal server (92727def0, wanyaoqi) region: optimized peer secgroup (c28f3f68a, Qu Xuan) region: azure instance data disk storage type (38507661f, Qu Xuan) region: avoid assign vm ip addr not effect (8a84c690c, Qu Xuan) region: temp url sign wrong (3a7d6fb14, Qu Xuan) region: vm list order by disk size (f0fe75250, Qu Xuan) region: fetch cached image from glance by default (13800c5d9, Zexi Li) region: fix backup server start task (d2a3d200f, wanyaoqi) region: azure reset windows os password (2d46a73d4, Qu Xuan) region: avoid timeout for waiting azure async task (ab8d1238c, Qu Xuan) region: lbcert\u0026lbacl releated listener count bugfix (2dcc1d610, TangBin) region: avoid panic when sync aliyun networks (8a52933a8, Qu Xuan) region: lb listener filter by acl_id (b3736ab20, TangBin) region: avoid resize azure disk error (64849240b, Qu Xuan) region: redis master zone empty fix (485cf8b3c, TangBin) region: elastic cache name is empty fix (db20769cf, TangBin) region: optimized vm account name code (fe9280421, Qu Xuan) region: region qcloud secgroup project id (d9d3fe26b, Qu Xuan) region: validate invalid character for password (c9ca2c875, Qu Xuan) region: change dbinstance sku sync info log to warn (f6abe165b, TangBin) region: optimized qcloud secgroup sync, only redis need secgroup be in same project (6183f3916, Qu Xuan) region: azure metric request path (9c7145fd5, Qu Xuan) region: avoid using LocalTaskworker in time-consuming synchronization of cloudaccount (c41d974d0, rainzm) region: dbinstance skus sync log level fix (43d4ddd82, TangBin) region: server skus add cloud_env (8dcd685e4, TangBin) region: remove default value of diskConfig.Medium (4f8d86cb1, rainzm) region: make cloudprovider sync worker configurable (afbc3cc8d, rainzm) region: network clean schedule cache after real deleted (b7835f979, Zexi Li) region: inspect invalid guest template (797039a39, rainzm) region: fix modify tags log (d2e5329f3, lvyangyang) region: huawei vnc protocal fix (4b171e163, TangBin) region: climc add base projects options (8686b77b8, TangBin) region: avoid network create failed when vpc is ok but wire not sync (857cc0d2b, Qu Xuan) region: elb cached acl sync (11d12ca7d, TangBin) region: avoid qcloud sync local disk error (39d86735f, Qu Xuan) region: add egress_mbps params for lb (52f3b6938, Qu Xuan) region: admin update without verification (7e054ee0f, rainzm) region: azure win os defualt user (794e7494b, Qu Xuan) region: avoid panic when sync resources (f3a514a41, Qu Xuan) region: allow delete resource which status is unknown (b7ed3a683, Qu Xuan) region: allow update rds account and database desc (b14f6be82, Qu Xuan) region: delete guest without ‘purge’ in GuestDetachScalingGroupTask (6f92fef69, rainzm) region: allow owner to operate snapshotpolicy cache (f642bc959, rainzm) region: make SScheduledTaskLabel implement IJointModelManager (8c07b3cb6, rainzm) region: code gen api error (54537e65c, Qu Xuan) region: wire get vpc releated hosts is empty (b7a8b37f7, Zexi Li) region: secgrouprule: set model manager (3a0303df6, Yousong Zhou) region: reserved name checking while create redis account (1cf8bfb0a, TangBin) region: sort excludedNets correctly (517390395, rainzm) region: pass up error from InitializeData (d5a815834, Yousong Zhou) region: optimized rds backup create (4ab1fe75c, Qu Xuan) region: use special localtask to run time-consuming provider synchronization task (702133be5, rainzm) region: apsara is private cloud (f27ab3cc7, Qu Xuan) region: avoid set multi resources tags failed (f9e212254, Qu Xuan) region: account arrears (f68afc4aa, Qu Xuan) region: bucket get referer fix (ad4c3a38e, lvyangyang) region: add all.servers.any_pool/all.hosts.any_pool metrics (5bb395854, Qiu Jian) region: allow member user get saml auth addr (880e09ee3, Qu Xuan) region: get provider name via GetProviderName (c6592cadc, rainzm) region: get provider name via GetProviderName (83f017a07, rainzm) region: tag list key case insensitive (909eeeb78, Qu Xuan) region: download cached image from source host before migrating (708db7b95, Zexi Li) region: auto sync cloudaccount resources (b574323cb, Qu Xuan) region: allow domain admin to obtain ssh private keys (835a31127, rainzm) region: huawei sync storages bugfix (797101e6c, TangBin) region: qcloud request retry (bd8cf2453, Qu Xuan) region: aws detach igw before delete vpc (80c3f6b2c, TangBin) region: avolid aliyun fin bucket list objects error (5a82bffeb, Qu Xuan) region: 避免OneCloud密码校验通过，公有云厂商密码校验不通过 (0da66b071, Qu Xuan) region,baremetal: pxe net reuse converted server access ip (2c7f8d93f, Zexi Li) region,baremetal: choose candidate network not according by types (e2201a80f, Zexi Li) region,climc: eips: rename arg name for requested eip addr (4a8eee0db, Yousong Zhou) region,esxiagent: allow host behind a nat (a5327c3ce, Qiu Jian) region,glance: list by os arch adapt to empty strings (8a82407f9, wanyaoqi) region,host: fix hot remove nic (d9137720a, wanyaoqi) region,host: sync status check block jobs (5bbf364f2, wanyaoqi) region,scheduler: fix netwrok predicate (ff9d051fa, wanyaoqi) region,scheduler: filter enabled skus (646a6e388, Qu Xuan) region,yunionapi,glance: using global proxy (57ae68949, Qu Xuan) scheduler: check candidate tag resource is nil (a7e40d36c, Zexi Li) scheduler: storage medium type should not exact match (#10191) (7a37232aa, Jian Qiu) scheduler: select resource unordered (6a80a1266, Zexi Li) scheduler: get candidates error more info (7d836f77a, Zexi Li) scheduler: storage predicate add actualCapacity filter (bdd112e80, Zexi Li) scheduler: sku by region and fill onecloud vpc networks (a78c565d4, Zexi Li) scheduler: clean expire cache before schedule (c0da4cc52, Zexi Li) scheduler: sku filter check zone if only prefer region specified (c87c2b384, Zexi Li) scheduler: fetch input network when specified (870db8e87, Zexi Li) taskman: use admin token if task userCred token expired (4043cd834, Qiu Jian) taskman: SSubTask: set model manager (da4c2dcaa, Yousong Zhou) telegraf: megactl raid add rebuild status (85f971a21, zhaoxiangchun) treewide: fix task error recording (c6970e9a2, Yousong Zhou) vpcagent: models: guestnetworks: accomodate change_ipaddr (9beb3706e, Yousong Zhou) vpcagent: ovn: stable dns A record value (25cd80884, Yousong Zhou) webconsole: trim api_server url if end with slashes (859e2078a, Zexi Li) wire: init and change status (e54d1e1cb, rainzm)  Bugfix (3)  monitor: 导出信息中添加全局字典配置 (839df9025, zhaoxiangchun) region: server change config rebase to sched task (999cc74bd, wanyaoqi) region: fix list by srever type normal (23e4a483d, wanyaoqi)  Build (13)  ansibleserver: use ansibleserver-base:v1.0.3 (ea0523e02, Yousong Zhou) ansibleserver-base: v1.0.3: add sshpass (88311daca, Yousong Zhou) cloudproxy: add dockerfile (361e20c33, Yousong Zhou) y18n: add apigateway (9766594da, Yousong Zhou) skip y18n-check for now (7042f97cd, Yousong Zhou) add y18n-check, y18n-gen (c786a56ef, Yousong Zhou) use centos-build:1.1-4 (139740613, Yousong Zhou) docker: add ModName (87e08c49d, Yousong Zhou) docker: move to Makefile.common.mk (7a01f72d6, Yousong Zhou) docker: align centos variant with the alpine one (d7804f6da, Yousong Zhou) docker: make target GOARCH/GOOS/CGO_ENABLED aware (3d7e5aaf9, Yousong Zhou) docker: remove GOFLAGS export (6c7a12448, Yousong Zhou) docker: use openvswitch 2.10.5-1 (ce86ed816, Yousong Zhou)  Chore (5)  host: options: use rundir /var/run/onecloud for sdnagent (1709aa2e1, Yousong Zhou) monitor: delete suggestion files (ad0c063fb, zhaoxiangchun) util: update centos build version to 1.1-3 (84d64df0c, wanyaoqi) utils: add deb build script (2d0b3c452, wanyaoqi) vendor: update google.golang.org/grpc@v1.29.1 (665de6d56, Yousong Zhou)  Climc (7)  add commands server-make-sshable, server-make-sshable-cmd (51cd8bd2f, Yousong Zhou) compute: add command server-sshable (f9cfee055, Yousong Zhou) add commands for cloudproxy (034bf55af, Yousong Zhou) costreports: fix bad struct tag (229c02472, Yousong Zhou) helper: add BatchCreate helper (027817f56, Yousong Zhou) helper: create call as a standalone method (85aa05f1f, Yousong Zhou) s/Keyworkd/Keyword/ (a56aca9cb, Yousong Zhou)  Cloudprovider (2)  add ErrAddressCountExceed (325623a70, Yousong Zhou) ICloudNic: add methods for secondary addresses (d0f64150c, Yousong Zhou)  Cloudproxy (18)  agent: no collision between ports of ssh conn and forwards (cb35bc306, Yousong Zhou) agent: refresh every 11 seconds (96bcefd50, Yousong Zhou) agent: ssh: wait ssh conn state while passing it out (0a3136519, Yousong Zhou) test proxy endpoint connectivity and remote config (50395f7f7, Yousong Zhou) agent: more verbose log for ssh connect failure (20f04d2fc, Yousong Zhou) agent: wait a while on connect error (2cfdb0a08, Yousong Zhou) forwards: show details for fwd returned from create-from-server (92a4bebb2, Yousong Zhou) proxy_endpoints: create-from-server: allow specify name (f8b4d799a, Yousong Zhou) agent: return when ctx is Done (3407b98a8, Yousong Zhou) agent: avoid stallment caused by client timeout (2bda95c62, Yousong Zhou) agent: ssh: cancel on return from Start (ed061d082, Yousong Zhou) add metadata model (8701114f7, Yousong Zhou) agent: fix possible invalid memory access (ba7fe6f54, Yousong Zhou) agent: use yunion.io/x/onecloud/pkg/util/ssh (4b01916e6, Yousong Zhou) forwards: more list filter conditional keys (148481f03, Yousong Zhou) apis: add ForwardDetails definition (6ec27d22b, Yousong Zhou) agent: refresh bindAddr, advertiseAddr when needed (4c2c0c3d2, Yousong Zhou) initial version (5eefa38f8, Yousong Zhou)  Code Refactoring (16)  apis: compute: remove EIP_CHARGE_TYPE_DEFAULT (a48d0ab7f, Yousong Zhou) climc: use shell.NewResourceCmd for notice (59218fa31, rainzm) climc: remove dependence for yunion.io/x/pkg/cloudcommon/db (8e128a986, rainzm) climc: webconsole: use helper methods of response struct (db8307822, Yousong Zhou) host: host_health: do not import guestman (1e4c294fd, Yousong Zhou) host: startvm: for compat (52c3e93af, Yousong Zhou) host: startvm: nic_speed: use raw string (d4093e215, Yousong Zhou) host: startvm: add QEMU_CMD_KVM_ARG (dae06cb50, Yousong Zhou) host: hostdhcp: do not import guestman (50e681064, Yousong Zhou) host: metadata: eliminate ref of guestNic (de2f1ec3b, Yousong Zhou) hostman: metadata: eliminate import of guestman (6dce7d8eb, Yousong Zhou) hostman: use metadata.DescGetterFunc (38b6e011e, Yousong Zhou) notify: add StartSubcontactPullTask for receiver (aabb20058, rainzm) scheduler: remove unused k8s predicates code (dbfd5a8e5, Zexi Li) webconsole: api: add helper methods for response struct (4cd1d4ba7, Yousong Zhou) webconsole: use structured response (c7d099b6f, Yousong Zhou)  Db (8)  add GetItemDetails (2e8239920, Yousong Zhou) interface: manager: add HasName() method (1d25083bf, Yousong Zhou) standalone_anon: empty result for name query (8e2c8feab, Yousong Zhou) add standalone_anon (3d53f8dab, Yousong Zhou) add manager methods appliers (6bf5be5b0, Yousong Zhou) virtualjoint: add FilterById on RowId (6c65eb1ea, Yousong Zhou) modelbase: BatchCreateValidateCreateData: return orig data (89361aee2, Yousong Zhou) check funcs required by dispatcher (805002005, Yousong Zhou)  Db_dispatcher (3)  allow batch create for models without name (b271ab463, Yousong Zhou) delay compute to where needed (a57a63bf5, Yousong Zhou) remove unused GetExtraDetails call (fd98674c9, Yousong Zhou)  Etcd (1)  fix “fatal error: concurrent map writes” (b424a8f67, Yousong Zhou)  Feature (7)  add a standalone dhcp relay service (baabc8290, Qiu Jian) climc: add policy-clone command (c03325975, Qiu Jian) climc: policy save data into file (56d583e90, Qiu Jian) cloudcommon: split opslog table (ab75c8f93, Qiu Jian) compute: allow live migration with checking Host CPU modes (566012589, Qiu Jian) keystone: user add language attribute (5cf5576e0, Qiu Jian) region: support AWS organization (2da59aa89, Qiu Jian)  Features (186)  change go version from 1.12 to 1.13 in go.mod (1ddebfff5, rainzm) add keep_tmpdir options (cfa426bc1, rainzm) add nas sync (0343daa1f, Qu Xuan) support EventNotify (755e00750, rainzm) download the role to tmpdir not system role dir (6d7764550, rainzm) call EventNotify when event occurs (e991bc345, rainzm) ansibleserver: update file_reop version in dockerfile (bf839f9ad, rainzm) ansibleserver: respect keepTmpdir when running ansibleplaybook v1 (7b0f45261, rainzm) ansibleserver: add reference and instance (c95f064d1, rainzm) apigateway: differentiate error messages when logging in (4762afc32, rainzm) apis: region: names for guest forward API (447770dfc, Yousong Zhou) apis: add host forward request/response struct (e7f618228, Yousong Zhou) apis: add const VPC_OVN_ENCAP_COST (e201573d6, Yousong Zhou) appsrv: Application: add Stop method for shutdown behaviour (771824d30, Yousong Zhou) arm64,build: arm 编译时,不编译 rbdcli (31363d8d0, Zhang Dongliang) baremetal: support H3C oem baremetal (b5813e81b, Zexi Li) build: make multi arch manifest docker image (7c6bc61dc, Zexi Li) climc: add cloud-account-preparenets-vmware command (9d048f8f9, rainzm) climc: add k8s component minio and thanos operate subcmd (2c5671545, Zexi Li) climc: servers: add server forward commands (549ae15a4, Yousong Zhou) climc: wires: allow filter by bandwidth (9844d1c29, Yousong Zhou) climc: k8s cluster addon add enable native ip alloc option (347d9ad1c, Zexi Li) climc: print json object support array (47a2f5a9d, Zexi Li) cloudcommon: determine the notification template based on the user’s language preference (2eebef810, rainzm) cloudcommon: add NotifyWithContact (66f373d07, rainzm) cloudcommon: opslog: log joint models (456ed5f74, Yousong Zhou) cloudcommon: db: jointbase: add list:“user” for RowId (64dc5219f, Yousong Zhou) cloudcommon: send message with mobile in NotifyWithTag (bab03027c, rainzm) cloudcommon: send it directly if there is no template corresponding to the topic (87a8bc1a0, rainzm) cloudcommon: allways send webconsole notification via contacts (a8ea8b10c, rainzm) cloudcommon: expand notifyclient (80092443a, rainzm) cloudcommon: set TaskNotifyUrl in GetTaskRequestHeader (e671a218e, rainzm) cloudcommon: add rolecache (7dba32d99, rainzm) cloudid: notify clouduser created (fc0f05286, Qu Xuan) cloudid: add azure saml (075251258, Qu Xuan) cloudid: support aliyun saml auth (3cf6d2f32, Qu Xuan) cloudproxy: add GetDetailsLastseen for forwards (8d7a991d6, rainzm) db: progressive inspection when determining the required scope (167a65cd0, rainzm) devtool: add ScriptApplyId fro ScriptApplyRecord (0078bde42, rainzm) devtool: check sshable before applying ansible playbook for server (a1f508929, rainzm) devtool: makes the process of installing the agent more rigorous (769425f58, rainzm) devtool: add script (abd7771c7, rainzm) docker: inject playbook and telegraf installation packages (c043af3ae, rainzm) esxi: fetch vmware network configuration info (51167aa8c, rainzm) esxi: update guest os info (37c1ba363, rainzm) esxi: change parameters for NewDiskDev and avoid unnecessary deploy (6cb91fdea, rainzm) esxi: support iso when creating vm (dd7524122, rainzm) esxiagent: determine vs by bridge and network when creating vm (639e7b16f, rainzm) fetcherfs: make rpm and deb package (d518257c3, Zexi Li) glance: support backend storage s3 (6e2894df2, wanyaoqi) host: startvm: set vpc nic mtu (319d2cc56, Yousong Zhou) host: kvm: add GetVpcNIC (eb6febcc1, Yousong Zhou) host: add option OvnEncapIpDetectionMethod can-reach:xx (bbc511f6d, Yousong Zhou) host: options: add option SdnSocketPath (7b55e756e, Yousong Zhou) host: guestman: add {Open,Close,List}Forward handler (daf863bd4, Yousong Zhou) host: startvm: add nic_mtu shell func (0139611d1, Yousong Zhou) host: add forwarder.proto (d07bece95, Yousong Zhou) host: go generate forwarder api (e8ec0718c, Yousong Zhou) host: forwarder: add NewClient func (925cc31b4, Yousong Zhou) host: adjust qemu args to support aarch64 (1cd6cf50a, Zexi Li) host: metadata: make vpc aware metadata handler (43215c2ad, Yousong Zhou) host-deployer: add deploy driver libguestfs (948f926bf, wanyaoqi) hostman: options: add sdn_allow_conntrack_invalid (bf9ecdfd1, Yousong Zhou) keystone: add options to set admin and domain admin role to notify (1b96a290d, rainzm) keystone: support alertNotify when abnormal login occur (f41c840d8, rainzm) keystone: support filter ‘project_domain_id’ in role_assignments (399bce619, rainzm) keystone: more specific error return during authentication (46a131233, rainzm) keystone: add GetDefaultAdminSession (c22f22189, rainzm) keystone: support projectDomainId in SAssignmentManager.FetchAll (afbb4a047, rainzm) keystone,apigateway: return a readable message when the user is locked or disabled (9c4fd94d7, rainzm) locale: update (851b36d74, rainzm) mcclient,itsm: modify itsm mcclient rpc func (8881be5a2, zhaoxiangchun) monitor: influxQuery add P95 reduce (1b71ba64b, zhaoxiangchun) monitor: monitor add trigger value when send notify info (ab33ae692, zhaoxiangchun) monitor: add alert slience time and modify scoperesource FetchUniqValues func (54271b78a, –global) monitor: alert policy filter by res_type (3fa8520c5, zhaoxiangchun) monitor: support monitor overview influxdb query pass through (3f51fa67e, zhaoxiangchun) monitor: meter相关报警内容处理 (36ed09cd1, zhaoxiangchun) monitor: Lists the records that are currently alarting (7e9dfe0f9, zhaoxiangchun) monitor: add global alertrecord (c39e6778e, –global) monitor: support create nodata alert from web (805ea5c0f, zhaoxiangchun) monitor: alert add silent period param (be09fc046, zhaoxiangchun) monitor: alert record add silentPeriod info (508c8b926, zhaoxiangchun) monitor: monitor alert policy add mobile notify (df7afc852, zhaoxiangchun) monitor: query reduce percentile (2b22f227a, zhaoxiangchun) monitor: add nodata alert policy (4888f7d81, zhaoxiangchun) monitor: add metric description (33074ba81, zhaoxiangchun) monitor: get today alerting resource info (376d18e5e, zhaoxiangchun) multicloud: add snapshots list for ecloud (e3be35923, rainzm) netutils2: add MyIPTo (1c39030ed, Yousong Zhou) notify: filter receivers who join the project under the domain where the requester is currently located (c1ef5f28f, rainzm) notify: user cmdline helpler for climc notify-receiver-xxx (e8a085a94, rainzm) notify: exempt the administrator to update the receiver verification (66b6a2f62, rainzm) notify: show only users under the domain in the recipient details of the message (b31f69926, rainzm) notify: delete the notification 1 month ago and remove the data migration (094b85773, rainzm) notify: add params for create notification (f9fa70d32, rainzm) notify: add template about topic USER_LOGIN_EXCEPTION (1669947a5, rainzm) notify: add intellij-get for receiver (6ed0b5e9f, rainzm) notify: send notifications of different templates according to language (ebc32e693, rainzm) notify: clean data for receiver_notifications (b292982fc, rainzm) notify: change default verify expire interval 5m =\u003e 2m (d28a12d6e, rainzm) notify: be compatible with mobile in event notify (15c506086, rainzm) notify: 管理后台新建的联系人，手机号和邮箱无需进行校验 (956850ae3, rainzm) notify: add local template (f265be1c5, rainzm) notify: add webconsole in enabled contact types (8aeda8f84, rainzm) notify: support international mobile (bdb6df6e4, rainzm) notify: verification email style optimization (304248ce1, rainzm) notify: remove disk’s event notify for now (1f8ed8724, rainzm) notify: add default area code for mobile (5f9cee49b, rainzm) notify: permit admin sending notification via contact (3ba52355b, rainzm) notify: add subscription in notify (50be5c5f7, rainzm) notify: mandatory update of VERIFY and USER_LOGIN_EXCEPTION templates (cafe1d7b5, rainzm) region: guest: add fetchGuestNICs method (8f5486627, Yousong Zhou) region: bucket list uploads (ef9d2df3c, lvyangyang) region: azure tags (351e2cc38, lvyangyang) region: add instance_snapshot for regionquota (d1ed0ec67, rainzm) region: add options DeleteSnapshotExpiredRelease (17f04c338, rainzm) region: set pendingUsage before creating instance snapshots (4b7313976, rainzm) region: make DeleteSnapshotExpiredRelease applies to postpaid vm (ebb29b21e, rainzm) region: send webhook server_create when canceling pending delete (bf378452a, rainzm) region: distinguish between pending delete and delete notification (81588c92a, rainzm) region: networks: add getMtu method (a0ad62711, Yousong Zhou) region: add server delete options (ffc1dd2cb, Qu Xuan) region: disks and eip delete with server (6081595ad, Qu Xuan) region: add tags implement (66009c332, lvyangyang) region: nat op support (18445ba43, Qu Xuan) region: guest: add {open,close,list}-forward API (1427d1b3a, Yousong Zhou) region: add SCloudregionResourceBase for SInstanceSnapshot (e4cd054b7, rainzm) region: guestdrivers: guest forward open, close, list methods (4dd394580, Yousong Zhou) region: multilingual timer description (377177cfd, rainzm) region: nat op support (9dd3bb218, Qu Xuan) region: filter schedtags from cloudprovider_id (6ec0b38b1, rainzm) region: add wire info in HostNetwork details (16e734687, rainzm) region: virtually display the esxiagent of the cached image as a host (791f94219, rainzm) region: host list order by server count (0cd7fdd8b, Zexi Li) region: stop guest before freeze (3c7f2ff16, wanyaoqi) region: disable synchronization of some special storage (6a9f2a416, rainzm) region: server sku os_arch \u0026 cpu_arch checking (0ac88cfe0, tangbin) region: server list add parameter eip_associable (2d19d961c, TangBin) region: support synchronize vmware’s network configuration to the local (d9e75aaa0, rainzm) region: add test for CloudaccountManger.PerformPrepareNets (292716b26, rainzm) region: support sync skus by cloudregion (04fa96d9c, TangBin) region: larger suggest network and more complete vlanid (fee218c59, rainzm) region: support sync skus by cloudregion (c862f0699, TangBin) region: add host count when list wires (68c621616, rainzm) region: support Ecloud (readonly) (34cbe2d55, rainzm) region: support merging mutli wires to a wire (c4dbd9bb5, rainzm) region: support merging wire (0aa5c2ef1, rainzm) region: sync Esxi HostWire for esxi host (f654636e5, rainzm) region: regiondriver: add methods on eip charge type (555080366, Yousong Zhou) region: allow to update account with provider vmware (12d1aa805, rainzm) region: save image for public cloud (a1a025eec, Qu Xuan) region: azure rds (378b7d39b, lvyangyang) region: add ecloud monitor metric (1883e7259, zhaoxiangchun) region: allow prepare nets for existed cloudaccounts (9a23c9da6, rainzm) region: add wire level for preparing network (a7eadb54e, rainzm) region: add bucket cloud tags support (2edde62fc, lvyangyang) region: add zone disk capability api (22cc784a4, TangBin) region: 多云 bucket website.cors,referer 配置 (8a9ec04f9, lvyangyang) region: huawei recovery new rds (1f91cc0f1, Qu Xuan) region: add instance storage capability (f4df3223b, Qu Xuan) region: add list filter server type (64e844425, wanyaoqi) region: increase the log for debugging when syncing cloudimage (74874d35d, rainzm) region: wire: allow filter by bandwidth (104e5c5c0, Yousong Zhou) region: search server by substr of ip or mac (639d05dd4, Yousong Zhou) region: set qcloud bucket policy (1591f0ab8, lvyangyang) region: set metadata for guest with agent installed (4ea920466, rainzm) region: return forwardDetails when query server sshable (fb1fb906f, rainzm) region: networkaddresses: filter by guest ids (9dfea3835, Yousong Zhou) region: options: allow setting default vpc external access mode (984dc8423, Yousong Zhou) region: cloudregion add disk capability api (71ee5d851, TangBin) region: aws elasticahe (336135b66, lvyangyang) region: optimized public image sync (7bac9144e, Qu Xuan) region: export user tags support virtual resources (2675f75c8, wanyaoqi) region/glance: update cpu arch apis (3f8e46943, wanyaoqi) region/schedtag: schedtag support set multi resources (3edf8c1d0, Zexi Li) scripts: add export DOCKER_BUILDKIT=1 (e52da6ca5, rainzm) scripts: add more reasonable title for cherry pick PR (c5f94e13a, rainzm) scripts: add prompt of hub version (d6d108204, rainzm) suggestion,apigateway: add analysispredict climc (b0293b11f, zhaoxiangchun) suggestion,mcclient: add suggestsysalert-delete climc (eeb77e4c3, zhaoxiangchun) util: support uint64 in bitmap (ed8a88fc5, rainzm) vpcagent: export subnet mac gen funcs (65220a6f5, Yousong Zhou) vpcs: list: add order_by_network_count (3b9412056, Yousong Zhou) webconsole: add huawei vnc support (512929674, TangBin) webhook: send webhook notification when c/d loadbalancerlisterrule (93f98d55a, rainzm)  Guest_deploy_task (1)  log other deploy details with i18n (827c298bc, Yousong Zhou)  Guests (3)  sshable: fix breaking out from wait loop (50f0ca529, Yousong Zhou) sshable: wait and retry for newly created forward (bfe665bbf, Yousong Zhou) sshable: log error should unmarshal fail (b242af75f, Yousong Zhou)  Hostman (2)  ovn: do not set external_ids:iface-id for backup (4e19feccc, Yousong Zhou) metadata: add handler for /local-sub-ipv4s (9f3136541, Yousong Zhou)  Keystone (1)  reword error messages (a012496cb, Yousong Zhou)  Locales (4)  generate (8a922ad81, Yousong Zhou) zh-CN: add some translations (ac1232f94, Yousong Zhou) regenerate locales.go (eb6be534e, Yousong Zhou) zh-CN: regenerate messages.gotext.json (719f91902, Yousong Zhou)  Mcclient (3)  models: Server: add fields for eip and nics (b7f200467, Yousong Zhou) Sshkeypairs: add FetchPrivateKey (fc7fe4cca, Yousong Zhou) auth: add SessionCache (0440f4a30, Yousong Zhou)  Multicloud (12)  qcloud: fix instancenic (d7a11d1ab, Yousong Zhou) qcloud: add ptr deref func (77af00ec7, Yousong Zhou) qcloud: add apiDomainByRegion (cd4d0a27b, Yousong Zhou) qcloud: add getVpcClient (101abde5a, Yousong Zhou) qcloud: add getSdkClient (68b8b7f7c, Yousong Zhou) aliyun: instancenic: handle InvalidOperation.Ipv4CountExceeded (d14a35fa2, Yousong Zhou) aws: subaddress management (8042a7429, Yousong Zhou) aws: instancenic: add interface id attribute (f65650458, Yousong Zhou) aliyun: instancenic: secondary address management (33fdcda95, Yousong Zhou) ICloudNic: add GetId() (ab7ad856b, Yousong Zhou) ICloudNic: fix GetMAC() (1569966aa, Yousong Zhou) aliyun: make getSdkClient proxy aware (ff525a959, Yousong Zhou)  Networkaddresses (6)  handle cloudprovider.ErrAddressCountExceed (18ac0205b, Yousong Zhou) do server sync for on premise servers (374b96553, Yousong Zhou) disallow batch create for external resources (b0f958e8a, Yousong Zhou) cloudprovider support (4c04e48ac, Yousong Zhou) add to nics field of guest desc (e3b55426a, Yousong Zhou) add parent_type guestnetwork (1476f5913, Yousong Zhou)  Networks (4)  server_type: do not allow update (c3fdda2ac, Yousong Zhou) usedAddressQuery: rename with baseq, ownerq, retq (2306fbb6f, Yousong Zhou) split getUsedAddressQuery as method of each manager (4ec791f03, Yousong Zhou) fix typo in log (10042037a, Yousong Zhou)  Optimized (1)  region: qcloud bucket policy set and get operation (addf12f43, Qu Xuan)  Others (34)  avoid log loss when token expired fix #10738 (84820637f, Qu Xuan) fix wire status close #10737 (3e16bf9d0, Qu Xuan) response scope-specific metrics (c2d3355ba, Qiu Jian) fix(monitor):修复监控总览图标钻取后返回数据异常的问题 (36bdc18a8, zhaoxiangchun) (fix) region: qcloud elb https listener create fix (07eea2f70, tangbin) fix(region) qcloud multi zone instance sync account fix (8d153bcf2, tangbin) feat(region) qcloud redis support multi zones (678bcf75c, tangbin) host 编译跨平台兼容 (18d8292f1, Zhang Dongliang) copyright update brand_cn\u0026brand_en fix (43a879ccb, tangbin) infos copyright add brand_en\u0026brand_cn (b5958bb6b, tangbin) redis update tags fix (6ae4883db, tangbin) aws change flavor fix (f4e98cc71, TangBin) server create sku parameter fix (cfaadc29c, TangBin) change os_arch_arm to os_arch_aarch64 (bbaf32a47, tangbin) update vendor (d9229ef16, rainzm) imagetools NormalizeImageInfo update (80a235e3a, TangBin) warp aws err with errors.Wrap (7b7a7a561, TangBin) add cost report module (cc175615f, bistuzx@163.com) server skus filter by mem size fix (9c7d6f54d, tangbin) loadbalancer add lb purge validate (f6a665260, tangbin) add budget set alert log (54d4356d3, bistuzx@163.com) Automated cherry pick of #9752: feature(region): sync cloud tags to local user tags (#9753) (7e60397c1, Jian Qiu) fix reservation columns (66d2820f0, bistuzx@163.com) add cost\u0026prepaid_cost to reservation (fe1e9ff93, bistuzx@163.com) fix budget import format (802f2d9f4, bistuzx@163.com) fix reservation import format (2fbe01505, bistuzx@163.com) add meter budget\u0026event\u0026reservation module (3d82632e9, bistuzx@163.com) .circleci: use centos-build:1.1-4 (f31a2175c, Yousong Zhou) scripts/docker_push.sh: minor polishments (ac713700a, Yousong Zhou) scripts/docker_push.sh: use toplevel Makefile target (e778b99b7, Yousong Zhou) scripts/coverage.sh: detect use of “-mod vendor” (57b4cec5d, Yousong Zhou) update vendor (4895175a5, Qiu Jian) update vendor (e31abb6f0, Qiu Jian) 负载均衡ACL\u0026证书增加项目和共享 (18a185aec, TangBin)  Procutils (4)  WaitZombieLoop: remove unneeded info request (9da0b2e7d, Yousong Zhou) WaitZombieLoop: less verbose iota (6acc3e8cc, Yousong Zhou) WaitZombieLoop: use const str “1” for my pid (970aa949a, Yousong Zhou) add WaitZombieLoop (26183d0de, Yousong Zhou)  Refact (1)  region: resource tags (66b97aa11, lvyangyang)  Region (18)  guests: sshable: more compact make-sshable-cmd (c63e05d92, Yousong Zhou) guests: sshable: add GET /servers//make-sshable-cmd (554e03fde, Yousong Zhou) guests: sshable: add POST /servers//make-sshable (d4451640a, Yousong Zhou) guests: sshable: add field sshable_last_state (db0e28434, Yousong Zhou) guests: sshable: refactor for reusability (4ab5c2c29, Yousong Zhou) guests: sshable: only check sshable state when in running state (042a57281, Yousong Zhou) guests: sshable: return early on sshable=true (188cac1fd, Yousong Zhou) guests: sshable: more friendly fail reason for proxy_forward (59e224518, Yousong Zhou) guests: add GET /servers//sshable (05545a0e4, Yousong Zhou) apis: route: add nexthop type “IP” (97433ccfa, Yousong Zhou) fix setting nic index (1b07ee798, Yousong Zhou) attachnetwork: allow attach by network name (90fd8c868, Yousong Zhou) usages: add [{all,domain}.]networks etc. (b2980ce2b, Yousong Zhou) wires: totalCountQ: filter networks by scope and owner (7a498b88f, Yousong Zhou) usages: fix field name of vpcs for system scope (098f99314, Yousong Zhou) fix error msg for invalid wire_level_for_vmware (a90a26a4e, Yousong Zhou) networks: attach func use struct args (97dbd1899, Yousong Zhou) networkresource: fix signature of GetExtraDetails (744423498, Yousong Zhou)  Regions (1)  lbagents: move pb update/create as mcclient module method (dfc168017, Yousong Zhou)  Schedtags (1)  add ListItemExportKeys (cc00e58f5, Yousong Zhou)  Treewide (1)  wait possible zombies (a8857a34a, Yousong Zhou)  Util (1)  ssh: add ConnectContext method for ClientConfig (e4662b77f, Yousong Zhou)  Validators (1)  set xx_id when possible (9b13becd1, Yousong Zhou)  Vendor (5)  add tencentcloud-sdk-go vpc (00da68cb1, Yousong Zhou) bump alibaba-cloud-sdk-go to v1.61.684 (fe6714b28, Yousong Zhou) add github.com/aliyun/alibaba-cloud-sdk-go/services/ecs (3bbaedaa7, Yousong Zhou) bump yunion.io/x/pkg (02315bdd8, Yousong Zhou) bump yunion.io/x/sqlchemy (d67eeac5d, Yousong Zhou)  Vpcagent (9)  ovn: fix port match condition formation (840273c18, Yousong Zhou) ovn: fix qos for eip upload (eee6e59b8, Yousong Zhou) ovn: add ClaimRoutes (0a929ed33, Yousong Zhou) ovn: resolveRoutes from API models (2ec4a1cec, Yousong Zhou) models: annotate guest with guestnetworks (3c3cd4c59, Yousong Zhou) models: add route tables (f7c4e38e1, Yousong Zhou) ovn: make aware of sub ips (929fa87c5, Yousong Zhou) models: join network addresses (be478c443, Yousong Zhou) apihelper: filter by cloud_env=onpremise (d96d51603, Yousong Zhou)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n42 commits to cloudpods-operator - v3.7.0 since this release.\nApigateway (2)  cors: rename spec field name to corsHosts (b0cbe70, Yousong Zhou) allow setting cors_hosts (5ddbf03, Yousong Zhou)  Bug Fixes (15)  policy description supports i18n (032591f, Qiu Jian) role-policy-create many create extra role-policies (5e9f0dc, Qiu Jian) update vendor (05059bd, Qiu Jian) default policy name should be separated by dash (39a2f9c, Qiu Jian) skip create policies error (9f8c24f, Qiu Jian) fail to init policy (e4eb386, Qiu Jian) update vendor (b487d58, Qiu Jian) make system roles private (58d2937, Qiu Jian) access_url of common service config (55c2d57, Zexi Li) cloudmon: crond commond fmt err (bf42fd5, zhaoxiangchun) glance: comment s3 switch logical (6951110, Zexi Li) monitor: system alert policy cancel description update limit (c527f29, zhaoxiangchun) monitor: raid卡监控规则status过滤参数调整 (8c6d8a4, zhaoxiangchun) operator: modify crontab default interval (c7a5a15, zhaoxiangchun) telegraf: fix collect disk measurements (1aab711, wanyaoqi)  Bugfix (1)  suggestion: fix err when suggestion syncConfigMap (958d441, zhaoxiangchun)  Chore (2)  monitor: add new service: suggestion (40ead5a, zhaoxiangchun) vendor: make mod (99f2910, wanyaoqi)  Defaults (1)  using openvswitch image of tag 2.10.5-1 (1682469, Yousong Zhou)  Feature (1)  keystone: add default member role (f37d918, Qiu Jian)  Features (11)  deploy minio (a84723b, Zexi Li) init devtool script and ansible reference for devtool (730c215, rainzm) build: support multi arch docker image (7099dfe, Zexi Li) cloudmon: add cloudmon alertrecord crontab (a8c841c, zhaoxiangchun) component: remove kube-rbac-proxy (aece1da, rainzm) framework: support multi zone (3915d94, wanyaoqi) glance: add minio support (3a80810, wanyaoqi) host: allow setting ovnEncapIpDetectionMethod (eb09d88, Yousong Zhou) host-deployer: update host-deployer spec (5b718db, wanyaoqi) k8s: enable kubeserver (e104bf9, Zexi Li) operator: add nodata alert policy (0abeaf1, zhaoxiangchun)  Others (6)  update vendor (5b8650f, rainzm) update vendor (b5c3e21, Qiu Jian) Add cloudproxy (842686c, Yousong Zhou) update vendor (db410a7, Qiu Jian) feat:(monitor): update system monitor alert when alert has diff info (9121222, zhaoxiangchun) update vendor (61f46bf, Qiu Jian)  Vendor (2)  bump to current tip of release/3.7 (acfe470, Yousong Zhou) update yunion.io/x/master to current release/3.6 (c6a629e, Yousong Zhou)  Web (1)  add docs image (0edeaff, Zexi Li)   cloudpods-service-operator 仓库地址: https://github.com/yunionio/cloudpods-service-operator\n1 commits to cloudpods-service-operator - v3.7.0 since this release.\nFeatures (1)  build: support arm64 build (1b8385a, Zexi Li)   dashboard 仓库地址: https://github.com/yunionio/dashboard\n847 commits to dashboard - v3.7.0 since this release.\nBug Fixes (242)  vpc create missing doamin params (c370a636d, Qu Xuan) nat misc (a12734226, Qu Xuan) huawei price and nat sku scope params (c190b1f63, Qu Xuan) init cloudshell in apigateway (c1a0c51b9, Qiu Jian) 修复工单回复状态及参数问题 (395851c0d, mj) support prepaid vm change config (f9090d188, Qu Xuan) close socket when close cloud shell (dcd69c06f, Qiu Jian) resolve conflict (e660708cd, Qu Xuan) 修复工单记录数及状态 (9757c0ad8, mj) init xterm for cloudshell, needs more work (fbf3d0be5, Qiu Jian) init xterm for cloudshell, needs more work (c98eca20e, Qiu Jian) aliyun support public ip (259d3020e, Qu Xuan) format gb for nas capacity (37419f484, Qu Xuan) access group details (dd2fbfdcb, Qu Xuan) misc fixed for cloudbox (44385e40b, Qiu Jian) add account filter (f2538bbe3, Qu Xuan) add region filter (1fc642e60, Qu Xuan) eip associate support nat (858c7c612, Qu Xuan) nat params (88799b0d4, Qu Xuan) nat filter and details (aecf72e69, Qu Xuan) support peer secgroup (4d65ce7d4, Qu Xuan) nat price issue (d56dd264a, Qu Xuan) remove public operation (94b78693b, Qu Xuan) trans server status (6e23e7009, Qu Xuan) only aliyun eip support bind nat (274db611f, Qu Xuan) add azure saml auth (2d8766db2, Qu Xuan) add nat domain permission (8876ed8fc, Qu Xuan) secgroup cache policy (5af109c97, Qu Xuan) secgroup scope (70ce641e6, Qu Xuan) capacity (369e8c32c, Qu Xuan) tooltip for peer secgroup (58d1ada61, Qu Xuan) nas misc fix (1ac8dc743, Qu Xuan) nas create fix (71872107c, Qu Xuan) add OWNERS (d192ec0b9, Zexi Li) action policy (0c0ee0518, Qu Xuan) add log (be604dea9, mj) typo for filter key (9c1d09dfa, Qu Xuan) add action log filter (23df001f7, Qu Xuan) #7303 云账号-订阅-区域 全量同步报错 (1f1602c05, mj) nas policy (b26df510d, Qu Xuan) action log (66021f4f5, Qu Xuan) add tooltip for disk create (36e40719a, Qu Xuan) add color reverse (6297455f8, Qu Xuan) lable format (b69616b7d, Qu Xuan) validate secgroup delete (713654aa9, Qu Xuan) no skus when change multi vm config (07066457f, Qu Xuan) #7298 vmware虚拟机主机快照没有显示大小 (0b9f4035d, mj) google disk max size limit (106830e0e, Qu Xuan) add color show for input (c001568de, Qu Xuan) add filter (151183d97, Qu Xuan) private sku filter params (b55f14404, Qu Xuan) nat details (a5f69f718, Qu Xuan) show end time (5e26d14f0, Qu Xuan) 3.7: #6839 change date delay 1 hours (7166d5f0b, mj) 3.7: #3035 域管理员能够看到本域下其他用户提交的工单 (0a9c3d601, mj) 3.7: #6926 规则配置操作日志中类型应该翻译成中文 (9ae79fb7d, mj) 3.7: const to let (c4003d6e4, mj) 3.7: #7241 创建虚拟机时操作系统切换到“vmware平台镜像”中linux后Application-\u003eLocal Storage-\u003eoc_selected_image中imageOS不应该仍是CentOs (1a9965440, mj) 3.7: change currency fetch data (4cb77dbf8, mj) 3.7: #6885 切换二级菜单账单类型不应该发生变化 (c2f50d536, mj) 3.7: fix style (eb03cd3e5, mj) 3.7: fix style (e7e44839c, mj) 3.7: #6803 小屏，英文模式下创建虚拟机页面添加数据盘后按钮没有了 (2df98771c, mj) 3.7: #6839 change date delay 1 hours (2007d5da2, mj) 3.7: filter params (93cc04e07, mj) 3.7: #6839 change date delay 1 hours (c8b832482, mj) 3.7: 币种cookie值初始化问题 (26c453b5d, mj) 3.7: #7249 硬盘列表及自定义设置列中缺少“虚拟机” (b69d42855, mj) 3.7/navbar: 去除运营平台的单独处理逻辑 (c2aee1836, 郝程宇) 3.7/redis create bottombar: 修改费用估算实际金额对应字段 (070618ebc, 郝程宇) Compute: #10789 baremetal install sys with zone and region error (d24079b57, gaomingjiu@yunion.cn) DiskCreate: split error (3b927ff55, gaomingjiu@yunion.cn) Network: update cloudregion params (bc6f0cb2a, gaomingjiu@yunion.cn) Network: #7264 1366*768分辨率（14寸）创建VPC页面样式显示不全 (94e9ed9cc, gaomingjiu@yunion.cn) OsSelect: #7261 创建vmware虚拟机时，vmware平台镜像vm-test应该归属于RHEL，不应该归属于linux (88d57f681, gaomingjiu@yunion.cn) OsSelect: #7274 从ISO启动的windows系统vmware虚拟机重装系统选择windows系统时无法选中，前端报错 (b828a64a2, gaomingjiu@yunion.cn) ServerPassword: 使用主机快照创建主机，不应该显示设置密码的输入框 (bbc53d663, gaomingjiu@yunion.cn) Tag: identity tag params (a02fb18d3, gaomingjiu@yunion.cn) Tag: identity tag details api version (d90a27e65, gaomingjiu@yunion.cn) Xterm: refresh page method error (cdc0c0998, gaomingjiu@yunion.cn) automation: adjust menu order (93a44f481, Qiu Jian) cloudenv: remove the ‘number’ prefix before date (e021ee25e, Qiu Jian) cloudenv: translation 20210114 (c84018bc2, Qiu Jian) cloudenv: menu adjustment (159447bd8, Qiu Jian) cloudenv: store dispatch should await (3c2c564bc, Qiu Jian) cloudenv: english translation 20210206 (30efedfcc, Qiu Jian) cloudenv: minor fixes (641c3ca06, Qiu Jian) cloudenv: hide group actions in external projects (039de5a6c, Qiu Jian) cloudenv: english translation 20210131 (e15d91673, Qiu Jian) cloudenv: remove create account tip if an account is created (9a7d59785, Qiu Jian) cloudenv: update scope params (4113d97de, gaomingjiu@yunion.cn) cloudenv: english translation 20210207 (88c7d3998, Qiu Jian) cloudenv: english translation 20210125 (e4ff2ad06, Qiu Jian) cloudenv: english translation 20210205 (952971024, Qiu Jian) cloudenv: english transtion 20210109 (9cd38a321, Qiu Jian) cloudenv: english translation 20210220 (d68c9c431, Qiu Jian) cloudenv: from menus of policy to system (39f2cb1a0, Qiu Jian) cloudevent: add filter for cloudevent (366eac69d, Qu Xuan) common: allow use domain-specific hostname (28e97a269, Qiu Jian) common: english translation 20210116 (e5b0bbe64, Qiu Jian) common: translation 20210116 (9ef11828b, Qiu Jian) common: add suggestion type of EXPIRE_SERVER_SKU (b0f72a515, Qiu Jian) common: english translation 20210220 (c771ca596, Qiu Jian) common: fix misc bugs reported (7355fd904, Qiu Jian) common: prevent searchBox multiple search keys (0401b18d0, Qiu Jian) common: change menu cloudevents to cloudlogs (1c923de72, Qiu Jian) common: fetch region with domain params on login page (51b3ccb33, Qiu Jian) common: remove irrelivent translation (564114ed6, Qiu Jian) common: save login domain in cookie (f6375f037, Qiu Jian) common: do not record login record when login through SSO (9974b1bdd, Qiu Jian) common: english translation (1961f7be9, Qiu Jian) common: compatible with yunionapi without sending api_server (892459161, Qiu Jian) common: remind on topAlert using wrong hostname (d2653ae90, Qiu Jian) common: fetch api_server from auth/regions (9973406f8, Qiu Jian) common: cancel domain should reload login page (d3ca7ae9a, Qiu Jian) common: search box keep text in search bar (7da7eef77, Qiu Jian) common: support cloud provider link in sidepage (029ec7049, Qiu Jian) common: hide external links when its empty (1415fd379, Qiu Jian) common: english translation 20210209 (ad77ca8a7, Qiu Jian) common: add hotline tooltips beside ticket title (30541b94f, Qiu Jian) common: add navbar switch to turn off license fetch (9deaed6b9, Qiu Jian) common: update metrics to disks.mounted (e91712779, Qiu Jian) common: allow set copy message in name column (c112a7f27, Qiu Jian) common: add user-info to common (69e864947, Qiu Jian) common: english translation (6a62bade0, Qiu Jian) common: clean menu policy after login and logout (b966dab3c, Qiu Jian) common: english translation 20210127 (b58431c47, Qiu Jian) common: fix login page interactive issues (e8c452b35, Qiu Jian) common: english translation 20210131 (02125217b, Qiu Jian) common: english translation 20210125 (8129705d7, Qiu Jian) common: english translations, login page lauyout (e28b3553a, Qiu Jian) common: english translation 20210307 (0d8654b0d, Qiu Jian) common: englis translation 20210203 (8fb7a2714, Qiu Jian) common: show external links with type external-service only (264e6d5cb, Qiu Jian) common: global search support server template and snapshotpolicy (86135f797, Qiu Jian) common: english translation 20210312 (3040fef05, Qiu Jian) common: remove city from area-selects (16b85f2b1, Qiu Jian) common: add cloud_env constants (f03ec1093, Qiu Jian) common: domain login UI recode (51f0d4286, Qiu Jian) common: adjust english translation 20200103 (8f30c20f4, Qiu Jian) common: replace @:dictionary.identity_provider with Identity Provider (20f94069e, Qiu Jian) common: english translation 20210205 (7a0160e2b, Qiu Jian) common: missing scope for newly added metrics (d2ee5a71e, Qiu Jian) common: allow set login domain manually (b0f66e370, Qiu Jian) compute: disk disabled when no cloud account ready (d29bcf6f1, Qiu Jian) compute: hide group actions for several list (b88413ce9, Qiu Jian) compute: add prompt for saveing image on public cloud (0ac2dabae, Qiu Jian) compute: replace webConsolePath env var with api_server/web-console/ (bb3340e4c, Qiu Jian) compute: adjust menu order (4289da461, Qiu Jian) compute: menu adjustment 20210319 (f22c2acc7, Qiu Jian) compute: english translation 20210206 (0f270525d, Qiu Jian) compute: remove city from area-selects (ca63f06da, Qiu Jian) compute: 修复功能选择vmware，没有显示主机快照菜单 (b8dfb376c, gaomingjiu@yunion.cn) compute: change network security menu text (c6fe7bbee, Qiu Jian) compute: english translation 20210220 (9597302fd, Qiu Jian) compute: add network default params limit (a303ceb19, gaomingjiu@yunion.cn) compute: english translation 20210205 (1aadec6f8, Qiu Jian) compute: filter out disabled server skus (1e669af1a, Qiu Jian) compute: translation fix 20200109 (8dee0d628, Qiu Jian) compute: enable iso for vmware (7ae0a034c, Qiu Jian) compute: server create missing storage id (4c4298446, Qiu Jian) compute: english translation (4368bf37c, Qiu Jian) compute: english translation 20210131 (3025c5af4, Qiu Jian) compute: show schedtag in domain and project views (4ebeeeda0, Qiu Jian) compute: allow create images for public cloud (29e1ff077, Qiu Jian) compute: 网络切换到自动调度后弹性公网IP使用默认，不支持新建 (a29dd5282, gaomingjiu@yunion.cn) compute: no use network fill error (f85ab8992, gaomingjiu@yunion.cn) compute: translation 20210114 (5a50f76fc, Qiu Jian) compute: transfer i18n (01c3e9e88, songdengju) compute: os select backfill (b3e1cb1cb, gaomingjiu@yunion.cn) compute: check ownership when import secgroup rules (fa49f8e6c, Qiu Jian) compute/createServer: eslint error (b0c66f245, gaomingjiu@yunion.cn) dashboard: add more nics metrics (34c08cf3f, Qiu Jian) dashboard: minor quote error (e31960448, Qiu Jian) dashboard: record dashboard widget (3f1c8156d, Qiu Jian) dashboard: english translation 20210129 (9121918b8, Qiu Jian) dashboard: filter usage keys by scope on dashboard numbercard (5e34eb301, Qiu Jian) dashboard: translation 20210117 (6e64746ef, Qiu Jian) dashboard: price \u0026 aliyun elb create fix (087f53165, tangbin) dashboard: use eip.floating_ip as metrics for EIP (8e3aa2eb9, Qiu Jian) dashboard: ring add reverse color attributes in default dashboards (35ae744ea, Qiu Jian) dashboard: env,brand,region remove default value (e297d10d5, gaomingjiu@yunion.cn) dashboard: no k8s usage keys in numbercard (a453310d4, Qiu Jian) dashboard: import ring widget (b1992ca58, Qiu Jian) dashboard: ring data not init (4b7ae7b11, Qiu Jian) dashboard: missing metrics on dashboard numbercard (9ac4ae794, Qiu Jian) dashboard: optimize english translation 20210104 (4f9522af5, Qiu Jian) dashboard: dashboard usage filter by cloudenv (15810f25a, Qiu Jian) dashboard: cost optimization widget updates (f3073eb29, Qiu Jian) dashboard: allow modify default dashboard (3fae929bf, Qiu Jian) dashboard: show container in numbercard only if k8s enabled (96ca58221, Qiu Jian) dashboard: english translation 20210104 (7a8549cb7, Qiu Jian) db: english translation (96547d72d, Qiu Jian) db: no cloud account issues, but seems not working (d8f15d3c6, Qiu Jian) db: adjust menu order (d0d514fc2, Qiu Jian) db: translation 20210117 (530e0ad57, Qiu Jian) db: remove city from area-selects (3ac728422, Qiu Jian) docs: wrong url prefix (aa15c4558, Zexi Li) helm: english translation 20210125 (75e049fcb, Qiu Jian) helm: not including monitor menu (5e50dfddc, Qiu Jian) helm: hide menus temporarily (cdb86640e, Qiu Jian) helm: english translation 20210131 (94eeeb030, Qiu Jian) host: 宿主机详情的type签应该不变 (114b733c4, gaomingjiu@yunion.cn) i18n: alert firing (d74d269eb, Zexi Li) k8s: adjust menu order (fd96c44db, Qiu Jian) k8s: english translation 20210127 (6cadf3372, Qiu Jian) k8s: english translation 20210203 (e243fd7b1, Qiu Jian) monitor: no translation if lang is pt (5797a143a, Qiu Jian) monitor: english translation 20210182 (1e7e22509, Qiu Jian) monitor: translation minor 20210116 (b663ea46f, Qiu Jian) monitor: minor issues that raise browser warnings (d6d5505c1, Qiu Jian) monitor: alert translation (f04413949, Qiu Jian) monitor: normal =\u003e Normal (7e66ea9b7, Qiu Jian) monitor: adjust menu order (77b27d92e, Qiu Jian) multicloud: adjust menu order (c887f7221, Qiu Jian) network: remove city from area-selects (845807484, Qiu Jian) network: adjust menu order (7bb396a78, Qiu Jian) network: translation 20210114 (29bccbc26, Qiu Jian) network: add cloudenv check logic, but not work (10c4028d7, Qiu Jian) network: english translation 20210220 (8b2a13622, Qiu Jian) network: hide group actions in lbacls (bb9ed9b80, Qiu Jian) network: english translation 20210131 (83d10774b, Qiu Jian) network: domain name validation should be updated to include new domains (5d63e7bf9, Qiu Jian) network: english translation 20210205 (d2d2bf3cf, Qiu Jian) network: menu adjustment 20210319 (852c3f99e, Qiu Jian) network: simplify lb create title (efacb75a6, Qiu Jian) storage: remove city from area-selects (df62330da, Qiu Jian) storage: english translation 20210131 (a75567e53, Qiu Jian) storage: translation 20210117 (7d46f12bd, Qiu Jian) storage: adjust menu order (df861f1cd, Qiu Jian) storage: english translation 20210127 (8753b60b2, Qiu Jian) tagselect: tag select search style (4b6f1ac68, mj) trans: batch action (e4baebff7, Zexi Li) trans: batch action (9edc85e40, Zexi Li) translate: en (bc2edff5f, Zexi Li) translate: en (2293fef93, Zexi Li) translate: en (53a222aaf, Zexi Li) translate: en (df20b98df, Zexi Li) vminstance: 去掉调度策略选择云账号的逻辑处理 (c6ef90624, mj) workflow: 工单走到系统管理员，待我审批中当前环节错误 (bef545e2b, gaomingjiu@yunion.cn) workflow: 通过主机工单创建虚拟机失败，工单详情中缺少查看失败原因的链接 (dfe12f910, gaomingjiu@yunion.cn) workflow: domain name validation should be updated to include new domains (2322ad714, Qiu Jian)  Bugfix (7)  compute: close vminstance filter(vmem_size \u0026 disk) (5879bb8bb, GuoLiBin6) compute: fix osselect imageselect (04df87cef, GuoLiBin6) compute: restore arch column (d1be4c868, GuoLiBin6) dashboard: adjust echart (a33dd2d6b, GuoLiBin6) k8s: show detail list (1ce148d21, GuoLiBin6) navbar: change notifyPopover visiable (0dbdc9412, GuoLiBin6) vminstance: modify Cumpute vminstance label (da033b05d, dongliping)  Feat (3)  3.7: #3042 巴西反馈优化，value搜索没有值就直接消失了，应该为空 (01e89e706, mj) 3.7: #2812 控制面板 save and cancel 的按钮样式放大一些，意外退出提示保存 (45b11a95a, mj) 3.7: #2811 创建机器时 订阅选择 显示相应的云账号 (427a32eee, mj)  Feature (24)  bill: add budget tags (bc02a92e0, GuoLiBin6) billing: support billing analysis scope (071e6b4cd, Qiu Jian) cloudenv: config router (ccbeb77a7, GuoLiBin6) cloudenv: ui policies support hide sys menus (2e3efd05e, Qiu Jian) clouduser: add Cloud Account in SamluserList (3885c2512, root) common: ui policies support hide menus (e065d28fb, Qiu Jian) common: add FetchLabel components (dd2db9ca6, Qiu Jian) compute: fix compute datadisk type (035639824, GuoLiBin6) compute: ui policies support hide sys menus (74e7d8c61, Qiu Jian) compute: use list select to select block storage (44c70e9d0, Qiu Jian) compute: add #vm sort (38ea211fd, GuoLiBin6) cumpute: add cumpute vminstance filter (4f920b549, 郭丽斌) dashboard: add dashboard metric url (fa0f5aba9, GuoLiBin6) dashboard: add quota sort (f1e429892, GuoLiBin6) db: ui policies support hide sys menus (ffd59c4fe, Qiu Jian) helm: ui policies hide system menus (1f995678a, Qiu Jian) host: add host vm sortable (0c0910850, GuoLiBin6) k8s: ui policies hide system menus (ed619260c, Qiu Jian) monitor: ui policies hide sys menus (d19e17ccc, Qiu Jian) network: ui policies hide system menus (6479b571b, Qiu Jian) scope: fix feishu verify (4bbbd1910, GuoLiBin6) scope: config menu list (ed0005069, GuoLiBin6) storage: ui policies hide system menus (8589fb939, Qiu Jian) system: add project instance snapshots (203a20830, GuoLiBin6)  Features (75)  add server compara price (8e52bd5fd, mj) add workflow support (9420de6b1, mj) 技术支持工单分离 (a5db601bf, mj) change link (00b4e20ff, mj) add i18n (296e0f2ec, mj) add browse (cfbd4f857, mj) add broswe i18n (094c6a5ce, mj) add github PR template (3bb23dfbe, Zexi Li) update login challenge style (b7a8c5bb2, mj) update i18n (9f13b117b, mj) update browse (7ac10bd42, mj) add check process (5aa7f61e8, mj) 调整技术支持工单 (d783be3ae, mj) update i18n (abca31078, mj) 发起人和技术支持的头像颜色区分 (1c8d5d409, mj) add i18n (f35a74aef, mj) add comment (1cad64cab, mj) 增加回复信息展示隐藏处理 (e6f1ac513, mj) update tag filter add params (d4a2cf769, mj) update state and check reply (3f19976a1, mj) 迁移第三方工单到技术支持 (9b5178764, mj) 我发起的列表暂时不用多选框先隐藏掉 (587b388a3, mj) add nas (dd1d81605, Qu Xuan) add nas (b0e31dfd6, Qu Xuan) update cloudprovider (657a774fc, mj) update 新建云主机时，选择平台后即可指定云订阅 (a094f2678, mj) update price comparator (6d4f84b8b, mj) update price comparator (ae18a4c69, mj) 控制第三方是否展示 (fb20242df, mj) update price comparator (e331165a5, mj) add nat operation (b37c3e4c1, Qu Xuan) 3.7: add logout socket handle (cb9b9ec9d, mj) 3.7: add logout socket handle (b3cb81880, mj) 3.7: #2991 新建云主机时，选择平台后即可指定云订阅 (89847d021, mingjiu) 3.7: 增加401无token跳转登录页面 (247cfcaf5, mj) 3.7: add cloudshell (fb36a6a1a, mj) 3.7: add cloudshell (2e1904fde, mj) 3.7: update cloudshell (e3ceb44f1, mj) 3.7: change currency i18n (e076c3206, mj) 3.7: hide cloudshell (c24673266, mj) 3.7: add ecloud (d9b55153e, mj) 3.7: update ecloud icon (15279ec78, mj) 3.7: #2735 工单系统，需要增加“优先级”字段 (2b9dd81b9, mj) 3.7: change fee menu icon (f5628bda5, mj) 3.7: #2823 Azure除全球区外，其他区该按钮需禁用且提示：Azure xxx区不支持免密认证 (5aca5a880, mj) 3.7: #2823 目前只有全球区支持，所以账号类型为全球区时才有开启开启免密登录的开关 (093865b82, mj) 3.7: #2991 新建云主机时，选择平台后即可指定云订阅 (4bfa9bd31, mj) 3.7: #2823 目前只有全球区支持，所以账号类型为全球区时才有开启开启免密登录的开关 (7e440f7eb, mj) 3.7: update cloudshell content (ac6f562d4, mj) 3.7: 调整设置语言失败后默认语言回退到英文 (e15a9a41c, mj) 3.7: add currency (d9ae53c82, mj) 3.7: add currencys (d1230d3a1, mj) 3.7: add currency cookie (4a66e6b83, mj) 3.7: #2753 工单优先级增加到4级 (315a7138d, mj) 3.7: #2723 功能选择控制IP子网新建 (ebce57efe, mj) 3.7: change menu icon (ef54538e0, mj) 3.7: #2823 用户点击Azure 「免密登录」按钮时进行弹窗提示且复制 (9450d65ef, mj) 3.7: #2820 打开云账号之后，就可以看这个账号的资源的OverView (e5f5128ab, mj) Compute: server list action add permission (1c730b2c0, gaomingjiu@yunion.cn) OcTerm: 优化CloudShell拖拽卡顿问题 (fb53109cd, gaomingjiu@yunion.cn) OcTerm: update octerm style (007070e68, gaomingjiu@yunion.cn) OcTerm: update octerm (d85e4d6ca, gaomingjiu@yunion.cn) Tag: add permission support (cbb52de06, gaomingjiu@yunion.cn) Tag: add identity tag (7bcab12a9, gaomingjiu@yunion.cn) TagDetailColumn: add permission support (66be37c95, gaomingjiu@yunion.cn) TagSelect: #3087 标签的复杂搜索，支持contains, startswith, endswith, not (e5305eef7, gaomingjiu@yunion.cn) TagSelect: support min-width (00677525a, gaomingjiu@yunion.cn) bill: add suggestion i18n (24d2e1083, gaomingjiu@yunion.cn) cloudenv,monitor: update receivers params for domain mode (689e9d376, gaomingjiu@yunion.cn) cloudenv,monitor: update receivers params for domain mode (0ea370388, gaomingjiu@yunion.cn) common: support show predict cost with dashed lines (adfc95916, Qiu Jian) compute, network: add action permission (51bdb0e2d, gaomingjiu@yunion.cn) docs: docs url by scope (bd3ccd8d8, Zexi Li) docs: docs url by scope (34ea69401, Zexi Li) suggestion: update i18n (863736940, gaomingjiu@yunion.cn)  Fix (13)  3.7: #7257 创建云联壹云平台虚拟机，高级配置-\u003e调度策略中不应该有“指定云订阅” (f8cf9e717, mj) 3.7: #7065 规则配置与建议列表 建议降配的虚拟机的规则字段 没有翻译对 (8f133a1e1, mj) 3.7: #7021 云账号详情资源统计中“对象存储容量”单位错误 (9c5939bd2, mj) 3.7: #7017 控制面板、监控大屏 本月支出可下降空间百分比显示错误 (098777307, mj) 3.7: #6975 云账号鼠标悬停信息去掉 (52ce93206, mj) 3.7: dashboard top5 (c9e0bc49e, mj) 3.7: #6943 控制面板：费用优化切换币种后数据不准确 (39f0608e3, mj) 3.7: #6914 backport 到最早版本 云账号-更新账单文件信息回显有误 (81d7834bc, mj) 3.7: #6886 新建弹性伸缩组时修改最大实例数时期望和最小实例数不应该联动修改 (9d4f34782, mj) 3.7: #6865 控制面板优化建议相关的磁贴的设置条件中币种的值按照实际有的账单类型取 (167904c5e, mj) 3.7: #6765 虚拟机有3个IP，页面只暂时2个，优化MAC信息展示 (64fadabf8, mj) 3.7: #6765 虚拟机有3个IP，页面只暂时2个，优化MAC信息展示 (5bcecd57a, mj) 3.7: #6825 虚拟机调整配置-费用估算价格没有正常查到 (3a834b776, mj)  I18n (134)  en: fix json (bf8e0d8b4, Yousong Zhou) zh-CN rewording (c7c9d2d18, Yousong Zhou) views/zone/components/List.vue (545e3ddd2, Yousong Zhou) views/tag/mixins/columns.js (a69484e40, Yousong Zhou) views/strategydefinition/create/index.vue (279693d0c, Yousong Zhou) views/strategydefinition/create/components/FormItem.js (2b64456e2, Yousong Zhou) views/strategydefinition/config/index.js (5d5f9ea95, Yousong Zhou) views/strategyallocation/mixins/columns.js (53a044e4f, Yousong Zhou) views/scheduledtask/mixins/singleActions.js (78b86b79d, Yousong Zhou) views/scheduledtask/index.vue (c8c2d326b, Yousong Zhou) views/scheduledtask/dialogs/ScheduledtaskDisabled.vue (180f8c8eb, Yousong Zhou) views/scheduledtask/create/index.vue (c50a42c49, Yousong Zhou) views/scheduledtask/components/List.vue (88921a317, Yousong Zhou) views/schedtag/mixins/singleActions.js (0012cc53a, Yousong Zhou) views/schedtag/components/List.vue (b99bfed83, Yousong Zhou) views/samluser/dialogs/Create.vue (e22ad385c, Yousong Zhou) views/proxysetting/mixins/singleActions.js (db4b18a4d, Yousong Zhou) views/proxysetting/dialogs/Create.vue (360e975ba, Yousong Zhou) views/proxysetting/components/List.vue (ca61a9219, Yousong Zhou) views/proxysetting/components/CommonFormItems.vue (6232d46ff, Yousong Zhou) views/policydefinition/index.vue (d351d0518, Yousong Zhou) views/externalproject/components/List.vue (bf64ebd7e, Yousong Zhou) views/dynamicschedtag/sidepage/Detail.vue (539f9b91a, Yousong Zhou) views/dynamicschedtag/mixins/singleActions.js (be5a29dd8, Yousong Zhou) views/clouduser/dialogs/Create.vue (8bb14f0a4, Yousong Zhou) views/cloudproviderregion/mixins/columns.js (78037414f, Yousong Zhou) views/cloudproviderregion/dialogs/SetAutoSync.vue (61dde6154, Yousong Zhou) views/cloudprovider/mixins/singleActions.js (a25605538, Yousong Zhou) views/cloudprovider/mixins/columns.js (7f866969f, Yousong Zhou) views/cloudprovider/dialogs/Create.vue (e2a8d80ba, Yousong Zhou) views/cloudprovider/components/List.vue (bd9a5da37, Yousong Zhou) views/cloudgroup/sidepage/Detail.vue (cfc9c95eb, Yousong Zhou) views/cloudgroup/index.vue (58ed94feb, Yousong Zhou) views/cloudgroup/dialogs/AddUser.vue (395e05374, Yousong Zhou) views/cloudevent/components/List.vue (d47be244e, Yousong Zhou) views/cloudaccount/sidepage/index.vue (63dabd696, Yousong Zhou) views/cloudaccount/sidepage/Detail.vue (5e5171458, Yousong Zhou) views/cloudaccount/mixins/singleActions.js (b32ea144d, Yousong Zhou) views/cloudaccount/mixins/columns.js (c85c6a94a, Yousong Zhou) views/cloudaccount/dialogs/SetShare.vue (6e162fc11, Yousong Zhou) views/cloudaccount/dialogs/SetDiscount.vue (9996e71bd, Yousong Zhou) views/cloudaccount/create/form/components/OpenstackZstack.vue (790ad19e8, Yousong Zhou) views/cloudaccount/create/form/components/IpSubnets.vue (78f5db6a9, Yousong Zhou) views/cloudaccount/create/form/components/ContentInfo.vue (dcb3a60bb, Yousong Zhou) views/cloudaccount/create/form/components/AliyunUcloud.vue (3f88a9089, Yousong Zhou) views/cloudaccount/create/form/VmNetwork.vue (38c612f4f, Yousong Zhou) views/cloudaccount/create/form/SelectCloudaccount.vue (515d9dc2a, Yousong Zhou) views/cloudaccount/create/form/BillForm.vue (f9fb775c9, Yousong Zhou) views/cloudaccount/create/components/PrepareNetsForm.vue (e9f89180e, Yousong Zhou) views/cloudaccount/create/components/PrepareNets.vue (d3aa5938f, Yousong Zhou) views/cloudaccount/constants.js (6b7de8023, Yousong Zhou) views/cloudaccount/components/UploadJsonFile.vue (89d456052, Yousong Zhou) views/cloudaccount/components/ProxySetting.vue (a855621b6, Yousong Zhou) views/cloudaccount/components/List.vue (a1d533cf9, Yousong Zhou) views/cloudaccount/components/DomainProject.vue (fa379be25, Yousong Zhou) views/cloudaccount/components/AutoSync.vue (aa633ed18, Yousong Zhou) sections/UsageSidepage/constants.js (6cf38b5ea, Yousong Zhou) router/index.js (d2c2d00ba, Yousong Zhou) constants/sched.js (cb48167c8, Yousong Zhou) zh-CN also (705a4870c, Yousong Zhou) views/wire/dialogs/Update.vue (27bb84673, Yousong Zhou) views/wire/components/List.vue (ada53c61b, Yousong Zhou) views/vpc/sidepage/Detail.vue (339d24808, Yousong Zhou) views/vpc/create/index.vue (642fb90cb, Yousong Zhou) views/network/sidepage/IPList.vue (0f8a174cf, Yousong Zhou) views/network/sidepage/FlexIp.vue (a04f5ef9e, Yousong Zhou) views/network/dialogs/ReversedIP.vue (ab53554bb, Yousong Zhou) views/network/dialogs/NetworkSplitDialog.vue (3191e916f, Yousong Zhou) views/network/components/List.vue (0305b162b, Yousong Zhou) views/network/EditAttributes.vue (fc19c2ea8, Yousong Zhou) views/network/Create.vue (d56120488, Yousong Zhou) views/agent/dialogs/Deploy.vue (6afc3efc8, Yousong Zhou) views/nats/sidepage/Dnat.vue (17008086f, Yousong Zhou) views/loadbalancerlistenerrule/sidepage/Detail.vue (891f33001, Yousong Zhou) views/loadbalancerlistener/sidepage/Detail.vue (3f1dc8668, Yousong Zhou) views/loadbalancerlistener/components/RedirectFormItems.vue (d8b5b4f75, Yousong Zhou) views/loadbalancerbackend/dialogs/Create.vue (a464e588b, Yousong Zhou) views/lbcerts/sidepage/Cache.vue (c835c8522, Yousong Zhou) views/lbacls/sidepage/Cache.vue (7523da3bb, Yousong Zhou) views/lb/dialogs/Create.vue (de2c45fea, Yousong Zhou) views/lb/components/List.vue (a8069e2a2, Yousong Zhou) views/flex-network/sidepage/Detail.vue (88d1a8860, Yousong Zhou) views/flex-network/components/List.vue (4539f3009, Yousong Zhou) views/eip/sidepage/Detail.vue (649c6c0b3, Yousong Zhou) views/eip/dialogs/BindServerDialog.vue (5e9d181c3, Yousong Zhou) views/eip/create/index.vue (a9c5bb82e, Yousong Zhou) views/eip/components/List.vue (3c8e2f9b6, Yousong Zhou) views/dns/sidepage/Detail.vue (6ddd493ad, Yousong Zhou) views/dns/dialogs/Create.vue (659fd17d7, Yousong Zhou) views/dns/components/List.vue (9b3ba1c72, Yousong Zhou) views/dns-zone/create/components/Step1.vue (ebda5ae1d, Yousong Zhou) views/agent/sidepage/Detail.vue (099ce836f, Yousong Zhou) views/agent/sidepage/Asbook.vue (0b42a8220, Yousong Zhou) views/agent/form/index.vue (4935dc47e, Yousong Zhou) views/agent/dialogs/Deploy.vue (fac248137, Yousong Zhou) views/agent/dialogs/Asbook.vue (1d8966b18, Yousong Zhou) views/wire/mixins/columns.js (619b73964, Yousong Zhou) views/vpc/mixins/singleActions.js (c36363ebe, Yousong Zhou) views/vpc/mixins/columns.js (f58970b76, Yousong Zhou) views/route-table/mixins/columns.js (bf9cf4cda, Yousong Zhou) views/reserved-ip/mixins/columns.js (f90f96bb1, Yousong Zhou) views/network/mixins/singleActions.js (8ec4019a7, Yousong Zhou) views/network/mixins/columns.js (8e280b75a, Yousong Zhou) views/nats/mixins/columns.js (0b5adb804, Yousong Zhou) views/loadbalancerlistenerrule/mixins/singleActions.js (94349661f, Yousong Zhou) views/loadbalancerlistener/sidepage/dashboard/utils.js (5497e74d5, Yousong Zhou) views/loadbalancerlistener/sidepage/dashboard/constants.js (61f6313be, Yousong Zhou) views/loadbalancerlistener/mixins/singleActions.js (fccd8071d, Yousong Zhou) views/loadbalancerlistener/mixins/columns.js (fbc093848, Yousong Zhou) views/loadbalancerlistener/create/form/utils.js (6f4a7099f, Yousong Zhou) views/loadbalancercluster/mixins/singleActions.js (ae187ff5b, Yousong Zhou) views/loadbalancerbackendgroup/mixins/singleActions.js (ae3e3dcf4, Yousong Zhou) views/loadbalancerbackend/mixins/singleActions.js (48724bc9f, Yousong Zhou) views/lbcerts/mixins/columns.js (86e8725d4, Yousong Zhou) views/lbacls/mixins/columns.js (ef146808f, Yousong Zhou) views/lb/utils.js (43ecf0731, Yousong Zhou) views/lb/mixins/singleActions.js (66a30ddf6, Yousong Zhou) views/lb/create/form/mixin.js (567519de8, Yousong Zhou) views/lb/constants/index.js (d7b218e2f, Yousong Zhou) views/global-vpc/mixins/columns.js (3f1be141d, Yousong Zhou) views/flex-network/mixins/columns.js (81e889bd0, Yousong Zhou) views/eip/utils/columns.js (cff48f403, Yousong Zhou) views/eip/mixins/singleActions.js (4e420af02, Yousong Zhou) views/dns/mixins/columns.js (24b920ef0, Yousong Zhou) views/dns-zonecache/mixins/columns.js (66aa4fd62, Yousong Zhou) views/dns-zone/utils/columns.js (98a708cf2, Yousong Zhou) views/dns-zone/mixins/singleActions.js (4b94b4631, Yousong Zhou) views/dns-zone/constants/index.js (2d2c79588, Yousong Zhou) views/dns-recordset/utils/columns.js (584d54ff0, Yousong Zhou) views/agent/mixins/singleActions.js (37184c9cc, Yousong Zhou) views/agent/mixins/columns.js (1868e338c, Yousong Zhou) constants/lb.js (acf90f81b, Yousong Zhou) constants/index.js (a981f4e65, Yousong Zhou) s/Overview/Big Screen/ (beded6f39, Yousong Zhou)  NavBar (1)  make monitoring dashboard visible in domain mode (1c217134b, Yousong Zhou)  Navbar (1)  fix importing isDomainMode getters (86d4400e9, Yousong Zhou)  Optimized (2)  nat entry (6395379ce, Qu Xuan) nat rate (f4d3d6f44, Qu Xuan)  Others (338)  network route hidden fix (253306506, TangBin) monitor line chart add data smooth (6b70d80b5, TangBin) scopedpolicybindings update (a95d8701d, TangBin) scopedpolicybindings update (97235b311, TangBin) monitor line chart add scale (4865cc116, TangBin) monitor line chart add scale (cd6ad59d5, TangBin) monitor dashboard chart scope fix (001c49d52, TangBin) rejust monitor ssh agent menus order (467b8839e, TangBin) add agent trans (779a30dc5, TangBin) line chart title fix (eb0b3e0f8, TangBin) sys disk default size fix (646d326ef, TangBin) image select image arch fix (213b81430, TangBin) image select image arch fix (1e8a2dbb1, TangBin) image select image arch ifx (654f86bd1, TangBin) add tooltips for ssh proxy endpoint create form (49ce4fb99, TangBin) add price info scope (58b2bdb16, bistuzx) fix disk price (ec6986e8b, bistuzx) domain project select fix (e524abdae, tangbin) hidden common alert tips while scope is projct (98cedc64d, TangBin) public cloud image filter add os_arch (e34a741f5, TangBin) instance price comparator fix (d51686196, TangBin) 修改成本优化英文 (255be457c, GuoLiBin6) 修改图标 (6a0760d7b, GuoLiBin6) global search hidden menus fix (e87628302, TangBin) setup altert for monitor charts fix (827460486, TangBin) install agent form i18n fix (402a2809b, TangBin) server-price-comparator capability fix (549bc21a8, TangBin) update help link (064ae3a7c, TangBin) windows not support install agent (d2e85d87e, TangBin) change security optimization to security inspection (ca70d6f7d, bistuzx) username tips fix (0b413b980, TangBin) sku add column cpu arch (e81ba067c, TangBin) setup ssh username tips (4f2010ac2, TangBin) dashboard database fix (53e94d9ef, TangBin) exporer dashboard create name repeated fix (b590c1281, TangBin) disk create domain fix (c19abfa18, TangBin) monitor dashboard domain select style fix (5c8235f2f, TangBin) add bucket not found warning to cloudaccount (6808d2288, bistuzx) ssh setup proxy validator fix (9c0697709, TangBin) ssh setup proxy validator fix (ebb09e243, TangBin) domain fix (eb1ce5ca8, TangBin) create monitor dashboard chart fix (9e2860ff4, TangBin) ssh proxy bugfix (e5efa4d77, TangBin) add proxy endpoint list tips (260cbe61b, TangBin) add dock (a71fe270e, TangBin) cloudproxy match scope vpc/network fetch (32a00ba7b, TangBin) remove ssh proxy domain filter (828e272e0, TangBin) create ssh proxy title fix (20c2b2b5d, TangBin) add ssh proxy batch delete (d2d7a858e, TangBin) remove dashboard chart name repeat check (bedab239a, TangBin) hidden monitor dashboard fix (8d4105ba0, TangBin) support ssh proxy (d76da1b9e, tangbin) fix (64b1a2c0f, mj) fix (80d72e0d1, mj) fix (0feed2200, mj) fix (e2c095229, mj) condition add units (4bc8ec0a0, tangbin) update svg assets (1b9e7ccba, tangbin) 修改按钮样式 (a59f05f45, songdengju) 文案调整 (1b9057852, songdengju) 文案调整 (0a43bf90b, songdengju) add monitor dashboard pannel name check (b235adbf4, tangbin) 价格对比字段修改 (52a660f43, songdengju) tag bugfix (d7a381fc6, tangbin) monitor dashboard bugfix (b04135aad, tangbin) block storage change tab fix (aae668417, tangbin) common alert query add param scope (3d6c26e46, tangbin) 文案修改 (ad2f1d53c, songdengju) add min width of line chart axis (6d7a48c68, tangbin) vmware平台磁盘仅在关机状态支持扩容 (b9c0762b9, songdengju) add line chart language (82250db82, tangbin) dashboard create bugfix (81e34fdbd, tangbin) dashboard add goback (c5261fe38, tangbin) update monitor dashboard select (99f162a47, tangbin) add chart save (97e3d2069, tangbin) monitor overview fix (800692316, tangbin) monitor dashboard chart add name field (b14f8951a, tangbin) conflict fix (fe69c7238, tangbin) style fix (279113593, tangbin) 禁用vmware挂载/卸载ISO按钮 (26967954d, songdengju) moniotr overview alerts undefined fix (4e740cf55, tangbin) ws logout minor logs (6f40dc580, Zhang Dongliang) ws logout minor logs (2bef8058d, Zhang Dongliang) database undefined bugfix (75d40f08f, tangbin) ws logout minor logs (96884feb8, Zhang Dongliang) ws logout minor logs (45c8351b8, Zhang Dongliang) ws logout minor logs (2aff9cf36, Zhang Dongliang) monitor overview alerts add stack (0a3490cc5, tangbin) ws logout minor logs (45a14cb76, Zhang Dongliang) ws logout minor logs (cf6b71961, Zhang Dongliang) ws logout minor logs (76fae7011, Zhang Dongliang) ws logout minor logs (2183b83e8, Zhang Dongliang) ws logout minor logs (9a6786a1e, Zhang Dongliang) ws logout minor (577238657, Zhang Dongliang) ws logout minor (5fc25cedf, Zhang Dongliang) update logout socket (7f459a7b8, mj) 文案调整 (a468a0d17, songdengju) update logout socket (f7a25853a, mj) update logout socket (0d6630fa5, mj) 修改提示文案 (ae7d8031b, songdengju) 修改提示文案 (891a0104f, songdengju) fix(7254)添加调度策略改为添加调度标签 (bfafb3c40, dongliping) monitor overview fix (674db60bd, tangbin) fix(7254):创建虚拟机指定高级配置调度策略，指定调度标签-添加网卡改成添加调度策略 (15c725a98, dongliping) 文案调整 (971fd92d5, songdengju) 文案调整 (011fb254e, songdengju) add monitor dashboard (f71bf9d46, tangbin) restore overview page (ca943a898, tangbin) monitor add dashboard view (11ccf7f9e, tangbin) 虚拟机增加禁用提示信息 (f72574ef3, songdengju) fix(NAT)优化NAT网关弹框间距文案 (935e9b6ca, dongliping) monitor overview fix (b6fe4c679, tangbin) monitor overview fix (49726610e, tangbin) fix(7225)nat网关详情中应该有更多的操作选项 (a4e53391e, dongliping) fix(#7204): 创建主机快照配额不足，点击跳转到调整配额页面，新建快照的对话框应该关闭 (02b386034, mj) silent_period fix (b3950bc16, tangbin) monitor overview fix (33e8faa67, tangbin) qcloud eip create fix (ea239df79, tangbin) qcloud eip create fix (52ed8564e, tangbin) alertrecords alert_duration fix (b92683b34, tangbin) vminstance list os_type fix (1077e4772, tangbin) dns resolve path fix (2ba07f4c2, tangbin) add locales (6b184d421, tangbin) monitor overview optimazation (45c7b629e, tangbin) fix format (b1984820f, dongliping) fix(7213)技术支持工单“我发起的”工单列表数据不应该有选择框 (2e43cf99f, dongliping) Fix(#7126 ): 创建主机模板：网络计费方式没有默认值 (981fa6457, mj) feat(3.7)快照和主机快照列表过滤项支持通过虚拟机过滤 (dfba75697, dongliping) fix(3.7)lb列表过滤项添加状态 (d34fe533e, dongliping) fix(3.7)审批工单去掉问题级别 (33000fb8f, dongliping) fix(itsm)工单结束状态判断条件及提示 (f0e3da436, dongliping) fix(vm)批量操作-同步状态放在第一个 (8a7eaa949, dongliping) fix(lb)lb支持同步状态操作 (f8029f578, dongliping) fix(lb)Onecloud平台LB不支持同步状态操作 (e11633003, dongliping) fix(lb)lb支持同步状态，以及启用禁用操作放在更多 (ccd0712b8, dongliping) feat(#2995): 技术支持工单优化 (ffa53759c, mj) feat(vm)将同步状态操作放在开机上面 (1114c73cd, dongliping) feat(#2904): 技术支持工单样式优化 (1df4f94fd, mj) 文案调整 (e330dd67d, songdengju) fix(#7168): 所有的技术支持工单tab页面，列表不应有“审批人”列且把自定义列中去掉“审批人” (e0963a07d, mj) 详情页隐藏外部标签 (772d4f32b, songdengju) 详情页隐藏外部标签 (540aaff75, songdengju) 详情页隐藏外部标签 (009dca72f, songdengju) 详情页隐藏外部标签 (9e790d62d, songdengju) 隐藏详情页外部标签 (1fd16f946, songdengju) 隐藏详情页外部标签 (9fe1009ea, songdengju) 隐藏详情页外部标签 (53dffa359, songdengju) 隐藏详情页外部标签信息 (8f35bd290, songdengju) 详情页隐藏外部标签 (92defec0e, songdengju) 标签过滤调整 (59fcd5545, songdengju) 调整修改标签弹窗 (90e41d0f6, songdengju) fix(nat)详情添加云账号，云订阅的信息 (3ac1879f9, dongliping) fix word (3dded5fde, dongliping) fix(nat)新建SNAT条目选择新建弹性公网IP时新打开的标签应该跳转到eip的列表 (af7eae408, dongliping) Fix(#7167): 列表组件没有勾选框，无法支持批量操作 (a21f01bfb, mj) fix(#7167): 列表组件没有勾选框，无法支持批量操作 (681c72049, mj) fix(#7154): 技术支持工单“我发起的”tab页面状态搜索框不应该显示两条“已关闭” (6464e66bd, mj) fix(#7151): 系统管理后台在“我发起的”tab页面不应该有“申请技术支持”按钮 (b542fc585, mj) fix(#7141): 点击云管平台页面右上角“申请技术支持工单”按钮，没有反应也没有报错 (6ceb7b821, mj) 安全组缓存列表支持平台、区域、云账号搜索 (50efe708f, songdengju) feat(3.7)项目视图添加不支持迁移操作的提示 (740b3cb2c, dongliping) feat(3.7)更换IP过滤PXE和IPMI类型的IP子网 (b78e60b6a, dongliping) fix 调整样式 (820a7b86c, dongliping) non project user fetch alterts 403 error fix (5dbb41942, tangbin) reids\u0026 rds create fix (99b24005c, tangbin) add nat op (0de0b5cde, Qu Xuan) 文案调整 (edba28c63, songdengju) 文案调整 (442f797e9, songdengju) 文案调整 (e5a030646, songdengju) 文案调整 (b0ae29c36, songdengju) fix(3.7)多维度分析文案 (64bcd1055, weichunling) remove Aws from redis create (d898f6698, tangbin) redis change spec mem choices fix (78ecdaffa, tangbin) qcloud rds basic edition bind secgroup fix (070abffcf, tangbin) 文案增加 (32025cf83, songdengju) alert resource display fix (e9b2da41f, tangbin) 文案调整 (377ccefef, songdengju) wire merge add more descriptions (7b593b1b8, tangbin) image tooltips fix (b147c665a, tangbin) cloudprovider region status checking fix (427f24b5a, tangbin) image market pagination display bugfix (502ec00ac, tangbin) 状态增加翻译 (a605d67ef, songdengju) 文案整理 (1f5325f75, songdengju) 文案整理 (2c8292324, songdengju) 文案整理 (e3305891e, songdengju) 文案整理 (d5c72ba7e, songdengju) 文案整理 (d090ee976, songdengju) add response log (1e2b635c9, mj) change common alert form reduce min width to 70px (69a173d7e, tangbin) common alert monitor line table show fix (e92abed88, tangbin) 修改中文逗号为英文 (4c5ed1152, songdengju) wire merge auto refresh after success (2c66ffa4c, tangbin) common alert list display fix (9bf84a194, tangbin) commonalert update fix (f756ff023, tangbin) add getTimeRangeFilter (c5ee12b3a, tangbin) add getTimeRangeFilter (dc4dae751, tangbin) add getTimeRangeFilter (5138f2932, tangbin) host sidepage network list add more columns (1635d88f4, tangbin) 调整搜索字段顺序 (7516a5cd1, songdengju) notice fix (e87bef28a, tangbin) wire merge sources parameter fix (ec5ac5f7b, tangbin) add locales (0c9733fdd, tangbin) add region filter (0550df347, tangbin) add region filter (6bc4ffe75, tangbin) notice show more button (65b33d641, tangbin) notice show more button (4746d9fca, tangbin) alertrecord display fix (a53fdacca, tangbin) add locales (14fdcfd9b, tangbin) add locales (f25fa38b9, tangbin) cloud event list fix (36b3bd376, tangbin) add locales (bc17a903c, tangbin) 替换为兼容 arm64 的 docker base (5b184d949, Zhang Dongliang) common alert form hadRobot fix (39e3d76de, tangbin) trans brand onecloud to yunioncloud (888253920, tangbin) 文案修复 (dc36439e1, songdengju) remove useless steps for create vmware account (02e06d271, tangbin) update common alert field dispaly fix (5a72cba6d, tangbin) chart show is update (c4c08677d, tangbin) guest metric line chart display bugfix (05b407130, tangbin) add style utils (43be411f1, mj) #7107 控制面板、监控大屏 本月支出可下降空间百分比样式问题 (e8fecea4d, mj) add metric description (0de393628, tangbin) add silent period (a69cac978, tangbin) fix:云账号详情资源统计“IP使用率”和“EIP使用率”文案写反了。 (0c809d069, dongliping) 数据库模块英文翻译修改与 大小写校对 (bd249189b, weichunling) add wire expected status (a51cbe888, tangbin) wire merge (dbb8dbae9, tangbin) wire merge (ba05ee2ed, tangbin) fix:英文模式下，参数显示不全问题需前端调整 (abbcf914c, dongliping) fix:英文模式下，参数显示不全问题需前端调整 (4bce8d6fe, dongliping) fix:英文模式下，参数显示不全问题需前端调整 (e9fa06983, dongliping) fix:英文模式下，参数显示不全问题需前端调整 (99d2207fb, dongliping) fix:英文模式下，参数显示不全问题需前端调整 (3d17d72b4, dongliping) fix(storage)存储使用情况的中文显示问题 (651a9d703, dongliping) fix(network):IP子网使用情况的中文显示 (0782f3150, dongliping) update desc form layout (d3824cf05, mj) fix(Redis)免密访问的英文文案 (e9d912d5a, dongliping) wire merge (b8df3063c, tangbin) fix ticket status words (5487487d2, dongliping) fix(3.7)费用模块英文文案修改 (0afba1d3b, weichunling) fix revoked-\u003ecanceled (def7db31d, dongliping) fix add netword card word (49a31a4e0, dongliping) fix(common) tickets submitted and closed time (f364de259, dongliping) add buckets (480e883df, mj) 文案统一 (dcb9522bd, songdengju) common alert create bugfix (3a0b20b65, tangbin) common alert form display (f8c55b1a5, tangbin) 增加翻译 (2b3f145a8, songdengju) 增加翻译 (7fb719911, songdengju) 英文翻译校对 (b340c615f, Zhang Dongliang) 英文翻译校对 (d96884d0f, Zhang Dongliang) 报警历史文案修改 (a36f0f546, songdengju) 文案优化 (57575361d, songdengju) 修复显示不全问题 (4d0297519, songdengju) openstack \u0026 zstack create account bugfix (3b2e75854, tangbin) add area_code search (457ef6752, tangbin) get-types url change\u0026 mobile fix (d6ad8f1b3, tangbin) Alertresource bugfix (ad65c4c83, tangbin) fix BareMetal-\u003eBaremetal (3d699c7ae, dongliping) fix BareMetal-\u003eBaremetal (7fe6e85c5, dongliping) fix BareMetal-\u003eBaremetal (b5adc73b0, dongliping) fix(3.7)英文文案修改 (12a9a9f4f, weichunling) search box tag display fix (ac0ca4293, tangbin) fix(3.7)多云管理模块英文显示不全 (167a3889a, weichunling) alert records add params alert_duration \u0026 reduece (20851b13d, tangbin) nav bar add resource tips (77df50961, tangbin) fix area_code word (2f84ec572, 董丽萍) international_mobile format fix (3ad5a9e64, tangbin) add contact types column (72aaa845f, tangbin) add res_type filter (929d159e8, tangbin) fix (f10a07fed, mj) temp (11d6a568c, tangbin) add chalk lib (1bd0d9700, mj) add automatic deployment tool (e3e087b4e, mj) add mock support (a01e1c548, mj) add mock support (757636826, mj) common alert list add column res_type (1f61958b5, tangbin) commonalerts comparator param fix (5e62f1e39, tangbin) monitor overview use last points as chart data (4ff28c8a4, tangbin) alert channel fix (37a0f1d32, tangbin) base select add props option-label-prop (84164685b, tangbin) alert channel bugfix (c8a5e4b3a, tangbin) commonalerts comparator param fix (b6a5ae4e2, tangbin) keypair modify name fix (97af6a0ad, tangbin) disk trans fix (7789bbce6, tangbin) fix(3.7)资源类型字段英文文案优化 (4a75e2fbb, weichunling) fix(3.7)预算管理相关文案修改 (1aa58bc65, weichunling) add server update tag translation (2de01312f, hoganlxj) disk expansion tooptips fix (412d29bc2, tangbin) translation fix (df3a98cca, tangbin) vm instance change vm setting fix (82364a5af, tangbin) 修改英文统一：Modify (2bf3fe52d, songdengju) 更多文案统一 (29fd2c5b1, songdengju) 文案统一 (0e93ea95e, songdengju) page footer fix (ad088cf61, tangbin) fix(3.7)优化建议字段翻译 (236a342c9, weichunling) fix modifypolicies中间加空格 (138113992, 董丽萍) region filter add scope params (038bfaa84, tangbin) monitor overview fix (4c77b4bd4, tangbin) fix(3.7)优化建议两条新增规则的规则类型的中英文映射 (f5a8cec2b, weichunling) 文案统一 (479748ed2, songdengju) 文案统一 (5b369a9a0, songdengju) 文案统一 (daa9aadbd, songdengju) add get region filter (d2b4b5427, tangbin) add get region filter (e1649cbe8, tangbin) add get region filter (8e3127219, tangbin) fix(3.7)修改工单的英文文案 (18bedb34a, weichunling) fix(3.7)修改工单的英文文案 (64061e34c, weichunling) add class monitor-overview-breadcrumb (3c5ca7a88, tangbin) add trans up size \u0026 down size (809a5f5a3, tangbin) add iam security (ae2f4a58b, tangbin) change cloudaccount side page tabs order (ee33aed1b, tangbin) 创建主机系统盘最小值fix (5b0571e08, tangbin) 子网创建增加zone status过滤 (6672d1994, tangbin) base chart support props chartevents (1547c01da, tangbin) monitor overview support chart drill (96d38e316, tangbin) fix 报警定义改为报警策略 (063838488, 董丽萍) fix 报警定义改为报警策略 (e595f9dbd, 董丽萍) monitor overview unit fix (320896a3a, tangbin) monitor measurements query params bugifx (019c2d997, tangbin) fix Alters-\u003eAlerts (f2e00c20d, 董丽萍) aliyun cloud account create support smal (54ea1f285, tangbin) feat(3.7)国际化手机号校验规则修改为6-14位的数字 (5c972e6d5, 董丽萍) monitor_metric_6 fix (e5b2c32d7, tangbin) alert policy add condition nodata (092c8f8d0, tangbin) alert of last 7days query fix (51aa55a8a, tangbin) style fix (4f069ab22, tangbin) i18n fix (d4bfca52c, tangbin) i18n fix (c6073a559, tangbin) style fix (a1ded2da0, tangbin) add monitor icon (8306f30bf, tangbin) style fix (f09f96b56, tangbin) add monitor menu icon (13ed30b73, tangbin) monitor menu layout (aaa099595, tangbin) monitor menu layout (12252d61b, tangbin) style fix (d2c3705f1, tangbin) monitor overview page (40bd6d8d8, tangbin) fix word (65b9b703d, 董丽萍)  Vminstance (6)  ssh: include all ips in default vpc (55a512a85, Yousong Zhou) ssh: fix length check on fwds (238cab985, Yousong Zhou) ssh: allow onecloud vpc ip (49fd4e640, Yousong Zhou) ssh: use server forward for onecloud vpc (a780690cc, Yousong Zhou) ssh: use ipInfoList (08809dda6, Yousong Zhou) ssh: adjust meta func identifier scope (6721ab24c, Yousong Zhou)   kubecomps 仓库地址: https://github.com/yunionio/kubecomps\n14 commits to kubecomps - v3.7.0 since this release.\nBug Fixes (9)  build: embed heml pkgs remove it (b26121b, Zexi Li) kubeserver: helm release resource object’s name and id missed (b1a78d3, Zexi Li) kubeserver: helm release resource list (bb24301, Zexi Li) kubeserver: helm repo remove (4021c66, Zexi Li) kubeserver: helm add repo already exists error (a249b23, Zexi Li) kubeserver: import cluster input data unmarshal error (ad07bb2, Zexi Li) kubeserver: make system cluster resource getable (53262af, Zexi Li) kubeserver: sync cluster not fatal (a662e92, Zexi Li) kubeserver: cluster ca and key field nullable deleted (102aef8, Zexi Li)  Features (5)  build: support arm64 build (4adf7ae, Zexi Li) build: go generate use vendor (6b1507b, Zexi Li) kubeserver: change configuration of minio (4dfe3b1, Zexi Li) kubeserver: add cluster precheck api (eed0372, Zexi Li) repo: repo url allow updated (4de7ab5, Zexi Li)   notify-plugins 仓库地址: https://github.com/yunionio/notify-plugins\n3 commits to notify-plugins - v3.7.0 since this release.\nBug Fixes (1)  build: build arm64 image (731cf18, Zexi Li)  Features (2)  be compatible with notify’s change to support international mobile (0e0d80a, rainzm) robot: support mutli WebhookPrefix (34f7ebf, rainzm)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n13 commits to ocadm - v3.7.0 since this release.\nBug Fixes (7)  set operator imagePullPolicy IfNotPresent (80df3f2, Zexi Li) build,make: 修改新分支的编译变量 release‘’ (4b74ce5, Zhang Dongliang) cluster: set OS_PROJECT_DOMAIN of cluster auth info (a962c69, Zexi Li) cluster: update vendor make build pass (3e1d3b8, Zexi Li) keepalived: 解决 高可用架构部署的默认网卡传递参数问题 (c18bbee, Zhang Dongliang) preflight: more accurate of mysql grant error (f83dc25, Zexi Li) update: cluster update operator parse image digest (dff44e8, Zexi Li)  Chore (2)  vendor: update vendor (bca87f7, Zexi Li) vendor: update to resolve onecloud-operator tag deleted (afae090, Zexi Li)  Features (3)  build: 增加arm 下编译 ocadm deb 的步骤(make deb)； 统一跨平台metrics-server 的 tag 名称；升级 k8s-sidecar 到 0.1.275 (66e7726, Zhang Dongliang) keepalived,ha: 新增 keepalived_interface 变量支持,以便在安装高可用多网卡情况下支持非默认网卡绑定 vip (146d04a, Zhang Dongliang) longhorn: support migrate to source pvc from longhorn pvc (46d1f11, wanyaoqi)  Others (1)  update mod (316fcbe, TangBin)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n39 commits to sdnagent - v3.7.0 since this release.\nAgent (5)  server: register ForwardService (a993132, Yousong Zhou) server: enable ovnMdMan (fd5c3c8, Yousong Zhou) server: add metadata server (d485c37, Yousong Zhou) server: watch: add FindGuestDescByNetIdIP (d486ab8, Yousong Zhou) server: use utils.RunOvsctl (bab3851, Yousong Zhou)  Build (4)  note on deploying ovs, ovn components (7800cf9, Yousong Zhou) reword README.md for deploying eipgw (7434581, Yousong Zhou) docker: use openvswitch:2.10.5-1 (56b9693, Yousong Zhou) eipgw: track to ensure stop state as well (9b317cc, Yousong Zhou)  Features (1)  build: make multi arch manifest docker image (9304d46, Zexi Li)  Flowsource (2)  allow conntrack invalid packets (e558321, Yousong Zhou) make aware of sub ips (676cbc7, Yousong Zhou)  Others (8)  ovn-md: ovnMdServer: local origNs (8a90039, Yousong Zhou) ovn-md: ovnMdServer: fix logging typo on Stop (5d90d3f, Yousong Zhou) .circleci: go test with “-mod vendor” (b860eec, Yousong Zhou) ovn-md: add 24 hours timeout for forward listener (ce30249, Yousong Zhou) ovn-md: ovnMdServer: serve grpc forward open, close, list (dfdc470, Yousong Zhou) ovn-md: add ovnMdForward (570052b, Yousong Zhou) ovn-md: use newOvnMdServer (e67a1f1, Yousong Zhou) .circleci: bump go to 1.14 (24b3998, Yousong Zhou)  Ovn (1)  mapped: fix possible traffic loop across different vpcs (bc53d0b, Yousong Zhou)  Server (1)  fix closing listener too early (1f46e95, Yousong Zhou)  Tc (6)  QdiscTree: add Root() method (36d70d3, Yousong Zhou) NewQdiscTree: special case mq (6a05b05, Yousong Zhou) NewQdiscTree: fix children key (3280a78, Yousong Zhou) NewQdiscTree: use qbase for BaseQdisc() return (9b10183, Yousong Zhou) NewQdiscTree: rename vars (5d5507f, Yousong Zhou) NewQdiscTree: use current tree instead of the root (be12940, Yousong Zhou)  Tcman (1)  skip devices with mq qdisc (c8c1d25, Yousong Zhou)  Treewide (1)  use sdn socket path from config (027db60, Yousong Zhou)  Utils (5)  guest: ignore “secgroup” or “secgroups” (0cd17fe, Yousong Zhou) add RunOvsctl (305d3bf, Yousong Zhou) guest: add GetJSONObjectDesc (3c1b6bb, Yousong Zhou) guest: add FindNicByNetIdIP (9840fe3, Yousong Zhou) guest: make aware of sub ips (89fdb32, Yousong Zhou)  Vendor (4)  bump to current tip of release/3.7 (07e6d8a, Yousong Zhou) onecloud: use v0.0.0-20201219023906-3eb25e6dd1cd (66a4da9, Yousong Zhou) bump to onecloud master branch (beb7661b9fc) (5109afe, Yousong Zhou) bump yunion.io/x/onecloud to current tip of release/3.3 (8a8e6be, Yousong Zhou)  ","excerpt":"发布时间 2021-05-12 16:45:43\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.7/3-7-0/","title":"v3.7.0"},{"body":"Release time: 2021-03-01 10:58:40\n cloudpods Repo: https://github.com/yunionio/cloudpods\n1 commits to cloudpods - v3.6.9 since this release.\nBug Fixes (1)  baremetal-agent: baremetal fail to stop due to power off soft failed (a3621b470, Qiu Jian)   kubecomps Repo: https://github.com/yunionio/kubecomps\n2 commits to kubecomps - v3.6.9 since this release.\nBug Fixes (1)  kubeserver: sync cluster not fatal (1247793, Zexi Li)  Features (1)  kubeserver: add cluster precheck api (93b34c2, Zexi Li)  ","excerpt":"Release time: 2021-03-01 10:58:40\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-9/","title":"v3.6.9"},{"body":"发布时间 2021-03-01 10:58:40\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n1 commits to cloudpods - v3.6.9 since this release.\nBug Fixes (1)  baremetal-agent: baremetal fail to stop due to power off soft failed (a3621b470, Qiu Jian)   kubecomps 仓库地址: https://github.com/yunionio/kubecomps\n2 commits to kubecomps - v3.6.9 since this release.\nBug Fixes (1)  kubeserver: sync cluster not fatal (1247793, Zexi Li)  Features (1)  kubeserver: add cluster precheck api (93b34c2, Zexi Li)  ","excerpt":"发布时间 2021-03-01 10:58:40\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-9/","title":"v3.6.9"},{"body":"Release time: 2021-02-25 17:21:03\n cloudpods Repo: https://github.com/yunionio/cloudpods\n25 commits to cloudpods - v3.6.8 since this release.\nBug Fixes (21)  apigateway: add enable_quota_check and return-domain-list attributes to fe params (4ee32ef45, Qiu Jian) baremetal: try channel 8 for default profile (cdb97511c, Qiu Jian) cloudevent: optimized cloudevent sql (14dcb9175, Qu Xuan) cloudid: sync role policy (a11e5d14d, Qu Xuan) host-deployer: mount may fail to lock /etc/mtab, add retrier (c22c4f8ef, Qiu Jian) hostman: fix kvm create disk failed error (e76abe883, Qu Xuan) keystone: hide system scope policies in domain scope view (#10196) (f7e8c20f4, Jian Qiu) keystone: ensure comparing id with non-utf8 string (73c0f0350, Qiu Jian) keystone: cas sso may create new project whenever user login (50473268f, Qiu Jian) keystone: policy name duplication (#10201) (d7dc89ccb, Jian Qiu) monitor,host: replace space to ‘+’ when write to influxdb and replace ‘+’ to space when query (861209545, zhaoxiangchun) region: set redis reboot timeout to 30 mins (bd64be4d8, tangbin) region: delete not exist disk failed (4acb2757a, Qu Xuan) region: redis change spec bugfix (e39015fa4, tangbin) region: support peer secgroup (5584e9af1, Qu Xuan) region: qcloud quota sync (57eef5ede, Qu Xuan) region: avoid not sync dns zone (8dd1a897f, Qu Xuan) region: add azure new region (4332008c3, Qu Xuan) region: bucket size stats should not count invalid sizes of -1 (bbb538b93, Qiu Jian) region: host search by any ip (8610731af, Qiu Jian) scheduler: storage medium type should not exact match (#10192) (dbf8fde45, Jian Qiu)  Chore (1)  utils: add deb build script (a1eed47e6, wanyaoqi)  Climc (1)  add k8s monitor component (2fc04497b, Zexi Li)  Feature (1)  compute: allow live migration with checking Host CPU modes (3cc72fac6, Qiu Jian)  Features (1)  baremetal: support H3C oem baremetal (50fe044cf, Zexi Li)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.6.8 since this release.\nFeatures (1)  k8s: enable kubeserver (ec082d1, Zexi Li)   ocadm Repo: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.8 since this release.\nBug Fixes (1)  build: sync with onecloud-operator v3.6 vendor (eb1a5e5, Zexi Li)  ","excerpt":"Release time: 2021-02-25 17:21:03\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-8/","title":"v3.6.8"},{"body":"发布时间 2021-02-25 17:21:03\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n25 commits to cloudpods - v3.6.8 since this release.\nBug Fixes (21)  apigateway: add enable_quota_check and return-domain-list attributes to fe params (4ee32ef45, Qiu Jian) baremetal: try channel 8 for default profile (cdb97511c, Qiu Jian) cloudevent: optimized cloudevent sql (14dcb9175, Qu Xuan) cloudid: sync role policy (a11e5d14d, Qu Xuan) host-deployer: mount may fail to lock /etc/mtab, add retrier (c22c4f8ef, Qiu Jian) hostman: fix kvm create disk failed error (e76abe883, Qu Xuan) keystone: hide system scope policies in domain scope view (#10196) (f7e8c20f4, Jian Qiu) keystone: ensure comparing id with non-utf8 string (73c0f0350, Qiu Jian) keystone: cas sso may create new project whenever user login (50473268f, Qiu Jian) keystone: policy name duplication (#10201) (d7dc89ccb, Jian Qiu) monitor,host: replace space to ‘+’ when write to influxdb and replace ‘+’ to space when query (861209545, zhaoxiangchun) region: set redis reboot timeout to 30 mins (bd64be4d8, tangbin) region: delete not exist disk failed (4acb2757a, Qu Xuan) region: redis change spec bugfix (e39015fa4, tangbin) region: support peer secgroup (5584e9af1, Qu Xuan) region: qcloud quota sync (57eef5ede, Qu Xuan) region: avoid not sync dns zone (8dd1a897f, Qu Xuan) region: add azure new region (4332008c3, Qu Xuan) region: bucket size stats should not count invalid sizes of -1 (bbb538b93, Qiu Jian) region: host search by any ip (8610731af, Qiu Jian) scheduler: storage medium type should not exact match (#10192) (dbf8fde45, Jian Qiu)  Chore (1)  utils: add deb build script (a1eed47e6, wanyaoqi)  Climc (1)  add k8s monitor component (2fc04497b, Zexi Li)  Feature (1)  compute: allow live migration with checking Host CPU modes (3cc72fac6, Qiu Jian)  Features (1)  baremetal: support H3C oem baremetal (50fe044cf, Zexi Li)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.6.8 since this release.\nFeatures (1)  k8s: enable kubeserver (ec082d1, Zexi Li)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.8 since this release.\nBug Fixes (1)  build: sync with onecloud-operator v3.6 vendor (eb1a5e5, Zexi Li)  ","excerpt":"发布时间 2021-02-25 17:21:03\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-8/","title":"v3.6.8"},{"body":"Release time: 2021-02-03 18:10:04\n cloudpods Repo: https://github.com/yunionio/cloudpods\n19 commits to cloudpods - v3.6.7 since this release.\nBug Fixes (15)  host-deployer: remove escape character on windows passwd (754d046d3, wanyaoqi) hostman: avoid panic when disk is nil (650ccdd7c, Qu Xuan) keystone: SSO created user name may be duplicated (20380ae9e, Qiu Jian) monitor: fix alert notify info do not contain resourceName (c17fe2df2, zhaoxiangchun) notify: be compatible with member’s permission changes (4e199b84e, rainzm) region: check the global network situation when expanding the network (ea4505ae5, rainzm) region: avoid update tags task loop (3aa83bb86, Qu Xuan) region: filter resource by classic vpc (57efd8a86, Qu Xuan) region: delete virtual nics with network (ebe79b12d, Qu Xuan) region: avoid sync huawei unusable account (7ee2026b2, Qu Xuan) region: add option auto reconcile backup servers (3bcb337a4, wanyaoqi) region: avoid stuck at http request (9975543dd, Qu Xuan) region: add huawei credit amount check (0c658ec53, Qu Xuan) region: add aliyun credit amount check (58fb3fc9e, Qu Xuan) region: secgroup priority fix (f4972c22b, Qu Xuan)  Features (4)  apigateway: differentiate error messages when logging in (e3d3c1f02, rainzm) keystone: more specific error return during authentication (2fd40396c, rainzm) keystone,apigateway: return a readable message when the user is locked or disabled (cb7956f1f, rainzm) locale: update (6f2bdfa22, rainzm)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n2 commits to cloudpods-operator - v3.6.7 since this release.\nApigateway (2)  cors: rename spec field name to corsHosts (431376c, Yousong Zhou) allow setting cors_hosts (1ef6de1, Yousong Zhou)  ","excerpt":"Release time: 2021-02-03 18:10:04\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-7/","title":"v3.6.7"},{"body":"发布时间 2021-02-03 18:10:04\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n19 commits to cloudpods - v3.6.7 since this release.\nBug Fixes (15)  host-deployer: remove escape character on windows passwd (754d046d3, wanyaoqi) hostman: avoid panic when disk is nil (650ccdd7c, Qu Xuan) keystone: SSO created user name may be duplicated (20380ae9e, Qiu Jian) monitor: fix alert notify info do not contain resourceName (c17fe2df2, zhaoxiangchun) notify: be compatible with member’s permission changes (4e199b84e, rainzm) region: check the global network situation when expanding the network (ea4505ae5, rainzm) region: avoid update tags task loop (3aa83bb86, Qu Xuan) region: filter resource by classic vpc (57efd8a86, Qu Xuan) region: delete virtual nics with network (ebe79b12d, Qu Xuan) region: avoid sync huawei unusable account (7ee2026b2, Qu Xuan) region: add option auto reconcile backup servers (3bcb337a4, wanyaoqi) region: avoid stuck at http request (9975543dd, Qu Xuan) region: add huawei credit amount check (0c658ec53, Qu Xuan) region: add aliyun credit amount check (58fb3fc9e, Qu Xuan) region: secgroup priority fix (f4972c22b, Qu Xuan)  Features (4)  apigateway: differentiate error messages when logging in (e3d3c1f02, rainzm) keystone: more specific error return during authentication (2fd40396c, rainzm) keystone,apigateway: return a readable message when the user is locked or disabled (cb7956f1f, rainzm) locale: update (6f2bdfa22, rainzm)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n2 commits to cloudpods-operator - v3.6.7 since this release.\nApigateway (2)  cors: rename spec field name to corsHosts (431376c, Yousong Zhou) allow setting cors_hosts (1ef6de1, Yousong Zhou)  ","excerpt":"发布时间 2021-02-03 18:10:04\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-7/","title":"v3.6.7"},{"body":"Release time: 2021-01-27 21:03:27\n cloudpods Repo: https://github.com/yunionio/cloudpods\n23 commits to cloudpods - v3.6.6 since this release.\nBug Fixes (18)  cloudcommon: missing set_meta opslog (#9916) (040a45aa4, Jian Qiu) cloudevent: update aliyun lookupevent api (178a7071f, Qu Xuan) host: fix wait time after mount fuse fs (5ccece54a, wanyaoqi) keystone: user create without password can login with any password (2af9104d9, Qiu Jian) monitor: domain view can list scope is domain or project alertrecords; fix nodata alert return info (5dc1486e7, zhaoxiangchun) notify: remote ‘lang’ filter when contact type is ‘mobile’ (488502561, rainzm) notify: add a time limit for resending notifications (de1553770, rainzm) notify: add index fro receiver_notification (7c87d73d9, rainzm) notify: send websocket messages according to language preference (8a9f3e09e, rainzm) region: purge snapshot with not status check (67082f32d, Qu Xuan) region: cloudaccount: allow only one sync func in flight (606b241b0, Yousong Zhou) region: fix zstack delete server with local disks (fed639513, Qu Xuan) region: avoid clean all rules when sync secgroups (c6893892d, Qu Xuan) region: azure default subscription id (f3a567f63, Qu Xuan) region: aws not support create server with public ip (180b12216, Qu Xuan) region: exported number of vpcs less than listed (a8d550d4d, Qiu Jian) region: optimized secgroup rule sync (b96b2f0b5, Qu Xuan) region: avoid azure detach disk failed (299d3bed6, Qu Xuan)  Features (5)  climc: wires: allow filter by bandwidth (e467ef6ec, Yousong Zhou) monitor: query reduce percentile (88bcb8219, zhaoxiangchun) notify: clean data for receiver_notifications (516066955, rainzm) notify: delete the notification 1 month ago and remove the data migration (928c0602d, rainzm) region: wire: allow filter by bandwidth (861cd47e6, Yousong Zhou)   kubecomps Repo: https://github.com/yunionio/kubecomps\n15 commits to kubecomps - v3.6.6 since this release.\nBug Fixes (2)  build: embed heml pkgs remove it (417dafd, Zexi Li) kubeserver: create bucket for monitor component (b310baa, Zexi Li)  Chore (2)  build: use helm docker image to build (b4155a8, Zexi Li) git config: add git commit msg template (9a14d89, Zexi Li)  Features (8)  build: go generate use vendor (add2ddb, Zexi Li) calico-node-agent: support enable all network interface proxy_arp (4d7a88e, Zexi Li) drivers: add kvm provider (5fc2b98, Zexi Li) kubeserver: add kubeserver service (6575705, Zexi Li) kubeserver: integrate ansible and kubespray (16bc1b7, Zexi Li) kubeserver: support create cluster inside onecloud vpc (7a793ff, Zexi Li) prom-receiver: add simple prometheus receiver component (fd5e3a3, Zexi Li) repo: repo url allow updated (870d29d, Zexi Li)  Others (3)  build calico-node-agent (e4e0506, Zexi Li) add metasvc demo code (8ee0335, Zexi Li) calico-node-agent added (2071d5f, Zexi Li)  ","excerpt":"Release time: 2021-01-27 21:03:27\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-6/","title":"v3.6.6"},{"body":"发布时间 2021-01-27 21:03:27\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n23 commits to cloudpods - v3.6.6 since this release.\nBug Fixes (18)  cloudcommon: missing set_meta opslog (#9916) (040a45aa4, Jian Qiu) cloudevent: update aliyun lookupevent api (178a7071f, Qu Xuan) host: fix wait time after mount fuse fs (5ccece54a, wanyaoqi) keystone: user create without password can login with any password (2af9104d9, Qiu Jian) monitor: domain view can list scope is domain or project alertrecords; fix nodata alert return info (5dc1486e7, zhaoxiangchun) notify: remote ‘lang’ filter when contact type is ‘mobile’ (488502561, rainzm) notify: add a time limit for resending notifications (de1553770, rainzm) notify: add index fro receiver_notification (7c87d73d9, rainzm) notify: send websocket messages according to language preference (8a9f3e09e, rainzm) region: purge snapshot with not status check (67082f32d, Qu Xuan) region: cloudaccount: allow only one sync func in flight (606b241b0, Yousong Zhou) region: fix zstack delete server with local disks (fed639513, Qu Xuan) region: avoid clean all rules when sync secgroups (c6893892d, Qu Xuan) region: azure default subscription id (f3a567f63, Qu Xuan) region: aws not support create server with public ip (180b12216, Qu Xuan) region: exported number of vpcs less than listed (a8d550d4d, Qiu Jian) region: optimized secgroup rule sync (b96b2f0b5, Qu Xuan) region: avoid azure detach disk failed (299d3bed6, Qu Xuan)  Features (5)  climc: wires: allow filter by bandwidth (e467ef6ec, Yousong Zhou) monitor: query reduce percentile (88bcb8219, zhaoxiangchun) notify: clean data for receiver_notifications (516066955, rainzm) notify: delete the notification 1 month ago and remove the data migration (928c0602d, rainzm) region: wire: allow filter by bandwidth (861cd47e6, Yousong Zhou)   kubecomps 仓库地址: https://github.com/yunionio/kubecomps\n15 commits to kubecomps - v3.6.6 since this release.\nBug Fixes (2)  build: embed heml pkgs remove it (417dafd, Zexi Li) kubeserver: create bucket for monitor component (b310baa, Zexi Li)  Chore (2)  build: use helm docker image to build (b4155a8, Zexi Li) git config: add git commit msg template (9a14d89, Zexi Li)  Features (8)  build: go generate use vendor (add2ddb, Zexi Li) calico-node-agent: support enable all network interface proxy_arp (4d7a88e, Zexi Li) drivers: add kvm provider (5fc2b98, Zexi Li) kubeserver: add kubeserver service (6575705, Zexi Li) kubeserver: integrate ansible and kubespray (16bc1b7, Zexi Li) kubeserver: support create cluster inside onecloud vpc (7a793ff, Zexi Li) prom-receiver: add simple prometheus receiver component (fd5e3a3, Zexi Li) repo: repo url allow updated (870d29d, Zexi Li)  Others (3)  build calico-node-agent (e4e0506, Zexi Li) add metasvc demo code (8ee0335, Zexi Li) calico-node-agent added (2071d5f, Zexi Li)  ","excerpt":"发布时间 2021-01-27 21:03:27\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-6/","title":"v3.6.6"},{"body":"Release time: 2021-01-15 11:58:08\n cloudpods Repo: https://github.com/yunionio/cloudpods\n2 commits to cloudpods - v3.6.5 since this release.\nBug Fixes (2)  cloudid: optimized saml sso (8858e7913, Qu Xuan) region: update google latitude and langtitude (863a28f29, Qu Xuan)  ","excerpt":"Release time: 2021-01-15 11:58:08\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-5/","title":"v3.6.5"},{"body":"发布时间 2021-01-15 11:58:08\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n2 commits to cloudpods - v3.6.5 since this release.\nBug Fixes (2)  cloudid: optimized saml sso (8858e7913, Qu Xuan) region: update google latitude and langtitude (863a28f29, Qu Xuan)  ","excerpt":"发布时间 2021-01-15 11:58:08\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-5/","title":"v3.6.5"},{"body":"Release time: 2021-01-14 18:20:41\n cloudpods Repo: https://github.com/yunionio/cloudpods\n7 commits to cloudpods - v3.6.4 since this release.\nBug Fixes (4)  notify: update receiver’s lang when update event occurs (a2613e6bc, rainzm) notify: panic for err (a8b14bb73, rainzm) region: optimized azure reset linux pasword (36bd1baaf, Qu Xuan) region: AWS buckets in us-east-1 have null location (fb3456c42, Qiu Jian)  Features (3)  monitor: influxQuery add P95 reduce (64dec4254, zhaoxiangchun) monitor: support monitor overview influxdb query pass through (1fc01ebe9, zhaoxiangchun) notify: change default verify expire interval 5m =\u003e 2m (98ca80e63, rainzm)  ","excerpt":"Release time: 2021-01-14 18:20:41\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-4/","title":"v3.6.4"},{"body":"发布时间 2021-01-14 18:20:41\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n7 commits to cloudpods - v3.6.4 since this release.\nBug Fixes (4)  notify: update receiver’s lang when update event occurs (a2613e6bc, rainzm) notify: panic for err (a8b14bb73, rainzm) region: optimized azure reset linux pasword (36bd1baaf, Qu Xuan) region: AWS buckets in us-east-1 have null location (fb3456c42, Qiu Jian)  Features (3)  monitor: influxQuery add P95 reduce (64dec4254, zhaoxiangchun) monitor: support monitor overview influxdb query pass through (1fc01ebe9, zhaoxiangchun) notify: change default verify expire interval 5m =\u003e 2m (98ca80e63, rainzm)  ","excerpt":"发布时间 2021-01-14 18:20:41\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-4/","title":"v3.6.4"},{"body":"Release time: 2021-01-13 18:58:04\n cloudpods Repo: https://github.com/yunionio/cloudpods\n28 commits to cloudpods - v3.6.3 since this release.\nApigateway (2)  try return httperrors (157bfb696, Yousong Zhou) reword error messages (83adeaae4, Yousong Zhou)  Bug Fixes (16)  cloudevent: default policy (c4db4bc43, Qu Xuan) cloudid: multi cloudaccount with saml user (53c8c1605, Qu Xuan) host-deployer: add retry on check is vgactived (3f4b2163f, wanyaoqi) keystone: add suggestion previliges to meter admin (86fda0f7d, Qiu Jian) monitor: monitor overview throw err (e5b637906, zhaoxiangchun) monitor: fix monitoroverview and meter send alerting info to notify (af0813cd0, zhaoxiangchun) monitor,suggestion: order commonalert metric and modify alertresoruce type value and add suggestion models climc (3124113e2, zhaoxiangchun) notify: set status after sending (83dd53424, rainzm) notify: loose phone number rules in updating receiver (287f98ac8, rainzm) notify: loose mobile phone number matching rules (644ab6f92, rainzm) notify: avoid duplication of notification names (bc0106902, rainzm) notify: set ModelManager in Receiver() (88fa743e4, rainzm) region: optimized for qcloud prepaid instance delete (e775e798a, Qu Xuan) region: avoid auzre request timeout (f64c6c54d, Qu Xuan) region: aws elb backendgroup sync bugfix (4fa95bf60, tangbin) region: avoid panic when register service not work (1afe6ef41, Qu Xuan)  Features (2)  notify: send notifications of different templates according to language (dd7d34402, rainzm) region: server sku os_arch \u0026 cpu_arch checking (331d9d2a6, tangbin)  Guest_deploy_task (1)  log other deploy details with i18n (78b6f8566, Yousong Zhou)  Keystone (1)  reword error messages (d7f05e983, Yousong Zhou)  Locales (4)  generate (464e0450f, Yousong Zhou) zh-CN: add some translations (a4b5562bd, Yousong Zhou) generate (f0354d0c9, Yousong Zhou) zh-CN: extract current (c3c3c0075, Yousong Zhou)  Others (2)  server skus filter by mem size fix (5d075bbaa, tangbin) loadbalancer add lb purge validate (f31216be0, tangbin)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.6.3 since this release.\nBug Fixes (2)  cloudmon: crond commond fmt err (0af8216, zhaoxiangchun) operator: modify crontab default interval (500efb8, zhaoxiangchun)  Features (1)  cloudmon: add cloudmon alertrecord crontab (0533944, zhaoxiangchun)   ocadm Repo: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.3 since this release.\nFeatures (1)  longhorn: support migrate to source pvc from longhorn pvc (ed1b494, wanyaoqi)  ","excerpt":"Release time: 2021-01-13 18:58:04\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-3/","title":"v3.6.3"},{"body":"发布时间 2021-01-13 18:58:04\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n28 commits to cloudpods - v3.6.3 since this release.\nApigateway (2)  try return httperrors (157bfb696, Yousong Zhou) reword error messages (83adeaae4, Yousong Zhou)  Bug Fixes (16)  cloudevent: default policy (c4db4bc43, Qu Xuan) cloudid: multi cloudaccount with saml user (53c8c1605, Qu Xuan) host-deployer: add retry on check is vgactived (3f4b2163f, wanyaoqi) keystone: add suggestion previliges to meter admin (86fda0f7d, Qiu Jian) monitor: monitor overview throw err (e5b637906, zhaoxiangchun) monitor: fix monitoroverview and meter send alerting info to notify (af0813cd0, zhaoxiangchun) monitor,suggestion: order commonalert metric and modify alertresoruce type value and add suggestion models climc (3124113e2, zhaoxiangchun) notify: set status after sending (83dd53424, rainzm) notify: loose phone number rules in updating receiver (287f98ac8, rainzm) notify: loose mobile phone number matching rules (644ab6f92, rainzm) notify: avoid duplication of notification names (bc0106902, rainzm) notify: set ModelManager in Receiver() (88fa743e4, rainzm) region: optimized for qcloud prepaid instance delete (e775e798a, Qu Xuan) region: avoid auzre request timeout (f64c6c54d, Qu Xuan) region: aws elb backendgroup sync bugfix (4fa95bf60, tangbin) region: avoid panic when register service not work (1afe6ef41, Qu Xuan)  Features (2)  notify: send notifications of different templates according to language (dd7d34402, rainzm) region: server sku os_arch \u0026 cpu_arch checking (331d9d2a6, tangbin)  Guest_deploy_task (1)  log other deploy details with i18n (78b6f8566, Yousong Zhou)  Keystone (1)  reword error messages (d7f05e983, Yousong Zhou)  Locales (4)  generate (464e0450f, Yousong Zhou) zh-CN: add some translations (a4b5562bd, Yousong Zhou) generate (f0354d0c9, Yousong Zhou) zh-CN: extract current (c3c3c0075, Yousong Zhou)  Others (2)  server skus filter by mem size fix (5d075bbaa, tangbin) loadbalancer add lb purge validate (f31216be0, tangbin)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.6.3 since this release.\nBug Fixes (2)  cloudmon: crond commond fmt err (0af8216, zhaoxiangchun) operator: modify crontab default interval (500efb8, zhaoxiangchun)  Features (1)  cloudmon: add cloudmon alertrecord crontab (0533944, zhaoxiangchun)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n1 commits to ocadm - v3.6.3 since this release.\nFeatures (1)  longhorn: support migrate to source pvc from longhorn pvc (ed1b494, wanyaoqi)  ","excerpt":"发布时间 2021-01-13 18:58:04\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-3/","title":"v3.6.3"},{"body":"Release time: 2021-01-06 15:28:01\n cloudpods Repo: https://github.com/yunionio/cloudpods\n10 commits to cloudpods - v3.6.2 since this release.\nBug Fixes (6)  cloudevent: cloudevent is domain level resource (7d07b4aa5, Qu Xuan) esxiagent: nicIndex should be incremented (77e56db09, rainzm) monitor: modify totalrecord query (562aefda8, zhaoxiangchun) monitor: modify rds,redis,oss field descriptions (589daf506, zhaoxiangchun) region: server start check host memory is enough (a066301ae, wanyaoqi) region: rds list with secgorups info (b96f22527, Qu Xuan)  Features (4)  monitor: get today alerting resource info (de2b95cab, zhaoxiangchun) region: stop guest before freeze (38914b967, wanyaoqi) region: be compatible with changes in monitor api in scaling group (987b641bd, rainzm) suggestion,apigateway: add analysispredict climc (40c8b54cb, zhaoxiangchun)  ","excerpt":"Release time: 2021-01-06 15:28:01\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-2/","title":"v3.6.2"},{"body":"发布时间 2021-01-06 15:28:01\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n10 commits to cloudpods - v3.6.2 since this release.\nBug Fixes (6)  cloudevent: cloudevent is domain level resource (7d07b4aa5, Qu Xuan) esxiagent: nicIndex should be incremented (77e56db09, rainzm) monitor: modify totalrecord query (562aefda8, zhaoxiangchun) monitor: modify rds,redis,oss field descriptions (589daf506, zhaoxiangchun) region: server start check host memory is enough (a066301ae, wanyaoqi) region: rds list with secgorups info (b96f22527, Qu Xuan)  Features (4)  monitor: get today alerting resource info (de2b95cab, zhaoxiangchun) region: stop guest before freeze (38914b967, wanyaoqi) region: be compatible with changes in monitor api in scaling group (987b641bd, rainzm) suggestion,apigateway: add analysispredict climc (40c8b54cb, zhaoxiangchun)  ","excerpt":"发布时间 2021-01-06 15:28:01\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-2/","title":"v3.6.2"},{"body":"Release time: 2020-12-29 21:30:18\n cloudpods Repo: https://github.com/yunionio/cloudpods\n7 commits to cloudpods - v3.6.1 since this release.\nBug Fixes (5)  climc: host add netif add params bridge/interface (7335875ef, wanyaoqi) cloudcommon: splitable may not initialize underlying table (732159137, Qiu Jian) host-deployer: add log line on blkid failed (a4323eab4, wanyaoqi) notify: inject domain info in ReceiverManager.FetchOwnerId (25baa6f50, rainzm) region,host: sync status check block jobs (d2ec564cc, wanyaoqi)  Features (2)  db: progressive inspection when determining the required scope (af274d7ad, rainzm) region: multilingual timer description (8d98218f0, rainzm)  ","excerpt":"Release time: 2020-12-29 21:30:18\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-1/","title":"v3.6.1"},{"body":"发布时间 2020-12-29 21:30:18\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n7 commits to cloudpods - v3.6.1 since this release.\nBug Fixes (5)  climc: host add netif add params bridge/interface (7335875ef, wanyaoqi) cloudcommon: splitable may not initialize underlying table (732159137, Qiu Jian) host-deployer: add log line on blkid failed (a4323eab4, wanyaoqi) notify: inject domain info in ReceiverManager.FetchOwnerId (25baa6f50, rainzm) region,host: sync status check block jobs (d2ec564cc, wanyaoqi)  Features (2)  db: progressive inspection when determining the required scope (af274d7ad, rainzm) region: multilingual timer description (8d98218f0, rainzm)  ","excerpt":"发布时间 2020-12-29 21:30:18\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-1/","title":"v3.6.1"},{"body":"Release time: 2020-12-29 14:17:58\n cloudpods Repo: https://github.com/yunionio/cloudpods\n1029 commits to cloudpods - v3.6.0 since this release.\nAdd (2)  DisableDelete for lb (73e8080d4, Qu Xuan) vpc peering connection (bd22eb0b1, lvyangyang)  Apigateway (1)  disable influxdb service query proxy (81da6c577, Zexi Li)  Baremetal (1)  fix pxe filter network by guest_dhcp (129001dfb, Zexi Li)  Bug Fixes (516)  自动生成华为云rds密码 (a08fb0044, Qu Xuan) add keystone sync user debug info (#7633) (585ba0ff5, Jian Qiu) turn off some default project policies (#7636) (cb573d340, Jian Qiu) aovid truncated data (#7643) (21342005e, 屈轩) cleanup logic for nics of pending_deleted guests (#7668) (7336ff732, Jian Qiu) 不限制openstack系统盘类型 (#7674) (a5c3a34b7, 屈轩) server purge may fail (#7696) (3ccf78ae7, Jian Qiu) http error limit request body length (#7699) (d0842c62c, Jian Qiu) apigateway user info add is_local attribtue (#7694) (8ba3f86b5, Jian Qiu) vmware esxi host detects vnic portgroup info (#7649) (2ea855a42, Jian Qiu) avoid delete aws iam user failed (#7664) (8cf594785, 屈轩) add details for account delete (#7702) (416afb686, 屈轩) climc params (5eaece551, Qu Xuan) avoid policy value not save (0cc0a1991, Qu Xuan) avoid nil panic (5b3bfd1b3, Qu Xuan) compatiblity fixes with lenovo RD620 and huawei 2288 (f6eb9fc19, Qiu Jian) valid update name and update dns recordset (80c75b19a, Qu Xuan) search by chs projectname or domainname (64f5bc748, Qiu Jian) optimized cloudid (fd318a9cd, Qu Xuan) optimzed sync (ce032ecf1, Qu Xuan) find correct esxi host access ip (053507c3e, Qiu Jian) remove redundant auth cookie in sso login (ef138c05d, Qiu Jian) support VirtualDiskRawDiskMappingVer1BackingInfo (a672c6b33, Qiu Jian) scheduler aware policy (b8238d205, Qiu Jian) cloudid optimized (7232695df, Qu Xuan) network address list respect privilige of user (09944bc1b, Qiu Jian) skup syncing lb, rds, redis instances in tasks (9de29d9af, Qiu Jian) user idps attributes includes template name (383bdef22, Qiu Jian) aliyun wulanchabu region (46e6d37c2, Qu Xuan) sync groups for user (491efe579, Qu Xuan) check assign-host previliges (4d5aadb64, Qiu Jian) prevent users in disabled idp from login (9e1ff8819, Qiu Jian) ignore 409 error when doing redfish power on (65141a277, Qiu Jian) wire usage stats incorrect (d7e330f9e, Qiu Jian) uniform cachedimage active status (f09bb6682, Qu Xuan) optimzed clouduser password (a00447022, Qu Xuan) recode project-role rpc handle to support group role assignment results by user or project (332ba04bd, Qiu Jian) avoid create public zone failed (d9626e310, Qu Xuan) optimzed clouduser (7361da408, Qu Xuan) optimized qcloud keypair (f4ecde37c, Qu Xuan) 腾讯云不支持同时设置秘钥和密码,若设置秘钥，则将密码置空 (a2b9a7906, Qu Xuan) 平滑迁移数据 (8284f7b29, Qu Xuan) add dns recordset dns value check (fc8fb8af5, Qu Xuan) avoid sync natgateway eip panic (dab5b6e43, Qu Xuan) 默认不自动合并安全组 (8e39b7ccb, Qu Xuan) disable webkms for esxi older than 6.5 (239797e33, Qiu Jian) check host sharing status when considering whether a host is assignable (04f036ce2, Qiu Jian) cos use proxy (bb7ad07c2, Qu Xuan) add doc for qcloud (3c29402c1, Qu Xuan) 支持自动根据云上项目修改本地项目名称 (e86509a88, Qu Xuan) lock/unlock cleanup (41f932e38, Qiu Jian) bucket object cnt fix (cbd08138b, Qu Xuan) 避免名称重复 (1b3d3310d, Qu Xuan) enable generate name caused compability issue (1a3acbd05, Qiu Jian) omit empty fail reason (5a91ae886, Qiu Jian) keystone initialize data skip nil extra fields (b80fa64b6, Qiu Jian) disable qcloud verifyAppId temporarily (01fe002dd, Qiu Jian) feature: vpc peering connection support (466d96135, Qu Xuan) add esxicli vmrc/webmks command (5a8ee9d91, Qiu Jian) get jnlp xml from dell idrac6,7,9 (eea88ffbe, Qiu Jian) reset user password without check (b5f01171d, Qiu Jian) scheduler token not support policy (c516525db, Qiu Jian) avoid not reture cloudprovider.ErrNotFound error (37b87d1a5, Qu Xuan) 优化提取显示主账号名 (924053685, ioito) 避免添加新账号后长时间未同步iam用户 (fadb52044, ioito) dns 错误信息补全 (8f7a59894, lvyangyang) apigateway userinfo includes project metadata (06c1de7c1, Qiu Jian) 避免腾讯云同步虚拟机ip异常 (146683059, ioito) role assignment filter by users not working for effective users in groups (6cbd81181, Qiu Jian) error 值重叠 (9b54d58a3, lvyangyang) avoid account delete failed (8be3cfd22, ioito) use i18n.Table to handle Chinese-English conversion (c5a78a902, rainzm) scope resource filter by owner (4a27d4912, Qiu Jian) 仅在可用区故障时可强制挂载磁盘 (0a4bd281d, ioito) avoid serial vm creation (f7010a6d7, ioito) avoid compare err with cloudprovider.ErrNotFound direct (cb919f288, ioito) sql err (1b9106032, ioito) avoid account delete failed (8c0776c2a, ioito) allow cross doamin resource sync (eaef5a757, ioito) openstack zone not emulated (a31339f68, ioito) avoid purge storages (a8996ec9d, Qu Xuan) add climc support vpc/schedtag user metadata (bd122a01f, Qiu Jian) allow create disk prefer manager (74cb19cd8, Qu Xuan) dns zone cache owner info (a14b4e590, Qu Xuan) 支持公有云域过滤操作日志 (ef3d74f4e, Qu Xuan) filter cloudprovider/network by host-schedtag-id (23a18a81f, Qiu Jian) suffix template cache key (5f10a9a39, rainzm) filter storages by host schedtag (69561b40f, Qiu Jian) avoid sync dns zone cache status is init (9d76c3e02, Qu Xuan) allow domain admin view shared dns zone records (d45d48806, Qu Xuan) revert filter-by-owner changes of scoped resource (4e4ea5e6b, Qiu Jian) oidc response user’s info (be4a76b25, Qiu Jian) emulated wire not sync vpc shared info (c5cfceeb9, Qiu Jian) 允许域管理员可以看到共享的dns zone cache列表 (24fcccf5f, Qu Xuan) error code of external bucket not found error should be 404 (6a5fdc5d0, Qiu Jian) avoid qcloud secgroup cache name not sync (35e57a833, Qu Xuan) server name auto index should start from 1 (a08a779ed, Qiu Jian) filter cached images with host schedtag (1c0c66fd4, Qiu Jian) qcloud set hostname for instance (aa7495c9a, Qu Xuan) avoid slice out of bounds (e010c5c1f, rainzm) validate secgroup purge condition (6f2359329, Qu Xuan) not clean pending domain usage (624c4db06, Qiu Jian) format errors that block make test (5e5b0613f, Qiu Jian) ldap sync not update user’s phone and email (13fa3c299, Qiu Jian) project_id in resource details not correct (187dee690, Qiu Jian) vpc peering http error params (db7d32cd1, lvyangyang) qcloud instance with max bandwidth (bb62c0392, Qu Xuan) qcloud eip with bandwidth attr (b32c54f7c, Qu Xuan) trans google new region name (17ff08282, Qu Xuan) 支持带宽包用户 (f3c819299, Qu Xuan) support public ip create (02ec88ccc, Qu Xuan) sync huawei bucket project info (4b1d914b8, Qu Xuan) 优化安全组规则同步 (efa5978cf, Qu Xuan) support fake tempalte when searching template vm (281d1c45d, Rain) use new api (db6846aab, Qu Xuan) filter role assignments by project domains id or name (b2add97a0, Qiu Jian) filter project role with system=true (e2e186a75, Qiu Jian) support filter rds sku by provider (0dc485d58, Qu Xuan) allwo filter resource by with-meta and with-user-meta filter (c4d30371e, Qiu Jian) 避免并发同步安全组导致规则混乱 (0e3f78100, Qu Xuan) resolve with_meta filter conflict (cc7423d55, Qiu Jian) sync dns records after sync vpcs (914b76069, Qu Xuan) get images distinct field (f14ec60a7, Zexi Li) hostname for instance (65582cab9, Qu Xuan) huawei clirc region not correct (3d7021322, Qu Xuan) add rds cpu and memory usage (d7ae0eaa8, Qu Xuan) use correct worker (dc8086b3c, Qu Xuan) do not lock guest after lock eip, to prevent possible dead lock (0466b2c80, Qiu Jian) remote update metadata may cause metadata update loop (20f3feaab, Qiu Jian) reduce change config logs (d681a148d, Qiu Jian) missing authenticate action log for user web login (adbf51316, Qiu Jian) 新增google存储类型 (f7b16c592, Qu Xuan) cancel pending-delete should increase resource quota usages (2486aa307, Qiu Jian) monitor commonalert not detach alert resource (06a30edcf, Zexi Li) add lb quota check (5e4cc3314, Qu Xuan) add rds quota check (f74e345b0, Qu Xuan) secgroup quota support (adcce7538, Qu Xuan) add aliyun new region (80b0ed3cc, Qu Xuan) 避免冲掉设置的到期释放时间 (98bd229b3, Qu Xuan) don’t update NextSyncTime when snapshots that should be added has not (213d495a3, rainzm) sync rds account host info (fb7d22f67, Qu Xuan) add duration match (f159c7318, Qu Xuan) qcloud 5.5 single zone (cdd652c1e, Qu Xuan) 支持批量创建rds (9a03bf17c, Qu Xuan) 支持多安全组 (5cd26b297, Qu Xuan) 避免参数异常 (9821f7fe9, Qu Xuan) climc vpc-create missing cloudregion_id (588fff60f, Qiu Jian) server usage status not correct (ce06e078f, Qiu Jian) avoid delete public ip when sync eip list (d60dee6a9, Qu Xuan) qcloud server create (0e5835ffa, Qu Xuan) optimized cloudaccount climc (64740ff0f, Qu Xuan) avoid sync project panic (6ee94ab41, Qu Xuan) set secgroup status (b6016939c, Qu Xuan) avoid sync part of rds (a01cd0a81, Qu Xuan) use option manager for scheduler (8f2c51469, Qiu Jian) allow set customized private prefixes (dcc689cc1, Qiu Jian) fail to delete public_ip eip (554ec8873, Qiu Jian) make test go vet error (08bb11db6, Qiu Jian) scopedpolicies and scopedpolicybindings swagger resource name (46fe31cbd, Qiu Jian) compatible with qcloud zonal bucket (3f568a63d, Qiu Jian) classic vpc for rds (0f4114449, Qu Xuan) sync rds class vpc (d9e72f78e, 屈轩) enforce response charset (9073461f9, Qiu Jian) secgroup cache tenant_id (373166c50, Qu Xuan) filter scopedpolicybindings with multiple categories (56e5b177d, Qiu Jian) save service config changes may send invalid action log (354bcd9f0, Qiu Jian) scopedpolicybinding filter by category sql error (10a4d86d2, Qiu Jian) avoid not found cdbro- mysql instance (dc59a0872, Qu Xuan) add qcloud hssd (5b4efddec, Qu Xuan) scopedpolicybindings filter by scope project (32fe10b00, Qiu Jian) elasticcache quota not take effect (9f122f745, Qiu Jian) add rds status and expired time (f47f2c51e, Qu Xuan) auth permission result incorrect (4349cc7f9, Qiu Jian) save sso login status in cookie (ae327021d, Qiu Jian)   server generate name should be historically unique 2. ipaddr of a batch of server is in the same order as generated name (4431acde8, Qiu Jian)   missing column error when order by extra fields (03d17e6fb, Qiu Jian) 支持多内存过滤套餐 (25aed0a7e, Qu Xuan) aliyun eip api (cdead1c47, Qu Xuan) change owner should update quota usages (1bd4b85bf, Qiu Jian) add panic log for worker task (e97cd02b5, Qu Xuan) sync remove dirty rds accounts (008fd554c, Qu Xuan) search by name and order by scopedpolicy for scopedpolicybindings (73e117c6e, Qiu Jian) change level of scopedpolicy to system (79ad3c188, Qiu Jian) support rds set auto renew (a7e832488, Qu Xuan) aws secgroup out rule is deny any (bc28c8bdf, Qu Xuan) rds task fix (0272c7695, Qu Xuan) qcloud rds set renew flag (c56ebfd04, 屈轩) role-set-policies support update only operation (d66ee1fd4, Qiu Jian) avoid lock reentry (cfebba255, Qu Xuan) avoid check region log every time when account status is unknown (c2c9edd9c, Qu Xuan) renew rds (98d20725a, Qu Xuan) support create 512mb server sku (c7a6ec8e9, Qu Xuan) public ip and duration for create params (d7ab5fdd1, Qu Xuan) avoid panic (7a6022561, Qu Xuan) creating esxi guest from instance snapshot (781870953, rainzm) support resize qcloud hssd disk (b8410be11, Qu Xuan) keystone init empty catalogy cause panic (b84f23796, Qiu Jian) host memory usage status not correct (157fb1e48, Qiu Jian) mcclient panic when keystone init empty service catalog (2a1b5f8a7, Qiu Jian) baremetal usage should exclude converted hypervisor (8fcc85745, Qiu Jian) set isp’s status as ‘instance_snapshot_reset’ when reseting guest from isp (8ef1af0db, rainzm) adjust default identity quota (4d04059bc, Qiu Jian) qcloud create bucket without appId (38018080c, Qiu Jian) add error cause (83f5ce431, Qu Xuan) support import rules for secgroups (cece2852a, Qu Xuan) add err handler for notifyRobot (36dec7baa, rainzm) 支持关机不收费 (11c3f6a6e, Qu Xuan) add host-joint resources into domain level resources (7fbe72ce5, Qiu Jian) add host.memoty.total and host.cpu.total usage stats (bc5c74b1b, Qiu Jian) cloudid api addr (4592299ff, Qu Xuan) 优化azure资源同步 (0d85df52b, Qu Xuan) optimized jsonRequest (06581ad1a, Qu Xuan) allow disk attach to multiple guests (0718da3d7, Qiu Jian) avoid openstack image-list failed (#7640) (2716d4527, 屈轩) apigateway: allow logout by get method (ff24d4a3e, Qiu Jian) awscli: instance-rebuild-root fix (eee13a549, TangBin) baremetal: convert to host failed (eb857594f, Zexi Li) baremetal: clear jbod disks do PDMakeGood (f6bf3050f, Zexi Li) climc: replace ' -\u003e \" (cb594298d, Qu Xuan) climc: server-create –desc not work (df45ced78, Zexi Li) cloudcommon: add rbac_policy_refresh_internval_seconds option (6caec234a, Qiu Jian) cloudcommon: adjust policy refresh to default 30 seconds (b9d30c08a, Qiu Jian) cloudcommon: disable quota check by default (6f7a3cf8a, Qiu Jian) cloudcommon: panic when query an empty splitable model manager (ba8754687, Qiu Jian) cloudcommon: query filter ineffective for splitable (41b694ad3, Qiu Jian) cloudcommon: perform public should check the sharing scope of resource (de47e4a69, Qiu Jian) cloudcommon: supplement i18n translations (83a5f95b0, Qiu Jian) cloudevent: adjust cloudevents resource scope (540af1a3a, Qiu Jian) cloudevent,devtool: missing metadata table (5d298e71b, Qiu Jian) cloudid: add for notify templete (2faead462, Qu Xuan) cloudid: avoid new public account sync system policy delay 1 day (f05fc1894, Qu Xuan) cloudid: avoid empty auth url (869740775, Qu Xuan) cloudid: sync qcloud collaborators user (82dc17907, Qu Xuan) cloudid: optimized system policy sync (8a5e682b0, Qu Xuan) cloudid: auto update saml provider metadata (61d21d2b4, Qu Xuan) cloudid: huawei saml provider create issue (b460a73b0, Qu Xuan) cloudid: avoid use invalid character for role name (fd948b8cc, Qu Xuan) cloudmon: deal cannot get azure metric (d2459a5cc, –global) compute: filter cachedimage with health storage (625bf2356, rainzm) compute: return InputParameterError while ValidateCreateData (f11a1df3a, rainzm) esxi: check whether some fields of vm are nil (3c59d7fec, rainzm) esxi: filter linkLocalAddress (e4217074c, rainzm) esxi: return when host.Vm is empty (08041d55d, rainzm) esxi: fetch templatevm from datacenter before clone vm (5c209fe3d, rainzm) esxi: check nil value when NewVirtualMachine (01ba4b952, rainzm) esxi: don’t specify spec.Identity when osName is empty (be0e8d73b, rainzm) esxi: Guarantee the uniqueness of the schedtag for esxi host (370e7723b, rainzm) esxi: resize root disk after creating vm (9daef7d97, rainzm) esxi: resize root disk after cloning vm (bd014a6ad, rainzm) esxi: use correct device index (6afa80305, rainzm) esxi: add device after cloning vm (7aa5b28b3, rainzm) esxi: no callback in uploadHandler (d616b4004, rainzm) esxi: use system disk of template only when cloning vm (bffa601dc, rainzm) esxi: search template from whole vCenter (d4c9e6e56, rainzm) esxi: filter vmdk item in lease.info (26b1050b3, rainzm) esxi: return sumsize of disks fo template (d01b6e150, rainzm) esxiagent: add HostDelayTaskWorkerCount (a0c34a044, rainzm) esxiagent: check whether regexp is nil (e43c86586, rainzm) esxiagent: return image extid not id (5789c6ded, rainzm) esxiagent: add humanized tips when searching vm failed (eb3da9369, rainzm) git,make: 更新获取 git branch 的规则 (e8376f998, Zhang Dongliang) git,make: git branch 获取方式优化 (d7d4e6bf6, Zhang Dongliang) git,make: 修正 gitbranch 变量的获取方式，允许外部传入，解决自动升级版本 tag 不统一的问题 (b0a95cbbe, Zhang Dongliang) glance: list image by os arch use startwith (f3404f678, wanyaoqi) glance: allow public and private operations of guestimage (5824b7add, rainzm) go.mod: remove k8s.io/kubernetes dependency (734be7c14, Zexi Li) host: add print migrate progress info (6c96e6d1f, wanyaoqi) host: make sure it won’t match vpc guests by accident (428e3ab1f, Yousong Zhou) host: update telegraf conf adapter to container environment (cbc285924, wanyaoqi) host: check lease living on restart etcd session (1611ddfcd, wanyaoqi) host: fix check hugepage enabled (fbd53b493, wanyaoqi) host: fix set windows password with escape charater (539baf7ba, wanyaoqi) host: wait put host offline success (83c1073f6, wanyaoqi) host: telegraf listen on local ipv4 address explicitly (460645871, Qiu Jian) host-deployer: cancel rename centos vgname (41631ec09, wanyaoqi) host-deployer: probe image info umount rootfs first (7ed96af33, wanyaoqi) hostdeployer: umount rootfs before resize partition (27378f2c8, rainzm) keystone: ignore service config update without changes (e817076c6, Qiu Jian) keystone: panic if request with an invalid token (5a7193198, Qiu Jian) keystone: oidc driver turn on debug mode if log-level is debug (e826239ab, Qiu Jian) keystone: update user attributes whenever user login (a4b4a1d16, Qiu Jian) keystone: rolepolicies list panic if filter by domain scope (695075a85, Qiu Jian) keystone: always upload\u0026refresh service config whenever service restart (97eb6e7bc, Qiu Jian) keystone: add i18n description for policy and role (334b347eb, Qiu Jian) keystone: ignore deleted policies when matching policies (86476c22a, Qiu Jian) keystone: allow unlink a domain from an IDP (253fba47f, Qiu Jian) keystone: not allow to disable sql driver (695aa81f7, Qiu Jian) keystone: allow refresh scope resource (3e7d3c829, Qu Xuan) keystone: service config ignore deploy server socket path (8287f3767, wanyaoqi) keystone: oidc data may be encapuslated in data field (95db19f10, Qiu Jian) locales: fix translation text (65571cc5e, Yousong Zhou) log: fail to submit action log (1a2a40a81, Qiu Jian) mcclient: options: webconsole: fix passing ssh port (8a4c1a0bb, Yousong Zhou) monitor: fix nodata alertresource list (cdcfc7923, –global) monitor: add resType filter (ccf065358, –global) monitor: suggestalert ignore throw err (81e4463ab, zhaoxiangchun) monitor: modify suggestrule process influxdb data (ed13fe9e1, zhaoxiangchun) monitor: other servier create alert add used_by param as a agreement (2ba98e7ce, –global) monitor: modify monitor serviceType in StartService() (db565fe0c, zhaoxiangchun) monitor: monitor notify international and 3.6 bugfix (ab14706ff, –global) monitor: sore reture info：resourceType,measurement (ba2233438, –global) monitor: delete suggestConfig auto init data (815e16eca, zhaoxiangchun) monitor: modify influxdbSuggestDriver query err (96d0f0e63, zhaoxiangchun) monitor: modify notify alertInfo and alertOk detach resource (68dfa8a8c, zhaoxiangchun) monitor: modify monitor nodata alert matching onecloud host func (2564f3c06, zhaoxiangchun) notify: check for changes before updating config (6591ccedc, rainzm) notify: return the result of the second attempt to execute the rpc call (b1ef8865b, rainzm) notify: pull contact for workwx, dingtalk and feishu (1517ed79f, rainzm) notify: allow normal user create their receiver (5bfc3128c, rainzm) notify: break down permissions of notifyconfigs (a9fafc451, rainzm) notify: customize the title of the verification email based on the copyright (d3aae0009, rainzm) notify: clean verifyNote when mark verified (e47f8a896, rainzm) notify: add AllOkContactTypes in where permanently enabled and verified ContactType (fbc951330, rainzm) notify: repull subcontact after changing config (c5acc1b48, rainzm) notify: Set default priority ‘normal’ when creating notification (9af0fe1fe, rainzm) notify: fit correctly when send notification via contact (cdf782537, rainzm) notify: return correct value when sortContactType (c522b4524, rainzm) notify: be compatible with keystone’s UsersV3.GetById (7ed99506a, rainzm) notify: modify name of notification to avoid duplication (087927871, rainzm) notify: Mark verified not enabled in MarkContactTypeVerified (9029e98c2, rainzm) notify: use AfterSend for contact with succuessful sending (9978f1954, rainzm) notify: Allow user list receivers (2ea4138f3, rainzm) notify: avoid deadlock (b1abb353a, rainzm) notify: Replace String() with GetString() (6509ed6e9, rainzm) region: fix backup server start task (735f10a50, wanyaoqi) region: fix modify tags log (de67ee5a2, lvyangyang) region: remove default value of diskConfig.Medium (216e11f29, rainzm) region: roll back the optimization of cachedimage list (eef90b58e, rainzm) region: allow member user get saml auth addr (dea1f29aa, Qu Xuan) region: optimized qcloud secgroup sync, only redis need secgroup be in same project (a84ed01f2, Qu Xuan) region: server skus add cloud_env (d39b3e820, TangBin) region: dbinstance skus sync log level fix (7be898fbc, TangBin) region: change dbinstance sku sync info log to warn (133ba01e9, TangBin) region: validate invalid character for password (35544a7c2, Qu Xuan) region: region qcloud secgroup project id (45a3ce82d, Qu Xuan) region: inspect invalid guest template (5602db8f5, rainzm) region: huawei vnc protocal fix (8db56d90f, TangBin) region: elb cached acl sync (69fa370b0, TangBin) region: optimized azure rebuild root (0252c00ef, Qu Xuan) region: avoid resize azure disk error (0bfa488ac, Qu Xuan) region: sync automatically snapshot for external disk (f13c12d0c, rainzm) region: init NextSyncTimeiwhen create snapshotpolicydisks (a2d221685, rainzm) region: add suffix ‘display’ for time_points and repeat_weekdays (92d862b17, rainzm) region: elastic cache name is empty fix (8bdcc83a8, TangBin) region: redis master zone empty fix (76eb12489, TangBin) region: lb listener filter by acl_id (08dda723b, TangBin) region: lbcert\u0026lbacl releated listener count bugfix (7b96d2593, TangBin) region: avoid timeout for waiting azure async task (f22fe4fe3, Qu Xuan) region: azure win os defualt user (a82327388, Qu Xuan) region: azure reset windows os password (81b31b2fe, Qu Xuan) region: compute binded disk count when deleting snapshotpolicy (2f6678f9a, rainzm) region: avoid qcloud sync local disk error (0c7adedaa, Qu Xuan) region: prevent dirty data when syncing snapshot (c6864e4ae, rainzm) region: detach all snapshotpolicy when realdeleting disk (e660946d2, rainzm) region: temp url sign wrong (c6a7a8701, Qu Xuan) region: omit vpc quota check if vpc created by owner (e38ea05c2, Qiu Jian) region: azure instance data disk storage type (3633baaa2, Qu Xuan) region: clear dirty data of snapshotpolicydisks when start up (7582ead4c, rainzm) region: attach network on register baremetal server (dcd893692, wanyaoqi) region: compute NextSyncTime for snapshotpolicydisk (97f93e6a1, Rain Zheng) region: allow delete resource which status is unknown (f35be9756, Qu Xuan) region: openstack available zones (7abd40c54, Qu Xuan) region: validate isolated devices on migrate (78e8d2f35, wanyaoqi) region: restore password validate condition (acedb4a4f, Qu Xuan) region: sync account id (e540e6561, Qu Xuan) region: allow resize system disk of esxi (46e42724b, rainzm) region: allow update rds account and database desc (e483d1901, Qu Xuan) region: support openstack subnet allocation pools (edcff8045, Qu Xuan) region: optimized qcloud prepaid instance delete (b5b7e89c6, Qu Xuan) region: optimized openstack change config (0d32c5d8e, Qu Xuan) region: sanitize eip charge type on all callsites (14d6c9d6e, Yousong Zhou) region: add SDnsZoneCache to DnsZoneCacheDetails (6efb3fc12, rainzm) region: delete guest without ‘purge’ in GuestDetachScalingGroupTask (0edec40b2, rainzm) region: code gen api error (b6ace002d, Qu Xuan) region: secgrouprule: set model manager (73f434e03, Yousong Zhou) region: aws default account (97eab67f0, Qu Xuan) region: openstack hosts sync (8692498cb, Qu Xuan) region: optimized rds backup create (2a6421258, Qu Xuan) region: reserved name checking while create redis account (a924c9552, TangBin) region: sort excludedNets correctly (c1d95bc31, rainzm) region: pass up error from InitializeData (d2e304bae, Yousong Zhou) region: import rule error hint (a8116b525, Qu Xuan) region: support rds secgroup operation (c5a974e74, Qu Xuan) region: gpu server change config use reserved resources (b07387b57, wanyaoqi) region: apsara is private cloud (21d9edcfa, Qu Xuan) region: aws lb create tags param (4cb9c936c, lvyangyang) region: sku enabled (92fee001e, Qu Xuan) region: allow reset huawei system disk (3ed59afae, TangBin) region: bucket get referer fix (0174e686d, lvyangyang) region: server login info\u0026 keypair import input parameter trimspace (f20ca8b9c, TangBin) region: cloudregion\u0026zone add namei18n (2a4a762f2, TangBin) region: get provider name via GetProviderName (843534c29, rainzm) region: get provider name via GetProviderName (1c475b091, rainzm) region: optimized server stop code (0a8348a36, Qu Xuan) region: network reserved ip count not consider expiration of reserved ips (d8684ea5a, Qiu Jian) region: fix set bucket referer (6f3cabda6, lvyangyang) region: auto sync cloudaccount resources (e056bb102, Qu Xuan) region: apsara optimized (38a0b76a5, Qu Xuan) region: purge private cloud sku (a2b15c596, Qu Xuan) region: sku.meta use global proxy (14bdbea3e, Qu Xuan) region: huawei sync storages bugfix (d5973135d, TangBin) region: prevent infinite recursion (d2ed19175, rainzm) region: optimized disk allocate sched failed log (27a2d36ff, Qu Xuan) region: baremetal post update related server (d001e0ec8, Zexi Li) region: qcloud request retry (e52fb3260, Qu Xuan) region: avolid aliyun fin bucket list objects error (061c5d6dd, Qu Xuan) region: wire get vpc releated hosts is empty (bcfb05019, Zexi Li) region: network clean schedule cache after real deleted (3c85ed11b, Zexi Li) region: vpc list usable fix (b30a40d70, TangBin) region: aws detach igw before delete vpc (da8232807, TangBin) region: vpc create validate cidr mask length (b46d51d1e, TangBin) region: set ownerId as userCred when can’t FetchOwnerId (dbb1d8072, rainzm) region: chooseHostStorage (cfc58a356, rainzm) region: aws create root device name fix (68a2111bf, TangBin) region: aws create storage type fix (9218c9e0b, TangBin) region: sku list query print missing error info (72153ecf5, TangBin) region: aws vpc delete related route table \u0026 internet gateway (9f52afdf9, TangBin) region: aws vpc delete skip delete default secgroup (5ff27734b, TangBin) region: aws delete vpc skipped delete main route table (ac8939494, TangBin) region: fetch correct ownerId in PerformPrepareNets (60490c75d, rainzm) region: aws create vpc with igw add defaultroute (efb436871, TangBin) region: vpc usable fix (596b376d8, TangBin) region: vpc sync external access mode fix (cef3d52f0, TangBin) region: aws sync vpc access mode bugfix (834f5a97d, TangBin) region: split brand as ‘YunionCloud’ and ‘云联壹云’ when notify server event (43d45a1b4, rainzm) region: climc add base projects options (4d4c84801, TangBin) region: allow delete storagecachedimage with ‘cache_failed’ status (ed2a86774, rainzm) region: add GetSlaveFieldName for ScalingGroupGuest (36f43fba9, rainzm) region: start vm when ‘auto_start’ is true (a14b556f2, rainzm) region: exclude network recommended for host when suggesting network for guest (930c64315, rainzm) region: skus add cloudenv (f17593d3f, TangBin) region: apsara metrics fix (a67b09668, Qu Xuan) region: remove i18n fix \u0026 zone \u0026region name support i18n (e28955301, TangBin) region: guestnetworks: use net calculated mtu (6e449c123, Yousong Zhou) region: ignore params.Disks when cloning vm from snapshot (4d13956bc, rainzm) region: add size and storageType for VMware InstanceSnapshot (6ea550d01, rainzm) region: make project of instance snapshot be consistent with the instance (727b89db5, rainzm) region: save when canceling pendingUsage (6d2e91439, rainzm) region: eip_allocate_task: set eip status allocate_fail on task failure (bb0568d18, Yousong Zhou) region: purge all instance snapshots when purging guest (1561d6539, rainzm) region: fix change config forecast (52f0afda0, wanyaoqi) region: update translations (25eb67b37, TangBin) region: create vm with eip task fix (2e401b566, TangBin) region: ctyun delete server bugfix (bc3fdb890, TangBin) region: vpc create data cird validate (ad39e790d, TangBin) region: network create mask length validate (755f4a93a, TangBin) region: remove unnecessary vpc validate create date error wrap (e4f372ba5, TangBin) region: set qcloud instance del timeout to 20m (2d7cdad8f, Qu Xuan) region: guest to create input keep billing info (f8c4c008f, wanyaoqi) region: do not change disk status on migrating (e26fb5cc1, wanyaoqi) region: qcloud bucket set cors (f1b428be0, lvyangyang) region: valid qcloud hssd for system disk (828141168, Qu Xuan) region: sync servers (d2d96b122, Qu Xuan) region: get qcloud bucket cdn-domain (b5d50fdfc, lvyangyang) region: ignore classic vpc checkout while add lb backend (4e811240e, TangBin) region: azure secgroup rule not allow with same priority and direction (2b0e8afe0, Qu Xuan) region: redis create account add name validate (0bbba6d3f, TangBin) region: private cloud sku create (1aec7ab25, Qu Xuan) region: delete aliyun account bugfix (e5289f8a4, TangBin) region: compatible aliyun fin oss (0feddb13a, Qu Xuan) region: avolid panic when list role’s policies (059cd7527, Qu Xuan) region: create redis validate network and sku zone match (c18d1f0e7, TangBin) region: checking cloudenv while create/update aliyun cloud account (767e06a1d, TangBin) region: purge account bugfix (96d2e2403, TangBin) region: create/update aliyun account bugfix (6391ef84d, TangBin) region: add RequestSyncstatusOnHost for SESXiGuestDriver (3fb175ba7, rainzm) region: elasticcache_instances: fix error fmt (ab7ba8322, Yousong Zhou) region: lbbackend: better error reporting for finding influxdb info (48f1cf12a, Yousong Zhou) region: cert\u0026acl cache delete condition check (c4eda6b5a, TangBin) region: aliyun elb listener\u0026lbbg sync project (1a4faf410, TangBin) region: elb acl validate create data fix (0c3a1986f, TangBin) region: lbacl \u0026lbcert default share scope (5a10db10c, TangBin) region: fix openstack instance os type (9c0ce58a0, Qu Xuan) region: add instance capability info(default account) (cfd7c5bd9, Qu Xuan) region: azure host with storage (8207a9c99, Qu Xuan) region: avoid openstack change config error (b60d18c06, Qu Xuan) region: apsara account fix (ab58f0335, Qu Xuan) region: add saml auth for capability (90709ab70, Qu Xuan) region: set classic vpc name to “-” (db00c8355, Qu Xuan) region: 避免从云上同步下来的主机，创建相同配置时network_id为空 (f150da6d9, Qu Xuan) region: add huawei gpssd desc (a9c6579b6, Qu Xuan) region: aliyun sync region fix (8682c71d9, TangBin) region: aliyun region name (bb091a3cb, TangBin) region: aliyun zone name fix (85324cadf, TangBin) region: openstack network is regional (ea41bb4f1, Qu Xuan) region: avoid public ip bandwidth is zero (5dea11952, Qu Xuan) region: change_ipaddr: retain eip_id on detach and attach (f33b9c716, Yousong Zhou) region: 避免OneCloud密码校验通过，公有云厂商密码校验不通过 (782372c35, Qu Xuan) region: azure async task (09adc5f60, Qu Xuan) region: azure metric request path (a79a61c41, Qu Xuan) region: validate cloudaccount saml auth params (a9ef8a1e3, Qu Xuan) region,baremetal: choose candidate network not according by types (9f2b137f0, Zexi Li) region,baremetal: pxe net reuse converted server access ip (829faa1ab, Zexi Li) region,climc: eips: rename arg name for requested eip addr (baff00483, Yousong Zhou) region,esxiagent: allow host behind a nat (197049dcb, Qiu Jian) region,glance: list by os arch adapt to empty strings (027a9439c, wanyaoqi) region,host: fix hot remove nic (7c1923abf, wanyaoqi) region,scheduler: fix netwrok predicate (c8ca855cb, wanyaoqi) region,yunionapi,glance: using global proxy (c1ecb6330, Qu Xuan) scheduler: select resource unordered (5b170650f, Zexi Li) scheduler: more standardized testing (81feadc13, rainzm) scheduler: filter InstanceGroup whose enabled is false (ca58fb8d2, Rain) scheduler: sku filter check zone if only prefer region specified (019c03413, Zexi Li) scheduler: clean expire cache before schedule (a16899c9b, Zexi Li) scheduler: fetch input network when specified (5cfd7f040, Zexi Li) scheduler: get candidates error more info (01124b312, Zexi Li) scheduler: sku by region and fill onecloud vpc networks (24fdb6e84, Zexi Li) scheduler: check candidate tag resource is nil (66eee7f72, Zexi Li) scheduler: storage predicate add actualCapacity filter (e7dd6bba0, Zexi Li) scheduler: fix array out of bounds when sorting hosts (de1b5bc96, rainzm) taskman: use admin token if task userCred token expired (b3c90a804, Qiu Jian) taskman: SSubTask: set model manager (a51a0845b, Yousong Zhou) treewide: fix task error recording (d86834777, Yousong Zhou) vpcagent: ovn: stable dns A record value (b3e196950, Yousong Zhou) vpcagent: models: guestnetworks: accomodate change_ipaddr (d1f1eda98, Yousong Zhou) webconsole: trim api_server url if end with slashes (1236a0326, Zexi Li)  Bugfix (5)  commonalert (444ff1901, zhaoxiangchun) qcloud pull metric (26965521f, zhaoxiangchun) collect esxi metric timout (ec3b5c09b, zhaoxiangchun) region: server change config rebase to sched task (5314ce98b, wanyaoqi) region: fix list by srever type normal (3756993c9, wanyaoqi)  Chore (2)  monitor: delete suggestion files (83e899d9a, zhaoxiangchun) util: update centos build version to 1.1-3 (d98060492, wanyaoqi)  Climc (12)  helper: add BatchCreate helper (91fab1217, Yousong Zhou) helper: create call as a standalone method (f6f4fc125, Yousong Zhou) s/Keyworkd/Keyword/ (9228b1792, Yousong Zhou) network-list with multiple –bgp-type args (6464597c9, Yousong Zhou) k8s machine show resource_id (0f2521487, Zexi Li) servers: create with eip bgp type (4d895d658, Yousong Zhou) add k8s federated resource update subcommand (ddf483bc0, Zexi Li) eip ops by bgp type (bc898e9e3, Yousong Zhou) add k8s fed resource sync action (037fa814f, Zexi Li) refactor k8s sub command (e2604d531, Zexi Li) add k8s federated resource cmd (742e45571, Zexi Li) k8s cluster grafana componet support subpath (930a72667, Zexi Li)  Cloudcommon (5)  db: GET: i18n for result of get property calls (c1468105f, Yousong Zhou) db: add man.GetI18N (d639b0a84, Yousong Zhou) db: modelbase: distinct-field: readability change (d6243fbc6, Yousong Zhou) get joint model should aware fieldname (1af48dc73, Zexi Li) joint model list should add field_name into query (a47553a7a, Zexi Li)  Cloudprovider (2)  add ErrAddressCountExceed (444e66647, Yousong Zhou) ICloudNic: add methods for secondary addresses (9840d7cf7, Yousong Zhou)  Code Refactoring (24)  find the most suitable storage (267929452, rainzm) apis: compute: remove EIP_CHARGE_TYPE_DEFAULT (a28fa3cf4, Yousong Zhou) climc: webconsole: use helper methods of response struct (ce00a1761, Yousong Zhou) esxi: fetchVms and fetchHardwareInfo (4d74a9778, rainzm) esxi: replace GetTemplateVMById with FetchTemplateVMById (dcb6db044, rainzm) host: startvm: for compat (c2d173ae1, Yousong Zhou) host: startvm: nic_speed: use raw string (38492014b, Yousong Zhou) host: startvm: add QEMU_CMD_KVM_ARG (4cf3565b2, Yousong Zhou) host: metadata: eliminate ref of guestNic (0f1fc0fa5, Yousong Zhou) hostman: metadata: eliminate import of guestman (6a2136f6c, Yousong Zhou) hostman: use metadata.DescGetterFunc (de7eb162f, Yousong Zhou) notify: add StartSubcontactPullTask for receiver (8d6defe22, rainzm) notify: hide SSunContact webconsole (8a80f96d6, rainzm) region: faster sync CapacityUsed for Storage (42309b8a7, rainzm) region: remove return value of NotifyWebhook (0d36b3b74, rainzm) region: faster list for cachedimage (de4f1579d, rainzm) region: faster list for cachedimage (bd4851c9f, rainzm) region: faster GetIImageById (936ea0040, rainzm) region: replace ‘ActualCapacity’ with ‘ActualCapacityUsed’ (56d24dfa9, rainzm) region: optimize preparenet of cloudaccount (ed484f4e2, rainzm) scheduler: make forcast result clearer (9d18b94ad, rainzm) scheduler: remove unused k8s predicates code (2a2867daa, Zexi Li) webconsole: use structured response (5959a204f, Yousong Zhou) webconsole: api: add helper methods for response struct (8e9b4aed2, Yousong Zhou)  Db (8)  interface: manager: add HasName() method (ed1999efa, Yousong Zhou) standalone_anon: empty result for name query (c8ad51174, Yousong Zhou) add standalone_anon (c45550ef6, Yousong Zhou) add manager methods appliers (d8ab874ef, Yousong Zhou) virtualjoint: add FilterById on RowId (79120f3de, Yousong Zhou) modelbase: BatchCreateValidateCreateData: return orig data (0e0a39490, Yousong Zhou) check funcs required by dispatcher (3b32ce56c, Yousong Zhou) IModel: add GetI18N() method (9fd0f3088, Yousong Zhou)  Db_dispatcher (3)  allow batch create for models without name (c389aaaeb, Yousong Zhou) delay compute to where needed (f62dddda5, Yousong Zhou) remove unused GetExtraDetails call (0c8ab90f7, Yousong Zhou)  Disk (1)  check disk is need renew on guest set renew (3ac63f537, wanyaoqi)  Dns (1)  isMyDomain: match only strict subdomain of dns_domain (a67026dec, Yousong Zhou)  Eip (3)  create by BgpType (59dd8a0e2, Yousong Zhou) NewEipForVMOnHost: add opslog (b44ac491c, Yousong Zhou) construct a pointer type (83f5a38c2, Yousong Zhou)  Elasticips (6)  NewEipForVMOnHost: make args a struct (f51495048, Yousong Zhou) charge_type: make it varchar column (4537cc3db, Yousong Zhou) bgp_type: make the db column nullable (e61a85b7c, Yousong Zhou) error when we have no usable eip network (63c4818b8, Yousong Zhou) fix calling FilterByOwner (382f62828, Yousong Zhou) filter by owner when doing auto allocation (5afbe831d, Yousong Zhou)  Feature (19)  emualated ssd support (#7701) (0cbad8aea, Jian Qiu) add dns interface (f251559c3, Qu Xuan) allow session level yunion_auth cookie (2a6445c31, Qiu Jian) add apsara support (b195f95bd, Qu Xuan) saml for cloudid (d4edbbb61, Qu Xuan) allow join project across domain (f10267b0f, Qiu Jian) allow specify offset in name pattern (0beee87db, Qiu Jian) auto create domain for sso idp (178e1ab8f, Qiu Jian) support cloudprovider, cloudregion and zone schedtag (cc32bb39e, Zexi Li) support scoped policy that manage ui policies for domains\u0026projects (01d4c2a1c, Qiu Jian) policy group support (2d39cb4cb, Qiu Jian) add qcloud rds support (f77605418, Qu Xuan) remote update qcloud instance metadata and name (e967dd7d6, Qiu Jian) qcloud create VM with tags (38abe9b45, Qiu Jian) filter storages by image (6abd9b0e9, Qiu Jian) qcloud create VM with tags (ddefc2ab3, Qiu Jian) climc: policy save data into file (94dd5c577, Qiu Jian) cloudcommon: split opslog table (ec14f9a6b, Qiu Jian) keystone: user add language attribute (768c88d28, Qiu Jian)  Features (132)  use details data to cover obj data in FetchCustomizeColumns (f6844e3c6, rainzm) change templateid as / in esxi (335c8eecc, rainzm) Add IResultHelper (4b4875cd7, rainzm) update locales (1e297dca1, rainzm) Add method ‘Sku’ to CandidatePropertyGetter (0bd84dd4b, rainzm) download the role to tmpdir not system role dir (deb3758bf, rainzm) add keep_tmpdir options (1eaf2eaff, rainzm) support creating vm from instance snapshot (6f6ea9e38, rainzm) creat, delete, revert and sync operator for esxi instance snapshots (2ed4534f4, rainzm) add WithCtx version to notifyclient function (4b49bcec8, rainzm) add NotifyError in notifyclient (54c7069d9, rainzm) notify user when failing to change config (acf1f1279, rainzm) add ICloudInstanceSnapshot \u0026 modify ICloudVM (e11011ddb, rainzm) log err when sending notification via notifyclient (8eb420e42, rainzm) support snapshot of esxi (7bdcf9552, rainzm) respect params.Disks when cloning vm (a174c32ea, rainzm) add SubImages in Image (564c6cf45, rainzm) add GetSchedtags for ICloudHost (c9039f947, rainzm) add a retry mechanism to AutoSyncExtDiskSnapshot (5e82a7e50, rainzm) add GetCapacityUsedMB for ICloudStorage (fd14e7b6c, rainzm) add ‘ip-list’ for esxicli (4b860cb43, rainzm) filter esxi ip by CIDR (e0aa67357, rainzm) add valid filter for cachedimage list (18fdfad79, rainzm) add NotifyWebhook in notifyclient (264b9ef39, rainzm) add vlanId for suggested network (a4527aec5, rainzm) support lock storage from selected cachedimage (10f0f07bd, rainzm) add ‘vlan_id’ param when creating network (7ab4decab, rainzm) inherit lang from ctx fro Task (e45ddaeb9, rainzm) rds recovery new instance from backup supported (fd4b544fb, Qu Xuan) apis: add const VPC_OVN_ENCAP_COST (aaec97470, Yousong Zhou) appsrv: Application: add Stop method for shutdown behaviour (7d0828410, Yousong Zhou) build: add .dockerignore (2b5014b84, rainzm) build: add DOCKER_BUILDKIT in docker_push.sh (5ab362d05, rainzm) climc: add cloud-account-preparenets-vmware command (67788b179, rainzm) cloudcommon: db: jointbase: add list:“user” for RowId (53125e6ed, Yousong Zhou) cloudcommon: determine the notification template based on the user’s language preference (7d75620d6, rainzm) cloudcommon: allways send webconsole notification via contacts (cff5b8b65, rainzm) cloudcommon: add NotifyWithContact (474bd1440, rainzm) cloudid: notify clouduser created (618d07f45, Qu Xuan) cloudid: support aliyun saml auth (592ae29d7, Qu Xuan) esxi: use more specific storage types (bb6af1e22, rainzm) esxi: support fake template vm via regex filter (48940c77a, rainzm) esxi: add GetSchedtags implementation for esxi.SHost (1cb286080, rainzm) esxi: expand disk config from subimages when creating vm (5251304a4, rainzm) esxi: correctly judge whether inet is nil (3793387b6, rainzm) esxi: copy disk from image when creating vm (937bf4513, rainzm) esxi: support fetchVM form datacenter (0aa9dc6fb, rainzm) esxi: do not specify portkey in NewVNIC (8553f9024, rainzm) esxiagent: keep data disks when cloning vm (d618f61c1, rainzm) esxiagent: try to customize vm if deployfs failed (93df31a97, rainzm) esxiagent: try to resize partition after resizing disk (a1bc77a40, rainzm) esxicli: better vm operator (14c5e18c2, rainzm) host: add option OvnEncapIpDetectionMethod can-reach:xx (8db93257d, Yousong Zhou) host: metadata: make vpc aware metadata handler (8f1f1f55c, Yousong Zhou) host: startvm: set vpc nic mtu (206ae7f9e, Yousong Zhou) host: startvm: add nic_mtu shell func (005fad402, Yousong Zhou) host-deployer: add deploy driver libguestfs (cfa1a4ee4, wanyaoqi) hostdeployer: support resizefs for esxi disk (22cec0964, rainzm) keystone: filter domain/user by idp_entity_id (b27b086cc, Qiu Jian) monitor: add nodata alert policy (766118937, zhaoxiangchun) monitor: add global alertrecord (e2ca41a5f, –global) monitor: add alert slience time and modify scoperesource FetchUniqValues func (1a1df0f07, –global) monitor: add metric description (09660da0a, zhaoxiangchun) monitor: support create nodata alert from web (c2b8f6a83, zhaoxiangchun) netutils2: add MyIPTo (e53bdd5f9, Yousong Zhou) notify: support webhook contact type (012d9b158, rainzm) notify: Support trigger-verify for feishu, dingtalk and workwx (e179191dd, rainzm) notify: replace VerifiedContactTypes with VerifiedInfos in ReceiverDetails (89ec96567, rainzm) notify: enable watching user in keystone (a4dc42e69, rainzm) notify: sort the returned contact type array (77bbb2cfd, rainzm) notify: break down error from UseridByMobile (bf12f5b57, rainzm) notify: user cmdline helpler for climc notify-receiver-xxx (e17768fbc, rainzm) notify: add intellij-get for receiver (75b0889c3, rainzm) notify: Allow use topic to filter notification (0a9a73587, rainzm) notify: Add VerifiedNote for SSubContact (3e982ab79, rainzm) notify: permit admin sending notification via contact (cb663f460, rainzm) notify: Add TNotifyChannel const of robot (f57a199cb, rainzm) notify: allow empty receivers for robot or webhook contact type (2e094a310, rainzm) notify: add webconsole in enabled contact types (bce332272, rainzm) notify: add IntelliNotify (c12b276ea, rainzm) region: larger suggest network and more complete vlanid (cc2675269, rainzm) region: add CloudCaches in DnsZoneDetails with GET (fd360b071, rainzm) region: call NotifyWebhook in when sonme tasks complete (ce0c88d79, rainzm) region: huawei recovery new rds (551aa2f91, Qu Xuan) region: 多云 bucket website.cors,referer 配置 (c9185a43c, lvyangyang) region: use NotifyWebhook when operating dnszone (5a07858e1, rainzm) region: add wire level for preparing network (5a186dbb3, rainzm) region: filter network via storage (f03d5af31, rainzm) region: allow prepare nets for existed cloudaccounts (aad9aba48, rainzm) region: make DeleteSnapshotExpiredRelease applies to postpaid vm (be042a075, rainzm) region: add bucket cloud tags support (66412faf9, lvyangyang) region: call NotifyWebhook in the life cycle of guests (541128d37, rainzm) region: add option NoCheckOsTypeForCachedImage (dfc246ca5, rainzm) region: add list filter server type (6c4ba1737, wanyaoqi) region: networkaddresses: filter by guest ids (b46d50ae3, Yousong Zhou) region: options: allow setting default vpc external access mode (05c95295b, Yousong Zhou) region: regiondriver: add methods on eip charge type (8d7d240b3, Yousong Zhou) region: search server by substr of ip or mac (ca21bcf56, Yousong Zhou) region: set qcloud bucket policy (9872a05be, lvyangyang) region: add SExternalizedResourceBase, SManagedResourceBase to SInstanceSnapshot (bb109953d, rainzm) region: support automatic start vm after reseting isp (f077f0602, rainzm) region: support sync skus by cloudregion (86838db6d, TangBin) region: support sync skus by cloudregion (d86f9a200, TangBin) region: add options DeleteSnapshotExpiredRelease (e4efbdc33, rainzm) region: make address recommendations more precise (fc6a30b20, rainzm) region: add test for CloudaccountManger.PerformPrepareNets (ae94914a7, rainzm) region: sync capacityUsed for storage after deploying or deleting guest (390cc11e7, rainzm) region: sync schedtags when syncing host (0bd75b7bc, rainzm) region: sync CapacityUsed for Storage (0bda9e751, rainzm) region: export user tags support virtual resources (d76915893, wanyaoqi) region: add RequestResizeDiskOnHost to SESXiHostDriver (8c17cdd5e, rainzm) region: server list add parameter eip_associable (8a1d15eba, TangBin) region: networks: add getMtu method (80efc97c6, Yousong Zhou) region: distinguish between pending delete and delete notification (0c7287233, rainzm) region: add instance_snapshot for regionquota (23b1a2b14, rainzm) region: send webhook server_create when canceling pending delete (79eacb5b4, rainzm) region: inter vpc network (eb91e8fcd, spike.lv) region: add instance storage capability (877989529, Qu Xuan) region: divide notify templates into Chinese and English versions (ac438282a, rainzm) region: replace 虚拟机 with 主机 or 云主机 (654c51724, rainzm) region: change fomat ‘id’ to ‘name(id)’ in scheduledtasks' log (33a4f332c, rainzm) region: support aliyun finance cloud (2a1f9ecbc, TangBin) region: add SCloudregionResourceBase for SInstanceSnapshot (35fc62bba, rainzm) region: azure tags (950e75f8b, lvyangyang) region: set pendingUsage before creating instance snapshots (8627818e1, rainzm) region/glance: update cpu arch apis (59102f2dd, wanyaoqi) region/schedtag: schedtag support set multi resources (a16b048f9, Zexi Li) scheduler: support filtering storage via medium (bf30c48ee, rainzm) scripts: add export DOCKER_BUILDKIT=1 (4135e62f6, rainzm) vpcagent: export subnet mac gen funcs (9288c2fd8, Yousong Zhou) webconsole: add huawei vnc support (6e0acab93, TangBin) webhook: send webhook notification when c/d loadbalancerlisterrule (24f4a684a, rainzm)  Glance (1)  check min disk size on update (53d0914cd, wanyaoqi)  Guests (1)  add bgp_type arg when create guest (6bbf09049, Yousong Zhou)  Host (5)  fix order init host srevice (cbb801753, wanyaoqi) restart etcd session on keepalive failed (7dc8f906c, wanyaoqi) specifie bash for start guest (aa45e62cb, wanyaoqi) fix sync storage info duration' (4b09751f5, wanyaoqi) fix rbd storage cache iso image (9e0ce8722, wanyaoqi)  Hostinfo (1)  try create network add is_on_premise (#7706) (74c8c6bfe, wanyaoqi)  Hostman (1)  metadata: add handler for /local-sub-ipv4s (adb998ff5, Yousong Zhou)  Hotfix (1)    allow merge networks without continuous addresses 2. filter guest_ip_start and guest_ip_end with contains operator (6a55acafa, Qiu Jian)    Httperrors (3)  HTTPError: use Error type (776ef9b8b, Yousong Zhou) add Error type (4d7eee4f2, Yousong Zhou) use existing details if id is not present (#7710) (da64e4a26, Yousong Zhou)  Httputils (1)  preserve format val types (d21c262c1, Yousong Zhou)  I18n (2)  add ITable (449c96ad5, Yousong Zhou) move out from httperrors pkg (1c1dcbde4, Yousong Zhou)  Informer (1)  ignore outside context cancel when worker run (ff53671a1, Zexi Li)  Locales (3)  monitor: add translations (0ecdb5cd9, Yousong Zhou) update translation (b075447f9, Yousong Zhou) update translations (69c7af840, Yousong Zhou)  Lockman (1)  test: add prefix setting (cd5163eeb, Yousong Zhou)  Logclient (5)  i18n: en for const (ca8fcb336, Yousong Zhou) i18n: cn for const (08ef1728d, Yousong Zhou) convert const val to use latin chars (31cea0a73, Yousong Zhou) move ws list to separate file (7f90da555, Yousong Zhou) separate lines (ee7b9e287, Yousong Zhou)  Logger (4)  actionlog: i18n for distinct-field (e4cef880a, Yousong Zhou) actionlog: readability change (d8887266a, Yousong Zhou) actionlog: add GetI18N (202ded8c9, Yousong Zhou) actionlog: remove redundant comments (fb28d96d5, Yousong Zhou)  Monitor (4)  query with signature and support measurement without database (3a5bde4a3, Zexi Li) set default influxdb datasource by endpoint type (409c67e24, Zexi Li) add alert resource (31cf935da, Zexi Li) error fmt (50eafd957, Yousong Zhou)  Multicloud (12)  qcloud: fix instancenic (e8ef92ad2, Yousong Zhou) qcloud: add ptr deref func (5f1fd6c7f, Yousong Zhou) qcloud: add apiDomainByRegion (0e0f8bfa9, Yousong Zhou) qcloud: add getVpcClient (1ab4d4049, Yousong Zhou) qcloud: add getSdkClient (9dcd0d2db, Yousong Zhou) aliyun: instancenic: handle InvalidOperation.Ipv4CountExceeded (a3d6a039a, Yousong Zhou) aws: subaddress management (1b6275f80, Yousong Zhou) aws: instancenic: add interface id attribute (3159f6d6d, Yousong Zhou) aliyun: instancenic: secondary address management (0fe90abea, Yousong Zhou) ICloudNic: add GetId() (2afa068d7, Yousong Zhou) ICloudNic: fix GetMAC() (956bc945a, Yousong Zhou) aliyun: make getSdkClient proxy aware (9072a69ae, Yousong Zhou)  Networkaddresses (6)  handle cloudprovider.ErrAddressCountExceed (eec81e73e, Yousong Zhou) do server sync for on premise servers (159453ece, Yousong Zhou) disallow batch create for external resources (05984b49a, Yousong Zhou) cloudprovider support (7343be04b, Yousong Zhou) add to nics field of guest desc (0c8d8358e, Yousong Zhou) add parent_type guestnetwork (87ed4e9a5, Yousong Zhou)  Networks (6)  usedAddressQuery: rename with baseq, ownerq, retq (8ed18fbf3, Yousong Zhou) split getUsedAddressQuery as method of each manager (1609496f9, Yousong Zhou) fix typo in log (f54de809b, Yousong Zhou) make filter by bgp types available (51dafd29e, Yousong Zhou) list: make bgp_type available (d4469ffde, Yousong Zhou) add field BgpType (258ceb7ba, Yousong Zhou)  Opslog (1)  move const to separate file (642a90146, Yousong Zhou)  Optimized (5)  server delete log and wait time (1e160821e, Qu Xuan) aliyun create rds backup (aa5cbd0b0, Qu Xuan) rds zone sync (d207d982e, Qu Xuan) create eip params (17cf23b80, Qu Xuan) region: qcloud bucket policy set and get operation (c0bcfa9a5, Qu Xuan)  Others (186)  update vendor (b4d5400e6, Qiu Jian) update vendor (93ceb707b, Qiu Jian) 负载均衡ACL\u0026证书增加项目和共享 (670a06d53, TangBin) add getStorageType err log (1afaa2950, TangBin) suggestAlert feature: (2bae6c0bb, zhaoxiangchun) add redis and redis skus slave zone info \u0026 huawei aws supported storage type update (2d15a7b97, TangBin) docker 交叉编译规则更新 (c9ec30b5b, Zhang Dongliang) detach AlertResource on alertDisable (357dd4e69, zhaoxiangchun) add:get bucket cdn domain (9b627c10f, lvyangyang) host-deployer: customize user cloudroot home dir (6e66a129d, wanyaoqi) add:bucket ops const i18n (8c29c5396, lvyangyang) qcloud create single zone elb bugfix (63eddd219, TangBin) modify alertResource ws info (d02db0e40, zhaoxiangchun) qcloud bucket task (da4150e5c, lvyangyang) commonalert bugfix: (c39540d5c, zhaoxiangchun) huawei vm support vnc (6b23c5c8f, TangBin) aliyun finance cloud zone add suffix (576120f15, TangBin) aliyun finance cloud region add suffix (7360c544f, TangBin) suggestalet bugfix (922874936, zhaoxiangchun) qemu-arm: fix cdrom params (cc7542cc6, wanyaoqi) allow delete role-policy-binding (f1be0adf6, Qiu Jian) add:aws lb tag (910bec329, lvyangyang) redis set autorenew bugfix (6ce5b1d50, TangBin) redis set autorenew bugfix (fe07cda1a, TangBin) batch user create bugifx (3ceec3aa1, TangBin) huawei create disk bugfix (4e3e5b01a, TangBin) add success note on guest start and stop (f464a904d, wanyaoqi) redis create bugfix (dd2eb4b44, TangBin) redis prepaid create autorenew bugfix (3a4498555, TangBin) commonalert bugfix: (a9c3c5bfd, zhaoxiangchun) qcloud redis secgroup sync fix \u0026 qcloud add renew\u0026 auto_renew (09145c3c1, TangBin) fix:修复dns record name校验的问题 (089aea99d, lvyangyang) add:qcloud routetable (456932632, lvyangyang) qcloud release prepaid resource bugfix (3b7c92521, TangBin) add resource type (0a0b73406, zhaoxiangchun) update vendor for jsonutils (ca0e79eff, Qiu Jian) commonalert bugfix (97ed34038, zhaoxiangchun) Fix a typo: ProviderFactor -\u003e ProviderFactory (47d358ecb, Shaohui Liu) fix:域名正则校验dnsrecord name，同步中文域名取punycode (73d750e1c, lvyangyang) add route (321e3c2f7, lvyangyang) modify monitor querycondition: (d45c09639, zhaoxiangchun) add option PrepaidDeleteExpireCheck (c5a88b80b, TangBin) qcloud delete prepaid redis bugfix (bbe362be2, TangBin) qcloud create prepaid redis bugfix (4be09cfc0, TangBin) lbcert cache delete bugfix (2f7781d15, TangBin) aws create bugfix (0bf274f12, TangBin) modify go test error (72b9f2ec7, zhaoxiangchun) fix stream disk on add disk from snapshot (4a2613a66, wanyaoqi) goimport fix (bf1d8eccf, tangbin) deal return error info: tsdb (8df8e6ca2, zhaoxiangchun) clean duplicate cached certificated at initial (f87c0e397, TangBin) qcloud create project not match bugfix (9a43bb667, TangBin) qcloud certificate sync bugfix (6343e3f4b, TangBin) qcloud cert bugfix (d6677d86d, TangBin) modify monitor dashboard save: (d519be9ab, zhaoxiangchun) qcloud elb cert duplicate fix (46e65d9e0, TangBin) qcloud redis create missing project id bugfix (babed456d, TangBin) update vendor (e48616cdc, rainzm) qcloud lb sync project bugfix (8589d67ac, TangBin) retry generate ifname from random string (f71def645, wanyaoqi) redis 2.8 reset password bugfix (02d0902d9, TangBin) add redis capabilty \u0026 lb purge (0a695c2dc, TangBin) redis delete bugfix (ac03debc9, tangbin) qcloud elb auth mode bugfix (ea497d077, TangBin) ha guest misc fix (0389ec804, wanyaoqi) qcloud redis tags (cfbe92ed9, lvyangyang) elb sync bugfix (399539b92, tangbin) dirve mirror check block replication is support (980396f15, wanyaoqi) sync elb support classic vpc (1eaf06d05, tangbin) qcloud redis support (d7894776f, TangBin) fix get host archs capability (8d07a6308, wanyaoqi) list support scope filter (1805be4d2, Qiu Jian) update api models (48e40fa5a, Qiu Jian) commalertUpdateInput increat param: (10b273938, zhaoxiangchun) qcloud zone sync fix (44b40599a, TangBin) loadbalancer support batch create (541a2d4e0, TangBin) fix on stream disk complete snapshots refcount not update (4efbe27ab, wanyaoqi) check disk is in reset before delete snapshot (e7ce3fd9d, wanyaoqi) create with tags (2c043454a, lvyangyang) bugfix: (b4a83dc15, zhaoxiangchun) elb salve zone 1 external id bugfix (6f2a9d8b7, TangBin) elb sync zone bugfix (94d3fa82a, TangBin) host increase cpu mem max size (6b7a52573, wanyaoqi) add qcloud elb zone1 details (1f17dcf68, TangBin) resource tags (58737942a, lvyangyang) qcloud elb supplort multi zones (f86dc52e9, TangBin) climc lb-create add parameter zone1 (69e0ae9de, TangBin) qcloud elb support multi zones (e6af8ad2c, TangBin) fix:get all project dns resource (efa5a8495, lvyangyang) fix fetch customize columns (cb45349ec, wanyaoqi) fix informer backend (128ec1774, wanyaoqi) lbcert delete bugfix (05f1900a2, TangBin) resource tags (3a73eb9e3, lvyangyang) remove try set informer backend (917a62c14, wanyaoqi) telegraf-raid-plugin: update raid state to lower case (de03ab939, wanyaoqi) keystone init etcd backend (5f5090038, wanyaoqi) fix:qcloud vpc peer error wrap (bb4e09aee, lvyangyang) .circleci: build: make with parallel level 2 (47fd7fb27, Yousong Zhou) add aliyun finance environment (2032e5f1d, TangBin) telegraf raid plugin (225f3b21c, wanyaoqi) remove alpine build cache before make image (0619d3566, Zhang Dongliang) fix:openstack lb 后端ip无法映射到主机的异常处理 (415ef0866, lvyangyang) replace NewFloat by NewFloat64 and NewFloat32 (1cfee7cf6, wanyaoqi) make mode (63887337f, wanyaoqi) fix host-deployer base image (bc26bdb8f, wanyaoqi) fix:aliyun jsonRequest 增加i/o timeout retry (93365de62, lvyangyang) 在 docker push 脚本里创建_output 目录，以便容错 (4be578fc2, Zhang Dongliang) 在 docker push 脚本里创建_output 目录，以便容错 (1f7988ecd, Zhang Dongliang) 解决编译之后 output 的 owerner 问题 (54f86817d, Zhang Dongliang) genreate api models (e64fe802e, wanyaoqi) add interface freeze virtual resource (dcdf45d18, wanyaoqi) esxi-agent 编译方式兼容 arm64 (eda8be1be, Zhang Dongliang) Add web url to alarm template (3d9923a7c, zhaoxiangchun) bugfix:scoperesource FilterByOwner (c0eae040a, zhaoxiangchun) remove aws lbbg cache metedata (1ce5db769, TangBin) modify suggest rule cli (af9e911fd, zhaoxiangchun) fix:允许cname record通过policy多值 (68283ceed, lvyangyang) aliyun public elb region fix (44e9cf049, TangBin) multi-arch 的镜像使用使用支持 arm64 (0b3afa9eb, Zhang Dongliang) bugfix commalert 3.4 (1c7deaf7b, zhaoxiangchun) aliyun public elb brand fix (d71a1f867, TangBin) multi-arch 的镜像使用使用支持 arm64 (65e3900ea, Zhang Dongliang) add mcclient sample (a4bedc7e2, Qiu Jian) fix:forbid top level public domain name (4435255f4, lvyangyang) mcclient modules: fix k8s fed rolebinding joint wrong resource manager (c7e8287c6, Zexi Li) bugfix :esxi 多机器环境下拉取监控超时 (6154f46a6, zhaoxiangchun) aliyun create public lb fix (2de610a3a, TangBin) fix:/dnsrecordset重复检查,dnszonevpc数量 (ed99a6981, lvyangyang) increase rbd check timeout (4ec1727d7, wanyaoqi) umount nfs on detach storage (24eaf5121, wanyaoqi) fix:(region) correct syncSchedtags (fc9b61c2a, rainzm) set stagefail on clean fail (d13cc9949, wanyaoqi) huawei client request add throttling control (1d044f712, TangBin) bugfix:commonalert (6037c84a5, zhaoxiangchun) huawei elb get params log (d8832a167, TangBin) qcloud elb create listener fix (35d155336, TangBin) huawei snapshot delete fix (faeb294d5, TangBin) wait deleted (13823d41e, lvyangyang) commonalert bugfix 3.4 (475c81c58, zhaoxiangchun) bugfix:esxi collect metric (418540c79, zhaoxiangchun) fix esxi-agent dockerfile typo (5db1fa686, Zhang Dongliang) make with ARCH argument (bc6ac93ce, Zhang Dongliang) support search ip (6d6e31813, wanyaoqi) regional network filter bugfix (c8c022733, TangBin) ctyun sync secgroup fix \u0026 cloudaccount delete fix (95e058d06, TangBin) common alert bugfix/3.4 (f58bca93d, zhaoxiangchun) fix host deployer base image (1fc5bac7f, wanyaoqi) ctyun add region cn-bj1 (4a36f82f7, TangBin) support mutli params (f4c1a3ea5, wanyaoqi) fix set host image cache properties (c6eecebed, wanyaoqi) fix update image status after save failed (686b63997, wanyaoqi) dup record process (ff4bde696, lvyangyang) host sync storage size (50a85b73e, wanyaoqi) suggest rule modify: (9a2267230, zhaoxiangchun) bugfix vmware monitor (0842b6f5f, zhaoxiangchun) commonalet bugfix: (a62462552, zhaoxiangchun) Add mock test for genericScheudler.Schedule (57d8f991a, rainzm) dns access (25ddca860, lvyangyang) fix host error output (945fac0a4, wanyaoqi) isolated devices info reenterable (641c71880, wanyaoqi) guest short desc add backup host id (09e568e14, wanyaoqi) fix get ubuntu version (495d9174c, wanyaoqi) pex register add optional column mac_access (88838bb53, TangBin) optimized cachedimages sync (dc1c6c754, Qu Xuan) create classic vpc fix (6a22bf0e7, TangBin) Feature \u0026 Fix for Notify (#7714) (1ed65ddd1, Rain Zheng) update host status to unknown on host offline (4a00c2229, wanyaoqi) listfilter by alert_id (138a16119, zhaoxiangchun) alert record bugfix (bb22fba25, zhaoxiangchun) vmware disk support deploy lvm partition (7dcb24094, wanyaoqi) Bugfix/yousong i18n (#7712) (b314b66b7, Yousong Zhou) Fix problem of esxi (#7661) (e393f3ee2, Rain Zheng) Fix for Notify (#7692) (74af85b8e, Rain Zheng) monitor commonalert bugfix (#7667) (c66ea1145, zhaoxiangchun) fix host get guests (#7682) (795a11fce, wanyaoqi) fix get storage capacity on init' (#7686) (3dec0fdc6, wanyaoqi) snapshot list by guest (fb41d16c9, wanyaoqi) update host deployer base image version (70f953dee, wanyaoqi) baremetal colloct isolated devices info (#7357) (75cd041d7, wanyaoqi) fix mount fetcher fs (#7656) (f255e8fcd, wanyaoqi) remove backup metadata on delete backup (#7653) (b0edff1d8, wanyaoqi) eip \u0026 vpc manager match fix (#7650) (11f86bb29, tb365) add host cpu archs capabilitie (e510ed196, wanyaoqi) support create arm virtual machine (7d94c4e46, wanyaoqi) host campactable with arm64 (bb0d81bc0, wanyaoqi) fix build baremetal agent image (#7646) (cb036b882, wanyaoqi)  README (1)  update architecture img (9fd99a22f, Zexi Li)  Region (7)  networks: attach func use struct args (d8cfba921, Yousong Zhou) networkresource: fix signature of GetExtraDetails (f87d09458, Yousong Zhou) guest detail add field macs (54275ddcf, wanyaoqi) host specs replace space char to ‘_’ (eb093a345, Zexi Li) fix query object by spec not include details (88514a9fc, Zexi Li) fix schedtag joint resource master/slave field wrong order (0113ec40c, Zexi Li) fix network schedtag not cleanup when network deleted (b859f3ba3, Zexi Li)  Regiondrivers (1)  kvm: exact match bgp_type (774cfcbfa, Yousong Zhou)  Schedtags (1)  add ListItemExportKeys (b79915d40, Yousong Zhou)  Scheduler (4)  ignore non running guests only exclude ready status (b47b0dc86, Zexi Li) forecast api with candidates result (0ed41b09e, Zexi Li) fix fillter isolated device (1f51af3a6, wanyaoqi) ignore network type when specified (e129d580b, Zexi Li)  Specs (1)  fix specKey url not escape (bf682f565, Zexi Li)  Stringutils2 (1)  add RemoveUtf8Strings func (f0cc1d3d1, Zexi Li)  Treewide (3)  avoid variable fmt str (152eaa8c5, Yousong Zhou) fmt error (ad52aae79, Yousong Zhou) DeleteFailReason as an object with translated details (6415de33d, Yousong Zhou)  Usage (1)  host show isolated dev reserved memory (0b11854a8, wanyaoqi)  Vendor (7)  add tencentcloud-sdk-go vpc (4a45ca59d, Yousong Zhou) bump alibaba-cloud-sdk-go to v1.61.684 (47a2d0763, Yousong Zhou) add github.com/aliyun/alibaba-cloud-sdk-go/services/ecs (edbddb38b, Yousong Zhou) bump yunion.io/x/pkg (46088408b, Yousong Zhou) bump yunion.io/x/sqlchemy (f0fba9aa2, Yousong Zhou) update yunion.io/x/jsonutils (854ff4079, Yousong Zhou) update yunion.io/x/sqlchemy (b7c3959e0, Yousong Zhou)  Vpcagent (6)  ovn: make aware of sub ips (c3b4edae1, Yousong Zhou) models: join network addresses (314f9fcc0, Yousong Zhou) apihelper: filter by cloud_env=onpremise (f699f7cb5, Yousong Zhou) ovn: increase dhcp lease, renew, rebind time (39f979398, Yousong Zhou) guard against foul eip records (9168284d5, Yousong Zhou) respect guest src check settings (#7677) (ad6b38f68, Yousong Zhou)  Webconsole (3)  ssh: add keyboard-interactive as an option (aa6e45e4d, Yousong Zhou) ssh: each argument on its own line (cce2af501, Yousong Zhou) fix defer order to release zombie process (4f8b80fcc, wanyaoqi)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n53 commits to cloudpods-operator - v3.6.0 since this release.\nBug Fixes (7)  policy description supports i18n (c44eab9, Qiu Jian) skip create policies error (44fc13b, Qiu Jian) role-policy-create many create extra role-policies (0cb1d83, Qiu Jian) add more dashboard default policies (5ab48d2, Qiu Jian) update vendor \u0026 code fix (aac3957, Qiu Jian) monitor: system alert policy cancel description update limit (8036103, zhaoxiangchun) telegraf: fix collect disk measurements (0671287, wanyaoqi)  Bugfix (1)  suggestion: fix err when suggestion syncConfigMap (f7460ca, zhaoxiangchun)  Chore (3)  manifests: update deploy manifests yaml content (a12649e, Zexi Li) monitor: add new service: suggestion (c03365e, zhaoxiangchun) vendor: make mod (94de88d, wanyaoqi)  Feature (3)  optimize host daemonset config (3305513, wanyaoqi) initialize policie and roles v3.5 (8bd28f7, Qiu Jian) keystone: add default member role (a63fddf, Qiu Jian)  Features (6)  add webhook plugin for notify (abf2979, rainzm) component: remove kube-rbac-proxy (7cd57e8, rainzm) framework: support multi zone (df5b6cc, wanyaoqi) host: allow setting ovnEncapIpDetectionMethod (41c2c19, Yousong Zhou) host-deployer: update host-deployer spec (0ffcdf0, wanyaoqi) operator: add nodata alert policy (a28f01e, zhaoxiangchun)  Monitor (2)  alert for host_raid adapter should \u003e= 0 (edfee65, Zexi Li) inject smart_device and host_raid alert rule (ded1e78, Zexi Li)  Notify (1)  remove pvc dependence (ee69174, wanyaoqi)  Others (26)  feat:(monitor): update system monitor alert when alert has diff info (d23f86b, zhaoxiangchun) update Makefile (fec49b1, Qiu Jian) update vendor (27fb644, Qiu Jian) etcd add pod anti affinity (a8e9ae6, wanyaoqi) ce edition should not deploy meter (4858f7b, Zexi Li) modify host_raid alert policy (6188dc0, zhaoxiangchun) 限制 client_body_timeout 时长，预防慢攻击 (da7327e, Zhang Dongliang) 限制 client_body_timeout 时长，预防慢攻击 (ad5c33d, Zhang Dongliang) 限制 client_header_timeout 时长，预防慢攻击 (d22e839, Zhang Dongliang) 更新 nginx 配置以防 dos 攻击 (65dd614, Zhang Dongliang) qcloud add redis crond (c474c0c, zhaoxiangchun) modify commonalert init policy : (fb9ba72, zhaoxiangchun) add qcloud rds crond (2ecc856, zhaoxiangchun) bugfix: (bb13030, zhaoxiangchun) make mod (49408d5, wanyaoqi) set image default policy to if not present (54e78c2, Zexi Li) telegraf add disk plugin (c285508, wanyaoqi) not create notice (3029a7c, Zexi Li) pod affinity by storage class (fde292d, wanyaoqi) BusyBox upgrade ,modify cloudmon timeout arg (eb46544, zhaoxiangchun) host image spec fix (5ba8920, wanyaoqi) add flag check is failed etcd pods need delete (586b3e7, wanyaoqi) push 镜像后,拉回本地 (665a910, Zhang Dongliang) buildx for onecloud-operator (0c9ac24, Zhang Dongliang)   etcd clean failed state pods (89c338d, wanyaoqi)   deployment with pvc not set node affinity (#255) (ce2eed8, Zexi Li)  Regiondns (1)  configmap: quash trailing spaces (641f3b2, Yousong Zhou)  Vendor (1)  update yunion.io/x/master to current release/3.6 (a7054e2, Yousong Zhou)  Web (1)  add docs image (80e00a1, Zexi Li)  Yunionagent (1)  remove onecloud keyword (8792ea6, Zexi Li)   cloudpods-service-operator Repo: https://github.com/yunionio/cloudpods-service-operator\n10 commits to cloudpods-service-operator - v3.6.0 since this release.\nBug Fixes (3)  for last pr (aeb3671, rainzm) retry after a while when dealErr (ec6ecc1, rainzm) resource/vm: convert imageName to imageId before requesting for creating vm (17c8de2, rainzm)  Code Refactoring (1)  change maxRetryTimes to maxTryTimes (d1a8b4a, rainzm)  Features (5)  add more reasonable title for cherry pick PR (b4097f8, rainzm) init docs (a28b5cd, rainzm) keep cloudresource when resource in k8s is invalid (ab1ab79, rainzm) add manager-pro section in Makefile (0f96432, rainzm) resource: better use for logger (22beac3, rainzm)  Others (1)  docker buildx for onecloud-service-operator (e6b93e7, Zhang Dongliang)   notify-plugins Repo: https://github.com/yunionio/notify-plugins\n18 commits to notify-plugins - v3.6.0 since this release.\nBug Fixes (4)  common: correct error judgment in BatchSend (1b15dee, rainzm) dingtalk: return correct value in getUseridByMobile (0a041d0, rainzm) robot: Correct err value of ValidateConfig (a367fff, rainzm) workwx: Incorrect variable use for ok (abf098b, rainzm)  Features (9)  break down error from UserIdByMobile (a5ab93b, rainzm) add httpclient timeout for webhook (80e0757, rainzm) add webhook robot(custom robot) (18a1106, rainzm) support multi webhooks config for robot (1f43774, rainzm) email: support toggle ssl (3d4bb13, rainzm) notify: Add BatchSend for websocket (f046407, rainzm) notify: Add common function to batch send (d9a0118, rainzm) robot: Add BatchSend (6d7564e, rainzm) robot: support mutli WebhookPrefix (6054b2a, rainzm)  Others (5)  增加调试开关 (e0c6d39, Zhang Dongliang) buildx for notifyplugins (cf14a4f, Zhang Dongliang) makefile 去掉 sudo; make all bins (51c965a, Zhang Dongliang) docker buildx for notify plugins (9c1c2cd, Zhang Dongliang) update vendor (e3739ac, rainzm)   ocadm Repo: https://github.com/yunionio/ocadm\n7 commits to ocadm - v3.6.0 since this release.\nAutoupdate (1)  clear host tag (df9bab7, Zexi Li)  Bug Fixes (2)  makefile: 更改3.6的 Makefile 号 (649a9dd, Zhang Dongliang) update: cluster update operator parse image digest (ea3bcf8, Zexi Li)  Chore (2)  vendor: update vendor (07dea86, Zexi Li) vendor/v3.6: update vendor (e9d204d, Zexi Li)  Others (2)  metricsserver 自动选择平台 (4277583, Zhang Dongliang) clean info from from autoupdate component when update (a53d4c5, Zexi Li)   sdnagent Repo: https://github.com/yunionio/sdnagent\n30 commits to sdnagent - v3.6.0 since this release.\nAgent (4)  server: enable ovnMdMan (ae3eab6, Yousong Zhou) server: add metadata server (c7af8c7, Yousong Zhou) server: watch: add FindGuestDescByNetIdIP (0b314bd, Yousong Zhou) server: use utils.RunOvsctl (8fd7165, Yousong Zhou)  Bug Fixes (1)  hostconfig: fix watching hostconfig (b895141, Yousong Zhou)  Build (2)  eipgw: track to ensure stop state as well (048a1c9, Yousong Zhou) eipgw: vrrp track script as monitor (a485d61, Yousong Zhou)  Flowsource (5)  make aware of sub ips (b1afd56, Yousong Zhou) relax constraint when mac check on and ip check off (3bf9855, Yousong Zhou) reword ref comments on allow_switch_vms (5e848c1, Yousong Zhou) reword ref comments on allow_router_vms (7ae147d, Yousong Zhou) remove now unused code for dev (bde4723, Yousong Zhou)  Others (3)  .circleci: bump go to 1.14 (122342c, Yousong Zhou) pull image for buildx (08a0395, Zhang Dongliang) docker buildx for sdnagent (c4e72f7, Zhang Dongliang)  Sdnagent (1)  be cooperative (24e75c1, Yousong Zhou)  Tc (6)  QdiscTree: add Root() method (ebcb90d, Yousong Zhou) NewQdiscTree: special case mq (2ce36e0, Yousong Zhou) NewQdiscTree: fix children key (61b5543, Yousong Zhou) NewQdiscTree: use qbase for BaseQdisc() return (98de150, Yousong Zhou) NewQdiscTree: rename vars (5747fb5, Yousong Zhou) NewQdiscTree: use current tree instead of the root (6195925, Yousong Zhou)  Tcman (1)  skip devices with mq qdisc (483628c, Yousong Zhou)  Utils (4)  add RunOvsctl (d0aa06c, Yousong Zhou) guest: add GetJSONObjectDesc (469d4d9, Yousong Zhou) guest: add FindNicByNetIdIP (d42997c, Yousong Zhou) guest: make aware of sub ips (630b4c9, Yousong Zhou)  Vendor (3)  bump to onecloud master branch (beb7661b9fc) (b67c9e1, Yousong Zhou) bump yunion.io/x/onecloud to current tip of release/3.3 (f3e6231, Yousong Zhou) bump yunion.io/x/onecloud to current tip of release/3.3 (a175a5b, Yousong Zhou)  ","excerpt":"Release time: 2020-12-29 14:17:58\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.6/3-6-0/","title":"v3.6.0"},{"body":"发布时间 2020-12-29 14:17:58\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n1029 commits to cloudpods - v3.6.0 since this release.\nAdd (2)  DisableDelete for lb (73e8080d4, Qu Xuan) vpc peering connection (bd22eb0b1, lvyangyang)  Apigateway (1)  disable influxdb service query proxy (81da6c577, Zexi Li)  Baremetal (1)  fix pxe filter network by guest_dhcp (129001dfb, Zexi Li)  Bug Fixes (516)  自动生成华为云rds密码 (a08fb0044, Qu Xuan) add keystone sync user debug info (#7633) (585ba0ff5, Jian Qiu) turn off some default project policies (#7636) (cb573d340, Jian Qiu) aovid truncated data (#7643) (21342005e, 屈轩) cleanup logic for nics of pending_deleted guests (#7668) (7336ff732, Jian Qiu) 不限制openstack系统盘类型 (#7674) (a5c3a34b7, 屈轩) server purge may fail (#7696) (3ccf78ae7, Jian Qiu) http error limit request body length (#7699) (d0842c62c, Jian Qiu) apigateway user info add is_local attribtue (#7694) (8ba3f86b5, Jian Qiu) vmware esxi host detects vnic portgroup info (#7649) (2ea855a42, Jian Qiu) avoid delete aws iam user failed (#7664) (8cf594785, 屈轩) add details for account delete (#7702) (416afb686, 屈轩) climc params (5eaece551, Qu Xuan) avoid policy value not save (0cc0a1991, Qu Xuan) avoid nil panic (5b3bfd1b3, Qu Xuan) compatiblity fixes with lenovo RD620 and huawei 2288 (f6eb9fc19, Qiu Jian) valid update name and update dns recordset (80c75b19a, Qu Xuan) search by chs projectname or domainname (64f5bc748, Qiu Jian) optimized cloudid (fd318a9cd, Qu Xuan) optimzed sync (ce032ecf1, Qu Xuan) find correct esxi host access ip (053507c3e, Qiu Jian) remove redundant auth cookie in sso login (ef138c05d, Qiu Jian) support VirtualDiskRawDiskMappingVer1BackingInfo (a672c6b33, Qiu Jian) scheduler aware policy (b8238d205, Qiu Jian) cloudid optimized (7232695df, Qu Xuan) network address list respect privilige of user (09944bc1b, Qiu Jian) skup syncing lb, rds, redis instances in tasks (9de29d9af, Qiu Jian) user idps attributes includes template name (383bdef22, Qiu Jian) aliyun wulanchabu region (46e6d37c2, Qu Xuan) sync groups for user (491efe579, Qu Xuan) check assign-host previliges (4d5aadb64, Qiu Jian) prevent users in disabled idp from login (9e1ff8819, Qiu Jian) ignore 409 error when doing redfish power on (65141a277, Qiu Jian) wire usage stats incorrect (d7e330f9e, Qiu Jian) uniform cachedimage active status (f09bb6682, Qu Xuan) optimzed clouduser password (a00447022, Qu Xuan) recode project-role rpc handle to support group role assignment results by user or project (332ba04bd, Qiu Jian) avoid create public zone failed (d9626e310, Qu Xuan) optimzed clouduser (7361da408, Qu Xuan) optimized qcloud keypair (f4ecde37c, Qu Xuan) 腾讯云不支持同时设置秘钥和密码,若设置秘钥，则将密码置空 (a2b9a7906, Qu Xuan) 平滑迁移数据 (8284f7b29, Qu Xuan) add dns recordset dns value check (fc8fb8af5, Qu Xuan) avoid sync natgateway eip panic (dab5b6e43, Qu Xuan) 默认不自动合并安全组 (8e39b7ccb, Qu Xuan) disable webkms for esxi older than 6.5 (239797e33, Qiu Jian) check host sharing status when considering whether a host is assignable (04f036ce2, Qiu Jian) cos use proxy (bb7ad07c2, Qu Xuan) add doc for qcloud (3c29402c1, Qu Xuan) 支持自动根据云上项目修改本地项目名称 (e86509a88, Qu Xuan) lock/unlock cleanup (41f932e38, Qiu Jian) bucket object cnt fix (cbd08138b, Qu Xuan) 避免名称重复 (1b3d3310d, Qu Xuan) enable generate name caused compability issue (1a3acbd05, Qiu Jian) omit empty fail reason (5a91ae886, Qiu Jian) keystone initialize data skip nil extra fields (b80fa64b6, Qiu Jian) disable qcloud verifyAppId temporarily (01fe002dd, Qiu Jian) feature: vpc peering connection support (466d96135, Qu Xuan) add esxicli vmrc/webmks command (5a8ee9d91, Qiu Jian) get jnlp xml from dell idrac6,7,9 (eea88ffbe, Qiu Jian) reset user password without check (b5f01171d, Qiu Jian) scheduler token not support policy (c516525db, Qiu Jian) avoid not reture cloudprovider.ErrNotFound error (37b87d1a5, Qu Xuan) 优化提取显示主账号名 (924053685, ioito) 避免添加新账号后长时间未同步iam用户 (fadb52044, ioito) dns 错误信息补全 (8f7a59894, lvyangyang) apigateway userinfo includes project metadata (06c1de7c1, Qiu Jian) 避免腾讯云同步虚拟机ip异常 (146683059, ioito) role assignment filter by users not working for effective users in groups (6cbd81181, Qiu Jian) error 值重叠 (9b54d58a3, lvyangyang) avoid account delete failed (8be3cfd22, ioito) use i18n.Table to handle Chinese-English conversion (c5a78a902, rainzm) scope resource filter by owner (4a27d4912, Qiu Jian) 仅在可用区故障时可强制挂载磁盘 (0a4bd281d, ioito) avoid serial vm creation (f7010a6d7, ioito) avoid compare err with cloudprovider.ErrNotFound direct (cb919f288, ioito) sql err (1b9106032, ioito) avoid account delete failed (8c0776c2a, ioito) allow cross doamin resource sync (eaef5a757, ioito) openstack zone not emulated (a31339f68, ioito) avoid purge storages (a8996ec9d, Qu Xuan) add climc support vpc/schedtag user metadata (bd122a01f, Qiu Jian) allow create disk prefer manager (74cb19cd8, Qu Xuan) dns zone cache owner info (a14b4e590, Qu Xuan) 支持公有云域过滤操作日志 (ef3d74f4e, Qu Xuan) filter cloudprovider/network by host-schedtag-id (23a18a81f, Qiu Jian) suffix template cache key (5f10a9a39, rainzm) filter storages by host schedtag (69561b40f, Qiu Jian) avoid sync dns zone cache status is init (9d76c3e02, Qu Xuan) allow domain admin view shared dns zone records (d45d48806, Qu Xuan) revert filter-by-owner changes of scoped resource (4e4ea5e6b, Qiu Jian) oidc response user’s info (be4a76b25, Qiu Jian) emulated wire not sync vpc shared info (c5cfceeb9, Qiu Jian) 允许域管理员可以看到共享的dns zone cache列表 (24fcccf5f, Qu Xuan) error code of external bucket not found error should be 404 (6a5fdc5d0, Qiu Jian) avoid qcloud secgroup cache name not sync (35e57a833, Qu Xuan) server name auto index should start from 1 (a08a779ed, Qiu Jian) filter cached images with host schedtag (1c0c66fd4, Qiu Jian) qcloud set hostname for instance (aa7495c9a, Qu Xuan) avoid slice out of bounds (e010c5c1f, rainzm) validate secgroup purge condition (6f2359329, Qu Xuan) not clean pending domain usage (624c4db06, Qiu Jian) format errors that block make test (5e5b0613f, Qiu Jian) ldap sync not update user’s phone and email (13fa3c299, Qiu Jian) project_id in resource details not correct (187dee690, Qiu Jian) vpc peering http error params (db7d32cd1, lvyangyang) qcloud instance with max bandwidth (bb62c0392, Qu Xuan) qcloud eip with bandwidth attr (b32c54f7c, Qu Xuan) trans google new region name (17ff08282, Qu Xuan) 支持带宽包用户 (f3c819299, Qu Xuan) support public ip create (02ec88ccc, Qu Xuan) sync huawei bucket project info (4b1d914b8, Qu Xuan) 优化安全组规则同步 (efa5978cf, Qu Xuan) support fake tempalte when searching template vm (281d1c45d, Rain) use new api (db6846aab, Qu Xuan) filter role assignments by project domains id or name (b2add97a0, Qiu Jian) filter project role with system=true (e2e186a75, Qiu Jian) support filter rds sku by provider (0dc485d58, Qu Xuan) allwo filter resource by with-meta and with-user-meta filter (c4d30371e, Qiu Jian) 避免并发同步安全组导致规则混乱 (0e3f78100, Qu Xuan) resolve with_meta filter conflict (cc7423d55, Qiu Jian) sync dns records after sync vpcs (914b76069, Qu Xuan) get images distinct field (f14ec60a7, Zexi Li) hostname for instance (65582cab9, Qu Xuan) huawei clirc region not correct (3d7021322, Qu Xuan) add rds cpu and memory usage (d7ae0eaa8, Qu Xuan) use correct worker (dc8086b3c, Qu Xuan) do not lock guest after lock eip, to prevent possible dead lock (0466b2c80, Qiu Jian) remote update metadata may cause metadata update loop (20f3feaab, Qiu Jian) reduce change config logs (d681a148d, Qiu Jian) missing authenticate action log for user web login (adbf51316, Qiu Jian) 新增google存储类型 (f7b16c592, Qu Xuan) cancel pending-delete should increase resource quota usages (2486aa307, Qiu Jian) monitor commonalert not detach alert resource (06a30edcf, Zexi Li) add lb quota check (5e4cc3314, Qu Xuan) add rds quota check (f74e345b0, Qu Xuan) secgroup quota support (adcce7538, Qu Xuan) add aliyun new region (80b0ed3cc, Qu Xuan) 避免冲掉设置的到期释放时间 (98bd229b3, Qu Xuan) don’t update NextSyncTime when snapshots that should be added has not (213d495a3, rainzm) sync rds account host info (fb7d22f67, Qu Xuan) add duration match (f159c7318, Qu Xuan) qcloud 5.5 single zone (cdd652c1e, Qu Xuan) 支持批量创建rds (9a03bf17c, Qu Xuan) 支持多安全组 (5cd26b297, Qu Xuan) 避免参数异常 (9821f7fe9, Qu Xuan) climc vpc-create missing cloudregion_id (588fff60f, Qiu Jian) server usage status not correct (ce06e078f, Qiu Jian) avoid delete public ip when sync eip list (d60dee6a9, Qu Xuan) qcloud server create (0e5835ffa, Qu Xuan) optimized cloudaccount climc (64740ff0f, Qu Xuan) avoid sync project panic (6ee94ab41, Qu Xuan) set secgroup status (b6016939c, Qu Xuan) avoid sync part of rds (a01cd0a81, Qu Xuan) use option manager for scheduler (8f2c51469, Qiu Jian) allow set customized private prefixes (dcc689cc1, Qiu Jian) fail to delete public_ip eip (554ec8873, Qiu Jian) make test go vet error (08bb11db6, Qiu Jian) scopedpolicies and scopedpolicybindings swagger resource name (46fe31cbd, Qiu Jian) compatible with qcloud zonal bucket (3f568a63d, Qiu Jian) classic vpc for rds (0f4114449, Qu Xuan) sync rds class vpc (d9e72f78e, 屈轩) enforce response charset (9073461f9, Qiu Jian) secgroup cache tenant_id (373166c50, Qu Xuan) filter scopedpolicybindings with multiple categories (56e5b177d, Qiu Jian) save service config changes may send invalid action log (354bcd9f0, Qiu Jian) scopedpolicybinding filter by category sql error (10a4d86d2, Qiu Jian) avoid not found cdbro- mysql instance (dc59a0872, Qu Xuan) add qcloud hssd (5b4efddec, Qu Xuan) scopedpolicybindings filter by scope project (32fe10b00, Qiu Jian) elasticcache quota not take effect (9f122f745, Qiu Jian) add rds status and expired time (f47f2c51e, Qu Xuan) auth permission result incorrect (4349cc7f9, Qiu Jian) save sso login status in cookie (ae327021d, Qiu Jian)   server generate name should be historically unique 2. ipaddr of a batch of server is in the same order as generated name (4431acde8, Qiu Jian)   missing column error when order by extra fields (03d17e6fb, Qiu Jian) 支持多内存过滤套餐 (25aed0a7e, Qu Xuan) aliyun eip api (cdead1c47, Qu Xuan) change owner should update quota usages (1bd4b85bf, Qiu Jian) add panic log for worker task (e97cd02b5, Qu Xuan) sync remove dirty rds accounts (008fd554c, Qu Xuan) search by name and order by scopedpolicy for scopedpolicybindings (73e117c6e, Qiu Jian) change level of scopedpolicy to system (79ad3c188, Qiu Jian) support rds set auto renew (a7e832488, Qu Xuan) aws secgroup out rule is deny any (bc28c8bdf, Qu Xuan) rds task fix (0272c7695, Qu Xuan) qcloud rds set renew flag (c56ebfd04, 屈轩) role-set-policies support update only operation (d66ee1fd4, Qiu Jian) avoid lock reentry (cfebba255, Qu Xuan) avoid check region log every time when account status is unknown (c2c9edd9c, Qu Xuan) renew rds (98d20725a, Qu Xuan) support create 512mb server sku (c7a6ec8e9, Qu Xuan) public ip and duration for create params (d7ab5fdd1, Qu Xuan) avoid panic (7a6022561, Qu Xuan) creating esxi guest from instance snapshot (781870953, rainzm) support resize qcloud hssd disk (b8410be11, Qu Xuan) keystone init empty catalogy cause panic (b84f23796, Qiu Jian) host memory usage status not correct (157fb1e48, Qiu Jian) mcclient panic when keystone init empty service catalog (2a1b5f8a7, Qiu Jian) baremetal usage should exclude converted hypervisor (8fcc85745, Qiu Jian) set isp’s status as ‘instance_snapshot_reset’ when reseting guest from isp (8ef1af0db, rainzm) adjust default identity quota (4d04059bc, Qiu Jian) qcloud create bucket without appId (38018080c, Qiu Jian) add error cause (83f5ce431, Qu Xuan) support import rules for secgroups (cece2852a, Qu Xuan) add err handler for notifyRobot (36dec7baa, rainzm) 支持关机不收费 (11c3f6a6e, Qu Xuan) add host-joint resources into domain level resources (7fbe72ce5, Qiu Jian) add host.memoty.total and host.cpu.total usage stats (bc5c74b1b, Qiu Jian) cloudid api addr (4592299ff, Qu Xuan) 优化azure资源同步 (0d85df52b, Qu Xuan) optimized jsonRequest (06581ad1a, Qu Xuan) allow disk attach to multiple guests (0718da3d7, Qiu Jian) avoid openstack image-list failed (#7640) (2716d4527, 屈轩) apigateway: allow logout by get method (ff24d4a3e, Qiu Jian) awscli: instance-rebuild-root fix (eee13a549, TangBin) baremetal: convert to host failed (eb857594f, Zexi Li) baremetal: clear jbod disks do PDMakeGood (f6bf3050f, Zexi Li) climc: replace ' -\u003e \" (cb594298d, Qu Xuan) climc: server-create –desc not work (df45ced78, Zexi Li) cloudcommon: add rbac_policy_refresh_internval_seconds option (6caec234a, Qiu Jian) cloudcommon: adjust policy refresh to default 30 seconds (b9d30c08a, Qiu Jian) cloudcommon: disable quota check by default (6f7a3cf8a, Qiu Jian) cloudcommon: panic when query an empty splitable model manager (ba8754687, Qiu Jian) cloudcommon: query filter ineffective for splitable (41b694ad3, Qiu Jian) cloudcommon: perform public should check the sharing scope of resource (de47e4a69, Qiu Jian) cloudcommon: supplement i18n translations (83a5f95b0, Qiu Jian) cloudevent: adjust cloudevents resource scope (540af1a3a, Qiu Jian) cloudevent,devtool: missing metadata table (5d298e71b, Qiu Jian) cloudid: add for notify templete (2faead462, Qu Xuan) cloudid: avoid new public account sync system policy delay 1 day (f05fc1894, Qu Xuan) cloudid: avoid empty auth url (869740775, Qu Xuan) cloudid: sync qcloud collaborators user (82dc17907, Qu Xuan) cloudid: optimized system policy sync (8a5e682b0, Qu Xuan) cloudid: auto update saml provider metadata (61d21d2b4, Qu Xuan) cloudid: huawei saml provider create issue (b460a73b0, Qu Xuan) cloudid: avoid use invalid character for role name (fd948b8cc, Qu Xuan) cloudmon: deal cannot get azure metric (d2459a5cc, –global) compute: filter cachedimage with health storage (625bf2356, rainzm) compute: return InputParameterError while ValidateCreateData (f11a1df3a, rainzm) esxi: check whether some fields of vm are nil (3c59d7fec, rainzm) esxi: filter linkLocalAddress (e4217074c, rainzm) esxi: return when host.Vm is empty (08041d55d, rainzm) esxi: fetch templatevm from datacenter before clone vm (5c209fe3d, rainzm) esxi: check nil value when NewVirtualMachine (01ba4b952, rainzm) esxi: don’t specify spec.Identity when osName is empty (be0e8d73b, rainzm) esxi: Guarantee the uniqueness of the schedtag for esxi host (370e7723b, rainzm) esxi: resize root disk after creating vm (9daef7d97, rainzm) esxi: resize root disk after cloning vm (bd014a6ad, rainzm) esxi: use correct device index (6afa80305, rainzm) esxi: add device after cloning vm (7aa5b28b3, rainzm) esxi: no callback in uploadHandler (d616b4004, rainzm) esxi: use system disk of template only when cloning vm (bffa601dc, rainzm) esxi: search template from whole vCenter (d4c9e6e56, rainzm) esxi: filter vmdk item in lease.info (26b1050b3, rainzm) esxi: return sumsize of disks fo template (d01b6e150, rainzm) esxiagent: add HostDelayTaskWorkerCount (a0c34a044, rainzm) esxiagent: check whether regexp is nil (e43c86586, rainzm) esxiagent: return image extid not id (5789c6ded, rainzm) esxiagent: add humanized tips when searching vm failed (eb3da9369, rainzm) git,make: 更新获取 git branch 的规则 (e8376f998, Zhang Dongliang) git,make: git branch 获取方式优化 (d7d4e6bf6, Zhang Dongliang) git,make: 修正 gitbranch 变量的获取方式，允许外部传入，解决自动升级版本 tag 不统一的问题 (b0a95cbbe, Zhang Dongliang) glance: list image by os arch use startwith (f3404f678, wanyaoqi) glance: allow public and private operations of guestimage (5824b7add, rainzm) go.mod: remove k8s.io/kubernetes dependency (734be7c14, Zexi Li) host: add print migrate progress info (6c96e6d1f, wanyaoqi) host: make sure it won’t match vpc guests by accident (428e3ab1f, Yousong Zhou) host: update telegraf conf adapter to container environment (cbc285924, wanyaoqi) host: check lease living on restart etcd session (1611ddfcd, wanyaoqi) host: fix check hugepage enabled (fbd53b493, wanyaoqi) host: fix set windows password with escape charater (539baf7ba, wanyaoqi) host: wait put host offline success (83c1073f6, wanyaoqi) host: telegraf listen on local ipv4 address explicitly (460645871, Qiu Jian) host-deployer: cancel rename centos vgname (41631ec09, wanyaoqi) host-deployer: probe image info umount rootfs first (7ed96af33, wanyaoqi) hostdeployer: umount rootfs before resize partition (27378f2c8, rainzm) keystone: ignore service config update without changes (e817076c6, Qiu Jian) keystone: panic if request with an invalid token (5a7193198, Qiu Jian) keystone: oidc driver turn on debug mode if log-level is debug (e826239ab, Qiu Jian) keystone: update user attributes whenever user login (a4b4a1d16, Qiu Jian) keystone: rolepolicies list panic if filter by domain scope (695075a85, Qiu Jian) keystone: always upload\u0026refresh service config whenever service restart (97eb6e7bc, Qiu Jian) keystone: add i18n description for policy and role (334b347eb, Qiu Jian) keystone: ignore deleted policies when matching policies (86476c22a, Qiu Jian) keystone: allow unlink a domain from an IDP (253fba47f, Qiu Jian) keystone: not allow to disable sql driver (695aa81f7, Qiu Jian) keystone: allow refresh scope resource (3e7d3c829, Qu Xuan) keystone: service config ignore deploy server socket path (8287f3767, wanyaoqi) keystone: oidc data may be encapuslated in data field (95db19f10, Qiu Jian) locales: fix translation text (65571cc5e, Yousong Zhou) log: fail to submit action log (1a2a40a81, Qiu Jian) mcclient: options: webconsole: fix passing ssh port (8a4c1a0bb, Yousong Zhou) monitor: fix nodata alertresource list (cdcfc7923, –global) monitor: add resType filter (ccf065358, –global) monitor: suggestalert ignore throw err (81e4463ab, zhaoxiangchun) monitor: modify suggestrule process influxdb data (ed13fe9e1, zhaoxiangchun) monitor: other servier create alert add used_by param as a agreement (2ba98e7ce, –global) monitor: modify monitor serviceType in StartService() (db565fe0c, zhaoxiangchun) monitor: monitor notify international and 3.6 bugfix (ab14706ff, –global) monitor: sore reture info：resourceType,measurement (ba2233438, –global) monitor: delete suggestConfig auto init data (815e16eca, zhaoxiangchun) monitor: modify influxdbSuggestDriver query err (96d0f0e63, zhaoxiangchun) monitor: modify notify alertInfo and alertOk detach resource (68dfa8a8c, zhaoxiangchun) monitor: modify monitor nodata alert matching onecloud host func (2564f3c06, zhaoxiangchun) notify: check for changes before updating config (6591ccedc, rainzm) notify: return the result of the second attempt to execute the rpc call (b1ef8865b, rainzm) notify: pull contact for workwx, dingtalk and feishu (1517ed79f, rainzm) notify: allow normal user create their receiver (5bfc3128c, rainzm) notify: break down permissions of notifyconfigs (a9fafc451, rainzm) notify: customize the title of the verification email based on the copyright (d3aae0009, rainzm) notify: clean verifyNote when mark verified (e47f8a896, rainzm) notify: add AllOkContactTypes in where permanently enabled and verified ContactType (fbc951330, rainzm) notify: repull subcontact after changing config (c5acc1b48, rainzm) notify: Set default priority ‘normal’ when creating notification (9af0fe1fe, rainzm) notify: fit correctly when send notification via contact (cdf782537, rainzm) notify: return correct value when sortContactType (c522b4524, rainzm) notify: be compatible with keystone’s UsersV3.GetById (7ed99506a, rainzm) notify: modify name of notification to avoid duplication (087927871, rainzm) notify: Mark verified not enabled in MarkContactTypeVerified (9029e98c2, rainzm) notify: use AfterSend for contact with succuessful sending (9978f1954, rainzm) notify: Allow user list receivers (2ea4138f3, rainzm) notify: avoid deadlock (b1abb353a, rainzm) notify: Replace String() with GetString() (6509ed6e9, rainzm) region: fix backup server start task (735f10a50, wanyaoqi) region: fix modify tags log (de67ee5a2, lvyangyang) region: remove default value of diskConfig.Medium (216e11f29, rainzm) region: roll back the optimization of cachedimage list (eef90b58e, rainzm) region: allow member user get saml auth addr (dea1f29aa, Qu Xuan) region: optimized qcloud secgroup sync, only redis need secgroup be in same project (a84ed01f2, Qu Xuan) region: server skus add cloud_env (d39b3e820, TangBin) region: dbinstance skus sync log level fix (7be898fbc, TangBin) region: change dbinstance sku sync info log to warn (133ba01e9, TangBin) region: validate invalid character for password (35544a7c2, Qu Xuan) region: region qcloud secgroup project id (45a3ce82d, Qu Xuan) region: inspect invalid guest template (5602db8f5, rainzm) region: huawei vnc protocal fix (8db56d90f, TangBin) region: elb cached acl sync (69fa370b0, TangBin) region: optimized azure rebuild root (0252c00ef, Qu Xuan) region: avoid resize azure disk error (0bfa488ac, Qu Xuan) region: sync automatically snapshot for external disk (f13c12d0c, rainzm) region: init NextSyncTimeiwhen create snapshotpolicydisks (a2d221685, rainzm) region: add suffix ‘display’ for time_points and repeat_weekdays (92d862b17, rainzm) region: elastic cache name is empty fix (8bdcc83a8, TangBin) region: redis master zone empty fix (76eb12489, TangBin) region: lb listener filter by acl_id (08dda723b, TangBin) region: lbcert\u0026lbacl releated listener count bugfix (7b96d2593, TangBin) region: avoid timeout for waiting azure async task (f22fe4fe3, Qu Xuan) region: azure win os defualt user (a82327388, Qu Xuan) region: azure reset windows os password (81b31b2fe, Qu Xuan) region: compute binded disk count when deleting snapshotpolicy (2f6678f9a, rainzm) region: avoid qcloud sync local disk error (0c7adedaa, Qu Xuan) region: prevent dirty data when syncing snapshot (c6864e4ae, rainzm) region: detach all snapshotpolicy when realdeleting disk (e660946d2, rainzm) region: temp url sign wrong (c6a7a8701, Qu Xuan) region: omit vpc quota check if vpc created by owner (e38ea05c2, Qiu Jian) region: azure instance data disk storage type (3633baaa2, Qu Xuan) region: clear dirty data of snapshotpolicydisks when start up (7582ead4c, rainzm) region: attach network on register baremetal server (dcd893692, wanyaoqi) region: compute NextSyncTime for snapshotpolicydisk (97f93e6a1, Rain Zheng) region: allow delete resource which status is unknown (f35be9756, Qu Xuan) region: openstack available zones (7abd40c54, Qu Xuan) region: validate isolated devices on migrate (78e8d2f35, wanyaoqi) region: restore password validate condition (acedb4a4f, Qu Xuan) region: sync account id (e540e6561, Qu Xuan) region: allow resize system disk of esxi (46e42724b, rainzm) region: allow update rds account and database desc (e483d1901, Qu Xuan) region: support openstack subnet allocation pools (edcff8045, Qu Xuan) region: optimized qcloud prepaid instance delete (b5b7e89c6, Qu Xuan) region: optimized openstack change config (0d32c5d8e, Qu Xuan) region: sanitize eip charge type on all callsites (14d6c9d6e, Yousong Zhou) region: add SDnsZoneCache to DnsZoneCacheDetails (6efb3fc12, rainzm) region: delete guest without ‘purge’ in GuestDetachScalingGroupTask (0edec40b2, rainzm) region: code gen api error (b6ace002d, Qu Xuan) region: secgrouprule: set model manager (73f434e03, Yousong Zhou) region: aws default account (97eab67f0, Qu Xuan) region: openstack hosts sync (8692498cb, Qu Xuan) region: optimized rds backup create (2a6421258, Qu Xuan) region: reserved name checking while create redis account (a924c9552, TangBin) region: sort excludedNets correctly (c1d95bc31, rainzm) region: pass up error from InitializeData (d2e304bae, Yousong Zhou) region: import rule error hint (a8116b525, Qu Xuan) region: support rds secgroup operation (c5a974e74, Qu Xuan) region: gpu server change config use reserved resources (b07387b57, wanyaoqi) region: apsara is private cloud (21d9edcfa, Qu Xuan) region: aws lb create tags param (4cb9c936c, lvyangyang) region: sku enabled (92fee001e, Qu Xuan) region: allow reset huawei system disk (3ed59afae, TangBin) region: bucket get referer fix (0174e686d, lvyangyang) region: server login info\u0026 keypair import input parameter trimspace (f20ca8b9c, TangBin) region: cloudregion\u0026zone add namei18n (2a4a762f2, TangBin) region: get provider name via GetProviderName (843534c29, rainzm) region: get provider name via GetProviderName (1c475b091, rainzm) region: optimized server stop code (0a8348a36, Qu Xuan) region: network reserved ip count not consider expiration of reserved ips (d8684ea5a, Qiu Jian) region: fix set bucket referer (6f3cabda6, lvyangyang) region: auto sync cloudaccount resources (e056bb102, Qu Xuan) region: apsara optimized (38a0b76a5, Qu Xuan) region: purge private cloud sku (a2b15c596, Qu Xuan) region: sku.meta use global proxy (14bdbea3e, Qu Xuan) region: huawei sync storages bugfix (d5973135d, TangBin) region: prevent infinite recursion (d2ed19175, rainzm) region: optimized disk allocate sched failed log (27a2d36ff, Qu Xuan) region: baremetal post update related server (d001e0ec8, Zexi Li) region: qcloud request retry (e52fb3260, Qu Xuan) region: avolid aliyun fin bucket list objects error (061c5d6dd, Qu Xuan) region: wire get vpc releated hosts is empty (bcfb05019, Zexi Li) region: network clean schedule cache after real deleted (3c85ed11b, Zexi Li) region: vpc list usable fix (b30a40d70, TangBin) region: aws detach igw before delete vpc (da8232807, TangBin) region: vpc create validate cidr mask length (b46d51d1e, TangBin) region: set ownerId as userCred when can’t FetchOwnerId (dbb1d8072, rainzm) region: chooseHostStorage (cfc58a356, rainzm) region: aws create root device name fix (68a2111bf, TangBin) region: aws create storage type fix (9218c9e0b, TangBin) region: sku list query print missing error info (72153ecf5, TangBin) region: aws vpc delete related route table \u0026 internet gateway (9f52afdf9, TangBin) region: aws vpc delete skip delete default secgroup (5ff27734b, TangBin) region: aws delete vpc skipped delete main route table (ac8939494, TangBin) region: fetch correct ownerId in PerformPrepareNets (60490c75d, rainzm) region: aws create vpc with igw add defaultroute (efb436871, TangBin) region: vpc usable fix (596b376d8, TangBin) region: vpc sync external access mode fix (cef3d52f0, TangBin) region: aws sync vpc access mode bugfix (834f5a97d, TangBin) region: split brand as ‘YunionCloud’ and ‘云联壹云’ when notify server event (43d45a1b4, rainzm) region: climc add base projects options (4d4c84801, TangBin) region: allow delete storagecachedimage with ‘cache_failed’ status (ed2a86774, rainzm) region: add GetSlaveFieldName for ScalingGroupGuest (36f43fba9, rainzm) region: start vm when ‘auto_start’ is true (a14b556f2, rainzm) region: exclude network recommended for host when suggesting network for guest (930c64315, rainzm) region: skus add cloudenv (f17593d3f, TangBin) region: apsara metrics fix (a67b09668, Qu Xuan) region: remove i18n fix \u0026 zone \u0026region name support i18n (e28955301, TangBin) region: guestnetworks: use net calculated mtu (6e449c123, Yousong Zhou) region: ignore params.Disks when cloning vm from snapshot (4d13956bc, rainzm) region: add size and storageType for VMware InstanceSnapshot (6ea550d01, rainzm) region: make project of instance snapshot be consistent with the instance (727b89db5, rainzm) region: save when canceling pendingUsage (6d2e91439, rainzm) region: eip_allocate_task: set eip status allocate_fail on task failure (bb0568d18, Yousong Zhou) region: purge all instance snapshots when purging guest (1561d6539, rainzm) region: fix change config forecast (52f0afda0, wanyaoqi) region: update translations (25eb67b37, TangBin) region: create vm with eip task fix (2e401b566, TangBin) region: ctyun delete server bugfix (bc3fdb890, TangBin) region: vpc create data cird validate (ad39e790d, TangBin) region: network create mask length validate (755f4a93a, TangBin) region: remove unnecessary vpc validate create date error wrap (e4f372ba5, TangBin) region: set qcloud instance del timeout to 20m (2d7cdad8f, Qu Xuan) region: guest to create input keep billing info (f8c4c008f, wanyaoqi) region: do not change disk status on migrating (e26fb5cc1, wanyaoqi) region: qcloud bucket set cors (f1b428be0, lvyangyang) region: valid qcloud hssd for system disk (828141168, Qu Xuan) region: sync servers (d2d96b122, Qu Xuan) region: get qcloud bucket cdn-domain (b5d50fdfc, lvyangyang) region: ignore classic vpc checkout while add lb backend (4e811240e, TangBin) region: azure secgroup rule not allow with same priority and direction (2b0e8afe0, Qu Xuan) region: redis create account add name validate (0bbba6d3f, TangBin) region: private cloud sku create (1aec7ab25, Qu Xuan) region: delete aliyun account bugfix (e5289f8a4, TangBin) region: compatible aliyun fin oss (0feddb13a, Qu Xuan) region: avolid panic when list role’s policies (059cd7527, Qu Xuan) region: create redis validate network and sku zone match (c18d1f0e7, TangBin) region: checking cloudenv while create/update aliyun cloud account (767e06a1d, TangBin) region: purge account bugfix (96d2e2403, TangBin) region: create/update aliyun account bugfix (6391ef84d, TangBin) region: add RequestSyncstatusOnHost for SESXiGuestDriver (3fb175ba7, rainzm) region: elasticcache_instances: fix error fmt (ab7ba8322, Yousong Zhou) region: lbbackend: better error reporting for finding influxdb info (48f1cf12a, Yousong Zhou) region: cert\u0026acl cache delete condition check (c4eda6b5a, TangBin) region: aliyun elb listener\u0026lbbg sync project (1a4faf410, TangBin) region: elb acl validate create data fix (0c3a1986f, TangBin) region: lbacl \u0026lbcert default share scope (5a10db10c, TangBin) region: fix openstack instance os type (9c0ce58a0, Qu Xuan) region: add instance capability info(default account) (cfd7c5bd9, Qu Xuan) region: azure host with storage (8207a9c99, Qu Xuan) region: avoid openstack change config error (b60d18c06, Qu Xuan) region: apsara account fix (ab58f0335, Qu Xuan) region: add saml auth for capability (90709ab70, Qu Xuan) region: set classic vpc name to “-” (db00c8355, Qu Xuan) region: 避免从云上同步下来的主机，创建相同配置时network_id为空 (f150da6d9, Qu Xuan) region: add huawei gpssd desc (a9c6579b6, Qu Xuan) region: aliyun sync region fix (8682c71d9, TangBin) region: aliyun region name (bb091a3cb, TangBin) region: aliyun zone name fix (85324cadf, TangBin) region: openstack network is regional (ea41bb4f1, Qu Xuan) region: avoid public ip bandwidth is zero (5dea11952, Qu Xuan) region: change_ipaddr: retain eip_id on detach and attach (f33b9c716, Yousong Zhou) region: 避免OneCloud密码校验通过，公有云厂商密码校验不通过 (782372c35, Qu Xuan) region: azure async task (09adc5f60, Qu Xuan) region: azure metric request path (a79a61c41, Qu Xuan) region: validate cloudaccount saml auth params (a9ef8a1e3, Qu Xuan) region,baremetal: choose candidate network not according by types (9f2b137f0, Zexi Li) region,baremetal: pxe net reuse converted server access ip (829faa1ab, Zexi Li) region,climc: eips: rename arg name for requested eip addr (baff00483, Yousong Zhou) region,esxiagent: allow host behind a nat (197049dcb, Qiu Jian) region,glance: list by os arch adapt to empty strings (027a9439c, wanyaoqi) region,host: fix hot remove nic (7c1923abf, wanyaoqi) region,scheduler: fix netwrok predicate (c8ca855cb, wanyaoqi) region,yunionapi,glance: using global proxy (c1ecb6330, Qu Xuan) scheduler: select resource unordered (5b170650f, Zexi Li) scheduler: more standardized testing (81feadc13, rainzm) scheduler: filter InstanceGroup whose enabled is false (ca58fb8d2, Rain) scheduler: sku filter check zone if only prefer region specified (019c03413, Zexi Li) scheduler: clean expire cache before schedule (a16899c9b, Zexi Li) scheduler: fetch input network when specified (5cfd7f040, Zexi Li) scheduler: get candidates error more info (01124b312, Zexi Li) scheduler: sku by region and fill onecloud vpc networks (24fdb6e84, Zexi Li) scheduler: check candidate tag resource is nil (66eee7f72, Zexi Li) scheduler: storage predicate add actualCapacity filter (e7dd6bba0, Zexi Li) scheduler: fix array out of bounds when sorting hosts (de1b5bc96, rainzm) taskman: use admin token if task userCred token expired (b3c90a804, Qiu Jian) taskman: SSubTask: set model manager (a51a0845b, Yousong Zhou) treewide: fix task error recording (d86834777, Yousong Zhou) vpcagent: ovn: stable dns A record value (b3e196950, Yousong Zhou) vpcagent: models: guestnetworks: accomodate change_ipaddr (d1f1eda98, Yousong Zhou) webconsole: trim api_server url if end with slashes (1236a0326, Zexi Li)  Bugfix (5)  commonalert (444ff1901, zhaoxiangchun) qcloud pull metric (26965521f, zhaoxiangchun) collect esxi metric timout (ec3b5c09b, zhaoxiangchun) region: server change config rebase to sched task (5314ce98b, wanyaoqi) region: fix list by srever type normal (3756993c9, wanyaoqi)  Chore (2)  monitor: delete suggestion files (83e899d9a, zhaoxiangchun) util: update centos build version to 1.1-3 (d98060492, wanyaoqi)  Climc (12)  helper: add BatchCreate helper (91fab1217, Yousong Zhou) helper: create call as a standalone method (f6f4fc125, Yousong Zhou) s/Keyworkd/Keyword/ (9228b1792, Yousong Zhou) network-list with multiple –bgp-type args (6464597c9, Yousong Zhou) k8s machine show resource_id (0f2521487, Zexi Li) servers: create with eip bgp type (4d895d658, Yousong Zhou) add k8s federated resource update subcommand (ddf483bc0, Zexi Li) eip ops by bgp type (bc898e9e3, Yousong Zhou) add k8s fed resource sync action (037fa814f, Zexi Li) refactor k8s sub command (e2604d531, Zexi Li) add k8s federated resource cmd (742e45571, Zexi Li) k8s cluster grafana componet support subpath (930a72667, Zexi Li)  Cloudcommon (5)  db: GET: i18n for result of get property calls (c1468105f, Yousong Zhou) db: add man.GetI18N (d639b0a84, Yousong Zhou) db: modelbase: distinct-field: readability change (d6243fbc6, Yousong Zhou) get joint model should aware fieldname (1af48dc73, Zexi Li) joint model list should add field_name into query (a47553a7a, Zexi Li)  Cloudprovider (2)  add ErrAddressCountExceed (444e66647, Yousong Zhou) ICloudNic: add methods for secondary addresses (9840d7cf7, Yousong Zhou)  Code Refactoring (24)  find the most suitable storage (267929452, rainzm) apis: compute: remove EIP_CHARGE_TYPE_DEFAULT (a28fa3cf4, Yousong Zhou) climc: webconsole: use helper methods of response struct (ce00a1761, Yousong Zhou) esxi: fetchVms and fetchHardwareInfo (4d74a9778, rainzm) esxi: replace GetTemplateVMById with FetchTemplateVMById (dcb6db044, rainzm) host: startvm: for compat (c2d173ae1, Yousong Zhou) host: startvm: nic_speed: use raw string (38492014b, Yousong Zhou) host: startvm: add QEMU_CMD_KVM_ARG (4cf3565b2, Yousong Zhou) host: metadata: eliminate ref of guestNic (0f1fc0fa5, Yousong Zhou) hostman: metadata: eliminate import of guestman (6a2136f6c, Yousong Zhou) hostman: use metadata.DescGetterFunc (de7eb162f, Yousong Zhou) notify: add StartSubcontactPullTask for receiver (8d6defe22, rainzm) notify: hide SSunContact webconsole (8a80f96d6, rainzm) region: faster sync CapacityUsed for Storage (42309b8a7, rainzm) region: remove return value of NotifyWebhook (0d36b3b74, rainzm) region: faster list for cachedimage (de4f1579d, rainzm) region: faster list for cachedimage (bd4851c9f, rainzm) region: faster GetIImageById (936ea0040, rainzm) region: replace ‘ActualCapacity’ with ‘ActualCapacityUsed’ (56d24dfa9, rainzm) region: optimize preparenet of cloudaccount (ed484f4e2, rainzm) scheduler: make forcast result clearer (9d18b94ad, rainzm) scheduler: remove unused k8s predicates code (2a2867daa, Zexi Li) webconsole: use structured response (5959a204f, Yousong Zhou) webconsole: api: add helper methods for response struct (8e9b4aed2, Yousong Zhou)  Db (8)  interface: manager: add HasName() method (ed1999efa, Yousong Zhou) standalone_anon: empty result for name query (c8ad51174, Yousong Zhou) add standalone_anon (c45550ef6, Yousong Zhou) add manager methods appliers (d8ab874ef, Yousong Zhou) virtualjoint: add FilterById on RowId (79120f3de, Yousong Zhou) modelbase: BatchCreateValidateCreateData: return orig data (0e0a39490, Yousong Zhou) check funcs required by dispatcher (3b32ce56c, Yousong Zhou) IModel: add GetI18N() method (9fd0f3088, Yousong Zhou)  Db_dispatcher (3)  allow batch create for models without name (c389aaaeb, Yousong Zhou) delay compute to where needed (f62dddda5, Yousong Zhou) remove unused GetExtraDetails call (0c8ab90f7, Yousong Zhou)  Disk (1)  check disk is need renew on guest set renew (3ac63f537, wanyaoqi)  Dns (1)  isMyDomain: match only strict subdomain of dns_domain (a67026dec, Yousong Zhou)  Eip (3)  create by BgpType (59dd8a0e2, Yousong Zhou) NewEipForVMOnHost: add opslog (b44ac491c, Yousong Zhou) construct a pointer type (83f5a38c2, Yousong Zhou)  Elasticips (6)  NewEipForVMOnHost: make args a struct (f51495048, Yousong Zhou) charge_type: make it varchar column (4537cc3db, Yousong Zhou) bgp_type: make the db column nullable (e61a85b7c, Yousong Zhou) error when we have no usable eip network (63c4818b8, Yousong Zhou) fix calling FilterByOwner (382f62828, Yousong Zhou) filter by owner when doing auto allocation (5afbe831d, Yousong Zhou)  Feature (19)  emualated ssd support (#7701) (0cbad8aea, Jian Qiu) add dns interface (f251559c3, Qu Xuan) allow session level yunion_auth cookie (2a6445c31, Qiu Jian) add apsara support (b195f95bd, Qu Xuan) saml for cloudid (d4edbbb61, Qu Xuan) allow join project across domain (f10267b0f, Qiu Jian) allow specify offset in name pattern (0beee87db, Qiu Jian) auto create domain for sso idp (178e1ab8f, Qiu Jian) support cloudprovider, cloudregion and zone schedtag (cc32bb39e, Zexi Li) support scoped policy that manage ui policies for domains\u0026projects (01d4c2a1c, Qiu Jian) policy group support (2d39cb4cb, Qiu Jian) add qcloud rds support (f77605418, Qu Xuan) remote update qcloud instance metadata and name (e967dd7d6, Qiu Jian) qcloud create VM with tags (38abe9b45, Qiu Jian) filter storages by image (6abd9b0e9, Qiu Jian) qcloud create VM with tags (ddefc2ab3, Qiu Jian) climc: policy save data into file (94dd5c577, Qiu Jian) cloudcommon: split opslog table (ec14f9a6b, Qiu Jian) keystone: user add language attribute (768c88d28, Qiu Jian)  Features (132)  use details data to cover obj data in FetchCustomizeColumns (f6844e3c6, rainzm) change templateid as / in esxi (335c8eecc, rainzm) Add IResultHelper (4b4875cd7, rainzm) update locales (1e297dca1, rainzm) Add method ‘Sku’ to CandidatePropertyGetter (0bd84dd4b, rainzm) download the role to tmpdir not system role dir (deb3758bf, rainzm) add keep_tmpdir options (1eaf2eaff, rainzm) support creating vm from instance snapshot (6f6ea9e38, rainzm) creat, delete, revert and sync operator for esxi instance snapshots (2ed4534f4, rainzm) add WithCtx version to notifyclient function (4b49bcec8, rainzm) add NotifyError in notifyclient (54c7069d9, rainzm) notify user when failing to change config (acf1f1279, rainzm) add ICloudInstanceSnapshot \u0026 modify ICloudVM (e11011ddb, rainzm) log err when sending notification via notifyclient (8eb420e42, rainzm) support snapshot of esxi (7bdcf9552, rainzm) respect params.Disks when cloning vm (a174c32ea, rainzm) add SubImages in Image (564c6cf45, rainzm) add GetSchedtags for ICloudHost (c9039f947, rainzm) add a retry mechanism to AutoSyncExtDiskSnapshot (5e82a7e50, rainzm) add GetCapacityUsedMB for ICloudStorage (fd14e7b6c, rainzm) add ‘ip-list’ for esxicli (4b860cb43, rainzm) filter esxi ip by CIDR (e0aa67357, rainzm) add valid filter for cachedimage list (18fdfad79, rainzm) add NotifyWebhook in notifyclient (264b9ef39, rainzm) add vlanId for suggested network (a4527aec5, rainzm) support lock storage from selected cachedimage (10f0f07bd, rainzm) add ‘vlan_id’ param when creating network (7ab4decab, rainzm) inherit lang from ctx fro Task (e45ddaeb9, rainzm) rds recovery new instance from backup supported (fd4b544fb, Qu Xuan) apis: add const VPC_OVN_ENCAP_COST (aaec97470, Yousong Zhou) appsrv: Application: add Stop method for shutdown behaviour (7d0828410, Yousong Zhou) build: add .dockerignore (2b5014b84, rainzm) build: add DOCKER_BUILDKIT in docker_push.sh (5ab362d05, rainzm) climc: add cloud-account-preparenets-vmware command (67788b179, rainzm) cloudcommon: db: jointbase: add list:“user” for RowId (53125e6ed, Yousong Zhou) cloudcommon: determine the notification template based on the user’s language preference (7d75620d6, rainzm) cloudcommon: allways send webconsole notification via contacts (cff5b8b65, rainzm) cloudcommon: add NotifyWithContact (474bd1440, rainzm) cloudid: notify clouduser created (618d07f45, Qu Xuan) cloudid: support aliyun saml auth (592ae29d7, Qu Xuan) esxi: use more specific storage types (bb6af1e22, rainzm) esxi: support fake template vm via regex filter (48940c77a, rainzm) esxi: add GetSchedtags implementation for esxi.SHost (1cb286080, rainzm) esxi: expand disk config from subimages when creating vm (5251304a4, rainzm) esxi: correctly judge whether inet is nil (3793387b6, rainzm) esxi: copy disk from image when creating vm (937bf4513, rainzm) esxi: support fetchVM form datacenter (0aa9dc6fb, rainzm) esxi: do not specify portkey in NewVNIC (8553f9024, rainzm) esxiagent: keep data disks when cloning vm (d618f61c1, rainzm) esxiagent: try to customize vm if deployfs failed (93df31a97, rainzm) esxiagent: try to resize partition after resizing disk (a1bc77a40, rainzm) esxicli: better vm operator (14c5e18c2, rainzm) host: add option OvnEncapIpDetectionMethod can-reach:xx (8db93257d, Yousong Zhou) host: metadata: make vpc aware metadata handler (8f1f1f55c, Yousong Zhou) host: startvm: set vpc nic mtu (206ae7f9e, Yousong Zhou) host: startvm: add nic_mtu shell func (005fad402, Yousong Zhou) host-deployer: add deploy driver libguestfs (cfa1a4ee4, wanyaoqi) hostdeployer: support resizefs for esxi disk (22cec0964, rainzm) keystone: filter domain/user by idp_entity_id (b27b086cc, Qiu Jian) monitor: add nodata alert policy (766118937, zhaoxiangchun) monitor: add global alertrecord (e2ca41a5f, –global) monitor: add alert slience time and modify scoperesource FetchUniqValues func (1a1df0f07, –global) monitor: add metric description (09660da0a, zhaoxiangchun) monitor: support create nodata alert from web (c2b8f6a83, zhaoxiangchun) netutils2: add MyIPTo (e53bdd5f9, Yousong Zhou) notify: support webhook contact type (012d9b158, rainzm) notify: Support trigger-verify for feishu, dingtalk and workwx (e179191dd, rainzm) notify: replace VerifiedContactTypes with VerifiedInfos in ReceiverDetails (89ec96567, rainzm) notify: enable watching user in keystone (a4dc42e69, rainzm) notify: sort the returned contact type array (77bbb2cfd, rainzm) notify: break down error from UseridByMobile (bf12f5b57, rainzm) notify: user cmdline helpler for climc notify-receiver-xxx (e17768fbc, rainzm) notify: add intellij-get for receiver (75b0889c3, rainzm) notify: Allow use topic to filter notification (0a9a73587, rainzm) notify: Add VerifiedNote for SSubContact (3e982ab79, rainzm) notify: permit admin sending notification via contact (cb663f460, rainzm) notify: Add TNotifyChannel const of robot (f57a199cb, rainzm) notify: allow empty receivers for robot or webhook contact type (2e094a310, rainzm) notify: add webconsole in enabled contact types (bce332272, rainzm) notify: add IntelliNotify (c12b276ea, rainzm) region: larger suggest network and more complete vlanid (cc2675269, rainzm) region: add CloudCaches in DnsZoneDetails with GET (fd360b071, rainzm) region: call NotifyWebhook in when sonme tasks complete (ce0c88d79, rainzm) region: huawei recovery new rds (551aa2f91, Qu Xuan) region: 多云 bucket website.cors,referer 配置 (c9185a43c, lvyangyang) region: use NotifyWebhook when operating dnszone (5a07858e1, rainzm) region: add wire level for preparing network (5a186dbb3, rainzm) region: filter network via storage (f03d5af31, rainzm) region: allow prepare nets for existed cloudaccounts (aad9aba48, rainzm) region: make DeleteSnapshotExpiredRelease applies to postpaid vm (be042a075, rainzm) region: add bucket cloud tags support (66412faf9, lvyangyang) region: call NotifyWebhook in the life cycle of guests (541128d37, rainzm) region: add option NoCheckOsTypeForCachedImage (dfc246ca5, rainzm) region: add list filter server type (6c4ba1737, wanyaoqi) region: networkaddresses: filter by guest ids (b46d50ae3, Yousong Zhou) region: options: allow setting default vpc external access mode (05c95295b, Yousong Zhou) region: regiondriver: add methods on eip charge type (8d7d240b3, Yousong Zhou) region: search server by substr of ip or mac (ca21bcf56, Yousong Zhou) region: set qcloud bucket policy (9872a05be, lvyangyang) region: add SExternalizedResourceBase, SManagedResourceBase to SInstanceSnapshot (bb109953d, rainzm) region: support automatic start vm after reseting isp (f077f0602, rainzm) region: support sync skus by cloudregion (86838db6d, TangBin) region: support sync skus by cloudregion (d86f9a200, TangBin) region: add options DeleteSnapshotExpiredRelease (e4efbdc33, rainzm) region: make address recommendations more precise (fc6a30b20, rainzm) region: add test for CloudaccountManger.PerformPrepareNets (ae94914a7, rainzm) region: sync capacityUsed for storage after deploying or deleting guest (390cc11e7, rainzm) region: sync schedtags when syncing host (0bd75b7bc, rainzm) region: sync CapacityUsed for Storage (0bda9e751, rainzm) region: export user tags support virtual resources (d76915893, wanyaoqi) region: add RequestResizeDiskOnHost to SESXiHostDriver (8c17cdd5e, rainzm) region: server list add parameter eip_associable (8a1d15eba, TangBin) region: networks: add getMtu method (80efc97c6, Yousong Zhou) region: distinguish between pending delete and delete notification (0c7287233, rainzm) region: add instance_snapshot for regionquota (23b1a2b14, rainzm) region: send webhook server_create when canceling pending delete (79eacb5b4, rainzm) region: inter vpc network (eb91e8fcd, spike.lv) region: add instance storage capability (877989529, Qu Xuan) region: divide notify templates into Chinese and English versions (ac438282a, rainzm) region: replace 虚拟机 with 主机 or 云主机 (654c51724, rainzm) region: change fomat ‘id’ to ‘name(id)’ in scheduledtasks' log (33a4f332c, rainzm) region: support aliyun finance cloud (2a1f9ecbc, TangBin) region: add SCloudregionResourceBase for SInstanceSnapshot (35fc62bba, rainzm) region: azure tags (950e75f8b, lvyangyang) region: set pendingUsage before creating instance snapshots (8627818e1, rainzm) region/glance: update cpu arch apis (59102f2dd, wanyaoqi) region/schedtag: schedtag support set multi resources (a16b048f9, Zexi Li) scheduler: support filtering storage via medium (bf30c48ee, rainzm) scripts: add export DOCKER_BUILDKIT=1 (4135e62f6, rainzm) vpcagent: export subnet mac gen funcs (9288c2fd8, Yousong Zhou) webconsole: add huawei vnc support (6e0acab93, TangBin) webhook: send webhook notification when c/d loadbalancerlisterrule (24f4a684a, rainzm)  Glance (1)  check min disk size on update (53d0914cd, wanyaoqi)  Guests (1)  add bgp_type arg when create guest (6bbf09049, Yousong Zhou)  Host (5)  fix order init host srevice (cbb801753, wanyaoqi) restart etcd session on keepalive failed (7dc8f906c, wanyaoqi) specifie bash for start guest (aa45e62cb, wanyaoqi) fix sync storage info duration' (4b09751f5, wanyaoqi) fix rbd storage cache iso image (9e0ce8722, wanyaoqi)  Hostinfo (1)  try create network add is_on_premise (#7706) (74c8c6bfe, wanyaoqi)  Hostman (1)  metadata: add handler for /local-sub-ipv4s (adb998ff5, Yousong Zhou)  Hotfix (1)    allow merge networks without continuous addresses 2. filter guest_ip_start and guest_ip_end with contains operator (6a55acafa, Qiu Jian)    Httperrors (3)  HTTPError: use Error type (776ef9b8b, Yousong Zhou) add Error type (4d7eee4f2, Yousong Zhou) use existing details if id is not present (#7710) (da64e4a26, Yousong Zhou)  Httputils (1)  preserve format val types (d21c262c1, Yousong Zhou)  I18n (2)  add ITable (449c96ad5, Yousong Zhou) move out from httperrors pkg (1c1dcbde4, Yousong Zhou)  Informer (1)  ignore outside context cancel when worker run (ff53671a1, Zexi Li)  Locales (3)  monitor: add translations (0ecdb5cd9, Yousong Zhou) update translation (b075447f9, Yousong Zhou) update translations (69c7af840, Yousong Zhou)  Lockman (1)  test: add prefix setting (cd5163eeb, Yousong Zhou)  Logclient (5)  i18n: en for const (ca8fcb336, Yousong Zhou) i18n: cn for const (08ef1728d, Yousong Zhou) convert const val to use latin chars (31cea0a73, Yousong Zhou) move ws list to separate file (7f90da555, Yousong Zhou) separate lines (ee7b9e287, Yousong Zhou)  Logger (4)  actionlog: i18n for distinct-field (e4cef880a, Yousong Zhou) actionlog: readability change (d8887266a, Yousong Zhou) actionlog: add GetI18N (202ded8c9, Yousong Zhou) actionlog: remove redundant comments (fb28d96d5, Yousong Zhou)  Monitor (4)  query with signature and support measurement without database (3a5bde4a3, Zexi Li) set default influxdb datasource by endpoint type (409c67e24, Zexi Li) add alert resource (31cf935da, Zexi Li) error fmt (50eafd957, Yousong Zhou)  Multicloud (12)  qcloud: fix instancenic (e8ef92ad2, Yousong Zhou) qcloud: add ptr deref func (5f1fd6c7f, Yousong Zhou) qcloud: add apiDomainByRegion (0e0f8bfa9, Yousong Zhou) qcloud: add getVpcClient (1ab4d4049, Yousong Zhou) qcloud: add getSdkClient (9dcd0d2db, Yousong Zhou) aliyun: instancenic: handle InvalidOperation.Ipv4CountExceeded (a3d6a039a, Yousong Zhou) aws: subaddress management (1b6275f80, Yousong Zhou) aws: instancenic: add interface id attribute (3159f6d6d, Yousong Zhou) aliyun: instancenic: secondary address management (0fe90abea, Yousong Zhou) ICloudNic: add GetId() (2afa068d7, Yousong Zhou) ICloudNic: fix GetMAC() (956bc945a, Yousong Zhou) aliyun: make getSdkClient proxy aware (9072a69ae, Yousong Zhou)  Networkaddresses (6)  handle cloudprovider.ErrAddressCountExceed (eec81e73e, Yousong Zhou) do server sync for on premise servers (159453ece, Yousong Zhou) disallow batch create for external resources (05984b49a, Yousong Zhou) cloudprovider support (7343be04b, Yousong Zhou) add to nics field of guest desc (0c8d8358e, Yousong Zhou) add parent_type guestnetwork (87ed4e9a5, Yousong Zhou)  Networks (6)  usedAddressQuery: rename with baseq, ownerq, retq (8ed18fbf3, Yousong Zhou) split getUsedAddressQuery as method of each manager (1609496f9, Yousong Zhou) fix typo in log (f54de809b, Yousong Zhou) make filter by bgp types available (51dafd29e, Yousong Zhou) list: make bgp_type available (d4469ffde, Yousong Zhou) add field BgpType (258ceb7ba, Yousong Zhou)  Opslog (1)  move const to separate file (642a90146, Yousong Zhou)  Optimized (5)  server delete log and wait time (1e160821e, Qu Xuan) aliyun create rds backup (aa5cbd0b0, Qu Xuan) rds zone sync (d207d982e, Qu Xuan) create eip params (17cf23b80, Qu Xuan) region: qcloud bucket policy set and get operation (c0bcfa9a5, Qu Xuan)  Others (186)  update vendor (b4d5400e6, Qiu Jian) update vendor (93ceb707b, Qiu Jian) 负载均衡ACL\u0026证书增加项目和共享 (670a06d53, TangBin) add getStorageType err log (1afaa2950, TangBin) suggestAlert feature: (2bae6c0bb, zhaoxiangchun) add redis and redis skus slave zone info \u0026 huawei aws supported storage type update (2d15a7b97, TangBin) docker 交叉编译规则更新 (c9ec30b5b, Zhang Dongliang) detach AlertResource on alertDisable (357dd4e69, zhaoxiangchun) add:get bucket cdn domain (9b627c10f, lvyangyang) host-deployer: customize user cloudroot home dir (6e66a129d, wanyaoqi) add:bucket ops const i18n (8c29c5396, lvyangyang) qcloud create single zone elb bugfix (63eddd219, TangBin) modify alertResource ws info (d02db0e40, zhaoxiangchun) qcloud bucket task (da4150e5c, lvyangyang) commonalert bugfix: (c39540d5c, zhaoxiangchun) huawei vm support vnc (6b23c5c8f, TangBin) aliyun finance cloud zone add suffix (576120f15, TangBin) aliyun finance cloud region add suffix (7360c544f, TangBin) suggestalet bugfix (922874936, zhaoxiangchun) qemu-arm: fix cdrom params (cc7542cc6, wanyaoqi) allow delete role-policy-binding (f1be0adf6, Qiu Jian) add:aws lb tag (910bec329, lvyangyang) redis set autorenew bugfix (6ce5b1d50, TangBin) redis set autorenew bugfix (fe07cda1a, TangBin) batch user create bugifx (3ceec3aa1, TangBin) huawei create disk bugfix (4e3e5b01a, TangBin) add success note on guest start and stop (f464a904d, wanyaoqi) redis create bugfix (dd2eb4b44, TangBin) redis prepaid create autorenew bugfix (3a4498555, TangBin) commonalert bugfix: (a9c3c5bfd, zhaoxiangchun) qcloud redis secgroup sync fix \u0026 qcloud add renew\u0026 auto_renew (09145c3c1, TangBin) fix:修复dns record name校验的问题 (089aea99d, lvyangyang) add:qcloud routetable (456932632, lvyangyang) qcloud release prepaid resource bugfix (3b7c92521, TangBin) add resource type (0a0b73406, zhaoxiangchun) update vendor for jsonutils (ca0e79eff, Qiu Jian) commonalert bugfix (97ed34038, zhaoxiangchun) Fix a typo: ProviderFactor -\u003e ProviderFactory (47d358ecb, Shaohui Liu) fix:域名正则校验dnsrecord name，同步中文域名取punycode (73d750e1c, lvyangyang) add route (321e3c2f7, lvyangyang) modify monitor querycondition: (d45c09639, zhaoxiangchun) add option PrepaidDeleteExpireCheck (c5a88b80b, TangBin) qcloud delete prepaid redis bugfix (bbe362be2, TangBin) qcloud create prepaid redis bugfix (4be09cfc0, TangBin) lbcert cache delete bugfix (2f7781d15, TangBin) aws create bugfix (0bf274f12, TangBin) modify go test error (72b9f2ec7, zhaoxiangchun) fix stream disk on add disk from snapshot (4a2613a66, wanyaoqi) goimport fix (bf1d8eccf, tangbin) deal return error info: tsdb (8df8e6ca2, zhaoxiangchun) clean duplicate cached certificated at initial (f87c0e397, TangBin) qcloud create project not match bugfix (9a43bb667, TangBin) qcloud certificate sync bugfix (6343e3f4b, TangBin) qcloud cert bugfix (d6677d86d, TangBin) modify monitor dashboard save: (d519be9ab, zhaoxiangchun) qcloud elb cert duplicate fix (46e65d9e0, TangBin) qcloud redis create missing project id bugfix (babed456d, TangBin) update vendor (e48616cdc, rainzm) qcloud lb sync project bugfix (8589d67ac, TangBin) retry generate ifname from random string (f71def645, wanyaoqi) redis 2.8 reset password bugfix (02d0902d9, TangBin) add redis capabilty \u0026 lb purge (0a695c2dc, TangBin) redis delete bugfix (ac03debc9, tangbin) qcloud elb auth mode bugfix (ea497d077, TangBin) ha guest misc fix (0389ec804, wanyaoqi) qcloud redis tags (cfbe92ed9, lvyangyang) elb sync bugfix (399539b92, tangbin) dirve mirror check block replication is support (980396f15, wanyaoqi) sync elb support classic vpc (1eaf06d05, tangbin) qcloud redis support (d7894776f, TangBin) fix get host archs capability (8d07a6308, wanyaoqi) list support scope filter (1805be4d2, Qiu Jian) update api models (48e40fa5a, Qiu Jian) commalertUpdateInput increat param: (10b273938, zhaoxiangchun) qcloud zone sync fix (44b40599a, TangBin) loadbalancer support batch create (541a2d4e0, TangBin) fix on stream disk complete snapshots refcount not update (4efbe27ab, wanyaoqi) check disk is in reset before delete snapshot (e7ce3fd9d, wanyaoqi) create with tags (2c043454a, lvyangyang) bugfix: (b4a83dc15, zhaoxiangchun) elb salve zone 1 external id bugfix (6f2a9d8b7, TangBin) elb sync zone bugfix (94d3fa82a, TangBin) host increase cpu mem max size (6b7a52573, wanyaoqi) add qcloud elb zone1 details (1f17dcf68, TangBin) resource tags (58737942a, lvyangyang) qcloud elb supplort multi zones (f86dc52e9, TangBin) climc lb-create add parameter zone1 (69e0ae9de, TangBin) qcloud elb support multi zones (e6af8ad2c, TangBin) fix:get all project dns resource (efa5a8495, lvyangyang) fix fetch customize columns (cb45349ec, wanyaoqi) fix informer backend (128ec1774, wanyaoqi) lbcert delete bugfix (05f1900a2, TangBin) resource tags (3a73eb9e3, lvyangyang) remove try set informer backend (917a62c14, wanyaoqi) telegraf-raid-plugin: update raid state to lower case (de03ab939, wanyaoqi) keystone init etcd backend (5f5090038, wanyaoqi) fix:qcloud vpc peer error wrap (bb4e09aee, lvyangyang) .circleci: build: make with parallel level 2 (47fd7fb27, Yousong Zhou) add aliyun finance environment (2032e5f1d, TangBin) telegraf raid plugin (225f3b21c, wanyaoqi) remove alpine build cache before make image (0619d3566, Zhang Dongliang) fix:openstack lb 后端ip无法映射到主机的异常处理 (415ef0866, lvyangyang) replace NewFloat by NewFloat64 and NewFloat32 (1cfee7cf6, wanyaoqi) make mode (63887337f, wanyaoqi) fix host-deployer base image (bc26bdb8f, wanyaoqi) fix:aliyun jsonRequest 增加i/o timeout retry (93365de62, lvyangyang) 在 docker push 脚本里创建_output 目录，以便容错 (4be578fc2, Zhang Dongliang) 在 docker push 脚本里创建_output 目录，以便容错 (1f7988ecd, Zhang Dongliang) 解决编译之后 output 的 owerner 问题 (54f86817d, Zhang Dongliang) genreate api models (e64fe802e, wanyaoqi) add interface freeze virtual resource (dcdf45d18, wanyaoqi) esxi-agent 编译方式兼容 arm64 (eda8be1be, Zhang Dongliang) Add web url to alarm template (3d9923a7c, zhaoxiangchun) bugfix:scoperesource FilterByOwner (c0eae040a, zhaoxiangchun) remove aws lbbg cache metedata (1ce5db769, TangBin) modify suggest rule cli (af9e911fd, zhaoxiangchun) fix:允许cname record通过policy多值 (68283ceed, lvyangyang) aliyun public elb region fix (44e9cf049, TangBin) multi-arch 的镜像使用使用支持 arm64 (0b3afa9eb, Zhang Dongliang) bugfix commalert 3.4 (1c7deaf7b, zhaoxiangchun) aliyun public elb brand fix (d71a1f867, TangBin) multi-arch 的镜像使用使用支持 arm64 (65e3900ea, Zhang Dongliang) add mcclient sample (a4bedc7e2, Qiu Jian) fix:forbid top level public domain name (4435255f4, lvyangyang) mcclient modules: fix k8s fed rolebinding joint wrong resource manager (c7e8287c6, Zexi Li) bugfix :esxi 多机器环境下拉取监控超时 (6154f46a6, zhaoxiangchun) aliyun create public lb fix (2de610a3a, TangBin) fix:/dnsrecordset重复检查,dnszonevpc数量 (ed99a6981, lvyangyang) increase rbd check timeout (4ec1727d7, wanyaoqi) umount nfs on detach storage (24eaf5121, wanyaoqi) fix:(region) correct syncSchedtags (fc9b61c2a, rainzm) set stagefail on clean fail (d13cc9949, wanyaoqi) huawei client request add throttling control (1d044f712, TangBin) bugfix:commonalert (6037c84a5, zhaoxiangchun) huawei elb get params log (d8832a167, TangBin) qcloud elb create listener fix (35d155336, TangBin) huawei snapshot delete fix (faeb294d5, TangBin) wait deleted (13823d41e, lvyangyang) commonalert bugfix 3.4 (475c81c58, zhaoxiangchun) bugfix:esxi collect metric (418540c79, zhaoxiangchun) fix esxi-agent dockerfile typo (5db1fa686, Zhang Dongliang) make with ARCH argument (bc6ac93ce, Zhang Dongliang) support search ip (6d6e31813, wanyaoqi) regional network filter bugfix (c8c022733, TangBin) ctyun sync secgroup fix \u0026 cloudaccount delete fix (95e058d06, TangBin) common alert bugfix/3.4 (f58bca93d, zhaoxiangchun) fix host deployer base image (1fc5bac7f, wanyaoqi) ctyun add region cn-bj1 (4a36f82f7, TangBin) support mutli params (f4c1a3ea5, wanyaoqi) fix set host image cache properties (c6eecebed, wanyaoqi) fix update image status after save failed (686b63997, wanyaoqi) dup record process (ff4bde696, lvyangyang) host sync storage size (50a85b73e, wanyaoqi) suggest rule modify: (9a2267230, zhaoxiangchun) bugfix vmware monitor (0842b6f5f, zhaoxiangchun) commonalet bugfix: (a62462552, zhaoxiangchun) Add mock test for genericScheudler.Schedule (57d8f991a, rainzm) dns access (25ddca860, lvyangyang) fix host error output (945fac0a4, wanyaoqi) isolated devices info reenterable (641c71880, wanyaoqi) guest short desc add backup host id (09e568e14, wanyaoqi) fix get ubuntu version (495d9174c, wanyaoqi) pex register add optional column mac_access (88838bb53, TangBin) optimized cachedimages sync (dc1c6c754, Qu Xuan) create classic vpc fix (6a22bf0e7, TangBin) Feature \u0026 Fix for Notify (#7714) (1ed65ddd1, Rain Zheng) update host status to unknown on host offline (4a00c2229, wanyaoqi) listfilter by alert_id (138a16119, zhaoxiangchun) alert record bugfix (bb22fba25, zhaoxiangchun) vmware disk support deploy lvm partition (7dcb24094, wanyaoqi) Bugfix/yousong i18n (#7712) (b314b66b7, Yousong Zhou) Fix problem of esxi (#7661) (e393f3ee2, Rain Zheng) Fix for Notify (#7692) (74af85b8e, Rain Zheng) monitor commonalert bugfix (#7667) (c66ea1145, zhaoxiangchun) fix host get guests (#7682) (795a11fce, wanyaoqi) fix get storage capacity on init' (#7686) (3dec0fdc6, wanyaoqi) snapshot list by guest (fb41d16c9, wanyaoqi) update host deployer base image version (70f953dee, wanyaoqi) baremetal colloct isolated devices info (#7357) (75cd041d7, wanyaoqi) fix mount fetcher fs (#7656) (f255e8fcd, wanyaoqi) remove backup metadata on delete backup (#7653) (b0edff1d8, wanyaoqi) eip \u0026 vpc manager match fix (#7650) (11f86bb29, tb365) add host cpu archs capabilitie (e510ed196, wanyaoqi) support create arm virtual machine (7d94c4e46, wanyaoqi) host campactable with arm64 (bb0d81bc0, wanyaoqi) fix build baremetal agent image (#7646) (cb036b882, wanyaoqi)  README (1)  update architecture img (9fd99a22f, Zexi Li)  Region (7)  networks: attach func use struct args (d8cfba921, Yousong Zhou) networkresource: fix signature of GetExtraDetails (f87d09458, Yousong Zhou) guest detail add field macs (54275ddcf, wanyaoqi) host specs replace space char to ‘_’ (eb093a345, Zexi Li) fix query object by spec not include details (88514a9fc, Zexi Li) fix schedtag joint resource master/slave field wrong order (0113ec40c, Zexi Li) fix network schedtag not cleanup when network deleted (b859f3ba3, Zexi Li)  Regiondrivers (1)  kvm: exact match bgp_type (774cfcbfa, Yousong Zhou)  Schedtags (1)  add ListItemExportKeys (b79915d40, Yousong Zhou)  Scheduler (4)  ignore non running guests only exclude ready status (b47b0dc86, Zexi Li) forecast api with candidates result (0ed41b09e, Zexi Li) fix fillter isolated device (1f51af3a6, wanyaoqi) ignore network type when specified (e129d580b, Zexi Li)  Specs (1)  fix specKey url not escape (bf682f565, Zexi Li)  Stringutils2 (1)  add RemoveUtf8Strings func (f0cc1d3d1, Zexi Li)  Treewide (3)  avoid variable fmt str (152eaa8c5, Yousong Zhou) fmt error (ad52aae79, Yousong Zhou) DeleteFailReason as an object with translated details (6415de33d, Yousong Zhou)  Usage (1)  host show isolated dev reserved memory (0b11854a8, wanyaoqi)  Vendor (7)  add tencentcloud-sdk-go vpc (4a45ca59d, Yousong Zhou) bump alibaba-cloud-sdk-go to v1.61.684 (47a2d0763, Yousong Zhou) add github.com/aliyun/alibaba-cloud-sdk-go/services/ecs (edbddb38b, Yousong Zhou) bump yunion.io/x/pkg (46088408b, Yousong Zhou) bump yunion.io/x/sqlchemy (f0fba9aa2, Yousong Zhou) update yunion.io/x/jsonutils (854ff4079, Yousong Zhou) update yunion.io/x/sqlchemy (b7c3959e0, Yousong Zhou)  Vpcagent (6)  ovn: make aware of sub ips (c3b4edae1, Yousong Zhou) models: join network addresses (314f9fcc0, Yousong Zhou) apihelper: filter by cloud_env=onpremise (f699f7cb5, Yousong Zhou) ovn: increase dhcp lease, renew, rebind time (39f979398, Yousong Zhou) guard against foul eip records (9168284d5, Yousong Zhou) respect guest src check settings (#7677) (ad6b38f68, Yousong Zhou)  Webconsole (3)  ssh: add keyboard-interactive as an option (aa6e45e4d, Yousong Zhou) ssh: each argument on its own line (cce2af501, Yousong Zhou) fix defer order to release zombie process (4f8b80fcc, wanyaoqi)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n53 commits to cloudpods-operator - v3.6.0 since this release.\nBug Fixes (7)  policy description supports i18n (c44eab9, Qiu Jian) skip create policies error (44fc13b, Qiu Jian) role-policy-create many create extra role-policies (0cb1d83, Qiu Jian) add more dashboard default policies (5ab48d2, Qiu Jian) update vendor \u0026 code fix (aac3957, Qiu Jian) monitor: system alert policy cancel description update limit (8036103, zhaoxiangchun) telegraf: fix collect disk measurements (0671287, wanyaoqi)  Bugfix (1)  suggestion: fix err when suggestion syncConfigMap (f7460ca, zhaoxiangchun)  Chore (3)  manifests: update deploy manifests yaml content (a12649e, Zexi Li) monitor: add new service: suggestion (c03365e, zhaoxiangchun) vendor: make mod (94de88d, wanyaoqi)  Feature (3)  optimize host daemonset config (3305513, wanyaoqi) initialize policie and roles v3.5 (8bd28f7, Qiu Jian) keystone: add default member role (a63fddf, Qiu Jian)  Features (6)  add webhook plugin for notify (abf2979, rainzm) component: remove kube-rbac-proxy (7cd57e8, rainzm) framework: support multi zone (df5b6cc, wanyaoqi) host: allow setting ovnEncapIpDetectionMethod (41c2c19, Yousong Zhou) host-deployer: update host-deployer spec (0ffcdf0, wanyaoqi) operator: add nodata alert policy (a28f01e, zhaoxiangchun)  Monitor (2)  alert for host_raid adapter should \u003e= 0 (edfee65, Zexi Li) inject smart_device and host_raid alert rule (ded1e78, Zexi Li)  Notify (1)  remove pvc dependence (ee69174, wanyaoqi)  Others (26)  feat:(monitor): update system monitor alert when alert has diff info (d23f86b, zhaoxiangchun) update Makefile (fec49b1, Qiu Jian) update vendor (27fb644, Qiu Jian) etcd add pod anti affinity (a8e9ae6, wanyaoqi) ce edition should not deploy meter (4858f7b, Zexi Li) modify host_raid alert policy (6188dc0, zhaoxiangchun) 限制 client_body_timeout 时长，预防慢攻击 (da7327e, Zhang Dongliang) 限制 client_body_timeout 时长，预防慢攻击 (ad5c33d, Zhang Dongliang) 限制 client_header_timeout 时长，预防慢攻击 (d22e839, Zhang Dongliang) 更新 nginx 配置以防 dos 攻击 (65dd614, Zhang Dongliang) qcloud add redis crond (c474c0c, zhaoxiangchun) modify commonalert init policy : (fb9ba72, zhaoxiangchun) add qcloud rds crond (2ecc856, zhaoxiangchun) bugfix: (bb13030, zhaoxiangchun) make mod (49408d5, wanyaoqi) set image default policy to if not present (54e78c2, Zexi Li) telegraf add disk plugin (c285508, wanyaoqi) not create notice (3029a7c, Zexi Li) pod affinity by storage class (fde292d, wanyaoqi) BusyBox upgrade ,modify cloudmon timeout arg (eb46544, zhaoxiangchun) host image spec fix (5ba8920, wanyaoqi) add flag check is failed etcd pods need delete (586b3e7, wanyaoqi) push 镜像后,拉回本地 (665a910, Zhang Dongliang) buildx for onecloud-operator (0c9ac24, Zhang Dongliang)   etcd clean failed state pods (89c338d, wanyaoqi)   deployment with pvc not set node affinity (#255) (ce2eed8, Zexi Li)  Regiondns (1)  configmap: quash trailing spaces (641f3b2, Yousong Zhou)  Vendor (1)  update yunion.io/x/master to current release/3.6 (a7054e2, Yousong Zhou)  Web (1)  add docs image (80e00a1, Zexi Li)  Yunionagent (1)  remove onecloud keyword (8792ea6, Zexi Li)   cloudpods-service-operator 仓库地址: https://github.com/yunionio/cloudpods-service-operator\n10 commits to cloudpods-service-operator - v3.6.0 since this release.\nBug Fixes (3)  for last pr (aeb3671, rainzm) retry after a while when dealErr (ec6ecc1, rainzm) resource/vm: convert imageName to imageId before requesting for creating vm (17c8de2, rainzm)  Code Refactoring (1)  change maxRetryTimes to maxTryTimes (d1a8b4a, rainzm)  Features (5)  add more reasonable title for cherry pick PR (b4097f8, rainzm) init docs (a28b5cd, rainzm) keep cloudresource when resource in k8s is invalid (ab1ab79, rainzm) add manager-pro section in Makefile (0f96432, rainzm) resource: better use for logger (22beac3, rainzm)  Others (1)  docker buildx for onecloud-service-operator (e6b93e7, Zhang Dongliang)   notify-plugins 仓库地址: https://github.com/yunionio/notify-plugins\n18 commits to notify-plugins - v3.6.0 since this release.\nBug Fixes (4)  common: correct error judgment in BatchSend (1b15dee, rainzm) dingtalk: return correct value in getUseridByMobile (0a041d0, rainzm) robot: Correct err value of ValidateConfig (a367fff, rainzm) workwx: Incorrect variable use for ok (abf098b, rainzm)  Features (9)  break down error from UserIdByMobile (a5ab93b, rainzm) add httpclient timeout for webhook (80e0757, rainzm) add webhook robot(custom robot) (18a1106, rainzm) support multi webhooks config for robot (1f43774, rainzm) email: support toggle ssl (3d4bb13, rainzm) notify: Add BatchSend for websocket (f046407, rainzm) notify: Add common function to batch send (d9a0118, rainzm) robot: Add BatchSend (6d7564e, rainzm) robot: support mutli WebhookPrefix (6054b2a, rainzm)  Others (5)  增加调试开关 (e0c6d39, Zhang Dongliang) buildx for notifyplugins (cf14a4f, Zhang Dongliang) makefile 去掉 sudo; make all bins (51c965a, Zhang Dongliang) docker buildx for notify plugins (9c1c2cd, Zhang Dongliang) update vendor (e3739ac, rainzm)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n7 commits to ocadm - v3.6.0 since this release.\nAutoupdate (1)  clear host tag (df9bab7, Zexi Li)  Bug Fixes (2)  makefile: 更改3.6的 Makefile 号 (649a9dd, Zhang Dongliang) update: cluster update operator parse image digest (ea3bcf8, Zexi Li)  Chore (2)  vendor: update vendor (07dea86, Zexi Li) vendor/v3.6: update vendor (e9d204d, Zexi Li)  Others (2)  metricsserver 自动选择平台 (4277583, Zhang Dongliang) clean info from from autoupdate component when update (a53d4c5, Zexi Li)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n30 commits to sdnagent - v3.6.0 since this release.\nAgent (4)  server: enable ovnMdMan (ae3eab6, Yousong Zhou) server: add metadata server (c7af8c7, Yousong Zhou) server: watch: add FindGuestDescByNetIdIP (0b314bd, Yousong Zhou) server: use utils.RunOvsctl (8fd7165, Yousong Zhou)  Bug Fixes (1)  hostconfig: fix watching hostconfig (b895141, Yousong Zhou)  Build (2)  eipgw: track to ensure stop state as well (048a1c9, Yousong Zhou) eipgw: vrrp track script as monitor (a485d61, Yousong Zhou)  Flowsource (5)  make aware of sub ips (b1afd56, Yousong Zhou) relax constraint when mac check on and ip check off (3bf9855, Yousong Zhou) reword ref comments on allow_switch_vms (5e848c1, Yousong Zhou) reword ref comments on allow_router_vms (7ae147d, Yousong Zhou) remove now unused code for dev (bde4723, Yousong Zhou)  Others (3)  .circleci: bump go to 1.14 (122342c, Yousong Zhou) pull image for buildx (08a0395, Zhang Dongliang) docker buildx for sdnagent (c4e72f7, Zhang Dongliang)  Sdnagent (1)  be cooperative (24e75c1, Yousong Zhou)  Tc (6)  QdiscTree: add Root() method (ebcb90d, Yousong Zhou) NewQdiscTree: special case mq (2ce36e0, Yousong Zhou) NewQdiscTree: fix children key (61b5543, Yousong Zhou) NewQdiscTree: use qbase for BaseQdisc() return (98de150, Yousong Zhou) NewQdiscTree: rename vars (5747fb5, Yousong Zhou) NewQdiscTree: use current tree instead of the root (6195925, Yousong Zhou)  Tcman (1)  skip devices with mq qdisc (483628c, Yousong Zhou)  Utils (4)  add RunOvsctl (d0aa06c, Yousong Zhou) guest: add GetJSONObjectDesc (469d4d9, Yousong Zhou) guest: add FindNicByNetIdIP (d42997c, Yousong Zhou) guest: make aware of sub ips (630b4c9, Yousong Zhou)  Vendor (3)  bump to onecloud master branch (beb7661b9fc) (b67c9e1, Yousong Zhou) bump yunion.io/x/onecloud to current tip of release/3.3 (f3e6231, Yousong Zhou) bump yunion.io/x/onecloud to current tip of release/3.3 (a175a5b, Yousong Zhou)  ","excerpt":"发布时间 2020-12-29 14:17:58\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.6/3-6-0/","title":"v3.6.0"},{"body":"Release time: 2020-11-26 15:42:12\n cloudpods Repo: https://github.com/yunionio/cloudpods\n21 commits to cloudpods - v3.4.9 since this release.\nBug Fixes (20)  allow disk attach to multiple guests (3d2b24a35, Qiu Jian) host: wait put host offline success (c325d8355, wanyaoqi) locales: fix translation text (377454997, Yousong Zhou) monitor: modify monitor serviceType in StartService() (09ed698ae, zhaoxiangchun) monitor: modify suggestrule process influxdb data (6e0d4cb35, zhaoxiangchun) monitor: modify notify alertInfo and alertOk detach resource (ff5396b90, zhaoxiangchun) region: 避免OneCloud密码校验通过，公有云厂商密码校验不通过 (fc16c37ea, Qu Xuan) region: update translations (7bf1bef04, TangBin) region: allow reset huawei system disk (024a17de8, TangBin) region: valid qcloud hssd for system disk (0f5a8b640, Qu Xuan) region: elasticcache_instances: fix error fmt (3b2938380, Yousong Zhou) region: change_ipaddr: retain eip_id on detach and attach (a5d82922b, Yousong Zhou) region: allow delete storagecachedimage with ‘cache_failed’ status (61eaea809, rainzm) region: avoid public ip bandwidth is zero (256019894, Qu Xuan) region: network clean schedule cache after real deleted (37f648bfb, Zexi Li) region: elastic cache task fail message fix (71535f670, TangBin) region: wire get vpc releated hosts is empty (372c9a393, Zexi Li) region,esxiagent: allow host behind a nat (6f0d6cbea, Qiu Jian) scheduler: clean expire cache before schedule (1818d4853, Zexi Li) vpcagent: models: guestnetworks: accomodate change_ipaddr (9d19bf34b, Yousong Zhou)  Features (1)  cloudcommon: db: jointbase: add list:“user” for RowId (e4bf0fa8d, Yousong Zhou)   cloudpods-service-operator Repo: https://github.com/yunionio/cloudpods-service-operator\n5 commits to cloudpods-service-operator - v3.4.9 since this release.\nBug Fixes (2)  for last pr (bec75da, rainzm) resource/vm: convert imageName to imageId before requesting for creating vm (62649ce, rainzm)  Code Refactoring (1)  change maxRetryTimes to maxTryTimes (3c14278, rainzm)  Features (2)  init docs (ea4dc59, rainzm) resource: better use for logger (fe928bf, rainzm)   sdnagent Repo: https://github.com/yunionio/sdnagent\n1 commits to sdnagent - v3.4.9 since this release.\nBug Fixes (1)  hostconfig: fix watching hostconfig (24ad2f8, Yousong Zhou)  ","excerpt":"Release time: 2020-11-26 15:42:12\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-9/","title":"v3.4.9"},{"body":"发布时间 2020-11-26 15:42:12\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n21 commits to cloudpods - v3.4.9 since this release.\nBug Fixes (20)  allow disk attach to multiple guests (3d2b24a35, Qiu Jian) host: wait put host offline success (c325d8355, wanyaoqi) locales: fix translation text (377454997, Yousong Zhou) monitor: modify monitor serviceType in StartService() (09ed698ae, zhaoxiangchun) monitor: modify suggestrule process influxdb data (6e0d4cb35, zhaoxiangchun) monitor: modify notify alertInfo and alertOk detach resource (ff5396b90, zhaoxiangchun) region: 避免OneCloud密码校验通过，公有云厂商密码校验不通过 (fc16c37ea, Qu Xuan) region: update translations (7bf1bef04, TangBin) region: allow reset huawei system disk (024a17de8, TangBin) region: valid qcloud hssd for system disk (0f5a8b640, Qu Xuan) region: elasticcache_instances: fix error fmt (3b2938380, Yousong Zhou) region: change_ipaddr: retain eip_id on detach and attach (a5d82922b, Yousong Zhou) region: allow delete storagecachedimage with ‘cache_failed’ status (61eaea809, rainzm) region: avoid public ip bandwidth is zero (256019894, Qu Xuan) region: network clean schedule cache after real deleted (37f648bfb, Zexi Li) region: elastic cache task fail message fix (71535f670, TangBin) region: wire get vpc releated hosts is empty (372c9a393, Zexi Li) region,esxiagent: allow host behind a nat (6f0d6cbea, Qiu Jian) scheduler: clean expire cache before schedule (1818d4853, Zexi Li) vpcagent: models: guestnetworks: accomodate change_ipaddr (9d19bf34b, Yousong Zhou)  Features (1)  cloudcommon: db: jointbase: add list:“user” for RowId (e4bf0fa8d, Yousong Zhou)   cloudpods-service-operator 仓库地址: https://github.com/yunionio/cloudpods-service-operator\n5 commits to cloudpods-service-operator - v3.4.9 since this release.\nBug Fixes (2)  for last pr (bec75da, rainzm) resource/vm: convert imageName to imageId before requesting for creating vm (62649ce, rainzm)  Code Refactoring (1)  change maxRetryTimes to maxTryTimes (3c14278, rainzm)  Features (2)  init docs (ea4dc59, rainzm) resource: better use for logger (fe928bf, rainzm)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n1 commits to sdnagent - v3.4.9 since this release.\nBug Fixes (1)  hostconfig: fix watching hostconfig (24ad2f8, Yousong Zhou)  ","excerpt":"发布时间 2020-11-26 15:42:12\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-9/","title":"v3.4.9"},{"body":"Release time: 2020-11-20 16:52:19\n cloudpods Repo: https://github.com/yunionio/cloudpods\n3 commits to cloudpods - v3.4.8 since this release.\nBug Fixes (1)  region: compatible rds network params (42582043e, Qu Xuan)  Features (1)  rds recovery new instance from backup supported (b6917c560, Qu Xuan)  Optimized (1)  server delete log and wait time (47349e71b, Qu Xuan)  ","excerpt":"Release time: 2020-11-20 16:52:19\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-8/","title":"v3.4.8"},{"body":"发布时间 2020-11-20 16:52:19\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n3 commits to cloudpods - v3.4.8 since this release.\nBug Fixes (1)  region: compatible rds network params (42582043e, Qu Xuan)  Features (1)  rds recovery new instance from backup supported (b6917c560, Qu Xuan)  Optimized (1)  server delete log and wait time (47349e71b, Qu Xuan)  ","excerpt":"发布时间 2020-11-20 16:52:19\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-8/","title":"v3.4.8"},{"body":"Release time: 2020-11-19 15:25:11\n cloudpods Repo: https://github.com/yunionio/cloudpods\n22 commits to cloudpods - v3.4.7 since this release.\nBug Fixes (10)  add host.memoty.total and host.cpu.total usage stats (6b0ae74ac, Qiu Jian) add host-joint resources into domain level resources (ba2a188f0, Qiu Jian) add err handler for notifyRobot (4a06b38da, rainzm) avoid panic (e9459b4a7, Qu Xuan) add error cause (43f4f5f94, Qu Xuan) baremetal usage should exclude converted hypervisor (dc19e7b03, Qiu Jian) host memory usage status not correct (71ddac232, Qiu Jian) keystone init empty catalogy cause panic (b545066e0, Qiu Jian) support resize qcloud hssd disk (27c8861b6, Qu Xuan) notify: be compatible with keystone’s UsersV3.GetById (aee0299d7, rainzm)  Feature (1)  allow join project across domain (1fce2ec30, Qiu Jian)  Features (1)  notify: enable watching user in keystone (96400124b, rainzm)  Host (1)  restart etcd session on keepalive failed (029530ac3, wanyaoqi)  Optimized (1)  aliyun create rds backup (3a8e99871, Qu Xuan)  Others (7)  docker 交叉编译规则更新 (491a9ece5, Zhang Dongliang) detach AlertResource on alertDisable (ea793d990, zhaoxiangchun) modify alertResource ws info (bef9af4c3, zhaoxiangchun) commonalert bugfix: (37272588f, zhaoxiangchun) aliyun finance cloud zone add suffix (befef016d, TangBin) aliyun finance cloud region add suffix (c32ad0ac5, TangBin) suggestalet bugfix (c4d4700d2, zhaoxiangchun)  Vendor (1)  update yunion.io/x/jsonutils (ca9859f12, Yousong Zhou)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n2 commits to cloudpods-operator - v3.4.7 since this release.\nOthers (2)  etcd add pod anti affinity (874ad04, wanyaoqi) ce edition should not deploy meter (4403ccf, Zexi Li)   notify-plugins Repo: https://github.com/yunionio/notify-plugins\n1 commits to notify-plugins - v3.4.7 since this release.\nFeatures (1)  email: support toggle ssl (7556a4e, rainzm)   sdnagent Repo: https://github.com/yunionio/sdnagent\n4 commits to sdnagent - v3.4.7 since this release.\nFlowsource (4)  relax constraint when mac check on and ip check off (374add8, Yousong Zhou) reword ref comments on allow_switch_vms (3e170b7, Yousong Zhou) reword ref comments on allow_router_vms (eced14a, Yousong Zhou) remove now unused code for dev (4271b13, Yousong Zhou)  ","excerpt":"Release time: 2020-11-19 15:25:11\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-7/","title":"v3.4.7"},{"body":"发布时间 2020-11-19 15:25:11\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n22 commits to cloudpods - v3.4.7 since this release.\nBug Fixes (10)  add host.memoty.total and host.cpu.total usage stats (6b0ae74ac, Qiu Jian) add host-joint resources into domain level resources (ba2a188f0, Qiu Jian) add err handler for notifyRobot (4a06b38da, rainzm) avoid panic (e9459b4a7, Qu Xuan) add error cause (43f4f5f94, Qu Xuan) baremetal usage should exclude converted hypervisor (dc19e7b03, Qiu Jian) host memory usage status not correct (71ddac232, Qiu Jian) keystone init empty catalogy cause panic (b545066e0, Qiu Jian) support resize qcloud hssd disk (27c8861b6, Qu Xuan) notify: be compatible with keystone’s UsersV3.GetById (aee0299d7, rainzm)  Feature (1)  allow join project across domain (1fce2ec30, Qiu Jian)  Features (1)  notify: enable watching user in keystone (96400124b, rainzm)  Host (1)  restart etcd session on keepalive failed (029530ac3, wanyaoqi)  Optimized (1)  aliyun create rds backup (3a8e99871, Qu Xuan)  Others (7)  docker 交叉编译规则更新 (491a9ece5, Zhang Dongliang) detach AlertResource on alertDisable (ea793d990, zhaoxiangchun) modify alertResource ws info (bef9af4c3, zhaoxiangchun) commonalert bugfix: (37272588f, zhaoxiangchun) aliyun finance cloud zone add suffix (befef016d, TangBin) aliyun finance cloud region add suffix (c32ad0ac5, TangBin) suggestalet bugfix (c4d4700d2, zhaoxiangchun)  Vendor (1)  update yunion.io/x/jsonutils (ca9859f12, Yousong Zhou)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n2 commits to cloudpods-operator - v3.4.7 since this release.\nOthers (2)  etcd add pod anti affinity (874ad04, wanyaoqi) ce edition should not deploy meter (4403ccf, Zexi Li)   notify-plugins 仓库地址: https://github.com/yunionio/notify-plugins\n1 commits to notify-plugins - v3.4.7 since this release.\nFeatures (1)  email: support toggle ssl (7556a4e, rainzm)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n4 commits to sdnagent - v3.4.7 since this release.\nFlowsource (4)  relax constraint when mac check on and ip check off (374add8, Yousong Zhou) reword ref comments on allow_switch_vms (3e170b7, Yousong Zhou) reword ref comments on allow_router_vms (eced14a, Yousong Zhou) remove now unused code for dev (4271b13, Yousong Zhou)  ","excerpt":"发布时间 2020-11-19 15:25:11\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-7/","title":"v3.4.7"},{"body":"Release time: 2020-11-12 14:15:45\n cloudpods Repo: https://github.com/yunionio/cloudpods\n20 commits to cloudpods - v3.4.6 since this release.\nBug Fixes (9)  aliyun eip api (fc4460fa3, Qu Xuan) renew rds (39fe8b213, Qu Xuan) aws secgroup out rule is deny any (1ee8fd05b, Qu Xuan) change owner should update quota usages (6927652a6, Qiu Jian) 支持多内存过滤套餐 (e975fc671, Qu Xuan) missing column error when order by extra fields (c8ddd7653, Qiu Jian) esxi: don’t specify spec.Identity when osName is empty (6f60f1a48, rainzm) esxi: add device after cloning vm (c3b8e7bbd, rainzm) region: prevent infinite recursion (0bbe2e759, rainzm)  Code Refactoring (2)  region: faster GetIImageById (edc651a30, rainzm) region: faster sync CapacityUsed for Storage (76b1796c7, rainzm)  Features (1)  region: add option NoCheckOsTypeForCachedImage (b5201a352, rainzm)  Host (1)  specifie bash for start guest (7d35397d5, wanyaoqi)  Others (5)  add success note on guest start and stop (ea70090f6, wanyaoqi) batch user create bugifx (e9a4a6380, TangBin) huawei create disk bugfix (642b13733, TangBin) fix:修复dns record name校验的问题 (e108d1755, lvyangyang) update vendor for jsonutils (aae3da8c2, Qiu Jian)  Scheduler (1)  ignore non running guests only exclude ready status (827be9167, Zexi Li)  Usage (1)  host show isolated dev reserved memory (30776fc70, wanyaoqi)  ","excerpt":"Release time: 2020-11-12 14:15:45\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-6/","title":"v3.4.6"},{"body":"发布时间 2020-11-12 14:15:45\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n20 commits to cloudpods - v3.4.6 since this release.\nBug Fixes (9)  aliyun eip api (fc4460fa3, Qu Xuan) renew rds (39fe8b213, Qu Xuan) aws secgroup out rule is deny any (1ee8fd05b, Qu Xuan) change owner should update quota usages (6927652a6, Qiu Jian) 支持多内存过滤套餐 (e975fc671, Qu Xuan) missing column error when order by extra fields (c8ddd7653, Qiu Jian) esxi: don’t specify spec.Identity when osName is empty (6f60f1a48, rainzm) esxi: add device after cloning vm (c3b8e7bbd, rainzm) region: prevent infinite recursion (0bbe2e759, rainzm)  Code Refactoring (2)  region: faster GetIImageById (edc651a30, rainzm) region: faster sync CapacityUsed for Storage (76b1796c7, rainzm)  Features (1)  region: add option NoCheckOsTypeForCachedImage (b5201a352, rainzm)  Host (1)  specifie bash for start guest (7d35397d5, wanyaoqi)  Others (5)  add success note on guest start and stop (ea70090f6, wanyaoqi) batch user create bugifx (e9a4a6380, TangBin) huawei create disk bugfix (642b13733, TangBin) fix:修复dns record name校验的问题 (e108d1755, lvyangyang) update vendor for jsonutils (aae3da8c2, Qiu Jian)  Scheduler (1)  ignore non running guests only exclude ready status (827be9167, Zexi Li)  Usage (1)  host show isolated dev reserved memory (30776fc70, wanyaoqi)  ","excerpt":"发布时间 2020-11-12 14:15:45\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-6/","title":"v3.4.6"},{"body":"Release time: 2020-11-04 19:45:53\n cloudpods Repo: https://github.com/yunionio/cloudpods\n18 commits to cloudpods - v3.4.5 since this release.\nBug Fixes (10)  add qcloud hssd (0c19c21ef, Qu Xuan) save service config changes may send invalid action log (c8138c291, Qiu Jian) fail to delete public_ip eip (b1e91c1c2, Qiu Jian) secgroup cache tenant_id (4cbe93163, Qu Xuan) notify: customize the title of the verification email based on the copyright (58c5514a0, rainzm) region: clear dirty data of snapshotpolicydisks when start up (7460ea146, rainzm) region: detach all snapshotpolicy when realdeleting disk (250ad41c7, rainzm) region: prevent dirty data when syncing snapshot (a53a44cb2, rainzm) region: sync automatically snapshot for external disk (a3f01f133, rainzm) region: compute NextSyncTime for snapshotpolicydisk (f290aa5d5, Rain Zheng)  Informer (1)  ignore outside context cancel when worker run (a0f495db9, Zexi Li)  Optimized (1)  rds zone sync (83d0a3ce0, Qu Xuan)  Others (6)  fix:域名正则校验dnsrecord name，同步中文域名取punycode (6bfff8b70, lvyangyang) lbcert cache delete bugfix (41dd48e8f, TangBin) aws create bugfix (3ceb0e2dc, TangBin) fix stream disk on add disk from snapshot (82f5b9ccb, wanyaoqi) qcloud elb cert duplicate fix (8f2f78b4e, TangBin) update vendor (52a72952c, rainzm)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.4.5 since this release.\nMake (1)  RELEASE_BRANCH=release/3.4 (5d5913d, Zexi Li)  Others (2)  限制 client_body_timeout 时长，预防慢攻击 (adf6baf, Zhang Dongliang) 限制 client_header_timeout 时长，预防慢攻击 (22a92e8, Zhang Dongliang)   notify-plugins Repo: https://github.com/yunionio/notify-plugins\n1 commits to notify-plugins - v3.4.5 since this release.\nFeatures (1)  add httpclient timeout for webhook (2341459, rainzm)  ","excerpt":"Release time: 2020-11-04 19:45:53\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-5/","title":"v3.4.5"},{"body":"发布时间 2020-11-04 19:45:53\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n18 commits to cloudpods - v3.4.5 since this release.\nBug Fixes (10)  add qcloud hssd (0c19c21ef, Qu Xuan) save service config changes may send invalid action log (c8138c291, Qiu Jian) fail to delete public_ip eip (b1e91c1c2, Qiu Jian) secgroup cache tenant_id (4cbe93163, Qu Xuan) notify: customize the title of the verification email based on the copyright (58c5514a0, rainzm) region: clear dirty data of snapshotpolicydisks when start up (7460ea146, rainzm) region: detach all snapshotpolicy when realdeleting disk (250ad41c7, rainzm) region: prevent dirty data when syncing snapshot (a53a44cb2, rainzm) region: sync automatically snapshot for external disk (a3f01f133, rainzm) region: compute NextSyncTime for snapshotpolicydisk (f290aa5d5, Rain Zheng)  Informer (1)  ignore outside context cancel when worker run (a0f495db9, Zexi Li)  Optimized (1)  rds zone sync (83d0a3ce0, Qu Xuan)  Others (6)  fix:域名正则校验dnsrecord name，同步中文域名取punycode (6bfff8b70, lvyangyang) lbcert cache delete bugfix (41dd48e8f, TangBin) aws create bugfix (3ceb0e2dc, TangBin) fix stream disk on add disk from snapshot (82f5b9ccb, wanyaoqi) qcloud elb cert duplicate fix (8f2f78b4e, TangBin) update vendor (52a72952c, rainzm)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.4.5 since this release.\nMake (1)  RELEASE_BRANCH=release/3.4 (5d5913d, Zexi Li)  Others (2)  限制 client_body_timeout 时长，预防慢攻击 (adf6baf, Zhang Dongliang) 限制 client_header_timeout 时长，预防慢攻击 (22a92e8, Zhang Dongliang)   notify-plugins 仓库地址: https://github.com/yunionio/notify-plugins\n1 commits to notify-plugins - v3.4.5 since this release.\nFeatures (1)  add httpclient timeout for webhook (2341459, rainzm)  ","excerpt":"发布时间 2020-11-04 19:45:53\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-5/","title":"v3.4.5"},{"body":"Release time: 2020-10-28 18:20:55\n cloudpods Repo: https://github.com/yunionio/cloudpods\n70 commits to cloudpods - v3.4.4 since this release.\nBug Fixes (29)  cancel pending-delete should increase resource quota usages (2a1a640f6, Qiu Jian) missing authenticate action log for user web login (ecbe76e9f, Qiu Jian) add rds cpu and memory usage (16d13941c, Qu Xuan) set secgroup status (44046f286, Qu Xuan) avoid sync project panic (95f7600b6, Qu Xuan) use correct worker (062301f54, Qu Xuan) avoid delete public ip when sync eip list (a851e0133, Qu Xuan) server usage status not correct (90d649aef, Qiu Jian) do not lock guest after lock eip, to prevent possible dead lock (d774581a2, Qiu Jian) remote update metadata may cause metadata update loop (62f5355b1, Qiu Jian) don’t update NextSyncTime when snapshots that should be added has not (0ba8cb7fb, rainzm) reduce change config logs (9b8758e19, Qiu Jian) 新增google存储类型 (f77bcd3bb, Qu Xuan) 避免冲掉设置的到期释放时间 (8f3cb9cdb, Qu Xuan) add aliyun new region (22349276d, Qu Xuan) missing authenticate action log for user web login (a92a0e2d0, Qiu Jian) monitor commonalert not detach alert resource (d99d93d04, Zexi Li) sync dns records after sync vpcs (11f8e4f71, Qu Xuan) compute: filter cachedimage with health storage (2a1bbfd57, rainzm) esxi: no callback in uploadHandler (57dad6281, rainzm) esxi: use correct device index (d3964bf0d, rainzm) esxi: resize root disk after cloning vm (8f3b8c7ff, rainzm) esxi: filter vmdk item in lease.info (d31802c87, rainzm) glance: allow public and private operations of guestimage (3fae388db, rainzm) notify: add AllOkContactTypes in where permanently enabled and verified ContactType (f367f1abe, rainzm) region: compute binded disk count when deleting snapshotpolicy (6f1417d26, rainzm) region: roll back the optimization of cachedimage list (be5a6a93c, rainzm) region: add suffix ‘display’ for time_points and repeat_weekdays (bbfb9db90, rainzm) region: init NextSyncTimeiwhen create snapshotpolicydisks (93bb4022f, rainzm)  Bugfix (2)  commonalert (8a0eeb7d6, zhaoxiangchun) qcloud pull metric (06db7339e, zhaoxiangchun)  Cloudcommon (3)  db: GET: i18n for result of get property calls (5d0fd14cb, Yousong Zhou) db: add man.GetI18N (cd123e007, Yousong Zhou) db: modelbase: distinct-field: readability change (91736710b, Yousong Zhou)  Code Refactoring (3)  find the most suitable storage (7a2c2b804, rainzm) region: faster list for cachedimage (c45658686, rainzm) region: faster list for cachedimage (b0823a09b, rainzm)  Feature (2)  remote update qcloud instance metadata and name (a764a6469, Qiu Jian) qcloud create VM with tags (f05a56aad, Qiu Jian)  Features (10)  use details data to cover obj data in FetchCustomizeColumns (37c14d756, rainzm) add a retry mechanism to AutoSyncExtDiskSnapshot (93ac3260a, rainzm) add valid filter for cachedimage list (d454b0a79, rainzm) add NotifyWebhook in notifyclient (0fd6481e4, rainzm) support lock storage from selected cachedimage (5a7876ae4, rainzm) esxiagent: try to customize vm if deployfs failed (a35a6f3c1, rainzm) notify: add IntelliNotify (5306add70, rainzm) notify: allow empty receivers for robot or webhook contact type (d799a71fd, rainzm) notify: support webhook contact type (436f1e5cb, rainzm) region: call NotifyWebhook in the life cycle of guests (9dee4c1b9, rainzm)  Host (1)  fix sync storage info duration' (7a9b491d1, wanyaoqi)  Lockman (1)  test: add prefix setting (f7f7c7be8, Yousong Zhou)  Logger (2)  actionlog: i18n for distinct-field (0964c6ad8, Yousong Zhou) actionlog: readability change (c2589e735, Yousong Zhou)  Monitor (2)  set default influxdb datasource by endpoint type (b43f8b3fa, Zexi Li) add alert resource (af11737e7, Zexi Li)  Others (15)  commalertUpdateInput increat param: (002a2af27, zhaoxiangchun) fix on stream disk complete snapshots refcount not update (8e5b74a3f, wanyaoqi) check disk is in reset before delete snapshot (d78068d43, wanyaoqi) bugfix: (e7674116e, zhaoxiangchun) host increase cpu mem max size (a4b1d3952, wanyaoqi) fix:get all project dns resource (66c81ee54, lvyangyang) fix informer backend (d6a9b5dac, wanyaoqi) fix fetch customize columns (f706d59ac, wanyaoqi) lbcert delete bugfix (7da0a67af, TangBin) remove try set informer backend (15bd6bacd, wanyaoqi) telegraf-raid-plugin: update raid state to lower case (6706c39f8, wanyaoqi) keystone init etcd backend (8ce183eaf, wanyaoqi) .circleci: build: make with parallel level 2 (3aadaf15b, Yousong Zhou) add aliyun finance environment (a9c44ed30, TangBin) telegraf raid plugin (8b2680ed5, wanyaoqi)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n9 commits to cloudpods-operator - v3.4.4 since this release.\nFeatures (1)  add webhook plugin for notify (e8cedb1, rainzm)  Monitor (2)  alert for host_raid adapter should \u003e= 0 (dc52030, Zexi Li) inject smart_device and host_raid alert rule (fee4e8a, Zexi Li)  Others (6)  更新 nginx 配置以防 dos 攻击 (e1c8023, Zhang Dongliang) modify commonalert init policy : (c446862, zhaoxiangchun) bugfix: (5b4e57f, zhaoxiangchun) make mod (8afc21f, wanyaoqi) telegraf add disk plugin (face8be, wanyaoqi) set image default policy to if not present (96aaea7, Zexi Li)   cloudpods-service-operator Repo: https://github.com/yunionio/cloudpods-service-operator\n1 commits to cloudpods-service-operator - v3.4.4 since this release.\nFeatures (1)  keep cloudresource when resource in k8s is invalid (68a1e48, rainzm)   notify-plugins Repo: https://github.com/yunionio/notify-plugins\n4 commits to notify-plugins - v3.4.4 since this release.\nDocker_push (1)  amd64 just use build_process (d4bbb03, Zexi Li)  Features (2)  add webhook robot(custom robot) (06bde6a, rainzm) support multi webhooks config for robot (52669eb, rainzm)  Others (1)  增加调试开关 (ab97c2e, Zhang Dongliang)  ","excerpt":"Release time: 2020-10-28 18:20:55\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-4/","title":"v3.4.4"},{"body":"发布时间 2020-10-28 18:20:55\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n70 commits to cloudpods - v3.4.4 since this release.\nBug Fixes (29)  cancel pending-delete should increase resource quota usages (2a1a640f6, Qiu Jian) missing authenticate action log for user web login (ecbe76e9f, Qiu Jian) add rds cpu and memory usage (16d13941c, Qu Xuan) set secgroup status (44046f286, Qu Xuan) avoid sync project panic (95f7600b6, Qu Xuan) use correct worker (062301f54, Qu Xuan) avoid delete public ip when sync eip list (a851e0133, Qu Xuan) server usage status not correct (90d649aef, Qiu Jian) do not lock guest after lock eip, to prevent possible dead lock (d774581a2, Qiu Jian) remote update metadata may cause metadata update loop (62f5355b1, Qiu Jian) don’t update NextSyncTime when snapshots that should be added has not (0ba8cb7fb, rainzm) reduce change config logs (9b8758e19, Qiu Jian) 新增google存储类型 (f77bcd3bb, Qu Xuan) 避免冲掉设置的到期释放时间 (8f3cb9cdb, Qu Xuan) add aliyun new region (22349276d, Qu Xuan) missing authenticate action log for user web login (a92a0e2d0, Qiu Jian) monitor commonalert not detach alert resource (d99d93d04, Zexi Li) sync dns records after sync vpcs (11f8e4f71, Qu Xuan) compute: filter cachedimage with health storage (2a1bbfd57, rainzm) esxi: no callback in uploadHandler (57dad6281, rainzm) esxi: use correct device index (d3964bf0d, rainzm) esxi: resize root disk after cloning vm (8f3b8c7ff, rainzm) esxi: filter vmdk item in lease.info (d31802c87, rainzm) glance: allow public and private operations of guestimage (3fae388db, rainzm) notify: add AllOkContactTypes in where permanently enabled and verified ContactType (f367f1abe, rainzm) region: compute binded disk count when deleting snapshotpolicy (6f1417d26, rainzm) region: roll back the optimization of cachedimage list (be5a6a93c, rainzm) region: add suffix ‘display’ for time_points and repeat_weekdays (bbfb9db90, rainzm) region: init NextSyncTimeiwhen create snapshotpolicydisks (93bb4022f, rainzm)  Bugfix (2)  commonalert (8a0eeb7d6, zhaoxiangchun) qcloud pull metric (06db7339e, zhaoxiangchun)  Cloudcommon (3)  db: GET: i18n for result of get property calls (5d0fd14cb, Yousong Zhou) db: add man.GetI18N (cd123e007, Yousong Zhou) db: modelbase: distinct-field: readability change (91736710b, Yousong Zhou)  Code Refactoring (3)  find the most suitable storage (7a2c2b804, rainzm) region: faster list for cachedimage (c45658686, rainzm) region: faster list for cachedimage (b0823a09b, rainzm)  Feature (2)  remote update qcloud instance metadata and name (a764a6469, Qiu Jian) qcloud create VM with tags (f05a56aad, Qiu Jian)  Features (10)  use details data to cover obj data in FetchCustomizeColumns (37c14d756, rainzm) add a retry mechanism to AutoSyncExtDiskSnapshot (93ac3260a, rainzm) add valid filter for cachedimage list (d454b0a79, rainzm) add NotifyWebhook in notifyclient (0fd6481e4, rainzm) support lock storage from selected cachedimage (5a7876ae4, rainzm) esxiagent: try to customize vm if deployfs failed (a35a6f3c1, rainzm) notify: add IntelliNotify (5306add70, rainzm) notify: allow empty receivers for robot or webhook contact type (d799a71fd, rainzm) notify: support webhook contact type (436f1e5cb, rainzm) region: call NotifyWebhook in the life cycle of guests (9dee4c1b9, rainzm)  Host (1)  fix sync storage info duration' (7a9b491d1, wanyaoqi)  Lockman (1)  test: add prefix setting (f7f7c7be8, Yousong Zhou)  Logger (2)  actionlog: i18n for distinct-field (0964c6ad8, Yousong Zhou) actionlog: readability change (c2589e735, Yousong Zhou)  Monitor (2)  set default influxdb datasource by endpoint type (b43f8b3fa, Zexi Li) add alert resource (af11737e7, Zexi Li)  Others (15)  commalertUpdateInput increat param: (002a2af27, zhaoxiangchun) fix on stream disk complete snapshots refcount not update (8e5b74a3f, wanyaoqi) check disk is in reset before delete snapshot (d78068d43, wanyaoqi) bugfix: (e7674116e, zhaoxiangchun) host increase cpu mem max size (a4b1d3952, wanyaoqi) fix:get all project dns resource (66c81ee54, lvyangyang) fix informer backend (d6a9b5dac, wanyaoqi) fix fetch customize columns (f706d59ac, wanyaoqi) lbcert delete bugfix (7da0a67af, TangBin) remove try set informer backend (15bd6bacd, wanyaoqi) telegraf-raid-plugin: update raid state to lower case (6706c39f8, wanyaoqi) keystone init etcd backend (8ce183eaf, wanyaoqi) .circleci: build: make with parallel level 2 (3aadaf15b, Yousong Zhou) add aliyun finance environment (a9c44ed30, TangBin) telegraf raid plugin (8b2680ed5, wanyaoqi)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n9 commits to cloudpods-operator - v3.4.4 since this release.\nFeatures (1)  add webhook plugin for notify (e8cedb1, rainzm)  Monitor (2)  alert for host_raid adapter should \u003e= 0 (dc52030, Zexi Li) inject smart_device and host_raid alert rule (fee4e8a, Zexi Li)  Others (6)  更新 nginx 配置以防 dos 攻击 (e1c8023, Zhang Dongliang) modify commonalert init policy : (c446862, zhaoxiangchun) bugfix: (5b4e57f, zhaoxiangchun) make mod (8afc21f, wanyaoqi) telegraf add disk plugin (face8be, wanyaoqi) set image default policy to if not present (96aaea7, Zexi Li)   cloudpods-service-operator 仓库地址: https://github.com/yunionio/cloudpods-service-operator\n1 commits to cloudpods-service-operator - v3.4.4 since this release.\nFeatures (1)  keep cloudresource when resource in k8s is invalid (68a1e48, rainzm)   notify-plugins 仓库地址: https://github.com/yunionio/notify-plugins\n4 commits to notify-plugins - v3.4.4 since this release.\nDocker_push (1)  amd64 just use build_process (d4bbb03, Zexi Li)  Features (2)  add webhook robot(custom robot) (06bde6a, rainzm) support multi webhooks config for robot (52669eb, rainzm)  Others (1)  增加调试开关 (ab97c2e, Zhang Dongliang)  ","excerpt":"发布时间 2020-10-28 18:20:55\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-4/","title":"v3.4.4"},{"body":"Release time: 2020-10-16 17:58:13\n cloudpods Repo: https://github.com/yunionio/cloudpods\n8 commits to cloudpods - v3.4.3 since this release.\nBug Fixes (4)  hostname for instance (950a2c29f, Qu Xuan) get images distinct field (d298c7544, Zexi Li) resolve with_meta filter conflict (9c9cb17d3, Qiu Jian) 避免并发同步安全组导致规则混乱 (4b2d67de4, Qu Xuan)  Feature (1)  filter storages by image (45e092bd2, Qiu Jian)  Features (1)  esxi: do not specify portkey in NewVNIC (cc96c01c0, rainzm)  Others (1)  remove alpine build cache before make image (28cb75f41, Zhang Dongliang)  Stringutils2 (1)  add RemoveUtf8Strings func (64593fc88, Zexi Li)  ","excerpt":"Release time: 2020-10-16 17:58:13\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-3/","title":"v3.4.3"},{"body":"发布时间 2020-10-16 17:58:13\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n8 commits to cloudpods - v3.4.3 since this release.\nBug Fixes (4)  hostname for instance (950a2c29f, Qu Xuan) get images distinct field (d298c7544, Zexi Li) resolve with_meta filter conflict (9c9cb17d3, Qiu Jian) 避免并发同步安全组导致规则混乱 (4b2d67de4, Qu Xuan)  Feature (1)  filter storages by image (45e092bd2, Qiu Jian)  Features (1)  esxi: do not specify portkey in NewVNIC (cc96c01c0, rainzm)  Others (1)  remove alpine build cache before make image (28cb75f41, Zhang Dongliang)  Stringutils2 (1)  add RemoveUtf8Strings func (64593fc88, Zexi Li)  ","excerpt":"发布时间 2020-10-16 17:58:13\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-3/","title":"v3.4.3"},{"body":"Release time: 2020-10-15 20:07:38\n cloudpods Repo: https://github.com/yunionio/cloudpods\n12 commits to cloudpods - v3.4.2 since this release.\nBug Fixes (8)  allwo filter resource by with-meta and with-user-meta filter (ff2b7eb34, Qiu Jian) support filter rds sku by provider (7b5d82237, Qu Xuan) filter project role with system=true (8042b9430, Qiu Jian) filter role assignments by project domains id or name (d1cbaead0, Qiu Jian) use new api (1768d1e7d, Qu Xuan) support fake tempalte when searching template vm (c7d6bb781, Rain) 优化安全组规则同步 (d2d2934e8, Qu Xuan) esxiagent: check whether regexp is nil (2076a7511, rainzm)  Features (3)  add ‘vlan_id’ param when creating network (ff34e9386, rainzm) change templateid as / in esxi (a891d1d87, rainzm) esxiagent: keep data disks when cloning vm (5d0d6d960, rainzm)  Others (1)  fix:openstack lb 后端ip无法映射到主机的异常处理 (cf89e8a23, lvyangyang)  ","excerpt":"Release time: 2020-10-15 20:07:38\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-2/","title":"v3.4.2"},{"body":"发布时间 2020-10-15 20:07:38\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n12 commits to cloudpods - v3.4.2 since this release.\nBug Fixes (8)  allwo filter resource by with-meta and with-user-meta filter (ff2b7eb34, Qiu Jian) support filter rds sku by provider (7b5d82237, Qu Xuan) filter project role with system=true (8042b9430, Qiu Jian) filter role assignments by project domains id or name (d1cbaead0, Qiu Jian) use new api (1768d1e7d, Qu Xuan) support fake tempalte when searching template vm (c7d6bb781, Rain) 优化安全组规则同步 (d2d2934e8, Qu Xuan) esxiagent: check whether regexp is nil (2076a7511, rainzm)  Features (3)  add ‘vlan_id’ param when creating network (ff34e9386, rainzm) change templateid as / in esxi (a891d1d87, rainzm) esxiagent: keep data disks when cloning vm (5d0d6d960, rainzm)  Others (1)  fix:openstack lb 后端ip无法映射到主机的异常处理 (cf89e8a23, lvyangyang)  ","excerpt":"发布时间 2020-10-15 20:07:38\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-2/","title":"v3.4.2"},{"body":"Release time: 2020-10-14 18:03:02\n cloudpods Repo: https://github.com/yunionio/cloudpods\n48 commits to cloudpods - v3.4.1 since this release.\nBaremetal (1)  fix pxe filter network by guest_dhcp (d0d3d8e33, Zexi Li)  Bug Fixes (22)  qcloud set hostname for instance (5b79ba560, Qu Xuan) support public ip create (2a210407a, Qu Xuan) 支持带宽包用户 (84e8e4e6c, Qu Xuan) trans google new region name (3fe15d267, Qu Xuan) qcloud eip with bandwidth attr (d574a823b, Qu Xuan) avoid qcloud secgroup cache name not sync (e8d737ff6, Qu Xuan) server name auto index should start from 1 (7ce0d7b44, Qiu Jian) qcloud instance with max bandwidth (715db28e3, Qu Xuan) format errors that block make test (152ea54f3, Qiu Jian) project_id in resource details not correct (d2aacafa4, Qiu Jian) ldap sync not update user’s phone and email (1aa82ae95, Qiu Jian) not clean pending domain usage (488e7e56a, Qiu Jian) validate secgroup purge condition (9fbd4f059, Qu Xuan) avoid slice out of bounds (078b1d635, rainzm) filter cached images with host schedtag (49887e540, Qiu Jian) sync huawei bucket project info (cb36572c1, Qu Xuan) error code of external bucket not found error should be 404 (76f794d1a, Qiu Jian) esxi: check whether some fields of vm are nil (27bd564d2, rainzm) esxi: check nil value when NewVirtualMachine (1bc4b3cb9, rainzm) esxi: filter linkLocalAddress (b8e0599e3, rainzm) esxi: search template from whole vCenter (2259fe119, rainzm) esxi: use system disk of template only when cloning vm (d16affc9a, rainzm)  Eip (2)  NewEipForVMOnHost: add opslog (896bec8f4, Yousong Zhou) construct a pointer type (a8426482b, Yousong Zhou)  Feature (1)  qcloud create VM with tags (ef9b64990, Qiu Jian)  Features (5)  add vlanId for suggested network (7edcd151e, rainzm) filter esxi ip by CIDR (552ce3b2e, rainzm) add ‘ip-list’ for esxicli (8528d7981, rainzm) esxi: support fake template vm via regex filter (df90d99bc, rainzm) region: make address recommendations more precise (91c852676, rainzm)  Hotfix (1)    allow merge networks without continuous addresses 2. filter guest_ip_start and guest_ip_end with contains operator (adccad348, Qiu Jian)    Others (13)  replace NewFloat by NewFloat64 and NewFloat32 (f19fe2178, wanyaoqi) make mode (2265c9422, wanyaoqi) fix:aliyun jsonRequest 增加i/o timeout retry (d72081770, lvyangyang) fix host-deployer base image (407251975, wanyaoqi) 在 docker push 脚本里创建_output 目录，以便容错 (b7fd879e4, Zhang Dongliang) 在 docker push 脚本里创建_output 目录，以便容错 (7efb85ba0, Zhang Dongliang) resolve conflict (d7316b26a, Zhang Dongliang) genreate api models (dee1aa26d, wanyaoqi) add interface freeze virtual resource (c973bf163, wanyaoqi) Add web url to alarm template (58d52d947, zhaoxiangchun) bugfix:scoperesource FilterByOwner (c5ef564d3, zhaoxiangchun) remove aws lbbg cache metedata (e82cf184f, TangBin) modify suggest rule cli (bba2cf23f, zhaoxiangchun)  Vpcagent (1)  ovn: increase dhcp lease, renew, rebind time (e9415ae49, Yousong Zhou)  Webconsole (2)  ssh: add keyboard-interactive as an option (63b0d0c07, Yousong Zhou) ssh: each argument on its own line (39a45229a, Yousong Zhou)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n2 commits to cloudpods-operator - v3.4.1 since this release.\nOthers (1)  not create notice (a834a78, Zexi Li)  Regiondns (1)  configmap: quash trailing spaces (746963f, Yousong Zhou)  ","excerpt":"Release time: 2020-10-14 18:03:02\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-1/","title":"v3.4.1"},{"body":"发布时间 2020-10-14 18:03:02\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n48 commits to cloudpods - v3.4.1 since this release.\nBaremetal (1)  fix pxe filter network by guest_dhcp (d0d3d8e33, Zexi Li)  Bug Fixes (22)  qcloud set hostname for instance (5b79ba560, Qu Xuan) support public ip create (2a210407a, Qu Xuan) 支持带宽包用户 (84e8e4e6c, Qu Xuan) trans google new region name (3fe15d267, Qu Xuan) qcloud eip with bandwidth attr (d574a823b, Qu Xuan) avoid qcloud secgroup cache name not sync (e8d737ff6, Qu Xuan) server name auto index should start from 1 (7ce0d7b44, Qiu Jian) qcloud instance with max bandwidth (715db28e3, Qu Xuan) format errors that block make test (152ea54f3, Qiu Jian) project_id in resource details not correct (d2aacafa4, Qiu Jian) ldap sync not update user’s phone and email (1aa82ae95, Qiu Jian) not clean pending domain usage (488e7e56a, Qiu Jian) validate secgroup purge condition (9fbd4f059, Qu Xuan) avoid slice out of bounds (078b1d635, rainzm) filter cached images with host schedtag (49887e540, Qiu Jian) sync huawei bucket project info (cb36572c1, Qu Xuan) error code of external bucket not found error should be 404 (76f794d1a, Qiu Jian) esxi: check whether some fields of vm are nil (27bd564d2, rainzm) esxi: check nil value when NewVirtualMachine (1bc4b3cb9, rainzm) esxi: filter linkLocalAddress (b8e0599e3, rainzm) esxi: search template from whole vCenter (2259fe119, rainzm) esxi: use system disk of template only when cloning vm (d16affc9a, rainzm)  Eip (2)  NewEipForVMOnHost: add opslog (896bec8f4, Yousong Zhou) construct a pointer type (a8426482b, Yousong Zhou)  Feature (1)  qcloud create VM with tags (ef9b64990, Qiu Jian)  Features (5)  add vlanId for suggested network (7edcd151e, rainzm) filter esxi ip by CIDR (552ce3b2e, rainzm) add ‘ip-list’ for esxicli (8528d7981, rainzm) esxi: support fake template vm via regex filter (df90d99bc, rainzm) region: make address recommendations more precise (91c852676, rainzm)  Hotfix (1)    allow merge networks without continuous addresses 2. filter guest_ip_start and guest_ip_end with contains operator (adccad348, Qiu Jian)    Others (13)  replace NewFloat by NewFloat64 and NewFloat32 (f19fe2178, wanyaoqi) make mode (2265c9422, wanyaoqi) fix:aliyun jsonRequest 增加i/o timeout retry (d72081770, lvyangyang) fix host-deployer base image (407251975, wanyaoqi) 在 docker push 脚本里创建_output 目录，以便容错 (b7fd879e4, Zhang Dongliang) 在 docker push 脚本里创建_output 目录，以便容错 (7efb85ba0, Zhang Dongliang) resolve conflict (d7316b26a, Zhang Dongliang) genreate api models (dee1aa26d, wanyaoqi) add interface freeze virtual resource (c973bf163, wanyaoqi) Add web url to alarm template (58d52d947, zhaoxiangchun) bugfix:scoperesource FilterByOwner (c5ef564d3, zhaoxiangchun) remove aws lbbg cache metedata (e82cf184f, TangBin) modify suggest rule cli (bba2cf23f, zhaoxiangchun)  Vpcagent (1)  ovn: increase dhcp lease, renew, rebind time (e9415ae49, Yousong Zhou)  Webconsole (2)  ssh: add keyboard-interactive as an option (63b0d0c07, Yousong Zhou) ssh: each argument on its own line (39a45229a, Yousong Zhou)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n2 commits to cloudpods-operator - v3.4.1 since this release.\nOthers (1)  not create notice (a834a78, Zexi Li)  Regiondns (1)  configmap: quash trailing spaces (746963f, Yousong Zhou)  ","excerpt":"发布时间 2020-10-14 18:03:02\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-1/","title":"v3.4.1"},{"body":"Release time: 2020-09-30 16:43:35\n cloudpods Repo: https://github.com/yunionio/cloudpods\n607 commits to cloudpods - v3.4.0 since this release.\nAdd (3)  openstack loadbalancer (#7497) (eb56fcf7b, lvyangyang) region/sync openstack routetables (eac0a797b, lvyangyang) region/openstack 迁移接入 (41a4188bb, lvyangyang)  Ansibleserver (1)  register metadata manager (1ae8c9786, Yousong Zhou)  Appsrv (1)  quash low-value debug log lines (7a3f24145, Yousong Zhou)  Baremetal (2)  fix hpssactl split last LV size out of limit (#7426) (b1603153e, Zexi Li) set zone when enable netif (c27433103, Zexi Li)  Bug Fixes (279)  允许域管理员可以看到共享的dns zone cache列表 (02bcce195, Qu Xuan) emulated wire not sync vpc shared info (5c4423bcb, Qiu Jian) oidc response user’s info (8cdab93c1, Qiu Jian) revert filter-by-owner changes of scoped resource (8a28d2627, Qiu Jian) allow domain admin view shared dns zone records (b0e1d0de2, Qu Xuan) avoid sync dns zone cache status is init (f931deb41, Qu Xuan) filter storages by host schedtag (11ea89795, Qiu Jian) 避免azure同步项目失败 (1021bf151, Qu Xuan) suffix template cache key (ad2248311, rainzm) filter cloudprovider/network by host-schedtag-id (82c0dcfb3, Qiu Jian) dns zone cache owner info (da8529a00, Qu Xuan) allow create disk prefer manager (73aee1147, Qu Xuan) simplify forbidden user login message (91f098430, Qiu Jian) 支持同步project标签到本地资源 (4794b1606, Qu Xuan) avoid purge storages (f5cf093e0, Qu Xuan) openstack zone not emulated (3903af786, ioito) allow cross doamin resource sync (91cac5c21, ioito) avoid account delete failed (5f50314df, ioito) sql err (310baa266, ioito) avoid compare err with cloudprovider.ErrNotFound direct (5f2c771f7, ioito) dns 错误信息补全 (8d28bfc6d, lvyangyang) google资源名称兼容处理 (26a3df33b, Qu Xuan) avoid serial vm creation (b5088230b, ioito) 仅在可用区故障时可强制挂载磁盘 (4038bfb8a, ioito) scope resource filter by owner (975e7fb1e, Qiu Jian) use i18n.Table to handle Chinese-English conversion (1c786a034, rainzm) keystone project resource count not accurate (95bde0a14, Qiu Jian) sort quota list result by usage rate (f3fa6f82b, Qiu Jian) disable domain sharing if non_default_domain_projects turned off (e796437a3, Qiu Jian) Error occurs when suitableWire exists or all suitableNetwork exist. (5f1cd20aa, rainzm) avoid account delete failed (c38cb271f, ioito) error 值重叠 (9a04238b7, lvyangyang) 避免同步不到其他域的云账号 (0a87b3101, Qu Xuan) role assignment filter by users not working for effective users in groups (b32eddce0, Qiu Jian) 避免腾讯云同步虚拟机ip异常 (f659ccd0d, ioito) apigateway userinfo includes project metadata (5b6b5eeb7, Qiu Jian) 避免添加新账号后长时间未同步iam用户 (b3c235fe3, ioito) 优化提取显示主账号名 (686df64ea, ioito) avoid not reture cloudprovider.ErrNotFound error (bb3317cc3, Qu Xuan) scheduler token not support policy (e444ab7a1, Qiu Jian) reset user password without check (5f35bba0d, Qiu Jian) get jnlp xml from dell idrac6,7,9 (760ac9900, Qiu Jian) reduce totp verification overhead (49cf94abb, Qiu Jian) add esxicli vmrc/webmks command (5f9088d24, Qiu Jian) disable qcloud verifyAppId temporarily (7601ca437, Qiu Jian) keystone initialize data skip nil extra fields (967d46bbf, Qiu Jian) omit empty fail reason (a475a7b41, Qiu Jian) enable generate name caused compability issue (0d798412e, Qiu Jian) 避免名称重复 (a1ba06a92, Qu Xuan) bucket object cnt fix (cc5e0cd7c, Qu Xuan) lock/unlock cleanup (ada735246, Qiu Jian) 支持自动根据云上项目修改本地项目名称 (5c71349fe, Qu Xuan) 修复权限组权限同步异常问题 (24cbdf673, Qu Xuan) cos use proxy (0a5ee4ca6, Qu Xuan) check host sharing status when considering whether a host is assignable (6b5339900, Qiu Jian) disable webkms for esxi older than 6.5 (7cf5ad913, Qiu Jian) 默认不自动合并安全组 (ce777855a, Qu Xuan) avoid sync natgateway eip panic (960742029, Qu Xuan) 优化sku同步逻辑 (ea518358c, Qu Xuan) add dns recordset dns value check (2e93ee3d6, Qu Xuan) 平滑迁移数据 (d6d490af6, Qu Xuan) 腾讯云不支持同时设置秘钥和密码,若设置秘钥，则将密码置空 (5576819f0, Qu Xuan) optimized qcloud keypair (dc20313ef, Qu Xuan) 修复cloudid问题 (642af06ba, Qu Xuan) optimzed clouduser password (aa26c6ec9, Qu Xuan) 避免未本地缓存usercache (835261e9e, Qu Xuan) capability for cloudid (0b4a562f0, Qu Xuan) optimzed clouduser (9281c5429, Qu Xuan) avoid create public zone failed (2ad1a4afe, Qu Xuan) recode project-role rpc handle to support group role assignment results by user or project (0268d9585, Qiu Jian) uniform cachedimage active status (025eca548, Qu Xuan) wire usage stats incorrect (621c2796d, Qiu Jian) ignore 409 error when doing redfish power on (d10adf22d, Qiu Jian) validate candiate ip for sync-fix-nics (f739c8ff0, Qiu Jian) Override Master and Slave for scalinggroup_guest (ba2b1d9bd, rainzm) manager_id资源隔离获取 (9bb4eb5d4, Qu Xuan) prevent users in disabled idp from login (e758c4aa9, Qiu Jian) check assign-host previliges (623c71b14, Qiu Jian) sync groups for user (4cd73c16c, Qu Xuan) aliyun wulanchabu region (0a79d1d23, Qu Xuan) 取消aliyun lb scheduler创建限制 (933dddd8a, Qu Xuan) 修复cloudid同步问题 (88e5119fd, Qu Xuan) user idps attributes includes template name (bfa4ce38e, Qiu Jian) skup syncing lb, rds, redis instances in tasks (c5c2b4b69, Qiu Jian) network address list respect privilige of user (29edf8329, Qiu Jian) cloudid optimized (390d6f07e, Qu Xuan) valid update name and update dns recordset (b4252c7c2, Qu Xuan) scheduler aware policy (485388394, Qiu Jian) support VirtualDiskRawDiskMappingVer1BackingInfo (0619da6f1, Qiu Jian) find correct esxi host access ip (29a3db9ff, Qiu Jian) remove redundant auth cookie in sso login (c50497090, Qiu Jian) 公有云子账号加域属性 (02bf5b76d, Qu Xuan) 优化安全组list速度，并发挥rule规则信息 (8279f62c9, Qu Xuan) clouduser can_delete always be false (91a5e4ab7, Qu Xuan) 同步不需要判断账号是否有iam权限 (2c17e6e66, Qu Xuan) optimzed sync (5cc25ae10, Qu Xuan) optimized cloudid (cfd76b23a, Qu Xuan) search by chs projectname or domainname (976dbd779, Qiu Jian) 避免slave zoneid异常 (cac7dc529, Qu Xuan) compatiblity fixes with lenovo RD620 and huawei 2288 (949e2ebed, Qiu Jian) avoid nil panic (03456eaaa, Qu Xuan) avoid policy value not save (d03fddcd7, Qu Xuan) climc params (893085a2c, Qu Xuan) add details for account delete (#7703) (800dd26c6, 屈轩) vmware esxi host detects vnic portgroup info (#7660) (836151eee, Jian Qiu) apigateway user info add is_local attribtue (#7695) (0566e1dec, Jian Qiu) server purge may fail (#7698) (cca226738, Jian Qiu) http error limit request body length fix: http error limit request body length (#7700) (538bc873a, Jian Qiu) 不限制openstack系统盘类型 (#7675) (9812864bc, 屈轩) cleanup logic for nics of pending_deleted guests (#7669) (5647a6842, Jian Qiu) avoid delete aws iam user failed (6ed3a4833, Qu Xuan) aovid truncated data (#7644) (3243e5a03, 屈轩) add keystone sync user debug info (#7639) (e3fe66e8e, Jian Qiu) turn off some default project policies (#7637) (de80f1705, Jian Qiu) avoid openstack image-list failed (#7641) (aef249ea8, 屈轩) project role rpc returns policies info (#7632) (5b2b40d6c, Jian Qiu) add keystone sync user debug info (ccf55963a, Qiu Jian) make old notify send SDK compatible (#7628) (707051ec0, Rain Zheng) avoid network-list –zone not work (#7619) (4593c1fb9, 屈轩) ignore invalid zone sku for rds sku sync (#7617) (ca2e8bece, 屈轩) oauth2 not support default_project_id and default_role_id (#7622) (fea4a6b07, Jian Qiu) idp deletel logic cleanup (#7616) (852a3bb13, Jian Qiu) hide locked cloud policy by default (#7614) (7c3fa87ed, Jian Qiu) GetDefaultClient always return a new http client instance (3762df808, Qiu Jian) avoid change user name for google (#7613) (c1a6b2db9, 屈轩) limit the length of error message when do idp redirect (#7612) (a94f32ed5, Jian Qiu) avoid storage=nil, dis can not delete (#7608) (4555b00c3, 屈轩) apigateway option to turn off login domain list (fe0182333, Qiu Jian) optimized for cloudid (#7604) (5b898bbf6, 屈轩) opslog filter by owner_project_ids and owner_domain_ids (#7600) (777059648, Jian Qiu)   remove Azure OIDC extra user scope 2. yunionauth cookie missing (#7599) (7bab39daf, Jian Qiu)   member user only can get user \u0026 domain resource (#7597) (a23a94714, 屈轩) option for metadata path (#7595) (e70fe59bc, 屈轩) 修复cloudid用户同步及权限同步 (8a78c54dc, Qu Xuan) dns record create ignore is_public field (016b65a4b, Qiu Jian) 支持自定义权限 (#7565) (d5524d1ea, 屈轩) GetIImages correctly without ‘image_cache’ dir (#7575) (0ab75b52d, Rain Zheng) allow delete shared role and policy (4a0439da8, Qiu Jian) aovid duplicate sku name (#7572) (196d3b360, 屈轩) cloud poilcy count (d2b9ba5bc, Qu Xuan) json TAG_PREFIX invalid syntax (#7564) (6a57435f1, Zexi Li) avoid virtual resource project id is empty when cloudaccount with no project (#7560) (7cd419f78, 屈轩) Merge the host network correctly when preparenet (#7557) (098b4e5b5, Rain Zheng) network port count stat recode (#7554) (b89845584, Jian Qiu) user with sso idp fail to login with password (#7552) (320d7cabc, Jian Qiu) oidc auth callback url not complete (#7545) (a02611db1, Jian Qiu) recode user project role list to include group info (#7544) (59c026f0d, Jian Qiu) change publicNetworkCount to autoAllocNetworkCount in Capability (#7546) (e1bd01162, Jian Qiu) separete enabled and status field (5b31ca8da, Qu Xuan) update vendor (#7526) (c277d492f, Jian Qiu) optimized huawei security group get and create operation (#7520) (930ca23ea, 屈轩) compatible for macOS (a6bff9498, Qu Xuan) 修复安全组合并导致重复计算虚拟机绑定安全组数量\u0026优化安全组操作 (#7496) (f343b071f, 屈轩) avoid nil pointer (#7508) (4696a3e47, 屈轩) password authentication may choose wrong idp backend (#7513) (c98e72e6e, Jian Qiu) preserve state while doing sso redirect (60eec6440, Qiu Jian) 提高zstack认证兼容性 (0850bd516, Qu Xuan) 隐藏auzre经典类型存储 (629a4e93d, Qu Xuan) 增加openstack兼容性 (#7492) (327b60baf, 屈轩) do not search response key if empty json returned (#7495) (c63230f37, Jian Qiu) idp validate config not complete (#7488) (19b69de1d, Jian Qiu) support AzureAD oidc in china area (12bbbc541, Qiu Jian) capabilities get auto alloc network count (#7483) (d4a93f0dc, Jian Qiu) unlink-user illegal mix of collations (#7482) (0a580b3c9, Jian Qiu) filter public network count by zone and region (#7477) (04eaf3de6, Jian Qiu) typo running_geusts =\u003e running_guests (eae229b35, Qiu Jian) typo (9da8095f8, Qu Xuan) ignore bucket-set-acl not implemented error (#7470) (1929076fa, Jian Qiu) avoid host globalid change (#7465) (a51f0271e, 屈轩) avoid generated codes having duplicate PerformSetScope methods (9bdf2c75e, Qiu Jian) 避免azure同步资源组异常 (be51f3b49, Qu Xuan) sync share mode between vpc and wire (9ea80725a, Qiu Jian) upgrade aliyun sdk (#7432) (27168fc72, 屈轩) 避免glance metadata-list project scope无权限 (#7402) (1244c170b, 屈轩) 优化openstack项目认证 (#7397) (fd2f1c0e3, 屈轩) 避免在仅调整虚拟机磁盘时opslog日志记录mem cpu异常 (#7392) (0cad2efd2, 屈轩) avoid lost backend params (846f90d54, Qu Xuan) openstack win image user data need encode (781618023, Qu Xuan) avoid account sync deadlock (509ebb92c, Qu Xuan) ignore general s3 set acl not implemented error (7f829f24f, Qiu Jian) cloud account sync may block (1985aab89, Qiu Jian) openstack多项目问题 (859ab9717, Qu Xuan) avoid parse json err nil pointer (598e8a924, Qu Xuan) avoid nil pointer (6477e0e14, Qu Xuan) adjust API input field names according to spec (#7382) (f0f406c24, Jian Qiu) use json to store task error message (#7351) (ba292dfed, Jian Qiu) 添加阿里云rds备份恢复限制条件 (#7378) (3df146ff6, 屈轩) change owner should check required domain list (#7375) (984bfeb6e, Jian Qiu) 普通视图下，安全组仅统计可看到的vm count (#7358) (76f78cdda, 屈轩) 同步sku与磁盘类型关系 (#7368) (d8f046365, 屈轩) 避免创建rds备份时对rds进行一些操作 (#7354) (78a68bffd, 屈轩) 修复vm绑定重复安全组 (8c31bba0a, Qu Xuan) add default perform allow policy to sysadmin (757706db9, Qiu Jian) cleanup auth error message return by apigateway (f1bfcfbd9, Qiu Jian) 避免status_code\u003e=400并且resp为空时err为nil (#7264) (a67f3e548, 屈轩) cloud account delete may fail due to inconsistent status (9f8f2b6c4, Qiu Jian) do accessibility check when dissociate eip from resource (845195440, Qiu Jian) modify list details for guesttemplate (34e66ab2e, rainzm) schedtag should be system resource (8f1b93472, Qiu Jian) choose candidate list from the list returned from backend (35da086cc, Qiu Jian) 单独添加更新账单文件日志 (c6df1944c, Qu Xuan) 支持多项目安全组规则过滤 (b20cd1364, Qu Xuan) domain resource domain share to system when non_default_domain_projects off (8d8acab90, Qiu Jian) update auto generate model api (208b69573, Qiu Jian) 避免未能导出共享安全组规则 (9a329453a, Qu Xuan) image upload not clean pending usage (587f533da, Qiu Jian) quota usage not updated after disk resizing (ce3d0906b, Qiu Jian) google rds regional and zonal (718e36b32, Qu Xuan) rds备份恢复优化 (8d85f04d8, Qu Xuan) default vpc must be shared globally (d3741d9a4, rainzm) globalvpc跟随云账号共享 (3bf9b5b0d, Qu Xuan) 过滤可用eip (ecaa1ad45, Qu Xuan) 避免乌兰察布区域拉取资源异常 (8bd23cf3d, Qu Xuan) prefetch image error when create guest with vmware template (2f1093a14, rainzm) not work for network-list –zones (bf65a8816, Qu Xuan) sec rule export missing fields (3ddcaad3c, Qu Xuan) check azure image format when rebuild root (466a3f728, Qu Xuan) 避免华为云安全组规则删除失败 (cc948a4d5, Qu Xuan) clouduser’s cloudgroups info (769dcae0e, Qu Xuan) 添加secgroup rule过滤参数 (6b591b455, Qu Xuan) 修复cloudid get权限问题 (34aa55114, Qu Xuan) azure 支持权限 (4cd67270a, Qu Xuan) 修复cloudid用户列表权限问题 (dccf685f6, Qu Xuan) 优化webconsole代码\u0026bugfix (dee1283c0, Qu Xuan) 修复阿里云同步安全组规则异常问题 (367c59117, Qu Xuan) 优化减少对etcd组件依赖 (9003d3702, Qu Xuan) mo.VirtualMachine’s Config maybe nil (b6753af32, rainzm) 优化azure订阅创建 (3d9e8b872, Qu Xuan) 支持azure创建订阅 (16f93d665, Qu Xuan) 避免google clouduser同步权限异常 (169b13f16, Qu Xuan) 修复vpc同步异常问题 (d7e16e334, Qu Xuan) 避免越界访问 (45f5bc526, Qu Xuan) opslog show the owners operation logs only (d59bff336, Qiu Jian) remove default allow policy for storages (6af7c5923, Qiu Jian) cloudid 权限修复 (dc32fe42e, Qu Xuan) cloudid 异常修复 (4b0bfa734, Qu Xuan) 修复资源组云上同步异常问题 (b41eea1d8, Qu Xuan) 修复qcloud同步权限组异常问题 (bfc414530, Qu Xuan) 修复azure 项目同步问题 (cb1ad2cf0, Qu Xuan) 避免请求中国区iam异常 (c82f307e4, Qu Xuan) 修复腾讯云操作日志时间异常问题 (9507a7209, Qu Xuan) 修复elastic cache sku zone_id异常问题 (862b926aa, Qu Xuan) 分开统计安全组关联虚拟机数量 (3db15d59f, Qu Xuan) json request 支持自定义匹配err (5e50740b3, Qu Xuan) orderedstring add performance improvements (f0c3b9627, Qiu Jian) perform private on vpc will private all wires if no networks in wires (0005cf868, Qiu Jian) remove default host list policy (87dc4743d, Qiu Jian) init wire domain_id for local vpc (#7566) (cedfd6410, Jian Qiu) 避免cloudprovider同步缺失 (067b0ab76, Qu Xuan) 修正项目映射同步 (4b16fac0b, Qu Xuan) compute: return InputParameterError while ValidateCreateData (c050629ba, rainzm) esxi: return when host.Vm is empty (6bfca36cb, rainzm) esxi: Select correct unitNumber for ide control when creating disk (5975887d5, Rain Zheng) esxi: fetch templatevm from datacenter before clone vm (ac69f8a59, rainzm) esxi: Guarantee the uniqueness of the schedtag for esxi host (5460f2244, rainzm) esxiagent: add HostDelayTaskWorkerCount (4e7e8a59d, rainzm) esxiagent: return image extid not id (3ef91f92e, rainzm) notify: return correct value when sortContactType (d917e8e38, rainzm) notify: Replace String() with GetString() (8524fda7f, rainzm) notify: Set default priority ‘normal’ when creating notification (851b2d4bb, rainzm) notify: break down permissions of notifyconfigs (72276d038, rainzm) notify: Mark verified not enabled in MarkContactTypeVerified (ab02e166e, rainzm) notify: Allow user list receivers (82b7e659a, rainzm) notify: use AfterSend for contact with succuessful sending (9e1a7c5e1, rainzm) notify: clean verifyNote when mark verified (09bebcf5f, rainzm) notify: pull contact for workwx, dingtalk and feishu (dba92d4b0, rainzm) notify: modify name of notification to avoid duplication (043fdcfec, rainzm) notify: allow normal user create their receiver (aecf97780, rainzm) region: add RequestSyncstatusOnHost for SESXiGuestDriver (55b2b2900, rainzm) region: add GetSlaveFieldName for ScalingGroupGuest (35842df1b, rainzm) region: set ownerId as userCred when can’t FetchOwnerId (1215d723a, rainzm) region: Don’t allow address conflicts under vpc (47b9b91b8, rainzm) region: zone from guesttemplate’s preferzone maybe nil (#7387) (0deb908ac, Rain Zheng) region: split brand as ‘YunionCloud’ and ‘云联壹云’ when notify server event (471e2b4f1, rainzm) region: fetch correct ownerId in PerformPrepareNets (c7b8e84ff, rainzm) region: Remove default secgroup for esxi guest (68ba4361d, rainzm) scheduler: more standardized testing (348ca46a0, rainzm) scheduler: fix array out of bounds when sorting hosts (4f9c37239, rainzm) scheduler: filter InstanceGroup whose enabled is false (e6de7be7e, Rain)  Bugfix (1)  collect esxi metric timout (caa26b756, zhaoxiangchun)  Build (3)  ansibleserver: use native alpine, include openssh (28ad028d8, Yousong Zhou) use alpine-build:1.0-2 (e94d41558, Yousong Zhou) docker-centos-build: use centos-build:1.1-1 (e1e56eaa7, Yousong Zhou)  Capability (1)  public network count filter by default vpc (8dd25e01c, Zexi Li)  Climc (8)  add k8s fed resource sync action (37b9a2e53, Zexi Li) refactor k8s sub command (51020aac0, Zexi Li) add k8s federated resource cmd (02dc68f20, Zexi Li) k8s cluster grafana componet support subpath (7f5124bdf, Zexi Li) add cmd helper to reduce duplicate code (aa8177f53, Zexi Li) update k8s resource list options (cd25b4ac6, Zexi Li) refactor k8s resource (e5bd6f26d, Zexi Li) update k8s-release-create params (253dc22cf, Zexi Li)  Cloudcommon (11)  get joint model should aware fieldname (4164bf58c, Zexi Li) joint model list should add field_name into query (82e38b8f5, Zexi Li) remove query for fetchitem when not GET (#7551) (c672521ce, Zexi Li) remove unnecessary joint interface (#7524) (9af25a2aa, Zexi Li) taskman: fix table insert (de1e1b100, Yousong Zhou) tablespec: informer: use %#v to log bad obj (4fc35f92c, Yousong Zhou) taskman: SetModelManager (08cd41b60, Yousong Zhou) etcd: quash low-value debug log lines (2eeb45ded, Yousong Zhou) policy: fix interval and oneshot sync (29a3171a3, Yousong Zhou) tablespec: informer: log obj type (145c88f79, Yousong Zhou) app: cosmetic change (d9f3dfbbf, Yousong Zhou)  Cloudprovider (1)  remove redundant error log (ffcea2ae5, Yousong Zhou)  Code Refactoring (6)  esxi: replace GetTemplateVMById with FetchTemplateVMById (42faf34f1, rainzm) esxi: fetchVms and fetchHardwareInfo (ef8768fce, rainzm) notify: hide SSunContact webconsole (10caff1d9, rainzm) region: replace ‘ActualCapacity’ with ‘ActualCapacityUsed’ (e0c94daaf, rainzm) region: optimize preparenet of cloudaccount (3f77c01e6, rainzm) scheduler: make forcast result clearer (6000874b3, rainzm)  Db (1)  IModel: add GetI18N() method (62c0c11c3, Yousong Zhou)  Db_dispatcher (1)  pass query for fetchItem (c777793d9, Zexi Li)  Disk (1)  check disk is need renew on guest set renew (77f479ce6, wanyaoqi)  Dns (1)  isMyDomain: match only strict subdomain of dns_domain (7e191a503, Yousong Zhou)  Elasticips (3)  error when we have no usable eip network (59a5e9201, Yousong Zhou) fix calling FilterByOwner (430e9cd0f, Yousong Zhou) filter by owner when doing auto allocation (8a0f940b3, Yousong Zhou)  Feature (13)  add dns interface (a85a1aecd, Qu Xuan) use informer to update endpoint, policy and service configs (#7596) (34ee80f01, Jian Qiu) cloudid saml support phase1 – framework and api (92f05be30, Qiu Jian) do uniqueness check when create/update idp configs (#7584) (2b7586140, Jian Qiu) OpenID Connect provider support (#7490) (604b6b7ff, Jian Qiu) OpenID Connect provider support (#7446) (0e775e68e, Jian Qiu) add is_auto_alloc flag to networks (#7473) (1ba9715ec, Jian Qiu) unified sso login framework (096784389, Qiu Jian) project filter that list jointable projects for user or group (eb4a252d0, Qiu Jian) apigateway store auth state in cookie instead of sqlite (7ba3945d8, Qiu Jian) keystone add support for OpenID Connection idp (2183490a5, Qiu Jian)   idp as domain resource 2. keystone support SAML IDP (889a35bc7, Qiu Jian)   support SAML idp (3b7a1e946, Qiu Jian)  Features (28)  add NotifyError in notifyclient (cee07e786, rainzm) Add BatchSendMessage for feishu SDK (aa364a3d7, rainzm) add GetCapacityUsedMB for ICloudStorage (116d347c8, rainzm) Add method ‘Sku’ to CandidatePropertyGetter (d086161a6, rainzm) add WithCtx version to notifyclient function (8eba2c369, rainzm) add GetSchedtags for ICloudHost (0d05f9ee1, rainzm) log err when sending notification via notifyclient (2d5055c90, rainzm) inherit lang from ctx fro Task (8da2d5ff7, rainzm) Add IResultHelper (39fed764f, rainzm) notify user when failing to change config (0308ce288, rainzm) esxi: support fetchVM form datacenter (6b340264e, rainzm) esxi: add GetSchedtags implementation for esxi.SHost (857e76ab7, rainzm) esxi: correctly judge whether inet is nil (65ca3ace7, rainzm) esxicli: better vm operator (3f8f9e6c5, rainzm) notify: replace VerifiedContactTypes with VerifiedInfos in ReceiverDetails (8c6fdd110, rainzm) notify: Support trigger-verify for feishu, dingtalk and workwx (beee6e2c9, rainzm) notify: Add VerifiedNote for SSubContact (60412cf7e, rainzm) notify: break down error from UseridByMobile (90b84e995, rainzm) notify: sort the returned contact type array (f24950da9, rainzm) notify: Allow use topic to filter notification (ff52e0044, rainzm) notify: Add TNotifyChannel const of robot (7c6e053a0, rainzm) region: sync capacityUsed for storage after deploying or deleting guest (9ded6e43f, rainzm) region: change fomat ‘id’ to ‘name(id)’ in scheduledtasks' log (7b67554dc, rainzm) region: replace 虚拟机 with 主机 or 云主机 (c542249c7, rainzm) region: divide notify templates into Chinese and English versions (5a10f9dd9, rainzm) region: sync schedtags when syncing host (679ccb825, rainzm) region: sync CapacityUsed for Storage (547b2960b, rainzm) scheduler: Change the action for guests with backup and instanceGroup (fa0450b45, rainzm)  Glance (1)  check min disk size on update (00265fedd, wanyaoqi)  Guests (1)  guests with vpc nics are available for eip association (5c7ae23d8, Yousong Zhou)  Host (1)  fix rbd storage cache iso image (6a7cf0608, wanyaoqi)  Hostinfo (1)  try create network add is_on_premise (#7707) (607e3d8fd, wanyaoqi)  Hotfix (1)  vpc change owners with wire (5e721b929, Qiu Jian)  Httperrors (3)  HTTPError: use Error type (918dce80e, Yousong Zhou) add Error type (12899ab00, Yousong Zhou) use existing details if id is not present (#7711) (bde5e1b96, Yousong Zhou)  Httputils (1)  preserve format val types (4fb45676a, Yousong Zhou)  I18n (2)  add ITable (8164854fd, Yousong Zhou) move out from httperrors pkg (8dc179676, Yousong Zhou)  Iproute2 (1)  address: make Exact idempotent (05b72a9d0, Yousong Zhou)  Keystone (2)  passwords: SetModelManager (61cd611aa, Yousong Zhou) config: SetModelManager for whitelisted config (6c9e8f194, Yousong Zhou)  Lb (1)  include cluster name info in details (7add76415, Yousong Zhou)  Locales (3)  monitor: add translations (70fd9dfb7, Yousong Zhou) update translation (a54d0e592, Yousong Zhou) update translations (c4f4e7d30, Yousong Zhou)  Logclient (5)  i18n: en for const (6bff7caf9, Yousong Zhou) i18n: cn for const (27d0452fa, Yousong Zhou) convert const val to use latin chars (b1a332fec, Yousong Zhou) move ws list to separate file (bc066edc0, Yousong Zhou) separate lines (0b878134b, Yousong Zhou)  Logger (2)  actionlog: add GetI18N (3f7155c39, Yousong Zhou) actionlog: remove redundant comments (b13d0f603, Yousong Zhou)  Mcclient (1)  options: loadbalanceragents: yum as the default deploy method (24379db85, Yousong Zhou)  Monitor (4)  error fmt (572e45968, Yousong Zhou) suggestsysalert add ignore action (7aa3c9dde, Zexi Li) reduce subscription mysql usage (cdf33052c, Zexi Li) support suggest rule alert config and add snapshot_unused driver (7a9662c6f, Zexi Li)  Opslog (1)  move const to separate file (986031fc9, Yousong Zhou)  Opt (1)  scheduler: better sort for hosts when selectHost (ed4847dff, rainzm)  Optimized (2)  create eip params (becf92f6b, Qu Xuan) 支持ip和端口过滤安全组 (594f05d94, Qu Xuan)  Others (178)  fix:允许cname record通过policy多值 (9b7fbf33b, lvyangyang) aliyun public elb region fix (7a61d77b0, TangBin) bugfix commalert 3.4 (e87d2c0e8, zhaoxiangchun) bugfix:commonalert (a9c95cf36, zhaoxiangchun) aliyun public elb brand fix (540f4631f, TangBin) fix:forbid top level public domain name (fba8349e8, lvyangyang) mcclient modules: fix k8s fed rolebinding joint wrong resource manager (1a1d7c70a, Zexi Li) bugfix :esxi 多机器环境下拉取监控超时 (b88c114ba, zhaoxiangchun) aliyun create public lb fix (3ddce26aa, TangBin) fix:/dnsrecordset重复检查,dnszonevpc数量 (d94e55501, lvyangyang) increase rbd check timeout (adbe292f4, wanyaoqi) umount nfs on detach storage (61cc18010, wanyaoqi) fix:(region) correct syncSchedtags (4586c82cb, rainzm) huawei client request add throttling control (77865d894, TangBin) huawei elb get params log (454aabca7, TangBin) qcloud elb create listener fix (c6d214991, TangBin) huawei snapshot delete fix (ebee60810, TangBin) set stagefail on clean fail (7e2e7ade1, wanyaoqi) wait deleted (d90b661f7, lvyangyang) commonalert bugfix 3.4 (365e555c9, zhaoxiangchun) bugfix:esxi collect metric (a7198dc21, zhaoxiangchun) fix esxi-agent dockerfile typo (78fc35d3a, Zhang Dongliang) support mutli params (8102e7ed0, wanyaoqi) make with ARCH argument (384e86664, Zhang Dongliang) support search ip (884e82a15, wanyaoqi) regional network filter bugfix (0bba6e63f, TangBin) ctyun sync secgroup fix \u0026 cloudaccount delete fix (0acbfc89f, TangBin) common alert bugfix/3.4 (477d36f82, zhaoxiangchun) fix host deployer base image (33fb33a58, wanyaoqi) ctyun add region cn-bj1 (12bd187ec, TangBin) fix set host image cache properties (5593b88e9, wanyaoqi) fix update image status after save failed (785da09d6, wanyaoqi) host sync storage size (585ef5833, wanyaoqi) dup record process (4487867f5, lvyangyang) suggest rule modify: (9b12c675d, zhaoxiangchun) bugfix vmware monitor (2a680f99a, zhaoxiangchun) dns access (70297e313, lvyangyang) commonalet bugfix: (1a323667a, zhaoxiangchun) Add mock test for genericScheudler.Schedule (89980b626, rainzm) fix host error output (ada6c870d, wanyaoqi) isolated devices info reenterable (78f9db1ba, wanyaoqi) guest short desc add backup host id (8c4941ea7, wanyaoqi) fix get ubuntu version (d22676906, wanyaoqi) optimized cachedimages sync (7095ea8f8, Qu Xuan) pex register add optional column mac_access (24af17757, TangBin) create classic vpc fix (612ad9286, TangBin) Automated cherry pick of #7714: Feature \u0026 Fix for Notify (#7715) (eb9d794fa, Rain Zheng) update host status to unknown on host offline (20b949091, wanyaoqi) vmware disk support deploy lvm partition (43ce3b545, wanyaoqi) listfilter by alert_id (d95e64e59, zhaoxiangchun) alert record bugfix (06bd735f0, zhaoxiangchun) Automated cherry pick of #7712: httperrors: support setting lang with X-Yunion-Lang (#7713) (77a5c1ff8, Yousong Zhou) Automated cherry pick of #7692: feat(notify): Support update for notify config (#7693) (b03c8ce50, Rain Zheng) Automated cherry pick of #7661: fix(host-deployer): Exit correctly after mounting (#7672) (c914dafa7, Rain Zheng) fix host get guests (#7683) (4af4bcb96, wanyaoqi) fix get storage capacity on init' (#7687) (b85fb9829, wanyaoqi) snapshot list by guest (438c1ced5, wanyaoqi) commonalert bugfix (be5bf11eb, zhaoxiangchun) 统一监控查询面板保存 (6cea2883a, zhaoxiangchun) update host deployer base image version (53a6c40a8, wanyaoqi) baremetal colloct isolated devices info (#7658) (eee193165, wanyaoqi) fix mount fetcher fs (#7657) (8e83ab476, wanyaoqi) remove backup metadata on delete backup (#7654) (b97764133, wanyaoqi) eip \u0026 vpc manager match fix (132c58379, TangBin) fix build baremetal agent image (#7647) (557240155, wanyaoqi) metric describe 接口 (#7381) (dd8a07f36, zhaoxiangchun) fix github action workflow (#7635) (c1cf72899, wanyaoqi) separate guest doamin and dns (#7621) (61214f2e2, wanyaoqi) fix gpfs check mountpoint (#7623) (2904364de, wanyaoqi) Refactor for Notify (#7611) (853153c73, Rain Zheng) docker build support buildx and arm architecture (6b944626b, wanyaoqi) Feature/yousong text (#7487) (c2bca8ab3, Yousong Zhou) feature:host image fetcher fs (#7606) (a4b27a3cf, wanyaoqi) fix:wrap params (#7605) (46683b210, lvyangyang) alter table guestcdrom_tbl modify column size bigint (#7593) (dcf8183c3, wanyaoqi) only notify watched resource (#7592) (86253534d, Zexi Li) Bugfix/yousong vpc ext (#7585) (6dc007425, Yousong Zhou) Bugfix/yousong hostman routes (#7563) (e01f0ce2a, Yousong Zhou) fix usage not set prefix (#7568) (29c0e5384, wanyaoqi) support diable usb kbd (df9e47cbf, wanyaoqi) fix usage get storage capbility (#7527) (aa483edeb, wanyaoqi) fix mount xfs (cdaff2126, wanyaoqi) usage report reserved memory (#7525) (54ff56c04, wanyaoqi) set disk status on disk detached (#7517) (cad24ac69, wanyaoqi) nodealert bugfix： (#7512) (b63d9b55d, zhaoxiangchun) modify telegraf reporting tag (#7489) (22cd20c3f, zhaoxiangchun) add image upload\u0026 s3 upload api (#7514) (280039ab3, tb365) Hotfix/qj password login wrong idp (#7511) (b0505ba5f, Jian Qiu) fix host info get sshkey (#7484) (716f647f7, wanyaoqi) fix reauth condition on influxdb not found (#7456) (a962db0e9, wanyaoqi) fix cache non lvm disks (#7459) (2cdfed2ca, wanyaoqi) aws elb listener\u0026rule name too long fix (ff4840b46, tangbin) fix redis reset account password action log (e59e40d3b, tangbin) loadblancer listener modify name fix (bd3d581f4, tangbin) fix deploy admin auth key (9bc1cfe6f, wanyaoqi) Feature/yousong lblis names (#7395) (d95584b11, Yousong Zhou) fix host register info (#7401) (ae0bd556c, wanyaoqi) fix panic on storage failed get host (#7390) (d6fdf3361, wanyaoqi) make rpc handle exportable (#7367) (9acc8c629, tb365) adjust schedule resource condition width (59e4f7d61, Zexi Li) Add more tips for make image cmd (51cb278ae, Shaohui Liu) fix schedtag list output (051205066, wanyaoqi) Add metadata for GuestTempalte details (49e4e31da, rainzm) Add network info when list scalingGroup details (45a3e0805, rainzm) 修改报警消息模版： (5e0cb9319, zhaoxiangchun) go fmt (1583da57f, tangbin) go fmt (d45ee2c0e, tangbin) host upload template check (e660e25be, tangbin) huawei fetch regions\u0026projects fix (0f2453189, tangbin) 修复统一报警bug (921472455, zhaoxiangchun) rename vgname centos (399488991, wanyaoqi) fix clone clean pending usage (31c0d5a42, wanyaoqi) capabilites add available host count (64935a465, wanyaoqi) fix snapshot clean pending usage (cd5d31763, wanyaoqi) Remove sudo before the docker cmd (96bb34ea0, Shaohui Liu)   add precheck for perform action (a677f2435, wanyaoqi)   format fix (d10e15ed9, tangbin) fix empty else (d5591001c, tangbin) fix host import (3ff402f4b, tangbin) fix huawei delete resource (94bb91716, tangbin) fix huawei elb disable healthcheck (7fcc85f85, tangbin) lb sync project fix (6d9a55638, tangbin) add more log (edc10b14d, tangbin) apigateway host imports data validate (cea012162, tangbin) update vendor (5d4efcc63, Qiu Jian) fix GetOrCreateVpcForClassicNetwork (a755d0d37, tangbin) 修复监控报警规则删除的问题 (bd80fa889, zhaoxiangchun) fix error output (7f8be7d4b, wanyaoqi) huawei eip delete fix (081a3eabd, tangbin) acl delete condition fix (a74853db7, tangbin) fix server sync status (41fcf38cf, wanyaoqi) sync classic redis fix (b9a45c8bb, tangbin) add params auto_migrate_on_host_down (a39b0c87e, wanyaoqi) misc ha guest fix (3e759a3a4, wanyaoqi) fix list guests on host (f4ee70c0b, wanyaoqi) cloudprovider usable filter with zone (22d000e73, tangbin) disable procutils print error info (66064a4c4, wanyaoqi) fix guest template health check (014540e4d, rainzm) fix:修复路由表映射到public网络的问题 (2d12d7898, lvyangyang) user batch register bugfix (c1e49d02c, tangbin) 新增优化建议： (7cd1f1de5, zhaoxiangchun) fix format (f24fd4aa1, bistuzx@163.com) add cost alert modules (f5a2215a9, bistuzx@163.com) vendor update: update jsonutils (2028dbabb, wanyaoqi)   fix local storage init local man (e2043d6bc, wanyaoqi)   misc fix (04dfa4879, wanyaoqi) add:region/esxi 迁移接口 (c75b63eb7, lvyangyang) fix set storage info bind mount (e2ad0101e, wanyaoqi) update vendor (47bb16e51, tangbin) Update docker image onecloud-base and its references (81784aea3, rainzm) suggestAlert cost:modify the request param to meter (a0dc33266, zhaoxiangchun) 增加influxdb的tag 的一些filter (98d2e489e, zhaoxiangchun) update vendor (00d7ce83e, Qiu Jian) remove obsolete codes from apigateway (27b3fb5d5, Qiu Jian) itsm climc (36408ab4a, zhaoxiangchun) add mcclient cloudaccount gcp\u0026huawei bucket (6e9718d4e, bistuzx@163.com) Update Dockerfile.ansibleserver (f909a1d2c, rainzm) 优化建议中增加费用统计接口 (2fde31764, zhaoxiangchun) update vendor (182c96a16, Qiu Jian) add meter modules amount_estimation\u0026daily_bill (70c07d4a8, 张旭) bind mount nfs storage path (322117f6d, wanyaoqi) cluster_d required-\u003eoptional (63babfed8, tangbin) fix the bug introduced in #6643 (17721c4d5, rainzm) update jsonutils (ae3827f9a, rainzm) copyright api update (60c8c25c0, tangbin) fix deploy backup server order (1d59ceb5d, wanyaoqi) keep input mem and cpu on create from instance snapshot (dae606d28, wanyaoqi) .travis.yml: use go1.14 (8e9c58799, Yousong Zhou) .github: workflows: use go1.14 (1152c3c24, Yousong Zhou) .github: bump backport hint to release/3.2 (2463396ef, Yousong Zhou)   add server pending deleted for host details (38a05c490, wanyaoqi)   include system usage (fabd3577a, wanyaoqi) server name enable upper case (75588d00a, wanyaoqi) report host stat (4e6512040, wanyaoqi) disable dhclient (c4d5da440, wanyaoqi) add known sp metadata xml (c30262241, Qiu Jian) fix get storage capabilities with null field (854bf59f8, wanyaoqi) sp support (3b32f0a4d, Qiu Jian)  README (1)  update architecture picture (bb540ff10, Zexi Li)  Region (13)  host specs replace space char to ‘_’ (3b0ba2caa, Zexi Li) fix query object by spec not include details (a05f50dbf, Zexi Li) fix schedtag joint resource master/slave field wrong order (1b6ac9bc4, Zexi Li) fix network schedtag not cleanup when network deleted (1d7ffc704, Zexi Li) validate network auto alloc update data (#7559) (95130f8ef, Zexi Li) schedtag list support resource_types (48d982b39, Zexi Li) lbagents: skip tls check for default influxdb endpoint url (e5dd2409d, Yousong Zhou) lbagents: default vrrp vrid, priority (495a2d995, Yousong Zhou) lbagents: use local params var (4596f3f11, Yousong Zhou) lbagents: set some vrrp params to values of peers (746cb8679, Yousong Zhou) lbagents: make vrrp interface default to eth0 (b0c39bfad, Yousong Zhou) lbagents: turn off guest src check (afac0604d, Yousong Zhou) loadbalanceragents: yum as the default method (7926e59d7, Yousong Zhou)  Scheduler (5)  fix fillter isolated device (8e0f47aa0, wanyaoqi) ignore network type when specified (a1c7a291d, Zexi Li) refactor network predicate (#7553) (7a08a60db, Zexi Li) fix network auto alloc logic (6f2ddbd3a, Zexi Li) fix storage filter duplicate error message (0957fee3d, Zexi Li)  Specs (1)  fix specKey url not escape (a4d7b2b4b, Zexi Li)  Treewide (3)  avoid variable fmt str (822fae009, Yousong Zhou) fmt error (23b9991a7, Yousong Zhou) DeleteFailReason as an object with translated details (f1995a46d, Yousong Zhou)  Vendor (1)  update yunion.io/x/sqlchemy (4e16eaf21, Yousong Zhou)  Vpcagent (4)  guard against foul eip records (f0faf07b6, Yousong Zhou) respect guest src check settings (#7678) (19ba4b975, Yousong Zhou) ignore network without wire ids (#7629) (500e2edad, Yousong Zhou) ClaimVpcGuestDnsRecords: guard against pending_deleted guests (20f36afdc, Yousong Zhou)  Webconsole (2)  fix defer order to release zombie process (fa2d8723a, wanyaoqi) fix old session make new session closed (642d69427, Zexi Li)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n41 commits to cloudpods-operator - v3.4.0 since this release.\nBug Fixes (3)  apigateway totp should default on (d14c152, Qiu Jian) member policy requires member role (323b403, Qiu Jian) check before doing perform_public for roles and policies (3ea8576, Qiu Jian)  Feature (1)  add cloudid service (4066231, Qu Xuan)  Notify (1)  remove pvc dependence (f1e64f3, wanyaoqi)  Others (33)  pod affinity by storage class (0a85313, wanyaoqi) BusyBox upgrade ,modify cloudmon timeout arg (724b1ec, zhaoxiangchun) host image spec fix (1ab0562, wanyaoqi) add flag check is failed etcd pods need delete (965c589, wanyaoqi) push 镜像后,拉回本地 (2ad7c37, Zhang Dongliang) buildx for onecloud-operator (d81484e, Zhang Dongliang)   etcd clean failed state pods (b244a1e, wanyaoqi)   deployment with pvc not set node affinity (#256) (eddc03d, Zexi Li) replace cloud affinity preferred by required (#253) (9cf0d16, wanyaoqi) remove api/v1 from notify endpoint url (#252) (7b21b4b, Rain Zheng) etcd add cloud affinity (cb35295, wanyaoqi) statusfulset set cloud affinity: (ce4e78a, wanyaoqi) update host image default spec (3bedb0b, wanyaoqi) crontab timeout (0398ed0, zhaoxiangchun) fix baremetal storage size (d2f57ec, wanyaoqi) Add workwx and workwx-robot for notify (#240) (e6ee55d, Rain Zheng) cloudmon deployment increate cloudaccount monitor config: (#241) (699ec4a, zhaoxiangchun) itsm 开启https (#242) (0e9f304, zhaoxiangchun) remove etcd-operator dependcies (#235) (8c022f3, Zexi Li) 调整统一监控 系统报警规则的注入配置 (752e28c, zhaoxiangchun) fix etcd member count (500ddc5, wanyaoqi) recreate pods on pvc not local path (64cc832, wanyaoqi) 修复系统报警规则重复创建的问题 (32e05ea, zhaoxiangchun) fix set pvc name (ddf338e, wanyaoqi) fix glance pvc name (41d9deb, wanyaoqi) update vendor (e6922a7, Zexi Li) cloudmon deployment increase [rds redis oss] monitor information collectiona (b9c27f2, zhaoxiangchun) add check if cronjob exist (51ce335, wanyaoqi) service etcd client disable unready client (0b90038, wanyaoqi) host image component set default toleration (b1083b9, wanyaoqi) cloudmon as deployment (3a8ddec, wanyaoqi) check etcd dbsize, do compact and defrag (e18c1a3, wanyaoqi) system alert init info create in operator (23add7b, zhaoxiangchun)  Web (1)  add dashboard overview (#243) (b99abd0, Zexi Li)  Yunionagent (2)  remove onecloud keyword (aba6c28, Zexi Li) update content (29b149c, Zexi Li)   cloudpods-service-operator Repo: https://github.com/yunionio/cloudpods-service-operator\n13 commits to cloudpods-service-operator - v3.4.0 since this release.\nBug Fixes (4)  retry after a while when dealErr (89dbcc9, rainzm) the error judgment in dealErr (7695a89, rainzm) vmPendingAfter’s unit should be second (00fb031, rainzm) Update status and return when resource is invalid (5d604ab, rainzm)  Code Refactoring (1)  Abstract the same logic and abstract interface (afb74a5, rainzm)  Features (1)  add manager-pro section in Makefile (4a5e4ba, rainzm)  Others (7)  docker buildx for onecloud-service-operator (32b22c2, Zhang Dongliang) fix the usage of vmPendingAfter (f6d2d87, rainzm) remove regionid for endpoint (678a87d, rainzm) Build failed for some small bugs by following the README.md (987363c, Shaohui Liu) Add Endpoint document (d5cb366, rainzm) Add CRD Endpoint (077a994, rainzm) support yaml string (cbd3a0a, rainzm)   notify-plugins Repo: https://github.com/yunionio/notify-plugins\n25 commits to notify-plugins - v3.4.0 since this release.\nBug Fixes (4)  common: correct error judgment in BatchSend (4c76dd8, rainzm) dingtalk: return correct value in getUseridByMobile (4241c3d, rainzm) robot: Correct err value of ValidateConfig (5e2b642, rainzm) workwx: Incorrect variable use for ok (05eabba, rainzm)  Features (5)  break down error from UserIdByMobile (a9ff6b9, rainzm) Support workwx (52b50d2, rainzm) notify: Add BatchSend for websocket (0eaa49a, rainzm) notify: Add common function to batch send (63924dc, rainzm) robot: Add BatchSend (b70b205, rainzm)  Others (15)  buildx for notifyplugins (e6a246b, Zhang Dongliang) makefile 去掉 sudo; make all bins (65d52fe, Zhang Dongliang) docker buildx for notify plugins (8f5747f, Zhang Dongliang) update vendor (8df6b86, rainzm) change email const name (0531db3, rainzm) fix batch send of workwx (cab236d, rainzm) update vendor (c3b8d64, rainzm) Support batch send for eamil and smsaliyun (8ff79b6, rainzm) Support sending a batch of workwx messages (d33068e, rainzm) Support markdown when sending single user dingtalk message (6bec1bd, rainzm) Update vendor (ec2bfad, rainzm) Support batch send (80397bb, rainzm) change ‘corp_secret’ to ‘secret’ (6801a1e, rainzm) remove default config file (061987a, rainzm) Add workwx-robot for webhook (c09687f, rainzm)  Test (1)  update vendor for go-workwx (62b2a41, rainzm)   ocadm Repo: https://github.com/yunionio/ocadm\n17 commits to ocadm - v3.4.0 since this release.\nAutoupdate (1)  clear host tag (611c2c4, Zexi Li)  Others (16)  clean info from from autoupdate component when update (48d9fe4, Zexi Li) 更新 3.4 的 makefile 版本变量 (80c6081, Zhang Dongliang) make mod (f4f0696, wanyaoqi) meter baremetalagent esxiagent use longhorn (6c6379e, wanyaoqi) update vendor for v3.2: (e3fa33e, Zexi Li) update onecloud-operator vendor (752e2d2, Zexi Li) ocadm create cluster, 延时等待容错 (2441304, Zhang Dongliang) 高可用部署主备选取应将kube-apiserver是否工作考虑进去 (d8f027f, Zhang Dongliang) fix longhron template (b6afd3b, wanyaoqi) 修复 keepalived master state bug (fa22d63, Zhang Dongliang) longhorn deploy misc fix (c9ef80b, wanyaoqi) update vendor (c9f7d19, Zexi Li) update vendor for master (657f5e9, Zhang Dongliang) fix create region zone where upgrade from v2 (284f65a, wanyaoqi) ocadm 接入 keepalived，支持高可用 (a8b6713, Zhang Dongliang) update DefaultCalicoVersion to 3.12.1 (6c1fc6d, Zhang Dongliang)   sdnagent Repo: https://github.com/yunionio/sdnagent\n13 commits to sdnagent - v3.4.0 since this release.\nAgent (1)  ovn: no error log if the mapped bridge does not exist (a9ce756, Yousong Zhou)  Build (7)  eipgw: vrrp track script as monitor (32941bd, Yousong Zhou) systemd: add keepalived reload command (271c0e2, Yousong Zhou) eipgw: use 8 byte char for auth_pass (7936112, Yousong Zhou) eipgw: let keepalived use detail log (6331131, Yousong Zhou) add ansible playbook README (ec48e2d, Yousong Zhou) bump to alpine-build:1.0-2 (9cffe97, Yousong Zhou) separate artifact and docker image build (29e2d68, Yousong Zhou)  Others (2)  pull image for buildx (cc574b6, Zhang Dongliang) docker buildx for sdnagent (c86cc8a, Zhang Dongliang)  Sdnagent (1)  be cooperative (d73fbef, Yousong Zhou)  Vendor (2)  bump yunion.io/x/onecloud to current tip of release/3.3 (b599b01, Yousong Zhou) bump 3.3 (#105) (6e67604, Yousong Zhou)  ","excerpt":"Release time: 2020-09-30 16:43:35\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.4/3-4-0/","title":"v3.4.0"},{"body":"发布时间 2020-09-30 16:43:35\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n607 commits to cloudpods - v3.4.0 since this release.\nAdd (3)  openstack loadbalancer (#7497) (eb56fcf7b, lvyangyang) region/sync openstack routetables (eac0a797b, lvyangyang) region/openstack 迁移接入 (41a4188bb, lvyangyang)  Ansibleserver (1)  register metadata manager (1ae8c9786, Yousong Zhou)  Appsrv (1)  quash low-value debug log lines (7a3f24145, Yousong Zhou)  Baremetal (2)  fix hpssactl split last LV size out of limit (#7426) (b1603153e, Zexi Li) set zone when enable netif (c27433103, Zexi Li)  Bug Fixes (279)  允许域管理员可以看到共享的dns zone cache列表 (02bcce195, Qu Xuan) emulated wire not sync vpc shared info (5c4423bcb, Qiu Jian) oidc response user’s info (8cdab93c1, Qiu Jian) revert filter-by-owner changes of scoped resource (8a28d2627, Qiu Jian) allow domain admin view shared dns zone records (b0e1d0de2, Qu Xuan) avoid sync dns zone cache status is init (f931deb41, Qu Xuan) filter storages by host schedtag (11ea89795, Qiu Jian) 避免azure同步项目失败 (1021bf151, Qu Xuan) suffix template cache key (ad2248311, rainzm) filter cloudprovider/network by host-schedtag-id (82c0dcfb3, Qiu Jian) dns zone cache owner info (da8529a00, Qu Xuan) allow create disk prefer manager (73aee1147, Qu Xuan) simplify forbidden user login message (91f098430, Qiu Jian) 支持同步project标签到本地资源 (4794b1606, Qu Xuan) avoid purge storages (f5cf093e0, Qu Xuan) openstack zone not emulated (3903af786, ioito) allow cross doamin resource sync (91cac5c21, ioito) avoid account delete failed (5f50314df, ioito) sql err (310baa266, ioito) avoid compare err with cloudprovider.ErrNotFound direct (5f2c771f7, ioito) dns 错误信息补全 (8d28bfc6d, lvyangyang) google资源名称兼容处理 (26a3df33b, Qu Xuan) avoid serial vm creation (b5088230b, ioito) 仅在可用区故障时可强制挂载磁盘 (4038bfb8a, ioito) scope resource filter by owner (975e7fb1e, Qiu Jian) use i18n.Table to handle Chinese-English conversion (1c786a034, rainzm) keystone project resource count not accurate (95bde0a14, Qiu Jian) sort quota list result by usage rate (f3fa6f82b, Qiu Jian) disable domain sharing if non_default_domain_projects turned off (e796437a3, Qiu Jian) Error occurs when suitableWire exists or all suitableNetwork exist. (5f1cd20aa, rainzm) avoid account delete failed (c38cb271f, ioito) error 值重叠 (9a04238b7, lvyangyang) 避免同步不到其他域的云账号 (0a87b3101, Qu Xuan) role assignment filter by users not working for effective users in groups (b32eddce0, Qiu Jian) 避免腾讯云同步虚拟机ip异常 (f659ccd0d, ioito) apigateway userinfo includes project metadata (5b6b5eeb7, Qiu Jian) 避免添加新账号后长时间未同步iam用户 (b3c235fe3, ioito) 优化提取显示主账号名 (686df64ea, ioito) avoid not reture cloudprovider.ErrNotFound error (bb3317cc3, Qu Xuan) scheduler token not support policy (e444ab7a1, Qiu Jian) reset user password without check (5f35bba0d, Qiu Jian) get jnlp xml from dell idrac6,7,9 (760ac9900, Qiu Jian) reduce totp verification overhead (49cf94abb, Qiu Jian) add esxicli vmrc/webmks command (5f9088d24, Qiu Jian) disable qcloud verifyAppId temporarily (7601ca437, Qiu Jian) keystone initialize data skip nil extra fields (967d46bbf, Qiu Jian) omit empty fail reason (a475a7b41, Qiu Jian) enable generate name caused compability issue (0d798412e, Qiu Jian) 避免名称重复 (a1ba06a92, Qu Xuan) bucket object cnt fix (cc5e0cd7c, Qu Xuan) lock/unlock cleanup (ada735246, Qiu Jian) 支持自动根据云上项目修改本地项目名称 (5c71349fe, Qu Xuan) 修复权限组权限同步异常问题 (24cbdf673, Qu Xuan) cos use proxy (0a5ee4ca6, Qu Xuan) check host sharing status when considering whether a host is assignable (6b5339900, Qiu Jian) disable webkms for esxi older than 6.5 (7cf5ad913, Qiu Jian) 默认不自动合并安全组 (ce777855a, Qu Xuan) avoid sync natgateway eip panic (960742029, Qu Xuan) 优化sku同步逻辑 (ea518358c, Qu Xuan) add dns recordset dns value check (2e93ee3d6, Qu Xuan) 平滑迁移数据 (d6d490af6, Qu Xuan) 腾讯云不支持同时设置秘钥和密码,若设置秘钥，则将密码置空 (5576819f0, Qu Xuan) optimized qcloud keypair (dc20313ef, Qu Xuan) 修复cloudid问题 (642af06ba, Qu Xuan) optimzed clouduser password (aa26c6ec9, Qu Xuan) 避免未本地缓存usercache (835261e9e, Qu Xuan) capability for cloudid (0b4a562f0, Qu Xuan) optimzed clouduser (9281c5429, Qu Xuan) avoid create public zone failed (2ad1a4afe, Qu Xuan) recode project-role rpc handle to support group role assignment results by user or project (0268d9585, Qiu Jian) uniform cachedimage active status (025eca548, Qu Xuan) wire usage stats incorrect (621c2796d, Qiu Jian) ignore 409 error when doing redfish power on (d10adf22d, Qiu Jian) validate candiate ip for sync-fix-nics (f739c8ff0, Qiu Jian) Override Master and Slave for scalinggroup_guest (ba2b1d9bd, rainzm) manager_id资源隔离获取 (9bb4eb5d4, Qu Xuan) prevent users in disabled idp from login (e758c4aa9, Qiu Jian) check assign-host previliges (623c71b14, Qiu Jian) sync groups for user (4cd73c16c, Qu Xuan) aliyun wulanchabu region (0a79d1d23, Qu Xuan) 取消aliyun lb scheduler创建限制 (933dddd8a, Qu Xuan) 修复cloudid同步问题 (88e5119fd, Qu Xuan) user idps attributes includes template name (bfa4ce38e, Qiu Jian) skup syncing lb, rds, redis instances in tasks (c5c2b4b69, Qiu Jian) network address list respect privilige of user (29edf8329, Qiu Jian) cloudid optimized (390d6f07e, Qu Xuan) valid update name and update dns recordset (b4252c7c2, Qu Xuan) scheduler aware policy (485388394, Qiu Jian) support VirtualDiskRawDiskMappingVer1BackingInfo (0619da6f1, Qiu Jian) find correct esxi host access ip (29a3db9ff, Qiu Jian) remove redundant auth cookie in sso login (c50497090, Qiu Jian) 公有云子账号加域属性 (02bf5b76d, Qu Xuan) 优化安全组list速度，并发挥rule规则信息 (8279f62c9, Qu Xuan) clouduser can_delete always be false (91a5e4ab7, Qu Xuan) 同步不需要判断账号是否有iam权限 (2c17e6e66, Qu Xuan) optimzed sync (5cc25ae10, Qu Xuan) optimized cloudid (cfd76b23a, Qu Xuan) search by chs projectname or domainname (976dbd779, Qiu Jian) 避免slave zoneid异常 (cac7dc529, Qu Xuan) compatiblity fixes with lenovo RD620 and huawei 2288 (949e2ebed, Qiu Jian) avoid nil panic (03456eaaa, Qu Xuan) avoid policy value not save (d03fddcd7, Qu Xuan) climc params (893085a2c, Qu Xuan) add details for account delete (#7703) (800dd26c6, 屈轩) vmware esxi host detects vnic portgroup info (#7660) (836151eee, Jian Qiu) apigateway user info add is_local attribtue (#7695) (0566e1dec, Jian Qiu) server purge may fail (#7698) (cca226738, Jian Qiu) http error limit request body length fix: http error limit request body length (#7700) (538bc873a, Jian Qiu) 不限制openstack系统盘类型 (#7675) (9812864bc, 屈轩) cleanup logic for nics of pending_deleted guests (#7669) (5647a6842, Jian Qiu) avoid delete aws iam user failed (6ed3a4833, Qu Xuan) aovid truncated data (#7644) (3243e5a03, 屈轩) add keystone sync user debug info (#7639) (e3fe66e8e, Jian Qiu) turn off some default project policies (#7637) (de80f1705, Jian Qiu) avoid openstack image-list failed (#7641) (aef249ea8, 屈轩) project role rpc returns policies info (#7632) (5b2b40d6c, Jian Qiu) add keystone sync user debug info (ccf55963a, Qiu Jian) make old notify send SDK compatible (#7628) (707051ec0, Rain Zheng) avoid network-list –zone not work (#7619) (4593c1fb9, 屈轩) ignore invalid zone sku for rds sku sync (#7617) (ca2e8bece, 屈轩) oauth2 not support default_project_id and default_role_id (#7622) (fea4a6b07, Jian Qiu) idp deletel logic cleanup (#7616) (852a3bb13, Jian Qiu) hide locked cloud policy by default (#7614) (7c3fa87ed, Jian Qiu) GetDefaultClient always return a new http client instance (3762df808, Qiu Jian) avoid change user name for google (#7613) (c1a6b2db9, 屈轩) limit the length of error message when do idp redirect (#7612) (a94f32ed5, Jian Qiu) avoid storage=nil, dis can not delete (#7608) (4555b00c3, 屈轩) apigateway option to turn off login domain list (fe0182333, Qiu Jian) optimized for cloudid (#7604) (5b898bbf6, 屈轩) opslog filter by owner_project_ids and owner_domain_ids (#7600) (777059648, Jian Qiu)   remove Azure OIDC extra user scope 2. yunionauth cookie missing (#7599) (7bab39daf, Jian Qiu)   member user only can get user \u0026 domain resource (#7597) (a23a94714, 屈轩) option for metadata path (#7595) (e70fe59bc, 屈轩) 修复cloudid用户同步及权限同步 (8a78c54dc, Qu Xuan) dns record create ignore is_public field (016b65a4b, Qiu Jian) 支持自定义权限 (#7565) (d5524d1ea, 屈轩) GetIImages correctly without ‘image_cache’ dir (#7575) (0ab75b52d, Rain Zheng) allow delete shared role and policy (4a0439da8, Qiu Jian) aovid duplicate sku name (#7572) (196d3b360, 屈轩) cloud poilcy count (d2b9ba5bc, Qu Xuan) json TAG_PREFIX invalid syntax (#7564) (6a57435f1, Zexi Li) avoid virtual resource project id is empty when cloudaccount with no project (#7560) (7cd419f78, 屈轩) Merge the host network correctly when preparenet (#7557) (098b4e5b5, Rain Zheng) network port count stat recode (#7554) (b89845584, Jian Qiu) user with sso idp fail to login with password (#7552) (320d7cabc, Jian Qiu) oidc auth callback url not complete (#7545) (a02611db1, Jian Qiu) recode user project role list to include group info (#7544) (59c026f0d, Jian Qiu) change publicNetworkCount to autoAllocNetworkCount in Capability (#7546) (e1bd01162, Jian Qiu) separete enabled and status field (5b31ca8da, Qu Xuan) update vendor (#7526) (c277d492f, Jian Qiu) optimized huawei security group get and create operation (#7520) (930ca23ea, 屈轩) compatible for macOS (a6bff9498, Qu Xuan) 修复安全组合并导致重复计算虚拟机绑定安全组数量\u0026优化安全组操作 (#7496) (f343b071f, 屈轩) avoid nil pointer (#7508) (4696a3e47, 屈轩) password authentication may choose wrong idp backend (#7513) (c98e72e6e, Jian Qiu) preserve state while doing sso redirect (60eec6440, Qiu Jian) 提高zstack认证兼容性 (0850bd516, Qu Xuan) 隐藏auzre经典类型存储 (629a4e93d, Qu Xuan) 增加openstack兼容性 (#7492) (327b60baf, 屈轩) do not search response key if empty json returned (#7495) (c63230f37, Jian Qiu) idp validate config not complete (#7488) (19b69de1d, Jian Qiu) support AzureAD oidc in china area (12bbbc541, Qiu Jian) capabilities get auto alloc network count (#7483) (d4a93f0dc, Jian Qiu) unlink-user illegal mix of collations (#7482) (0a580b3c9, Jian Qiu) filter public network count by zone and region (#7477) (04eaf3de6, Jian Qiu) typo running_geusts =\u003e running_guests (eae229b35, Qiu Jian) typo (9da8095f8, Qu Xuan) ignore bucket-set-acl not implemented error (#7470) (1929076fa, Jian Qiu) avoid host globalid change (#7465) (a51f0271e, 屈轩) avoid generated codes having duplicate PerformSetScope methods (9bdf2c75e, Qiu Jian) 避免azure同步资源组异常 (be51f3b49, Qu Xuan) sync share mode between vpc and wire (9ea80725a, Qiu Jian) upgrade aliyun sdk (#7432) (27168fc72, 屈轩) 避免glance metadata-list project scope无权限 (#7402) (1244c170b, 屈轩) 优化openstack项目认证 (#7397) (fd2f1c0e3, 屈轩) 避免在仅调整虚拟机磁盘时opslog日志记录mem cpu异常 (#7392) (0cad2efd2, 屈轩) avoid lost backend params (846f90d54, Qu Xuan) openstack win image user data need encode (781618023, Qu Xuan) avoid account sync deadlock (509ebb92c, Qu Xuan) ignore general s3 set acl not implemented error (7f829f24f, Qiu Jian) cloud account sync may block (1985aab89, Qiu Jian) openstack多项目问题 (859ab9717, Qu Xuan) avoid parse json err nil pointer (598e8a924, Qu Xuan) avoid nil pointer (6477e0e14, Qu Xuan) adjust API input field names according to spec (#7382) (f0f406c24, Jian Qiu) use json to store task error message (#7351) (ba292dfed, Jian Qiu) 添加阿里云rds备份恢复限制条件 (#7378) (3df146ff6, 屈轩) change owner should check required domain list (#7375) (984bfeb6e, Jian Qiu) 普通视图下，安全组仅统计可看到的vm count (#7358) (76f78cdda, 屈轩) 同步sku与磁盘类型关系 (#7368) (d8f046365, 屈轩) 避免创建rds备份时对rds进行一些操作 (#7354) (78a68bffd, 屈轩) 修复vm绑定重复安全组 (8c31bba0a, Qu Xuan) add default perform allow policy to sysadmin (757706db9, Qiu Jian) cleanup auth error message return by apigateway (f1bfcfbd9, Qiu Jian) 避免status_code\u003e=400并且resp为空时err为nil (#7264) (a67f3e548, 屈轩) cloud account delete may fail due to inconsistent status (9f8f2b6c4, Qiu Jian) do accessibility check when dissociate eip from resource (845195440, Qiu Jian) modify list details for guesttemplate (34e66ab2e, rainzm) schedtag should be system resource (8f1b93472, Qiu Jian) choose candidate list from the list returned from backend (35da086cc, Qiu Jian) 单独添加更新账单文件日志 (c6df1944c, Qu Xuan) 支持多项目安全组规则过滤 (b20cd1364, Qu Xuan) domain resource domain share to system when non_default_domain_projects off (8d8acab90, Qiu Jian) update auto generate model api (208b69573, Qiu Jian) 避免未能导出共享安全组规则 (9a329453a, Qu Xuan) image upload not clean pending usage (587f533da, Qiu Jian) quota usage not updated after disk resizing (ce3d0906b, Qiu Jian) google rds regional and zonal (718e36b32, Qu Xuan) rds备份恢复优化 (8d85f04d8, Qu Xuan) default vpc must be shared globally (d3741d9a4, rainzm) globalvpc跟随云账号共享 (3bf9b5b0d, Qu Xuan) 过滤可用eip (ecaa1ad45, Qu Xuan) 避免乌兰察布区域拉取资源异常 (8bd23cf3d, Qu Xuan) prefetch image error when create guest with vmware template (2f1093a14, rainzm) not work for network-list –zones (bf65a8816, Qu Xuan) sec rule export missing fields (3ddcaad3c, Qu Xuan) check azure image format when rebuild root (466a3f728, Qu Xuan) 避免华为云安全组规则删除失败 (cc948a4d5, Qu Xuan) clouduser’s cloudgroups info (769dcae0e, Qu Xuan) 添加secgroup rule过滤参数 (6b591b455, Qu Xuan) 修复cloudid get权限问题 (34aa55114, Qu Xuan) azure 支持权限 (4cd67270a, Qu Xuan) 修复cloudid用户列表权限问题 (dccf685f6, Qu Xuan) 优化webconsole代码\u0026bugfix (dee1283c0, Qu Xuan) 修复阿里云同步安全组规则异常问题 (367c59117, Qu Xuan) 优化减少对etcd组件依赖 (9003d3702, Qu Xuan) mo.VirtualMachine’s Config maybe nil (b6753af32, rainzm) 优化azure订阅创建 (3d9e8b872, Qu Xuan) 支持azure创建订阅 (16f93d665, Qu Xuan) 避免google clouduser同步权限异常 (169b13f16, Qu Xuan) 修复vpc同步异常问题 (d7e16e334, Qu Xuan) 避免越界访问 (45f5bc526, Qu Xuan) opslog show the owners operation logs only (d59bff336, Qiu Jian) remove default allow policy for storages (6af7c5923, Qiu Jian) cloudid 权限修复 (dc32fe42e, Qu Xuan) cloudid 异常修复 (4b0bfa734, Qu Xuan) 修复资源组云上同步异常问题 (b41eea1d8, Qu Xuan) 修复qcloud同步权限组异常问题 (bfc414530, Qu Xuan) 修复azure 项目同步问题 (cb1ad2cf0, Qu Xuan) 避免请求中国区iam异常 (c82f307e4, Qu Xuan) 修复腾讯云操作日志时间异常问题 (9507a7209, Qu Xuan) 修复elastic cache sku zone_id异常问题 (862b926aa, Qu Xuan) 分开统计安全组关联虚拟机数量 (3db15d59f, Qu Xuan) json request 支持自定义匹配err (5e50740b3, Qu Xuan) orderedstring add performance improvements (f0c3b9627, Qiu Jian) perform private on vpc will private all wires if no networks in wires (0005cf868, Qiu Jian) remove default host list policy (87dc4743d, Qiu Jian) init wire domain_id for local vpc (#7566) (cedfd6410, Jian Qiu) 避免cloudprovider同步缺失 (067b0ab76, Qu Xuan) 修正项目映射同步 (4b16fac0b, Qu Xuan) compute: return InputParameterError while ValidateCreateData (c050629ba, rainzm) esxi: return when host.Vm is empty (6bfca36cb, rainzm) esxi: Select correct unitNumber for ide control when creating disk (5975887d5, Rain Zheng) esxi: fetch templatevm from datacenter before clone vm (ac69f8a59, rainzm) esxi: Guarantee the uniqueness of the schedtag for esxi host (5460f2244, rainzm) esxiagent: add HostDelayTaskWorkerCount (4e7e8a59d, rainzm) esxiagent: return image extid not id (3ef91f92e, rainzm) notify: return correct value when sortContactType (d917e8e38, rainzm) notify: Replace String() with GetString() (8524fda7f, rainzm) notify: Set default priority ‘normal’ when creating notification (851b2d4bb, rainzm) notify: break down permissions of notifyconfigs (72276d038, rainzm) notify: Mark verified not enabled in MarkContactTypeVerified (ab02e166e, rainzm) notify: Allow user list receivers (82b7e659a, rainzm) notify: use AfterSend for contact with succuessful sending (9e1a7c5e1, rainzm) notify: clean verifyNote when mark verified (09bebcf5f, rainzm) notify: pull contact for workwx, dingtalk and feishu (dba92d4b0, rainzm) notify: modify name of notification to avoid duplication (043fdcfec, rainzm) notify: allow normal user create their receiver (aecf97780, rainzm) region: add RequestSyncstatusOnHost for SESXiGuestDriver (55b2b2900, rainzm) region: add GetSlaveFieldName for ScalingGroupGuest (35842df1b, rainzm) region: set ownerId as userCred when can’t FetchOwnerId (1215d723a, rainzm) region: Don’t allow address conflicts under vpc (47b9b91b8, rainzm) region: zone from guesttemplate’s preferzone maybe nil (#7387) (0deb908ac, Rain Zheng) region: split brand as ‘YunionCloud’ and ‘云联壹云’ when notify server event (471e2b4f1, rainzm) region: fetch correct ownerId in PerformPrepareNets (c7b8e84ff, rainzm) region: Remove default secgroup for esxi guest (68ba4361d, rainzm) scheduler: more standardized testing (348ca46a0, rainzm) scheduler: fix array out of bounds when sorting hosts (4f9c37239, rainzm) scheduler: filter InstanceGroup whose enabled is false (e6de7be7e, Rain)  Bugfix (1)  collect esxi metric timout (caa26b756, zhaoxiangchun)  Build (3)  ansibleserver: use native alpine, include openssh (28ad028d8, Yousong Zhou) use alpine-build:1.0-2 (e94d41558, Yousong Zhou) docker-centos-build: use centos-build:1.1-1 (e1e56eaa7, Yousong Zhou)  Capability (1)  public network count filter by default vpc (8dd25e01c, Zexi Li)  Climc (8)  add k8s fed resource sync action (37b9a2e53, Zexi Li) refactor k8s sub command (51020aac0, Zexi Li) add k8s federated resource cmd (02dc68f20, Zexi Li) k8s cluster grafana componet support subpath (7f5124bdf, Zexi Li) add cmd helper to reduce duplicate code (aa8177f53, Zexi Li) update k8s resource list options (cd25b4ac6, Zexi Li) refactor k8s resource (e5bd6f26d, Zexi Li) update k8s-release-create params (253dc22cf, Zexi Li)  Cloudcommon (11)  get joint model should aware fieldname (4164bf58c, Zexi Li) joint model list should add field_name into query (82e38b8f5, Zexi Li) remove query for fetchitem when not GET (#7551) (c672521ce, Zexi Li) remove unnecessary joint interface (#7524) (9af25a2aa, Zexi Li) taskman: fix table insert (de1e1b100, Yousong Zhou) tablespec: informer: use %#v to log bad obj (4fc35f92c, Yousong Zhou) taskman: SetModelManager (08cd41b60, Yousong Zhou) etcd: quash low-value debug log lines (2eeb45ded, Yousong Zhou) policy: fix interval and oneshot sync (29a3171a3, Yousong Zhou) tablespec: informer: log obj type (145c88f79, Yousong Zhou) app: cosmetic change (d9f3dfbbf, Yousong Zhou)  Cloudprovider (1)  remove redundant error log (ffcea2ae5, Yousong Zhou)  Code Refactoring (6)  esxi: replace GetTemplateVMById with FetchTemplateVMById (42faf34f1, rainzm) esxi: fetchVms and fetchHardwareInfo (ef8768fce, rainzm) notify: hide SSunContact webconsole (10caff1d9, rainzm) region: replace ‘ActualCapacity’ with ‘ActualCapacityUsed’ (e0c94daaf, rainzm) region: optimize preparenet of cloudaccount (3f77c01e6, rainzm) scheduler: make forcast result clearer (6000874b3, rainzm)  Db (1)  IModel: add GetI18N() method (62c0c11c3, Yousong Zhou)  Db_dispatcher (1)  pass query for fetchItem (c777793d9, Zexi Li)  Disk (1)  check disk is need renew on guest set renew (77f479ce6, wanyaoqi)  Dns (1)  isMyDomain: match only strict subdomain of dns_domain (7e191a503, Yousong Zhou)  Elasticips (3)  error when we have no usable eip network (59a5e9201, Yousong Zhou) fix calling FilterByOwner (430e9cd0f, Yousong Zhou) filter by owner when doing auto allocation (8a0f940b3, Yousong Zhou)  Feature (13)  add dns interface (a85a1aecd, Qu Xuan) use informer to update endpoint, policy and service configs (#7596) (34ee80f01, Jian Qiu) cloudid saml support phase1 – framework and api (92f05be30, Qiu Jian) do uniqueness check when create/update idp configs (#7584) (2b7586140, Jian Qiu) OpenID Connect provider support (#7490) (604b6b7ff, Jian Qiu) OpenID Connect provider support (#7446) (0e775e68e, Jian Qiu) add is_auto_alloc flag to networks (#7473) (1ba9715ec, Jian Qiu) unified sso login framework (096784389, Qiu Jian) project filter that list jointable projects for user or group (eb4a252d0, Qiu Jian) apigateway store auth state in cookie instead of sqlite (7ba3945d8, Qiu Jian) keystone add support for OpenID Connection idp (2183490a5, Qiu Jian)   idp as domain resource 2. keystone support SAML IDP (889a35bc7, Qiu Jian)   support SAML idp (3b7a1e946, Qiu Jian)  Features (28)  add NotifyError in notifyclient (cee07e786, rainzm) Add BatchSendMessage for feishu SDK (aa364a3d7, rainzm) add GetCapacityUsedMB for ICloudStorage (116d347c8, rainzm) Add method ‘Sku’ to CandidatePropertyGetter (d086161a6, rainzm) add WithCtx version to notifyclient function (8eba2c369, rainzm) add GetSchedtags for ICloudHost (0d05f9ee1, rainzm) log err when sending notification via notifyclient (2d5055c90, rainzm) inherit lang from ctx fro Task (8da2d5ff7, rainzm) Add IResultHelper (39fed764f, rainzm) notify user when failing to change config (0308ce288, rainzm) esxi: support fetchVM form datacenter (6b340264e, rainzm) esxi: add GetSchedtags implementation for esxi.SHost (857e76ab7, rainzm) esxi: correctly judge whether inet is nil (65ca3ace7, rainzm) esxicli: better vm operator (3f8f9e6c5, rainzm) notify: replace VerifiedContactTypes with VerifiedInfos in ReceiverDetails (8c6fdd110, rainzm) notify: Support trigger-verify for feishu, dingtalk and workwx (beee6e2c9, rainzm) notify: Add VerifiedNote for SSubContact (60412cf7e, rainzm) notify: break down error from UseridByMobile (90b84e995, rainzm) notify: sort the returned contact type array (f24950da9, rainzm) notify: Allow use topic to filter notification (ff52e0044, rainzm) notify: Add TNotifyChannel const of robot (7c6e053a0, rainzm) region: sync capacityUsed for storage after deploying or deleting guest (9ded6e43f, rainzm) region: change fomat ‘id’ to ‘name(id)’ in scheduledtasks' log (7b67554dc, rainzm) region: replace 虚拟机 with 主机 or 云主机 (c542249c7, rainzm) region: divide notify templates into Chinese and English versions (5a10f9dd9, rainzm) region: sync schedtags when syncing host (679ccb825, rainzm) region: sync CapacityUsed for Storage (547b2960b, rainzm) scheduler: Change the action for guests with backup and instanceGroup (fa0450b45, rainzm)  Glance (1)  check min disk size on update (00265fedd, wanyaoqi)  Guests (1)  guests with vpc nics are available for eip association (5c7ae23d8, Yousong Zhou)  Host (1)  fix rbd storage cache iso image (6a7cf0608, wanyaoqi)  Hostinfo (1)  try create network add is_on_premise (#7707) (607e3d8fd, wanyaoqi)  Hotfix (1)  vpc change owners with wire (5e721b929, Qiu Jian)  Httperrors (3)  HTTPError: use Error type (918dce80e, Yousong Zhou) add Error type (12899ab00, Yousong Zhou) use existing details if id is not present (#7711) (bde5e1b96, Yousong Zhou)  Httputils (1)  preserve format val types (4fb45676a, Yousong Zhou)  I18n (2)  add ITable (8164854fd, Yousong Zhou) move out from httperrors pkg (8dc179676, Yousong Zhou)  Iproute2 (1)  address: make Exact idempotent (05b72a9d0, Yousong Zhou)  Keystone (2)  passwords: SetModelManager (61cd611aa, Yousong Zhou) config: SetModelManager for whitelisted config (6c9e8f194, Yousong Zhou)  Lb (1)  include cluster name info in details (7add76415, Yousong Zhou)  Locales (3)  monitor: add translations (70fd9dfb7, Yousong Zhou) update translation (a54d0e592, Yousong Zhou) update translations (c4f4e7d30, Yousong Zhou)  Logclient (5)  i18n: en for const (6bff7caf9, Yousong Zhou) i18n: cn for const (27d0452fa, Yousong Zhou) convert const val to use latin chars (b1a332fec, Yousong Zhou) move ws list to separate file (bc066edc0, Yousong Zhou) separate lines (0b878134b, Yousong Zhou)  Logger (2)  actionlog: add GetI18N (3f7155c39, Yousong Zhou) actionlog: remove redundant comments (b13d0f603, Yousong Zhou)  Mcclient (1)  options: loadbalanceragents: yum as the default deploy method (24379db85, Yousong Zhou)  Monitor (4)  error fmt (572e45968, Yousong Zhou) suggestsysalert add ignore action (7aa3c9dde, Zexi Li) reduce subscription mysql usage (cdf33052c, Zexi Li) support suggest rule alert config and add snapshot_unused driver (7a9662c6f, Zexi Li)  Opslog (1)  move const to separate file (986031fc9, Yousong Zhou)  Opt (1)  scheduler: better sort for hosts when selectHost (ed4847dff, rainzm)  Optimized (2)  create eip params (becf92f6b, Qu Xuan) 支持ip和端口过滤安全组 (594f05d94, Qu Xuan)  Others (178)  fix:允许cname record通过policy多值 (9b7fbf33b, lvyangyang) aliyun public elb region fix (7a61d77b0, TangBin) bugfix commalert 3.4 (e87d2c0e8, zhaoxiangchun) bugfix:commonalert (a9c95cf36, zhaoxiangchun) aliyun public elb brand fix (540f4631f, TangBin) fix:forbid top level public domain name (fba8349e8, lvyangyang) mcclient modules: fix k8s fed rolebinding joint wrong resource manager (1a1d7c70a, Zexi Li) bugfix :esxi 多机器环境下拉取监控超时 (b88c114ba, zhaoxiangchun) aliyun create public lb fix (3ddce26aa, TangBin) fix:/dnsrecordset重复检查,dnszonevpc数量 (d94e55501, lvyangyang) increase rbd check timeout (adbe292f4, wanyaoqi) umount nfs on detach storage (61cc18010, wanyaoqi) fix:(region) correct syncSchedtags (4586c82cb, rainzm) huawei client request add throttling control (77865d894, TangBin) huawei elb get params log (454aabca7, TangBin) qcloud elb create listener fix (c6d214991, TangBin) huawei snapshot delete fix (ebee60810, TangBin) set stagefail on clean fail (7e2e7ade1, wanyaoqi) wait deleted (d90b661f7, lvyangyang) commonalert bugfix 3.4 (365e555c9, zhaoxiangchun) bugfix:esxi collect metric (a7198dc21, zhaoxiangchun) fix esxi-agent dockerfile typo (78fc35d3a, Zhang Dongliang) support mutli params (8102e7ed0, wanyaoqi) make with ARCH argument (384e86664, Zhang Dongliang) support search ip (884e82a15, wanyaoqi) regional network filter bugfix (0bba6e63f, TangBin) ctyun sync secgroup fix \u0026 cloudaccount delete fix (0acbfc89f, TangBin) common alert bugfix/3.4 (477d36f82, zhaoxiangchun) fix host deployer base image (33fb33a58, wanyaoqi) ctyun add region cn-bj1 (12bd187ec, TangBin) fix set host image cache properties (5593b88e9, wanyaoqi) fix update image status after save failed (785da09d6, wanyaoqi) host sync storage size (585ef5833, wanyaoqi) dup record process (4487867f5, lvyangyang) suggest rule modify: (9b12c675d, zhaoxiangchun) bugfix vmware monitor (2a680f99a, zhaoxiangchun) dns access (70297e313, lvyangyang) commonalet bugfix: (1a323667a, zhaoxiangchun) Add mock test for genericScheudler.Schedule (89980b626, rainzm) fix host error output (ada6c870d, wanyaoqi) isolated devices info reenterable (78f9db1ba, wanyaoqi) guest short desc add backup host id (8c4941ea7, wanyaoqi) fix get ubuntu version (d22676906, wanyaoqi) optimized cachedimages sync (7095ea8f8, Qu Xuan) pex register add optional column mac_access (24af17757, TangBin) create classic vpc fix (612ad9286, TangBin) Automated cherry pick of #7714: Feature \u0026 Fix for Notify (#7715) (eb9d794fa, Rain Zheng) update host status to unknown on host offline (20b949091, wanyaoqi) vmware disk support deploy lvm partition (43ce3b545, wanyaoqi) listfilter by alert_id (d95e64e59, zhaoxiangchun) alert record bugfix (06bd735f0, zhaoxiangchun) Automated cherry pick of #7712: httperrors: support setting lang with X-Yunion-Lang (#7713) (77a5c1ff8, Yousong Zhou) Automated cherry pick of #7692: feat(notify): Support update for notify config (#7693) (b03c8ce50, Rain Zheng) Automated cherry pick of #7661: fix(host-deployer): Exit correctly after mounting (#7672) (c914dafa7, Rain Zheng) fix host get guests (#7683) (4af4bcb96, wanyaoqi) fix get storage capacity on init' (#7687) (b85fb9829, wanyaoqi) snapshot list by guest (438c1ced5, wanyaoqi) commonalert bugfix (be5bf11eb, zhaoxiangchun) 统一监控查询面板保存 (6cea2883a, zhaoxiangchun) update host deployer base image version (53a6c40a8, wanyaoqi) baremetal colloct isolated devices info (#7658) (eee193165, wanyaoqi) fix mount fetcher fs (#7657) (8e83ab476, wanyaoqi) remove backup metadata on delete backup (#7654) (b97764133, wanyaoqi) eip \u0026 vpc manager match fix (132c58379, TangBin) fix build baremetal agent image (#7647) (557240155, wanyaoqi) metric describe 接口 (#7381) (dd8a07f36, zhaoxiangchun) fix github action workflow (#7635) (c1cf72899, wanyaoqi) separate guest doamin and dns (#7621) (61214f2e2, wanyaoqi) fix gpfs check mountpoint (#7623) (2904364de, wanyaoqi) Refactor for Notify (#7611) (853153c73, Rain Zheng) docker build support buildx and arm architecture (6b944626b, wanyaoqi) Feature/yousong text (#7487) (c2bca8ab3, Yousong Zhou) feature:host image fetcher fs (#7606) (a4b27a3cf, wanyaoqi) fix:wrap params (#7605) (46683b210, lvyangyang) alter table guestcdrom_tbl modify column size bigint (#7593) (dcf8183c3, wanyaoqi) only notify watched resource (#7592) (86253534d, Zexi Li) Bugfix/yousong vpc ext (#7585) (6dc007425, Yousong Zhou) Bugfix/yousong hostman routes (#7563) (e01f0ce2a, Yousong Zhou) fix usage not set prefix (#7568) (29c0e5384, wanyaoqi) support diable usb kbd (df9e47cbf, wanyaoqi) fix usage get storage capbility (#7527) (aa483edeb, wanyaoqi) fix mount xfs (cdaff2126, wanyaoqi) usage report reserved memory (#7525) (54ff56c04, wanyaoqi) set disk status on disk detached (#7517) (cad24ac69, wanyaoqi) nodealert bugfix： (#7512) (b63d9b55d, zhaoxiangchun) modify telegraf reporting tag (#7489) (22cd20c3f, zhaoxiangchun) add image upload\u0026 s3 upload api (#7514) (280039ab3, tb365) Hotfix/qj password login wrong idp (#7511) (b0505ba5f, Jian Qiu) fix host info get sshkey (#7484) (716f647f7, wanyaoqi) fix reauth condition on influxdb not found (#7456) (a962db0e9, wanyaoqi) fix cache non lvm disks (#7459) (2cdfed2ca, wanyaoqi) aws elb listener\u0026rule name too long fix (ff4840b46, tangbin) fix redis reset account password action log (e59e40d3b, tangbin) loadblancer listener modify name fix (bd3d581f4, tangbin) fix deploy admin auth key (9bc1cfe6f, wanyaoqi) Feature/yousong lblis names (#7395) (d95584b11, Yousong Zhou) fix host register info (#7401) (ae0bd556c, wanyaoqi) fix panic on storage failed get host (#7390) (d6fdf3361, wanyaoqi) make rpc handle exportable (#7367) (9acc8c629, tb365) adjust schedule resource condition width (59e4f7d61, Zexi Li) Add more tips for make image cmd (51cb278ae, Shaohui Liu) fix schedtag list output (051205066, wanyaoqi) Add metadata for GuestTempalte details (49e4e31da, rainzm) Add network info when list scalingGroup details (45a3e0805, rainzm) 修改报警消息模版： (5e0cb9319, zhaoxiangchun) go fmt (1583da57f, tangbin) go fmt (d45ee2c0e, tangbin) host upload template check (e660e25be, tangbin) huawei fetch regions\u0026projects fix (0f2453189, tangbin) 修复统一报警bug (921472455, zhaoxiangchun) rename vgname centos (399488991, wanyaoqi) fix clone clean pending usage (31c0d5a42, wanyaoqi) capabilites add available host count (64935a465, wanyaoqi) fix snapshot clean pending usage (cd5d31763, wanyaoqi) Remove sudo before the docker cmd (96bb34ea0, Shaohui Liu)   add precheck for perform action (a677f2435, wanyaoqi)   format fix (d10e15ed9, tangbin) fix empty else (d5591001c, tangbin) fix host import (3ff402f4b, tangbin) fix huawei delete resource (94bb91716, tangbin) fix huawei elb disable healthcheck (7fcc85f85, tangbin) lb sync project fix (6d9a55638, tangbin) add more log (edc10b14d, tangbin) apigateway host imports data validate (cea012162, tangbin) update vendor (5d4efcc63, Qiu Jian) fix GetOrCreateVpcForClassicNetwork (a755d0d37, tangbin) 修复监控报警规则删除的问题 (bd80fa889, zhaoxiangchun) fix error output (7f8be7d4b, wanyaoqi) huawei eip delete fix (081a3eabd, tangbin) acl delete condition fix (a74853db7, tangbin) fix server sync status (41fcf38cf, wanyaoqi) sync classic redis fix (b9a45c8bb, tangbin) add params auto_migrate_on_host_down (a39b0c87e, wanyaoqi) misc ha guest fix (3e759a3a4, wanyaoqi) fix list guests on host (f4ee70c0b, wanyaoqi) cloudprovider usable filter with zone (22d000e73, tangbin) disable procutils print error info (66064a4c4, wanyaoqi) fix guest template health check (014540e4d, rainzm) fix:修复路由表映射到public网络的问题 (2d12d7898, lvyangyang) user batch register bugfix (c1e49d02c, tangbin) 新增优化建议： (7cd1f1de5, zhaoxiangchun) fix format (f24fd4aa1, bistuzx@163.com) add cost alert modules (f5a2215a9, bistuzx@163.com) vendor update: update jsonutils (2028dbabb, wanyaoqi)   fix local storage init local man (e2043d6bc, wanyaoqi)   misc fix (04dfa4879, wanyaoqi) add:region/esxi 迁移接口 (c75b63eb7, lvyangyang) fix set storage info bind mount (e2ad0101e, wanyaoqi) update vendor (47bb16e51, tangbin) Update docker image onecloud-base and its references (81784aea3, rainzm) suggestAlert cost:modify the request param to meter (a0dc33266, zhaoxiangchun) 增加influxdb的tag 的一些filter (98d2e489e, zhaoxiangchun) update vendor (00d7ce83e, Qiu Jian) remove obsolete codes from apigateway (27b3fb5d5, Qiu Jian) itsm climc (36408ab4a, zhaoxiangchun) add mcclient cloudaccount gcp\u0026huawei bucket (6e9718d4e, bistuzx@163.com) Update Dockerfile.ansibleserver (f909a1d2c, rainzm) 优化建议中增加费用统计接口 (2fde31764, zhaoxiangchun) update vendor (182c96a16, Qiu Jian) add meter modules amount_estimation\u0026daily_bill (70c07d4a8, 张旭) bind mount nfs storage path (322117f6d, wanyaoqi) cluster_d required-\u003eoptional (63babfed8, tangbin) fix the bug introduced in #6643 (17721c4d5, rainzm) update jsonutils (ae3827f9a, rainzm) copyright api update (60c8c25c0, tangbin) fix deploy backup server order (1d59ceb5d, wanyaoqi) keep input mem and cpu on create from instance snapshot (dae606d28, wanyaoqi) .travis.yml: use go1.14 (8e9c58799, Yousong Zhou) .github: workflows: use go1.14 (1152c3c24, Yousong Zhou) .github: bump backport hint to release/3.2 (2463396ef, Yousong Zhou)   add server pending deleted for host details (38a05c490, wanyaoqi)   include system usage (fabd3577a, wanyaoqi) server name enable upper case (75588d00a, wanyaoqi) report host stat (4e6512040, wanyaoqi) disable dhclient (c4d5da440, wanyaoqi) add known sp metadata xml (c30262241, Qiu Jian) fix get storage capabilities with null field (854bf59f8, wanyaoqi) sp support (3b32f0a4d, Qiu Jian)  README (1)  update architecture picture (bb540ff10, Zexi Li)  Region (13)  host specs replace space char to ‘_’ (3b0ba2caa, Zexi Li) fix query object by spec not include details (a05f50dbf, Zexi Li) fix schedtag joint resource master/slave field wrong order (1b6ac9bc4, Zexi Li) fix network schedtag not cleanup when network deleted (1d7ffc704, Zexi Li) validate network auto alloc update data (#7559) (95130f8ef, Zexi Li) schedtag list support resource_types (48d982b39, Zexi Li) lbagents: skip tls check for default influxdb endpoint url (e5dd2409d, Yousong Zhou) lbagents: default vrrp vrid, priority (495a2d995, Yousong Zhou) lbagents: use local params var (4596f3f11, Yousong Zhou) lbagents: set some vrrp params to values of peers (746cb8679, Yousong Zhou) lbagents: make vrrp interface default to eth0 (b0c39bfad, Yousong Zhou) lbagents: turn off guest src check (afac0604d, Yousong Zhou) loadbalanceragents: yum as the default method (7926e59d7, Yousong Zhou)  Scheduler (5)  fix fillter isolated device (8e0f47aa0, wanyaoqi) ignore network type when specified (a1c7a291d, Zexi Li) refactor network predicate (#7553) (7a08a60db, Zexi Li) fix network auto alloc logic (6f2ddbd3a, Zexi Li) fix storage filter duplicate error message (0957fee3d, Zexi Li)  Specs (1)  fix specKey url not escape (a4d7b2b4b, Zexi Li)  Treewide (3)  avoid variable fmt str (822fae009, Yousong Zhou) fmt error (23b9991a7, Yousong Zhou) DeleteFailReason as an object with translated details (f1995a46d, Yousong Zhou)  Vendor (1)  update yunion.io/x/sqlchemy (4e16eaf21, Yousong Zhou)  Vpcagent (4)  guard against foul eip records (f0faf07b6, Yousong Zhou) respect guest src check settings (#7678) (19ba4b975, Yousong Zhou) ignore network without wire ids (#7629) (500e2edad, Yousong Zhou) ClaimVpcGuestDnsRecords: guard against pending_deleted guests (20f36afdc, Yousong Zhou)  Webconsole (2)  fix defer order to release zombie process (fa2d8723a, wanyaoqi) fix old session make new session closed (642d69427, Zexi Li)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n41 commits to cloudpods-operator - v3.4.0 since this release.\nBug Fixes (3)  apigateway totp should default on (d14c152, Qiu Jian) member policy requires member role (323b403, Qiu Jian) check before doing perform_public for roles and policies (3ea8576, Qiu Jian)  Feature (1)  add cloudid service (4066231, Qu Xuan)  Notify (1)  remove pvc dependence (f1e64f3, wanyaoqi)  Others (33)  pod affinity by storage class (0a85313, wanyaoqi) BusyBox upgrade ,modify cloudmon timeout arg (724b1ec, zhaoxiangchun) host image spec fix (1ab0562, wanyaoqi) add flag check is failed etcd pods need delete (965c589, wanyaoqi) push 镜像后,拉回本地 (2ad7c37, Zhang Dongliang) buildx for onecloud-operator (d81484e, Zhang Dongliang)   etcd clean failed state pods (b244a1e, wanyaoqi)   deployment with pvc not set node affinity (#256) (eddc03d, Zexi Li) replace cloud affinity preferred by required (#253) (9cf0d16, wanyaoqi) remove api/v1 from notify endpoint url (#252) (7b21b4b, Rain Zheng) etcd add cloud affinity (cb35295, wanyaoqi) statusfulset set cloud affinity: (ce4e78a, wanyaoqi) update host image default spec (3bedb0b, wanyaoqi) crontab timeout (0398ed0, zhaoxiangchun) fix baremetal storage size (d2f57ec, wanyaoqi) Add workwx and workwx-robot for notify (#240) (e6ee55d, Rain Zheng) cloudmon deployment increate cloudaccount monitor config: (#241) (699ec4a, zhaoxiangchun) itsm 开启https (#242) (0e9f304, zhaoxiangchun) remove etcd-operator dependcies (#235) (8c022f3, Zexi Li) 调整统一监控 系统报警规则的注入配置 (752e28c, zhaoxiangchun) fix etcd member count (500ddc5, wanyaoqi) recreate pods on pvc not local path (64cc832, wanyaoqi) 修复系统报警规则重复创建的问题 (32e05ea, zhaoxiangchun) fix set pvc name (ddf338e, wanyaoqi) fix glance pvc name (41d9deb, wanyaoqi) update vendor (e6922a7, Zexi Li) cloudmon deployment increase [rds redis oss] monitor information collectiona (b9c27f2, zhaoxiangchun) add check if cronjob exist (51ce335, wanyaoqi) service etcd client disable unready client (0b90038, wanyaoqi) host image component set default toleration (b1083b9, wanyaoqi) cloudmon as deployment (3a8ddec, wanyaoqi) check etcd dbsize, do compact and defrag (e18c1a3, wanyaoqi) system alert init info create in operator (23add7b, zhaoxiangchun)  Web (1)  add dashboard overview (#243) (b99abd0, Zexi Li)  Yunionagent (2)  remove onecloud keyword (aba6c28, Zexi Li) update content (29b149c, Zexi Li)   cloudpods-service-operator 仓库地址: https://github.com/yunionio/cloudpods-service-operator\n13 commits to cloudpods-service-operator - v3.4.0 since this release.\nBug Fixes (4)  retry after a while when dealErr (89dbcc9, rainzm) the error judgment in dealErr (7695a89, rainzm) vmPendingAfter’s unit should be second (00fb031, rainzm) Update status and return when resource is invalid (5d604ab, rainzm)  Code Refactoring (1)  Abstract the same logic and abstract interface (afb74a5, rainzm)  Features (1)  add manager-pro section in Makefile (4a5e4ba, rainzm)  Others (7)  docker buildx for onecloud-service-operator (32b22c2, Zhang Dongliang) fix the usage of vmPendingAfter (f6d2d87, rainzm) remove regionid for endpoint (678a87d, rainzm) Build failed for some small bugs by following the README.md (987363c, Shaohui Liu) Add Endpoint document (d5cb366, rainzm) Add CRD Endpoint (077a994, rainzm) support yaml string (cbd3a0a, rainzm)   notify-plugins 仓库地址: https://github.com/yunionio/notify-plugins\n25 commits to notify-plugins - v3.4.0 since this release.\nBug Fixes (4)  common: correct error judgment in BatchSend (4c76dd8, rainzm) dingtalk: return correct value in getUseridByMobile (4241c3d, rainzm) robot: Correct err value of ValidateConfig (5e2b642, rainzm) workwx: Incorrect variable use for ok (05eabba, rainzm)  Features (5)  break down error from UserIdByMobile (a9ff6b9, rainzm) Support workwx (52b50d2, rainzm) notify: Add BatchSend for websocket (0eaa49a, rainzm) notify: Add common function to batch send (63924dc, rainzm) robot: Add BatchSend (b70b205, rainzm)  Others (15)  buildx for notifyplugins (e6a246b, Zhang Dongliang) makefile 去掉 sudo; make all bins (65d52fe, Zhang Dongliang) docker buildx for notify plugins (8f5747f, Zhang Dongliang) update vendor (8df6b86, rainzm) change email const name (0531db3, rainzm) fix batch send of workwx (cab236d, rainzm) update vendor (c3b8d64, rainzm) Support batch send for eamil and smsaliyun (8ff79b6, rainzm) Support sending a batch of workwx messages (d33068e, rainzm) Support markdown when sending single user dingtalk message (6bec1bd, rainzm) Update vendor (ec2bfad, rainzm) Support batch send (80397bb, rainzm) change ‘corp_secret’ to ‘secret’ (6801a1e, rainzm) remove default config file (061987a, rainzm) Add workwx-robot for webhook (c09687f, rainzm)  Test (1)  update vendor for go-workwx (62b2a41, rainzm)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n17 commits to ocadm - v3.4.0 since this release.\nAutoupdate (1)  clear host tag (611c2c4, Zexi Li)  Others (16)  clean info from from autoupdate component when update (48d9fe4, Zexi Li) 更新 3.4 的 makefile 版本变量 (80c6081, Zhang Dongliang) make mod (f4f0696, wanyaoqi) meter baremetalagent esxiagent use longhorn (6c6379e, wanyaoqi) update vendor for v3.2: (e3fa33e, Zexi Li) update onecloud-operator vendor (752e2d2, Zexi Li) ocadm create cluster, 延时等待容错 (2441304, Zhang Dongliang) 高可用部署主备选取应将kube-apiserver是否工作考虑进去 (d8f027f, Zhang Dongliang) fix longhron template (b6afd3b, wanyaoqi) 修复 keepalived master state bug (fa22d63, Zhang Dongliang) longhorn deploy misc fix (c9ef80b, wanyaoqi) update vendor (c9f7d19, Zexi Li) update vendor for master (657f5e9, Zhang Dongliang) fix create region zone where upgrade from v2 (284f65a, wanyaoqi) ocadm 接入 keepalived，支持高可用 (a8b6713, Zhang Dongliang) update DefaultCalicoVersion to 3.12.1 (6c1fc6d, Zhang Dongliang)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n13 commits to sdnagent - v3.4.0 since this release.\nAgent (1)  ovn: no error log if the mapped bridge does not exist (a9ce756, Yousong Zhou)  Build (7)  eipgw: vrrp track script as monitor (32941bd, Yousong Zhou) systemd: add keepalived reload command (271c0e2, Yousong Zhou) eipgw: use 8 byte char for auth_pass (7936112, Yousong Zhou) eipgw: let keepalived use detail log (6331131, Yousong Zhou) add ansible playbook README (ec48e2d, Yousong Zhou) bump to alpine-build:1.0-2 (9cffe97, Yousong Zhou) separate artifact and docker image build (29e2d68, Yousong Zhou)  Others (2)  pull image for buildx (cc574b6, Zhang Dongliang) docker buildx for sdnagent (c86cc8a, Zhang Dongliang)  Sdnagent (1)  be cooperative (d73fbef, Yousong Zhou)  Vendor (2)  bump yunion.io/x/onecloud to current tip of release/3.3 (b599b01, Yousong Zhou) bump 3.3 (#105) (6e67604, Yousong Zhou)  ","excerpt":"发布时间 2020-09-30 16:43:35\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.4/3-4-0/","title":"v3.4.0"},{"body":"Release time: 2020-12-09 17:03:16\n cloudpods Repo: https://github.com/yunionio/cloudpods\n10 commits to cloudpods - v3.3.8 since this release.\nBug Fixes (7)  aws secgroup out rule is deny any (6ef75538e, Qu Xuan) avoid panic (dc8c341a1, Qu Xuan) renew rds (a2391a50c, Qu Xuan) host: make sure it won’t match vpc guests by accident (1ee1493d6, Yousong Zhou) monitor: modify monitor serviceType in StartService() (379fbf458, zhaoxiangchun) region: change_ipaddr: retain eip_id on detach and attach (841f5aadc, Yousong Zhou) vpcagent: models: guestnetworks: accomodate change_ipaddr (335f3c6b1, Yousong Zhou)  Features (1)  cloudcommon: db: jointbase: add list:“user” for RowId (b88c079db, Yousong Zhou)  Scheduler (1)  ignore non running guests only exclude ready status (ba4c506b5, Zexi Li)  Vendor (1)  update yunion.io/x/jsonutils (d6e37aa6b, Yousong Zhou)   notify-plugins Repo: https://github.com/yunionio/notify-plugins\n1 commits to notify-plugins - v3.3.8 since this release.\nFeatures (1)  robot: support multi WebhookPrefixs (bae94c7, rainzm)   sdnagent Repo: https://github.com/yunionio/sdnagent\n8 commits to sdnagent - v3.3.8 since this release.\nBug Fixes (1)  hostconfig: fix watching hostconfig (22c758c, Yousong Zhou)  Build (1)  eipgw: track to ensure stop state as well (e98b195, Yousong Zhou)  Flowsource (4)  relax constraint when mac check on and ip check off (f68ca1a, Yousong Zhou) reword ref comments on allow_switch_vms (711050d, Yousong Zhou) reword ref comments on allow_router_vms (2b5eb6d, Yousong Zhou) remove now unused code for dev (1fc7aba, Yousong Zhou)  Others (1)  .circleci: bump go to 1.14 (f5adb38, Yousong Zhou)  Vendor (1)  bump yunion.io/x/onecloud to current tip of release/3.3 (6747d8f, Yousong Zhou)  ","excerpt":"Release time: 2020-12-09 17:03:16\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.3/3-3-8/","title":"v3.3.8"},{"body":"发布时间 2020-12-09 17:03:16\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n10 commits to cloudpods - v3.3.8 since this release.\nBug Fixes (7)  aws secgroup out rule is deny any (6ef75538e, Qu Xuan) avoid panic (dc8c341a1, Qu Xuan) renew rds (a2391a50c, Qu Xuan) host: make sure it won’t match vpc guests by accident (1ee1493d6, Yousong Zhou) monitor: modify monitor serviceType in StartService() (379fbf458, zhaoxiangchun) region: change_ipaddr: retain eip_id on detach and attach (841f5aadc, Yousong Zhou) vpcagent: models: guestnetworks: accomodate change_ipaddr (335f3c6b1, Yousong Zhou)  Features (1)  cloudcommon: db: jointbase: add list:“user” for RowId (b88c079db, Yousong Zhou)  Scheduler (1)  ignore non running guests only exclude ready status (ba4c506b5, Zexi Li)  Vendor (1)  update yunion.io/x/jsonutils (d6e37aa6b, Yousong Zhou)   notify-plugins 仓库地址: https://github.com/yunionio/notify-plugins\n1 commits to notify-plugins - v3.3.8 since this release.\nFeatures (1)  robot: support multi WebhookPrefixs (bae94c7, rainzm)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n8 commits to sdnagent - v3.3.8 since this release.\nBug Fixes (1)  hostconfig: fix watching hostconfig (22c758c, Yousong Zhou)  Build (1)  eipgw: track to ensure stop state as well (e98b195, Yousong Zhou)  Flowsource (4)  relax constraint when mac check on and ip check off (f68ca1a, Yousong Zhou) reword ref comments on allow_switch_vms (711050d, Yousong Zhou) reword ref comments on allow_router_vms (2b5eb6d, Yousong Zhou) remove now unused code for dev (1fc7aba, Yousong Zhou)  Others (1)  .circleci: bump go to 1.14 (f5adb38, Yousong Zhou)  Vendor (1)  bump yunion.io/x/onecloud to current tip of release/3.3 (6747d8f, Yousong Zhou)  ","excerpt":"发布时间 2020-12-09 17:03:16\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.3/3-3-8/","title":"v3.3.8"},{"body":"Release time: 2020-11-04 11:44:25\n cloudpods Repo: https://github.com/yunionio/cloudpods\n29 commits to cloudpods - v3.3.7 since this release.\nBug Fixes (21)  missing authenticate action log for user web login (d46eadf6e, Qiu Jian) use new api (d5f295d1e, Qu Xuan) support filter rds sku by provider (28782b05a, Qu Xuan) set secgroup status (1c46b2273, Qu Xuan) avoid sync project panic (167ade114, Qu Xuan) avoid delete public ip when sync eip list (7f5f33c5f, Qu Xuan) 避免并发同步安全组导致规则混乱 (699b7351b, Qu Xuan) 避免冲掉设置的到期释放时间 (a106c9431, Qu Xuan) get images distinct field (f68995cc6, Zexi Li) cancel pending-delete should increase resource quota usages (52cc6b7d2, Qiu Jian) missing authenticate action log for user web login (a6058a2c9, Qiu Jian) 新增google存储类型 (59ceeb3a2, Qu Xuan) do not lock guest after lock eip, to prevent possible dead lock (c545ea1df, Qiu Jian) use correct worker (7e145bf82, Qu Xuan) add rds cpu and memory usage (9a888f507, Qu Xuan) 优化安全组规则同步 (3dd3d808d, Qu Xuan) esxi: resize root disk after cloning vm (82826037b, rainzm) esxi: no callback in uploadHandler (cfea1d524, rainzm) esxi: use correct device index (14803b64d, rainzm) esxi: filter vmdk item in lease.info (0e9751c48, rainzm) region: compute binded disk count when deleting snapshotpolicy (0619b5445, rainzm)  Bugfix (1)  qcloud pull metric (bbb48fcb9, zhaoxiangchun)  Features (2)  use details data to cover obj data in FetchCustomizeColumns (cea274e18, rainzm) esxi: do not specify portkey in NewVNIC (94e29fe6d, rainzm)  Lockman (1)  test: add prefix setting (b57099f07, Yousong Zhou)  Monitor (1)  set default influxdb datasource by endpoint type (5d873ddb2, Zexi Li)  Others (2)  fix fetch customize columns (33196d57c, wanyaoqi) .circleci: build: make with parallel level 2 (cd37a3c1c, Yousong Zhou)  Stringutils2 (1)  add RemoveUtf8Strings func (2bc2e576b, Zexi Li)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.3.7 since this release.\nOthers (1)  set image default policy to if not present (bf5e0ec, Zexi Li)  ","excerpt":"Release time: 2020-11-04 11:44:25\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.3/3-3-7/","title":"v3.3.7"},{"body":"发布时间 2020-11-04 11:44:25\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n29 commits to cloudpods - v3.3.7 since this release.\nBug Fixes (21)  missing authenticate action log for user web login (d46eadf6e, Qiu Jian) use new api (d5f295d1e, Qu Xuan) support filter rds sku by provider (28782b05a, Qu Xuan) set secgroup status (1c46b2273, Qu Xuan) avoid sync project panic (167ade114, Qu Xuan) avoid delete public ip when sync eip list (7f5f33c5f, Qu Xuan) 避免并发同步安全组导致规则混乱 (699b7351b, Qu Xuan) 避免冲掉设置的到期释放时间 (a106c9431, Qu Xuan) get images distinct field (f68995cc6, Zexi Li) cancel pending-delete should increase resource quota usages (52cc6b7d2, Qiu Jian) missing authenticate action log for user web login (a6058a2c9, Qiu Jian) 新增google存储类型 (59ceeb3a2, Qu Xuan) do not lock guest after lock eip, to prevent possible dead lock (c545ea1df, Qiu Jian) use correct worker (7e145bf82, Qu Xuan) add rds cpu and memory usage (9a888f507, Qu Xuan) 优化安全组规则同步 (3dd3d808d, Qu Xuan) esxi: resize root disk after cloning vm (82826037b, rainzm) esxi: no callback in uploadHandler (cfea1d524, rainzm) esxi: use correct device index (14803b64d, rainzm) esxi: filter vmdk item in lease.info (0e9751c48, rainzm) region: compute binded disk count when deleting snapshotpolicy (0619b5445, rainzm)  Bugfix (1)  qcloud pull metric (bbb48fcb9, zhaoxiangchun)  Features (2)  use details data to cover obj data in FetchCustomizeColumns (cea274e18, rainzm) esxi: do not specify portkey in NewVNIC (94e29fe6d, rainzm)  Lockman (1)  test: add prefix setting (b57099f07, Yousong Zhou)  Monitor (1)  set default influxdb datasource by endpoint type (5d873ddb2, Zexi Li)  Others (2)  fix fetch customize columns (33196d57c, wanyaoqi) .circleci: build: make with parallel level 2 (cd37a3c1c, Yousong Zhou)  Stringutils2 (1)  add RemoveUtf8Strings func (2bc2e576b, Zexi Li)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.3.7 since this release.\nOthers (1)  set image default policy to if not present (bf5e0ec, Zexi Li)  ","excerpt":"发布时间 2020-11-04 11:44:25\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.3/3-3-7/","title":"v3.3.7"},{"body":"Release time: 2020-10-14 13:09:19\n cloudpods Repo: https://github.com/yunionio/cloudpods\n67 commits to cloudpods - v3.3.6 since this release.\nBaremetal (1)  fix pxe filter network by guest_dhcp (c1b5fa1da, Zexi Li)  Bug Fixes (35)  避免腾讯云同步虚拟机ip异常 (b59696a69, ioito) 支持带宽包用户 (1bdce8f88, Qu Xuan) trans google new region name (53522134d, Qu Xuan) qcloud eip with bandwidth attr (8e994e9fb, Qu Xuan) lock/unlock cleanup (d86534c16, Qiu Jian) bucket object cnt fix (6d31c44ef, Qu Xuan) qcloud instance with max bandwidth (a0ab506a6, Qu Xuan) ldap sync not update user’s phone and email (89669c8cb, Qiu Jian) validate secgroup purge condition (ae261321e, Qu Xuan) avoid slice out of bounds (d06e6927c, rainzm) keystone initialize data skip nil extra fields (91634336c, Qiu Jian) disable qcloud verifyAppId temporarily (8ebaf8bf2, Qiu Jian) qcloud set hostname for instance (324e7a7ee, Qu Xuan) add esxicli vmrc/webmks command (6a459ec41, Qiu Jian) server name auto index should start from 1 (75260982b, Qiu Jian) error code of external bucket not found error should be 404 (0fc0630c7, Qiu Jian) emulated wire not sync vpc shared info (6a6489f68, Qiu Jian) sync huawei bucket project info (3fbf7d033, Qu Xuan) avoid purge storages (4fbea0dca, Qu Xuan) avoid account delete failed (b5cdd84b5, ioito) sql err (95a5ec092, ioito) avoid compare err with cloudprovider.ErrNotFound direct (f16b8dbc0, ioito) get jnlp xml from dell idrac6,7,9 (f27a461f0, Qiu Jian) avoid serial vm creation (05ba352c8, ioito) 仅在可用区故障时可强制挂载磁盘 (f7f0a7e30, ioito) avoid account delete failed (812f50f6a, ioito) 支持自动根据云上项目修改本地项目名称 (ecade9a3d, Qu Xuan) esxi: use system disk of template only when cloning vm (fa70835a8, rainzm) esxi: check nil value when NewVirtualMachine (ed29844d4, rainzm) esxi: check whether some fields of vm are nil (71a6b6d14, rainzm) esxi: filter linkLocalAddress (18d19006d, rainzm) esxi: search template from whole vCenter (2ce77ac21, rainzm) region: fetch correct ownerId in PerformPrepareNets (912d7a697, rainzm) region: add GetSlaveFieldName for ScalingGroupGuest (dea65a5a1, rainzm) region: set ownerId as userCred when can’t FetchOwnerId (1a6f9bc71, rainzm)  Bugfix (1)  collect esxi metric timout (e5fb2771b, zhaoxiangchun)  Dns (1)  isMyDomain: match only strict subdomain of dns_domain (b6f5229f8, Yousong Zhou)  Eip (2)  NewEipForVMOnHost: add opslog (d81ed410d, Yousong Zhou) construct a pointer type (8e4f04ffa, Yousong Zhou)  Elasticips (2)  error when we have no usable eip network (15a1e7672, Yousong Zhou) fix calling FilterByOwner (c71a2e6ca, Yousong Zhou)  Optimized (1)  create eip params (2eaedeafa, Qu Xuan)  Others (19)  remove aws lbbg cache metedata (c01b06d0e, TangBin) separate guest doamin and dns (4bf21e32b, wanyaoqi) aliyun public elb region fix (acf49c449, TangBin) aliyun public elb brand fix (97acce2c2, TangBin) aliyun create public lb fix (62beb58fc, TangBin) increase rbd check timeout (36e089e63, wanyaoqi) umount nfs on detach storage (ea0ccfa0d, wanyaoqi) set stagefail on clean fail (80de477a8, wanyaoqi) huawei client request add throttling control (d69011079, TangBin) huawei elb get params log (42a24640a, TangBin) qcloud elb create listener fix (9d4d17f40, TangBin) huawei snapshot delete fix (999c315ce, TangBin) bugfix:esxi collect metric (fda1e1f0f, zhaoxiangchun) regional network filter bugfix (a16b7a2f3, TangBin) ctyun sync secgroup fix \u0026 cloudaccount delete fix (5bd27fed6, TangBin) ctyun add region cn-bj1 (93f16973d, TangBin) fix set host image cache properties (33a18462e, wanyaoqi) fix update image status after save failed (9aeb802af, wanyaoqi) bugfix vmware monitor (43add1b09, zhaoxiangchun)  Region (2)  fix schedtag joint resource master/slave field wrong order (98f65243d, Zexi Li) fix network schedtag not cleanup when network deleted (86189f981, Zexi Li)  Vpcagent (1)  ovn: increase dhcp lease, renew, rebind time (d097a7637, Yousong Zhou)  Webconsole (2)  ssh: add keyboard-interactive as an option (861bc56a9, Yousong Zhou) ssh: each argument on its own line (bba99aef9, Yousong Zhou)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n4 commits to cloudpods-operator - v3.3.6 since this release.\nOthers (3)  not create notice (9085ed7, Zexi Li) pod affinity by storage class (a15f167, wanyaoqi) host image spec fix (9315dd7, wanyaoqi)  Regiondns (1)  configmap: quash trailing spaces (0261d6d, Yousong Zhou)  ","excerpt":"Release time: 2020-10-14 13:09:19\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.3/3-3-6/","title":"v3.3.6"},{"body":"发布时间 2020-10-14 13:09:19\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n67 commits to cloudpods - v3.3.6 since this release.\nBaremetal (1)  fix pxe filter network by guest_dhcp (c1b5fa1da, Zexi Li)  Bug Fixes (35)  避免腾讯云同步虚拟机ip异常 (b59696a69, ioito) 支持带宽包用户 (1bdce8f88, Qu Xuan) trans google new region name (53522134d, Qu Xuan) qcloud eip with bandwidth attr (8e994e9fb, Qu Xuan) lock/unlock cleanup (d86534c16, Qiu Jian) bucket object cnt fix (6d31c44ef, Qu Xuan) qcloud instance with max bandwidth (a0ab506a6, Qu Xuan) ldap sync not update user’s phone and email (89669c8cb, Qiu Jian) validate secgroup purge condition (ae261321e, Qu Xuan) avoid slice out of bounds (d06e6927c, rainzm) keystone initialize data skip nil extra fields (91634336c, Qiu Jian) disable qcloud verifyAppId temporarily (8ebaf8bf2, Qiu Jian) qcloud set hostname for instance (324e7a7ee, Qu Xuan) add esxicli vmrc/webmks command (6a459ec41, Qiu Jian) server name auto index should start from 1 (75260982b, Qiu Jian) error code of external bucket not found error should be 404 (0fc0630c7, Qiu Jian) emulated wire not sync vpc shared info (6a6489f68, Qiu Jian) sync huawei bucket project info (3fbf7d033, Qu Xuan) avoid purge storages (4fbea0dca, Qu Xuan) avoid account delete failed (b5cdd84b5, ioito) sql err (95a5ec092, ioito) avoid compare err with cloudprovider.ErrNotFound direct (f16b8dbc0, ioito) get jnlp xml from dell idrac6,7,9 (f27a461f0, Qiu Jian) avoid serial vm creation (05ba352c8, ioito) 仅在可用区故障时可强制挂载磁盘 (f7f0a7e30, ioito) avoid account delete failed (812f50f6a, ioito) 支持自动根据云上项目修改本地项目名称 (ecade9a3d, Qu Xuan) esxi: use system disk of template only when cloning vm (fa70835a8, rainzm) esxi: check nil value when NewVirtualMachine (ed29844d4, rainzm) esxi: check whether some fields of vm are nil (71a6b6d14, rainzm) esxi: filter linkLocalAddress (18d19006d, rainzm) esxi: search template from whole vCenter (2ce77ac21, rainzm) region: fetch correct ownerId in PerformPrepareNets (912d7a697, rainzm) region: add GetSlaveFieldName for ScalingGroupGuest (dea65a5a1, rainzm) region: set ownerId as userCred when can’t FetchOwnerId (1a6f9bc71, rainzm)  Bugfix (1)  collect esxi metric timout (e5fb2771b, zhaoxiangchun)  Dns (1)  isMyDomain: match only strict subdomain of dns_domain (b6f5229f8, Yousong Zhou)  Eip (2)  NewEipForVMOnHost: add opslog (d81ed410d, Yousong Zhou) construct a pointer type (8e4f04ffa, Yousong Zhou)  Elasticips (2)  error when we have no usable eip network (15a1e7672, Yousong Zhou) fix calling FilterByOwner (c71a2e6ca, Yousong Zhou)  Optimized (1)  create eip params (2eaedeafa, Qu Xuan)  Others (19)  remove aws lbbg cache metedata (c01b06d0e, TangBin) separate guest doamin and dns (4bf21e32b, wanyaoqi) aliyun public elb region fix (acf49c449, TangBin) aliyun public elb brand fix (97acce2c2, TangBin) aliyun create public lb fix (62beb58fc, TangBin) increase rbd check timeout (36e089e63, wanyaoqi) umount nfs on detach storage (ea0ccfa0d, wanyaoqi) set stagefail on clean fail (80de477a8, wanyaoqi) huawei client request add throttling control (d69011079, TangBin) huawei elb get params log (42a24640a, TangBin) qcloud elb create listener fix (9d4d17f40, TangBin) huawei snapshot delete fix (999c315ce, TangBin) bugfix:esxi collect metric (fda1e1f0f, zhaoxiangchun) regional network filter bugfix (a16b7a2f3, TangBin) ctyun sync secgroup fix \u0026 cloudaccount delete fix (5bd27fed6, TangBin) ctyun add region cn-bj1 (93f16973d, TangBin) fix set host image cache properties (33a18462e, wanyaoqi) fix update image status after save failed (9aeb802af, wanyaoqi) bugfix vmware monitor (43add1b09, zhaoxiangchun)  Region (2)  fix schedtag joint resource master/slave field wrong order (98f65243d, Zexi Li) fix network schedtag not cleanup when network deleted (86189f981, Zexi Li)  Vpcagent (1)  ovn: increase dhcp lease, renew, rebind time (d097a7637, Yousong Zhou)  Webconsole (2)  ssh: add keyboard-interactive as an option (861bc56a9, Yousong Zhou) ssh: each argument on its own line (bba99aef9, Yousong Zhou)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n4 commits to cloudpods-operator - v3.3.6 since this release.\nOthers (3)  not create notice (9085ed7, Zexi Li) pod affinity by storage class (a15f167, wanyaoqi) host image spec fix (9315dd7, wanyaoqi)  Regiondns (1)  configmap: quash trailing spaces (0261d6d, Yousong Zhou)  ","excerpt":"发布时间 2020-10-14 13:09:19\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.3/3-3-6/","title":"v3.3.6"},{"body":"Release time: 2020-09-15 18:05:31\n cloudpods Repo: https://github.com/yunionio/cloudpods\n32 commits to cloudpods - v3.3.5 since this release.\nBug Fixes (19)  ignore 409 error when doing redfish power on (508c934e8, Qiu Jian) cos use proxy (24e3da781, Qu Xuan) disable webkms for esxi older than 6.5 (c2fbe4faf, Qiu Jian) avoid sync natgateway eip panic (9920e3b50, Qu Xuan) 默认不自动合并安全组 (e5d7fee93, Qu Xuan) aliyun wulanchabu region (fb9ae22fe, Qu Xuan) 平滑迁移数据 (042842501, Qu Xuan) 腾讯云不支持同时设置秘钥和密码,若设置秘钥，则将密码置空 (dfafa0336, Qu Xuan) optimized qcloud keypair (a1aafa67d, Qu Xuan) uniform cachedimage active status (cb288f65e, Qu Xuan) prevent users in disabled idp from login (e64af28e8, Qiu Jian) wire usage stats incorrect (45d6686a3, Qiu Jian) esxi: fetch templatevm from datacenter before clone vm (be4a95ca8, rainzm) esxi: return when host.Vm is empty (c4180811b, rainzm) esxiagent: return image extid not id (171c95bf5, rainzm) esxiagent: add HostDelayTaskWorkerCount (da0246e66, rainzm) notify: Replace String() with GetString() (4da5a0042, rainzm) region: add RequestSyncstatusOnHost for SESXiGuestDriver (13608b43e, rainzm) scheduler: fix array out of bounds when sorting hosts (6874b9440, rainzm)  Code Refactoring (3)  esxi: replace GetTemplateVMById with FetchTemplateVMById (35919e1ec, rainzm) esxi: fetchVms and fetchHardwareInfo (86c0af8ca, rainzm) region: optimize preparenet of cloudaccount (df64b9080, rainzm)  Disk (1)  check disk is need renew on guest set renew (6f5bb55ea, wanyaoqi)  Elasticips (1)  filter by owner when doing auto allocation (ef8b9e6ae, Yousong Zhou)  Features (2)  esxi: support fetchVM form datacenter (3a8c90d7d, rainzm) esxicli: better vm operator (af76ae975, rainzm)  Host (1)  fix rbd storage cache iso image (f017daafc, wanyaoqi)  Others (3)  guest short desc add backup host id (b120b87c4, wanyaoqi) fix get ubuntu version (22e4181b3, wanyaoqi) optimized cachedimages sync (23b02045a, Qu Xuan)  Vpcagent (1)  guard against foul eip records (96058b4af, Yousong Zhou)  Webconsole (1)  fix defer order to release zombie process (77c3e490c, wanyaoqi)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.3.5 since this release.\nNotify (1)  remove pvc dependence (5f1fadf, wanyaoqi)  Others (2)  etcd add cloud affinity (fd8c8c4, wanyaoqi) statusfulset set cloud affinity: (539d129, wanyaoqi)   sdnagent Repo: https://github.com/yunionio/sdnagent\n3 commits to sdnagent - v3.3.5 since this release.\nBuild (1)  eipgw: vrrp track script as monitor (fd4cf95, Yousong Zhou)  Sdnagent (1)  be cooperative (bda4f40, Yousong Zhou)  Vendor (1)  bump yunion.io/x/onecloud to current tip of release/3.3 (9f5ccbb, Yousong Zhou)  ","excerpt":"Release time: 2020-09-15 18:05:31\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.3/3-3-5/","title":"v3.3.5"},{"body":"发布时间 2020-09-15 18:05:31\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n32 commits to cloudpods - v3.3.5 since this release.\nBug Fixes (19)  ignore 409 error when doing redfish power on (508c934e8, Qiu Jian) cos use proxy (24e3da781, Qu Xuan) disable webkms for esxi older than 6.5 (c2fbe4faf, Qiu Jian) avoid sync natgateway eip panic (9920e3b50, Qu Xuan) 默认不自动合并安全组 (e5d7fee93, Qu Xuan) aliyun wulanchabu region (fb9ae22fe, Qu Xuan) 平滑迁移数据 (042842501, Qu Xuan) 腾讯云不支持同时设置秘钥和密码,若设置秘钥，则将密码置空 (dfafa0336, Qu Xuan) optimized qcloud keypair (a1aafa67d, Qu Xuan) uniform cachedimage active status (cb288f65e, Qu Xuan) prevent users in disabled idp from login (e64af28e8, Qiu Jian) wire usage stats incorrect (45d6686a3, Qiu Jian) esxi: fetch templatevm from datacenter before clone vm (be4a95ca8, rainzm) esxi: return when host.Vm is empty (c4180811b, rainzm) esxiagent: return image extid not id (171c95bf5, rainzm) esxiagent: add HostDelayTaskWorkerCount (da0246e66, rainzm) notify: Replace String() with GetString() (4da5a0042, rainzm) region: add RequestSyncstatusOnHost for SESXiGuestDriver (13608b43e, rainzm) scheduler: fix array out of bounds when sorting hosts (6874b9440, rainzm)  Code Refactoring (3)  esxi: replace GetTemplateVMById with FetchTemplateVMById (35919e1ec, rainzm) esxi: fetchVms and fetchHardwareInfo (86c0af8ca, rainzm) region: optimize preparenet of cloudaccount (df64b9080, rainzm)  Disk (1)  check disk is need renew on guest set renew (6f5bb55ea, wanyaoqi)  Elasticips (1)  filter by owner when doing auto allocation (ef8b9e6ae, Yousong Zhou)  Features (2)  esxi: support fetchVM form datacenter (3a8c90d7d, rainzm) esxicli: better vm operator (af76ae975, rainzm)  Host (1)  fix rbd storage cache iso image (f017daafc, wanyaoqi)  Others (3)  guest short desc add backup host id (b120b87c4, wanyaoqi) fix get ubuntu version (22e4181b3, wanyaoqi) optimized cachedimages sync (23b02045a, Qu Xuan)  Vpcagent (1)  guard against foul eip records (96058b4af, Yousong Zhou)  Webconsole (1)  fix defer order to release zombie process (77c3e490c, wanyaoqi)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.3.5 since this release.\nNotify (1)  remove pvc dependence (5f1fadf, wanyaoqi)  Others (2)  etcd add cloud affinity (fd8c8c4, wanyaoqi) statusfulset set cloud affinity: (539d129, wanyaoqi)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n3 commits to sdnagent - v3.3.5 since this release.\nBuild (1)  eipgw: vrrp track script as monitor (fd4cf95, Yousong Zhou)  Sdnagent (1)  be cooperative (bda4f40, Yousong Zhou)  Vendor (1)  bump yunion.io/x/onecloud to current tip of release/3.3 (9f5ccbb, Yousong Zhou)  ","excerpt":"发布时间 2020-09-15 18:05:31\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.3/3-3-5/","title":"v3.3.5"},{"body":"Release time: 2020-09-06 15:33:08\n cloudpods Repo: https://github.com/yunionio/cloudpods\n33 commits to cloudpods - v3.3.4 since this release.\nBug Fixes (18)  skup syncing lb, rds, redis instances in tasks (ec659ddd4, Qiu Jian) network address list respect privilige of user (e2d98a4ce, Qiu Jian) support VirtualDiskRawDiskMappingVer1BackingInfo (79ef55b4f, Qiu Jian) find correct esxi host access ip (c7c1082e9, Qiu Jian) search by chs projectname or domainname (03de172d8, Qiu Jian) ignore invalid zone sku for rds sku sync (#7618) (64d0b4f8c, 屈轩) compatiblity fixes with lenovo RD620 and huawei 2288 (6ea402b57, Qiu Jian) add details for account delete (#7704) (32195ed70, 屈轩) avoid delete aws iam user failed (#7666) (3c7c7c172, 屈轩) vmware esxi host detects vnic portgroup info (#7659) (f15d7d8f3, Jian Qiu) server purge may fail (#7697) (589d7d48a, Jian Qiu) 不限制openstack系统盘类型 (#7676) (9424de9cf, 屈轩) cleanup logic for nics of pending_deleted guests (#7670) (f14220665, Jian Qiu) aovid truncated data (#7645) (c5e616b19, 屈轩) turn off some default project policies (#7638) (23d01a1e3, Jian Qiu) avoid openstack image-list failed (#7642) (ac1870272, 屈轩) avoid storage=nil, dis can not delete (#7609) (9f3b937e6, 屈轩) compute: return InputParameterError while ValidateCreateData (94409c25c, rainzm)  Features (1)  esxi: correctly judge whether inet is nil (03590d9f9, rainzm)  Glance (1)  check min disk size on update (a0246b410, wanyaoqi)  Hostinfo (1)  try create network add is_on_premise (#7708) (d5251af97, wanyaoqi)  Others (10)  pex register add optional column mac_access (6eb7c39d3, TangBin) create classic vpc fix (142b1bee2, TangBin) update host status to unknown on host offline (8a3d9e7d0, wanyaoqi) vmware disk support deploy lvm partition (e52415a73, wanyaoqi) Automated cherry pick of #7661: fix(host-deployer): Exit correctly after mounting (#7673) (938c9a681, Rain Zheng) fix host get guests (#7684) (9272b4399, wanyaoqi) fix get storage capacity on init' (#7688) (cc051942d, wanyaoqi) remove backup metadata on delete backup (#7655) (d8275fa79, wanyaoqi) eip \u0026 vpc manager match fix (#7651) (9ec851df2, tb365) fix gpfs check mountpoint (a04ee820f, wanyaoqi)  Vpcagent (2)  respect guest src check settings (#7679) (3268e59d2, Yousong Zhou) ignore network without wire ids (#7630) (3a966df65, Yousong Zhou)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.3.4 since this release.\nOthers (3)  deployment with pvc not set node affinity (#257) (e8533ef, Zexi Li) replace cloud affinity preferred by required (#254) (c0787c1, wanyaoqi) crontab timeout (bdecedb, zhaoxiangchun)   ocadm Repo: https://github.com/yunionio/ocadm\n2 commits to ocadm - v3.3.4 since this release.\nAutoupdate (1)  clear host tag (b02ac92, Zexi Li)  Others (1)  clean info from from autoupdate component when update (b810dbc, Zexi Li)   sdnagent Repo: https://github.com/yunionio/sdnagent\n1 commits to sdnagent - v3.3.4 since this release.\nOthers (1)  Automated cherry pick of #105: vendor: bump onecloud to 3.3 master (#106) (6347cbc, Yousong Zhou)  ","excerpt":"Release time: 2020-09-06 15:33:08\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.3/3-3-4/","title":"v3.3.4"},{"body":"发布时间 2020-09-06 15:33:08\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n33 commits to cloudpods - v3.3.4 since this release.\nBug Fixes (18)  skup syncing lb, rds, redis instances in tasks (ec659ddd4, Qiu Jian) network address list respect privilige of user (e2d98a4ce, Qiu Jian) support VirtualDiskRawDiskMappingVer1BackingInfo (79ef55b4f, Qiu Jian) find correct esxi host access ip (c7c1082e9, Qiu Jian) search by chs projectname or domainname (03de172d8, Qiu Jian) ignore invalid zone sku for rds sku sync (#7618) (64d0b4f8c, 屈轩) compatiblity fixes with lenovo RD620 and huawei 2288 (6ea402b57, Qiu Jian) add details for account delete (#7704) (32195ed70, 屈轩) avoid delete aws iam user failed (#7666) (3c7c7c172, 屈轩) vmware esxi host detects vnic portgroup info (#7659) (f15d7d8f3, Jian Qiu) server purge may fail (#7697) (589d7d48a, Jian Qiu) 不限制openstack系统盘类型 (#7676) (9424de9cf, 屈轩) cleanup logic for nics of pending_deleted guests (#7670) (f14220665, Jian Qiu) aovid truncated data (#7645) (c5e616b19, 屈轩) turn off some default project policies (#7638) (23d01a1e3, Jian Qiu) avoid openstack image-list failed (#7642) (ac1870272, 屈轩) avoid storage=nil, dis can not delete (#7609) (9f3b937e6, 屈轩) compute: return InputParameterError while ValidateCreateData (94409c25c, rainzm)  Features (1)  esxi: correctly judge whether inet is nil (03590d9f9, rainzm)  Glance (1)  check min disk size on update (a0246b410, wanyaoqi)  Hostinfo (1)  try create network add is_on_premise (#7708) (d5251af97, wanyaoqi)  Others (10)  pex register add optional column mac_access (6eb7c39d3, TangBin) create classic vpc fix (142b1bee2, TangBin) update host status to unknown on host offline (8a3d9e7d0, wanyaoqi) vmware disk support deploy lvm partition (e52415a73, wanyaoqi) Automated cherry pick of #7661: fix(host-deployer): Exit correctly after mounting (#7673) (938c9a681, Rain Zheng) fix host get guests (#7684) (9272b4399, wanyaoqi) fix get storage capacity on init' (#7688) (cc051942d, wanyaoqi) remove backup metadata on delete backup (#7655) (d8275fa79, wanyaoqi) eip \u0026 vpc manager match fix (#7651) (9ec851df2, tb365) fix gpfs check mountpoint (a04ee820f, wanyaoqi)  Vpcagent (2)  respect guest src check settings (#7679) (3268e59d2, Yousong Zhou) ignore network without wire ids (#7630) (3a966df65, Yousong Zhou)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n3 commits to cloudpods-operator - v3.3.4 since this release.\nOthers (3)  deployment with pvc not set node affinity (#257) (e8533ef, Zexi Li) replace cloud affinity preferred by required (#254) (c0787c1, wanyaoqi) crontab timeout (bdecedb, zhaoxiangchun)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n2 commits to ocadm - v3.3.4 since this release.\nAutoupdate (1)  clear host tag (b02ac92, Zexi Li)  Others (1)  clean info from from autoupdate component when update (b810dbc, Zexi Li)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n1 commits to sdnagent - v3.3.4 since this release.\nOthers (1)  Automated cherry pick of #105: vendor: bump onecloud to 3.3 master (#106) (6347cbc, Yousong Zhou)  ","excerpt":"发布时间 2020-09-06 15:33:08\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.3/3-3-4/","title":"v3.3.4"},{"body":"Release time: 2020-08-21 17:38:33\n cloudpods Repo: https://github.com/yunionio/cloudpods\n12 commits to cloudpods - v3.3.3 since this release.\nBug Fixes (11)  opslog filter by owner_project_ids and owner_domain_ids (#7601) (99818a7c0, Jian Qiu) member user only can get user \u0026 domain resource (#7598) (6cab61ecb, 屈轩) dns record create ignore is_public field (#7590) (01a838407, Jian Qiu) allow delete shared role and policy (cedd4ccdf, Qiu Jian) GetIImages correctly without ‘image_cache’ dir (f5d1adcbd, rainzm) aovid duplicate sku name (#7573) (66a5410e7, 屈轩) init wire domain_id for local vpc (#7567) (7a58d9f19, Jian Qiu) json TAG_PREFIX invalid syntax (5c8a7769e, Zexi Li) avoid virtual resource project id is empty when cloudaccount with no project (#7561) (ebe1eb603, 屈轩) Merge the host network correctly when preparenet (#7558) (eb67c681d, Rain Zheng) network port count stat recode (#7555) (e099f006f, Jian Qiu)  Others (1)  Automated cherry pick of #7585: apis: vpcs_ovn: alloc for interconnects (#7586) (d91f5fa87, Yousong Zhou)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.3.3 since this release.\nOthers (1)  fix baremetal storage size (b05d689, wanyaoqi)  ","excerpt":"Release time: 2020-08-21 17:38:33\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.3/3-3-3/","title":"v3.3.3"},{"body":"发布时间 2020-08-21 17:38:33\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n12 commits to cloudpods - v3.3.3 since this release.\nBug Fixes (11)  opslog filter by owner_project_ids and owner_domain_ids (#7601) (99818a7c0, Jian Qiu) member user only can get user \u0026 domain resource (#7598) (6cab61ecb, 屈轩) dns record create ignore is_public field (#7590) (01a838407, Jian Qiu) allow delete shared role and policy (cedd4ccdf, Qiu Jian) GetIImages correctly without ‘image_cache’ dir (f5d1adcbd, rainzm) aovid duplicate sku name (#7573) (66a5410e7, 屈轩) init wire domain_id for local vpc (#7567) (7a58d9f19, Jian Qiu) json TAG_PREFIX invalid syntax (5c8a7769e, Zexi Li) avoid virtual resource project id is empty when cloudaccount with no project (#7561) (ebe1eb603, 屈轩) Merge the host network correctly when preparenet (#7558) (eb67c681d, Rain Zheng) network port count stat recode (#7555) (e099f006f, Jian Qiu)  Others (1)  Automated cherry pick of #7585: apis: vpcs_ovn: alloc for interconnects (#7586) (d91f5fa87, Yousong Zhou)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.3.3 since this release.\nOthers (1)  fix baremetal storage size (b05d689, wanyaoqi)  ","excerpt":"发布时间 2020-08-21 17:38:33\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.3/3-3-3/","title":"v3.3.3"},{"body":"Release time: 2020-08-13 17:59:30\n","excerpt":"Release time: 2020-08-13 17:59:30\n","ref":"/en/docs/changelog/release-3.3/3-3-2/","title":"v3.3.2"},{"body":"发布时间 2020-08-13 17:59:30\n","excerpt":"发布时间 2020-08-13 17:59:30\n","ref":"/zh/docs/changelog/release-3.3/3-3-2/","title":"v3.3.2"},{"body":"Release time: 2020-08-11 20:59:07\n cloudpods Repo: https://github.com/yunionio/cloudpods\n18 commits to cloudpods - v3.3.1 since this release.\nBug Fixes (11)  separete enabled and status field (3b036e6c3, Qu Xuan) optimized huawei security group get and create operation (#7521) (3c63af8de, 屈轩) avoid nil pointer (6f5be444c, Qu Xuan) backport fix (bb1752fb7, Qu Xuan) 提高zstack认证兼容性 (b152aa333, Qu Xuan) 隐藏auzre经典类型存储 (bb0123694, Qu Xuan) 增加openstack兼容性 (#7493) (7a81820cd, 屈轩) typo running_geusts =\u003e running_guests (2153a79dc, Qiu Jian) filter public network count by zone and region (780cf826c, Qiu Jian) typo (62d2a732e, Qu Xuan) ignore bucket-set-acl not implemented error (4cbe29d0c, Qiu Jian)  Others (7)  support diable usb kbd (0742afb48, wanyaoqi) fix usage get storage capbility (#7528) (5439457bb, wanyaoqi) fix mount xfs (57cd48354, wanyaoqi) set disk status on disk detached (#7518) (52488eeb5, wanyaoqi) nodealert bugfix： (abe44154b, zhaoxiangchun) add image upload\u0026 s3 upload api (#7515) (6cdbae22a, tb365) fix host info get sshkey (39bcc36c2, wanyaoqi)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.3.1 since this release.\nOthers (1)  remove etcd-operator dependcies (#236) (698c93a, Zexi Li)   notify-plugins Repo: https://github.com/yunionio/notify-plugins\n2 commits to notify-plugins - v3.3.1 since this release.\nBug Fixes (1)  Add deadline for email and fix some proble (225694c, rainzm)  Others (1)  fix bug for email and smsaliyun (c59bf42, rainzm)   ocadm Repo: https://github.com/yunionio/ocadm\n2 commits to ocadm - v3.3.1 since this release.\nOthers (2)  update vendor for v3.2: (774b517, Zexi Li) update vendor cause of onecloud-operator (3208d00, Zexi Li)  ","excerpt":"Release time: 2020-08-11 20:59:07\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.3/3-3-1/","title":"v3.3.1"},{"body":"发布时间 2020-08-11 20:59:07\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n18 commits to cloudpods - v3.3.1 since this release.\nBug Fixes (11)  separete enabled and status field (3b036e6c3, Qu Xuan) optimized huawei security group get and create operation (#7521) (3c63af8de, 屈轩) avoid nil pointer (6f5be444c, Qu Xuan) backport fix (bb1752fb7, Qu Xuan) 提高zstack认证兼容性 (b152aa333, Qu Xuan) 隐藏auzre经典类型存储 (bb0123694, Qu Xuan) 增加openstack兼容性 (#7493) (7a81820cd, 屈轩) typo running_geusts =\u003e running_guests (2153a79dc, Qiu Jian) filter public network count by zone and region (780cf826c, Qiu Jian) typo (62d2a732e, Qu Xuan) ignore bucket-set-acl not implemented error (4cbe29d0c, Qiu Jian)  Others (7)  support diable usb kbd (0742afb48, wanyaoqi) fix usage get storage capbility (#7528) (5439457bb, wanyaoqi) fix mount xfs (57cd48354, wanyaoqi) set disk status on disk detached (#7518) (52488eeb5, wanyaoqi) nodealert bugfix： (abe44154b, zhaoxiangchun) add image upload\u0026 s3 upload api (#7515) (6cdbae22a, tb365) fix host info get sshkey (39bcc36c2, wanyaoqi)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n1 commits to cloudpods-operator - v3.3.1 since this release.\nOthers (1)  remove etcd-operator dependcies (#236) (698c93a, Zexi Li)   notify-plugins 仓库地址: https://github.com/yunionio/notify-plugins\n2 commits to notify-plugins - v3.3.1 since this release.\nBug Fixes (1)  Add deadline for email and fix some proble (225694c, rainzm)  Others (1)  fix bug for email and smsaliyun (c59bf42, rainzm)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n2 commits to ocadm - v3.3.1 since this release.\nOthers (2)  update vendor for v3.2: (774b517, Zexi Li) update vendor cause of onecloud-operator (3208d00, Zexi Li)  ","excerpt":"发布时间 2020-08-11 20:59:07\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.3/3-3-1/","title":"v3.3.1"},{"body":"Release time: 2020-08-02 19:03:34\n cloudpods Repo: https://github.com/yunionio/cloudpods\n763 commits to cloudpods - v3.3.0 since this release.\nAdd (1)  region/openstack 迁移接入 (386746365, lvyangyang)  Ansibleserver (1)  register metadata manager (916943a7c, Yousong Zhou)  Apigateway (2)  expose identity/image/k8s usage rpc method (686cc7824, Zexi Li) handlers: register cloudnet modules (a70d17d6d, Yousong Zhou)  Apis (4)  compute: move struct defs (8a79c0f70, Yousong Zhou) network: add NETWORK_TYPE_EIP (b62d41a83, Yousong Zhou) add const definitions for eip gateway ips (30844db32, Yousong Zhou) add ovn distgw const definitions (12639e027, Yousong Zhou)  Appsrv (2)  rework TestRing (358f5d41a, Yousong Zhou) ring: release ring content on pop (e37f15cac, Yousong Zhou)  Baremetal (6)  fix hpssactl split last LV size out of limit (#7427) (e64f24945, Zexi Li) set zone when enable netif (df4d88e19, Zexi Li) fix forget init lockman pkg (8ebabd6ae, Zexi Li) fix ssh put empty content file not created (541c72849, Zexi Li) find baremetal add scope system (cfc9fcedd, Zexi Li) ensure power up add retries (5693ae05d, Zexi Li)  Bug Fixes (301)  avoid generated codes having duplicate PerformSetScope methods (d834f3331, Qiu Jian) avoid host globalid change (#7466) (6e64fc4ca, 屈轩) elasticcache_account_reset_password_task.go cherry pick build fail (#7452) (88497da74, Jian Qiu) cloudaccount is created as system shared by default (e0fc57bea, Qiu Jian) sync share mode between vpc and wire (9dfed2845, Qiu Jian) 避免glance metadata-list project scope无权限 (#7403) (92d8437c4, 屈轩) 优化openstack项目认证 (#7398) (65cd074ff, 屈轩) 避免在仅调整虚拟机磁盘时opslog日志记录mem cpu异常 (#7393) (5dc829633, 屈轩) avoid lost backend params (46fa77b29, Qu Xuan) openstack win image user data need encode (c39de392c, Qu Xuan) ignore general s3 set acl not implemented error (7e47d7aeb, Qiu Jian) avoid account sync deadlock (01f384cf8, Qu Xuan) adjust scope of isolated_device and reservedips (1c78817ab, Qiu Jian) openstack多项目问题 (816b29267, Qu Xuan) avoid parse json err nil pointer (f9b51a9f5, Qu Xuan) 添加阿里云rds备份恢复限制条件 (ba953f20c, Qu Xuan) change owner should check required domain list (04b4ab376, Qiu Jian) 普通视图下，安全组仅统计可看到的vm count (6b2cb20f4, Qu Xuan) 同步sku与磁盘类型关系 (28a80ac52, Qu Xuan) 避免创建rds备份时对rds进行一些操作 (#7355) (bd6b45aae, 屈轩) 修复vm绑定重复安全组 (f03d021aa, Qu Xuan) add default perform allow policy to sysadmin (3f09d0019, Qiu Jian) modify list details for guesttemplate (d06d2026f, rainzm) list item export recode (880b0ecf4, Qiu Jian) 避免status_code\u003e=400并且resp为空时err为nil (#7265) (f2456d236, 屈轩) cloud account delete may fail due to inconsistent status (f624ab152, Qiu Jian) do accessibility check when dissociate eip from resource (ded8da001, Qiu Jian) schedtag should be system resource (4d33d1a70, Qiu Jian) choose candidate list from the list returned from backend (c90c0944c, Qiu Jian) 单独添加更新账单文件日志 (e7fc9b94b, Qu Xuan) 支持多项目安全组规则过滤 (fef5147ae, Qu Xuan) domain resource domain share to system when non_default_domain_projects off (671d20227, Qiu Jian) 阿里云资源组同步 (f5ed69217, Qu Xuan) 避免未能导出共享安全组规则 (1c4e9e00a, Qu Xuan) image upload not clean pending usage (ba983df32, Qiu Jian) quota usage not updated after disk resizing (508f30901, Qiu Jian) rds备份恢复优化 (ecb7249a1, Qu Xuan) default vpc must be shared globally (fa67bd831, rainzm) globalvpc跟随云账号共享 (f8471832e, Qu Xuan) 过滤可用eip (23e17fe0a, Qu Xuan) 避免乌兰察布区域拉取资源异常 (a443975f7, Qu Xuan) prefetch image error when create guest with vmware template (4ef5267a8, rainzm) not work for network-list –zones (d6b83fbbf, Qu Xuan) sec rule export missing fields (cee24b2a7, Qu Xuan) check azure image format when rebuild root (1b5b8081f, Qu Xuan) 避免华为云安全组规则删除失败 (64599b481, Qu Xuan) clouduser’s cloudgroups info (fb229f6c7, Qu Xuan) 添加secgroup rule过滤参数 (a5fc7c807, Qu Xuan) 修复cloudid get权限问题 (09f2b2af2, Qu Xuan) azure 支持权限 (c003f78f6, Qu Xuan) 修复cloudid用户列表权限问题 (26434683c, Qu Xuan) 优化webconsole代码\u0026bugfix (ea3097240, Qu Xuan) mo.VirtualMachine’s Config maybe nil (0420266b7, rainzm) 修复阿里云同步安全组规则异常问题 (2f42e9e5f, Qu Xuan) 避免google clouduser同步权限异常 (7056fa01b, Qu Xuan) 修复vpc同步异常问题 (ef6d0c2ad, Qu Xuan) 避免越界访问 (09ccf107c, Qu Xuan) opslog show the owners operation logs only (a186f2587, Qiu Jian) remove default allow policy for storages (8f7223b1d, Qiu Jian) cloudid 权限修复 (05c730ace, Qu Xuan) cloudid 异常修复 (b4ed25963, Qu Xuan) 修复资源组云上同步异常问题 (89cb75bfe, Qu Xuan) 修复qcloud同步权限组异常问题 (21178638f, Qu Xuan) 修复azure 项目同步问题 (e8ff39a01, Qu Xuan) 避免请求中国区iam异常 (5f9b6622f, Qu Xuan) perform private on vpc will private all wires if no networks in wires (2286ef19b, Qiu Jian) 修复腾讯云操作日志时间异常问题 (8a1d2d1ea, Qu Xuan) 修复elastic cache sku zone_id异常问题 (76906efea, Qu Xuan) 分开统计安全组关联虚拟机数量 (a997cf498, Qu Xuan) json request 支持自定义匹配err (6ac6768e3, Qu Xuan) remove default host list policy (eb342a70a, Qiu Jian) cloud poilcy count (367d3f147, Qu Xuan) 避免cloudprovider同步缺失 (e7cd84275, Qu Xuan) google rds regional and zonal (79d016985, Qu Xuan) cloud account sync may block (6133b1a5c, Qiu Jian) 避免azure同步资源组异常 (fcf1e193b, Qu Xuan) 避免slave zoneid异常 (f303512a7, Qu Xuan) 同步不需要判断账号是否有iam权限 (acf641be2, Qu Xuan) clouduser can_delete always be false (a54a9c05b, Qu Xuan) 优化安全组list速度，并发挥rule规则信息 (dc3ef5c61, Qu Xuan) 公有云子账号加域属性 (9c6234307, Qu Xuan) 修复cloudid同步问题 (544c19f3c, Qu Xuan) 取消aliyun lb scheduler创建限制 (82d0f5c03, Qu Xuan) manager_id资源隔离获取 (66fc71cc8, Qu Xuan) 优化sku同步逻辑 (04427515f, Qu Xuan) Override Master and Slave for scalinggroup_guest (23c76dc79, rainzm) validate candiate ip for sync-fix-nics (41a9d9242, Qiu Jian) capability for cloudid (781cc3ed6, Qu Xuan) 避免未本地缓存usercache (45819e6c1, Qu Xuan) 修复cloudid问题 (223c9439b, Qu Xuan) 支持同步project标签到本地资源 (e31334b47, Qu Xuan) 修正项目映射同步 (b25295bf0, Qu Xuan) 修复权限组权限同步异常问题 (21a09d29d, Qu Xuan) reduce totp verification overhead (265bbc6e7, Qiu Jian) 避免同步不到其他域的云账号 (ef0242d15, Qu Xuan) Error occurs when suitableWire exists or all suitableNetwork exist. (030a2edfb, rainzm) disable domain sharing if non_default_domain_projects turned off (a23f57da4, Qiu Jian) sort quota list result by usage rate (9012180b6, Qiu Jian) keystone project resource count not accurate (161db6d95, Qiu Jian) google资源名称兼容处理 (4f5a2ff43, Qu Xuan) simplify forbidden user login message (611b9e9b5, Qiu Jian) 避免azure同步项目失败 (f8cce2892, Qu Xuan) wrong cloud provider status when sync disconnected cloud account (1d9a3f273, Qiu Jian) network created by sysadmin should be shared by default (5c53ccc3d, Qiu Jian) Fix problems about sending verify email (109bdc05d, rainzm) 避免同步删除失败 (3c75119c5, Qu Xuan) Fix the url of ‘notify-template-delete’ in climc (8ed4148fb, rainzm) policy allow if one of the matching rules is allow (2efb7fc9e, Qiu Jian) disable policy rule compaction (818d40c08, Qiu Jian) 优化标签列表version问题 (d296a1801, Qu Xuan) Support to set the label of scheduledtask to Chinese (3e7a5acb9, rainzm) Add zero padding in front of execution time for scheduledtask (0dad8351d, rainzm) 避免openstack磁盘和存储窜位 (4e48d33ec, Qu Xuan) 避免sql erorr (aa0d05ccd, Qu Xuan) policy-explain not working properly (5ebb18b69, Qiu Jian) Hanle the error of vdisk.GetIStorage in syncCloudDisk (4c6682617, rainzm) Add ‘/version’ handler for notify (2cd2f3d02, rainzm) 更正华为云操作成功判断 (5837b696d, Qu Xuan) disable updating zone_id for host, storage, wire (1e4acedf2, Qiu Jian) Wait for ticker when get status is wrong (7e80ecf61, rainzm) 优化安全组同步逻辑 (03a3dfcd7, Qu Xuan) handler param.convert’s error in caller.go (c793746f0, rainzm) explainPolicy piggyback owner’s privilige (e7b198ab3, Qiu Jian) base64 decode 12-bytes plain text password return nil (a51d554d7, Qiu Jian) remove spaces in name (06e19c494, Qiu Jian) oss-upload fail to set object acl (d519a6584, Qiu Jian) 返回object默认acl (510eb101e, Qu Xuan) xsky recode using endpoint as accesskey key (de081a768, Qiu Jian) Support ‘generate_name’ when saving template from guest (27f746eb2, rainzm) 避免openstack session==nil (90aa83494, Qu Xuan) keystone event list fail to find user (b917ea6a1, Qiu Jian) 添加region翻译 (6ba9a8fae, Qu Xuan) 修复gcp object编码问题 (c706821a7, Qu Xuan) 移除默认调度策略 (c2ce0460a, Qu Xuan) 转换gcp错误 (9069814b1, Qu Xuan) 避免越过tenantcache过期检查 (8754ef243, Qu Xuan) 允许gcp创建vpc时不指定cidr (53d771025, Qu Xuan) gcp默认创建允许所有地址访问的用户 (f73b3ed03, Qu Xuan) apigateway expose esxiagent service avaiability (ddc483509, Qiu Jian) 避免锁超时 (a519a6612, Qu Xuan) gcp path escape for object (23df2235e, Qu Xuan) sync s3 bucket status (7cb40ec3c, Qu Xuan) add us-west4 for google region (1997e41ea, Qu Xuan) class method GetPropertyXXX should support rbac (a99deb614, Qiu Jian) 安全组规则返回项目id信息 (61ff1544e, Qu Xuan) 华为企业项目映射同步 (3a0b5c5e2, Qu Xuan) byte size fix (5ed624d15, Qu Xuan) ignore match weights when searching matched policysets (015702846, Qiu Jian) generating bucket APIs (5e77a9682, Qiu Jian) typo (f9dcb2bb7, Qu Xuan) lb FetchCustomizedColumes fixes (f82543e23, Qiu Jian) 避免因磁盘数量导致创建机器失败 (caf07c256, Qu Xuan) sysadmin cannot convert host in non-default domain (f54d63325, Qiu Jian) 避免azure卸载磁盘失败 (d4b16667d, Qu Xuan) domain user no previleges to convert host (c563f021b, Qiu Jian) scheduler test ignore quota limit (354a61632, Qiu Jian) 移除azure policy sync部分 (9e07cda2b, Qu Xuan) sku status filter (95ae69c2b, Qu Xuan) bucket信息修正 (f89be60e6, Qu Xuan) tmp update (893d77398, Qu Xuan) 通用指定项目到云上创建资源 (9916c9917, Qu Xuan) retry ipmi probe if redfish-api-probe fails (3699a9b20, Qiu Jian) identity_provider details missing fields (f9bc5f692, Qiu Jian) default policy not effective (03477cbe7, Qiu Jian) 避免openstack以镜像做系统盘创建失败 (b31922a3b, Qu Xuan) Support filtering notification with contactType (ee85dec1c, rainzm) empty matched policies list for roles (728524fef, Qiu Jian) 返回项目信息 (5cdeebb04, Qu Xuan) 加入Azure套餐和镜像的检查 (0f2ff5384, Qu Xuan) 避免azure uefi重装系统失败 (a9c001200, Qu Xuan) 避免因io问题导致同步镜像列表为空 (a7e1bdf6f, Qu Xuan) usage for schetag not accurate (1dfef4dcf, Qiu Jian) gcp bucket文件夹默认设为private (ef25bf328, Qu Xuan) aliyun rds backup create fix (b260c04c3, Qu Xuan) 避免regional network-list –zone导致返回结果为空 (8bc4927d5, Qu Xuan) system privileges user cannot access system console (29283ff11, Qiu Jian) 避免忽略本地allow any云上deny any安全组规则同步 (c8ba52c94, Qu Xuan) 上传镜像为转换列表之外时,subformat状态异常 (1354270c5, Qu Xuan) ‘requirements’ in ansibleplaybookv2 should be optional (77e5801ad, rainzm) cloudaccount share_mode not initialized (08eda0d44, Qiu Jian) 仅当变更domainId时才需要更新projectId (bf57b829a, Qu Xuan) policy details should carry updated_at and created_at fields (4c313f5a2, Qiu Jian) delete idp also delete users/groups in target domain (3118a1020, Qiu Jian) 尽量避免因代理问题导致google request异常 (f7bf34ee1, Qu Xuan) 支持公有云指定资源组 (f9b1466f4, Qu Xuan) 支持指定resource group (4b5f8b8d5, Qu Xuan) 修复zstack使用win镜像时userdata base64加密问题 (f162ac46f, Qu Xuan) cloudprovider list support filter by zone and cloudregion (50f55c299, Qiu Jian) 优化azure image同步逻辑 (b18035442, Qu Xuan) policy create fail on initialization phrase (5b60c4fad, Qiu Jian) anonymous user may list resources (f4a676575, Qiu Jian) 避免大范围安全组共享 (8f4e0a5e8, Qu Xuan) image-list –sub-format support (f9c794f74, Qu Xuan) 加入azure镜像vhd检查 (589a4678f, Qu Xuan) update fields permission tags (d1fd24538, Qiu Jian) 避免设置自动释放后磁盘的expired_at失效 (3fe417c4f, Qu Xuan) 避免仅同步一个region时，其余region状态变为准备中 (33c2b5fa9, Qu Xuan) 优化标签列表过滤参数 (e306a4e23, Qu Xuan) bugfixes (b312b5dac, Qiu Jian) disable delete standard image (ed5463ca6, Qiu Jian) fail to explain permission for disabled policy (54689d862, Qiu Jian) server-sync-fix-nics should return errors if vnics ip is not reachable on host (605978a94, Qiu Jian) xxx-agent should generally use scope=system to list resources (41125788f, Qiu Jian) esxi disk project sync (039644e89, Qu Xuan) do not share porject resource by default (ea254c8ed, Qiu Jian) blacklist keystone reset admin password (7655f8e2a, Qiu Jian) 自动创建项目 (72fb9a58d, Qu Xuan) 修复华为云eneterprise-project-list异常问题 (4d71f7e2a, Qu Xuan) 非私有云同步region name (86087b9ac, Qu Xuan) 避免backup list未能正常显示rds信息 (d82cf4184, Qu Xuan) FindAnonymousStructPoint needs input as a pointer to struct (ead8825dc, Qiu Jian) set public_scope to system for image with is_public=true (eb54f316c, Qiu Jian) 优化rds zone同步逻辑 (fc4778f33, Qu Xuan) 优化windows powershell userdata (5c6b016c2, Qu Xuan) avoid using background context (c35758dd0, Qiu Jian) status-base resource’s action log missing owner project/domain (9c26c0408, Qiu Jian) host agent list use baremetalagents model (5c8081b6b, Qiu Jian) reserved ip owner filter (07766b7b4, Qiu Jian) i-ps -\u003e ips (b0b45c420, Qu Xuan) openstack 安全组规则同步 (df5f5c9b9, Qu Xuan) change-owner-candidate-domains not implemented for some resources (4a84beee0, Qiu Jian) 避免provider错乱返回 (bd21b346a, Qu Xuan) 优化openstack错误处理 (2da49eb0d, Qu Xuan) cloud-provider-list support filter by cloudregion (d271ff69f, Qu Xuan) 支持访问其他服务的标签列表 (f01bed833, Qu Xuan) isolated_devices domain filter not working (e9101ebc2, Qiu Jian) gcp rds 默认不使用vpc网络 (8cfbf9a8f, Qu Xuan) 避免卸载完已删除的磁盘后，磁盘状态为ready (8a8d0f900, Qu Xuan) globalvpc count vpc (b6ec2b406, Qu Xuan) 避免aliyun磁盘计费类型多次转换 (2560fa345, Qu Xuan) create cloudaccount with disabled state (3b0bc3858, Qiu Jian) panic when disk has no valid storage_id (42171cb9c, Qiu Jian) init sharing status of default vpc and default secgroup (77f35bae2, Qiu Jian) recode sync public_src of cloud resources (bea90b4b1, Qiu Jian) guestsecgroup-list panic (99ddc175b, Qiu Jian) allow delete shared resource (8bd0205bb, Qiu Jian)   vpc, cloudprovider should not violate the sharing limit of cloud account 2. sharing mode of host and attached local storage should be consistent. 3. cannot change owner of shared resource (f2e0fcf4e, Qiu Jian)   export missing keys \u0026\u0026 export panic (bfa878676, Qiu Jian) missing methods for SDomainRegionalCloudResourceKeys (c7d58dee9, Qiu Jian) fail to sync share state for on-premise storages (45b8494cd, Qiu Jian) api doc(guests -\u003e servers) (6cff98f85, Qu Xuan) missing perform public/private actionlog (c473c9299, Qiu Jian) shared cloudprovider not accessible (a2a60245b, Qiu Jian) shared resource should not be deletable (6f3e18930, Qiu Jian) fail to fetch real client ip from httprequest (5ff4b9748, Qiu Jian) secgroupcache权限问题修复 (10469342b, Qu Xuan) list lbbg panic (34aacdcde, Qiu Jian) remove cloudaccount autosync randomness (0e03bfc27, Qiu Jian) 云账号创建可以指定项目 (c12c489e9, Qu Xuan) sysadmin can override policy violation check (b1647e7eb, Qiu Jian) usage-handler 不统计虚拟的vpc wire (d66197068, Qu Xuan) cloud-account-usage vpc/storage not accurate (f39f83816, Qiu Jian) export files complain duplicate field name error (5c138b919, Qiu Jian) prevent policy violation (ecb483b9b, Qiu Jian) 避免gcp创建创建文件夹失败 (b805d3495, Qu Xuan) 修复openstack存储同步问题 (e43af577b, Qu Xuan) 普通用户可获取rds账号密码 (0ff17ebef, Qu Xuan) gcp fake region status (86251d1ca, Qu Xuan) cloudaccount usage region/zone count not accurate (8d7bc247c, Qiu Jian) gcp use project name for cloudprovider (139b9592c, Qu Xuan) cloud-account/provider usage not accurate (912bf5c69, Qiu Jian) proxysetting attributes should be domain-settable (1e81c79ad, Qiu Jian) json unmarshal (b48dbbc5c, Qu Xuan) resolve parameter name conflict in google cloud account create input (d4600430a, Qiu Jian) opslog FetchOwnerId fail (1882232b4, Qiu Jian) network allocation according to sharing status (68c03778a, Qiu Jian) GetOnPremiseNetworkOfIP should return underlay networks (2498af7c3, Qiu Jian) update README api docs url to v2 (5f4f11bee, Qiu Jian) dns name pattern revisited (61051b843, Qiu Jian) code autogen issues (7ab3a06b4, Qiu Jian) 避免rds任务交叉运行 (5754fe90c, Qu Xuan) domain resources' field tags should changed to domain tags (ee42b9c01, Qiu Jian) cloudevent使用代理优化 (cea9cf95b, Qu Xuan) 添加cloudevent过滤参数 (a5b6e894b, Qu Xuan) opslog create fail (1b861a41f, Qiu Jian) clean pending usage caused by pre-validate-create-data (2297c6e96, Qiu Jian) is_managed filter is not accurate (b7b496676, Qiu Jian) typo (05012f0ba, Qu Xuan) 转换非标准存储类型到lrs (0f2e997f6, Qu Xuan) show sql connection error (9cb2727bf, Qu Xuan) esxi: Remove ‘Destory’ operation that is unnecessary for VirtualDiskManager (dae02ec01, rainzm) esxi: Disable automatically add host to the dvs (3530bca49, rainzm) esxi: Select correct unitNumber for ide control when creating disk (7c8200290, Rain Zheng) esxi: Modify the disk size correctly when creating vm (d71024849, rainzm) esxi: Set ‘WindowsDefaultAdminUser’ as true when deploy vm. (33184357b, rainzm) esxi: Detach all disk first when deleting vm (9bb732077, rainzm) esxi: Fix GetDriver and add driver log for vdisk. (81ffd582f, rainzm) esxi: Add usb to support mouse in vnc viewer (874ea4eb4, rainzm) esxi: Allow the creation of duplicate vcenter machines. (60a363a79, rainzm) esxi: Separate detach disk and delete disk when rebuilding. (b6ce495d4, rainzm) esxi: Set ‘IsInit’ as true when rebuildroot (2fe738b46, rainzm) host: No tag when tag’s value is empty (72716b8d5, Rain) notify: Remove default mobile template (9374c65a8, rainzm) region: Fix problems for Auto Scaling (4f27908ff, Rain) region: Set default value if rootdisk’s driver is empty. (45305648d, rainzm) region: Remove default secgroup for esxi guest (cd0125855, rainzm) region: zone from guesttemplate’s preferzone maybe nil (5ee969821, rainzm) region: Don’t allow address conflicts under vpc (18f5f9cb8, rainzm) region: Fix problems for Auto Scaling (7d52e5de8, Rain) region: Add CustomizeListFilter for snapshotpolicy (a9b7ca520, Rain) region: Add implements about owner for ScalingPolicy and ScalingActivity (6e9366f56, Rain)  Build (3)  ansibleserver: use native alpine, include openssh (e5dd8efd7, Yousong Zhou) docker: use openvswitch:2.10.4-0 (235339601, Yousong Zhou) add vet-check (8e40ff64f, Yousong Zhou)  Capability (1)  public network count filter by default vpc (80ae1b6cd, Zexi Li)  Climc (14)  refactor k8s resource (a6db3d353, Zexi Li) lbagent-show-default-params: add –cluster option support (333954add, Yousong Zhou) add command lbagent-show-default-params (e8b680352, Yousong Zhou) lb-update: add –cluster argument (1a308442c, Yousong Zhou) lbcluster-create: mark –zone as required (74e19af51, Yousong Zhou) lblistener-create: make –scheduler an optional arg (ea8cd6d7e, Yousong Zhou) shell: networks: add eip to server type choices (eaa16f333, Yousong Zhou) eip-create: make manager, region optional arguments (56c89ed57, Yousong Zhou) vpcs: add –external-access-mode argument (a0b39cc7b, Yousong Zhou) update k8s resource cmd (9f0df58c9, Zexi Li) k8s component add monitor options (8df155916, Zexi Li) remove stale zsh completion code (16adec3a5, Zexi Li) add k8s monitor component (90618466b, Zexi Li) support zsh completion (e884f4b6f, Zexi Li)  Cloudaccounts (1)  one sync task in queue per cloudaccount (8f5c65b92, Yousong Zhou)  Cloudcommon (11)  taskman: fix table insert (986878289, Yousong Zhou) tablespec: informer: use %#v to log bad obj (60293ef05, Yousong Zhou) taskman: SetModelManager (db9789c86, Yousong Zhou) tablespec: informer: log obj type (2f79c99dc, Yousong Zhou) policy: fix interval and oneshot sync (aeba29c4b, Yousong Zhou) app: cosmetic change (28e83a312, Yousong Zhou) cmdline: rework test (2a32627b5, Yousong Zhou) expose ITableSpec function (10603b4f6, Zexi Li) rbac: fix typo (5499f3509, Yousong Zhou) elect: notifyOne on subscribe (d845700ca, Yousong Zhou) allow create:“domain” tag (14389667a, Yousong Zhou)  Cloudprovider (2)  fix typo (ef695acae, Yousong Zhou) add methods for getting http client (a9061e545, Yousong Zhou)  Disks (1)  reword error message on bad DiskConfig struct (749fd878b, Yousong Zhou)  Dnsrecords (2)  allow updating only description (2f056b9ef, Yousong Zhou) note that DnsRecordManager is a IAdminSharableVirtualModelManager (06abfccbb, Yousong Zhou)  Elasticips (7)  onecloud: support changing bandwidth (df3c337bf, Yousong Zhou) list usable eips for onecloud kvm guests (2390e352f, Yousong Zhou) onecloud: support sync and syncstatus (18fe12a4a, Yousong Zhou) onecloud: create op (325464624, Yousong Zhou) onecloud: delete op for non-managed eip (fa833e694, Yousong Zhou) make manager, region arguments optional (8e1b6ded3, Yousong Zhou) only create eip of mode elastic_ip (0bf41caa3, Yousong Zhou)  Feature (9)  project filter that list jointable projects for user or group (b49272eb3, Qiu Jian) CloudId服务支持 (a07b112be, Qu Xuan)   allow enable/disable idp-synced-users 2. turn off user’s MFA by default (2cf49c37d, Qiu Jian)   add functime get lastest last start time of a billing duration (81b6a766a, Qiu Jian) user login into project with highest privilege automatically (c209fdd97, Qiu Jian) reorganize climc codes (1843ba334, Qiu Jian) decouple metadata resource and standalone resource (722498bf9, Qiu Jian) make baremetal options managed by service config (ee9289c23, Qiu Jian) climc support auth by token (7de51b9d7, Qiu Jian)  Features (16)  Support vm to save server template (1265e5d1e, rainzm) Support suggest network config before create vmware cloud account (14f324ea4, rainzm) Add ‘ScheduledTaskQueueSize’ options (3ea4beeb8, rainzm) Add climc command for ScheduledTask and ScheduledTaskActivity (2b7bd7a12, rainzm) Detach ScheduledTask when pending delete guest (8d30ef0ad, rainzm) Add handers and table for ScheduledTask… (d6c5c29c6, rainzm) Add ScheduledTask, ScheduledTaskActivity and ScheduledTaskLabel (058cc4fdc, rainzm) Extract STimer from SScalingTimer (8a2e23fd4, rainzm) Logo and copyright in verify email are same with these in company info (156ef6bd2, rainzm) Supports disabling of feishu and dingtalk notification (f73bcf8ad, rainzm) notify: Support ‘socpe:domain’ when list contacts (cfcaa50e2, rainzm) notify: Change the format of verify email (c706cfa27, rainzm) region: Add ‘EipAutoDellocate’ option when creating vm (727154461, Rain) region: Check periodically whether Guest Template is valid (f9b7c7e57, rainzm) region: Structured diskinfo and add ‘Id’, ‘Name’ field (8c4b025dc, Rain) scheduler: Change the action for guests with backup and instanceGroup (2a0c16c6f, rainzm)  Guestdrivers (3)  rework test (e27a12ec6, Yousong Zhou) kvm: eip associate (8b82d67b6, Yousong Zhou) managed: use const api.EIP_STATUS_ASSOCIATE (df2d98d8c, Yousong Zhou)  Guestnetworks (5)  reduce odds of collision seeded by epoch seconds (173448ee4, Yousong Zhou) use math/rand instead of crypto/rand (6a63aa942, Yousong Zhou) add EipId field (ff6e3e236, Yousong Zhou) try allocation of mapped addr on sync (06ea1b170, Yousong Zhou) add vpc id and mapped ip addr info to nic desc (9990ad3bc, Yousong Zhou)  Guests (6)  guests with vpc nics are available for eip association (2270704c4, Yousong Zhou) support server-create-eip for onecloud guests and eip (7e02808c8, Yousong Zhou) list usable guests for specified eip (df4d80fbd, Yousong Zhou) include vpc, network info in guest nics list (b29c4b386, Yousong Zhou) simplify code (64f269ac2, Yousong Zhou) always include host_id in desc (ff2686689, Yousong Zhou)  Hostman (9)  options: add option –ovn-underlay-mtu (d714e450f, Yousong Zhou) options: add option –sdn-pid-file (61659d7b2, Yousong Zhou) options: knobs for enabling features in sdnagent (25d05899d, Yousong Zhou) options: remove k8s_cluster_cidr (68b7ecf83, Yousong Zhou) options: fix default value spec (cbe5ef416, Yousong Zhou) options: pack up a Parse() func (0e16bf8ff, Yousong Zhou) let sdnagent do port cleanup (f05e16bd1, Yousong Zhou) options: add ovn_mapped_bridge (279e68ae0, Yousong Zhou) options: add allow_xx_vms (5acbec452, Yousong Zhou)  Hotfix (1)  vpc change owners with wire (c97e2ab1c, Qiu Jian)  Informer (1)  do not inform if backend not init (7c61e9662, Zexi Li)  Iproute2 (4)  address: make Exact idempotent (4b6d385e1, Yousong Zhou) route: add del funcs (91defab40, Yousong Zhou) errors: add IsErrSrch() (690039309, Yousong Zhou) route: prepare for route del (a5c253e12, Yousong Zhou)  Keystone (3)  passwords: SetModelManager (f1dfcd5e0, Yousong Zhou) config: SetModelManager for whitelisted config (7d47ac4dd, Yousong Zhou) fix db not sync (9a6065fbf, Zexi Li)  Lb (4)  include cluster name info in details (5f49670e1, Yousong Zhou) onecloud: allow empty string for redirect_{scheme,host,path} (3fe10a738, Yousong Zhou) onecloud: disallow creating lb with vpc network (ce741a24c, Yousong Zhou) allow update cluster_id with PUT request (539521087, Yousong Zhou)  Lbagent (6)  default-params: default vrrp params from peer lbagents (71e9f99b6, Yousong Zhou) new API: GET /loadbalanceragents/default-params (2b98f75c7, Yousong Zhou) fix condition for “nothing to serve” (3ae45d55e, Yousong Zhou) standalone rate control between listener and its rules (7e2273bfb, Yousong Zhou) decouple rule redirect from listener redirect (3d58d51ab, Yousong Zhou) fend off unexpected resources just in case (7f982d5b2, Yousong Zhou)  Lbagents (2)  add check on vrrp.advert_int (258aba250, Yousong Zhou) params: add needsUpdatePeer() and updateBy() methods (57e29330b, Yousong Zhou)  Lbbackend (2)  kvm: allow adding ‘host’,“ip” backend type (b6110fd3a, Yousong Zhou) ValidateCreateLoadbalancerBackendData: use httperrors (97c5afda5, Yousong Zhou)  Lbbackends (1)  allow backends of the same region (vs. zone) (1dc312303, Yousong Zhou)  Lblistener (5)  rename filter name certificate{,_id} (0f953b8b2, Yousong Zhou) allow turning on/off redirect (471755103, Yousong Zhou) redirect: try avoid endless redirect (d3313eba4, Yousong Zhou) make scheduler an optional arg on creation (473932311, Yousong Zhou) fix updating lblistener without backend_group field (1224cd819, Yousong Zhou)  Lblistenerrule (3)  allow turning on/off redirect (856310331, Yousong Zhou) redirect: try avoid endless redirect (2cd6c8588, Yousong Zhou) allow creation even for redirect listener (d55af7af2, Yousong Zhou)  Lblisteners (4)  remove unused acl_name field (5833f1a90, Yousong Zhou) list: show acl name (04abe448f, Yousong Zhou) list: show certificate name (ab71f5e6c, Yousong Zhou) list: filter with certificate ids (07ae9c12e, Yousong Zhou)  Mcclient (5)  options: loadbalanceragents: yum as the default deploy method (5218f8aab, Yousong Zhou) lb: allow empty string as arg for –redirect-{scheme,host,path} (003884860, Yousong Zhou) options: lb: arg rename cluster{,_id} (b4ce65109, Yousong Zhou) options: add EmptyOption (d4416f614, Yousong Zhou) options: remove implied details=true for pending_delete=all (9a47116a1, Yousong Zhou)  Monitor (2)  reduce subscription mysql usage (de889ec6c, Zexi Li) refactor suggest code (995e5859e, Zexi Li)  Multicloud (4)  speed up objectstore test (d4f54af5a, Yousong Zhou) huawei: rework responses_test (020831407, Yousong Zhou) loader: guard against changing proxyFunc of default client (e711ae764, Yousong Zhou) avoid changing transport of global default http client (fd3c9e5cd, Yousong Zhou)  Networks (7)  validate that start, end, gateway ip are in the same subnet (0280b6aa5, Yousong Zhou) validateUpdateData: eliminate intermediate vars (f4a001ad6, Yousong Zhou) decrease indent (927cbd415, Yousong Zhou) sep check of masklen only for start,end type creation (f27e17727, Yousong Zhou) create eip network only in default vpc (772038024, Yousong Zhou) return HTTP 404 for sql.ErrNoRows (72c23e877, Yousong Zhou) eliminate a variable (1d78510fa, Yousong Zhou)  Opslog (4)  remove unneeded nil check (4bbf7c048, Yousong Zhou) group literal fields (50449ca01, Yousong Zhou) readability change (fbc48c792, Yousong Zhou) LogEvent: set model manager (be46546ba, Yousong Zhou)  Opt (1)  scheduler: better sort for hosts when selectHost (49b0a01b0, rainzm)  Optimized (1)  支持ip和端口过滤安全组 (f12192f1c, Qu Xuan)  Others (199)  update apis generate model (042cd597f, Zexi Li) fix reauth condition on influxdb not found (#7457) (8172a551b, wanyaoqi) fix cache non lvm disks (#7460) (381a2796b, wanyaoqi) aws elb listener\u0026rule name too long fix (38e02db07, tangbin) fix redis reset account password action log (bb500edc8, tangbin) loadblancer listener modify name fix (d9488f552, tangbin) fix deploy admin auth key (7ad7774f8, wanyaoqi) fix panic on storage failed get host (#7391) (a2d562cca, wanyaoqi) adjust schedule resource condition width (7103f4e71, Zexi Li) fix schedtag list output (2ac39e704, wanyaoqi) Add metadata for GuestTempalte details (a66ba3f39, rainzm) Add network info when list scalingGroup details (02b30326f, rainzm) 修改报警消息模版： (619322176, zhaoxiangchun) 修复统一报警bug (bb66e2d19, zhaoxiangchun) go fmt (92fbc44b6, tangbin) go fmt (d93edbe42, tangbin) host upload template check (a4d89b1f6, tangbin) huawei fetch regions\u0026projects fix (5255df021, tangbin) rename vgname centos (7ef340fb6, wanyaoqi) fix clone clean pending usage (a329cd536, wanyaoqi) capabilites add available host count (32b36ee10, wanyaoqi) fix snapshot clean pending usage (2c27db42c, wanyaoqi)   add precheck for perform action (ec933e480, wanyaoqi)   format fix (2ff5d2aaf, tangbin) fix empty else (b5aceb67f, tangbin) fix host import (2794c84ac, tangbin) fix huawei delete resource (ce9646f9e, tangbin) fix huawei elb disable healthcheck (be8da39ce, tangbin) lb sync project fix (dacc8adce, tangbin) add more log (b79c410b0, tangbin) apigateway host imports data validate (b5754d2e3, tangbin) fix GetOrCreateVpcForClassicNetwork (f9c422112, tangbin) huawei eip delete fix (fdcaa1c8e, tangbin) 修复监控报警规则删除的问题 (c65fc0f1d, zhaoxiangchun) fix error output (18bae1849, wanyaoqi) acl delete condition fix (3e5eceeef, tangbin) fix server sync status (0e617ec13, wanyaoqi) sync classic redis fix (30aa75e04, tangbin) add params auto_migrate_on_host_down (b806e536f, wanyaoqi) misc ha guest fix (65408519a, wanyaoqi) disable procutils print error info (4831aee2d, wanyaoqi) fix list guests on host (f09eb6690, wanyaoqi) cloudprovider usable filter with zone (26757cb8d, tangbin) fix guest template health check (550883197, rainzm) remove informer code for release/3.3 (a365a0f45, Zexi Li) user batch register bugfix (b52eb8491, tangbin) vendor update: update jsonutils (d335c570c, wanyaoqi)   fix local storage init local man (fe472cbf4, wanyaoqi)   misc fix (5070775cd, wanyaoqi) fix set storage info bind mount (18a023f2f, wanyaoqi) update vendor (13f44debc, tangbin) Update docker image onecloud-base and its references (eb7b055ca, rainzm) 增加influxdb的tag 的一些filter (5db35871e, zhaoxiangchun) Update Dockerfile.ansibleserver (69a4b1272, rainzm) bind mount nfs storage path (5db73a667, wanyaoqi) cluster_d required-\u003eoptional (87cf251d2, tangbin) copyright api update (a3245195a, tangbin) fix the bug introduced in #6643 (968568487, rainzm) update jsonutils (b4884e3dd, rainzm) fix deploy backup server order (207cd93fe, wanyaoqi)   add server pending deleted for host details (875108248, wanyaoqi)   include system usage (89ec83fec, wanyaoqi) server name enable upper case (6f20638f8, wanyaoqi) fix get storage capabilities with null field (615fe1da8, wanyaoqi) disable dhclient (9a6c26de1, wanyaoqi) Modify alert structure and inherit scoperesource (f20a87a5d, zhaoxiangchun) 统一报警模块 (6c66185bd, zhaoxiangchun) ignore common etcd endpoint not found error (e9da1022b, Zexi Li) support filter by cloudaccounts (561d7b0cc, wanyaoqi) fix reserved ip export keys (6af753c81, wanyaoqi) replace err with errors.cause (6b8e37c88, tangbin) shuzhou to suzhou (8514e1910, tangbin) rds postpaid instance create fix (6ecebc5f2, tangbin) fix cpu usage metrics (25310ed92, wanyaoqi) configureable reload telegraf config (714b87aa3, wanyaoqi) scripts/coverage.sh: ignore packages without test files (200029dfd, Yousong Zhou) .circleci: run tests parallelly (bf1b1f48b, Yousong Zhou) fix windows install regedit record (9372a7b9c, wanyaoqi) fix host set reserved resource func name (413d292c2, wanyaoqi) fix informer worker heap large usage (cc5f731fc, Zexi Li) fix the tag filter and result record for scheduledtask (5f2a91f2a, rainzm) fix host list servers filter (1b055f24a, wanyaoqi) Add ‘trigger’ for ScheduledTask (8a69558c8, rainzm) refactor ITableSpec signature with context (9f4d4a450, Zexi Li) image support generate name (a3043520e, wanyaoqi) 修改框架查询influxdb的时间单位 (86e687015, zhaoxiangchun) climc:allow disable term line width (0a0af5cfa, root) cancel condition release (7e9575040, tangbin) ctyun sync host wire fix (f58a9305e, tangbin) bind mount local image path to container path (8e4668213, wanyaoqi) isolated device manager: (44cbdd07a, wanyaoqi) add-enterprise-info-update-climc (bb808bd8a, tangbin) 监控数据查询增加对任意时间范围的支持 (ecd4a9407, zhaoxiangchun) 统一监控接口 (3f63e4737, zhaoxiangchun) get snapshots order by created at asc (6e0f4a494, wanyaoqi) implement generic service informer (95a58cc60, Zexi Li) 在优化建议资源列表中增加费用信息 (585385f0c, zhaoxiangchun) fix migrate with multi local storage (4d404e09d, wanyaoqi) redis\u0026rds add postpaid duration (346d55850, tangbin) declear variable and define (8fde0c62a, wanyaoqi) 修复优化建议资源列表cloudenv过滤失效的问题 (00fb77e0c, zhaoxiangchun) 类型是onecloud的notifier增加webconsole的alert (0a7b381cf, zhaoxiangchun) clean network scripts on init (73297de60, wanyaoqi) host storage misc fix: (690a5f2fc, wanyaoqi) .circleci: run with parallel level 3 (e80c938ba, Yousong Zhou) fix host name validator (ec2cb3113, wanyaoqi) fix remotefile fetch image propertites (810de8a7e, wanyaoqi) isolated device add attribute reserved resource (91ff1d7d8, wanyaoqi) zstack宿主机监控中增加参数信息进行Unmarshal (47cac3c7b, zhaoxiangchun) update for doc-gen (8a7703082, Qiu Jian) Fix the problem of field duplication when exporting fields (849628fe9, rainzm) aws lbbg cache bugfix (d99ec5771, tangbin) fix list disk attachable servers (df2e05b5b, wanyaoqi) bugfix-优化建议 (c8a0d7736, zhaoxiangchun) 优化建议增加时间筛选范围 (42ed0b1c5, zhaoxiangchun) 修复当prestate=alerting，newstate=alerting的情况无法触发notify的问题 (4a784c1d7, zhaoxiangchun) Kill processes in time \u0026 Add debug info (ff2fc7440, rainzm) image cache use lockman (127bd0ff1, wanyaoqi) add sys usage (844b865e2, wanyaoqi) README.md: use travis-ci.com as badge target link (ea373821d, Yousong Zhou) redis\u0026dbinstance add clean expired postpaids resources (0029b25f9, tangbin) host convert inject dockerd config (04b4e5713, Zexi Li) add fuzzy ip matching (f602979a2, tangbin) sync storage shared info when syncing local storage (14abf05cf, Qiu Jian) update lisDescendent scope params (6037f1514, Qiu Jian) 根据调度标签过滤网络和存储资源 (888a5463a, Qu Xuan) 可根据代理过滤云账号 (6ea25e6fc, Qu Xuan) 修复无法获取vmware宿主机监控数据的问题 (6ffb3653a, zhaoxiangchun) update vendor (d98b2b405, rainzm) modify the logic of queryCondition save the evalMatch (387880164, zhaoxiangchun) allow delete paramter config (cbe5e8890, tangbin) 修改规则执行时间 (e8a61b035, zhaoxiangchun) fix esxi disk disconnect (a5d2651fb, wanyaoqi) remove statefile in start script (0fe396d5c, wanyaoqi) clear yunionauth cookie (75328cf08, tangbin) 基于监控数据的优化建议 (cc3f5ed19, zhaoxiangchun) 在monitor的package中新增influxdb相关的功能 (6251d2da3, zhaoxiangchun) do not close worker chan (7bcedd41e, wanyaoqi) detect bmagent and hostagent service (108613bd3, Qiu Jian) guest set login account (8144d2d2f, wanyaoqi) fix import from libvirt (1ba2d92e6, wanyaoqi) huawei network id fix (002a618e7, tangbin) new local lb backend fix (8c06b50ed, tangbin) feat/ansibleserver: Install git in Dockerfile.ansibleserver-base (1fbfc7f22, Rain) feat/ansible_pb: Add climc operator for ansibleplaybooks_v2 (cf514364e, Rain) feat/ansible_pb: Add IncludeRole implments ‘ITask’ in pkg/util/ansiblev2 (faf32415f, Rain) lb acl cache add acl filter (4882a6bb2, tangbin) bm register use domain token (4f23ffb90, wanyaoqi) set cookie domain (f25bbee90, tangbin) feat/ansible_pb: Add support for requirements (331ba9bb3, Rain) 修复规则无法禁用的问题 (cb13b2241, zhaoxiangchun) bugfix mem paginate (d874b52b0, zhaoxiangchun) set host list scope system (6779db23f, wanyaoqi) apigateway-yunionauth-domain-setting (4e9264cb2, tangbin) 修复谷歌监控无法获取的问题 (d4531972d, zhaoxiangchun) support custom service url (26780e2c8, wanyaoqi) bugfix mem paginate (7c0d70414, zhaoxiangchun) fix host init without etcd (9652c97dc, wanyaoqi) fix host details output (db2d02fe0, wanyaoqi) fix update input (7353622d2, wanyaoqi) fix host health (d72724892, wanyaoqi) fix/monitor: AutoScalingNotifier.ShouldNotify should call NotifierBase.ShouldNotify (e67effaf3, Rain) add cookie domain setting option (849d1d669, tangbin) monitor,对于监控数据nodata，默认不发送邮件 (e81334c0a, zhaoxiangchun) fix/as: Set ScalingPolicy’s project as its ScalingGroup’s project (352e912c2, Rain) enable etcd lock (5158a509e, wanyaoqi) host health check (38c1c70a2, wanyaoqi) gpu host enable huge page (98377116f, wanyaoqi) fix/autoscaling: Chang the format of CoolingTime (be5c539e9, Rain) fix exsi convert disk path (9c4d3c62b, wanyaoqi) fix/notify: remove ‘v2’ from email verify url (9aa132cf3, Rain) fix/notify: Add deadline for rpc client (e1c63729d, Rain) host health check (af6c6fee8, wanyaoqi) yunionapi reset password fix (32e4ae98c, tangbin) fix/autoscaling: Change Sunday as 7 from 0 (09d7aaf39, Rain) fix/guesttemplate: Change ResetPassword as true default (203bdb2df, Rain) fix/autoscaling: fix some problem (4d8e0ba1b, Rain) host fix cmt bound, minor fix (b05d22834, wanyaoqi) aws elb health check type fix (7b6f45789, tangbin) huawei elb cookie timeout fix (b62727ae0, tangbin) ctyun subnet create bugfix (8618be1fd, tangbin) misc bugfix: (9a7c7623c, wanyaoqi) make DIRECT proxysettting default share to system (6faa4d91a, Qiu Jian) lb 负载均衡优化建议 (fc05c2d0e, zhaoxiangchun) fix/autoscaling: Add ‘scaling_group_id’ for server-list result (16226becf, Rain) fix/autoscaling: Add status ‘pending_remove’ for ScalingGroup_Guest (32280e214, Rain) guestnetworks,hosts: add alloc mapped ip addr for use in onecloud vpc (3142957f5, Yousong Zhou) fix/autoscaling: Change ScalingPolicy as VirtualResource (39d5603af, Rain) fix/autoscaling: Use UserCred’s session but AdminSession to request monitor (acb4d1cab, Rain) aliyun create elb listener fix (a06f7e7b5, tangbin) supermicro redfish support (98cec09a6, Qiu Jian) fix check ca cert (cf0cf484a, wanyaoqi) support sync disk snapshot status (54596fc42, wanyaoqi) huawei elb sync vpc (bd0a8f709, tangbin) remove aws invalid backendgroup (674764208, tangbin) keystone store service cert (b682e1b44, wanyaoqi) VMware resource pool同步 (1ef9a481c, Qu Xuan) 优化邮件格式 (6c3daec4c, zhaoxiangchun) lblis \u0026 lbbg \u0026 lbr \u0026 lbb create add fetch owner id (c977fd02c, tangbin)  Region (15)  schedtag list support resource_types (65562c25f, Zexi Li) lbagents: skip tls check for default influxdb endpoint url (7f7aef031, Yousong Zhou) lbagents: turn off guest src check (f30b191d0, Yousong Zhou) loadbalanceragents: yum as the default method (4a0d019b6, Yousong Zhou) retry set influxdb policy until completed (8e51f627a, Zexi Li) fix get resource details panic (0b70491ea, Zexi Li) fix server create params not include specified resource (4713312b3, Zexi Li) fix baremetal can’t enable public baremetal type network (80a405a8a, Zexi Li) server create prefer resource fetch by name or id (536be2ead, Zexi Li) guests: include secgroup ids in listing (e8cbaee90, Yousong Zhou) lbagent: undeploy: make it idempotent (f226d342e, Yousong Zhou) lbagents: fix deleting pending_deleted objects (f890b2b18, Yousong Zhou) cloudaccounts: re-validate only when proxysetting changed (d716405eb, Yousong Zhou) vpcs_mapped_address: fix locking (25d1c3693, Yousong Zhou) vpcs_mapped_address: alloc guestnic mapped addr backwards (138b596ec, Yousong Zhou)  Scheduler (7)  fix storage filter duplicate error message (d6b1fa02d, Zexi Li) fix memory over committed (d8d6e8c5b, Zexi Li) fix min counter get count not correct (db65bf4ef, Zexi Li) filter disabled cloudprovider (2e9307269, Zexi Li) set schedtag default strategy if input empty (e00b1fdc3, Zexi Li) get region nil panic (d049ac936, Zexi Li) fix network predicate get wrong free port (f39c82959, Zexi Li)  Sysutils (1)  rework test (458bd0c7f, Yousong Zhou)  Tasks (2)  onecloud: support disassociate eip (74920a37e, Yousong Zhou) EipDissociateTask: lock associated model (02ea7b462, Yousong Zhou)  Vendor (7)  update yunion.io/x/structarg (4ce404dd8, Yousong Zhou) update yunion.io/x/{jsonutils.pkg} (a2fda726d, Yousong Zhou) update yunion.io/x/sqlchemy (2e687997a, Yousong Zhou) update yunion.io/x/ovsdb (5ad06097c, Yousong Zhou) update yunion.io/x/ovsdb (4f68026b8, Yousong Zhou) import yunion.io/x/ovsdb (7c3d9d7f8, Yousong Zhou) tidy and vendoring (ffadb30c6, Yousong Zhou)  Vet (5)  composite literal uses unkeyed fields (fb26b0c38, Yousong Zhou) bad syntax for struct tag value (d25f92af8, Yousong Zhou) pairs not separated by spaces (b99157f64, Yousong Zhou) bad syntax for struct tag pair (c18d347b0, Yousong Zhou) unreachable code (85d238cb5, Yousong Zhou)  Vpcagent (55)  ClaimVpcGuestDnsRecords: guard against pending_deleted guests (821283952, Yousong Zhou) different direction for l3 and l4 match (97251c7cc, Yousong Zhou) ovn: claim dnsrecords for all vpcs (ba0e41d99, Yousong Zhou) models: include dnsrecords (583718014, Yousong Zhou) ovn: dns records for guest names (88095c6d8, Yousong Zhou) ovn: mark and sweep dns records (d51791396, Yousong Zhou) ovn: apply qos on eip (e442e7a25, Yousong Zhou) ovn: apply guestnetwork bw_limit (4b44f21ab, Yousong Zhou) ovn: use FindXxxReferrer_yyy (4b299846d, Yousong Zhou) ovn: set underlay mtu size in config file (2841e245e, Yousong Zhou) ovn: mix eipgw and distgw (83a44ce94, Yousong Zhou) models: include elasticip (822ba5875, Yousong Zhou) ovn: add and use mac.HashVpcHostDistgwMac() (22090a379, Yousong Zhou) models: separate Copy() and CopyJoined() (146ab44fb, Yousong Zhou) apihelper: use CopyJoined() (cb27b1805, Yousong Zhou) models: add CopyJoined() (c4b308489, Yousong Zhou) remove unused code (8873c8905, Yousong Zhou) apihelper: use its own options (230f004f3, Yousong Zhou) models: remove now boilerplate code (3e09d4920, Yousong Zhou) apihelper: add interface IModelSetListOptionProvider (c7fee7c76, Yousong Zhou) models: modelset: details=false for networks (f5360264f, Yousong Zhou) models: include wires (3a51985fc, Yousong Zhou) ovn: preparation: skip default vpc (5fdd534f7, Yousong Zhou) ovn: preparation: use network.Vpc.Id (a7a3beae2, Yousong Zhou) apihelper: use IModelSet.IncludeEmulated() (e0349f92b, Yousong Zhou) models: modelset: add IncludeEmulated() method (5bf45ad65, Yousong Zhou) apihelper: use IModelSet.IncludeDetails() (39a19d1c6, Yousong Zhou) models: modelset: add IncludeDetails() method (2a0cac9d4, Yousong Zhou) ovnutil: destroy non root obj first (4d54972a9, Yousong Zhou) ovn: cmp: generate clean args in a single batch (6d788e052, Yousong Zhou) ovn: use db.FindOneMatchByAnyIndex (4962bdc7e, Yousong Zhou) ovn: configure acl for lport (579641a26, Yousong Zhou) ovnutil: OvnNbctlArgsDestroy: take into account ACL (53f354612, Yousong Zhou) ovn: secgrouprules_acl (9f4daafee, Yousong Zhou) models: sort security group rules (1abdb4f13, Yousong Zhou) models: include secgroup and rules (7ba46e928, Yousong Zhou) apihelper: do not set details=true by default (f33a2e177, Yousong Zhou) ovnutil: remove old generated code (654845fd4, Yousong Zhou) ovn: use yunion.io/x/ovsdb (cae9594da, Yousong Zhou) ignore possible external subnets (218df2416, Yousong Zhou) ovn: explicitly include gateway route in classless routes (5caaccd43, Yousong Zhou) models: ignore possible external guests (4496a7bbc, Yousong Zhou) ad-hoc replacement for db.FindByIndex() (503735ebf, Yousong Zhou) models: allow guest to have multiple vpc nics (09cc38f96, Yousong Zhou) work around nics of pending deleted guest (11835889c, Yousong Zhou) fend off non-onecloud-vpc guest nics (16ced399a, Yousong Zhou) ovn: use network.GuestDns when available (d2c0ba4d5, Yousong Zhou) ovn: manage static routes (05c38c813, Yousong Zhou) ovn: guestnetwork: guard against empty dhcpopt (0578d6c49, Yousong Zhou) ovn: rename subnet, guestnetwork ovn obj names (1c50ffb21, Yousong Zhou) ovn: use cmp() when claimVpc (38354229b, Yousong Zhou) ovn: use cmp() (d8e419cfa, Yousong Zhou) add cmp() for search and pre-cleanup (4d3eba9ba, Yousong Zhou) ovn: make host ls when claimVpc (e6bb3397d, Yousong Zhou) models: include guest, host (e4ad3f419, Yousong Zhou)  Vpcs (1)  add ExternalAccessMode field (eebd15e0d, Yousong Zhou)  Webconsole (2)  fix old session make new session closed (37ee6f844, Zexi Li) fix version and others handler not handle (e56152aa4, Zexi Li)  Wires (1)  default to “default” vpc on creation (d83a7dade, Yousong Zhou)   cloudpods-operator Repo: https://github.com/yunionio/cloudpods-operator\n64 commits to cloudpods-operator - v3.3.0 since this release.\nBug Fixes (5)  apigateway totp should default on (0520f4e, Qiu Jian) member policy requires member role (3d85738, Qiu Jian) Change xxIntervalxx type from ‘int’ to ‘*int’ (0cc2996, rainzm) Change api prefix ‘/api/v1’ as ‘api/v1’ (5fcceb2, rainzm) change command of init container for oso (019c5b0, rainzm)  Defaults (1)  using openvswitch image of tag 2.10.4-0 (cbbaa01, Yousong Zhou)  Feature (1)  add cloudid service (525f310, Qu Xuan)  Features (1)  Add support for onecloud-resource-operator (b5b9181, rainzm)  Host (1)  tell sdnagent to use common.conf (a260f9c, Yousong Zhou)  Itsm (1)  limit memory to 1G (83c05e9, Zexi Li)  Others (52)  调整统一监控 系统报警规则的注入配置 (7dc8266, zhaoxiangchun) fix etcd member count (8f5c7b5, wanyaoqi) recreate pods on pvc not local path (03b924e, wanyaoqi) 修复系统报警规则重复创建的问题 (6576384, zhaoxiangchun) fix set pvc name (821875d, wanyaoqi) fix glance pvc name (54bffda, wanyaoqi) update vendor for release/3.3 (0d99429, Zexi Li) cloudmon deployment increase [rds redis oss] monitor information collectiona (5dbf86e, zhaoxiangchun) add check if cronjob exist (5862b3b, wanyaoqi) service etcd client disable unready client (052dca4, wanyaoqi) cloudmon as deployment (d5f78cd, wanyaoqi) host image component set default toleration (6f564a2, wanyaoqi) check etcd dbsize, do compact and defrag (9ec773c, wanyaoqi) system alert init info create in operator (61f9c09, zhaoxiangchun) host image as daemonset (dcf7299, wanyaoqi) fix etcd defrag (e947444, wanyaoqi) add daemonset telegraf (78e082e, wanyaoqi) telegraf init tool (ca58141, wanyaoqi) fix:优化manifest example (4c7e1fe, lvyangyang) new pvc name with storage class (6b300f5, wanyaoqi) itsm endpoint注册为http请求 (14fcbe1, zhaoxiangchun) not register azure classic host data (e345786, Zexi Li) operator增加itsm服务 (9739e8a, zhaoxiangchun) remove put/del key on liveness probe (ffdf0eb, wanyaoqi) set cronjob default attributes (292f37a, Zexi Li) etcd cluster default use version 3.4.6 (2b293d6, wanyaoqi) bugfix：宿主机监控没有默认值注入的函数 (e48997d, zhaoxiangchun) etcd operator fix (f71a98e, wanyaoqi) fix etcd liveness probe (a7d57db, wanyaoqi) first create policy (5eae948, wanyaoqi) add max wal file (cfc762a, wanyaoqi) fix etcd arguments (d661676, wanyaoqi) 增加宿主机的监控查询的cronjob (011ae7d, zhaoxiangchun) report-server 监控间隔调整 (fba6be1, zhaoxiangchun) 修改reportserver cronjob采集监控数据的间隔 (fb88568, zhaoxiangchun) set keystone url (2bd2d63, wanyaoqi) kubeserver add service account (4cbff0a, Zexi Li) onecloud culster fix: (8a61750, wanyaoqi) mount etcd tls (6391bf8, wanyaoqi) web nginx config (0649323, Zexi Li) fix api_server url (8bc9f6c, wanyaoqi) fix cronjob update (28ca0af, wanyaoqi) etcd use tempfs (23c8a3e, wanyaoqi) adjust web nginx config (b770851, Zexi Li) create etcd service (91b75cc, wanyaoqi) do not always sync configmap (437091a, wanyaoqi) create etcd service (00127da, wanyaoqi) etcd tls endpoint (69f02e3, wanyaoqi) create etcd cluster (e25a2f7, wanyaoqi)   sync config api_server to common service (2ce9c33, wanyaoqi)   添加cronjob StartingDeadlineSeconds 参数 (daed9d9, zhaoxiangchun) add sockio web location (a0b437e, Zexi Li)  Web (1)  remove unused nginx config (6f37389, Zexi Li)  Yunionagent (1)  update content (87badd5, Zexi Li)   cloudpods-service-operator Repo: https://github.com/yunionio/cloudpods-service-operator\n36 commits to cloudpods-service-operator - v3.3.0 since this release.\nCode Refactoring (1)  Abstract the same logic and abstract interface (178b33b, rainzm)  Features (3)  init docs (1b18737, rainzm) Change field of IntOrStringStore (655cf96, rainzm) Normalize options \u0026 Add ‘dense’ options (6ec0326, rainzm)  Others (32)  Add Endpoint document (3696dc6, rainzm) Add CRD Endpoint (8e7de75, rainzm) support yaml string (e1ac25c, rainzm) fix about field reference (1341f22, rainzm) fix the reference of option’s field (368fcf2, rainzm) update README.md and CONTRIBUTING.md (2bdd574, rainzm) modify Dockerfile (454c20c, rainzm) Modify the code structure in the pkg directory (0c4466a, rainzm) Add README.md and CONTRIBUTING.md (01cff42, rainzm) modify the image name in Makefile (2fd0ec9, rainzm) add LICENSE (4c79f85, rainzm) modify copyright (758336b, rainzm) Reduce the dependence on executing ‘make image’ (a235dba, rainzm) change module name: onecloud-resource-operator=\u003eonecloud-service-operator (d4a574e, rainzm) remove ‘MetricsAddr’ and add ‘WebhookPort’ for Options (6b58d3c, rainzm) Modify Makefile and Dockerfile for vendor (b1885e7, rainzm) init vendor (be4e55a, rainzm) change module name: onecloud-service-operator=\u003eonecloud-resource-operator (6baefaa, rainzm) Modify Dockerfile and Makefile (4a14009, rainzm) Adjust the project’s directory structure (958333e, rainzm) Improve value abstraction (8abac21, rainzm) fix some problem in provider/virtualmachine.go (8b812fb, rainzm) Set the ansible_user as ‘cloudroot’ when hypervisor is not ‘kvm’ (6b12bdc, rainzm) fix IsServerErr: code ‘500’ is also ServerErr (403c3bc, rainzm) Modify the json desc about ‘Bw’ in VMNewEipSpec (c794687, rainzm) fix some comment (29ce124, rainzm) fix ‘dealErr’ and update Dockerfile, kustomization.yaml (6c0c072, rainzm) clear external ansibleplaybook which is finished (dbe77e4, rainzm) fix and update (7f60c79, rainzm) change module name ‘onecloud-service-operator’ to ‘yunion.io/x/onecloud-service-operator’ (2430e12, rainzm) fix and update (45c9033, rainzm) init (0e138d9, rainzm)   ocadm Repo: https://github.com/yunionio/ocadm\n28 commits to ocadm - v3.3.0 since this release.\nAddon (1)  add metrics server and remove itsm server (6e8ffa2, Zexi Li)  Others (27)  ocadm create cluster, 延时等待容错 (3269146, Zhang Dongliang) 高可用部署主备选取应将kube-apiserver是否工作考虑进去 (dd775ca, Zhang Dongliang) fix longhron template (6d28362, wanyaoqi) 修复 keepalived master state bug (3d452ac, Zhang Dongliang) longhorn deploy misc fix (53cbebc, wanyaoqi) update vendor for release/3.3 (ec96e95, Zexi Li) update vendor for 3.3 (bd902c2, Zhang Dongliang) fix create region zone where upgrade from v2 (b581b3d, wanyaoqi) update vendor for 3.3 (ec2d04c, Zhang Dongliang) ocadm 接入 keepalived，支持高可用 (08d74c0, Zhang Dongliang) update DefaultCalicoVersion to 3.12.1 (f82dd55, Zhang Dongliang) migrate data to longhorn (9dda325, wanyaoqi) addon longhorn (737c7c3, wanyaoqi) fetch itsm config from globalrc (0eabd9a, wanyaoqi) sync vendor with operator (d6eb026, Zexi Li) fix upgrade from v2 (442f19e, wanyaoqi) add operator priority schedule class (0c22cef, Zexi Li) 修改itsm镜像仓库信息，和项目信息对应 (eb07ee0, zhaoxiangchun) set node override name (1a51fda, wanyaoqi) set default control plane endpoint (a8f7a53, wanyaoqi) 多网卡环境下 calico 网卡选择策略 (4fbd02d, Zhang Dongliang) disable loki stack (f089a4c, Zexi Li) 修改itsm的template (3f50a3c, zhaoxiangchun) support upgrade (3ccb7eb, wanyaoqi) join args (faa9e3f, Zhang Dongliang) inherit print addon yaml opt (a4ea4d1, Zexi Li) custom csi dependent image (f0bfd56, wanyaoqi)   sdnagent Repo: https://github.com/yunionio/sdnagent\n39 commits to sdnagent - v3.3.0 since this release.\nAgent (18)  ovn: no error log if the mapped bridge does not exist (eec5b58, Yousong Zhou) add eip man (24c7338, Yousong Zhou) parse/watch config from main (616a4e5, Yousong Zhou) server: use sdn_enable_guest_man (d6452ef, Yousong Zhou) server: move hostConfig watch to AgentServer (2bee515, Yousong Zhou) server: shuffle lines to prepare for conditionals (d778a93, Yousong Zhou) drop support for k8s_cluster_cidr (cf5b8bf, Yousong Zhou) use hostman options (0856fcc, Yousong Zhou) server: guest: do region api sync when needed (0b22e05, Yousong Zhou) utils: add g.NeedsSync method (e87a9e8, Yousong Zhou) server: guest: guard against emtpy g.HostId (36f6603, Yousong Zhou) server: guest: clear up classic and vpc nics handling (b56d74d, Yousong Zhou) server: guest: rename flow update/clear method names (e118828, Yousong Zhou) add ovn distgw manager (5d16d37, Yousong Zhou) utils: add mapped ip addr info (5c4a41d, Yousong Zhou) flowman: log also bridge name (bc2f5ea, Yousong Zhou) fix log level (4d985a4, Yousong Zhou) export guest.IsPending method (dc7f907, Yousong Zhou)  Build (10)  systemd: add keepalived reload command (1fd0c9d, Yousong Zhou) eipgw: use 8 byte char for auth_pass (1084304, Yousong Zhou) eipgw: let keepalived use detail log (7d8f62d, Yousong Zhou) add ansible playbook README (9263c95, Yousong Zhou) separate artifact and docker image build (c5cae93, Yousong Zhou) docker: use openvswitch 2.10.4-0 as base (86e8bc1, Yousong Zhou) add example ansible playbook for ha deployment (124d8ea, Yousong Zhou) Makefile: add mod target (a4ced7e, Yousong Zhou) remove python2 dependency (0d0b7b4, Yousong Zhou) build binaries parallelly (6239ea3, Yousong Zhou)  Hostconfig (3)  add GetOverlayMTU() (1d2f96a, Yousong Zhou) add option ovn_mapped_bridge (3e4fa32, Yousong Zhou) import auth info (02f5657, Yousong Zhou)  OWNERS (1)  add wanyaoqi (89aacb7, Yousong Zhou)  Others (1)  go.mod: vendoring onecloud v0.0.0-20200603092502-73bcfb4bb731 (a6dfd5b, Yousong Zhou)  Ovn (1)  use yunion.io/x/onecloud/pkg/vpcagent/ovn/mac (8c2d6cd, Yousong Zhou)  Utils (2)  add Empty (f3e1069, Yousong Zhou) guest: reset VpcNICs on LoadDesc (44598a7, Yousong Zhou)  Vendor (3)  use tip of onecloud release 3.2 (3cef7d3, Yousong Zhou) update yunion.io/x/onecloud (dd77171, Yousong Zhou) go mod vendor (6af0f56, Yousong Zhou)  ","excerpt":"Release time: 2020-08-02 19:03:34\n cloudpods Repo: …","ref":"/en/docs/changelog/release-3.3/3-3-0/","title":"v3.3.0"},{"body":"发布时间 2020-08-02 19:03:34\n cloudpods 仓库地址: https://github.com/yunionio/cloudpods\n763 commits to cloudpods - v3.3.0 since this release.\nAdd (1)  region/openstack 迁移接入 (386746365, lvyangyang)  Ansibleserver (1)  register metadata manager (916943a7c, Yousong Zhou)  Apigateway (2)  expose identity/image/k8s usage rpc method (686cc7824, Zexi Li) handlers: register cloudnet modules (a70d17d6d, Yousong Zhou)  Apis (4)  compute: move struct defs (8a79c0f70, Yousong Zhou) network: add NETWORK_TYPE_EIP (b62d41a83, Yousong Zhou) add const definitions for eip gateway ips (30844db32, Yousong Zhou) add ovn distgw const definitions (12639e027, Yousong Zhou)  Appsrv (2)  rework TestRing (358f5d41a, Yousong Zhou) ring: release ring content on pop (e37f15cac, Yousong Zhou)  Baremetal (6)  fix hpssactl split last LV size out of limit (#7427) (e64f24945, Zexi Li) set zone when enable netif (df4d88e19, Zexi Li) fix forget init lockman pkg (8ebabd6ae, Zexi Li) fix ssh put empty content file not created (541c72849, Zexi Li) find baremetal add scope system (cfc9fcedd, Zexi Li) ensure power up add retries (5693ae05d, Zexi Li)  Bug Fixes (301)  avoid generated codes having duplicate PerformSetScope methods (d834f3331, Qiu Jian) avoid host globalid change (#7466) (6e64fc4ca, 屈轩) elasticcache_account_reset_password_task.go cherry pick build fail (#7452) (88497da74, Jian Qiu) cloudaccount is created as system shared by default (e0fc57bea, Qiu Jian) sync share mode between vpc and wire (9dfed2845, Qiu Jian) 避免glance metadata-list project scope无权限 (#7403) (92d8437c4, 屈轩) 优化openstack项目认证 (#7398) (65cd074ff, 屈轩) 避免在仅调整虚拟机磁盘时opslog日志记录mem cpu异常 (#7393) (5dc829633, 屈轩) avoid lost backend params (46fa77b29, Qu Xuan) openstack win image user data need encode (c39de392c, Qu Xuan) ignore general s3 set acl not implemented error (7e47d7aeb, Qiu Jian) avoid account sync deadlock (01f384cf8, Qu Xuan) adjust scope of isolated_device and reservedips (1c78817ab, Qiu Jian) openstack多项目问题 (816b29267, Qu Xuan) avoid parse json err nil pointer (f9b51a9f5, Qu Xuan) 添加阿里云rds备份恢复限制条件 (ba953f20c, Qu Xuan) change owner should check required domain list (04b4ab376, Qiu Jian) 普通视图下，安全组仅统计可看到的vm count (6b2cb20f4, Qu Xuan) 同步sku与磁盘类型关系 (28a80ac52, Qu Xuan) 避免创建rds备份时对rds进行一些操作 (#7355) (bd6b45aae, 屈轩) 修复vm绑定重复安全组 (f03d021aa, Qu Xuan) add default perform allow policy to sysadmin (3f09d0019, Qiu Jian) modify list details for guesttemplate (d06d2026f, rainzm) list item export recode (880b0ecf4, Qiu Jian) 避免status_code\u003e=400并且resp为空时err为nil (#7265) (f2456d236, 屈轩) cloud account delete may fail due to inconsistent status (f624ab152, Qiu Jian) do accessibility check when dissociate eip from resource (ded8da001, Qiu Jian) schedtag should be system resource (4d33d1a70, Qiu Jian) choose candidate list from the list returned from backend (c90c0944c, Qiu Jian) 单独添加更新账单文件日志 (e7fc9b94b, Qu Xuan) 支持多项目安全组规则过滤 (fef5147ae, Qu Xuan) domain resource domain share to system when non_default_domain_projects off (671d20227, Qiu Jian) 阿里云资源组同步 (f5ed69217, Qu Xuan) 避免未能导出共享安全组规则 (1c4e9e00a, Qu Xuan) image upload not clean pending usage (ba983df32, Qiu Jian) quota usage not updated after disk resizing (508f30901, Qiu Jian) rds备份恢复优化 (ecb7249a1, Qu Xuan) default vpc must be shared globally (fa67bd831, rainzm) globalvpc跟随云账号共享 (f8471832e, Qu Xuan) 过滤可用eip (23e17fe0a, Qu Xuan) 避免乌兰察布区域拉取资源异常 (a443975f7, Qu Xuan) prefetch image error when create guest with vmware template (4ef5267a8, rainzm) not work for network-list –zones (d6b83fbbf, Qu Xuan) sec rule export missing fields (cee24b2a7, Qu Xuan) check azure image format when rebuild root (1b5b8081f, Qu Xuan) 避免华为云安全组规则删除失败 (64599b481, Qu Xuan) clouduser’s cloudgroups info (fb229f6c7, Qu Xuan) 添加secgroup rule过滤参数 (a5fc7c807, Qu Xuan) 修复cloudid get权限问题 (09f2b2af2, Qu Xuan) azure 支持权限 (c003f78f6, Qu Xuan) 修复cloudid用户列表权限问题 (26434683c, Qu Xuan) 优化webconsole代码\u0026bugfix (ea3097240, Qu Xuan) mo.VirtualMachine’s Config maybe nil (0420266b7, rainzm) 修复阿里云同步安全组规则异常问题 (2f42e9e5f, Qu Xuan) 避免google clouduser同步权限异常 (7056fa01b, Qu Xuan) 修复vpc同步异常问题 (ef6d0c2ad, Qu Xuan) 避免越界访问 (09ccf107c, Qu Xuan) opslog show the owners operation logs only (a186f2587, Qiu Jian) remove default allow policy for storages (8f7223b1d, Qiu Jian) cloudid 权限修复 (05c730ace, Qu Xuan) cloudid 异常修复 (b4ed25963, Qu Xuan) 修复资源组云上同步异常问题 (89cb75bfe, Qu Xuan) 修复qcloud同步权限组异常问题 (21178638f, Qu Xuan) 修复azure 项目同步问题 (e8ff39a01, Qu Xuan) 避免请求中国区iam异常 (5f9b6622f, Qu Xuan) perform private on vpc will private all wires if no networks in wires (2286ef19b, Qiu Jian) 修复腾讯云操作日志时间异常问题 (8a1d2d1ea, Qu Xuan) 修复elastic cache sku zone_id异常问题 (76906efea, Qu Xuan) 分开统计安全组关联虚拟机数量 (a997cf498, Qu Xuan) json request 支持自定义匹配err (6ac6768e3, Qu Xuan) remove default host list policy (eb342a70a, Qiu Jian) cloud poilcy count (367d3f147, Qu Xuan) 避免cloudprovider同步缺失 (e7cd84275, Qu Xuan) google rds regional and zonal (79d016985, Qu Xuan) cloud account sync may block (6133b1a5c, Qiu Jian) 避免azure同步资源组异常 (fcf1e193b, Qu Xuan) 避免slave zoneid异常 (f303512a7, Qu Xuan) 同步不需要判断账号是否有iam权限 (acf641be2, Qu Xuan) clouduser can_delete always be false (a54a9c05b, Qu Xuan) 优化安全组list速度，并发挥rule规则信息 (dc3ef5c61, Qu Xuan) 公有云子账号加域属性 (9c6234307, Qu Xuan) 修复cloudid同步问题 (544c19f3c, Qu Xuan) 取消aliyun lb scheduler创建限制 (82d0f5c03, Qu Xuan) manager_id资源隔离获取 (66fc71cc8, Qu Xuan) 优化sku同步逻辑 (04427515f, Qu Xuan) Override Master and Slave for scalinggroup_guest (23c76dc79, rainzm) validate candiate ip for sync-fix-nics (41a9d9242, Qiu Jian) capability for cloudid (781cc3ed6, Qu Xuan) 避免未本地缓存usercache (45819e6c1, Qu Xuan) 修复cloudid问题 (223c9439b, Qu Xuan) 支持同步project标签到本地资源 (e31334b47, Qu Xuan) 修正项目映射同步 (b25295bf0, Qu Xuan) 修复权限组权限同步异常问题 (21a09d29d, Qu Xuan) reduce totp verification overhead (265bbc6e7, Qiu Jian) 避免同步不到其他域的云账号 (ef0242d15, Qu Xuan) Error occurs when suitableWire exists or all suitableNetwork exist. (030a2edfb, rainzm) disable domain sharing if non_default_domain_projects turned off (a23f57da4, Qiu Jian) sort quota list result by usage rate (9012180b6, Qiu Jian) keystone project resource count not accurate (161db6d95, Qiu Jian) google资源名称兼容处理 (4f5a2ff43, Qu Xuan) simplify forbidden user login message (611b9e9b5, Qiu Jian) 避免azure同步项目失败 (f8cce2892, Qu Xuan) wrong cloud provider status when sync disconnected cloud account (1d9a3f273, Qiu Jian) network created by sysadmin should be shared by default (5c53ccc3d, Qiu Jian) Fix problems about sending verify email (109bdc05d, rainzm) 避免同步删除失败 (3c75119c5, Qu Xuan) Fix the url of ‘notify-template-delete’ in climc (8ed4148fb, rainzm) policy allow if one of the matching rules is allow (2efb7fc9e, Qiu Jian) disable policy rule compaction (818d40c08, Qiu Jian) 优化标签列表version问题 (d296a1801, Qu Xuan) Support to set the label of scheduledtask to Chinese (3e7a5acb9, rainzm) Add zero padding in front of execution time for scheduledtask (0dad8351d, rainzm) 避免openstack磁盘和存储窜位 (4e48d33ec, Qu Xuan) 避免sql erorr (aa0d05ccd, Qu Xuan) policy-explain not working properly (5ebb18b69, Qiu Jian) Hanle the error of vdisk.GetIStorage in syncCloudDisk (4c6682617, rainzm) Add ‘/version’ handler for notify (2cd2f3d02, rainzm) 更正华为云操作成功判断 (5837b696d, Qu Xuan) disable updating zone_id for host, storage, wire (1e4acedf2, Qiu Jian) Wait for ticker when get status is wrong (7e80ecf61, rainzm) 优化安全组同步逻辑 (03a3dfcd7, Qu Xuan) handler param.convert’s error in caller.go (c793746f0, rainzm) explainPolicy piggyback owner’s privilige (e7b198ab3, Qiu Jian) base64 decode 12-bytes plain text password return nil (a51d554d7, Qiu Jian) remove spaces in name (06e19c494, Qiu Jian) oss-upload fail to set object acl (d519a6584, Qiu Jian) 返回object默认acl (510eb101e, Qu Xuan) xsky recode using endpoint as accesskey key (de081a768, Qiu Jian) Support ‘generate_name’ when saving template from guest (27f746eb2, rainzm) 避免openstack session==nil (90aa83494, Qu Xuan) keystone event list fail to find user (b917ea6a1, Qiu Jian) 添加region翻译 (6ba9a8fae, Qu Xuan) 修复gcp object编码问题 (c706821a7, Qu Xuan) 移除默认调度策略 (c2ce0460a, Qu Xuan) 转换gcp错误 (9069814b1, Qu Xuan) 避免越过tenantcache过期检查 (8754ef243, Qu Xuan) 允许gcp创建vpc时不指定cidr (53d771025, Qu Xuan) gcp默认创建允许所有地址访问的用户 (f73b3ed03, Qu Xuan) apigateway expose esxiagent service avaiability (ddc483509, Qiu Jian) 避免锁超时 (a519a6612, Qu Xuan) gcp path escape for object (23df2235e, Qu Xuan) sync s3 bucket status (7cb40ec3c, Qu Xuan) add us-west4 for google region (1997e41ea, Qu Xuan) class method GetPropertyXXX should support rbac (a99deb614, Qiu Jian) 安全组规则返回项目id信息 (61ff1544e, Qu Xuan) 华为企业项目映射同步 (3a0b5c5e2, Qu Xuan) byte size fix (5ed624d15, Qu Xuan) ignore match weights when searching matched policysets (015702846, Qiu Jian) generating bucket APIs (5e77a9682, Qiu Jian) typo (f9dcb2bb7, Qu Xuan) lb FetchCustomizedColumes fixes (f82543e23, Qiu Jian) 避免因磁盘数量导致创建机器失败 (caf07c256, Qu Xuan) sysadmin cannot convert host in non-default domain (f54d63325, Qiu Jian) 避免azure卸载磁盘失败 (d4b16667d, Qu Xuan) domain user no previleges to convert host (c563f021b, Qiu Jian) scheduler test ignore quota limit (354a61632, Qiu Jian) 移除azure policy sync部分 (9e07cda2b, Qu Xuan) sku status filter (95ae69c2b, Qu Xuan) bucket信息修正 (f89be60e6, Qu Xuan) tmp update (893d77398, Qu Xuan) 通用指定项目到云上创建资源 (9916c9917, Qu Xuan) retry ipmi probe if redfish-api-probe fails (3699a9b20, Qiu Jian) identity_provider details missing fields (f9bc5f692, Qiu Jian) default policy not effective (03477cbe7, Qiu Jian) 避免openstack以镜像做系统盘创建失败 (b31922a3b, Qu Xuan) Support filtering notification with contactType (ee85dec1c, rainzm) empty matched policies list for roles (728524fef, Qiu Jian) 返回项目信息 (5cdeebb04, Qu Xuan) 加入Azure套餐和镜像的检查 (0f2ff5384, Qu Xuan) 避免azure uefi重装系统失败 (a9c001200, Qu Xuan) 避免因io问题导致同步镜像列表为空 (a7e1bdf6f, Qu Xuan) usage for schetag not accurate (1dfef4dcf, Qiu Jian) gcp bucket文件夹默认设为private (ef25bf328, Qu Xuan) aliyun rds backup create fix (b260c04c3, Qu Xuan) 避免regional network-list –zone导致返回结果为空 (8bc4927d5, Qu Xuan) system privileges user cannot access system console (29283ff11, Qiu Jian) 避免忽略本地allow any云上deny any安全组规则同步 (c8ba52c94, Qu Xuan) 上传镜像为转换列表之外时,subformat状态异常 (1354270c5, Qu Xuan) ‘requirements’ in ansibleplaybookv2 should be optional (77e5801ad, rainzm) cloudaccount share_mode not initialized (08eda0d44, Qiu Jian) 仅当变更domainId时才需要更新projectId (bf57b829a, Qu Xuan) policy details should carry updated_at and created_at fields (4c313f5a2, Qiu Jian) delete idp also delete users/groups in target domain (3118a1020, Qiu Jian) 尽量避免因代理问题导致google request异常 (f7bf34ee1, Qu Xuan) 支持公有云指定资源组 (f9b1466f4, Qu Xuan) 支持指定resource group (4b5f8b8d5, Qu Xuan) 修复zstack使用win镜像时userdata base64加密问题 (f162ac46f, Qu Xuan) cloudprovider list support filter by zone and cloudregion (50f55c299, Qiu Jian) 优化azure image同步逻辑 (b18035442, Qu Xuan) policy create fail on initialization phrase (5b60c4fad, Qiu Jian) anonymous user may list resources (f4a676575, Qiu Jian) 避免大范围安全组共享 (8f4e0a5e8, Qu Xuan) image-list –sub-format support (f9c794f74, Qu Xuan) 加入azure镜像vhd检查 (589a4678f, Qu Xuan) update fields permission tags (d1fd24538, Qiu Jian) 避免设置自动释放后磁盘的expired_at失效 (3fe417c4f, Qu Xuan) 避免仅同步一个region时，其余region状态变为准备中 (33c2b5fa9, Qu Xuan) 优化标签列表过滤参数 (e306a4e23, Qu Xuan) bugfixes (b312b5dac, Qiu Jian) disable delete standard image (ed5463ca6, Qiu Jian) fail to explain permission for disabled policy (54689d862, Qiu Jian) server-sync-fix-nics should return errors if vnics ip is not reachable on host (605978a94, Qiu Jian) xxx-agent should generally use scope=system to list resources (41125788f, Qiu Jian) esxi disk project sync (039644e89, Qu Xuan) do not share porject resource by default (ea254c8ed, Qiu Jian) blacklist keystone reset admin password (7655f8e2a, Qiu Jian) 自动创建项目 (72fb9a58d, Qu Xuan) 修复华为云eneterprise-project-list异常问题 (4d71f7e2a, Qu Xuan) 非私有云同步region name (86087b9ac, Qu Xuan) 避免backup list未能正常显示rds信息 (d82cf4184, Qu Xuan) FindAnonymousStructPoint needs input as a pointer to struct (ead8825dc, Qiu Jian) set public_scope to system for image with is_public=true (eb54f316c, Qiu Jian) 优化rds zone同步逻辑 (fc4778f33, Qu Xuan) 优化windows powershell userdata (5c6b016c2, Qu Xuan) avoid using background context (c35758dd0, Qiu Jian) status-base resource’s action log missing owner project/domain (9c26c0408, Qiu Jian) host agent list use baremetalagents model (5c8081b6b, Qiu Jian) reserved ip owner filter (07766b7b4, Qiu Jian) i-ps -\u003e ips (b0b45c420, Qu Xuan) openstack 安全组规则同步 (df5f5c9b9, Qu Xuan) change-owner-candidate-domains not implemented for some resources (4a84beee0, Qiu Jian) 避免provider错乱返回 (bd21b346a, Qu Xuan) 优化openstack错误处理 (2da49eb0d, Qu Xuan) cloud-provider-list support filter by cloudregion (d271ff69f, Qu Xuan) 支持访问其他服务的标签列表 (f01bed833, Qu Xuan) isolated_devices domain filter not working (e9101ebc2, Qiu Jian) gcp rds 默认不使用vpc网络 (8cfbf9a8f, Qu Xuan) 避免卸载完已删除的磁盘后，磁盘状态为ready (8a8d0f900, Qu Xuan) globalvpc count vpc (b6ec2b406, Qu Xuan) 避免aliyun磁盘计费类型多次转换 (2560fa345, Qu Xuan) create cloudaccount with disabled state (3b0bc3858, Qiu Jian) panic when disk has no valid storage_id (42171cb9c, Qiu Jian) init sharing status of default vpc and default secgroup (77f35bae2, Qiu Jian) recode sync public_src of cloud resources (bea90b4b1, Qiu Jian) guestsecgroup-list panic (99ddc175b, Qiu Jian) allow delete shared resource (8bd0205bb, Qiu Jian)   vpc, cloudprovider should not violate the sharing limit of cloud account 2. sharing mode of host and attached local storage should be consistent. 3. cannot change owner of shared resource (f2e0fcf4e, Qiu Jian)   export missing keys \u0026\u0026 export panic (bfa878676, Qiu Jian) missing methods for SDomainRegionalCloudResourceKeys (c7d58dee9, Qiu Jian) fail to sync share state for on-premise storages (45b8494cd, Qiu Jian) api doc(guests -\u003e servers) (6cff98f85, Qu Xuan) missing perform public/private actionlog (c473c9299, Qiu Jian) shared cloudprovider not accessible (a2a60245b, Qiu Jian) shared resource should not be deletable (6f3e18930, Qiu Jian) fail to fetch real client ip from httprequest (5ff4b9748, Qiu Jian) secgroupcache权限问题修复 (10469342b, Qu Xuan) list lbbg panic (34aacdcde, Qiu Jian) remove cloudaccount autosync randomness (0e03bfc27, Qiu Jian) 云账号创建可以指定项目 (c12c489e9, Qu Xuan) sysadmin can override policy violation check (b1647e7eb, Qiu Jian) usage-handler 不统计虚拟的vpc wire (d66197068, Qu Xuan) cloud-account-usage vpc/storage not accurate (f39f83816, Qiu Jian) export files complain duplicate field name error (5c138b919, Qiu Jian) prevent policy violation (ecb483b9b, Qiu Jian) 避免gcp创建创建文件夹失败 (b805d3495, Qu Xuan) 修复openstack存储同步问题 (e43af577b, Qu Xuan) 普通用户可获取rds账号密码 (0ff17ebef, Qu Xuan) gcp fake region status (86251d1ca, Qu Xuan) cloudaccount usage region/zone count not accurate (8d7bc247c, Qiu Jian) gcp use project name for cloudprovider (139b9592c, Qu Xuan) cloud-account/provider usage not accurate (912bf5c69, Qiu Jian) proxysetting attributes should be domain-settable (1e81c79ad, Qiu Jian) json unmarshal (b48dbbc5c, Qu Xuan) resolve parameter name conflict in google cloud account create input (d4600430a, Qiu Jian) opslog FetchOwnerId fail (1882232b4, Qiu Jian) network allocation according to sharing status (68c03778a, Qiu Jian) GetOnPremiseNetworkOfIP should return underlay networks (2498af7c3, Qiu Jian) update README api docs url to v2 (5f4f11bee, Qiu Jian) dns name pattern revisited (61051b843, Qiu Jian) code autogen issues (7ab3a06b4, Qiu Jian) 避免rds任务交叉运行 (5754fe90c, Qu Xuan) domain resources' field tags should changed to domain tags (ee42b9c01, Qiu Jian) cloudevent使用代理优化 (cea9cf95b, Qu Xuan) 添加cloudevent过滤参数 (a5b6e894b, Qu Xuan) opslog create fail (1b861a41f, Qiu Jian) clean pending usage caused by pre-validate-create-data (2297c6e96, Qiu Jian) is_managed filter is not accurate (b7b496676, Qiu Jian) typo (05012f0ba, Qu Xuan) 转换非标准存储类型到lrs (0f2e997f6, Qu Xuan) show sql connection error (9cb2727bf, Qu Xuan) esxi: Remove ‘Destory’ operation that is unnecessary for VirtualDiskManager (dae02ec01, rainzm) esxi: Disable automatically add host to the dvs (3530bca49, rainzm) esxi: Select correct unitNumber for ide control when creating disk (7c8200290, Rain Zheng) esxi: Modify the disk size correctly when creating vm (d71024849, rainzm) esxi: Set ‘WindowsDefaultAdminUser’ as true when deploy vm. (33184357b, rainzm) esxi: Detach all disk first when deleting vm (9bb732077, rainzm) esxi: Fix GetDriver and add driver log for vdisk. (81ffd582f, rainzm) esxi: Add usb to support mouse in vnc viewer (874ea4eb4, rainzm) esxi: Allow the creation of duplicate vcenter machines. (60a363a79, rainzm) esxi: Separate detach disk and delete disk when rebuilding. (b6ce495d4, rainzm) esxi: Set ‘IsInit’ as true when rebuildroot (2fe738b46, rainzm) host: No tag when tag’s value is empty (72716b8d5, Rain) notify: Remove default mobile template (9374c65a8, rainzm) region: Fix problems for Auto Scaling (4f27908ff, Rain) region: Set default value if rootdisk’s driver is empty. (45305648d, rainzm) region: Remove default secgroup for esxi guest (cd0125855, rainzm) region: zone from guesttemplate’s preferzone maybe nil (5ee969821, rainzm) region: Don’t allow address conflicts under vpc (18f5f9cb8, rainzm) region: Fix problems for Auto Scaling (7d52e5de8, Rain) region: Add CustomizeListFilter for snapshotpolicy (a9b7ca520, Rain) region: Add implements about owner for ScalingPolicy and ScalingActivity (6e9366f56, Rain)  Build (3)  ansibleserver: use native alpine, include openssh (e5dd8efd7, Yousong Zhou) docker: use openvswitch:2.10.4-0 (235339601, Yousong Zhou) add vet-check (8e40ff64f, Yousong Zhou)  Capability (1)  public network count filter by default vpc (80ae1b6cd, Zexi Li)  Climc (14)  refactor k8s resource (a6db3d353, Zexi Li) lbagent-show-default-params: add –cluster option support (333954add, Yousong Zhou) add command lbagent-show-default-params (e8b680352, Yousong Zhou) lb-update: add –cluster argument (1a308442c, Yousong Zhou) lbcluster-create: mark –zone as required (74e19af51, Yousong Zhou) lblistener-create: make –scheduler an optional arg (ea8cd6d7e, Yousong Zhou) shell: networks: add eip to server type choices (eaa16f333, Yousong Zhou) eip-create: make manager, region optional arguments (56c89ed57, Yousong Zhou) vpcs: add –external-access-mode argument (a0b39cc7b, Yousong Zhou) update k8s resource cmd (9f0df58c9, Zexi Li) k8s component add monitor options (8df155916, Zexi Li) remove stale zsh completion code (16adec3a5, Zexi Li) add k8s monitor component (90618466b, Zexi Li) support zsh completion (e884f4b6f, Zexi Li)  Cloudaccounts (1)  one sync task in queue per cloudaccount (8f5c65b92, Yousong Zhou)  Cloudcommon (11)  taskman: fix table insert (986878289, Yousong Zhou) tablespec: informer: use %#v to log bad obj (60293ef05, Yousong Zhou) taskman: SetModelManager (db9789c86, Yousong Zhou) tablespec: informer: log obj type (2f79c99dc, Yousong Zhou) policy: fix interval and oneshot sync (aeba29c4b, Yousong Zhou) app: cosmetic change (28e83a312, Yousong Zhou) cmdline: rework test (2a32627b5, Yousong Zhou) expose ITableSpec function (10603b4f6, Zexi Li) rbac: fix typo (5499f3509, Yousong Zhou) elect: notifyOne on subscribe (d845700ca, Yousong Zhou) allow create:“domain” tag (14389667a, Yousong Zhou)  Cloudprovider (2)  fix typo (ef695acae, Yousong Zhou) add methods for getting http client (a9061e545, Yousong Zhou)  Disks (1)  reword error message on bad DiskConfig struct (749fd878b, Yousong Zhou)  Dnsrecords (2)  allow updating only description (2f056b9ef, Yousong Zhou) note that DnsRecordManager is a IAdminSharableVirtualModelManager (06abfccbb, Yousong Zhou)  Elasticips (7)  onecloud: support changing bandwidth (df3c337bf, Yousong Zhou) list usable eips for onecloud kvm guests (2390e352f, Yousong Zhou) onecloud: support sync and syncstatus (18fe12a4a, Yousong Zhou) onecloud: create op (325464624, Yousong Zhou) onecloud: delete op for non-managed eip (fa833e694, Yousong Zhou) make manager, region arguments optional (8e1b6ded3, Yousong Zhou) only create eip of mode elastic_ip (0bf41caa3, Yousong Zhou)  Feature (9)  project filter that list jointable projects for user or group (b49272eb3, Qiu Jian) CloudId服务支持 (a07b112be, Qu Xuan)   allow enable/disable idp-synced-users 2. turn off user’s MFA by default (2cf49c37d, Qiu Jian)   add functime get lastest last start time of a billing duration (81b6a766a, Qiu Jian) user login into project with highest privilege automatically (c209fdd97, Qiu Jian) reorganize climc codes (1843ba334, Qiu Jian) decouple metadata resource and standalone resource (722498bf9, Qiu Jian) make baremetal options managed by service config (ee9289c23, Qiu Jian) climc support auth by token (7de51b9d7, Qiu Jian)  Features (16)  Support vm to save server template (1265e5d1e, rainzm) Support suggest network config before create vmware cloud account (14f324ea4, rainzm) Add ‘ScheduledTaskQueueSize’ options (3ea4beeb8, rainzm) Add climc command for ScheduledTask and ScheduledTaskActivity (2b7bd7a12, rainzm) Detach ScheduledTask when pending delete guest (8d30ef0ad, rainzm) Add handers and table for ScheduledTask… (d6c5c29c6, rainzm) Add ScheduledTask, ScheduledTaskActivity and ScheduledTaskLabel (058cc4fdc, rainzm) Extract STimer from SScalingTimer (8a2e23fd4, rainzm) Logo and copyright in verify email are same with these in company info (156ef6bd2, rainzm) Supports disabling of feishu and dingtalk notification (f73bcf8ad, rainzm) notify: Support ‘socpe:domain’ when list contacts (cfcaa50e2, rainzm) notify: Change the format of verify email (c706cfa27, rainzm) region: Add ‘EipAutoDellocate’ option when creating vm (727154461, Rain) region: Check periodically whether Guest Template is valid (f9b7c7e57, rainzm) region: Structured diskinfo and add ‘Id’, ‘Name’ field (8c4b025dc, Rain) scheduler: Change the action for guests with backup and instanceGroup (2a0c16c6f, rainzm)  Guestdrivers (3)  rework test (e27a12ec6, Yousong Zhou) kvm: eip associate (8b82d67b6, Yousong Zhou) managed: use const api.EIP_STATUS_ASSOCIATE (df2d98d8c, Yousong Zhou)  Guestnetworks (5)  reduce odds of collision seeded by epoch seconds (173448ee4, Yousong Zhou) use math/rand instead of crypto/rand (6a63aa942, Yousong Zhou) add EipId field (ff6e3e236, Yousong Zhou) try allocation of mapped addr on sync (06ea1b170, Yousong Zhou) add vpc id and mapped ip addr info to nic desc (9990ad3bc, Yousong Zhou)  Guests (6)  guests with vpc nics are available for eip association (2270704c4, Yousong Zhou) support server-create-eip for onecloud guests and eip (7e02808c8, Yousong Zhou) list usable guests for specified eip (df4d80fbd, Yousong Zhou) include vpc, network info in guest nics list (b29c4b386, Yousong Zhou) simplify code (64f269ac2, Yousong Zhou) always include host_id in desc (ff2686689, Yousong Zhou)  Hostman (9)  options: add option –ovn-underlay-mtu (d714e450f, Yousong Zhou) options: add option –sdn-pid-file (61659d7b2, Yousong Zhou) options: knobs for enabling features in sdnagent (25d05899d, Yousong Zhou) options: remove k8s_cluster_cidr (68b7ecf83, Yousong Zhou) options: fix default value spec (cbe5ef416, Yousong Zhou) options: pack up a Parse() func (0e16bf8ff, Yousong Zhou) let sdnagent do port cleanup (f05e16bd1, Yousong Zhou) options: add ovn_mapped_bridge (279e68ae0, Yousong Zhou) options: add allow_xx_vms (5acbec452, Yousong Zhou)  Hotfix (1)  vpc change owners with wire (c97e2ab1c, Qiu Jian)  Informer (1)  do not inform if backend not init (7c61e9662, Zexi Li)  Iproute2 (4)  address: make Exact idempotent (4b6d385e1, Yousong Zhou) route: add del funcs (91defab40, Yousong Zhou) errors: add IsErrSrch() (690039309, Yousong Zhou) route: prepare for route del (a5c253e12, Yousong Zhou)  Keystone (3)  passwords: SetModelManager (f1dfcd5e0, Yousong Zhou) config: SetModelManager for whitelisted config (7d47ac4dd, Yousong Zhou) fix db not sync (9a6065fbf, Zexi Li)  Lb (4)  include cluster name info in details (5f49670e1, Yousong Zhou) onecloud: allow empty string for redirect_{scheme,host,path} (3fe10a738, Yousong Zhou) onecloud: disallow creating lb with vpc network (ce741a24c, Yousong Zhou) allow update cluster_id with PUT request (539521087, Yousong Zhou)  Lbagent (6)  default-params: default vrrp params from peer lbagents (71e9f99b6, Yousong Zhou) new API: GET /loadbalanceragents/default-params (2b98f75c7, Yousong Zhou) fix condition for “nothing to serve” (3ae45d55e, Yousong Zhou) standalone rate control between listener and its rules (7e2273bfb, Yousong Zhou) decouple rule redirect from listener redirect (3d58d51ab, Yousong Zhou) fend off unexpected resources just in case (7f982d5b2, Yousong Zhou)  Lbagents (2)  add check on vrrp.advert_int (258aba250, Yousong Zhou) params: add needsUpdatePeer() and updateBy() methods (57e29330b, Yousong Zhou)  Lbbackend (2)  kvm: allow adding ‘host’,“ip” backend type (b6110fd3a, Yousong Zhou) ValidateCreateLoadbalancerBackendData: use httperrors (97c5afda5, Yousong Zhou)  Lbbackends (1)  allow backends of the same region (vs. zone) (1dc312303, Yousong Zhou)  Lblistener (5)  rename filter name certificate{,_id} (0f953b8b2, Yousong Zhou) allow turning on/off redirect (471755103, Yousong Zhou) redirect: try avoid endless redirect (d3313eba4, Yousong Zhou) make scheduler an optional arg on creation (473932311, Yousong Zhou) fix updating lblistener without backend_group field (1224cd819, Yousong Zhou)  Lblistenerrule (3)  allow turning on/off redirect (856310331, Yousong Zhou) redirect: try avoid endless redirect (2cd6c8588, Yousong Zhou) allow creation even for redirect listener (d55af7af2, Yousong Zhou)  Lblisteners (4)  remove unused acl_name field (5833f1a90, Yousong Zhou) list: show acl name (04abe448f, Yousong Zhou) list: show certificate name (ab71f5e6c, Yousong Zhou) list: filter with certificate ids (07ae9c12e, Yousong Zhou)  Mcclient (5)  options: loadbalanceragents: yum as the default deploy method (5218f8aab, Yousong Zhou) lb: allow empty string as arg for –redirect-{scheme,host,path} (003884860, Yousong Zhou) options: lb: arg rename cluster{,_id} (b4ce65109, Yousong Zhou) options: add EmptyOption (d4416f614, Yousong Zhou) options: remove implied details=true for pending_delete=all (9a47116a1, Yousong Zhou)  Monitor (2)  reduce subscription mysql usage (de889ec6c, Zexi Li) refactor suggest code (995e5859e, Zexi Li)  Multicloud (4)  speed up objectstore test (d4f54af5a, Yousong Zhou) huawei: rework responses_test (020831407, Yousong Zhou) loader: guard against changing proxyFunc of default client (e711ae764, Yousong Zhou) avoid changing transport of global default http client (fd3c9e5cd, Yousong Zhou)  Networks (7)  validate that start, end, gateway ip are in the same subnet (0280b6aa5, Yousong Zhou) validateUpdateData: eliminate intermediate vars (f4a001ad6, Yousong Zhou) decrease indent (927cbd415, Yousong Zhou) sep check of masklen only for start,end type creation (f27e17727, Yousong Zhou) create eip network only in default vpc (772038024, Yousong Zhou) return HTTP 404 for sql.ErrNoRows (72c23e877, Yousong Zhou) eliminate a variable (1d78510fa, Yousong Zhou)  Opslog (4)  remove unneeded nil check (4bbf7c048, Yousong Zhou) group literal fields (50449ca01, Yousong Zhou) readability change (fbc48c792, Yousong Zhou) LogEvent: set model manager (be46546ba, Yousong Zhou)  Opt (1)  scheduler: better sort for hosts when selectHost (49b0a01b0, rainzm)  Optimized (1)  支持ip和端口过滤安全组 (f12192f1c, Qu Xuan)  Others (199)  update apis generate model (042cd597f, Zexi Li) fix reauth condition on influxdb not found (#7457) (8172a551b, wanyaoqi) fix cache non lvm disks (#7460) (381a2796b, wanyaoqi) aws elb listener\u0026rule name too long fix (38e02db07, tangbin) fix redis reset account password action log (bb500edc8, tangbin) loadblancer listener modify name fix (d9488f552, tangbin) fix deploy admin auth key (7ad7774f8, wanyaoqi) fix panic on storage failed get host (#7391) (a2d562cca, wanyaoqi) adjust schedule resource condition width (7103f4e71, Zexi Li) fix schedtag list output (2ac39e704, wanyaoqi) Add metadata for GuestTempalte details (a66ba3f39, rainzm) Add network info when list scalingGroup details (02b30326f, rainzm) 修改报警消息模版： (619322176, zhaoxiangchun) 修复统一报警bug (bb66e2d19, zhaoxiangchun) go fmt (92fbc44b6, tangbin) go fmt (d93edbe42, tangbin) host upload template check (a4d89b1f6, tangbin) huawei fetch regions\u0026projects fix (5255df021, tangbin) rename vgname centos (7ef340fb6, wanyaoqi) fix clone clean pending usage (a329cd536, wanyaoqi) capabilites add available host count (32b36ee10, wanyaoqi) fix snapshot clean pending usage (2c27db42c, wanyaoqi)   add precheck for perform action (ec933e480, wanyaoqi)   format fix (2ff5d2aaf, tangbin) fix empty else (b5aceb67f, tangbin) fix host import (2794c84ac, tangbin) fix huawei delete resource (ce9646f9e, tangbin) fix huawei elb disable healthcheck (be8da39ce, tangbin) lb sync project fix (dacc8adce, tangbin) add more log (b79c410b0, tangbin) apigateway host imports data validate (b5754d2e3, tangbin) fix GetOrCreateVpcForClassicNetwork (f9c422112, tangbin) huawei eip delete fix (fdcaa1c8e, tangbin) 修复监控报警规则删除的问题 (c65fc0f1d, zhaoxiangchun) fix error output (18bae1849, wanyaoqi) acl delete condition fix (3e5eceeef, tangbin) fix server sync status (0e617ec13, wanyaoqi) sync classic redis fix (30aa75e04, tangbin) add params auto_migrate_on_host_down (b806e536f, wanyaoqi) misc ha guest fix (65408519a, wanyaoqi) disable procutils print error info (4831aee2d, wanyaoqi) fix list guests on host (f09eb6690, wanyaoqi) cloudprovider usable filter with zone (26757cb8d, tangbin) fix guest template health check (550883197, rainzm) remove informer code for release/3.3 (a365a0f45, Zexi Li) user batch register bugfix (b52eb8491, tangbin) vendor update: update jsonutils (d335c570c, wanyaoqi)   fix local storage init local man (fe472cbf4, wanyaoqi)   misc fix (5070775cd, wanyaoqi) fix set storage info bind mount (18a023f2f, wanyaoqi) update vendor (13f44debc, tangbin) Update docker image onecloud-base and its references (eb7b055ca, rainzm) 增加influxdb的tag 的一些filter (5db35871e, zhaoxiangchun) Update Dockerfile.ansibleserver (69a4b1272, rainzm) bind mount nfs storage path (5db73a667, wanyaoqi) cluster_d required-\u003eoptional (87cf251d2, tangbin) copyright api update (a3245195a, tangbin) fix the bug introduced in #6643 (968568487, rainzm) update jsonutils (b4884e3dd, rainzm) fix deploy backup server order (207cd93fe, wanyaoqi)   add server pending deleted for host details (875108248, wanyaoqi)   include system usage (89ec83fec, wanyaoqi) server name enable upper case (6f20638f8, wanyaoqi) fix get storage capabilities with null field (615fe1da8, wanyaoqi) disable dhclient (9a6c26de1, wanyaoqi) Modify alert structure and inherit scoperesource (f20a87a5d, zhaoxiangchun) 统一报警模块 (6c66185bd, zhaoxiangchun) ignore common etcd endpoint not found error (e9da1022b, Zexi Li) support filter by cloudaccounts (561d7b0cc, wanyaoqi) fix reserved ip export keys (6af753c81, wanyaoqi) replace err with errors.cause (6b8e37c88, tangbin) shuzhou to suzhou (8514e1910, tangbin) rds postpaid instance create fix (6ecebc5f2, tangbin) fix cpu usage metrics (25310ed92, wanyaoqi) configureable reload telegraf config (714b87aa3, wanyaoqi) scripts/coverage.sh: ignore packages without test files (200029dfd, Yousong Zhou) .circleci: run tests parallelly (bf1b1f48b, Yousong Zhou) fix windows install regedit record (9372a7b9c, wanyaoqi) fix host set reserved resource func name (413d292c2, wanyaoqi) fix informer worker heap large usage (cc5f731fc, Zexi Li) fix the tag filter and result record for scheduledtask (5f2a91f2a, rainzm) fix host list servers filter (1b055f24a, wanyaoqi) Add ‘trigger’ for ScheduledTask (8a69558c8, rainzm) refactor ITableSpec signature with context (9f4d4a450, Zexi Li) image support generate name (a3043520e, wanyaoqi) 修改框架查询influxdb的时间单位 (86e687015, zhaoxiangchun) climc:allow disable term line width (0a0af5cfa, root) cancel condition release (7e9575040, tangbin) ctyun sync host wire fix (f58a9305e, tangbin) bind mount local image path to container path (8e4668213, wanyaoqi) isolated device manager: (44cbdd07a, wanyaoqi) add-enterprise-info-update-climc (bb808bd8a, tangbin) 监控数据查询增加对任意时间范围的支持 (ecd4a9407, zhaoxiangchun) 统一监控接口 (3f63e4737, zhaoxiangchun) get snapshots order by created at asc (6e0f4a494, wanyaoqi) implement generic service informer (95a58cc60, Zexi Li) 在优化建议资源列表中增加费用信息 (585385f0c, zhaoxiangchun) fix migrate with multi local storage (4d404e09d, wanyaoqi) redis\u0026rds add postpaid duration (346d55850, tangbin) declear variable and define (8fde0c62a, wanyaoqi) 修复优化建议资源列表cloudenv过滤失效的问题 (00fb77e0c, zhaoxiangchun) 类型是onecloud的notifier增加webconsole的alert (0a7b381cf, zhaoxiangchun) clean network scripts on init (73297de60, wanyaoqi) host storage misc fix: (690a5f2fc, wanyaoqi) .circleci: run with parallel level 3 (e80c938ba, Yousong Zhou) fix host name validator (ec2cb3113, wanyaoqi) fix remotefile fetch image propertites (810de8a7e, wanyaoqi) isolated device add attribute reserved resource (91ff1d7d8, wanyaoqi) zstack宿主机监控中增加参数信息进行Unmarshal (47cac3c7b, zhaoxiangchun) update for doc-gen (8a7703082, Qiu Jian) Fix the problem of field duplication when exporting fields (849628fe9, rainzm) aws lbbg cache bugfix (d99ec5771, tangbin) fix list disk attachable servers (df2e05b5b, wanyaoqi) bugfix-优化建议 (c8a0d7736, zhaoxiangchun) 优化建议增加时间筛选范围 (42ed0b1c5, zhaoxiangchun) 修复当prestate=alerting，newstate=alerting的情况无法触发notify的问题 (4a784c1d7, zhaoxiangchun) Kill processes in time \u0026 Add debug info (ff2fc7440, rainzm) image cache use lockman (127bd0ff1, wanyaoqi) add sys usage (844b865e2, wanyaoqi) README.md: use travis-ci.com as badge target link (ea373821d, Yousong Zhou) redis\u0026dbinstance add clean expired postpaids resources (0029b25f9, tangbin) host convert inject dockerd config (04b4e5713, Zexi Li) add fuzzy ip matching (f602979a2, tangbin) sync storage shared info when syncing local storage (14abf05cf, Qiu Jian) update lisDescendent scope params (6037f1514, Qiu Jian) 根据调度标签过滤网络和存储资源 (888a5463a, Qu Xuan) 可根据代理过滤云账号 (6ea25e6fc, Qu Xuan) 修复无法获取vmware宿主机监控数据的问题 (6ffb3653a, zhaoxiangchun) update vendor (d98b2b405, rainzm) modify the logic of queryCondition save the evalMatch (387880164, zhaoxiangchun) allow delete paramter config (cbe5e8890, tangbin) 修改规则执行时间 (e8a61b035, zhaoxiangchun) fix esxi disk disconnect (a5d2651fb, wanyaoqi) remove statefile in start script (0fe396d5c, wanyaoqi) clear yunionauth cookie (75328cf08, tangbin) 基于监控数据的优化建议 (cc3f5ed19, zhaoxiangchun) 在monitor的package中新增influxdb相关的功能 (6251d2da3, zhaoxiangchun) do not close worker chan (7bcedd41e, wanyaoqi) detect bmagent and hostagent service (108613bd3, Qiu Jian) guest set login account (8144d2d2f, wanyaoqi) fix import from libvirt (1ba2d92e6, wanyaoqi) huawei network id fix (002a618e7, tangbin) new local lb backend fix (8c06b50ed, tangbin) feat/ansibleserver: Install git in Dockerfile.ansibleserver-base (1fbfc7f22, Rain) feat/ansible_pb: Add climc operator for ansibleplaybooks_v2 (cf514364e, Rain) feat/ansible_pb: Add IncludeRole implments ‘ITask’ in pkg/util/ansiblev2 (faf32415f, Rain) lb acl cache add acl filter (4882a6bb2, tangbin) bm register use domain token (4f23ffb90, wanyaoqi) set cookie domain (f25bbee90, tangbin) feat/ansible_pb: Add support for requirements (331ba9bb3, Rain) 修复规则无法禁用的问题 (cb13b2241, zhaoxiangchun) bugfix mem paginate (d874b52b0, zhaoxiangchun) set host list scope system (6779db23f, wanyaoqi) apigateway-yunionauth-domain-setting (4e9264cb2, tangbin) 修复谷歌监控无法获取的问题 (d4531972d, zhaoxiangchun) support custom service url (26780e2c8, wanyaoqi) bugfix mem paginate (7c0d70414, zhaoxiangchun) fix host init without etcd (9652c97dc, wanyaoqi) fix host details output (db2d02fe0, wanyaoqi) fix update input (7353622d2, wanyaoqi) fix host health (d72724892, wanyaoqi) fix/monitor: AutoScalingNotifier.ShouldNotify should call NotifierBase.ShouldNotify (e67effaf3, Rain) add cookie domain setting option (849d1d669, tangbin) monitor,对于监控数据nodata，默认不发送邮件 (e81334c0a, zhaoxiangchun) fix/as: Set ScalingPolicy’s project as its ScalingGroup’s project (352e912c2, Rain) enable etcd lock (5158a509e, wanyaoqi) host health check (38c1c70a2, wanyaoqi) gpu host enable huge page (98377116f, wanyaoqi) fix/autoscaling: Chang the format of CoolingTime (be5c539e9, Rain) fix exsi convert disk path (9c4d3c62b, wanyaoqi) fix/notify: remove ‘v2’ from email verify url (9aa132cf3, Rain) fix/notify: Add deadline for rpc client (e1c63729d, Rain) host health check (af6c6fee8, wanyaoqi) yunionapi reset password fix (32e4ae98c, tangbin) fix/autoscaling: Change Sunday as 7 from 0 (09d7aaf39, Rain) fix/guesttemplate: Change ResetPassword as true default (203bdb2df, Rain) fix/autoscaling: fix some problem (4d8e0ba1b, Rain) host fix cmt bound, minor fix (b05d22834, wanyaoqi) aws elb health check type fix (7b6f45789, tangbin) huawei elb cookie timeout fix (b62727ae0, tangbin) ctyun subnet create bugfix (8618be1fd, tangbin) misc bugfix: (9a7c7623c, wanyaoqi) make DIRECT proxysettting default share to system (6faa4d91a, Qiu Jian) lb 负载均衡优化建议 (fc05c2d0e, zhaoxiangchun) fix/autoscaling: Add ‘scaling_group_id’ for server-list result (16226becf, Rain) fix/autoscaling: Add status ‘pending_remove’ for ScalingGroup_Guest (32280e214, Rain) guestnetworks,hosts: add alloc mapped ip addr for use in onecloud vpc (3142957f5, Yousong Zhou) fix/autoscaling: Change ScalingPolicy as VirtualResource (39d5603af, Rain) fix/autoscaling: Use UserCred’s session but AdminSession to request monitor (acb4d1cab, Rain) aliyun create elb listener fix (a06f7e7b5, tangbin) supermicro redfish support (98cec09a6, Qiu Jian) fix check ca cert (cf0cf484a, wanyaoqi) support sync disk snapshot status (54596fc42, wanyaoqi) huawei elb sync vpc (bd0a8f709, tangbin) remove aws invalid backendgroup (674764208, tangbin) keystone store service cert (b682e1b44, wanyaoqi) VMware resource pool同步 (1ef9a481c, Qu Xuan) 优化邮件格式 (6c3daec4c, zhaoxiangchun) lblis \u0026 lbbg \u0026 lbr \u0026 lbb create add fetch owner id (c977fd02c, tangbin)  Region (15)  schedtag list support resource_types (65562c25f, Zexi Li) lbagents: skip tls check for default influxdb endpoint url (7f7aef031, Yousong Zhou) lbagents: turn off guest src check (f30b191d0, Yousong Zhou) loadbalanceragents: yum as the default method (4a0d019b6, Yousong Zhou) retry set influxdb policy until completed (8e51f627a, Zexi Li) fix get resource details panic (0b70491ea, Zexi Li) fix server create params not include specified resource (4713312b3, Zexi Li) fix baremetal can’t enable public baremetal type network (80a405a8a, Zexi Li) server create prefer resource fetch by name or id (536be2ead, Zexi Li) guests: include secgroup ids in listing (e8cbaee90, Yousong Zhou) lbagent: undeploy: make it idempotent (f226d342e, Yousong Zhou) lbagents: fix deleting pending_deleted objects (f890b2b18, Yousong Zhou) cloudaccounts: re-validate only when proxysetting changed (d716405eb, Yousong Zhou) vpcs_mapped_address: fix locking (25d1c3693, Yousong Zhou) vpcs_mapped_address: alloc guestnic mapped addr backwards (138b596ec, Yousong Zhou)  Scheduler (7)  fix storage filter duplicate error message (d6b1fa02d, Zexi Li) fix memory over committed (d8d6e8c5b, Zexi Li) fix min counter get count not correct (db65bf4ef, Zexi Li) filter disabled cloudprovider (2e9307269, Zexi Li) set schedtag default strategy if input empty (e00b1fdc3, Zexi Li) get region nil panic (d049ac936, Zexi Li) fix network predicate get wrong free port (f39c82959, Zexi Li)  Sysutils (1)  rework test (458bd0c7f, Yousong Zhou)  Tasks (2)  onecloud: support disassociate eip (74920a37e, Yousong Zhou) EipDissociateTask: lock associated model (02ea7b462, Yousong Zhou)  Vendor (7)  update yunion.io/x/structarg (4ce404dd8, Yousong Zhou) update yunion.io/x/{jsonutils.pkg} (a2fda726d, Yousong Zhou) update yunion.io/x/sqlchemy (2e687997a, Yousong Zhou) update yunion.io/x/ovsdb (5ad06097c, Yousong Zhou) update yunion.io/x/ovsdb (4f68026b8, Yousong Zhou) import yunion.io/x/ovsdb (7c3d9d7f8, Yousong Zhou) tidy and vendoring (ffadb30c6, Yousong Zhou)  Vet (5)  composite literal uses unkeyed fields (fb26b0c38, Yousong Zhou) bad syntax for struct tag value (d25f92af8, Yousong Zhou) pairs not separated by spaces (b99157f64, Yousong Zhou) bad syntax for struct tag pair (c18d347b0, Yousong Zhou) unreachable code (85d238cb5, Yousong Zhou)  Vpcagent (55)  ClaimVpcGuestDnsRecords: guard against pending_deleted guests (821283952, Yousong Zhou) different direction for l3 and l4 match (97251c7cc, Yousong Zhou) ovn: claim dnsrecords for all vpcs (ba0e41d99, Yousong Zhou) models: include dnsrecords (583718014, Yousong Zhou) ovn: dns records for guest names (88095c6d8, Yousong Zhou) ovn: mark and sweep dns records (d51791396, Yousong Zhou) ovn: apply qos on eip (e442e7a25, Yousong Zhou) ovn: apply guestnetwork bw_limit (4b44f21ab, Yousong Zhou) ovn: use FindXxxReferrer_yyy (4b299846d, Yousong Zhou) ovn: set underlay mtu size in config file (2841e245e, Yousong Zhou) ovn: mix eipgw and distgw (83a44ce94, Yousong Zhou) models: include elasticip (822ba5875, Yousong Zhou) ovn: add and use mac.HashVpcHostDistgwMac() (22090a379, Yousong Zhou) models: separate Copy() and CopyJoined() (146ab44fb, Yousong Zhou) apihelper: use CopyJoined() (cb27b1805, Yousong Zhou) models: add CopyJoined() (c4b308489, Yousong Zhou) remove unused code (8873c8905, Yousong Zhou) apihelper: use its own options (230f004f3, Yousong Zhou) models: remove now boilerplate code (3e09d4920, Yousong Zhou) apihelper: add interface IModelSetListOptionProvider (c7fee7c76, Yousong Zhou) models: modelset: details=false for networks (f5360264f, Yousong Zhou) models: include wires (3a51985fc, Yousong Zhou) ovn: preparation: skip default vpc (5fdd534f7, Yousong Zhou) ovn: preparation: use network.Vpc.Id (a7a3beae2, Yousong Zhou) apihelper: use IModelSet.IncludeEmulated() (e0349f92b, Yousong Zhou) models: modelset: add IncludeEmulated() method (5bf45ad65, Yousong Zhou) apihelper: use IModelSet.IncludeDetails() (39a19d1c6, Yousong Zhou) models: modelset: add IncludeDetails() method (2a0cac9d4, Yousong Zhou) ovnutil: destroy non root obj first (4d54972a9, Yousong Zhou) ovn: cmp: generate clean args in a single batch (6d788e052, Yousong Zhou) ovn: use db.FindOneMatchByAnyIndex (4962bdc7e, Yousong Zhou) ovn: configure acl for lport (579641a26, Yousong Zhou) ovnutil: OvnNbctlArgsDestroy: take into account ACL (53f354612, Yousong Zhou) ovn: secgrouprules_acl (9f4daafee, Yousong Zhou) models: sort security group rules (1abdb4f13, Yousong Zhou) models: include secgroup and rules (7ba46e928, Yousong Zhou) apihelper: do not set details=true by default (f33a2e177, Yousong Zhou) ovnutil: remove old generated code (654845fd4, Yousong Zhou) ovn: use yunion.io/x/ovsdb (cae9594da, Yousong Zhou) ignore possible external subnets (218df2416, Yousong Zhou) ovn: explicitly include gateway route in classless routes (5caaccd43, Yousong Zhou) models: ignore possible external guests (4496a7bbc, Yousong Zhou) ad-hoc replacement for db.FindByIndex() (503735ebf, Yousong Zhou) models: allow guest to have multiple vpc nics (09cc38f96, Yousong Zhou) work around nics of pending deleted guest (11835889c, Yousong Zhou) fend off non-onecloud-vpc guest nics (16ced399a, Yousong Zhou) ovn: use network.GuestDns when available (d2c0ba4d5, Yousong Zhou) ovn: manage static routes (05c38c813, Yousong Zhou) ovn: guestnetwork: guard against empty dhcpopt (0578d6c49, Yousong Zhou) ovn: rename subnet, guestnetwork ovn obj names (1c50ffb21, Yousong Zhou) ovn: use cmp() when claimVpc (38354229b, Yousong Zhou) ovn: use cmp() (d8e419cfa, Yousong Zhou) add cmp() for search and pre-cleanup (4d3eba9ba, Yousong Zhou) ovn: make host ls when claimVpc (e6bb3397d, Yousong Zhou) models: include guest, host (e4ad3f419, Yousong Zhou)  Vpcs (1)  add ExternalAccessMode field (eebd15e0d, Yousong Zhou)  Webconsole (2)  fix old session make new session closed (37ee6f844, Zexi Li) fix version and others handler not handle (e56152aa4, Zexi Li)  Wires (1)  default to “default” vpc on creation (d83a7dade, Yousong Zhou)   cloudpods-operator 仓库地址: https://github.com/yunionio/cloudpods-operator\n64 commits to cloudpods-operator - v3.3.0 since this release.\nBug Fixes (5)  apigateway totp should default on (0520f4e, Qiu Jian) member policy requires member role (3d85738, Qiu Jian) Change xxIntervalxx type from ‘int’ to ‘*int’ (0cc2996, rainzm) Change api prefix ‘/api/v1’ as ‘api/v1’ (5fcceb2, rainzm) change command of init container for oso (019c5b0, rainzm)  Defaults (1)  using openvswitch image of tag 2.10.4-0 (cbbaa01, Yousong Zhou)  Feature (1)  add cloudid service (525f310, Qu Xuan)  Features (1)  Add support for onecloud-resource-operator (b5b9181, rainzm)  Host (1)  tell sdnagent to use common.conf (a260f9c, Yousong Zhou)  Itsm (1)  limit memory to 1G (83c05e9, Zexi Li)  Others (52)  调整统一监控 系统报警规则的注入配置 (7dc8266, zhaoxiangchun) fix etcd member count (8f5c7b5, wanyaoqi) recreate pods on pvc not local path (03b924e, wanyaoqi) 修复系统报警规则重复创建的问题 (6576384, zhaoxiangchun) fix set pvc name (821875d, wanyaoqi) fix glance pvc name (54bffda, wanyaoqi) update vendor for release/3.3 (0d99429, Zexi Li) cloudmon deployment increase [rds redis oss] monitor information collectiona (5dbf86e, zhaoxiangchun) add check if cronjob exist (5862b3b, wanyaoqi) service etcd client disable unready client (052dca4, wanyaoqi) cloudmon as deployment (d5f78cd, wanyaoqi) host image component set default toleration (6f564a2, wanyaoqi) check etcd dbsize, do compact and defrag (9ec773c, wanyaoqi) system alert init info create in operator (61f9c09, zhaoxiangchun) host image as daemonset (dcf7299, wanyaoqi) fix etcd defrag (e947444, wanyaoqi) add daemonset telegraf (78e082e, wanyaoqi) telegraf init tool (ca58141, wanyaoqi) fix:优化manifest example (4c7e1fe, lvyangyang) new pvc name with storage class (6b300f5, wanyaoqi) itsm endpoint注册为http请求 (14fcbe1, zhaoxiangchun) not register azure classic host data (e345786, Zexi Li) operator增加itsm服务 (9739e8a, zhaoxiangchun) remove put/del key on liveness probe (ffdf0eb, wanyaoqi) set cronjob default attributes (292f37a, Zexi Li) etcd cluster default use version 3.4.6 (2b293d6, wanyaoqi) bugfix：宿主机监控没有默认值注入的函数 (e48997d, zhaoxiangchun) etcd operator fix (f71a98e, wanyaoqi) fix etcd liveness probe (a7d57db, wanyaoqi) first create policy (5eae948, wanyaoqi) add max wal file (cfc762a, wanyaoqi) fix etcd arguments (d661676, wanyaoqi) 增加宿主机的监控查询的cronjob (011ae7d, zhaoxiangchun) report-server 监控间隔调整 (fba6be1, zhaoxiangchun) 修改reportserver cronjob采集监控数据的间隔 (fb88568, zhaoxiangchun) set keystone url (2bd2d63, wanyaoqi) kubeserver add service account (4cbff0a, Zexi Li) onecloud culster fix: (8a61750, wanyaoqi) mount etcd tls (6391bf8, wanyaoqi) web nginx config (0649323, Zexi Li) fix api_server url (8bc9f6c, wanyaoqi) fix cronjob update (28ca0af, wanyaoqi) etcd use tempfs (23c8a3e, wanyaoqi) adjust web nginx config (b770851, Zexi Li) create etcd service (91b75cc, wanyaoqi) do not always sync configmap (437091a, wanyaoqi) create etcd service (00127da, wanyaoqi) etcd tls endpoint (69f02e3, wanyaoqi) create etcd cluster (e25a2f7, wanyaoqi)   sync config api_server to common service (2ce9c33, wanyaoqi)   添加cronjob StartingDeadlineSeconds 参数 (daed9d9, zhaoxiangchun) add sockio web location (a0b437e, Zexi Li)  Web (1)  remove unused nginx config (6f37389, Zexi Li)  Yunionagent (1)  update content (87badd5, Zexi Li)   cloudpods-service-operator 仓库地址: https://github.com/yunionio/cloudpods-service-operator\n36 commits to cloudpods-service-operator - v3.3.0 since this release.\nCode Refactoring (1)  Abstract the same logic and abstract interface (178b33b, rainzm)  Features (3)  init docs (1b18737, rainzm) Change field of IntOrStringStore (655cf96, rainzm) Normalize options \u0026 Add ‘dense’ options (6ec0326, rainzm)  Others (32)  Add Endpoint document (3696dc6, rainzm) Add CRD Endpoint (8e7de75, rainzm) support yaml string (e1ac25c, rainzm) fix about field reference (1341f22, rainzm) fix the reference of option’s field (368fcf2, rainzm) update README.md and CONTRIBUTING.md (2bdd574, rainzm) modify Dockerfile (454c20c, rainzm) Modify the code structure in the pkg directory (0c4466a, rainzm) Add README.md and CONTRIBUTING.md (01cff42, rainzm) modify the image name in Makefile (2fd0ec9, rainzm) add LICENSE (4c79f85, rainzm) modify copyright (758336b, rainzm) Reduce the dependence on executing ‘make image’ (a235dba, rainzm) change module name: onecloud-resource-operator=\u003eonecloud-service-operator (d4a574e, rainzm) remove ‘MetricsAddr’ and add ‘WebhookPort’ for Options (6b58d3c, rainzm) Modify Makefile and Dockerfile for vendor (b1885e7, rainzm) init vendor (be4e55a, rainzm) change module name: onecloud-service-operator=\u003eonecloud-resource-operator (6baefaa, rainzm) Modify Dockerfile and Makefile (4a14009, rainzm) Adjust the project’s directory structure (958333e, rainzm) Improve value abstraction (8abac21, rainzm) fix some problem in provider/virtualmachine.go (8b812fb, rainzm) Set the ansible_user as ‘cloudroot’ when hypervisor is not ‘kvm’ (6b12bdc, rainzm) fix IsServerErr: code ‘500’ is also ServerErr (403c3bc, rainzm) Modify the json desc about ‘Bw’ in VMNewEipSpec (c794687, rainzm) fix some comment (29ce124, rainzm) fix ‘dealErr’ and update Dockerfile, kustomization.yaml (6c0c072, rainzm) clear external ansibleplaybook which is finished (dbe77e4, rainzm) fix and update (7f60c79, rainzm) change module name ‘onecloud-service-operator’ to ‘yunion.io/x/onecloud-service-operator’ (2430e12, rainzm) fix and update (45c9033, rainzm) init (0e138d9, rainzm)   ocadm 仓库地址: https://github.com/yunionio/ocadm\n28 commits to ocadm - v3.3.0 since this release.\nAddon (1)  add metrics server and remove itsm server (6e8ffa2, Zexi Li)  Others (27)  ocadm create cluster, 延时等待容错 (3269146, Zhang Dongliang) 高可用部署主备选取应将kube-apiserver是否工作考虑进去 (dd775ca, Zhang Dongliang) fix longhron template (6d28362, wanyaoqi) 修复 keepalived master state bug (3d452ac, Zhang Dongliang) longhorn deploy misc fix (53cbebc, wanyaoqi) update vendor for release/3.3 (ec96e95, Zexi Li) update vendor for 3.3 (bd902c2, Zhang Dongliang) fix create region zone where upgrade from v2 (b581b3d, wanyaoqi) update vendor for 3.3 (ec2d04c, Zhang Dongliang) ocadm 接入 keepalived，支持高可用 (08d74c0, Zhang Dongliang) update DefaultCalicoVersion to 3.12.1 (f82dd55, Zhang Dongliang) migrate data to longhorn (9dda325, wanyaoqi) addon longhorn (737c7c3, wanyaoqi) fetch itsm config from globalrc (0eabd9a, wanyaoqi) sync vendor with operator (d6eb026, Zexi Li) fix upgrade from v2 (442f19e, wanyaoqi) add operator priority schedule class (0c22cef, Zexi Li) 修改itsm镜像仓库信息，和项目信息对应 (eb07ee0, zhaoxiangchun) set node override name (1a51fda, wanyaoqi) set default control plane endpoint (a8f7a53, wanyaoqi) 多网卡环境下 calico 网卡选择策略 (4fbd02d, Zhang Dongliang) disable loki stack (f089a4c, Zexi Li) 修改itsm的template (3f50a3c, zhaoxiangchun) support upgrade (3ccb7eb, wanyaoqi) join args (faa9e3f, Zhang Dongliang) inherit print addon yaml opt (a4ea4d1, Zexi Li) custom csi dependent image (f0bfd56, wanyaoqi)   sdnagent 仓库地址: https://github.com/yunionio/sdnagent\n39 commits to sdnagent - v3.3.0 since this release.\nAgent (18)  ovn: no error log if the mapped bridge does not exist (eec5b58, Yousong Zhou) add eip man (24c7338, Yousong Zhou) parse/watch config from main (616a4e5, Yousong Zhou) server: use sdn_enable_guest_man (d6452ef, Yousong Zhou) server: move hostConfig watch to AgentServer (2bee515, Yousong Zhou) server: shuffle lines to prepare for conditionals (d778a93, Yousong Zhou) drop support for k8s_cluster_cidr (cf5b8bf, Yousong Zhou) use hostman options (0856fcc, Yousong Zhou) server: guest: do region api sync when needed (0b22e05, Yousong Zhou) utils: add g.NeedsSync method (e87a9e8, Yousong Zhou) server: guest: guard against emtpy g.HostId (36f6603, Yousong Zhou) server: guest: clear up classic and vpc nics handling (b56d74d, Yousong Zhou) server: guest: rename flow update/clear method names (e118828, Yousong Zhou) add ovn distgw manager (5d16d37, Yousong Zhou) utils: add mapped ip addr info (5c4a41d, Yousong Zhou) flowman: log also bridge name (bc2f5ea, Yousong Zhou) fix log level (4d985a4, Yousong Zhou) export guest.IsPending method (dc7f907, Yousong Zhou)  Build (10)  systemd: add keepalived reload command (1fd0c9d, Yousong Zhou) eipgw: use 8 byte char for auth_pass (1084304, Yousong Zhou) eipgw: let keepalived use detail log (7d8f62d, Yousong Zhou) add ansible playbook README (9263c95, Yousong Zhou) separate artifact and docker image build (c5cae93, Yousong Zhou) docker: use openvswitch 2.10.4-0 as base (86e8bc1, Yousong Zhou) add example ansible playbook for ha deployment (124d8ea, Yousong Zhou) Makefile: add mod target (a4ced7e, Yousong Zhou) remove python2 dependency (0d0b7b4, Yousong Zhou) build binaries parallelly (6239ea3, Yousong Zhou)  Hostconfig (3)  add GetOverlayMTU() (1d2f96a, Yousong Zhou) add option ovn_mapped_bridge (3e4fa32, Yousong Zhou) import auth info (02f5657, Yousong Zhou)  OWNERS (1)  add wanyaoqi (89aacb7, Yousong Zhou)  Others (1)  go.mod: vendoring onecloud v0.0.0-20200603092502-73bcfb4bb731 (a6dfd5b, Yousong Zhou)  Ovn (1)  use yunion.io/x/onecloud/pkg/vpcagent/ovn/mac (8c2d6cd, Yousong Zhou)  Utils (2)  add Empty (f3e1069, Yousong Zhou) guest: reset VpcNICs on LoadDesc (44598a7, Yousong Zhou)  Vendor (3)  use tip of onecloud release 3.2 (3cef7d3, Yousong Zhou) update yunion.io/x/onecloud (dd77171, Yousong Zhou) go mod vendor (6af0f56, Yousong Zhou)  ","excerpt":"发布时间 2020-08-02 19:03:34\n cloudpods 仓库地址: …","ref":"/zh/docs/changelog/release-3.3/3-3-0/","title":"v3.3.0"},{"body":"","excerpt":"","ref":"/en/docs/changelog/release-3.8/","title":"release/3.8"},{"body":"","excerpt":"","ref":"/zh/docs/changelog/release-3.8/","title":"release/3.8"},{"body":"","excerpt":"","ref":"/en/docs/changelog/release-3.7/","title":"release/3.7"},{"body":"","excerpt":"","ref":"/zh/docs/changelog/release-3.7/","title":"release/3.7"},{"body":"","excerpt":"","ref":"/en/docs/changelog/release-3.6/","title":"release/3.6"},{"body":"","excerpt":"","ref":"/zh/docs/changelog/release-3.6/","title":"release/3.6"},{"body":"","excerpt":"","ref":"/en/docs/changelog/release-3.4/","title":"release/3.4"},{"body":"","excerpt":"","ref":"/zh/docs/changelog/release-3.4/","title":"release/3.4"},{"body":"","excerpt":"","ref":"/en/docs/changelog/release-3.3/","title":"release/3.3"},{"body":"","excerpt":"","ref":"/zh/docs/changelog/release-3.3/","title":"release/3.3"},{"body":"You may start using cloudpods in a single-node Linux box with a few simple steps. Further, you may setup a fully high-avaiable multi-node setup of Cloudpods to deliver both performance and stability.\n","excerpt":"You may start using cloudpods in a single-node Linux box with a few …","ref":"/en/docs/quickstart/","title":"Quick Start"},{"body":"功能描述  部分公有云有消费限制,例如阿里云余额低于100则不能进行资源创建操作 为了尽可能的保证资源创建成功，系统默认会根据云账号余额信息, 自动设置云账号健康状态 云账号健康异常不会影响资源的同步，仅会限制资源创建操作，请尽快充值或关闭健康检查功能  特殊情况  由于部分企业可能与公有云签订协议，或者使用代金券，即使账号异常也依然可以创建资源，此项功能则极大限制了云平台的使用 用户可以根据需求自行开启关闭此功能  功能开关 # 此功能开关影响所有云账号 # 关闭云账号健康检查 $ climc service-config --config cloudaccount_health_status_check=false region2 # 开启云账号健康检查 $ climc service-config --config cloudaccount_health_status_check=true region2  注意 功能的开关不会立刻影响云账号状态，可以等待几分钟后云账号状态会更新 或者到云账号列表选定云账号，点击连接状态，云账号健康状态会随即更新  ","excerpt":"功能描述  部分公有云有消费限制,例如阿里云余额低于100则不能进行资源创建操作 为了尽可能的保证资源创建成功，系统默认会根据云账号余额信 …","ref":"/zh/docs/multicloud/cloudaccounts/faq/health_check/","title":"健康检查"},{"body":"前提条件  仅RDS实例状态为 运行中(running) 时才可进行此操作  控制台   ","excerpt":"前提条件  仅RDS实例状态为 运行中(running) 时才可进行此操作  控制台   ","ref":"/zh/docs/multicloud/db/rds/tutorial/account/create/","title":"创建"},{"body":"前提条件  仅RDS实例状态为 运行中(running) 时才可进行此操作  控制台 命令行  $ climc dbinstance-backup-create f39bc936-32dd-4151-8ca0-09834318b482 test-backup +--------------------+--------------------------------------+ | Field | Value | +--------------------+--------------------------------------+ | account | qx-aliyun | | account_id | f88fb1c0-73d4-4c56-8315-20f7dfba3447 | | backup_mode | manual | | backup_size_mb | 0 | | brand | Aliyun | | can_delete | true | | can_update | true | | cloud_env | public | | cloudregion | Aliyun 华北2（北京） | | cloudregion_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | created_at | 2021-06-24T06:30:34.000000Z | | dbinstance | test-aliyun | | dbinstance_id | f39bc936-32dd-4151-8ca0-09834318b482 | | deleted | false | | domain_id | default | | engine | MySQL | | engine_version | 5.5 | | environment | InternationalCloud | | freezed | false | | id | 64ab29a4-7099-43ce-8f98-2a3780b77a65 | | imported_at | 2021-06-24T06:30:34.000000Z | | is_emulated | false | | is_system | false | | manager | qx-aliyun | | manager_domain | Default | | manager_domain_id | default | | manager_id | 5af29c01-3f83-4a52-875c-1336e559b0f5 | | manager_project | qx-aliyun | | manager_project_id | dccd3be610c342e9812e64258ca12769 | | name | test-backup | | pending_deleted | false | | project | system | | project_domain | Default | | project_src | local | | provider | Aliyun | | region | Aliyun 华北2（北京） | | region_ext_id | cn-beijing | | region_external_id | Aliyun/cn-beijing | | region_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | source | local | | status | creating | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 1 | | updated_at | 2021-06-24T06:30:34.000000Z | +--------------------+--------------------------------------+  ","excerpt":"前提条件  仅RDS实例状态为 运行中(running) 时才可进行此操作  控制台 命令行  $ climc …","ref":"/zh/docs/multicloud/db/rds/tutorial/backup/create/","title":"创建"},{"body":"前提条件  仅RDS实例状态为 运行中(running) 时才可进行此操作  控制台 命令行  $ climc dbinstance-database-create database2 f39bc936-32dd-4151-8ca0-09834318b482 --character-set utf8 +--------------------+--------------------------------------+ | Field | Value | +--------------------+--------------------------------------+ | account | qx-aliyun | | account_id | f88fb1c0-73d4-4c56-8315-20f7dfba3447 | | brand | Aliyun | | can_delete | true | | can_update | true | | character_set | utf8 | | cloud_env | public | | cloudregion | Aliyun 华北2（北京） | | cloudregion_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | created_at | 2021-06-24T06:47:06.000000Z | | dbinstance | test-aliyun | | dbinstance_id | f39bc936-32dd-4151-8ca0-09834318b482 | | deleted | false | | environment | InternationalCloud | | id | 667e37a0-eacf-420b-82e2-5bb21a418d6c | | imported_at | 2021-06-24T06:47:06.000000Z | | is_emulated | false | | manager | qx-aliyun | | manager_domain | Default | | manager_domain_id | default | | manager_id | 5af29c01-3f83-4a52-875c-1336e559b0f5 | | manager_project | qx-aliyun | | manager_project_id | dccd3be610c342e9812e64258ca12769 | | name | database2 | | project | system | | project_domain | Default | | project_id | a9a365125abf43c580ba98e5640b5c51 | | provider | Aliyun | | region | Aliyun 华北2（北京） | | region_ext_id | cn-beijing | | region_external_id | Aliyun/cn-beijing | | region_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | source | local | | status | creating | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 1 | | updated_at | 2021-06-24T06:47:06.000000Z | | vpc | vpc-h | | vpc_ext_id | vpc-2zewan71fq5dxmy1ozq0k | | vpc_id | c3652c98-ebc6-4c71-85a0-5eccc8583104 | +--------------------+--------------------------------------+  ","excerpt":"前提条件  仅RDS实例状态为 运行中(running) 时才可进行此操作  控制台 命令行  $ climc …","ref":"/zh/docs/multicloud/db/rds/tutorial/database/create/","title":"创建"},{"body":" 注意  由于套餐取自于企业版,并且因为更新时效问题, 可能部分套餐当前不可用. 若创建失败,请更换套餐再次尝试 若出现平台区域不可选, 请检查云账号状态及是否启用，以及云账号底下是否有可用IP子网   前提条件  导入云账号 创建IP子网  控制台 命令行  $ climc dbinstance-create --network b30816cf-da98-4206-8a77-bb0d7b2701c7 --engine MariaDB --engine-version 10.3 --category high_availability --storage-type cloud_ssd --secgroup default --disk-size-gb 20 --instance-type mariadb.n2.small.2c Test-aliyun +--------------------+--------------------------------------+ | Field | Value | +--------------------+--------------------------------------+ | account | aliyun | | account_id | 78bb3e6a-fbd9-4b42-8b77-519b9879ff40 | | auto_renew | false | | billing_type | postpaid | | brand | Aliyun | | can_delete | false | | can_update | true | | category | high_availability | | cloud_env | public | | cloudregion | Aliyun 华北2（北京） | | cloudregion_id | 9b0fdc39-701b-44fc-8842-664fe89359f1 | | created_at | 2021-06-23T07:18:48.000000Z | | deleted | false | | disable_delete | true | | disk_size_gb | 20 | | domain_id | default | | engine | MariaDB | | engine_version | 10.3 | | environment | InternationalCloud | | freezed | false | | id | 7d34cf83-f624-434d-872e-fb8088210827 | | imported_at | 2021-06-23T07:18:48.000000Z | | instance_type | mariadb.n2.small.2c | | iops | 0 | | is_emulated | false | | is_system | false | | manager | aliyun | | manager_domain | Default | | manager_domain_id | default | | manager_id | 310dd2c0-578c-4d2b-8f1d-5c73a7b11f4d | | manager_project | system | | manager_project_id | a7f2e2a81a1e4850a41eae5f140ceb14 | | name | Test-aliyun | | pending_deleted | false | | port | 0 | | project | system | | project_domain | Default | | project_src | local | | provider | Aliyun | | region | Aliyun 华北2（北京） | | region_ext_id | cn-beijing | | region_external_id | Aliyun/cn-beijing | | region_id | 9b0fdc39-701b-44fc-8842-664fe89359f1 | | secgroups | [{\"id\":\"default\",\"name\":\"Default\"}] | | source | local | | status | deploying | | storage_type | cloud_ssd | | tenant | system | | tenant_id | a7f2e2a81a1e4850a41eae5f140ceb14 | | update_version | 1 | | updated_at | 2021-06-23T07:18:48.000000Z | | vcpu_count | 1 | | vmem_size_mb | 2048 | | vpc | vpc-2ze8wn9ogwg2znaabvt1c | | vpc_ext_id | vpc-2ze8wn9ogwg2znaabvt1c | | vpc_id | c658c6d2-402a-4a96-88be-eee5d2217494 | +--------------------+--------------------------------------+  ","excerpt":" 注意  由于套餐取自于企业版,并且因为更新时效问题, 可能部分套餐当前不可用. 若创建失败,请更换套餐再次尝试 若出现平台区域不可选, 请 …","ref":"/zh/docs/multicloud/db/rds/tutorial/dbinstance/create/","title":"创建"},{"body":"手动更改安装了操作系统的裸金属服务器的RAID配置 Cloudpods裸金属管理可以实现在安装操作系统的过程中，自动化地配置RAID配置，支持MegaRaid，HPSmart Array等RAID卡。但是安装完操作系统后，在不重装系统的情况下，无法重新自动配置RAID，例如，给RAID增加磁盘或者更改RAID级别等。这时候就必须通过手动方式进行。本文介绍如何手动更改安装了操作系统的裸金属服务器的RAID配置。\n 将该裸金属服务器重启进入维护模式  climc host-maintenance \u003chost_id\u003e 该命令将重启物理机，并启动进入网络PXE引导的内存操作系统\n等引导启动进入内存操作系统后，ssh登入该系统  climc host-ssh \u003chost_id\u003e 更改RAID配置  RAID的工具软件位于内存操作系统的/opt目录下，包含MegaRaid, HPSA, SAS, Marvel等RAID的控制工具软件\n更改RAID配置完成后，重启恢复已安装的操作系统  climc host-unmaintenance \u003chost_id\u003e ","excerpt":"手动更改安装了操作系统的裸金属服务器的RAID配置 Cloudpods裸金属管理可以实现在安装操作系统的过程中，自动化地配置RAID配置，支 …","ref":"/zh/docs/onpremise/baremetal/faq/manual_change_raid/","title":"如何手动更改安装了操作系统的裸金属服务器RAID配置"},{"body":"术语解释   Baremetal: 指尚未安装操作系统的服务器， 也叫作物理机\n  PXE (Preboot eXecution Environment): 使用网络接口启动计算机的机制。这种机制不依赖本地数据存储设备（如硬盘）或本地已安装的操作系统，使用 DHCP 协议查找引导服务器并获取 IP，再通过 TFTP 协议下载初始引导程序和附加文件启动\n  DHCP (Dynamic Host Configuration Protocol): 动态主机设置协议是一个局域网的网络协议，使用UDP协议工作，为机器分配 IP\n  TFTP (Trivial File Transfer Protocol): 小型文件传输协议，使用UDP协议传输文件\n  DHCP Relay: 在不同子网和物理网段之间处理和转发dhcp信息的功能\n  IPMI (Intelligent Platform Management Interface)：管理服务器硬件的标准，特性是独立于操作系统外自行运行，即使在缺少操作系统或系统管理软件、或受监控的系统关机但有接电源的情况下仍能远程管理系统，也能在操作系统引导后运行\n  BMC (Baseboard management controller): 基板管理控制器，支持行业标准的 IPMI 规范\n  SSH (Secure Shell): 用于远程登录控制服务器\n  RAID (Redundant Array of Independent Disks): 磁盘阵列，把多个硬盘组合成为一个逻辑扇区，操作系统只会把它当作一个硬盘\n  Region Service: 云平台控制服务，提供 baremetal 相关 API\n  Baremetal Agent: 云平台管理 baremetal 的服务\n  Glance Service: 云平台镜像服务，提供物理机装机的 Image 镜像\n  裸金属服务器: baremetal 物理机安装操作系统后，在云平台创建的 server 的记录\n  宿主机: 可以运行云平台虚拟机的节点\n  ","excerpt":"术语解释   Baremetal: 指尚未安装操作系统的服务器， 也叫作物理机\n  PXE (Preboot eXecution …","ref":"/zh/docs/onpremise/baremetal/principle/","title":"原理介绍"},{"body":"功能介绍 云平台支持 Baremetal(物理机) 管理，提供的功能如下:\n  自动化上架: 物理机上架加电启动后，自动注册到云管平台，自动分配BMC IP地址，初始化IPMI账号密码，自动上报物理机硬件配置（CPU、内存、序列号、网卡、磁盘等）\n  自动化装机: 根据配置要求自动配置 RAID，自动分区格式化磁盘，自动部署操作系统镜像，自动初始化操作系统账号密码，自动分配IP地址，可以植入配置文件\n  生命周期管理: 支持物理机自动化开机，关机，重装系统，远程带外管理，卸载操作系统等操作\n  与虚拟机共享镜像: 使用虚拟机镜像部署物理机，便于虚拟机和物理机统一操作系统运行环境\n  API 支持: 以上操作均支持API操作，便于与其他系统的自动化流程集成\n  服务器型号支持: 支持Dell、HP、华为、浪潮、联想、超微等主流x86服务器厂商和机型\n  RAID 控制器支持: LSI MegaRaid, HP Smart Array, LSI MPT2SAS, LSI MPT3SAS, Mrarvell RAID等\n  转换为宿主机: 直接将物理机转换为运行虚拟机的宿主机\n  托管已有服务器： 托管已有并装好系统的物理机\n  服务架构 物理机管理服务架构如下:\n  Baremetal \u003c-\u003e DHCP Relay： 处理 PXE 网络启动\n  DHCP Relay \u003c-\u003e Baremetal Agent:\n 转发 PXE Boot 请求，获取网络启动相关的信息 通过 DHCP 和 TFTP 服务下发 PXE 配置  云平台定制的网络启动小系统(yunionos) kernel 和 initramfs: 运行 SSH 服务，制作 RAID，收集硬件信息等      Baremetal Agent \u003c-\u003e Region Server:\n 通过 Region Server 注册物理机记录 获取网络 IP 地址    Baremetal Agent \u003c-\u003e Baremetal:\n Baremetal 通知 Agent SSH 相关的登录信息 Agent 通过 SSH 配置 Baremetal 的 IPMI Agent 通过 IPMI 控制 Baremetal 开关机等操作 Agent 通过 SSH 执行做 RAID，装机，销毁等操作    Glance Server -\u003e Baremetal: Baremetal 从 Glance server 下载装机镜像\n  在交换机上开启 DHCP Relay 功能(或者使用 DHCP Relay软件)，relay 指向 Baremetal Agent\n 物理机上架通电后，设置 PXE 网络启动，DHCP Relay 会将 PXE Boot 请求转发到 Baremetal Agent，Baremetal Agent 收到 PXE Boot 请求，向 Region Server 注册物理机记录    技术细节 注册物理机 注册物理机有自动注册和手动注册两种方式，如果 Baremetal Agent 开启了自动注册功能，就会自动在云平台创建 baremetal 记录；如果为手动注册方式，就需要先调用物理机创建接口把对应的 PXE 网卡对应的 MAC 地址注册到平台。\n注册的流程如下:\n 物理机 PXE 启动时会发送 DHCP PXE boot 的请求，通过 DHCP Relay 请求会到 Baremetal Agent; Baremetal Agent 从 DHCP 请求中取出网卡 MAC 地址，拿 MAC 地址向 Region Server 过滤物理机记录; Region Server 告诉 Baremetal Agent 改 MAC 地址没有物理机，Baremetal Agent 就会新建记录，并从 Region Server 获取分配对应网段的 IP 地址, 通过内置 DHCP 服务回包给物理机; 物理机 PXE DHCP 请求获得分配的 IP 地址后，会通过 TFTP 从 Baremetal Agent 下载启动引导文件(kernel 和 initramfs)，然后使用 ramdisk 机制进入我们定制的 initramfs 小系统; initramfs 小系统启动后，会启动 sshd 服务，然后修改 root 用户密码，将这些登录信息通知回 Baremetal Agent; Baremetal Agent 收到通知后，记录 ssh 登录的信息，开始进行准备工作; 准备工作包括配置 IPMI，收集硬件信息等，当这些操作完成后，将所有信息上报给 Region Server 完成注册  yunionos 网络启动小系统 yunionos(https://github.com/yunionio/yunionos) 是我们使用 Buildroot 工具定制的用于 PXE 启动和管理物理机的小型 Linux 系统，作用如下:\n 运行 sshd 服务，提供 Baremetal Agent 远程执行命令 包含 LSI MegaRaid, HP Smart Array, LSI MPT2SAS, LSI MPT3SAS, Mrarvell RAID等驱动和工具，用于制作 RAID 包含 ipmitool 和相关 driver，用于配置和调用 IPMI BMC 管理物理机 包含 qemu-img, sgdisk, parted 等磁盘分区工具，用于创建操作系统  SSH 管理 当物理机通过 PXE 进入 yunionos 小系统后会启动 sshd 服务，并将 ssh login 信息通知给 Baremetal Agent，Baremetal Agent 会更新 ssh 相关的登录信息\nRAID 配置 RAID 配置由 Baremetal Agent 根据用户的配置，生成 raid 配置命令，通过 ssh 远程控制 yunionos 在物理机上制作 RAID\n安装操作系统 RAID 做完后，Baremetal Agent 会通过 ssh 远程控制 yunionos 安装操作系统和分区，流程如下:\n 调用 /lib/mos/rootcreate.sh 将系统创建到磁盘:   通过 wget 从 Glance Server 下载用户指定的 image 镜像 通过 qemu-img convert 命名将 image 写入到磁盘  创建好系统后，会根据用户的配置将系统盘 resize 分区 创建其它分区并格式化 Baremetal Agent 进行一些网络，磁盘配置的设置：比如 bonding，ip 设置, /etc/fstab, 改变 hostname 等  开关机 注册好的的物理机会配置好 IPMI, IPMI 相关的信息会记录在数据库，Baremetal Agent 通过 ipmitool 控制开关机\n重装操作系统 类似于安装操作系统，流程上会让安装了操作系统的物理机重新进入 yunionos 小系统，然后重新安装操作系统\n远程访问 Baremetal Agent 通过 ipmitool sol 接口提供串口控制界面\n删除操作系统 对正在运行操作系统的物理机重启进入 PXE 网络启动，进入 yunionos 小系统，调用 /lib/mos/partdestory.sh 销毁磁盘分区和相应的 raid 命令销毁 raid 配置\n","excerpt":"功能介绍 云平台支持 Baremetal(物理机) 管理，提供的功能如下:\n  自动化上架: 物理机上架加电启动后，自动注册到云管平台，自动 …","ref":"/zh/docs/onpremise/baremetal/principle/principle/","title":"物理机服务"},{"body":"WebWeb界面操作   在虚拟机列表页面，单击列表上方 “新建” 按钮，进入新建本地IDC虚拟机页面。\n  配置以下参数：\n 指定项目：管理员和域管理员在新建虚拟机时需要指定虚拟机所属的项目。 区域：选择区域和可用区。 名称：设置虚拟机的名称。  当设置虚拟机数量大于1时，除第一台虚拟机名称外，其他虚拟机名称都以名称-1~N表示。 虚拟机和裸金属共用名称空间。名称在系统中唯一。在项目中创建虚拟机报名称重复错误的原因为其他项目中已存在该名称的虚拟机或裸金属。 名称支持有序后缀占位符#，一个#占一个位置，如名称设置为host##，虚拟机数量为2，创建的虚拟机名称为host00和host01。后续创建虚拟机名称仍设置为host##，名称将沿用之前的排序，编号依次往后。 名称支持表达式，表达式格式为：${变量}，如${host}，则虚拟机名称显示为创建虚拟机的宿主机的名称。详细说明请参考主机名表达式举例说明。   到期释放：设置新建虚拟机到期释放前的使用时长，超过设置的时间后虚拟机将会被删除放入回收站。默认不设置到期释放，用户可根据需要设置“1小时”、“6小时”、“1天”、“3天”、“1周”、“1月”或自定义使用时长。 数量：设置创建虚拟机的数量。 平台（本地IDC）：选择虚拟机所属的平台为Cloudpods CPU架构：目前支持x86和ARM架构。仅 Cloudpods 平台支持ARM架构，其他平台默认只支持x86架构。 是否配置GPU：是否为虚拟机配置GPU卡，启用该项后，还需要选择具体GPU卡。 CPU核数、内存：设置虚拟机的规格。并可以根据虚拟机规格等选择可用套餐。 套餐：虚拟机套餐为虚拟机CPU、内存规格的组合搭配，不同套餐价格不同。其中本地IDC和私有云套餐可通过云管平台进行维护，用户创建私有云平台的虚拟机时可以选择本地IDC的套餐或私有云平台的套餐。公有云套餐信息同步对应公有云平台上信息。 注意 目前已通过套餐中的CPU架构过滤操作系统镜像。   操作系统：选择虚拟机的镜像，支持从以下方式获取镜像。镜像下拉列表中包括镜像名称、大小、CPU架构、分区方式、引导方式，并支持选中的镜像引导方式自动选择下面的引导方式。  公共镜像：对应系统镜像列表中的公共镜像，一般为系统常用镜像，由管理员维护。 自定义镜像：对应系统镜像列表中的自定义镜像，一般是由用户上传。 从ISO启动：对应系统镜像列表中的ISO格式的镜像。选择ISO镜像文件时，需要用户为虚拟机安装操作系统。仅Cloudpods和VMware平台支持。 主机镜像：对应主机镜像列表中的主机镜像，仅Cloudpods平台支持。 主机快照：对应主机快照列表中的主机快照，仅Cloudpods和VMware平台支持。 说明 通过挂载ISO安装Windows操作系统的虚拟机，安装完成后，还需要安装Virtio驱动，驱动可在镜像市场-ISO中获取。     系统盘：根据选择的套餐情况显示并设置不同的磁盘类型以及磁盘的容量大小。公有云平台不支持设置调度标签 注意  当操作系统选择”从ISO启动“时，虚拟机上的磁盘类型都显示为数据盘。磁盘类型显示不影响虚拟机的正常使用。 设置系统盘时，系统将会自动检查所选磁盘类型对应的存储容量是否满足需求。  当对应存储剩余容量小于100GB时，将会黄框提醒用户。此时仍可以成功创建磁盘，但是建议用户创建完成后去存储-块存储页面增加新存储或调整存储容量。 当对应存储剩余容量不能满足设置的系统盘大小时，将显示红框，并提示用户去存储-块存储页面增加新存储或调整存储容量。      当不设置调度标签及调度偏好以及指定块存储时，系统将按照调度策略以及调度标签的默认偏好自动为虚拟机选择最优的存储。  优先检查系统中的调度策略，当有符合的调度策略，将根据调度策略中设置的调度标签及调度标签偏好选择对应存储。调度策略中的调度标签偏好会覆盖调度标签中的默认策略。 当没有符合的调度策略后，将根据存储设备中绑定的调度标签的默认策略选择最优存储。   当设置调度标签和调度标签偏好时，设置的调度标签偏好将覆盖调度标签上的默认策略。根据调度偏好以及调度标签选择提供系统盘的存储。  尽量使用（prefer）：调度时优先使用拥有这种标签的存储。 避免使用（avoid）：调度时尽量避免拥有这种标签的存储。 禁止使用（exclude）：调度时排除拥有这种标签的存储。 必须使用（require）：调度时必须使用拥有这种标签的存储。   举例说明：以本地存储为例，本地存储A绑定调度标签A，调度标签A默认策略为尽量使用。本地存储B绑定调度标签B，调度标签B默认策略为禁止使用。调度策略A为当在项目A中创建虚拟机时，选择调度标签B，调度策略偏好为必须使用。  当不设置调度标签时，有以下两种情况。  若虚拟机属于项目A，系统将优先选择本地存储B为虚拟机系统盘提供存储。 当虚拟机不属于项目A，系统将优先选本地存储A为虚拟机系统盘提供存储。   当设置调度标签为A，策略为禁止使用时，系统将会排除本地存储A，选择本地存储B为虚拟机系统盘提供存储。   指定块存储：用户在管理后台视图下支持为磁盘指定块存储，并支持查看存储的使用情况等，目前仅VMware平台支持。   数据盘：可选项，可根据需求添加多块数据盘，设置磁盘的类型及容量大小。磁盘可选类型同系统盘。仅第一块数据盘支持选择磁盘类型，后续添加的数据盘类型同第一块数据盘。 注意 添加的数据盘仅挂载到虚拟机上，不会自动执行分区操作，需要用户远程连接虚拟机后手动分区。   仅Cloudpods平台支持支持设置挂载点、快照建磁盘、设置调度标签。私有云如使用本地存储，也支持设置调度标签功能。  设置调度标签：同系统盘。 设置挂载点：设置数据盘的文件类型（ext4、xfs、swap）、数据盘挂载的非系统目录。设置挂载点和快照建磁盘两者只能设置一个。 快照建磁盘：根据快照创建数据盘。可在本地IDC中查看已存在的快照。设置挂载点和快照建磁盘两者只能设置一个。     管理员账号：显示虚拟机的管理员账号 管理员密码：设置管理员密码，在Linux系统中为root用户的密码，在Windows操作系统中为administrator用户的密码。  随机生成：随机生成管理员密码，用户可在虚拟机列表密码列查看复制管理员密码 关联密钥：在关联密钥之前需要先新建密钥。关联密钥后，用户需要使用私钥远程登录虚拟机。 保留镜像设置：管理员密码为镜像中已有的管理员密码。 手工输入：可手动设置管理员密码。 说明  当选择从ISO启动时，不支持设置管理员密码，管理员密码需要在用户安装操作系统时进行设置。 根据虚拟机所在平台不同，设置管理员密码的方式可能为以上方式的其中几种，请以界面为准。      网络：设置虚拟机的IP地址。 注意  仅Cloudpods虚拟机可以选择default经典网络和VPC网络。 只有Cloudpods平台虚拟机支持最多添加8个网络，其他平台仅支持一个网络。    自动调度：当选择自动调度时，将从启用自动调度的IP子网中为虚拟机分配IP地址。 指定IP子网：选择VPC和IP子网，如需指定静态IP，可单击 “手动配置IP” 按钮，设置IP地址，单击 “确定” 按钮。 指定调度标签：设置调度标签以及调度标签偏好。设置的调度标签偏好将会覆盖调度标签上的默认策略。根据调度标签及调度偏好选择最优的IP子网。  尽量使用（prefer）：调度时优先使用拥有这种标签的IP子网。 避免使用（avoid）：调度时尽量避免拥有这种标签的IP子网。 禁止使用（exclude）：调度时排除拥有这种标签的IP子网。 必须使用（require）：调度时必须使用拥有这种标签的IP子网。     举例说明：如IP子网A绑定调度标签A，默认策略为禁止使用。IP子网B绑定调度标签B，默认策略为尽量使用。调度策略A为当虚拟机属于项目A，选择调度标签A，调度标签偏好为必须使用。  当创建虚拟机时网络选择默认时，有以下两种情况。  当虚拟机属于项目A时，系统将选择IP子网A为虚拟机分配IP地址。 当虚拟机不属于项目A时，系统将选择IP子网B为虚拟机分配IP地址。   当创建虚拟机时网络选择指定IP子网A，系统将选择IP子网A为虚拟机分配IP地址。 当创建虚拟机时网络选择调度标签A，且标签偏好为必须使用，则系统会从IP子网A中为虚拟机分配一个未使用的IP地址。   标签：支持为新建的虚拟机绑定标签。支持选择已有标签和新建标签。  新建标签：单击列表上方 新建 按钮，设置标签键和标签值，单击 “添加” 按钮，新建标签并绑定到资源上。 选择已有标签：单击 “已有标签” 按钮，选择标签键和值。    高级配置：默认隐藏，可根据需求进行配置。\n 弹性公网IP：弹性公网IP是一种NAT IP，通过与虚拟机绑定，实现虚拟机与公网之间的通信。默认为暂不绑定，当选择“新建”时，需要配置以下参数：  线路类型：可根据需求创建对应线路类型的EIP。 网络计费方式：设置弹性公网IP的计费方式，包括按流量计费和按带宽计费。  按流量计费：按实际传输流量收费，可限制峰值带宽避免意外流量带来的费用，当瞬间带宽超过该值时将丢包，适用于网络波动大的场合。 按带宽计费：按传输速率计费，选择固定带宽，超过带宽时将丢包，适用于网络波动较小的场景。   带宽：设置带宽大小。 注意  本地IDC平台创建VPC网络的虚拟机时支持绑定弹性公网IP，且仅支持按带宽计费；      安全组：为虚拟机设置安全组规则，安全组是一种虚拟的包过滤防火墙，通过设置安全组规则来控制关联的虚拟机是否可以被访问，以及虚拟机可访问的外部资源等。一个虚拟机最多支持绑定5个安全组。 调度策略：通过调度策略可以选择虚拟机所属的宿主机或云账号。  默认：系统将根据调度策略以及调度标签为虚拟机选择最优的宿主机。  优先检查系统中的调度策略，如有符合的调度策略，将根据调度策略中的调度标签及调度标签偏好选择最优的宿主机。调度策略中的调度标签偏好会覆盖调度标签中的默认策略。 当没有符合的调度策略，系统将根据宿主机绑定的调度标签的默认策略来选择最优的宿主机。   指定宿主机：虚拟机将在指定的宿主机上创建。 指定调度标签：设置调度标签以及调度标签的偏好。设置的调度标签偏好将会覆盖调度标签的默认策略。根据调度标签及调度标签偏好选择对应的宿主机。  尽量使用（prefer）：调度时优先使用拥有这种标签的宿主机。 避免使用（avoid）：调度时尽量避免拥有这种标签的宿主机。 禁止使用（exclude）：调度时排除拥有这种标签的宿主机。 必须使用（require）：调度时必须使用拥有这种标签的宿主机。   举例说明：如宿主机A绑定调度标签A，调度标签A的策略为禁止使用。宿主机B绑定调度标签B，调度标签B的策略为尽量使用。调度策略A为当在项目A中创建虚拟机时，选择调度标签A，调度策略偏好为必须使用。  当创建虚拟机时调度策略选择默认时，有以下两种情况。  当虚拟机属于项目A时，系统将选择在宿主机A上创建虚拟机。 当虚拟机不属于项目A时，系统将选择宿主机B上创建虚拟机。   当选择调度标签A，且设置调度标签偏好为必须使用时，系统将选择在宿主机A上创建虚拟机。     引导方式：包括BIOS和UEFI模式，仅Cloudpods平台支持，且ARM架构仅支持UEFI模式。 高可用：仅Cloudpods平台支持且要求虚拟机所在域或共享给虚拟机所在域使用的宿主机不低于2台，通过为虚拟机创建备份机来实现高可用，虚拟机与备份机之间定时同步数据，当虚拟机故障时，业务将切换到备份机上正常使用。可以快速恢复业务，减少因为虚拟机故障造成的业务宕机时间。当启用高可用功能时，需要指定备份机的宿主机。 反亲和组：选择是否勾选反亲和组，若勾选，则需要选择反亲和组，新创建的虚拟机需要根据反亲和组内的调度规则选择宿主机等，若不满足调度规则，则可能创建失败，仅Cloudpods平台支持。    设置完成后，用户可单击 新建 按钮，创建虚拟机。\n  若启用了工单，则需要填入申请原因，单击 “提交工单” 按钮，提交创建虚拟机的工单，等待审批通过后才会开始创建虚拟机。\n  Climc命令行操作 climc server-create 命令提供创建云主机的操作。 Cloudpods 可以同时管理多个私有云和公有云，不同供应商有各自的认证方式，在创建云主机之前需要做一些不同的准备工作。\n创建机器命令为 server-create，可以使用 climc help server-create 查看创建 server 的所有参数，常用的参数如下：\n   参数名称 类型 作用     –ncpu int 虚拟机 cpu 个数   –disk []string 指定创建的系统盘镜像，指定多次表示虚拟机创建多块磁盘   –net []string 指定虚拟机使用的网络，指定多次将在虚拟机里面添加多个网卡   –allow-delete bool 允许删除虚拟机   –auto-start bool 创建完自动启动   –password string 设置虚拟机密码   –tenant string 创建到指定的项目   –prefer-region string 创建到指定的 region   –prefer-zone string 创建到指定的 zone   –prefer-host string 创建到指定的 host    注意  名称、内存或者套餐类型在创建主机时必须使用; 系统盘的镜像通过 image-list 或者 cached-image-list，公有云的镜像列表通过 cached-image-list 接口查询，参考: 查询镜像;   下面以举例的方式创建机器：\n待创建规格:\n   名称 平台 套餐 内存 cpu 系统盘 网络 其他     vm1 kvm - 4g 4 centos7.qcow2 60g net1 2块数据盘， 一块100g ext4 挂载到 /opt，另外一块 50g xfs 挂载到 /data; 自动启动   vm2 esxi - 2g 2 ubuntu18.04.qcow2 100g net2 允许删除   vm3 opnstack t2.nano - - centos6.qcow2 net3 -    # 创建 kvm vm1 $ climc server-create --hypervisor kvm --disk centos7.qcow2:60g --disk 100g:ext4:/opt --disk 50g:xfs:/data --ncpu 4 --net net1 --auto-start vm1 4g 主机名表达式举例说明 主机（包括虚拟机和裸金属）名称支持表达式，表达式格式为：${变量名}，变量名需要小写。如${host}，则虚拟机名称显示为创建虚拟机的宿主机的名称；${region}-${zone}，则显示为区域名-可用区名称等。\n支持的变量名如下：\n   变量名 举例 说明     brand aliyun 品牌   charge_type postpaid 计费方式   cloud_env onpremise/public/private 用于区分本地IDC、私有云和公有云平台   cloudregion_id default 区域id   cpu 1 CPU数量   host gobuild 主机名   host_id 16f49f8a-88cc-4715-8870-f78130196fa9 主机id   ip_addr 192.168.1.1 IP地址   mem 1024 内存   os_distribution 操作系统 CentOS   os_type Linux 操作系统类型   os_version 6.9 操作系统版本   owner_tenant system 项目   owner_tenant_id d56f5c37e36a42b782d7f32b19497c4c 项目id   provider OpenStack 提供方   region Default 区域   region_id kvm 虚拟化方式   res_name server 资源类别   template_id 5199f56b-01c2-425c-8e29-0179d283e4a3 模板id   zone zone1 可用区   zone_id 00f3f3c6-1d16-4053-81f1-4cb092f418f5 可用区id    ","excerpt":"WebWeb界面操作   在虚拟机列表页面，单击列表上方 “新建” 按钮，进入新建本地IDC虚拟机页面。\n  配置以下参数：\n 指定项目：管 …","ref":"/zh/docs/onpremise/vminstance/tutorial/create/","title":"新建虚拟机"},{"body":"获取镜像 上传镜像之前需要先获取镜像，途径有多种，比如从发行版官网下载用于云平台的镜像，或者自己制作。\n发行版镜像 根据自己对发行版的需要下载发行版镜像，常用的 Linux 发行版会提供云平台虚拟机使用的镜像，地址如下:\n centos: http://cloud.centos.org/centos/7/images/ ubuntu: https://cloud-images.ubuntu.com/  制作镜像 参考: 制作镜像\n上传镜像 下载或者制作完镜像后，可以通过Web界面操作和Climc命令行的形式将镜像上传到平台的 glance 服务。\nWeb界面操作  在系统镜像页面，单击 “上传” 按钮，进入上传镜像页面。 设置以下参数：  指定项目：选择系统镜像的所属项目。 镜像名称：设置镜像的名称，建议名称与镜像的发行版本相关。 发行版、版本号：镜像的发行版本。 CPU架构：支持x86和ARM架构。 系统位数：支持32bit和64bit。请根据实际情况选择CPU架构和系统位数。 上传方式：支持上传镜像文件和输入镜像URL两种方式。虚拟机镜像列表支持上传后缀为QCOW2、VMDK、RAW、VHD格式的镜像。ISO镜像列表仅支持上传ISO后缀的镜像。  上传镜像文件：表示选择当前浏览器可访问的镜像直接上传。 输入镜像URL：通过URL路径来添加镜像。目前仅支持以http、https开头的url链接。格式为 http://path/file 或 https://path/file。      Climc命令 使用 climc image-upload 上传到云平台的 glance 服务，下面以下载 CentOS 提供的 CentOS-7-x86_64-GenericCloud-1711 举例:\n# 下载 CentOS-7-x86_64-GenericCloud-1711.qcow2  $ wget http://cloud.centos.org/centos/7/images/CentOS-7-x86_64-GenericCloud-1711.qcow2 # 上传镜像到云平台并名为 CentOS-7-x86_64-GenericCloud-1711.qcow2 $ climc image-upload --format qcow2 --os-type Linux --os-arch x86_64 --standard CentOS-7-x86_64-GenericCloud-1711.qcow2 ./CentOS-7-x86_64-GenericCloud-1711.qcow2 上传时间长短取决于网络环境和镜像大小，上传完成后需要查询镜像的状态，当状态变为 ‘active’ 时，就可以拿来使用了。( 更多的关于镜像的查询参考: 镜像查询 )\n$ climc image-show CentOS-7-x86_64-GenericCloud-1711.qcow2 | grep status | status | active | 使用 climc help image-upload 获取各个参数解释。\n","excerpt":"获取镜像 上传镜像之前需要先获取镜像，途径有多种，比如从发行版官网下载用于云平台的镜像，或者自己制作。\n发行版镜像 根据自己对发行版的需要下 …","ref":"/zh/docs/onpremise/image/tutorial/upload/","title":"上传镜像"},{"body":"入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/主机/虚拟机” 菜单项，进入虚拟机页面。\n","excerpt":"入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/主机/虚拟机” 菜单项，进入虚拟机页面。\n","ref":"/zh/docs/onpremise/vminstance/","title":"虚拟机"},{"body":"调度标签 调度标签用于与资源进行绑定，从而实现资源的调度。调度标签支持绑定到宿主机、网络、块存储等基础资源。管理员可根据资源使用场景及用途为为其创建并静态绑定标签或创建动态调度。\n调度标签的默认策略，包括尽量使用、避免使用、禁止使用、无，请注意必须使用不可以设置为调度标签的默认策略。当创建虚拟机时如果没有匹配到任何调度策略，也没有指定任意调度标签的偏好，则默认策略生效。\n 尽量使用（prefer）：绑定这类调度标签的资源的默认策略为尽量使用。即尽量使用绑定这类调度标签的资源，如果不带这类标签，也可以使用。 避免使用（avoid）：绑定这类调度标签的资源的默认策略为避免使用。即尽量避免使用绑定这类调度标签的资源，如果带这种标签，也可以使用。 禁止使用（exclude）：绑定这类调度标签的资源的默认策略为禁止使用。即禁止使用绑定这类调度标签的资源。 无：绑定这类调度标签的资源的默认策略为无。  动态调度标签 动态调度标签即调度标签与资源绑定的一种方式，根据设定的条件在资源调度前动态为宿主机绑定调度标签，每次调度宿主机绑定的标签不一定相同，从而实现资源的灵活调度。\n调度策略 设置在满足指定条件时，将会根据偏好选择或排除在绑定某一类调度标签的宿主机创建虚拟机。调度策略中的偏好将会覆盖调度标签中的默认偏好。调度策略将会影响最后的调度结果。\n调度策略中偏好分为以下四种：\n 尽量使用（prefer）：调度时优先使用拥有这种调度标签的宿主机。如没有带这种调度标签的宿主机、也可以接受。 避免使用（avoid）：调度时尽量避免拥有这种调度标签的宿主机，如果有带这种调度标签的宿主机、也可以接受。 禁止使用（exclude）：调度时必须排除拥有这种调度标签的宿主机。 必须使用（require）：调度时必须使用拥有这种调度标签的宿主机。  举例说明 以宿主机为例介绍，介绍调度标签以及调度策略如何实现资源调度功能。\n调度策略的应用 如有一批宿主机只给特定的项目A使用，其他项目不能用这些宿主机。可通过以下操作实现调度功能。\n 创建一个 owner_by_project 的调度标签，默认策略为 禁止使用，将这个标签绑定到对应的宿主机。 创建调度策略，偏好为尽量使用调度标签 owner_by_project ，条件则选择具体的项目A。 后续用户在项目A中创建虚拟机时，调度策略保持默认，则系统将会根据调度策略选择带owner_by_project 调度标签的宿主机创建虚拟机。在其它项目中创建虚拟机时则不会选择带owner_by_project 调度标签的宿主机。  动态调度标签的应用 当宿主机空闲的 cpu 个数小于 10 或者 memory 小于 2g 时，尽量避免调度虚拟机到这些宿主机。\n 创建调度标签low_cpu_mem，默认策略为 避免使用。 创建动态调度标签 host_low_cpu_mem，添加匹配条件为 ‘host.free_cpu_count \u003c 10 || host.free_mem_size \u003c 2048’，对应 low_cpu_mem 调度标签。目前界面暂不支持设置CPU内存的条件，可通过Climc命令进行设置。  # 创建调度标签 $ climc schedtag-create low_cpu_mem --strategy avoid # 创建动态调度标签机制 $ climc dynamic-schedtag-create --enable host_low_cpu_mem low_cpu_mem 'host.free_cpu_count \u003c 10 || host.free_mem_size \u003c 2048' ","excerpt":"调度标签 调度标签用于与资源进行绑定，从而实现资源的调度。调度标签支持绑定到宿主机、网络、块存储等基础资源。管理员可根据资源使用场景及用途为 …","ref":"/zh/docs/onpremise/scheduler/principle/","title":"原理介绍"},{"body":"本章节介绍Cloudpods API的调用方法。\n详细的API内容请参考API。\n请求方法 不同类型的API使用不同的请求方法，如下所示\n   API类型 请求方法     查询资源 GET   更新资源 PUT   创建资源 POST   删除资源 DELETE    公共请求头    头域 是否必须 说明     X-Auth-Token 必须 使用keystone v3认证机制   Content-Type 必须 应该总是application/json    公共响应头    头域 说明     Content-Type 总是application/json; charset=UTF-8   X-Request-Id 对应请求的requestId    API调用方法 API调用分为两个步骤：\n  调用Keystone的认证接口，获得token（如果已经获得token，并且在token有效期内，则可以跳过该步骤）\n  调用接口，此时需要第1步获得的服务访问地址以及token，将token作为请求header的X-Auth-Token参数中保存。\n  keystone认证 认证信息    方法 API 说明     POST /v3/auth/tokens 获取认证信息    请求示例 \u003e POST /v3/auth/tokens HTTP/1.1 \u003e Host: 192.168.0.246:5000 \u003e Content-Type: application/json { \"auth\": { \"context\": { \"ip\": \"string\", \"source\": \"string\" }, \"identity\": { \"access_key_secret\": \"string\", \"cas_ticket\": { \"id\": \"string\" }, \"methods\": [ \"string\" ], \"password\": { \"user\": { \"Domain\": { \"id\": \"string\", \"name\": \"string\" }, \"id\": \"string\", \"name\": \"string\", \"password\": \"string\" } }, \"token\": { \"id\": \"string\" } }, \"scope\": { \"domain\": { \"id\": \"string\", \"name\": \"string\" }, \"project\": { \"domain\": { \"id\": \"string\", \"name\": \"string\" }, \"id\": \"string\", \"name\": \"string\" } } } } 返回示例 \u003c HTTP/1.1 201 Created \u003c Date: Thu, 12 Jul 2018 10:04:10 GMT \u003c Server: Apache/2.4.6 (CentOS) PHP/5.6.24 mod_wsgi/3.4 Python/2.7.5 \u003c X-Subject-Token: gAAAAABbRyeaDF-FJj_roQXFXA2KLILvQbAxUcQ4TjT65UGL9C2v3jfDqfhWix9UURZ0TkIN0q_8GF5EjNxTTIEdh2k5vtqgCImYKtf_WKA03C8vlb1tl6gNukyxmH7yNiFZQFvXLHTo8ZPyL1vvI9m_bnW5NxTpCI9JVyTDe3BG_BG9gW8Lrsg \u003c Vary: X-Auth-Token \u003c x-openstack-request-id: req-3ed7d320-956e-4ee7-a424-d3d3b12a4bf7 \u003c Content-Length: 3514 \u003c Content-Type: application/json \u003c * Connection #0 to host 10.168.222.209 left intact { \"token\": { \"access_key\": { \"AccessKey\": \"string\", \"expire\": 0, \"secret\": \"string\" }, \"catalog\": [ { \"endpoints\": [ { \"id\": \"75f4e36100184a5a8a3e36cb0f12aa87\", \"interface\": \"string\", \"name\": \"string\", \"region\": \"string\", \"region_id\": \"string\", \"url\": \"string\" } ], \"id\": \"string\", \"name\": \"string\", \"type\": \"string\" } ], \"context\": { \"ip\": \"string\", \"source\": \"string\" }, \"expires_at\": \"2020-07-21T07:32:39Z\", \"is_domain\": true, \"issued_at\": \"2020-07-21T07:32:39Z\", \"methods\": [ \"string\" ], \"policies\": { \"Domain\": [ \"string\" ], \"Project\": [ \"string\" ], \"System\": [ \"string\" ] }, \"project\": { \"Domain\": { \"id\": \"string\", \"name\": \"string\" }, \"Id\": \"string\", \"Name\": \"string\" }, \"projects\": [ { \"Domain\": { \"id\": \"string\", \"name\": \"string\" }, \"Id\": \"string\", \"Name\": \"string\" } ], \"role_assignments\": [ { \"group\": { \"domain\": { \"id\": \"string\", \"name\": \"string\" }, \"id\": \"string\", \"name\": \"string\" }, \"policies\": { \"domain\": [ \"string\" ], \"project\": [ \"string\" ], \"system\": [ \"string\" ] }, \"role\": { \"domain\": { \"id\": \"string\", \"name\": \"string\" }, \"id\": \"string\", \"name\": \"string\" }, \"scope\": { \"domain\": { \"id\": \"string\", \"name\": \"string\" }, \"project\": { \"domain\": { \"id\": \"string\", \"name\": \"string\" }, \"id\": \"string\", \"name\": \"string\" } }, \"user\": { \"domain\": { \"id\": \"string\", \"name\": \"string\" }, \"id\": \"string\", \"name\": \"string\" } } ], \"roles\": [ { \"id\": \"string\", \"name\": \"string\" } ], \"user\": { \"Displayname\": \"string\", \"Domain\": { \"id\": \"string\", \"name\": \"string\" }, \"Email\": \"string\", \"Id\": \"string\", \"Mobile\": \"string\", \"Name\": \"string\", \"PasswordExpiresAt\": \"2020-07-21T07:32:39Z\" } } } API网关 目前只应用于前端。\n举例说明 以虚拟机API为例介绍具体的使用方法\n虚拟机列表    方法 API 说明     GET /servers 获取虚拟机列表    请求示例 \u003e GET /servers?details=true\u0026with_meta=true\u0026limit=1 HTTP/1.1 \u003e Host: 192.168.222.171:8888 \u003e Content-Type: application/json \u003e X-Auth-Token: gAAAAABbQHesYGnonUgZo2vqHIb4RFAE5ptZVOpKA0DcH5dyVB_5-rBAAsjGZszFXJNr46q52iXh7K26G1tYAGh9PtDHUv9j3E7bb4dt9Q6NBXRhGodJ7L25D-yvVL0Qx3dpXqGvqcSAhEe-wBKqN8pmyMyXKvQLfhwW7LsXc0dC8SIp6uUBKiFIxXzdlh1APAmqTTjR9Bog8DKDtXbFPHhKN2o4NNaItdo4h5ZJ3qFzo7Uy19osyQg 返回示例 \u003c HTTP/1.1 200 OK \u003c X-Request-Id: 7bc5a \u003c Content-Length: 1330 \u003c Server: TornadoServer/3.2.2 \u003c Date: Sat, 07 Jul 2018 08:32:21 GMT \u003c Content-Type: application/json; charset=UTF-8 \u003c { { \"limit\": 0, \"offset\": 0, \"servers\": [ { \"account\": \"google-account\", \"account_id\": \"4d3c8979-9dd0-439b-8d78-36fe1ab1666c\", \"admin_secgrp_id\": \"string\", \"admin_security_rules\": \"string\", \"attach_time\": \"2020-07-21T07:40:04Z\", \"auto_delete_at\": \"2020-07-21T07:40:04Z\", \"auto_renew\": true, \"backup_host_id\": \"string\", \"backup_host_name\": \"string\", \"backup_host_status\": \"string\", \"billing_cycle\": \"string\", \"billing_type\": \"postpaid\", \"bios\": \"string\", \"boot_order\": \"string\", \"brand\": \"Google\", \"can_delete\": true, \"can_recycle\": true, \"can_update\": true, \"cdrom\": \"string\", \"cdrom_support\": true, \"cloud_env\": \"public\", \"cloudregion\": \"string\", \"cloudregion_id\": \"string\", \"created_at\": \"2020-07-21T07:40:04Z\", \"delete_fail_reason\": \"string\", \"deleted\": true, \"deleted_at\": \"2020-07-21T07:40:04Z\", \"description\": \"string\", \"disable_delete\": true, \"disk\": 30720, \"disk_count\": 0, \"disks\": \"string\", \"disks_info\": [ { \"aio_mode\": \"string\", \"bps\": 0, \"cache_mode\": \"string\", \"disk_format\": \"string\", \"disk_type\": \"string\", \"driver\": \"string\", \"fs\": \"string\", \"id\": \"string\", \"image\": \"string\", \"image_id\": \"string\", \"index\": 0, \"iops\": 0, \"medium_type\": \"string\", \"name\": \"string\", \"size\": 0, \"storage_type\": \"string\" } ], \"domain_id\": \"string\", \"eip\": \"string\", \"eip_mode\": \"string\", \"environment\": \"string\", \"expired_at\": \"2020-07-21T07:40:04Z\", \"external_id\": \"string\", \"flavor_id\": \"string\", \"host\": \"string\", \"host_id\": \"string\", \"host_service_status\": \"string\", \"host_sn\": \"string\", \"host_status\": \"string\", \"host_type\": \"string\", \"hypervisor\": \"kvm\", \"id\": \"string\", \"instance_type\": \"string\", \"ips\": \"10.165.2.1,172.16.8.1\", \"is_emulated\": true, \"is_gpu\": true, \"is_prepaid_recycle\": true, \"is_system\": true, \"isolated_devices\": [ { \"addr\": \"string\", \"created_at\": \"2020-07-21T07:40:04Z\", \"deleted\": true, \"deleted_at\": \"2020-07-21T07:40:04Z\", \"description\": \"string\", \"dev_type\": \"string\", \"guest_id\": \"string\", \"host_id\": \"string\", \"id\": \"string\", \"is_emulated\": true, \"model\": \"string\", \"name\": \"string\", \"reserved_cpu\": 0, \"reserved_memory\": 0, \"reserved_storage\": 0, \"update_version\": 0, \"updated_at\": \"2020-07-21T07:40:04Z\", \"vendor_device_id\": \"string\" } ], \"keypair\": \"string\", \"keypair_id\": \"string\", \"machine\": \"string\", \"manager\": \"google-account\", \"manager_domain\": \"Default\", \"manager_domain_id\": \"default\", \"manager_id\": \"string\", \"manager_project\": \"system\", \"manager_project_id\": \"4d3c8979-9dd0-439b-8d78-36fe1ab1666c\", \"metadata\": { \"property1\": \"string\", \"property2\": \"string\" }, \"name\": \"string\", \"networks\": \"string\", \"nics\": [ { \"ip_addr\": \"string\", \"ip6_addr\": \"string\", \"is_exit\": true, \"mac\": \"string\", \"network_id\": \"string\", \"team_with\": \"string\", \"vpc_id\": \"string\" } ], \"os_name\": \"string\", \"os_type\": \"string\", \"pending_deleted\": true, \"pending_deleted_at\": \"2020-07-21T07:40:04Z\", \"project\": \"string\", \"project_domain\": \"string\", \"project_id\": \"string\", \"project_src\": \"local\", \"provider\": \"Google\", \"region\": \"Default\", \"region_ext_id\": \"59e7bc87-a6b3-4c39-8f02-c68e8243d4e4\", \"region_external_id\": \"ZStack/59e7bc87-a6b3-4c39-8f02-c68e8243d4e4\", \"region_id\": \"default\", \"scaling_group_id\": \"string\", \"scaling_status\": \"string\", \"secgroup\": \"string\", \"secgroups\": [ { \"id\": \"string\", \"name\": \"string\" } ], \"secgrp_id\": \"default\", \"security_rules\": \"string\", \"shutdown_behavior\": \"stop\", \"src_ip_check\": true, \"src_mac_check\": true, \"status\": \"string\", \"tenant\": \"string\", \"tenant_id\": \"string\", \"update_fail_reason\": \"string\", \"update_version\": 0, \"updated_at\": \"2020-07-21T07:40:04Z\", \"vcpu_count\": 0, \"vdi\": \"string\", \"vga\": \"string\", \"virtual_ips\": \"string\", \"vmem_size\": 0, \"vpc\": \"string\", \"vpc_id\": \"string\", \"zone\": \"zone1\", \"zone_ext_id\": \"string\", \"zone_id\": \"string\" } ], \"total\": 0 } 虚拟机详情    方法 API 说明     GET /servers/\u003cid\u003e 获取虚拟机详情    请求示例 \u003e GET /servers/d983993b-2356-48ed-860b-550b8490c45d HTTP/1.1 \u003e Host: 192.168.222.171:8888 \u003e Content-Type: application/json \u003e X-Auth-Token: gAAAAABbQHesYGnonUgZo2vqHIb4RFAE5ptZVOpKA0DcH5dyVB_5-rBAAsjGZszFXJNr46q52iXh7K26G1tYAGh9PtDHUv9j3E7bb4dt9Q6NBXRhGodJ7L25D-yvVL0Qx3dpXqGvqcSAhEe-wBKqN8pmyMyXKvQLfhwW7LsXc0dC8SIp6uUBKiFIxXzdlh1APAmqTTjR9Bog8DKDtXbFPHhKN2o4NNaItdo4h5ZJ3qFzo7Uy19osyQg 返回示例 \u003c HTTP/1.1 200 OK \u003c X-Request-Id: 7bc5a \u003c Content-Length: 2085 \u003c Server: TornadoServer/3.2.2 \u003c Date: Sat, 07 Jul 2018 08:32:21 GMT \u003c Content-Type: application/json; charset=UTF-8 \u003c { { \"server\": { \"account\": \"google-account\", \"account_id\": \"4d3c8979-9dd0-439b-8d78-36fe1ab1666c\", \"admin_secgrp_id\": \"string\", \"admin_security_rules\": \"string\", \"attach_time\": \"2020-07-21T07:40:04Z\", \"auto_delete_at\": \"2020-07-21T07:40:04Z\", \"auto_renew\": true, \"backup_host_id\": \"string\", \"backup_host_name\": \"string\", \"backup_host_status\": \"string\", \"billing_cycle\": \"string\", \"billing_type\": \"postpaid\", \"bios\": \"string\", \"boot_order\": \"string\", \"brand\": \"Google\", \"can_delete\": true, \"can_recycle\": true, \"can_update\": true, \"cdrom\": \"string\", \"cdrom_support\": true, \"cloud_env\": \"public\", \"cloudregion\": \"string\", \"cloudregion_id\": \"string\", \"created_at\": \"2020-07-21T07:40:04Z\", \"delete_fail_reason\": \"string\", \"deleted\": true, \"deleted_at\": \"2020-07-21T07:40:04Z\", \"description\": \"string\", \"disable_delete\": true, \"disk\": 30720, \"disk_count\": 0, \"disks\": \"string\", \"disks_info\": [ { \"aio_mode\": \"string\", \"bps\": 0, \"cache_mode\": \"string\", \"disk_format\": \"string\", \"disk_type\": \"string\", \"driver\": \"string\", \"fs\": \"string\", \"id\": \"string\", \"image\": \"string\", \"image_id\": \"string\", \"index\": 0, \"iops\": 0, \"medium_type\": \"string\", \"name\": \"string\", \"size\": 0, \"storage_type\": \"string\" } ], \"domain_id\": \"string\", \"eip\": \"string\", \"eip_mode\": \"string\", \"environment\": \"string\", \"expired_at\": \"2020-07-21T07:40:04Z\", \"external_id\": \"string\", \"flavor_id\": \"string\", \"host\": \"string\", \"host_id\": \"string\", \"host_service_status\": \"string\", \"host_sn\": \"string\", \"host_status\": \"string\", \"host_type\": \"string\", \"hypervisor\": \"kvm\", \"id\": \"string\", \"instance_type\": \"string\", \"ips\": \"10.165.2.1,172.16.8.1\", \"is_emulated\": true, \"is_gpu\": true, \"is_prepaid_recycle\": true, \"is_system\": true, \"isolated_devices\": [ { \"addr\": \"string\", \"created_at\": \"2020-07-21T07:40:04Z\", \"deleted\": true, \"deleted_at\": \"2020-07-21T07:40:04Z\", \"description\": \"string\", \"dev_type\": \"string\", \"guest_id\": \"string\", \"host_id\": \"string\", \"id\": \"string\", \"is_emulated\": true, \"model\": \"string\", \"name\": \"string\", \"reserved_cpu\": 0, \"reserved_memory\": 0, \"reserved_storage\": 0, \"update_version\": 0, \"updated_at\": \"2020-07-21T07:40:04Z\", \"vendor_device_id\": \"string\" } ], \"keypair\": \"string\", \"keypair_id\": \"string\", \"machine\": \"string\", \"manager\": \"google-account\", \"manager_domain\": \"Default\", \"manager_domain_id\": \"default\", \"manager_id\": \"string\", \"manager_project\": \"system\", \"manager_project_id\": \"4d3c8979-9dd0-439b-8d78-36fe1ab1666c\", \"metadata\": { \"property1\": \"string\", \"property2\": \"string\" }, \"name\": \"string\", \"networks\": \"string\", \"nics\": [ { \"ip_addr\": \"string\", \"ip6_addr\": \"string\", \"is_exit\": true, \"mac\": \"string\", \"network_id\": \"string\", \"team_with\": \"string\", \"vpc_id\": \"string\" } ], \"os_name\": \"string\", \"os_type\": \"string\", \"pending_deleted\": true, \"pending_deleted_at\": \"2020-07-21T07:40:04Z\", \"project\": \"string\", \"project_domain\": \"string\", \"project_id\": \"string\", \"project_src\": \"local\", \"provider\": \"Google\", \"region\": \"Default\", \"region_ext_id\": \"59e7bc87-a6b3-4c39-8f02-c68e8243d4e4\", \"region_external_id\": \"ZStack/59e7bc87-a6b3-4c39-8f02-c68e8243d4e4\", \"region_id\": \"default\", \"scaling_group_id\": \"string\", \"scaling_status\": \"string\", \"secgroup\": \"string\", \"secgroups\": [ { \"id\": \"string\", \"name\": \"string\" } ], \"secgrp_id\": \"default\", \"security_rules\": \"string\", \"shutdown_behavior\": \"stop\", \"src_ip_check\": true, \"src_mac_check\": true, \"status\": \"string\", \"tenant\": \"string\", \"tenant_id\": \"string\", \"update_fail_reason\": \"string\", \"update_version\": 0, \"updated_at\": \"2020-07-21T07:40:04Z\", \"vcpu_count\": 0, \"vdi\": \"string\", \"vga\": \"string\", \"virtual_ips\": \"string\", \"vmem_size\": 0, \"vpc\": \"string\", \"vpc_id\": \"string\", \"zone\": \"zone1\", \"zone_ext_id\": \"string\", \"zone_id\": \"string\" } } ","excerpt":"本章节介绍Cloudpods API的调用方法。\n详细的API内容请参考API。\n请求方法 不同类型的API使用不同的请求方法， …","ref":"/zh/docs/apisdk/01_api/","title":"API调用方法"},{"body":"Preparation Requirements  OS: Depending on the CPU architecture, the supported distributions are different  X86_64: CentOS 7 ARM64: Debian 10(buster) or China UOS   Minimum Configuration Requirements: CPU 4 cores, Memory 8GiB, Storage 100GiB  As an example, the following is the environment of the Linux box to be deployed:\n   IP Login User OS     10.168.26.216 root CentOS 7.6    Tips  10.168.26.216 is the IP of this test environment, please modify accordingly according to your own environment.\n  Local environment The local environment is the environment where the user performs the actual operation. The local environment for this installation is executing on a MAC OS laptop. The installation can also be executed on the Linux box to be deployed.\nPrepare passwordless SSH login # Generate the local ssh keypair # (SKIP this stekp if you already have ~/.ssh/id_rsa.pub locally) $ ssh-keygen # Copy the generated ~/.ssh/id_rsa.pub public key to the machine to be deployed $ ssh-copy-id -i ~/.ssh/id_rsa.pub root@10.168.26.216 # Try to login to the machine to be deployed without password, # should be able to get the hostname of the deployed machine # without entering the login password $ ssh root@10.168.26.216 \"hostname\" Install ansible and git We first install ansible and git. The commends depends on the OS of the box.\nCentOS 7 Debian 10 Others # Install ansible locally $ yum install -y epel-release ansible  # Install ansible locally $ apt install -y ansible  # Install ansible locally $ pip install ansible  Install Cloudpods The installation tool is https://github.com/yunionio/ocboot, then according to the configuration of the machine to be deployed, use ansbile playbook to install and configure the Cloudpods. The following commands are performed on the local environment and steps are as follows:\n# Git clone the ocboot installation tool locally $ git clone -b release/3.7 https://github.com/yunionio/ocboot \u0026\u0026 cd ./ocboot Quick installation Simplely execute run.py with the IP address of the Linux box to start the AllInOne installation.\n./run.py 10.168.26.216 This command will automatically generate a configuration yaml config-allinone-current.yaml in the working directory. You may check the default values of the installation parameters in this YAML.\nCustomized installation You may also use a customized installation YAML to start the installation. An example configuration file is shown as following.\n# Write config-allinone.yml configuration file $ cat \u003c\u003cEOF \u003e./config-allinone.yml # mariadb_node indicates the node where the mariadb service needs to be deployed mariadb_node: # IP of the machine to be deployed hostname: 10.168.26.216 # SSH Login username of the machine to be deployed user: root # Username of mariadb db_user: root # Password of mariadb db_password: your-sql-password # primary_master_node indicates the machine running Kubernetes and OneCloud Platform primary_master_node: hostname: 10.168.26.216 user: root # Database connection address db_host: 10.168.26.216 # Database connection username db_user: root # Database connection password db_password: your-sql-password # IP of Kubernetes controlplane controlplane_host: 10.168.26.216 # Port of Kubernetes controlplane controlplane_port: \"6443\" # Cloudpods version onecloud_version: 'v3.7.2' # Cloudpods login username onecloud_user: admin # Cloudpods login user's password onecloud_user_password: admin@123 # This machine serves as a Cloudpods private cloud computing node as_host: true EOF Once the config-allinone.yml deployment configuration file is filled in, you can execute the ocboot file . /run.py . /config-allinone.yml to deploy the cluster.\n# Start deployment $ ./run.py ./config-allinone.yml .... # The following output will be displayed when the deployment is completed, # indicating successful operation # Open with your browser at https://10.168.26.216 # Login with admin/admin@123 user password to access the Web UI Initialized successfully! Web page: https://10.168.26.216 User: admin Password: admin@123 Done Then use your browser to visit https://10.168.26.216, enter admin for username and admin@123 for password and you will see the Web UI.\nStart using Cloudpods Create the first virtual machine The first virtual machine is created in three steps as follows.\n1. Import Images Browse to CentOS 7 cloud hosting image, select a GenericCloud image, and copy the image URL.\nIn the Compute menu, select Images then select Upload menu. Enter the image name, select Enter the image URL, paste the above CentOS 7 image URL and select OK.\nAdditional virtual machine images can be obtained by visiting https://docs.openstack.org/image-guide/obtain-images.html.\n2. Create networks (VPC and IP subnets)  Create VPC  In the Network menu, select the VPC submenu and choose Create. Enter a name, e.g. vpc0, and select the target segment, e.g. 192.168.0.0/16. Click Create.\n Create IP Subnetes  After the VPC is created, select the IP Subnets submenu and choose Create. Enter a name, for example vnet0, select VPC as the VPC you just created vpc0, select the available zone. Enter subnet segment, e.g. 192.168.100.0/24. Click Create.\n3. Create Virtual Machine In the Compute menu, select Servers and choose Create. In this UI, enter the hostname, select the mirror and IP subnet, and create the virtual machine.\nImport public cloud or other private cloud platform resources Cloudpods itself is a complete suite of private cloud, and can also unify and manage resources from other cloud platforms.\nIn the Multicloud menu, select Accounts and create a new one, fill in the authentication information of the corresponding cloud platform according to your needs, and after configuring the cloud account, the Cloudpods service will synchronize the resources of the corresponding cloud platform, and you can view them in the Web UI after the synchronization is completed.\nFAQ 1. Can’t find the virtual machine menu in Web UI? Machine deployed using the All in One way is treated as Cloudpods private cloud computing node by default, which has the ability to create and manage virtual machines.\nIf there is no virtual machine creation button it should be that the private cloud computing node is not enabled.\nPlease go to the Web UI, click Compute/Physical Resources/Hosts to view the list of hosts, enable the corresponding hosts, refresh the interface and the virtual machine creation button will appear.\nAttention If you want to use Cloudpods private cloud, you need ensure the computing machine use the kernel compiled by us. You can use the following command to check whether the host uses the kernel including the yn keyword.\n# Check if yn keyword kernel is used $ uname -a | grep yn Linux office-controller 3.10.0-1160.6.1.el7.yn20201125.x86_64 # If the kernel is not the version with the yn keyword, # it may be the first time you install it using ocboot, # and you can reboot into the yn kernel $ reboot   2. Change the hostname of the node, some services fail to start CLoudpods uses Kubernetes management node, depends on hostname, please change it back.\n3. How to reinstall   SSH login the remote machine, execute the command ocadm reset -f.\n  Rerun ocboot run.py script.\n  Waiting for the run to finish，use command kubectl edit deployment onecloud-operator -n onecloud. Add the following parameters, then save to close.\n  The modification in step 3 will affect the performance of onecloud-operator, so you can restore the parameters in step 3 when all services are started.  4. Other questions？ Other questions are welcome to submit Cloudpods github issues: https://github.com/yunionio/onecloud/issues , we will reply as soon as possible.\n","excerpt":"Preparation Requirements  OS: Depending on the CPU architecture, the …","ref":"/en/docs/quickstart/allinone/","title":"All in One Installation"},{"body":"前提 注意 本章内容是通过部署工具快速搭建 Cloudpods 服务，如果想了解部署的细节或者部署高可用环境请参考: 安装部署 。  环境准备 机器配置要求  操作系统: 根据 CPU 架构不同，支持的发行版也不一样  X86_64: CentOS 7 ARM64: Debian 10(buster) 或者 统信 UOS   最低配置要求: CPU 4核, 内存 8GiB, 存储 100GiB  以下为待部署机器的环境:\n   IP 登录用户     10.168.26.216 root    提示  10.168.26.216 是本次测试环境的 IP，请根据自己的环境做相应修改。\n  本地环境配置要求 本地环境即用户进行实际操作部署的环境。本次测试的本地环境为 MAC 操作系统的笔记本，也可在待部署机器上进行操作。\n ssh: 开启 ssh 免密登录 本地环境安装部署 ansbile（Windows操作系统不支持安装 ansible）  配置 ssh 免密登录 # 生成本机的 ssh 秘钥 (如果本地已有 ~/.ssh/id_rsa.pub 则跳过此步骤) $ ssh-keygen # 将生成的 ~/.ssh/id_rsa.pub 公钥拷贝到待部署机器 $ ssh-copy-id -i ~/.ssh/id_rsa.pub root@10.168.26.216 # 尝试免密登录待部署机器，应该不需要输入登录密码即可拿到部署机器的 hostname $ ssh root@10.168.26.216 \"hostname\" 安装ansible和git 首先需要安装ansible和git\nCentOS 7 Debian 10 其它操作系统 # 本地安装 ansible 和 git $ yum install -y epel-release ansible git  # 本地安装 ansible 和 git $ apt install -y ansible git  # 本地安装 ansible $ pip install ansible  安装Cloudpods 部署的工具是 https://github.com/yunionio/ocboot , 然后根据需要部署机器的配置， 利用 ansbile 远程登录到待部署的机器安装配置 Cloudpods 服务，以下操作都在本地环境上进行操作。操作步骤如下:\n# 下载 ocboot 工具到本地 $ git clone -b release/3.7 https://github.com/yunionio/ocboot \u0026\u0026 cd ./ocboot 快速部署 可以直接执行run.py来快速部署一个AllInOne的Cloudpods实例，其中\u003chost_ip\u003e为部署所在主机的主IP地址。\n$ ./run.py \u003chost_ip\u003e 这种方式其实是自动在当前目录生成一个名为config-allinone-current.yaml的配置文件，基于该配置文件的参数来执行部署。\n自定义配置部署 也可以我们手工编辑一个配置文件，基于该配置文件，采用run.py来实现部署。\n# 编写 config-allinone.yml 文件 $ cat \u003c\u003cEOF \u003e./config-allinone.yml # mariadb_node 表示需要部署 mariadb 服务的节点 mariadb_node: # 待部署节点 ip hostname: 10.168.26.216 # 待部署节点登录用户 user: root # mariadb 的用户 db_user: root # mariadb 用户密码 db_password: your-sql-password # primary_master_node 表示运行 k8s 和 Cloudpods 服务的节点 primary_master_node: hostname: 10.168.26.216 user: root # 数据库连接地址 db_host: 10.168.26.216 # 数据库用户 db_user: root # 数据库密码 db_password: your-sql-password # k8s 控制节点的 ip controlplane_host: 10.168.26.216 # k8s 控制节点的端口 controlplane_port: \"6443\" # Cloudpods 版本 onecloud_version: 'v3.7.7' # Cloudpods 登录用户 onecloud_user: admin # Cloudpods 登录用户密码 onecloud_user_password: admin@123 # 该节点作为 Cloudpods 私有云计算节点 as_host: true # 启用 minio 作为后端对象存储 enable_minio: true EOF 当填写完 config-allinone.yml 部署配置文件后，便可以执行 ocboot 里面的 ./run.py ./config-allinone.yml 部署集群了。\n# 开始部署 $ ./run.py ./config-allinone.yml 部署完成 .... # 部署完成后会有如下输出，表示运行成功 # 浏览器打开 https://10.168.26.216 # 使用 admin/admin@123 用户密码登录就能访问前端界面 Initialized successfully! Web page: https://10.168.26.216 User: admin Password: admin@123 然后用浏览器访问 https://10.168.26.216 ，用户名输入 admin，密码输入 admin@123 就会进入 Cloudpods 的界面。\n开始使用Cloudpods 创建第一台虚拟机 通过如下三步创建出第一台虚拟机：\n1. 导入镜像 浏览位于 CentOS 7云主机镜像 ，选择一个GenericCloud 镜像，拷贝镜像URL。\n在 主机 菜单，选择 系统镜像，选择 上传。输入镜像名称，选择 输入镜像URL，粘贴上述CentOS 7镜像URL，选择 确定。\n可以访问 https://docs.openstack.org/image-guide/obtain-images.html 获得更多的虚拟机镜像。\n2. 创建网络（VPC和IP子网） [新建VPC] 在 网络 菜单，选择 VPC 子菜单，选择 新建。输入名称，例如 vpc0，选择目标网段，例如 192.168.0.0/16。点击 新建。\n[新建IP子网] VPC创建完成后，选择 IP子网 子菜单，选择 新建。输入名称，例如 vnet0，选择VPC为刚才创建的VPC vpc0，选择可用区，输入 子网网段，例如 192.168.100.0/24。点击 新建。\n3. 创建虚拟机 在 主机 菜单，选择 虚拟机，选择 新建。在此界面输入主机名，选择镜像和IP子网，创建虚拟机。\n导入公有云或者其它私有云平台资源 Cloudpods自身是一个完整的私有云，同时也可以统一纳管其他云平台的资源。\n在 多云管理 菜单，选择 云账号 并新建，根据自己的需求填写对应云平台的认证信息，配置完云账号后 Cloudpods 服务就会同步相应云平台的资源，同步完成后即可在前端查看。\nFAQ 1. 在 All in One 中找不到虚拟机界面？ All in One 部署的节点会部署 Cloudpods host 计算服务，作为宿主机，具有创建和管理私有云虚拟机的能力。没有虚拟机界面应该是 Cloudpods 环境中没有启用宿主机。\n请到 管理后台 界面，点击 主机/基础资源/宿主机 查看宿主机列表，启用相应的宿主机，刷新界面就会出现虚拟机界面。\n注意 如果要使用 Cloudpods 私有云虚拟机，需要宿主机使用 Cloudpods 编译的内核，可使用以下命令查看宿主机是否使用 Cloudpods 内核(包含 yn 关键字)。\n# 查看是否使用 yn 内核 $ uname -a | grep yn Linux office-controller 3.10.0-1160.6.1.el7.yn20201125.x86_64 # 如果内核不是带有 yn 关键字的版本，可能是第一次使用 ocboot 安装，重启即可进入 yn 内核 $ reboot   2. 修改节点的 hostname ，有些服务启动失败 k8s 管理节点，依赖于 hostname，请改回去。\n3. 如何重装   重新运行 ocboot 的脚本\n  等待运行完毕，使用kubectl edit deployment onecloud-operator -n onecloud加入下列参数，然后保存关闭。\n  第2步的修改，会影响 onecloud-operator 的性能，所以等所有服务启动，可以将第2步的参数恢复。  4. 其它问题？ 其它问题欢迎在 Cloudpods github issues 界面提交: https://github.com/yunionio/cloudpods/issues , 我们会尽快回复。\n","excerpt":"前提 注意 本章内容是通过部署工具快速搭建 Cloudpods 服务，如果想了解部署的细节或者部署高可用环境请参考: 安装部署 。  环境准 …","ref":"/zh/docs/quickstart/allinone/","title":"All in One 安装"},{"body":"云平台的命令行管理工具是 climc, 可以通过该工具向后端各个服务发送API请求, 实现对资源的操控。\n通过快速开始的All in One安装或安装部署章节搭建开源版Cloudpods环境时，控制节点都会安装climc，可直接跳过安装climc章节直接查看使用climc章节。\n下面介绍如何在非控制节点上安装climc。\n安装 可以通过 yum 或者源码编译的方式安装climc。\nRPM 安装 添加 yunion 的 yum 源，如果已经添加可以忽略这一步。\n$ cat \u003c\u003cEOF \u003e/etc/yum.repos.d/yunion.repo [yunion] name=Packages for Yunion Multi-Cloud Platform baseurl=https://iso.yunion.cn/yumrepo-3.7 sslverify=0 failovermethod=priority enabled=1 gpgcheck=0 EOF 安装 climc\n$ sudo yum install -y yunion-climc $ ls -alh /opt/yunion/bin/climc -rwxr-xr-x 1 root root 24M Jul 18 19:04 /opt/yunion/bin/climc 源码编译安装 首先需要搭建 go 的开发环境，然后 clone 代码，参考: 开发贡献\n# 编译 climc $ cd $GOPATH/src/yunion.io/x/onecloud $ make cmd/climc # 等待编译完成后，climc 在 _output/bin 目录下 $ ls -alh _output/bin/climc -rwxr-xr-x 1 lzx lzx 25M Jul 15 17:10 _output/bin/climc 可以根据自己的需要，将编译好的 climc 放到对应的目录，或者直接写 alias 对应到 $GOPATH/src/yunion.io/x/onecloud/_output/bin/climc 。\n使用 安装好 climc 后，可以将对应的可执行目录加入到 PATH 环境变量，下面假设 climc 所在的目录是 /opt/yunion/bin 。\n# 根据自己的需要加到 bash 或者 zsh 配置文件里面 $ echo 'export PATH=$PATH:/opt/yunion/bin' \u003e\u003e ~/.bashrc \u0026\u0026 source ~/.bashrc $ climc --help 认证配置 climc 请求云平台后端服务的流程如下:\n 通过配置信息，使用用户名密码从 keystone 获取 token token 中包含了后端服务的 endpoint 地址 climc 将对应资源的 CURD 请求发往所属的后端服务  所以在操作资源前，我们需要通过环境变量告诉 climc 想要操作的云平台和认证信息。\n目前climc支持两种认证方式：\n 通过用户名／密码认证 通过Access Key／Secret认证（从2.11开始支持）  控制节点认证配置 在控制节点上可直接通过以下命令认证配置。\n# 获取环境变量 $ ocadm cluster rcadmin export OS_AUTH_URL=https://192.168.0.246:5000/v3 export OS_USERNAME=sysadmin export OS_PASSWORD=3hV3***84srk export OS_PROJECT_NAME=system export YUNION_INSECURE=true export OS_REGION_NAME=region0 export OS_ENDPOINT_TYPE=publicURL # 认证环境变量 $ source \u003c(ocadm cluster rcadmin) 注意: 如果执行 climc 时出现 Error: Missing OS_AUTH_URL 的错误提示时，请重新执行 source \u003c(ocadm cluster rcadmin) 命令。\n非控制节点认证配置 在非控制节点做认证配置上首先需要在对应的控制节点上执行ocadm cluster rcadmin； 将输出的认证信息保存到本地的文件中，通过source命令认证配置。\n以下为用户名／密码认证的配置文件模板，通过OS_USERNAME, OS_DOMAIN_NAME, OS_PASSWORD, OS_PROJECT_NAME, OS_PROJECT_DOMAIN等字段指定用户的信息和项目的信息。\n# 在控制节点上获取认证所需要的配置信息。 $ ocadm cluster rcadmin export OS_AUTH_URL=https://192.168.0.246:5000/v3 export OS_USERNAME=sysadmin export OS_PASSWORD=3hV3***84srk export OS_PROJECT_NAME=system export YUNION_INSECURE=true export OS_REGION_NAME=region0 export OS_ENDPOINT_TYPE=publicURL # 将上述认证信息保存到文件中，方便 source 使用 $ cat \u003c\u003cEOF \u003e ~/test_rc_admin # keystone 认证地址 export OS_AUTH_URL=https://192.168.0.246:5000/v3 # 用户名 export OS_USERNAME=sysadmin # 用户密码 export OS_PASSWORD=3hV3***84srk # 用户所属项目名称 export OS_PROJECT_NAME=system # 允许 insecure https 连接 export YUNION_INSECURE=true # 对应的 region export OS_REGION_NAME=region0 # endpoint 类型为 public export OS_ENDPOINT_TYPE=publicURL EOF 以下为Access Key/Secret认证的配置文件模板，通过OS_ACCESS_KEY, OS_SECRET_KEY等两个字段指定用户的Access Key/secret。\n# 在控制节点上获取用户在一个项目中的Access Key/Secret # 生成 Secret Key $ climc credential-create-aksk +--------+----------------------------------------------+ | Field | Value | +--------+----------------------------------------------+ | expire | 0 | | secret | VGFxZkE3QTd2MmhCbmZkVkJDcFZFaGJYdUQ2c05mUXM= | +--------+----------------------------------------------+ # ID为 Access Key $ climc credential-list +-----------------------+------------+------------+-----------------------+---------+---------+-----------+---------+-----------------------+-------------+--------------+-----------------------+------+-----------------------+----------------------+----------+----------------------+ | blob | can_delete | can_update | created_at | deleted | domain | domain_id | enabled | id | is_emulated | name | project_id | type | update_version | updated_at | user | user_id | +-----------------------+------------+------------+-----------------------+---------+---------+-----------+---------+-----------------------+-------------+--------------+-----------------------+------+-----------------------+----------------------+----------+----------------------+ | {\"expire\":0,\"secret\": | true | true | 2020-06-15T11:43:32.0 | false | Default | default | true | 0d184a3c9c484e4c892f4 | false | --1592221412 | d53ea650bfe144da8ee8f | aksk | 0 | 2020-06-15T11:43:32. | sysadmin | a063d8e2cd584cc48194 | | \"VGFxZkE3QTd2MmhCbmZk | | | 00000Z | | | | | 855935e37e7 | | | 3fba417b904 | | | 000000Z | | 5e7169280435 | | VkJDcFZFaGJYdUQ2c05mU | | | | | | | | | | | | | | | | | | XM=\"} | | | | | | | | | | | | | | | | | +-----------------------+------------+------------+-----------------------+---------+---------+-----------+---------+-----------------------+-------------+--------------+-----------------------+------+-----------------------+----------------------+----------+----------------------+ *** Total: 1 Pages: 1 Limit: 2048 Offset: 0 Page: 1 *** # 将认证信息保存到文件中，方便 source 使用 $ cat \u003c\u003cEOF \u003e ~/test_rc_aksk # Access Key export OS_ACCESS_KEY=0d184a3c9c484e4c892f4855935e37e7 # Secret export OS_SECRET_KEY=VG***5mUXM= # 允许 insecure https 连接 export YUNION_INSECURE=true # keystone 认证地址 export OS_AUTH_URL=https://192.168.0.246:5000/v3 # 对应的 region export OS_REGION_NAME=region0 EOF 模板配置完成后，通过以下名称认证环境变量。\n# source 认证环境变量 $ source ~/test_rc_admin # 或者想要使用 Access Key/Secret 登陆 # source ~/test_rc_aksk # 执行climc。例如，查看虚拟机列表 $ climc server-list 注意: 如果执行 climc 时出现 Error: Missing OS_AUTH_URL 的错误提示时，请 source 或设置认证云平台的环境变量。\n可以通过查看 climc 的版本号来获取构建的信息。\n$ climc --version Yunion API client version: { \"major\": \"0\", \"minor\": \"0\", \"gitVersion\": \"v3.1.9-20200609.1\", \"gitBranch\": \"tags/v3.1.8^0\", \"gitCommit\": \"5591bbec4\", \"gitTreeState\": \"clean\", \"buildDate\": \"2020-06-09T12:00:48Z\", \"goVersion\": \"go1.13.9\", \"compiler\": \"gc\", \"platform\": \"linux/amd64\" } 运行模式 climc 有命令行运行和交互两种运行模式。\n 命令行运行: 执行完对应的资源操作命令就退出，这种模式你知道自己在做什么，并且可以作为 bash function/script 的一部分。  # 删除 server1, server2, server3 for id in server1 server2 server3; do climc server-update --delete enable $id climc server-delete $id done  交互模式: 在 shell 输入 climc，就会进入交互模式，这种模式下有自动补全和参数提示。   子命令语法 云平台有很多资源，对应 climc 的子命令, 比如 climc server-list 中的 server-list 就是子命令，可以查询虚拟机的列表。通用格式如下:\n\u003cResource\u003e-\u003cAction\u003e: Resource 表示资源, Action 表示行为 语法举例:\n server-delete: 删除虚拟机  server 是资源, delete 是行为   host-list: 查询宿主机列表  host 是资源, list 是行为    CRUD 举例:\n C: server-create, disk-create 创建资源 R: server-show, disk-list 查询资源 U: server-update, host-update 更新资源 D: server-delete, image-delete 删除资源  行为举例:\n- 中的 Action 会对应资源的操作，不同的资源会根据可进行的操作进行命名。\n server-migrate: migrate 表示迁移虚拟机 server-change-config: change-config 表示调整虚拟机配置 host-ipmi: ipmi 表示查询宿主机的 IPMI 信息  想要知道资源有哪些操作，可以进入交互模式补全查询。\n使用帮助 help climc 的子命令有很多参数，参数分为必填参数和可选参数，使用 climc help \u003csubcommand\u003e 这种格式，help 子命令会获取  提供的参数和各个参数的解释。\n比如我要查看 image-upload 命令的参数和解释:\n$ climc help image-upload ... Upload a local image Positional arguments: \u003cNAME\u003e Image Name \u003cFILE\u003e The local image filename to Upload Optional arguments: [--private] Make image private [--format {raw,qcow2,iso,vmdk,docker,vhd}] Image format [--protected] ... 高级过滤 filter TODO\nDebug 模式 如果想要知道 climc 操作资源时究竟和服务端发生了哪些请求，可以在子命令前面使用 –debug 参数，使用方式如下:\nclimc --debug \u003cResource\u003e-\u003cAction\u003e 加上 –debug 参数后，终端会有彩色的输出提示，比如 climc --debug server-list 输出如下:\n其中 CURL 部分是可以直接粘贴出来在命令行执行的。\n颜色约定  Request 使用黄色 CURL 使用蓝绿色 根据状态码显示不同颜色，可参考代码: https://github.com/yunionio/onecloud/blob/master/pkg/util/httputils/httputils.go#L234  在bash或zsh下的命令行参数提示补全 climc支持bash或zsh的命令行参数自动提示补全。\n下面以bash为例说明，在使用climc之前，执行如下命令初始化环境。\n# 启用bash命令行参数自动补全 source \u003c(climc --completion bash) 之后在bash中可以在输入climc命令后，通过tab获得命令行参数的提示。\n为了方便使用，推荐将该命令放到$HOME/.bashrc或$HOME/.bash_profile中自动初始化环境。\n","excerpt":"云平台的命令行管理工具是 climc, 可以通过该工具向后端各个服务发送API请求, 实现对资源的操控。\n通过快速开始的All in One …","ref":"/zh/docs/climc/usage/","title":"climc 使用介绍"},{"body":"Like the All in One Installation, the multi-node installation uses installation tool https://github.com/yunionio/ocboot to deploy the nodes according to the configuration by executing the ansible playbook.\nEnvironmental Preparation Please refer to the All in One Installation/Configuration Requirements for environment preparation and requirements for different architecture CPU and OS.\nThe following is the environment for the machines to be deployed, assuming that 5 machines have been prepared with IPs 10.127.10.156-160, and that each node makes the following role plans:\n mariadb_node: This role indicates that the mariadb database service is deployed and running on that node. This role does not have to be written in the configuration if there is a database already in your environment  node IP: 10.127.10.156   primary_master_node: This role indicates that the node is the first node to deploy and run the k8s master component, which must be present in the configuration, and that the role also runs the onecloud control services  node IP: 10.127.10.156   master_nodes: This role indicates that these nodes are running the control service, which is optional, and is primarily used along with primary_master_node to form Kubernetes' etcd 3 node high availability cluster  node IP: 10.127.10.157-158   worker_nodes: This role indicates that these nodes run private cloud computing services. This role is optional and can be unconfigured if the built-in private cloud functionality is not required  node IP: 10.127.10.159-160       IP Login User Role     10.127.10.156 root mariadb_node \u0026 primary_master_node   10.127.10.157-158 root master_nodes   10.127.10.159-160 root worker_nodes    Start Installation Download ocboot Please refer to the All in One Installation/Download ocboot.\nWrite deployment configuration # Write config-nodes.yml configuration file $ cat \u003c\u003cEOF \u003e./config-nodes.yml mariadb_node: hostname: 10.127.10.156 user: root db_user: root db_password: your-sql-password primary_master_node: onecloud_version: v3.7.1 hostname: 10.127.10.156 user: root db_host: 10.127.10.156 db_user: root db_password: your-sql-password controlplane_host: 10.127.10.156 controlplane_port: \"6443\" master_nodes: hosts: - hostname: 10.127.10.157 user: root - hostname: 10.127.10.158 user: root controlplane_host: 10.127.10.156 controlplane_port: \"6443\" worker_nodes: hosts: - hostname: 10.127.10.159 user: root - hostname: 10.127.10.160 user: root controlplane_host: 10.127.10.156 controlplane_port: \"6443\" EOF Start Deployment Once the config-nodes.yml deployment configuration file is filled in, you can execute the ocboot file . /run.py . /config-nodes.yml to deploy the cluster.\n# Start deployment $ ./run.py ./config-nodes.yml Once the deployment is complete, you can access https://10.168.26.216 (the IP of the primary_master_node) using your browser, and enter he username admin and password admin@123 to enter the Web UI.\nThen you can create private cloud virtual machines or import public cloud or other private cloud platform resources.\n","excerpt":"Like the All in One Installation, the multi-node installation uses …","ref":"/en/docs/quickstart/nodes/","title":"Multi-node Installation"},{"body":"Web界面操作 新建主机模板 配置参数等同新建虚拟机\n新建虚拟机 该功能用于基于主机模板新建虚拟机。当主机模板状态正常时才可以创建虚拟机。\n 单击主机模板右侧操作列 “新建虚拟机” 按钮，进入新建虚拟机页面。 设置名称、数量，单击 “确定” 按钮，新建虚拟机。  删除主机模板 该功能用于删除主机模板。当主机模板被服务目录使用时，不允许被删除。\n单个删除\n 在主机模板页面，单击主机模板右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在主机模板列表中勾选一个或多个主机模板，单击列表上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"Web界面操作 新建主机模板 配置参数等同新建虚拟机\n新建虚拟机 该功能用于基于主机模板新建虚拟机。当主机模板状态正常时才可以创建虚拟机。 …","ref":"/zh/docs/onpremise/scalinggroup/tutorial/vmtemplate/","title":"主机模板管理"},{"body":"区域是物理概念，代表数据中心的地理区域。\n区域来源：\n 本地IDC：在部署云管平台过程中会设置本地IDC的区域和可用区信息，部署完成后只支持添加可用区。 私有云：同步已连接私有云账号上的区域和可用区信息。  查看区域详情 该功能用于查看区域的详细信息。\n 在区域页面，单击区域名称项，进入区域详情页面。 查看以下信息。  基本信息：包括云上ID、ID、名称、状态、域、项目、可用区（数量）、专有网络（数量）、IP子网（数量）、虚拟机（数量）、创建时间、更新时间、备注信息。 其他信息：包括位置。    查看可用区信息 该功能用于查看区域下的可用区信息。\n 在区域详情页面，单击“可用区”页签，进入可用区页面。 查看可用区信息，包括名称、物理机（数值为\"M（N）\"，M分别表示区域中物理机（包括物理机和宿主机）数量，N表示宿主机数量）、受管物理机的数量以及二层网络的数量。 支持对可用区进行新建或删除操作。  查看资源统计信息 该功能用于查看区域下的资源统计信息。\n 在区域详情页面，单击“资源统计”页签，进入资源统计页面。 以环形图的形式表示区域中CPU分配率（已分配CPU/CPU总量）、内存分配率（已分配内存/内存总量）、磁盘分配率（已分配磁盘/磁盘总量）、私有IP分配率（已分配私有IP/私有IP总量）、宿主机启用与未启用数量与总数、处于不同状态（运行、关机、回收站以及其他状态）的虚拟主机数量与总数量、透传设备(GPU)使用和未使用数量与总数。  查看操作日志 该功能用于查看区域相关操作的日志信息。\n 在区域详情页面，单击“操作日志”页签，进入操作日志页面。  加载更多日志：在操作日志页面，列表默认显示20条操作日志信息，如需查看更多操作日志，请单击 “加载更多” 按钮，获取更多日志信息。 查看日志详情：单击操作日志右侧操作列 “查看” 按钮，查看日志的详情信息。支持复制详情内容。 查看指定时间段的日志：如需查看某个时间段的操作日志，在列表右上方的开始日期和结束日期中设置具体的日期，查询指定时间段的日志信息。 导出日志：目前仅支持导出本页显示的日志。单击右上角图标，在弹出的导出数据对话框中，设置导出数据列，单击 “确定” 按钮，导出日志。    ","excerpt":"区域是物理概念，代表数据中心的地理区域。\n区域来源：\n 本地IDC：在部署云管平台过程中会设置本地IDC的区域和可用区信息，部署完成后只支持 …","ref":"/zh/docs/onpremise/network/tutorial/area/region/","title":"区域"},{"body":"概念 Cloudpods网络中有几个重要概念，一个是地理范围的概念，Region与Zone，另外一组概念是网络架构的概念，也就是VPC，Wire和Network。\nRegion与Zone   Region（区域） 是一个Cloudpods部署实例覆盖的地理范围，通常是一个城市。一个Cloudpods实例只能管理一个区域。\n  Zone（可用区） 是一个区域内的一个子区域。可用区顾名思义就是可用性独立的区域，也就是拥有独立的风火水电和网络供应的区域。通常是一个IDC的一个机房。一个Cloudpods实例可以管理若干个可用区。\n  下面介绍Cloudpods网络中的三个重要概念：VPC, Wire（二层网络）和Network（IP子网）。\nVPC Cloudpods给计算资源提供两种模式的网络：经典网络和VPC网络。\n  经典网络，又叫扁平网络，也可以理解为underlay网络，是完全由硬件设备来承载网络报文的转发，没有采用网络虚拟化。所以扁平网络受限于物理网络拓扑，必须和物理网络拓扑匹配。网络报文的转发采用物理网络设备，是硬件交换。KVM虚拟机，裸金属和VMware虚拟机都能使用经典网络。\n  VPC网络，又叫虚拟网络，就是overlay网络，是基于SDN技术，在underlay网络上虚拟出的虚拟网络，网络报文采用隧道封装，可以构造任意的网络拓扑。网络报文的转发由虚拟的交换机和网络设备转发，是软件交换。目前，只有KVM虚拟机可以使用VPC网络。\n  Cloudpods的私有云平台支持经典网络。云平台的经典网络与数据中心的基础设施网络之间是同级关系，因此，使用经典网络的一个优势是虚机与基础设施其它部分的互连互通相对简便。另外，使用经典网络时，在实施前需要做好网段规划，一方面避免与已有地址段重叠，一方面留足余量用于扩容。在具体的实施阶段，可能需要在物理的交换机、路由器上为经典网络配置网关等参数。\n从3.1版本开始，Cloudpods开始支持VPC网络。VPC是Virtual Private Cloud（虚拟私有云）的缩写，也叫“虚拟专用网络”，在同一套网络基础设施上可以虚拟出多个VPC网络。VPC之间、VPC与基础设施网络之间是相互隔离的，可以有各自的地址分配空间，配置各自的网关、路由等。由于这种相互隔离的特点，VPC的使用非常敏捷，增删非常容易。如果仅是一个个隔离的网络孤岛，VPC的用途是受限的，我们可以通过部署EIP网关，让VPC可以与外界互通。\n上面提到了经典网络与其它VPC是相互隔离的，Cloudpods平台在实际处理时把经典网络也当作一个特殊的VPC看待。在系统初始化时，平台会创建一个ID为default名称为Default的VPC表示经典网络。\nDefault VPC代表的是一个区域内的经典网络（Underlay）。其他的VPC则代表一个区域内的虚拟网络。VPC和VPC之间相互隔离。VPC是区域资源。一个区域内可以有多个VPC，一个VPC可以跨多个可用区，但不能跨多个区域。\nWire和Network 在经典网络中，网络被三层网路设备分割为不同的广播域，每个广播域是一个联通的二层网络。Wire被用来描述这个概念，因此Wire被翻译为广播域或二层子网。一个Wire内可以配置多个IP子网（Network），每个IP子网可以有不同的网络地址和子网掩码，但是地址空间不能重叠。Wire内的节点之间二层互通，但是不同的节点可以被划分到不同的IP子网。属于相同网络地址和子网掩码的节点之间可以直接通信，否则需要通过三层网络设备通过IP路由来通信。经典网络中，由于不同可用区的网络是独立的，因此一个Wire不会跨可用区，只能归属于一个可用区。我们用一台宿主机或物理机和Wire的对接关系来描述一台宿主机或物理机的网络连通性约束。当一台宿主机的一个网口和一个Wire对接，则说明这台宿主机的这个网口，以及跟通过这个网络桥接的虚拟机的网口都可以分配归属于这个Wire的所有IP子网的IP地址。\n在VPC网络中，节点之间的互通并不受到任何物理约束，可以实现任意节点之间的二层通信。因此，Wire的概念在VPC网络中没有太大意义。但是，为了保持和经典网络统一的概念和模型关系，我们还是在VPC网络中，VPC和IP子网之间虚拟出一个Wire来。在每个可用区，为每个VPC创建一个Wire，用来容纳该VPC在此可用区内的IP子网。可以理解为，这个Wire更多是给VPC内的IP子网提供了可用区的约束。\n如图所示，宿主机1通过物理网口eth0和二层网络WIRE2对接，则该宿主机上分配经典网络的IP子网必须归属于WIRE2。这是物理网络拓扑施加的约束，无法逾越。同时，该宿主机上的虚拟机也可以接入VPC网络，则该宿主机可以接入其所在Region的任意VPC网阔，并且该宿主机上的虚拟机可以分配对应VPC里的任意IP子网的IP地址。\n从模型设计上，VPC与二层网络是一对多的关系。具体来说，经典网络VPC可以对应多个二层网络，例如，经典网络中可以有管理网、业务网等二层网络的划分。对于普通VPC来说，通常一个可用区对应一个二层网络，这个二层网络更多是为了保持核经典网络在模型上的统一，因此在使用VPC时通常不将二层网络考虑在内。\n二层网络与子网的关系。二层网络是子网的属性，一个二层网络中可以有多个子网。\n 1:n 1:n VPC -------\u003e Wire -------\u003e Network ","excerpt":"概念 Cloudpods网络中有几个重要概念，一个是地理范围的概念，Region与Zone，另外一组概念是网络架构的概念，也就 …","ref":"/zh/docs/onpremise/network/principle/","title":"原理介绍"},{"body":"共享存储的虚拟机磁盘存储在网络上，实现了存储和计算的分离。使用共享存储的优点是虚拟机迁移比较方便，缺点是技术复杂，在相同硬件条件下，访问共享存储的延时和带宽性能都比本地存储差。\n共享存储分为两大类\n  共享文件存储，虚拟磁盘还是以文件形式存储在磁盘上，只是存储文件的是一个网络共享的目录。平台提供了两种有代表性的为共享文件存储，一种是NFS，另外一种是GPFS。如果选择NFS，宿主机会自动地把NFS服务器的目录挂载到宿主机上。如果选择了GFPS，则宿主机不负责共享存储目录的挂载，需要管理员提前将共享目录挂载到指定目录，并且在平台配置在各个宿主机上该存储的挂载点。因此第二种方式比较灵活，只要是一个网络共享的目录挂载到宿主机上就能够使用，跟共享的协议没有关系。因此，无论是GPFS，OCFS2，GFS，还是GlusterFS，都可以采用这种方式。\n  分布式存储，虚拟磁盘是存储在一个分部是存储里的。目前只支持ceph的rbd存储。\n  ","excerpt":"共享存储的虚拟机磁盘存储在网络上，实现了存储和计算的分离。使用共享存储的优点是虚拟机迁移比较方便，缺点是技术复杂，在相同硬件条件下，访问共享 …","ref":"/zh/docs/onpremise/storage/principle/","title":"原理介绍"},{"body":"区域入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/地域/区域” 菜单项，进入区域列表。\n可用区入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/地域/可用区” 菜单项，进入可用区列表。\n","excerpt":"区域入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/地域/区域” 菜单项，进入区域列表。\n可用区入口：在云管平台单击左 …","ref":"/zh/docs/onpremise/network/tutorial/area/","title":"地域"},{"body":"多节点安装和 All in One 安装 一样，都使用 https://github.com/yunionio/ocboot 这个部署工具，根据配置执行 ansible playbook 部署节点。\n环境准备 关于环境的准备和不同架构 CPU 操作系统的要求，请参考 All in One 安装/机器配置要求。\n以下为待部署机器的环境，假设已经准备好了 5 台机器，IP 分别是 10.127.10.156-160 ，各个节点做出以下角色规划：\n mariadb_node: 这个角色表示该节点上部署并运行 mariadb 数据库服务，该角色不一定要写在配置中，如果环境中有准备好的数据库，也可以不部署  节点: 10.127.10.156   primary_master_node: 这个角色表示该节点是第一个部署并运行 k8s master 组件的节点，该角色必须存在于配置中，该角色运行 onecloud 控制服务  节点: 10.127.10.156   master_nodes: 这个角色表示这些节点运行控制服务，该角色可选，主要作用是和 primary_master_node 一起组成 Kubernetes 的 etcd 3 节点高可用  节点: 10.127.10.157-158   worker_nodes: 这个角色表示这些节点运行私有云计算服务，该角色可选，如果不需要内置的私有云功能，可以不配置  节点: 10.127.10.159-160       IP 登录用户 角色     10.127.10.156 root mariadb_node \u0026 primary_master_node   10.127.10.157-158 root master_nodes   10.127.10.159-160 root worker_nodes    开始安装 下载 ocboot 参考 All in One 安装/下载 ocboot。\n编写部署配置 # 编写 config-nodes.yml 文件 $ cat \u003c\u003cEOF \u003e./config-nodes.yml mariadb_node: hostname: 10.127.10.156 user: root db_user: root db_password: your-sql-password primary_master_node: onecloud_version: v3.7.7 hostname: 10.127.10.156 user: root db_host: 10.127.10.156 db_user: root db_password: your-sql-password controlplane_host: 10.127.10.156 controlplane_port: \"6443\" master_nodes: hosts: - hostname: 10.127.10.157 user: root - hostname: 10.127.10.158 user: root controlplane_host: 10.127.10.156 controlplane_port: \"6443\" worker_nodes: hosts: - hostname: 10.127.10.159 user: root - hostname: 10.127.10.160 user: root controlplane_host: 10.127.10.156 controlplane_port: \"6443\" EOF 开始部署 当填写完 config-nodes.yml 部署配置文件后，便可以执行 ocboot 里面的 ./run.py ./config-nodes.yml 部署集群了。\n# 开始部署 $ ./run.py ./config-nodes.yml 等待部署完成后，就可以使用浏览器访问 https://10.168.26.216 (primary_master_node 的 IP), 输入用户名 admin 和密码 admin@123，进入前端。\n然后就可以创建私有云虚拟机或者纳管公有云资源。\n","excerpt":"多节点安装和 All in One 安装 一样，都使用 https://github.com/yunionio/ocboot 这个部署工具， …","ref":"/zh/docs/quickstart/nodes/","title":"多节点安装"},{"body":"本地存储的虚拟机磁盘存储在本地目录里，跟该目录使用的文件系统无关，可以使ext4或者xfs。虚拟磁盘的文件格式采用qcow2格式。默认的存储位置是宿主机的目录 /opt/cloud/workspace/disks。\n存储虚拟磁盘的本地目录需要在宿主机的配置文件里显示声明。host服务的配置项 local_image_path 指定本宿主机用来保存虚拟机磁盘的目录。\n如何添加本地存储目录？  修改/etc/yunion/host.conf，则 local_image_path 的字符串数组中添加新的本地磁盘：  local_image_path:- /opt/cloud/workspace/disks- /new_image_path重启host服务  host服务重启后，稍等片刻，查看宿主机的存储列表，就能看到这个新的存储注册上来了。\nclimc storage-list --host \u003cHOST\u003e 如何删除本地存储？  需要确保所有的虚拟磁盘都被删除，特别需要留意被伪删除的磁盘，以及被标记为系统资源的磁盘:  # 查看所有的磁盘，包括不再执行命令用户所在项目下的所有磁盘，以及被标记为系统资源的磁盘 climc disk-list --storage --scope system --system # 查看所有的未删除的磁盘 climc disk-list --storage \u003cstorage_id\u003e --scope system --system --pending-delete 解除存储和宿主机的关联关系：  climc host-storage-detach \u003cHOST\u003e \u003cSTORAGE\u003e 删除存储  climc storage-delete \u003cSTORAGE\u003e  到宿主机，修改 /etc/yunion/host.conf，将该存储所在路径从 local_image_path 删除\n  重启host服务\n  ","excerpt":"本地存储的虚拟机磁盘存储在本地目录里，跟该目录使用的文件系统无关，可以使ext4或者xfs。虚拟磁盘的文件格式采用qcow2格式。默认的存储 …","ref":"/zh/docs/onpremise/storage/faq/add-storage/","title":"如何添加和删除本地存储"},{"body":" 说明  服务是以容器的方式运行在 Kubernetes(K8S) 集群里面的，所以开发调试需要部署一个 Kubernetes 集群 后端服务都是用 Golang 编写，所以需要在开发环境安装 Golang 为了把开发的服务发布到 Kubernetes 集群，需要在本地把相关服务构建成 docker 镜像 开发环境最好都是在 Linux 上进行，安装使用 docker 和编译源码都很方便   接下来介绍如何搭建开发环境。\n部署 cloudpods 服务 在开始开发之前，请先参考 All in One 安装 或者 MiniKube 安装 部署 cloudpods 服务。我们的服务全部使用容器的方式运行在 Kubernetes 集群里面，所以需要先搭建好我们的服务，把这个环境作为自己的开发环境。\n这里建议使用一个单独的 CentOS 7 虚拟机，配置(至少 4C8G + 100G 系统盘)，安装部署我们的服务。\n安装 Go Golang 版本要求 1.15 以上\n安装 Golang 环境请参考： Install Golang\n安装配置 Docker 因为要把服务打包成容器镜像，所以需要先安装 docker，这里的 docker 版本需要是 docker-ce 19.03 以上的版本。\n下面是不同操作系统和 Linux 发行版的安装方式，这里还是建议开发环境是 Linux 。\n安装 Docker CentOS 7  # 1. 安装必要的一些系统工具 sudo yum install -y yum-utils # 2. 添加软件源信息 sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo # 3. 更新并安装 Docker CE sudo yum -y install docker-ce  配置 Docker 后续的代码编译和打包使用了 docker buildx 的功能，需要做在让 docker daemon 开启 experimental 特性。\n# 在 docker daemon 的配置里面打开 experimental 特性 $ cat /etc/docker/daemon.json { \"experimental\": true } # 重启 docker 服务 $ systemctl restart docker # 创建 buildx context $ docker buildx create --use --name build --node build --driver-opt network=host 编译 cloudpods 组件 Fork 仓库 访问 https://github.com/yunionio/cloudpods ，将仓库 fork 到自己的 github 用户下。\nClone 源码 git clone 前确保 GOPATH 等环境变量已经设置好，clone 你自己 fork 的仓库\n$ git clone https://github.com/\u003cyour_name\u003e/cloudpods $GOPATH/src/yunion.io/x/cloudpods $ cd $GOPATH/src/yunion.io/x/cloudpods $ git remote add upstream https://github.com/yunionio/cloudpods 二进制编译 编译是直接调用 go 编译器在本地编译出二进制，对应的 Makefile 规则为 make cmd/% ，% 对应的是 cmd 目录里面的组件名称。\n# cmd 目录下面存放着所有的组件: $ ls cmd ... ansibleserver climc glance keystone qcloudcli ucloudcli awscli cloudir host lbagent region webconsole # 可以编译cmd下指定的组件，比如：编译 climc 和 region 组件 $ make cmd/climc cmd/region # 编译好的二进制会直接在 _output/bin 目录下面，查看编译好的二进制文件 $ ls _output/bin climc region # 编译所有组件 $ make Docker 镜像编译上传 通常我们的开发流程是写完代码，把相应服务打包生成 docker 镜像，然后发布到自己搭建的 Kubernetes 集群里面测试。 下面说明如何生成 docker 镜像。\n生成好的 docker 镜像需要上传的镜像仓库，这里以 Aliyun 的容器镜像服务 为例，比如我在 aliyun 创建了一个公开的命令空间，仓库地址为: registry.cn-beijing.aliyuncs.com/zexi 。\n# 在本地登录镜像仓库，这里以你自己的镜像仓库为准 # 需要先用自己的 aliyun 帐号登录下，后面容器镜像的上传就不需要密码了 $ docker login registry.cn-beijing.aliyuncs.com/zexi ...... Login Succeeded 准备好镜像仓库后，就可以开始打包上传镜像了，这些步骤是通过 Makefile 的 image 规则来执行的。\n这里有以下环境变量用来控制制作镜像的内容：\n REGISTRY: 对应镜像上传的仓库 VERSION: 用于生成镜像的 tag ARCH: 对应 docker 镜像的 arch，可设置成 ‘arm64’ 或者 ‘all’  arm64: 编译打包制作 arm64 的 docker 镜像 all: 编译打包制作 amd64 和 arm64 的镜像   DEBUG: 如果设置为 true 会显示打包步骤  根据 REGISTRY 和 VERSION 这两个环境变量，会生成各个组件的镜像地址，格式是: $(REGISTRY)/$(component):$VERSION\n# 将 region 服务编译并制作成 docker 镜像 # 然后上传到 registry.cn-beijing.aliyuncs.com/zexi/region:dev $ VERSION=dev REGISTRY=registry.cn-beijing.aliyuncs.com/zexi make image region # 编译多个组件，并上传，以下命令会上传以下的组件 # - registry.cn-beijing.aliyuncs.com/zexi/ansibleserver:dev # - registry.cn-beijing.aliyuncs.com/zexi/apigateway:dev # - registry.cn-beijing.aliyuncs.com/zexi/region:dev $ VERSION=dev REGISTRY=registry.cn-beijing.aliyuncs.com/zexi make image \\  ansibleserver apigateway region # 编译 arm64 的镜像，如果指定了 ARCH=arm64 ，则会在对应镜像的末尾加上 '-arm64' 的后缀 # - registry.cn-beijing.aliyuncs.com/yunionio/scheduler:dev-arm64 $ VERSION=dev REGISTRY=registry.cn-beijing.aliyuncs.com/zexi ARCH=arm64 make image scheduler # 编译 amd64 + arm64 的镜像，指定 ARCH=all，这里不会添加后缀，会在镜像名里面包含两个架构的版本 # - registry.cn-beijing.aliyuncs.com/yunionio/cloudid:dev $ VERSION=dev REGISTRY=registry.cn-beijing.aliyuncs.com/zexi ARCH=all make image cloudid # 同时编译多个多架构的组件，并上传 $ VERSION=dev ARCH=all REGISTRY=registry.cn-beijing.aliyuncs.com/zexi make image \\  ansibleserver apigateway baremetal-agent climc cloudevent \\  cloudnet devtool esxi-agent glance host host-deployer keystone \\  logger notify region s3gateway scheduler webconsole yunionconf \\  vpcagent monitor region-dns cloudid 开发调试 开发调试的通常步骤是，写好代码后，使用之前说的 make image 规则打包上传对应服务的 docker 镜像，然后将镜像发布到自己的 Kubernetes 集群进行测试。\n将镜像发布到 Kubernetes 集群 后端的服务都运行在 Kubernetes 的 onecloud namespace 里面，可以通过以下命令查看对应的 Kubernetes 资源。我们的服务使用以下的 Kubernetes 资源进行服务的管理。\n deployment: 管理大部分的服务，这种服务会在 Kubernetes 的任意一个 master 节点启动，比如: region, apigateway 服务等 daemonset: 管理需要在每个 Kubernetes 节点都启动的服务，比如: host 服务(私有云计算节点服务)  说明 另外需要简单了解下 Kubernetes pod 这种资源，pod 是实际运行容器的集合，是 Kubernetes 里面运行容器化服务的最小单元，一个 pod 里面可以运行多个容器，每个容器都有自己对应的镜像。\n其它 Kubernetes 资源介绍可参考官方的 工作负载介绍。\n 下面是使用 kubectl(Kubernetes 命令行工具) 查看各个服务对应资源的命令：\n# 查看 onecloud 命令空间下面的 deployment $ kubectl -n onecloud get deployment # 查看 onecloud 命令空间下面的 daemonset $ kubectl -n onecloud get daemonset # 查看 onecloud 命名空间下面的 pods $ kubectl -n onecloud get pod 对 Kubernetes 资源有了大概了解后，接下来的步骤就是把刚才打包的服务镜像发布到集群里面对应的服务，这里以 region 这个服务为例。\n# 先在本地编译打包 region 镜像 # 会在 aliyun 生成镜像: registry.cn-beijing.aliyuncs.com/zexi/region:dev-test $ VERSION=dev-test REGISTRY=registry.cn-beijing.aliyuncs.com/zexi make image region # 找到 region 服务对应的 kubernetes 资源名称 $ kubectl get deployment -n onecloud | grep region default-region 1/1 1 1 90d # 更新 default-region deployment 资源里面 image 属性 # 然后对应的 default-region 的 pod 就会自动拉取镜像重启 $ kubectl -n onecloud edit deployment default-region 使用 kubectl -n onecloud edit deployment default-region 命令后，进入编辑资源 YAML 属性的步骤，只需要将里面的 image 属性修改成 aliyun 对应镜像地址，截图如下：\n修改完后保存退出，就会拉取刚才指定的镜像创建新的 region pod，删除旧的。可以再次查看 region pod 的当前状态。\n查看服务输出日志 可以使用 kubectl log 命令查看对应 pod 的输出日志，这里以刚才发布的 region pod 为例。\n# 先找到 region 服务对应的 pod $ kubectl get pods -n onecloud | grep region default-region-6bd8c54d68-sq4gq 1/1 Running 0 101m # 查看日志 $ kubectl logs -n onecloud default-region-6bd8c54d68-sq4gq # 把日志重定向到文件 /tmp/region.log $ kubectl logs -n onecloud default-region-6bd8c54d68-sq4gq \u003e /tmp/region.log # 流式查看日志，类似于 'tail -f' $ kubectl logs -n onecloud default-region-6bd8c54d68-sq4gq -f # 查看 5 分钟前的日志 $ kubectl logs -n onecloud default-region-6bd8c54d68-sq4gq -f --since 5m 安装配置 climc climc 是访问后端的命令行工具，可以通过该工具向后端各个服务发送API请求，日常开发中会使用改命令行工具进行功能验证和调试，安装和使用方法参考下面的连接。\nclimc 的本地安装参考: 源码编译安装\nclimc 的本地配置参考: 非控制节点认证配置\nclimc 的使用简介参考: climc 使用\n快速开发调试 我们的服务都已经容器化运行在 Kubernetes 集群中，使用上面说的 “制作docker镜像-\u003e发布到集群” 的开发流程有些长，对于快速开发调试并不方便。\n通过 Telepresence 提供远程 Kubernetes 连接信息上下文，可以在本地开发调试。下面介绍使用 Telepresence 进行本地快速开发。\n安装配置 kubectl 需要在本地安装 kubectl。\n需要在本地配置好集群信息，以通过 kubectl 访问；将 cloudpods 控制节点上的$KUBECONFIG文件拷贝到本地~/.kube/config; 如果本地已经有此文件，参考 配置多集群访问 进行合并。\n安装 telepresence 这里介绍 CentOS 7 的本地环境安装，其他发行版可参考官方文档：Installing Telepresence。\n 不建议K8S集群的部署和开发在同一个环境，使用Telepresence会有端口冲突。\n # 安装依赖 $ yum install -y python3 sshfs conntrack iptables torsocks sshuttle sudo yum-utils # 安装 kubectl 用于连接 K8S 集群 $ cat \u003c\u003cEOF \u003e/etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64 enabled=1 gpgcheck=0 repo_gpgcheck=0 gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg EOF $ yum install -y kubectl-1.15.8-0 # 需要自行配置kubctl config # 测试kubctl可以访问之前部署的K8S集群 $ kubctl version # 源码安装 telepresence 到 /usr/local/bin/telepresence $ git clone https://github.com/telepresenceio/telepresence $ cd telepresence $ sudo env PREFIX=/usr/local ./install.sh 使用 利用 telepresence 本地连通远端 K8S 的特性，我们就可以做到在本地编译运行 region，keystone 等服务，同时又能访问远端 K8S 其它服务的环境。\nmacOS 或 linux 中本地编译运行 region 服务\n# 切换到 cloudpods 代码目录 $ cd $GOPATH/src/yunion.io/x/cloudpods # 编译 region 服务 $ make cmd/region # 使用 telepresence 替换 K8S 里面的 default-region deployment # 该命令在 K8S 集群中启动一个 deployment 替换掉原来的 default-regoin # 然后把流量的访问导向本地 # 如果想要使用特定的 shell，比如 zsh，可以在后面加上\"--run /bin/zsh\" $ telepresence --swap-deployment default-region --namespace onecloud 到这里已经进入到 telepresence 隔离的 namespace 里面了， $TELEPRESENCE_ROOT 这个目录 是通过 sshfs 挂载的远端 K8S pod 的文件系统。 接下来我们就可以在这个 namespace 里面运行 region 服务了：\n$ sudo chmod 777 /etc # 将 $TELEPRESENCE_ROOT/etc/yunion 链接到本地的 /etc $ ln -s $TELEPRESENCE_ROOT/etc/yunion /etc # 启动 region 服务 $ ./_output/bin/region --config /etc/yunion/region.conf 这个时候如果我们在外部调用 climc 就会发现相关的请求已经被转发到本地开发机启动 region 服务了。\n$ climc network-list 调试完成后需要进行清理操作\n# 退出 telepresence $ exit # 会看到类似下面的输出 T: Your process exited with return code 127. T: Exit cleanup in progress T: Cleaning up Pod # 删除链接文件 $ rm /etc/yunion Linux系统中本地编译运行 region 服务\n这种方式相比上一种方式，更加干净；但是相对复杂\n# 切换到 cloudpods 代码目录 $ cd $GOPATH/src/yunion.io/x/cloudpods # 编译 region 服务 $ make cmd/region # 使用 telepresence 替换 K8S 里面的 default-region deployment # 该命令在 K8S 集群中启动一个 deployment 替换掉原来的 default-regoin # 然后把流量的访问导向本地 # 如果想要使用特定的 shell，比如 zsh，可以在后面加上\"--run /bin/zsh\" $ telepresence --swap-deployment default-region --namespace onecloud 到这里已经进入到 telepresence 隔离的 namespace 里面了， $TELEPRESENCE_ROOT 这个目录 是通过 sshfs 挂载的远端 K8S pod 的文件系统。 接下来我们就可以在这个 namespace 里面运行 region 服务了：\n# 设置 max_user_namespaces $ cat /proc/sys/user/max_user_namespaces 0 # 如果 max_user_namespaces 为 0，需要设置下 user_namespaces $ echo 640 \u003e /proc/sys/user/max_user_namespaces # 启动一个新的 namespace , 但不共享 mount namespace，这样接下来的 mount bind 操作就不会影响到宿主机 $ unshare --map-root-user --mount # bind K8S /var/run/secrets $ mount --bind $TELEPRESENCE_ROOT/var/run /var/run $ ls /var/run/ secrets # bind cloudpods config $ mkdir /etc/yunion $ mount --bind $TELEPRESENCE_ROOT/etc/yunion /etc/yunion $ ls /etc/yunion/ pki region.conf # 启动 region 服务 $ ./_output/bin/region --config /etc/yunion/region.conf # 这个时候如果我们在外部调用 climc $ climc network-list # 就会发现相关的请求已经被转发到本地开发机启动 region 服务了 更多用法，以及 telepresence 的原理请参考官方文档。\nFAQ 1. 开发环境是 windows 或者 macOS，怎么开发？ 因为我们的服务最后会运行在基于 CentOS 7 搭建的 K8S 集群里面，所以日常的开发和打包中一般都是在 CentOS 7 里面做的。\n如果开发环境是 windows ，可以在 windows 里面写代码，然后创建一个 CentOS 7 的虚拟机，在虚拟机里面把开发环境搭建好，写完代码利用 rsync 等同步工具，把修改的代码增量拷贝到虚拟机中，然后进行打包发布等流程。\n对于 Mac 上的 macOS 也是类似的，可以使用和 windows 开发一样的流程。但 macOS 里开发和 Linux 里面开发差异没有很大，在 macOS 里面安装好对应的命令行工具和 docker 后，就可以直接使用 make image 相关的规则打包生成 docker 镜像了。\n2. 本地调试启动 region 服务，报以下错误 使用climc service-config-edit region2编辑 region 服务的配置，修改参数：\n fetch_etcd_service_info_and_use_etcd_lock: false enable_host_health_check: false   3. 使用 telepresence 时，上次未正常退出，再次使用一直报错 尝试手动清理:\n 使用 kubectl 删除 onecloud namespace 下除 default-region-dns-xxxxx 外，所有以 default-region 开头的Pod； 使用kubectl edit deployment default-region -n onecloud，将 spec 下的 replicas 从0改为1.  # 可以编译cmd下制定的组件，比如：编译 region 和 host 组件 $ make cmd/region cmd/host # 查看编译好的二进制文件 $ ls _output/bin region host 4. 本地直接运行 make cmd/host 会出现 ceph 依赖的报错 host 组件是私有云里面管理虚拟机的一个关键组件，依赖了 cephfs, rbd 和 rados 相关的库，如果是本地直接编译，则需要安装对应的依赖，操作如下：\nCentOS 7 Ubuntu 20.04 On rpm based systems (dnf, yum, etc):\nsudo rpm --import https://download.ceph.com/keys/release.asc sudo yum install -y https://download.ceph.com/rpm-luminous/el7/noarch/ceph-release-1-1.el7.noarch.rpm sudo yum install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm sudo yum install -y libcephfs-devel librbd-devel librados-devel  On debian systems (apt):\nwget -q -O- 'https://download.ceph.com/keys/release.asc' | sudo apt-key add - echo deb https://download.ceph.com/debian-luminous/ $(lsb_release -sc) main | sudo tee /etc/apt/sources.list.d/ceph.list apt-get update \u0026\u0026 apt-get install -y libcephfs-dev librbd-dev librados-dev  ","excerpt":" 说明  服务是以容器的方式运行在 Kubernetes(K8S) 集群里面的，所以开发调试需要部署一个 Kubernetes 集群 后端服 …","ref":"/zh/docs/development/dev-env/","title":"搭建开发环境"},{"body":"物理机入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/基础资源/物理机” 菜单项，进入物理机页面。\n裸金属入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/主机/裸金属” 菜单项，进入裸金属页面。\n","excerpt":"物理机入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/基础资源/物理机” 菜单项，进入物理机页面。\n裸金属入口：在云管 …","ref":"/zh/docs/onpremise/baremetal/tutorial/","title":"操作指南"},{"body":"入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/基础资源/宿主机” 菜单项，进入宿主机页面。\n","excerpt":"入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/基础资源/宿主机” 菜单项，进入宿主机页面。\n","ref":"/zh/docs/onpremise/host/tutorial/","title":"操作指南"},{"body":"系统镜像入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/镜像/系统镜像” 菜单项，进入系统镜像页面。\n主机镜像入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/镜像/主机镜像” 菜单项，进入主机镜像页面。\n","excerpt":"系统镜像入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/镜像/系统镜像” 菜单项，进入系统镜像页面。\n主机镜像入口：在 …","ref":"/zh/docs/onpremise/image/tutorial/","title":"操作指南"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/lb/tutorial/","title":"操作指南"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/scalinggroup/tutorial/","title":"操作指南"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/scheduler/tutorial/","title":"操作指南"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/vminstance/tutorial/","title":"操作指南"},{"body":"该功能用于连接Ceph分布式存储、NFS网络文件系统以及GPFS共享存储，存储创建完成后还需要关联宿主机操作才能被用户使用。\n 单击列表上方 “新建” 按钮，弹出新建存储对话框。 配置以下参数：  指定域：选择存储的所属域。 区域 ：设置区域和可用区。 名称：存储的名称。 介质类型：存储设备的介质类型，包括机械盘、固态盘和混合盘。性能固态盘\u003e混合盘\u003e机械盘。 存储类型：包括Ceph、NFS、GPFS三种。  当选择存储类型为\"Ceph“时，配置以下参数。Ceph类型存储要求本地数据中心存在Ceph存储集群。   Ceph Mon Host：Ceph存储的监控节点的IP地址。\n  Ceph Key：Ceph存储集群默认启用密钥认证，Ceph Key即用户的密钥，格式为为“AQDsBh5b1CtoHxAA9atFhYn1cPBJvPCpoRVo/g==”形式的字符串。可通过以下命令获取Ceph存储的用户密钥。\n$ cat ceph.client.admin.keyring | grep key   Ceph Pool：Ceph存储的存储池。\n   当选择存储类型为\"NFS“时，配置以下参数。NFS类型存储要求本地数据中心存储NFS网络存储服务器。  NFS Host：NFS服务器的IP地址。 NFS Shared Dir：NFS服务器设置的共享目录。   当选择存储类型为”GPFS“时，无需配置任何参数。GPFS类型存储要求本地数据中心存在共享存储，并且需挂载存储的宿主机已关联该存储。     单击 “确定” 按钮，完成操作。  ","excerpt":"该功能用于连接Ceph分布式存储、NFS网络文件系统以及GPFS共享存储，存储创建完成后还需要关联宿主机操作才能被用户使用。 …","ref":"/zh/docs/onpremise/storage/tutorial/storage/create/","title":"添加共享存储"},{"body":"新建调度标签 该功能用于新建调度标签，支持为宿主机、IP子网以及存储创建调度标签。\n 单击列表上方 “新建” 按钮，弹出新建调度标签页面。 配置以下参数：  名称：设置调度标签的名称，一般用于标识绑定标签的资源的用途。 偏好：即调度标签的默认策略，包括尽量使用、避免使用、禁止使用、无，请注意必须使用不可以设置为调度标签的默认策略。当创建虚拟机时如果没有匹配到任何调度策略，也没有指定任意调度标签的偏好，则默认策略生效。  尽量使用（prefer）：绑定这类调度标签的资源的默认策略为尽量使用。即尽量使用绑定这类调度标签的资源，如果不带这类标签，也可以使用。 避免使用（avoid）：绑定这类调度标签的资源的默认策略为避免使用。即尽量避免使用绑定这类调度标签的资源，如果带这种标签，也可以使用。 禁止使用（exclude）：绑定这类调度标签的资源的默认策略为禁止使用。即禁止使用绑定这类调度标签的资源。 无：绑定这类调度标签的资源的默认策略为无。   资源类型：包括宿主机、存储、网络，不同资源类型的调度标签绑定到不同资源中，如宿主机类型的调度标签支持绑定到宿主机资源等。   单击 “确定” 按钮，完成操作。  偏好设置 该功能用于修改调度标签的默认策略。\n 在调度标签页面，单击调度标签操作列 更多 按钮，选择下拉菜单 偏好设置 菜单项，弹出偏好设置对话框。 设置调度标签的偏好，单击 “确定” 按钮，完成操作。  ","excerpt":"新建调度标签 该功能用于新建调度标签，支持为宿主机、IP子网以及存储创建调度标签。\n 单击列表上方 “新建” 按钮，弹出新建调度标签页面。  …","ref":"/zh/docs/onpremise/scheduler/tutorial/addschedtag/","title":"添加调度标签"},{"body":"Cloudpods私有云 如果是在Cloudpods私有云上部署 kubernetes 集群，需要先导入对应的镜像，操作如下：\n 进入主机菜单，选择系统镜像的上传按钮 输入镜像名称 ‘CentOS-7.6.1810-20190430.qcow2’ 上传方式选择 ‘输入镜像URL’，镜像 URL 为: https://iso.yunion.cn/vm-images/CentOS-7.6.1810-20190430.qcow2  等待镜像导入完毕后，就可以使用该镜像创建虚拟机部署 kubernetes 集群。\n","excerpt":"Cloudpods私有云 如果是在Cloudpods私有云上部署 kubernetes 集群，需要先导入对应的镜像，操作如下：\n 进入主机菜 …","ref":"/zh/docs/k8s/pre_env/","title":"环境准备"},{"body":"登录 控制面板 功能概览 CloudShell 用于在Cloudpods平台上通过Climc命令调试环境。\n","excerpt":"登录 控制面板 功能概览 CloudShell 用于在Cloudpods平台上通过Climc命令调试环境。\n","ref":"/zh/docs/screenshots/login/","title":"登录界面"},{"body":"Cloudpods平台支持纳管物理服务器并基于物理服务器创建裸金属服务器。\n启用Baremetal服务 请确保环境中已启用Baremetal服务，Baremetal服务提供PXE Server、DHCP、TFTP、http等功能，用于完成纳管物理机操作并管理物理机。Cloudpods安装完成后默认不启用Baremetal服务，需要用户按照下面命令在环境中的任意节点上启用Baremetal服务。\n  通过SSH等以root用户登录到First Node节点。\n  使用kubectl get pods -n onecloud |grep baremetal命令查看环境中是否已启用Baremetal服务。如已存在，忽略步骤3、4。\n  如不存在Baremetal服务，执行以下命令启用Baremetal服务。其中$node_name是节点的名称；$listen-interface是baremetal-agent监听的网卡名称。 注意 如果需要启用Baremetal服务的节点安装了host服务，监听网卡请设置为br0，其余情况监听网卡为节点的实际网卡名称。  # 在指定节点上启用Baremetal服务并监听网卡 $ ocadm baremetal enable --node $node_name --listen-interface $listen_interface # 禁用Baremetal服务 $ ocadm baremetal disable --node $node_name # 如在node1主机上启用baremetal服务，并监听br0网卡。 $ ocadm baremetal enable --node node1 --listen-interface br0   Baremetal服务启用后，可通过以下命令查看baremetal-agent是否注册到控制节点上。\n# 查看baremetal的pods $ kubectl get pods -n onecloud | grep baremetal default-baremetal-agent-fb5d4b5f7-2ld8v 1/1 Running 0 15m   纳管物理机方式介绍 Cloudpods平台目前支持5种纳管物理机的方式及纳管原理介绍，请根据具体情况选择合适的方式。\n   方式 纳管物理机数量 已有IPMI信息 启动引导方式 DHCP Relay 网络分配方式 依赖Redfish API      ISO引导注册 小规模 是 ISO 否 静态分配 是    PXE引导注册 小规模 是 PXE 是 DHCP分配 否    预注册 小规模 否 PXE 是 DHCP分配 否    自动注册 大规模 否 PXE 是 DHCP分配 否     ISO引导注册 该方式对网络无要求，但是要求物理机已配置了BMC信息，且服务器支持Redfish等。\n 在Cloudpods平台上配置物理服务器的BMC信息以及管理口IP地址。 Baremetal将会通过Redfish API验证物理服务器的BMC信息，进而获取物理服务器的配置信息，如服务器SN、厂商型号以及网卡信息等。 验证通过后，物理服务器上的Redfish API将会通过带外网加载Baremetal提供的YunionOS的ISO。 进入YunionOS系统后根据配置设置管理口的IP地址，从而使物理服务器可以通过管理网访问Baremetal，上报服务器的SSH登录信息。 Baremetal通过SSH调用YunionOS中的工具，收集服务器信息，并进行管理操作等。 至此，物理服务器成功注册到Cloudpods平台。  PXE引导注册： 该方式要求用户环境存在DHCP Relay，且要求物理机已配置BMC信息，且在引导注册过程中不会改变物理机的BMC信息。如果服务器不支持Redfish，还需要提供服务器的MAC地址。\n 在Cloudpods平台上配置物理服务器的BMC信息并设置服务器PXE启动等。 Baremetal通过IPMI验证物理服务器的BMC信息。 验证通过后，收集少量的服务器信息，设置物理服务器为开机启动，物理服务器通过DHCP配置管理口IP地址、 通过管理网启动引导物理服务器进入YunionOS，上报SSH登录信息。 Baremetal通过SSH调用YunionOS中的工具，收集服务器信息，并进行管理操作等。 至此，物理服务器成功注册到Cloudpods平台。  自动注册 该方式适用于大规模的服务器自动注册到云管平台，仅要求用户环境存在DHCP Relay，引导注册过程中会重置BMC信息。\n 新上架的物理服务器设置PXE启动上电后，物理服务器接入的三层网关上的DHCP Relay将转发物理服务器的PXE请求到Baremetal。 Baremetal服务收到请求后将会响应PXE请求，引导物理服务器从网络加载YunionOS系统并重启进入YunionOS系统，上报服务器的ssh信息， Baremetal通过SSH调用YunionOS中的工具，收集服务器信息，重置服务器BMC信息（如不提供BMC信息，将按照默认的信息进行配置）。 至此，物理服务器成功注册到Cloudpods平台。  预注册 该方式适用于小规模的服务器注册到云管平台，该方式要求用户环境存在DHCP Relay，且提供服务器的MAC地址，在引导过程中会重置BMC信息。\n 新上架的物理服务器设置PXE启动上电后，物理服务器接入的三层网关上的DHCP Relay将转发物理服务器的PXE请求到Baremetal。 Baremetal服务收到请求后将会验证物理服务器的MAC地址是否匹配，匹配成功后将会记录物理服务器的基本信息并响应PXE请求，引导物理服务器从网络加载YunionOS系统并重启进入YunionOS系统，上报服务器的ssh信息， Baremetal通过SSH调用YunionOS中的工具，收集服务器信息，重置服务器BMC信息（如不提供BMC信息，将按照默认的信息进行配置）。 至此，物理服务器成功注册到Cloudpods平台。  托管 该方式适用于已有操作系统的服务器，该方式对网络无要求。执行托管脚本后将使用容器技术在物理服务器中运行YunionOS收集服务器信息，而不会影响物理机的原有操作系统。\n典型组网介绍 组网说明  IPMI网络用于远程访问BMC（Baseboard Management Controller），通过IPMI网络可以远程控制物理服务器的开关机等。 管理网：执行管理物理服务器操作的网络，例如配置物理服务器，安装软件等。 PXE网：发送PXE请求，获取IP地址等，PXE网络一般跟管理网为一个网络。 业务网：物理服务器上运行业务需要的网络。  配置DHCP Relay（选做） ISO引导注册或托管物理机请忽略该步骤。\n由于Baremetal Agent服务只会处理DHCP Relay的单播请求，所以当使用PXE引导注册、预注册、自动注册的方式纳管物理机时要求在网络环境中配置DHCP Relay，并将其Relay到部署Baremetal的节点上。\n 当物理机与Baremetal节点在同一个二层网络时，此时用户可以选择使用Host服务的DHCP Relay功能或在物理交换机上配置DHCP Relay。 当物理机与Baremetal节点在三层网络环境中，此时用户只能在物理交换机上配置DHCP Relay。  Host服务启用DHCP Relay # 登录到任意一台已经部署好计算节点的服务器上修改 /etc/yunion/host.conf，添加dhcp_relay 配置项： dhcp_relay: - 10.168.222.198 # baremetal agent dhcp服务监听地址 - 67 # baremetal agent dhcp服务监听端口 # 查看host服务对应pod $ kubectl get pods -n onecloud -o wide | grep host default-host-p6d8h 2/2 Running 0 78m 10.168.222.189 k8s-dev1 \u003cnone\u003e \u003cnone\u003e default-host-xdc7x 2/2 Running 0 78m 10.168.222.150 k8s-dev2 \u003cnone\u003e \u003cnone\u003e # 删除host服务的pod，重启host服务 $ kubectl delete pods -n onecloud default-host-p6d8h default-host-xdc7x 物理交换机配置DHCP Relay 需要分别针对物理机的IPMI网段和管理网段配置DHCP Relay。\n不同厂家的物理交换机配置DHCP Relay的命令不同，以下配置仅供参考，请根据实际情况进行配置。\n# 配置DHCP Relay，并Relay到Baremetal所在节点的IP上。 interface Vlanif10 description new_test_host_net ip address 10.127.100.1 255.255.255.0 dhcp select relay dhcp relay binding server group baremetal-group dhcp relay server group baremetal-group server 10.127.100.2 0 配置流程  根据组网规划创建物理服务器使用的IPMI IP子网和PXE IP子网以及裸金属设备使用的IP子网。 根据需求选择添加物理机的方式。 已纳管的物理机可以用于创建裸金属设备。  操作步骤 网络配置 无论使用何种方式纳管物理机，都需要在Cloudpods平台上配置物理机类型、IPMI以及PXE类型的IP子网，其中PXE网段可以和物理机类型共用一个网段。请根据网络规划配置IP子网。\n创建IPMI IP子网  在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/基础网络/IP子网” 菜单项，进入IP子网页面。 单击列表上方 “新建” 按钮，进入创建IP子网页面。 设置以下参数：  子网名称：用于标识IPMI子网。 平台：选择本地IDC。 二层网络：请根据规划选择区域、专有网络以及可用的二层网络。后续用户申请裸金属时需要在二层网络所在的区域和可用区中选择。 服务器类型：选择IPMI。 IP子网：设置IP子网网段、子网掩码、网关以及VLAN ID等。   单击 “确定” 按钮。  创建PXE IP子网  在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/基础网络/IP子网” 菜单项，进入IP子网页面。 单击列表上方 “新建” 按钮，进入创建IP子网页面。 设置以下参数：  子网名称：用于标识IPMI子网。 平台：选择本地IDC。 二层网络：请根据规划选择区域、专有网络以及可用的二层网络。后续用户申请裸金属时需要在二层网络所在的区域和可用区中选择。 服务器类型：选择PXE。 IP子网：设置IP子网网段、子网掩码、网关以及VLAN ID等。   单击 “确定” 按钮。  创建物理机或虚拟机IP子网 用户创建裸金属设备时会优先使用物理机IP子网，若环境中不存在可用的物理机IP子网将会使用虚拟机IP子网。\n 在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/基础网络/IP子网” 菜单项，进入IP子网页面。 单击列表上方 “新建” 按钮，进入创建IP子网页面。 设置以下参数：  子网名称：用于标识IPMI子网。 平台：选择本地IDC。 二层网络：请根据规划选择区域、专有网络以及可用的二层网络。后续用户申请裸金属时需要在二层网络所在的区域和可用区中选择。 服务器类型：选择物理机或虚拟机IP子网，新建裸金属服务器时默认优先使用物理机IP子网，当没有可用的物理机IP子网将使用虚拟机IP子网。 IP子网：设置IP子网网段、子网掩码、网关以及VLAN ID等。   单击 “确定” 按钮。  纳管物理机 ISO引导注册 ISO引导注册之前请管理员提前准备以下信息：\n 物理服务器的BMC信息。 物理服务器管理口IP地址、IP子网或二层网络等。   在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/基础资源/物理机” 菜单项，进入物理机页面。 单击 “添加” 按钮，进入添加物理机页面，选择添加方式为“ISO引导注册”。 配置以下信息：  单条录入：配置以下参数。  指定域：选择物理机所属的域。 物理机名称：设置物理服务器的名称。 IPMI地址：输入服务器上已配置好的IPMI地址。 IPMI用户名：输入服务器上已配置好的IPMI用户名。 IPMI密码：输入服务器上已配置好的IPMI密码信息。若输入的BMC信息不正确则无法正确完成引导注册。 管理口IP：选择IP子网，如需指定静态IP，可单击 “手动配置IP” 按钮，设置IP地址，单击 “确定” 按钮。由于ISO引导注册适用于没有DHCP Relay的环境，所以用户必须配置提供服务器管理口接入的IP子网或IP地址信息。 只注册不引导：不重启引导进入YunionOS系统，勾选该项后，仅收集到服务器的部分信息，此时的服务器无法用于创建裸金属，需要进行检测硬件配置操作使其正式投入生产使用。   模板导入：支持导入含有物理机注册信息的XLSX格式的模板文件。  导入物理机信息需要按照预先设定的格式，请先下载模板。 在下载的host_template.xlsx文件中补充物理机的信息。所有物理机信息请都放在同一个sheet页面中。 单击虚线框或将模板文件拖拽到虚线框，单击 “确定” 按钮，上传模板文件。 只注册不引导：不重启引导进入YunionOS系统，勾选该项后，仅收集到服务器的部分信息，此时的服务器无法用于创建裸金属，需要进行检测硬件配置操作使其正式投入生产使用。     单击 “确定” 按钮，完成引导注册。  PXE引导注册 PXE引导注册之前请管理员提前准备以下信息：\n 物理服务器的BMC信息。   在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/基础资源/物理机” 菜单项，进入物理机页面。 单击 “添加” 按钮，进入添加物理机页面，选择添加方式为“PXE引导注册”。 配置以下信息：  单条录入：配置以下参数。  指定域：选择物理机所属的域。 物理机名称：设置物理服务器的名称。 IPMI地址：输入服务器上已配置好的IPMI地址。 IPMI用户名：输入服务器上已配置好的IPMI用户名。 IPMI密码：输入服务器上已配置好的IPMI密码信息。若输入的BMC信息不正确则无法正确完成引导注册。 管理口MAC地址：设置服务器的管理口MAC地址，支持Redfish的服务器无需填写该项。 管理口IP：选填。支持选择IP子网，如需指定静态IP，可单击 “手动配置IP” 按钮，设置IP地址，单击 “确定” 按钮。留空则由DHCP自动分配IP。 只注册不引导：不重启引导进入YunionOS系统，勾选该项后，仅收集到服务器的部分信息，此时的服务器无法用于创建裸金属，需要进行检测硬件配置操作使其正式投入生产使用。   模板导入：支持导入含有物理机注册信息的XLSX格式的模板文件。  导入物理机信息需要按照预先设定的格式，请先下载模板。 在下载的host_template.xlsx文件中补充物理机的信息。所有物理机信息请都放在同一个sheet页面中。 单击虚线框或将模板文件拖拽到虚线框，单击 “确定” 按钮，上传模板文件。 只注册不引导：不重启引导进入YunionOS系统，勾选该项后，仅收集到服务器的部分信息，此时的服务器无法用于创建裸金属，需要进行检测硬件配置操作使其正式投入生产使用。     单击 “确定” 按钮，完成引导注册。  预注册 预注册操作仅是预上架服务器信息，并不代表物理机已注册到Cloudpods平台，实际注册需要等到服务器上电启动。\n预注册物理机之前请管理员提前准备以下信息：\n 物理服务器的MAC地址和名称，必填。 由管理员规划BMC信息（IPMI地址、用户名、密码等信息），物理服务器可以事先不配置BMC信息，后续注册虚拟机引导时将会将物理服务器的BMC信息重置为注册物理机时设置的BMC信息。    在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/基础资源/物理机” 菜单项，进入物理机页面。\n  单击 “添加” 按钮，进入添加物理机页面，选择添加方式为“预注册”。\n  支持3种导入物理机信息的方式。其中单条录入适用于托管单台服务器的场景，批量导入和文件导入适用于一次性托管多台服务器的场景。\n 单条录入：配置以下参数。  指定域：选择物理机所属的域。 MAC地址：物理机设备的MAC地址。 物理机名称：物理机设备的名称。 IPMI地址：设置物理机的IPMI地址，当不设置该参数时，若平台上存在IPMI的IP子网，系统将自动为其分配IP地址，一般建议新机器留空，旧机器设置之前的IP地址。 IPMI用户名：设置IPMI管理用户名。当不设置该参数时，系统默认使用root用户登录，一般建议新机器留空，旧机器设置之前的用户名。 IPMI密码：设置IPMI用户的密码。当不设置该参数时，系统默认密码为YunionDev@123。一般建议新机器留空，旧机器设置之前的密码。 设置完成后，单击 “确定” 按钮。   批量录入：请注意以下内容。  一行为一条物理机记录，一次最多支持导入100条记录。 录入信息格式为“MAC地址,名称,IPMI地址,IPMI用户名,IPMI密码”，中间以英文逗号“,”分割，若密码中包含中文逗号“，”需要使用单条录入功能进行注册。 其中MAC地址和名称为必填项，其他参数可省略不填写。 例如：ee:b3:f4:48:1c:f5,gpuhost01,192.168.1.1,root,admin123 例如：ee:b3:f4:48:1c:f5,gpuhost01,,, –省略了IPMI地址、IPMI用户名和IPMI密码 录入完成后，单击 “确定” 按钮。   模板导入：支持导入含有物理机注册信息的XLSX格式的模板文件。  导入物理机信息需要按照预先设定的格式，请先下载模板。 在下载的host_template.xlsx文件中补充物理机的信息。所有物理机信息请都放在同一个sheet页面中。 单击虚线框或将模板文件拖拽到虚线框，单击 “确定” 按钮，上传模板文件。      至此，服务器预上架准备完毕。\n  等待管理员将服务器设置为PXE启动，并为服务器上电后，才会进行真正的注册物理机操作，并获取服务器的基本信息等。\n  当服务器在平台上有信息显示后，管理员可以在Cloudpods平台上对物理机进行管理操作等。\n  说明 目前前端不支持设置预注册物理机的 PXE 启动 IP，可以通过在后端用命令行指定，操作如下：\n# 通过 host-create 命令创建物理机记录 # 对应物理机名称为 bm1 # PXE 启动网卡 MAC 为 2c:ea:7f:af:77:5b # --access-ip 指定 pxe 启动的 IP # --ipmi-addr 设置需要配置的 IPMI IP # --ipmi-user 设置需要配置的 IPMI 用户 # --ipmi-passwd 设置对应的 IPMI 用户密码 # --no-probe 表示不要进行 IPMI 探测，和引导注册区分开 $ climc host-create \\  --access-ip 10.2.0.35 \\  --ipmi-addr 10.3.0.25 \\  --ipmi-user root \\  --ipmi-passwd YunionDev@123 \\  --no-probe \\  bm1 2c:ea:7f:af:77:5b   自动注册 Cloudpods平台默认未启用自动注册功能，如需要使用该功能，可通过界面或climc命令启用自动注册。\n全局设置启用自动注册\n  在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “系统配置/全局设置/全局设置” 菜单项，进入全局设置页面。\n  单击 “编辑” 按钮，开启自动注册功能。\n  Climc启用自动注册\n# 命令行开启自动注册 $ climc service-edit-config baremetal ... # 自动注册选项，默认为 false auto_register_baremetal: true ... 托管物理机 托管物理机操作可以纳管已安装操作系统的物理服务器，在纳管服务器之前，需要用户了解物理服务器的BMC（IPMI地址、用户名、密码）信息等。\n在托管服务器之前，请确保以下条件：\n 平台上已创建了包含物理服务器的IPMI类型和物理机类型的IP子网； 物理服务器已配置了BMC信息（IPMI地址、用户名、密码）； 物理服务器已放开2222或之后端口；如2222端口已被占用，则需放开2222之后的端口。  说明 托管的物理机所在域与操作用户有关。    在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/基础资源/物理机” 菜单项，进入物理机页面。\n  单击 “添加” 按钮，进入添加物理机页面，选择添加方式为“托管”。\n  单击\"点击复制\"链接，复制命令。\n  通过ssh等远程连接到物理服务器，在服务器中执行复制的命令。\n  命令执行过程中需要输入服务器的IPMI用户名、密码以及IPMI IP，设置完成后等待一段时间，物理机会被注册到Cloudpods平台，同时将创建一个与之前物理机同配置的裸金属服务器。\n  ","excerpt":"Cloudpods平台支持纳管物理服务器并基于物理服务器创建裸金属服务器。\n启用Baremetal服务 请确保环境中已启用Baremetal …","ref":"/zh/docs/onpremise/baremetal/tutorial/create_register_redirect/","title":"纳管物理机"},{"body":"Cloudpods目前支持在 CentOS 7 和 Debian 10 上运行，待部署组件/服务如下:\n   服务组件 用途 安装方式 运行方式     mariadb 关系型数据库 rpm systemd   docker 容器运行时 rpm systemd   kubelet 管理 kubernetes pod rpm systemd   keystone 认证服务 k8s deployment container   region api 控制器 k8s deployment container   scheduler 调度服务 k8s deployment container   glance 镜像存储 k8s deployment container   webconsole 虚拟机访问界面 k8s deployment container   influxdb 监控数据库 k8s deployment container   host 管理虚拟机 k8s daemonset container   sdnagent 管理虚拟机网络 rpm systemd   baremetal-agent 管理物理机 k8s deployment container   climc 命令行工具 rpm shell   ocadm 部署服务管理工具 rpm shell    其中 host 和 baremetal-agent 可以根据需求选择性部署:\n 管理 kvm 虚拟机: 部署 host 服务 管理物理机: 部署 baremetal-agent 服务  ","excerpt":"Cloudpods目前支持在 CentOS 7 和 Debian 10 上运行，待部署组件/服务如下:\n   服务组件 用途 安装方式 运行 …","ref":"/zh/docs/setup/intro/","title":"组件概览"},{"body":"为了实现多租户的效果，认证服务提供了域的概念，一个域下有一个完整的用户认证体系和资源和权限体系，从而允许一个域管理员能够完全自治地管理本域的用户、组、项目、角色和权限策略。\n域属性    字段名称 说明     id ID，只读   name 名称   enabled 是否启用    域限制  域只有在域内没有项目、角色和策略之后，并且置于enabled=false状态才能够被删除 default域无法删除 ldap同步过来的域的如下属性无法修改：name  域名字空间 域的名字空间为全局，也就是说域的名字全局唯一\n预置值 系统初始化后，预置一个default域，作为初始sysadmin账户和system项目所在的域\n","excerpt":"为了实现多租户的效果，认证服务提供了域的概念，一个域下有一个完整的用户认证体系和资源和权限体系，从而允许一个域管理员能够完全自治地管理本域的 …","ref":"/zh/docs/auth_security/domain/","title":"域（租户）"},{"body":"创建好虚拟机后，登录的方式大概分为以下几种：\n ssh: linux 通用，要求虚拟机网络可达; rdp: windows 远程桌面，要求虚拟机网络可达；可通过RDP对应的客户端连接Windows操作系统的虚拟机。 vnc: vnc 链接，对虚拟机网络没有要求，只要能链接云平台 vnc proxy 即可;  Web界面操作 该功能用于通过过VNC远程终端或Web SSH远程连接到虚拟机。 注意  Windows操作系统的虚拟机只支持通过VNC远程终端； 在Cloudpods平台经典网络的虚拟机可以直接使用Web SSH和VNC远程终端；Cloudpods平台VPC网络的虚拟机可以直接使用Web SSH和VNC远程终端，也可以绑定EIP后使用EIP的Web SSH。请注意，未绑定EIP的VPC网络的虚拟机只能通过平台的Web SSH连接，无法使用SSH工具进行连接，如需使用SSH工具连接虚拟机，请为虚拟机绑定EIP。 VNC长时间连接黑屏后，按空格键会恢复显示。    在虚拟机页面，单击虚拟机右侧操作列操作列 “远程终端” 按钮，选择 “VNC远程终端” 菜单项，新建Web Console名称的浏览器标签页。  发送远程命令：单击 “发送远程命令” 按钮，选择下拉菜单 “Ctrl-Alt-F1~F6” 菜单项，向虚拟机控制台发送具体的命令。 Ctrl-Alt-Delete：单击\\ Ctrl-Alt-Delete 按钮，若虚拟机为Windows系统，则向虚拟机控制台发送Ctrl-Alt-Delete命令，若虚拟机为Linux系统，则将弹出重启服务器提示，单击 “确定” 按钮后将重启虚拟机。 发送文字：单击 发送文字 按钮，在弹出的发送文字对话框中输入需要发送的内容，单击 “确定” 按钮，向虚拟机控制台发送文字，如发送内容为登录密码，在发送文字后，需要键入回车键确认登录。   单击 “远程终端” 按钮，选择 “SSH IP地址” 菜单项，与虚拟机建立web SSH连接。 单击 远程终端 按钮，选择 “SSH IP地址:任意端口” 菜单项，在弹出的对话框中设置端口号，单击 “确定” 按钮，与虚拟机建立web SSH连接。  Climc命令行操作 针对以上的链接方式，我们提供以下接口链接云虚拟机：\nvnc 连接 climc webconsole-server 命令提供通过 vnc 的方式链接虚拟机，该方式对裸金属服务器不可用。\n$ climc webconsole-server \u003cserver_id\u003e ssh 连接 查询 server 的 ip\n# 可通过 server-list --search --details 的方式找到虚拟机的 ip $ climc server-list --search \u003cserver_name\u003e --details # 或者通过 server-show \u003cserver_id\u003e 的方式得到 ip $ climc server-show \u003cserver_name\u003e | grep ip | ips | 10.168.222.226 | 查询 server 的登录信息\n$ climc server-logininfo \u003cserver_name\u003e +----------+-----------------------------+ | Field | Value | +----------+-----------------------------+ | password | @2aWXB6AmCbV | | updated | 2019-07-03T10:00:20.801716Z | | username | root | +----------+-----------------------------+ ssh 登录\n$ ssh root@10.168.222.226 通过 webconsole 登录\n$ climc webconsole-ssh 10.168.222.226 https://console.yunion.cn/web-console?access_token=y7bjpBwtvJHLHpwOUMzNVvsYiAgY1vskIuVwB-aINfH4mm8MsZqwxKSfHqm2pCvY6O8bBA%3D%3D\u0026api_server=https%3A%2F%2Foffice.yunion.io\u0026protocol=tty 在浏览器打开 webconsole 放回的 url ，就会到对应虚拟机的登录界面\n","excerpt":"创建好虚拟机后，登录的方式大概分为以下几种：\n ssh: linux 通用，要求虚拟机网络可达; rdp: windows 远程桌面，要求虚 …","ref":"/zh/docs/onpremise/vminstance/tutorial/connect/","title":"登录虚拟机"},{"body":"在部署生产可用的 kubernetes 集群之前，需要先部署 LoadBalancer 环境，这里使用 keepalived + haproxy 的方式实现负载均衡和高可用。\n环境说明 单独拿两个节点部署 keepalived 和 haproxy 作为后端 kubernetes 控制平面的负载均衡器，拓扑结构如下:\n两个节点上面分别部署 keepalived 和 haproxy 组成负载均衡集群，haproxy 的 backend 为后端的 kubernetes control plane node，vip(虚ip) 在这两个节点之间漂移形成高可用。\n另外 Cloudpods 服务使用 Mariadb，如果没有专门的数据库集群，可以单独拿两个节点部署 Mariadb 高可用。参考 部署 DB HA 环境 。\n部署 keepalived 的主要作用是为 haproxy 提供 vip，在2个 haproxy 实例之间提供主备，降低当其中一个haproxy失效的时对服务的影响。\n部署配置 keepalived 设置相关的环境变量，根据不同的环境自行配置。\n# keepalived vip 地址 export K8SHA_VIP=10.168.222.18 # keepalived auth toke export K8SHA_KA_AUTH=412f7dc3bfed32194d1600c483e10ad1d # keepalived network interface export K8SHA_NETIF=eth0 设置 sysctl 选项\n$ cat \u003c\u003cEOF \u003e\u003e/etc/sysctl.conf net.ipv4.ip_forward = 1 net.ipv4.ip_nonlocal_bind = 1 EOF $ sysctl -p 安装 keepalived\n$ yum install -y keepalived 添加配置\n$ cat \u003c\u003cEOF \u003e/etc/keepalived/keepalived.conf ! Configuration File for keepalived global_defs { router_id LVS_DEVEL } vrrp_script check_haproxy { script \"pidof haproxy\" interval 3 weight -2 fall 10 rise 2 } vrrp_instance VI_1 { state MASTER interface $K8SHA_NETIF virtual_router_id 51 priority 250 advert_int 1 authentication { auth_type PASS auth_pass $K8SHA_KA_AUTH } virtual_ipaddress { $K8SHA_VIP } track_script { check_haproxy } } EOF 启动 keepalived\n$ systemctl enable --now keepalived $ ip addr show $K8SHA_NETIF 2: eth0: \u003cBROADCAST,MULTICAST,UP,LOWER_UP\u003e mtu 1500 qdisc mq state UP qlen 1000 link/ether 00:22:ff:95:87:f7 brd ff:ff:ff:ff:ff:ff inet 10.168.222.189/24 brd 10.168.222.255 scope global eth0 valid_lft forever preferred_lft forever inet 10.168.222.18/32 scope global eth0 valid_lft forever preferred_lft forever inet6 fe80::222:ffff:fe95:87f7/64 scope link valid_lft forever preferred_lft forever 部署配置 haproxy 此处的 haproxy 为 apiserver 提供反向代理，haproxy 将所有请求轮询转发到每个master节点上。\n系统配置\nexport K8S_MASTER0=10.168.222.218 export K8S_MASTER1=10.168.222.197 export K8S_MASTER2=10.168.222.207 安装 haproxy\n$ yum install -y haproxy 配置 haproxy\n$ cat \u003c\u003cEOF \u003e/etc/haproxy/haproxy.cfg #--------------------------------------------------------------------- # Global settings #--------------------------------------------------------------------- global # to have these messages end up in /var/log/haproxy.log you will # need to: # # 1) configure syslog to accept network log events. This is done # by adding the '-r' option to the SYSLOGD_OPTIONS in # /etc/sysconfig/syslog # # 2) configure local2 events to go to the /var/log/haproxy.log # file. A line like the following can be added to # /etc/sysconfig/syslog # # local2.* /var/log/haproxy.log # log 127.0.0.1 local2 chroot /var/lib/haproxy pidfile /var/run/haproxy.pid maxconn 4000 user haproxy group haproxy daemon # turn on stats unix socket stats socket /var/lib/haproxy/stats #--------------------------------------------------------------------- # common defaults that all the 'listen' and 'backend' sections will # use if not designated in their block #--------------------------------------------------------------------- defaults mode http log global option httplog option dontlognull option http-server-close option forwardfor except 127.0.0.0/8 option redispatch retries 3 timeout http-request 10s timeout queue 1m timeout connect 10s timeout client 1m timeout server 1m timeout http-keep-alive 10s timeout check 10s maxconn 3000 #--------------------------------------------------------------------- # kubernetes apiserver frontend which proxys to the backends #--------------------------------------------------------------------- frontend kubernetes-apiserver mode tcp bind *:6443 option tcplog default_backend kubernetes-apiserver #--------------------------------------------------------------------- # round robin balancing between the various backends #--------------------------------------------------------------------- backend kubernetes-apiserver mode tcp balance roundrobin server master-0 $K8S_MASTER0:6443 check server master-1 $K8S_MASTER1:6443 check server master-2 $K8S_MASTER2:6443 check #--------------------------------------------------------------------- # collection haproxy statistics message #--------------------------------------------------------------------- listen stats bind *:1080 stats auth admin:awesomePassword stats refresh 5s stats realm HAProxy\\ Statistics stats uri /admin?stats EOF 启动并检测服务\n$ systemctl enable haproxy.service --now $ systemctl status haproxy.service $ netstat -tulnp | egrep '6443|1080' tcp 0 0 0.0.0.0:6443 0.0.0.0:* LISTEN 10033/haproxy tcp 0 0 0.0.0.0:1080 0.0.0.0:* LISTEN 10033/haproxy 部署 kubernetes 集群 参考 部署集群 。\n","excerpt":"在部署生产可用的 kubernetes 集群之前，需要先部署 LoadBalancer 环境，这里使用 keepalived + …","ref":"/zh/docs/setup/controlplane-ha/","title":"部署 HA 环境"},{"body":"Fork Repository Visit https://github.com/yunionio/cloudpods , fork it.\nClone source Clone your fork repository and set upstream.\n$ git clone https://github.com/\u003cyour_name\u003e/cloudpods $ cd cloudpods $ git remote add upstream https://github.com/yunionio/cloudpods How to make a Pull Request?  Checkout a branch from master, either for a new feature or a bugfix  # checkout new branch $ git fetch upstream --tags $ git checkout -b feature/implement-x upstream/master  Coding on the new branch After coding is done, do the following to prepare for Pull Request  $ git fetch upstream # fetch most up-to-date upstream master $ git rebase upstream/master # resolv possible conflicts $ git push origin feature/implement-x # push your local branch to github  Submit Pull Request on GitHub   Request reviews, set labels to indicate the impact components of the codes   You may use comments to appoint reviwers and set labels. Use ‘/cc’ and @ to appoint reviwers, use ‘/area’ to indicate the impact components of the codes.  ​\tAvailable labels are listed under issues——Labels, any label prefixed with area can be used for ‘/area’ command.\n If the codes need to be merged into release branch, you should create new cherry-pick PRs to the target release branch.  # Donwload github command line tool: https://github.com/github/hub # For OSX, please execute: brew install hub # For Debian, please execute: sudo apt install hub # For other OS, please install binaries: https://github.com/github/hub/releases # Setup username of github $ export GITHUB_USER=\u003cyour_username\u003e # Use the following scripts to cherry-pick PR to release branch # For exmaple, to cherry-pick the PR with ID #8 to release/2.8.0 $ ./scripts/cherry_pick_pull.sh upstream/release/2.8.0 8 # the cherry pick may have conflicts, please open a new terminal to resolve the conflicts, then input 'Y' to continue the cherry-pick process $ git add xxx # resolve conflicts $ git am --continue # go back to the terminal of cherry-pick, and input 'Y' to continue the cherry-pick process Go to the Pull Requests of upstream PR, you will find the cherry-pick PR，the title of the chery-pick PR should look like: Automated cherry pick of #8: ..., then procedure the reviwer process and merge the PR to the release branch.\nattention Git commit should follow Git Commit Convention。  ","excerpt":"Fork Repository Visit https://github.com/yunionio/cloudpods , fork it. …","ref":"/en/docs/contribute/contrib/","title":"Code contribution"},{"body":"","excerpt":"","ref":"/en/docs/contribute/","title":"Development"},{"body":"宿主机列表 内置私有云虚拟机列表 新建内置私有云虚拟机 ","excerpt":"宿主机列表 内置私有云虚拟机列表 新建内置私有云虚拟机 ","ref":"/zh/docs/screenshots/kvm/","title":"内置私有云"},{"body":"可用区代表区域内的数据中心名称。\n可用区来源\n 本地IDC：在部署云管平台过程中会设置本地IDC的区域和可用区信息，部署完成后只支持添加可用区。 私有云：同步已连接私有云账号上的区域和可用区信息。  新建可用区 该功能用于在指定区域中创建可用区。\n 在可用区页面，单击列表上方 “新建” 按钮，弹出新建可用区对话框。 设置名称、区域以及位置，单击 “确定” 按钮。  删除可用区 该功能用于删除可用区，当可用区下存在宿主机或物理机时不可删除。\n单个删除\n 在可用区页面，单击可用区右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在可用区列表中选择一个或多个可用区，单击 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  查看可用区详情 该功能用于查看可用区的详细信息。\n 在可用区页面，单击可用区名称项，进入可用区详情页面。 查看以下信息。  基本信息：包括云上ID、ID、名称、状态、域、项目、区域、物理机（数量）、可用物理机、宿主机（数量）、可用宿主机、存储（数量）、二层网络（数量）、IP子网（数量）、创建时间、更新时间、备注。 其他信息：包括位置。    查看宿主机信息 该功能用于查看可用区下的宿主机信息。\n 在可用区详情页面，单击“宿主机”页签，进入宿主机页面。 查看宿主机信息，包括名称、启用、状态、服务、IP、平台、区域信息。  查看资源统计信息 该功能用于查看可用区下的资源统计信息。\n 在可用区详情页面，单击“资源统计”页签，进入资源统计页面。 以环形图的形式表示可用区中CPU分配率（已分配CPU/CPU总量）、内存分配率（已分配内存/内存总量）、磁盘分配率（已分配磁盘/磁盘总量）、私有IP分配率（已分配私有IP/私有IP总量）、宿主机启用与未启用数量与总数、处于不同状态（运行、关机、回收站以及其他状态）的虚拟主机数量与总数量、透传设备(GPU)使用和未使用数量与总数。  查看操作日志 该功能用于查看可用区相关操作的日志信息。\n 在可用区详情页面，单击“操作日志”页签，进入操作日志页面。  加载更多日志：在操作日志页面，列表默认显示20条操作日志信息，如需查看更多操作日志，请单击 “加载更多” 按钮，获取更多日志信息。 查看日志详情：单击操作日志右侧操作列 “查看” 按钮，查看日志的详情信息。支持复制详情内容。 查看指定时间段的日志：如需查看某个时间段的操作日志，在列表右上方的开始日期和结束日期中设置具体的日期，查询指定时间段的日志信息。 导出日志：目前仅支持导出本页显示的日志。单击右上角图标，在弹出的导出数据对话框中，设置导出数据列，单击 “确定” 按钮，导出日志。    ","excerpt":"可用区代表区域内的数据中心名称。\n可用区来源\n 本地IDC：在部署云管平台过程中会设置本地IDC的区域和可用区信息，部署完成后只支持添加可用 …","ref":"/zh/docs/onpremise/network/tutorial/area/zone/","title":"可用区"},{"body":"入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “存储/块存储/块存储” 菜单项，进入块存储页面。\n","excerpt":"入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “存储/块存储/块存储” 菜单项，进入块存储页面。\n","ref":"/zh/docs/onpremise/storage/tutorial/storage/","title":"块存储"},{"body":"目前平台支持通过两个入口创建裸金属。\n 在物理机页面安装操作系统即可基于当前物理机创建裸金属。 在裸金属页面新建裸金属，并通过规格筛选出对应的物理机新建裸金属。  Web界面操作 安装操作系统 该功能用于基于当前物理机新建裸金属。\n 单击物理机右侧操作列 “更多” 按钮，选择下拉菜单 “安装操作系统” 菜单项，进入新建裸金属页面。 设置以下参数：   名称：裸金属名称。\n  主机数量与规格：由于裸金属独占物理机，数量和规格不可改。\n  操作系统：\n 公共镜像：对应系统镜像列表中的Linux操作系统的公共镜像，由管理员维护。 自定义镜像：对应系统镜像列表中的Linux操作系统的自定义镜像，一般是由用户上传。 从ISO启动：对应系统镜像列表中ISO格式的Linux操作系统镜像。选择ISO镜像文件时，需要用户为裸金属服务器安装操作系统。    磁盘配置：单击 “新增磁盘” 按钮，弹出新建磁盘配置对话框。\n  选择物理机上的磁盘类型（HDD:3.6TIB表示物理机上一块磁盘大小为3.6TiB、磁盘类HDD）、设置RAID（包括不做RAID、RAID0、RAID1、RAID5、RAID10）\n  设置磁盘数量，即使用几块相同配置的磁盘做RAID配置，如对磁盘做RAID0，磁盘利用率为100%；对2块磁盘做RAID1，磁盘利用率为50%；对3块及以上磁盘做RAID5，磁盘利用率为(n-1)/n；对4块及以上磁盘做RAID10，磁盘利用率为50%。\n RAID0和不做RAID对磁盘数量无要求； RAID1要求至少有2块相同的磁盘； RAID5要求至少有3块相同的磁盘； RAID10要求至少有4块相同的磁盘；    磁盘RAID配置完成后，显示磁盘分区名称和大小信息，支持在界面修改分区，可分别单击“系统分区”黄色区域修改分区设置、单击“待分区”区域设置分区。分区参数如下：\n 挂载点：设置分区挂载点，系统分区挂载点默认为“/”。 分区格式：包括ext4、xfs、ntfs、swap分区。 分区大小：包括最大容量和手动输入两种，最大容量使用磁盘所有空间，手动输入可以手动设置分区大小，单位为GB。      网络：设置裸金属的IP地址。当环境中有两张与网线连接的网卡需要做绑定设置时，可勾选\"启用bonding\" 说明 当物理机有两张连接网线的网卡时，将会自动绑定，当物理机有大于两张连接网线的网卡时，网卡绑定结果不可控，请谨慎操作。   指定IP子网：选择IP子网，如需指定静态IP，可单击 “手动配置IP” 按钮，设置IP地址，单击 “确定” 按钮。 指定调度标签：设置调度标签以及调度标签偏好。设置的调度标签偏好将会覆盖调度标签上的默认策略。根据调度标签及调度偏好选择最优的IP子网。  尽量使用（prefer）：调度时优先使用拥有这种标签的IP子网。 避免使用（avoid）：调度时尽量避免拥有这种标签的IP子网。 禁止使用（exclude）：调度时排除拥有这种标签的IP子网。 必须使用（require）：调度时必须使用拥有这种标签的IP子网。      管理员密码：设置管理员密码，在Linux系统中为root用户的密码，在Windows操作系统中为administrator用户的密码。\n 随机生成：随机生成管理员密码，用户可在虚拟机列表密码列查看复制管理员密码。 关联密钥：仅支持Linux操作系统的虚拟机。在关联密钥之前请先在“网络-密钥”页面新建SSH密钥。关联密钥后，用户需要使用SSH密钥对登录虚拟机。 保留镜像设置：管理员密码为镜像中已有的管理员密码。 手工输入：可手动设置管理员密码。    备注：设置裸金属的备注信息。\n   单击 “新建” 按钮，创建裸金属。  新建裸金属 该功能用于新建裸金属服务器。\n 在裸金属页面，单击列表上方 “新建” 按钮，进入新建裸金属页面。 设置以下参数：   指定项目：设置裸金属服务器的所属项目。\n  区域：选择区域和可用区。\n  名称：裸金属服务器名称，当创建多个裸金属服务器时，除第一台服务器名称外，其他服务器名称都以名称-1~N表示，虚拟机和裸金属公用名称空间。\n  主机数量：设置创建的裸金属数量。\n  操作系统：裸金属只支持Linux操作系统的镜像。\n 公共镜像：对应系统镜像列表中的Linux操作系统的公共镜像，由管理员维护。 自定义镜像：对应系统镜像列表中的Linux操作系统的自定义镜像，一般是由用户上传。 从ISO启动：对应系统镜像列表中ISO格式的Linux操作系统镜像。选择ISO镜像文件时，需要用户为裸金属服务器安装操作系统。    规格：列表中显示所有可选规格。（即列出所有启用状态的物理机规格信息）\n  磁盘配置：单击 “新增磁盘” 按钮，弹出新建磁盘配置对话框，配置相关参数，单击 “确定” 按钮。\n  选择物理机上的磁盘类型（HDD:3.6TIB表示物理机上一块磁盘大小为3.6TiB、磁盘类HDD）、设置RAID（包括不做RAID、RAID0、RAID1、RAID5、RAID10）\n  设置磁盘数量，即使用几块相同配置的磁盘做RAID配置，如对磁盘做RAID0，磁盘利用率为100%；对2块磁盘做RAID1，磁盘利用率为50%；对3块及以上磁盘做RAID5，磁盘利用率为(n-1)/n；对4块及以上磁盘做RAID10，磁盘利用率为50%。\n RAID0和不做RAID对磁盘数量无要求； RAID1要求至少有2块相同的磁盘； RAID5要求至少有3块相同的磁盘； RAID10要求至少有4块相同的磁盘；    配置完成后，显示磁盘分区名称和大小信息，支持在界面修改分区，可分别单击“系统”绿区域更新分区设置或单击“剩余”灰色区域新建分区。分区参数如下：\n 挂载点：设置分区挂载点，系统分区挂载点默认为“/”。 分区格式：包括ext4、xfs、ntfs、swap分区。 分区大小：包括最大容量和手动输入两种，最大容量使用磁盘所有空间，手动输入可以手动设置分区大小，单位为GB。      管理员密码：设置管理员密码，在Linux系统中为root用户的密码。\n 随机生成：随机生成管理员密码，用户可在裸金属列表密码列查看复制管理员密码。 关联密钥：在关联密钥之前需要先新建密钥。关联密钥后，用户需要使用私钥远程登录裸金属服务器。 保留镜像设置：管理员密码为镜像中已有的管理员密码。 手工输入：可手动设置管理员密码。    高级设置：包括网络和调度策略，可保持默认。\n  网络：设置裸金属的IP地址。当环境中有两张与网线连接的网卡需要做绑定设置时，可勾选\"启用bonding\" 说明 新建裸金属服务器时选择的IP子网与创建裸金属的物理机IP子网相同时，裸金属将会复用物理机的IP地址，不会再分配新的IP地址。   指定IP子网：选择IP子网，如需指定静态IP，可单击 “手动配置IP” 按钮，设置IP地址，单击 “确定” 按钮。 指定调度标签：设置调度标签以及调度标签偏好。设置的调度标签偏好将会覆盖调度标签上的默认策略。根据调度标签及调度偏好选择最优的IP子网。  尽量使用（prefer）：调度时优先使用拥有这种标签的IP子网。 避免使用（avoid）：调度时尽量避免拥有这种标签的IP子网。 禁止使用（exclude）：调度时排除拥有这种标签的IP子网。 必须使用（require）：调度时必须使用拥有这种标签的IP子网。        说明 当物理机有两张连接网线的网卡时，将会自动绑定，当物理机有大于两张连接网线的网卡时，网卡绑定结果不可控，请谨慎操作。    调度策略：通过调度策略选择物理机。\n 指定物理机：直接选择物理机。 指定调度标签：设置调度标签以及调度标签的偏好。设置的调度标签偏好将会覆盖调度标签的默认策略。根据调度标签及调度标签偏好选择对应的物理机。  尽量使用（prefer）：调度时优先使用拥有这种标签的物理机。 避免使用（avoid）：调度时尽量避免拥有这种标签的物理机。 禁止使用（exclude）：调度时排除拥有这种标签的物理机。 必须使用（require）：调度时必须使用拥有这种标签的物理机。      单击 “确定” 按钮，创建裸金属设备。  Climc命令行操作 安装操作系统 climc server-create \\  --hypervisor baremetal \\ # 指定 server 的类型为 baremetal --ncpu 24 \\ # 创建到 24 核 cpu 的物理机 --raid-config 'raid1:2:MegaRaid' \\ # 第1块盘，使用 MegaRaid 控制器上的(0-1)号两块物理盘做 raid1 --raid-config 'none:1' \\ # 第2块盘，使用 MegaRaid 控制器上的(2)号物理盘，不做 raid --raid-config 'raid10:4:MegaRaid' \\ # 第3快盘, 使用 MegaRaid 控制器上的(3-6)号四块物理盘做raid10 --disk CentOS-7.5.qcow2:100g \\ # 系统盘使用 CentOS-7.5.qcow2 镜像作为操作系统，大小为 100g，使用第1块 raid1 的盘 --disk 'autoextend:ext4:/opt' \\ # 分区挂载到 /opt, 使用第1块 raid1 的盘，文件系统为 ext4, 大小为(第一块盘总大小 - 该盘其他分区的大小(100g)) --disk 'autoextend:xfs:/data-nonraid' \\ # 分区挂载到 /data-nonraid, 使用第2块没做 raid 的盘, 文件系统为 xfs，使用所有空间 --disk 'autoextend:ext4:/data-raid10' \\ # 分区挂载到 /data-raid10, 使用第3块 raid10 的盘，文件系统为 ext4, 使用所有空间 \u003cserver_name\u003e \\ # 裸金属服务器名称 64g # 创建到 64g 内存大小的物理机 raid 配置和分区 调用 server-create 接口时通过 ‘–raid-config’ 传递参数来配置 raid，每个 raid-config 对应到操作系统可见的磁盘设备(/dev/sdx)。\n‘–disk’ 参数对应不同磁盘上的分区，分区对应到磁盘的逻辑为: 分区按照顺序创建到第1块磁盘上，当 disk 设置 autoextend 参数后，表示接下来的 disk 分区会创建到下一个磁盘，以此类推。\n raid 配置 API 参数:     Key Type value 解释     type(磁盘类型) string rotate(机械盘), ssd(固态盘), hybrid(未知) -   conf (raid) string none, raid0, raid1, raid5, raid10 做raid几或者不做   count (磁盘数量) int e.g. 0, 2, 4 小于等于物理机实际的盘数   range (磁盘范围) []int e.g. [0,1,2,3], [4,7], [5,6] 物理磁盘在控制器上的索引号   splits (切割物理盘) string (30%,20%,), (300g,100g,) 做好 raid 的物理盘再切割为多块物理盘   adapter (控制器号) int 0, 1 对应driver的 Adapter 控制器   driver (控制器名称) string MegaRaid,HPSARaid,Mpt2SAS,MarvelRaid,Linux,PCIE 1台物理机上有多个控制器时用于选择盘   strip (设置raid strip 大小) *int e.g. 64*1024 设置strip size, 可选   ra *bool  设置读模式   wt   设置写模式   cachedbadbbu *bool     direct *bool        命令行格式:\n‘(none,raid0,raid1,raid5,raid10):%d:(MegaRaid|HPSARaid|Mpt2SAS|MarvelRaid|Linux|PCIE):(rotate|ssd|hybrid):[0-n]:strip%dk:adapter%d:ra:nora:wt:wb:direct:cachedbadbbu:nocachedbadbbu’\n  ","excerpt":"目前平台支持通过两个入口创建裸金属。\n 在物理机页面安装操作系统即可基于当前物理机创建裸金属。 在裸金属页面新建裸金属，并通过规格筛选出对应 …","ref":"/zh/docs/onpremise/baremetal/tutorial/create_server/","title":"安装操作系统/新建裸金属"},{"body":"Fork 仓库 访问 https://github.com/yunionio/cloudpods ，将仓库 fork 到自己的 github 用户下。\nClone 源码 clone 自己 fork 的仓库，并设置 upstream 为源仓库。\n$ git clone https://github.com/\u003cyour_name\u003e/cloudpods $ cd cloudpods $ git remote add upstream https://github.com/yunionio/cloudpods 提交代码流程  从 master checkout 出 feature 或者 bugfix 分支  # checkout 新分支 $ git fetch upstream --tags $ git checkout -b feature/implement-x upstream/master  在新的分支上进行开发 开发完成后，进行提交PR前的准备操作  $ git fetch upstream # 同步远程 upstream master 代码 $ git rebase upstream/master # 有冲突则解决冲突 $ git push origin feature/implement-x # push 分支到自己的 repo  在GitHub的Web界面完成提交PR的流程   提完 PR 后请求相关开发人员 review，并设置Labels来表明提交的代码属于哪一个模块或者哪几个模块   或者通过添加评论的方式来完成上一步；评论 “/cc” 并 @ 相关人员完成设置reviewer，评论/area 并填写label完成设置Labels  ​\t所有Label都可以在issues——Labels下查询到，带area/前缀的Label均可以使用评论\"/area\"的形式添加\n 如果是 bugfix 或者需要合并到之前 release 分支的 feature PR，需要额外使用脚本将此PR cherry-pick 到对应的 release 分支  # 自行下载安装 github 的 cli 工具：https://github.com/github/hub # OSX 使用: brew install hub # Debian: sudo apt install hub # 二进制安装: https://github.com/github/hub/releases # 设置github的用户名 $ export GITHUB_USER=\u003cyour_username\u003e # 使用脚本自动 cherry-pick PR 到 release 分支 # 比如现在有一个提交的PR的编号为18，要把它合并到 release/3.4 $ ./scripts/cherry_pick_pull.sh upstream/release/3.4 18 # cherry pick 可能会出现冲突，冲突时开另外一个 terminal，解决好冲突，再输入 'y' 进行提交 $ git add xxx # 解决完冲突后 $ git am --continue # 回到执行 cherry-pick 脚本的 terminal 输入 'y' 即可 去 upstream 的 PR 页面, 就能看到自动生成的 cherry-pick PR，上面操作的PR的标题前缀就应该为：Automated cherry pick of #18，然后重复 PR review 流程合并到 release\n注意 提交 git 代码后需要书写 commit 内容，规范请参考: Git 提交内容规范。  ","excerpt":"Fork 仓库 访问 https://github.com/yunionio/cloudpods ，将仓库 fork 到自己的 github …","ref":"/zh/docs/development/contrib/","title":"提交贡献代码"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/network/tutorial/","title":"操作指南"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/storage/tutorial/","title":"操作指南"},{"body":"Cloudpods 服务使用 Mariadb，这里使用 keepalived 和 Mariadb 的主主复制功能来实现 DB 的高可用。\n部署 keepalived 的主要作用是为 Mariadb 提供 vip，在2个 Mariadb 实例之间切换，不间断的提供服务。\n部署配置 Mariadb 主主复制 安装并启动 Mariadb\n$ yum install -y mariadb-server $ systemctl enable --now mariadb 运行 Mariadb 安全配置向导，设置密码等\n$ mysql_secure_installation ... ... Change the root password? [Y/n] y New password: Re-enter new password: Password updated successfully! Reloading privilege tables.. ... Success! ... ... Remove anonymous users? [Y/n] y ... Success! ... ... Disallow root login remotely? [Y/n] y ... Success! ... ... Remove test database and access to it? [Y/n] y - Dropping test database... ... Success! - Removing privileges on test database... ... Success! ... ... Reload privilege tables now? [Y/n] y ... Success! ... ... 修改 Mariadb 配置文件，准备配置主主复制\n# 主节点 $ cat \u003c\u003cEOF \u003e /etc/my.cnf [mysqld] datadir=/var/lib/mysql socket=/var/lib/mysql/mysql.sock # Disabling symbolic-links is recommended to prevent assorted security risks symbolic-links=0 # Settings user and group are ignored when systemd is used. # If you need to run mysqld under a different user or group, # customize your systemd unit file for mariadb according to the # instructions in http://fedoraproject.org/wiki/Systemd # skip domain name resolve skip_name_resolve # auto delete binlog older than 30 days expire_logs_days=30 innodb_file_per_table=ON max_connections = 300 max_allowed_packet=20M server-id = 1 auto_increment_offset = 1 auto_increment_increment = 2 log-bin = mysql-bin binlog-format = row log-slave-updates max_binlog_size = 1G replicate-ignore-db = information_schema replicate-ignore-db = performance_schema max_connections = 1000 max_connect_errors = 0 max_allowed_packet = 1G slave-net-timeout=10 master-retry-count=0 slow_query_log = 1 long_query_time = 2 slow_query_log_file = /var/log/mariadb/slow-query.log [mysql] no-auto-rehash [mysqld_safe] log-error=/var/log/mariadb/mariadb.log pid-file=/var/run/mariadb/mariadb.pid # # include all files from the config directory # !includedir /etc/my.cnf.d EOF # 备节点 $ cat \u003c\u003cEOF \u003e /etc/my.cnf [mysqld] datadir=/var/lib/mysql socket=/var/lib/mysql/mysql.sock # Disabling symbolic-links is recommended to prevent assorted security risks symbolic-links=0 # Settings user and group are ignored when systemd is used. # If you need to run mysqld under a different user or group, # customize your systemd unit file for mariadb according to the # instructions in http://fedoraproject.org/wiki/Systemd # skip domain name resolve skip_name_resolve # auto delete binlog older than 30 days expire_logs_days=30 innodb_file_per_table=ON max_connections = 300 max_allowed_packet=20M server-id = 2 auto_increment_offset = 2 auto_increment_increment = 2 log-bin = mysql-bin binlog-format = row log-slave-updates max_binlog_size = 1G replicate-ignore-db = information_schema replicate-ignore-db = performance_schema max_connections = 1000 max_connect_errors = 0 max_allowed_packet = 1G slave-net-timeout=10 master-retry-count=0 slow_query_log = 1 long_query_time = 2 slow_query_log_file = /var/log/mariadb/slow-query.log [mysql] no-auto-rehash [mysqld_safe] log-error=/var/log/mariadb/mariadb.log pid-file=/var/run/mariadb/mariadb.pid # # include all files from the config directory # !includedir /etc/my.cnf.d EOF # 重启服务 $ systemctl restart mariadb 主节点创建只读账号，导出全部数据，导入备节点。记录binlog日志文件名和position。\n# 以下命令在主节点执行 # 此密码为上面设置的 Mariadb root 密码，为了方便，只读账号也使用此密码 $ MYSQL_PASSWD='your-sql-passwd' # 开启 Mariadb 的远程访问 $ mysql -uroot -p$MYSQL_PASSWD -e \"GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '$MYSQL_PASSWD' WITH GRANT OPTION;FLUSH PRIVILEGES\" # 创建只读账号 $ mysql -u root -p$MYSQL_PASSWD -e \"GRANT REPLICATION SLAVE ON *.* TO repl@'%' IDENTIFIED BY '$MYSQL_PASSWD';FLUSH PRIVILEGES\" # \u0008示例是全新安装的 Mariadb ，还没有使用。如果是正在使用的数据库做主主复制，需要锁表后再导出数据 $ mysql -uroot -p$MYSQL_PASSWD -e \"SHOW PROCESSLIST\" +----+------+-----------+------+---------+------+-------+------------------+----------+ | Id | User | Host | db | Command | Time | State | Info | Progress | +----+------+-----------+------+---------+------+-------+------------------+----------+ | 4 | root | localhost | NULL | Query | 0 | NULL | SHOW PROCESSLIST | 0.000 | +----+------+-----------+------+---------+------+-------+------------------+----------+ # 记录binlog日志文件名和position $ mysql -u root -p$MYSQL_PASSWD -e \"SHOW MASTER STATUS\\G\" *************************** 1. row *************************** File: mysql-bin.000001 Position: 2023 Binlog_Do_DB: Binlog_Ignore_DB: # 导出全部数据 $ mysqldump --all-databases -p$MYSQL_PASSWD \u003e alldb.db # 拷贝 alldb.db 到备节点 $ scp alldb.db db2:/root/ # 以下命令在备节点执行 # 此密码为上面设置的 Mariadb root 密码 $ MYSQL_PASSWD='your-sql-passwd' # 导入主节点导出的数据 mysql -u root -p$MYSQL_PASSWD \u003c alldb.db # 重载权限 mysql -u root -p$MYSQL_PASSWD -e \"FLUSH PRIVILEGES\" # 记录binlog日志文件名和position mysql -u root -p$MYSQL_PASSWD -e \"SHOW MASTER STATUS\\G\" *************************** 1. row *************************** File: mysql-bin.000001 Position: 509778 Binlog_Do_DB: Binlog_Ignore_DB: 设置主主复制\n# 以下命令在主节点执行 # 修改MASTER_HOST为备节点IP，修改MASTER_LOG_FILE和MASTER_LOG_POS为上面备节点记录的信息 mysql -u root -p$MYSQL_PASSWD -e \"CHANGE MASTER TO MASTER_HOST='192.168.199.99',MASTER_USER='repl',MASTER_PASSWORD='$MYSQL_PASSWD',MASTER_PORT=3306,MASTER_LOG_FILE='mysql-bin.000001',MASTER_LOG_POS=509778,MASTER_CONNECT_RETRY=2;START SLAVE\" # 以下命令在备节点执行 # 修改MASTER_HOST为主节点IP，修改MASTER_LOG_FILE和MASTER_LOG_POS为上面主节点记录的信息 mysql -u root -p$MYSQL_PASSWD -e \"CHANGE MASTER TO MASTER_HOST='192.168.199.98',MASTER_USER='repl',MASTER_PASSWORD='$MYSQL_PASSWD',MASTER_PORT=3306,MASTER_LOG_FILE='mysql-bin.000001',MASTER_LOG_POS=2023,MASTER_CONNECT_RETRY=2;START SLAVE\" # 主备都执行，验证同步状态，都输出2个 Yes 表示正常 mysql -u root -p$MYSQL_PASSWD -e \"SHOW SLAVE STATUS\\G\" | grep Running Slave_IO_Running: Yes Slave_SQL_Running: Yes 至此，DB 主主复制部署完成，可以测试在任一节点进行数据库操作，另一节点验证。不过对外提供服务还是需要通过 vip，不然发生切换还需要业务端切换 ip，下面配置 keepalived 对外提供服务。\n部署配置 keepalived 设置相关的环境变量，根据不同的环境自行配置。\n# keepalived vip 地址 export DB_VIP=192.168.199.97 # keepalived auth toke export DBHA_KA_AUTH=onecloud # keepalived network interface export DB_NETIF=eth0 设置 sysctl 选项\n$ cat \u003c\u003cEOF \u003e\u003e/etc/sysctl.conf net.ipv4.ip_forward = 1 net.ipv4.ip_nonlocal_bind = 1 EOF $ sysctl -p 安装 keepalived nc\n$ yum install -y keepalived nc 添加配置\n# 请确保 virtual_router_id 不会和局域网内的其他 keepalived 集群冲突 $ cat \u003c\u003cEOF \u003e/etc/keepalived/keepalived.conf global_defs { router_id onecloud } vrrp_script chk_mysql { script \"/etc/keepalived/chk_mysql\" interval 1 } vrrp_instance VI_1 { state MASTER interface $DB_NETIF virtual_router_id 99 priority 100 advert_int 1 nopreempt authentication { auth_type PASS auth_pass $DBHA_KA_AUTH } track_script { chk_mysql } virtual_ipaddress { $DB_VIP } } EOF $ cat \u003c\u003cEOF \u003e /etc/keepalived/chk_mysql #!/bin/bash echo | nc 127.0.0.1 3306 \u0026\u003e/dev/null EOF $ chmod +x /etc/keepalived/chk_mysql 启动 keepalived\n$ systemctl enable --now keepalived $ ip addr show $DB_NETIF 2: eth0: \u003cBROADCAST,MULTICAST,UP,LOWER_UP\u003e mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether 00:22:cf:40:1e:29 brd ff:ff:ff:ff:ff:ff inet 192.168.199.99/24 brd 192.168.199.255 scope global dynamic eth0 valid_lft 100651906sec preferred_lft 100651906sec inet 192.168.199.97/32 scope global eth0 valid_lft forever preferred_lft forever inet6 fe80::222:cfff:fe40:1e29/64 scope link valid_lft forever preferred_lft forever 至此，DB 高可用部署完成，任一节点的 Mariadb 或 keepalived 服务异常，或者任一节点宕机，都不影响对外服务。\n","excerpt":"Cloudpods 服务使用 Mariadb，这里使用 keepalived 和 Mariadb 的主主复制功能来实现 DB 的高可用。\n部 …","ref":"/zh/docs/setup/db-ha/","title":"部署 DB HA 环境"},{"body":"","excerpt":"","ref":"/zh/docs/auth_security/identity/","title":"认证体系"},{"body":"Web界面操作 开机 该功能用于将处于关机状态的虚拟机开机。批量开机操作支持选择不同平台上“关机”状态的虚拟机。\n单个虚拟机开机\n虚拟机把同步状态按钮归类到实例状态中1. 在虚拟机页面，单击“关机”状态的虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例状态-开机” 菜单项，启动虚拟机。\n批量开机\n 在虚拟机列表中选择一个或多个“关机”状态的虚拟机，单击列表上方 “开机” 按钮，批量启动多个虚拟机。  关机 该功能用于将处于运行中状态的虚拟机关机。批量关机操作支持选择不同平台上“运行中”状态的虚拟机。\n注意 目前仅阿里云、腾讯云按量付费的虚拟机支持关机不收费。\n 关机后，将释放CPU、内存，并停止对CPU、内存的计费，所关联硬盘、镜像、公网带宽(如需计费)依然计费 关机后，实例的 CPU 、内存将不再保留，所以再次启动实例时可能会失败。此时，您可以尝试再次启动，或者换一个时间再次启动 关机后，普通公网 IP 将被释放不可找回，建议您先转换为弹性公网 IP 后再进行关机操作 关机后，弹性公网 IP 将被保留，不会被释放，关机期间也不收取费用 关机期间实例较多操作（如调整配置、重装系统等）可能无法支持，如需操作请开机后进行 部分不支持关机不收费的实例，关机后继续正常收费   单个虚拟机关机\n 在虚拟机页面，单击“运行中”状态的虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例状态-关机” 菜单项，弹出操作确认对话框。 当虚拟机是阿里云或腾讯云平台上按量付费的虚拟机时，可以选择勾选“关机不收费”。 单击 “确定” 按钮，完成操作。  批量关机\n 在虚拟机列表中选择一个或多个“运行中”状态的虚拟机，单击列表上方 “关机” 按钮，弹出操作确认对话框。 当被选择的虚拟机是阿里云或腾讯云平台上按量付费的虚拟机时，可以选择勾选“关机不收费”。 单击 “确定” 按钮，完成操作。  重启 该功能用于将处于运行中状态的虚拟机重启，重启过程中VNC连接会中断。批量重启操作支持选择不同平台上“运行中”状态的虚拟机。\n单个虚拟机重启\n 在虚拟机页面，单击“运行中”状态的虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例状态-重启” 菜单项，弹出操作确认对话框。 选择是否勾选强制重启，单击 “确定” 按钮。  批量重启\n 在虚拟机列表中选择一个或多个“运行中”状态的虚拟机，单击列表上方 “重启” 按钮，弹出操作确认对话框。 选择是否勾选强制重启，单击 “确定” 按钮。  注意 若勾选“强制重启”，虚拟机中未保存数据将会丢失。  重置 该功能用于将运行中状态的虚拟机重启，重启过程中VNC连接不会中断。仅支持Cloudpods平台上的虚拟机。\n 在虚拟机页面，单击“运行中”状态的虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例状态-重置” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  挂起 该功能用于将运行中状态的虚拟机进入休眠状态，挂起状态下虚拟机会保存当前状态，服务将处于暂停状态而不会结束，可通过恢复功能快速恢复状态。\n目前仅VMware虚拟机支持挂起/恢复操作。\n单个虚拟机挂起\n 在虚拟机页面，单击“运行中”状态的虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例状态-挂起” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量挂起\n 在虚拟机列表中选择一个或多个“运行中”状态的虚拟机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “挂起” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  恢复 该功能用于将挂起状态的虚拟机恢复成运行状态。\n目前仅VMware虚拟机支持挂起/恢复操作。\n单个虚拟机恢复\n 在虚拟机页面，单击“挂起”状态的虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例状态-恢复” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量恢复\n 在虚拟机列表中选择一个或多个“运行中”状态的虚拟机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “恢复” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  同步状态 当虚拟机被恶意破坏或经非法暴力操作，导致服务状态异常（如系统死机），需要管理员后台修复，同步虚拟机环境状态，提供系统级服务修复措施。或者在资源超配情况下，同步运行状态。批量同步状态操作支持选择不同平台上的虚拟机。\n单个同步状态\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例状态-同步状态” 菜单项，同步虚拟机状态。  批量同步状态\n 在虚拟机列表中选择一个或多个虚拟机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “同步状态” 菜单项，同步虚拟机状态。  Climc命令行操作 # 开机 $ climc server-start \u003cserver_id\u003e # 关机 $ climc server-stop \u003cserver_id\u003e # 强制关机 $ climc server-stop --is-force \u003cserver_id\u003e # 重启 $ climc server-restart \u003cserver_id\u003e ","excerpt":"Web界面操作 开机 该功能用于将处于关机状态的虚拟机开机。批量开机操作支持选择不同平台上“关机”状态的虚拟机。\n单个虚拟机开机\n虚拟机把同 …","ref":"/zh/docs/onpremise/vminstance/tutorial/lifecycle/","title":"虚拟机生命周期管理"},{"body":"For the purpose of word-processing the code change history, and statistics, we compile the following Git Commit Message Convention to regulate the format of Git Commit Message.\nGit Commit Message Convention Conform to the following format:\n\u003ctype\u003e(\u003cscope\u003e): \u003csubject\u003e \u003cbody\u003e \u003cfooter\u003e The message is composed of three parts (part is separated by an empty line):\n Title: required, describing the type of modification and a concise summary of changes Content: optional, describing in details why the modification is need, how to change, the basic outline of codes, how to make the change take effect, etc. Notes: optional, some additional notes  The descriptions of tokens of each part are explained as following:\n  type(type of PR:\n feat: new feature fix: bug fix refactor: recode, refactoring of codes test: test cases chore: modifications of helping scripts, such as Makefile, Dockerfile, etc.    scope(components of impact): such as region, scheduler, cloudcommon, etc.，use comma ‘,’ as separator if impacting multiple components, e.g. (region,scheduler,monitor)\n  subject(concise summary of commit): no more than 50 characters\n  body(detailed description of commit, optional): can be multiple lines, each line contains no more than 72 characters\n  footer(some notes, optional): some notes, e.g. references, breaking change, upgrading suggestions or url of related tasks or issue\n  Commit Examples  fix(region): compute NextSyncTime for snapshotpolicydisk 1. If calculated NextSyncTime equals to base, increase base by 1 hour to process recusively. 2. For snapshotpolicies with effective retentionday, e.g. a snapshotpolicy takes effect on every Monday and the snapshots are kept for 3 days automatically, synchronization will be performed on every Month (for snapshoting) and Thursday (for release snapshots).  feat(scheduler): add cpu filter Added new cpu filter to scheduler: - filter host by cpu model - set host capability by request cpu count  fix(apigateway,monitor,influxdb): disable influxdb service query proxy  feat(climc): support disable wrap line Usage: export OS_TRY_TERM_WIDTH=false climc server-list Closes #6710  References   https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit#heading=h.fpepsvr2gqby\n  http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html\n  https://blog.csdn.net/noaman_wgs/article/details/103429171\n  ","excerpt":"For the purpose of word-processing the code change history, and …","ref":"/en/docs/contribute/git-convention/","title":"Git Commit Message Convention"},{"body":"为了方便代码提交记录的查看，以及以后的统计，我们制定了以下使用 Git 书写提交内容的规范，提交代码的时候请大家遵循以下的格式。\nGit 提交记录书写规范 格式如下:\n\u003ctype\u003e(\u003cscope\u003e): \u003csubject\u003e \u003cbody\u003e \u003cfooter\u003e 通过 git commit 命令填写的提交内容应该类似如上的结构，大致分为３个部分（每个部分使用空行分割）：\n 标题行：必填，描述主要修改类型和概要内容 主题内容：选填，描述为什么修改，做了什么样的修改，以及开发的思路，使用方法等等 页脚备注：选填，一些备注  每个部分的占位符说明如下:\n  type(PR 的类型):\n feat: 新功能 fix: 修复 refactor: 代码重构 test: 测试用例相关修改 chore: 其它修改，比如Makefile,Dockerfile等    scope(影响范围，相关组件): 比如 region, scheduler, cloudcommon，如果是多个组件，用英文 ‘,’ 分割，比如: (region,scheduler,monitor)\n  subject(commit 的概述): 建议不超过 50 个字符\n  body(commit 具体修改内容): 可以分为多行，建议每行不超过 72 个字符\n  footer(一些备注，选填): 一些备注，通常是相关参考连接、BREAKING CHANGE 或修复 bug 的连接\n  Commit 举例  fix(region): compute NextSyncTime for snapshotpolicydisk 1. 如果计算出来的 NextSyncTime 和 base 相等，可以将 base 加1一个小时递归处理。 2. 对于 retentionday 有效的快照策略，比如某一个 snaphsotpolicy 是每周一生效，并且打的快照自动保留 3 天，那么，就应该在每周一（打快照） 和每周四（释放快照）进行快照的同步。  feat(scheduler): add cpu filter Added new cpu filter to scheduler: - filter host by cpu model - set host capability by request cpu count  fix(apigateway,monitor,influxdb): disable influxdb service query proxy  feat(climc): support disable wrap line Usage: export OS_TRY_TERM_WIDTH=false climc server-list Closes #6710  辅助工具 也有相应的工具帮忙生成符合要求的 Commit message，使用 commitizen-go 可以协助生成 Commit message，用法如下:\n# osx 安装 commitizen-go $ brew tap lintingzhen/tap $ brew install commitizen-go # 如果是 linux 环境，可以 clone 源码编译，这个工具是 golang 写的，编译也简单 $ git clone https://github.com/lintingzhen/commitizen-go \u0026\u0026 cd commitizen-go $ make \u0026\u0026 ./commitizen-go install # 这一部会生成 git cz 命令的配置 $ sudo commitizen-go install # 测试提交 $ git add . # 使用 git cz 命令，就会以交互式的方式帮忙输入 commit $ git cz 相关配置参考：https://github.com/lintingzhen/commitizen-go/blob/master/README.MD#configure\n当然工具并不是说强制使用，只是说有工具的帮助，生成的 commit 内容会更统一一点　;)\n当然也有 nodejs 版本的工具，可能更符合前端的使用: https://github.com/commitizen/cz-cli ，前端的同学也可以使用这个工具。\n参考   https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit#heading=h.fpepsvr2gqby\n  http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html\n  https://blog.csdn.net/noaman_wgs/article/details/103429171\n  ","excerpt":"为了方便代码提交记录的查看，以及以后的统计，我们制定了以下使用 Git 书写提交内容的规范，提交代码的时候请大家遵循以下的格式。\nGit 提 …","ref":"/zh/docs/development/git-convention/","title":"Git 提交内容规范"},{"body":"禁用 dhcp 服务 如果你看到了这样的提示：dhcp: dhcp client is enabled before host agent start, please disable it.\n说明你的机器之前启用过dhcp client.\n如何禁用 dhcp client：\n# 一般 centos7 的 dhcp client 都是由 NetworkManager 启动的 $ systemctl disable NetworkManager --now # 我们会检查 /var/run/dhclient-\u003cnic\u003e.pid 下是否有dhclient的pid文件来决定是否要输出 warning # 所以同时你需要清除 /var/run 下的 dhclient-\u003cnic\u003e.pid 文件, nic 需要替换成自己的网卡名，如 eth0 $ rm -f /var/run/dhclient-\u003cnic\u003e.pid 内核模块不匹配 使用我们的平台的 host 服务需要用我们的内核，如果你看到了这样的提示：\nopenvswitch: kernel module openvswitch paramters version not found, is kernel version correct ??\n或者 uname -r 输出结果中字段不包含 yn. 正确的：3.10.0-514.26.2.el7.yn20180608.x86_64\n说明你的机器使用的不是我们的内核， 需要安装我们的内核然后重启。\n如何安装我们的内核可以参考安装部署流程\n","excerpt":"禁用 dhcp 服务 如果你看到了这样的提示：dhcp: dhcp client is enabled before host agent …","ref":"/zh/docs/onpremise/host/faq/host-service/","title":"Host服务启动失败或有warning如何处理"},{"body":"前提 注意 本章内容是方便快速体验Cloudpods, 通过 MiniKube 快速搭建Cloudpods服务，无法在生产环境使用，也无法验证云联内置私有云相关功能(因为内置私有云需要节点上面安装配置 qemu, openvswitch 等各种虚拟化软件)。\n仅适用于多云管理功能的体验，比如管理 VMware, 公有云(aws, 阿里云, 腾讯云等)或者其它私有云(zstack, openstack 等)。\n如果想部署生产可用的环境请参考: 安装部署 。\n 环境准备 Cloudpods 相关的组件运行在 MiniKube 之上，环境以及相关的软件依赖如下:\n 操作系统: CentOS 7.6 最低配置要求: CPU 4核, 内存 8G, 存储 100G  部署 启动 minikube 集群 下载 minikue/kubectl, 并启动 minikube 集群, 具体请参考： https://kubernetes.io/docs/tasks/tools/install-minikube/\n# 配置 minikube $ minikube config -p onecloud set memory 8192 # 启动 kubernetes 集群, 并且从 aliyun 拉取镜像，这样速度会快一点 $ minikube start -p onecloud --image-repository=registry.aliyuncs.com/google_containers 部署Cloudpods onecloud operator Cloudpods k8s operator地址： https://github.com/yunionio/cloudpods-operator\n# 下载 onecloud-operator 的 yaml 文件 $ wget https://raw.githubusercontent.com/yunionio/onecloud-operator/master/manifests/onecloud-operator.yaml # 部署 onecloud-operator 到集群 $ kubectl apply -f onecloud-operator.yaml # 将 kubernetes node 打上 onecloud.yunion.io/controller=enable 标签 # 如果不打标签，operator 服务就不会把对应的后端服务调度到这个节点 $ kubectl get nodes NAME STATUS ROLES AGE VERSION onecloud Ready master 20m v1.15.9-beta.0 # 加上标签，这个 node 就可以运行 onecloud 相关服务 $ kubectl label nodes onecloud onecloud.yunion.io/controller=enable # 这里需要等待 onecloud-operator 的 pod 状态变为 Running $ kubectl get pods -n onecloud NAME READY STATUS RESTARTS AGE onecloud-operator-7fd65d6489-kwdkr 1/1 Running 0 5m2s 部署Cloudpods服务 # 下载 onecloud cluster 的 yaml 文件 $ wget https://raw.githubusercontent.com/yunionio/onecloud-operator/master/manifests/example-onecloud-cluster.yaml -O onecloud-cluster.yaml # 部署Cloudpods服务 # 将 onecloud-cluster.yaml 部署到 kubernetes 集群 $ kubectl apply -f onecloud-cluster.yaml # 等待 onecloud 相关服务启动，这个过程会拉取各个服务的镜像，配置服务 # 需要等待几分钟让所有服务状态变为 Running # 可以多次使用下面的命令查看 pods 状态 $ kubectl get pods -n onecloud NAME READY STATUS RESTARTS AGE default-ansibleserver-6955fb8d66-gb8w7 1/1 Running 0 8m57s default-apigateway-57f78c9cfb-8xvgw 1/1 Running 0 8m54s default-autoupdate-5f8bf779dd-6drtb 1/1 Running 0 8m41s default-climc-6c49f88df9-s4f5g 1/1 Running 0 8m45s default-cloudevent-6775bf8d66-bppcv 1/1 Running 0 8m39s default-cloudid-7798948bc8-blkxw 1/1 Running 0 8m30s default-cloudnet-55fd8ff98b-2gnm4 1/1 Running 0 8m36s default-devtool-7db6b87cf9-bvxsm 1/1 Running 0 8m32s default-esxi-agent-bb555858c-ft6dz 1/1 Running 0 8m50s default-etcd-dvfcg6jfjp 1/1 Running 0 11m default-glance-86d99c66-7v4lg 1/1 Running 0 9m1s # 这里注意下，如果 host-deployer 一直为 ContainerCreating 的状态，可以先忽略，不影响使用 # 因为是 minikube 部署的，没有注入一些默认的配置，这个问题以后会解决 default-host-deployer-vmkxm 0/1 ContainerCreating 0 8m17s default-influxdb-69dcbdb4c-l4lp9 1/1 Running 0 8m44s default-keystone-78f45cc8db-xstk2 1/1 Running 0 9m48s default-logger-5576dbc7f4-8mdl4 1/1 Running 0 8m35s default-monitor-64d9c65b7b-4wf8t 1/1 Running 0 8m33s default-notify-59cc65d479-hccs8 11/11 Running 0 8m38s default-onecloud-service-operator-584989c746-8ndvf 2/2 Running 0 8m31s default-ovn-north-866c9fbc6f-87wkg 1/1 Running 0 8m49s default-region-5bc599845-nb882 1/1 Running 0 9m36s default-region-dns-hdj5k 1/1 Running 0 8m55s default-s3gateway-69b9c5b56c-hb64l 1/1 Running 0 8m32s default-scheduler-57c66964b7-qh9f2 1/1 Running 0 9m1s default-telegraf-f7rvx 2/2 Running 0 8m27s default-vpcagent-8ff58c47d-5b4j8 1/1 Running 0 8m41s default-web-79df8f97b9-c6lgm 1/1 Running 0 8m52s default-webconsole-79cc5cfb9-xd9tk 1/1 Running 0 8m36s default-yunionconf-5f79b9655f-trmls 1/1 Running 0 8m37s mysql-7d4f67979b-8gl4g 1/1 Running 0 11m onecloud-operator-69bf9fb476-dsw6d 1/1 Running 0 13m 也可打开 kubernetes dashboard 确认相关服务正常启动完成。\n# 启用 kubernetes dashboard $ minikube dashboard -p onecloud 创建账号登录 Web UI  创建账号: 部署完成后，需要使用我们的命令行工具 climc 创建帐号  # 进入 climc 容器 $ kubectl exec -n onecloud `kubectl -n onecloud get pods | grep \"default-climc\"| cut -f1 -d\" \"` -c climc -i -t -- /bin/bash -il # 创建用户 demo , 密码为 demo123A 的管理员 $ /opt/yunion/bin/climc user-create demo --password demo123A --enabled # 将用户 demo 加入 system 项目，并且赋予 admin 权限 $ /opt/yunion/bin/climc project-add-user system demo admin  登陆 web 前端 UI 界面  # 使用 kubectl port-forward 将 web 前端 forward 到本地 9999 端口 $ kubectl -n onecloud port-forward `kubectl -n onecloud get pods | grep \"default-web-\" | cut -f1 -d\" \"` 9999:443 --address=0.0.0.0 打开浏览器：https://localhost:9999\n集群清理 # 删除所有 onecloud 服务 $ kubectl delete -f onecloud-cluster.yaml $ kubectl delete -f onecloud-operator.yaml # stop kubernetes 集群，以后还可以用 minikube start 开启 $ minikube -p onecloud stop # 以下命令删除整个 minikube 创建的 kubernetes 集群 $ minikube -p onecloud delete 待解决的问题  default-host-deployer pod 无法启动，会处于 ContainerCreating 状态，这个是没有用 ocadm 部署集群导致的。未来会想办法支持该服务在 minikube 的集群里面运行，目前启动不了，不影响体验Cloudpods。issue #8910  ","excerpt":"前提 注意 本章内容是方便快速体验Cloudpods, 通过 MiniKube 快速搭建Cloudpods服务，无法在生产环境使用，也无法验 …","ref":"/zh/docs/quickstart/minikube/","title":"MiniKube 安装"},{"body":"该功能用于将Ceph、GPFS、NFS类型的存储关联或取消关联宿主机。\n关联宿主机 该功能用于将Ceph、GPFS、NFS类型的存储关联到宿主机上，供宿主机使用。\n说明 关联宿主机有如下要求：\n Ceph存储关联宿主机时，不需要挂载点，支持批量关联多个宿主机。 NFS存储关联宿主机时，如果多个宿主机挂载点一样，可以批量关联多个宿主机，宿主机上可以不存在挂载点。 GPFS存储关联宿主机时，实际宿主机上已关联了GPFS存储，平台上的关联操作仅为了可以创建虚拟机时可以使用GPFS存储，不影响实际挂载操作。其中GPFS存储关联宿主机时的挂载点必须与实际挂载点一致，需要由用户环境的运维人员提供。    在块存储页面，单击指定块存储右侧操作列 “更多” 按钮，选择下拉菜单 “管理宿主机” 菜单项，进入详情-宿主机页面。 单击列表上方 “关联宿主机” 按钮，弹出关联宿主机对话框。 选择宿主机以及宿主机上的挂载点，单击 “确定” 按钮，为宿主机关联存储。  取消关联宿主机 该功能用于将块存储取消关联到宿主机。\n取消关联\n 在块存储页面，单击指定块存储右侧操作列 “更多” 按钮，选择下拉菜单 “管理宿主机” 菜单项，进入详情-宿主机页面。 单击宿主机右侧操作列 “取消关联宿主机” 按钮，弹出操作确认对话框。 单击**_“确定”_** 按钮，完成操作。  批量取消关联宿主机\n 在块存储页面，单击指定块存储右侧操作列 “更多” 按钮，选择下拉菜单 “管理宿主机” 菜单项，进入详情-宿主机页面。 在列表中选择一个或多个宿主机，单击列表上方 “取消关联宿主机” 按钮，弹出操作确认对话框。 单击**_“确定”_** 按钮，完成操作。  ","excerpt":"该功能用于将Ceph、GPFS、NFS类型的存储关联或取消关联宿主机。\n关联宿主机 该功能用于将Ceph、GPFS、NFS类型的存储关联到宿 …","ref":"/zh/docs/onpremise/storage/tutorial/storage/associate/","title":"关联宿主机"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/host/faq/","title":"常见问题"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/network/faq/","title":"常见问题"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/storage/faq/","title":"常见问题"},{"body":"云平台里面的物理机会分配 2 个 IP 地址，一个分配给 BMC IPMI 的地址，还有一个是物理机 PXE 启动时候的地址。如果物理机安装操作系统，会在平台生成一条裸金属的记录，裸金属记录也会被分配一个 IP 地址。物理机安装操作系统的时候，在默认没有指定 IP 地址的情况下，裸金属分配的 IP 地址会优先复用对应物理机上的 PXE IP 地址。\n通常情况下，这些 IP 地址都由云平台记录和管理，不需要手动去更改。但有时候遇到物理网络的变更，可能会手动更改 IPMI 或者操作系统里面的 IP 地址，手动更改相应的 IP 地址后，就需要更新云平台对应的 IP 地址。\n注意 如果手动更改了物理机上的 IP 地址，但是云平台对应的信息没有同步更新，管理另外的物理机就可能出现 IP 地址冲突。  物理机更改 IP 对于没有安装操作系统的物理机，可以更改 IPMI 和 PXE 的 IP 地址。\n更改 IPMI IP 假设要把名称为 bm1 的物理机 IPMI 地址变为 10.0.2.2\n# 先用 host-list 找到对应的物理机 # 能看到 bm1 的状态 status 字段为 running $ climc host-list --search bm1 +--------------------------------------+------+-------------------+--------------+---------+---------+-------------+----------+-----------+------------+---------------+--------------+-----------+--------------+-----------+--------------+ | ID | Name | Access_mac | Access_ip | Status | enabled | host_status | mem_size | cpu_count | node_count | sn | storage_type | host_type | storage_size | domain_id | public_scope | +--------------------------------------+------+-------------------+--------------+---------+---------+-------------+----------+-----------+------------+---------------+--------------+-----------+--------------+-----------+--------------+ | 610a7133-a2f6-4e52-8b12-2067296863a4 | bm1 | 52:54:00:12:34:56 | 10.168.26.70 | running | true | offline | 4096 | 1 | 1 | Not Specified | hybrid | baremetal | 215040 | default | system | +--------------------------------------+------+-------------------+--------------+---------+---------+-------------+----------+-----------+------------+---------------+--------------+-----------+--------------+-----------+--------------+ # 查看 bm1 上网卡对应的 IP 地址 # 能够看到类型为 ipmi 的网卡 30:4e:05:26:22:43 分配的地址为 10.0.2.3 $ climc host-network-list --host bm1 --details +--------------------------------------+------+--------------------------------------+------------+--------------+-------------------+----------+ | Baremetal_ID | Host | Network_ID | Network | IP_addr | Mac_addr | Nic_Type | +--------------------------------------+------+--------------------------------------+------------+--------------+-------------------+----------+ | 610a7133-a2f6-4e52-8b12-2067296863a4 | bm1 | 14f56d88-0a70-404f-872e-56949bf0e488 | pxe-net | 10.168.26.72 | 52:54:00:12:34:56 | admin | | 610a7133-a2f6-4e52-8b12-2067296863a4 | bm1 | 14f56d88-0a70-404f-872e-56949bf0e488 | ipmi-net | 10.0.2.3 | 30:4e:05:26:22:43 | ipmi | +--------------------------------------+------+--------------------------------------+------------+--------------+-------------------+----------+ # 更新 IPMI 地址为 10.0.2.2 $ climc host-update --ipmi-ip-addr 10.0.2.2 bm1 # 更新完 IPMI 地址后需要调用 IPMI 探测的接口重新刷新一遍信息 $ climc host-ipmi-probe bm1 # 执行 host-ipmi-probe 后，bm1 的状态 status 字段会变为 start_probe # 探测完成后状态会变为 running ，期间可以用 host-list 命令查看 # 等到探测完毕后，再用 host-network-list 命令查看 ipmi 地址 # 发现已经更新为 10.0.2.2 $ climc host-network-list --host bm1 --details | grep ipmi | 610a7133-a2f6-4e52-8b12-2067296863a4 | bm1 | 14f56d88-0a70-404f-872e-56949bf0e488 | ipmi-net | 10.0.2.2 | 30:4e:05:26:22:43 | ipmi | 更改 PXE IP 物理机在安装系统，或者重装系统的时候，会先 PXE 引导进入平台定制的精简 Linux 系统，可以通过以下命令更改 PXE 启动时分配的 IP 地址。\n假设要把名称为 bm1 的 PXE 启动 IP 地址从 10.168.26.72 变为 10.168.26.70 。\n# 先查看物理机 bm1 上网卡已经分配的 IP 地址 $ climc host-network-list --host bm1 --details +--------------------------------------+------+--------------------------------------+------------+--------------+-------------------+----------+ | Baremetal_ID | Host | Network_ID | Network | IP_addr | Mac_addr | Nic_Type | +--------------------------------------+------+--------------------------------------+------------+--------------+-------------------+----------+ | 610a7133-a2f6-4e52-8b12-2067296863a4 | bm1 | 14f56d88-0a70-404f-872e-56949bf0e488 | pxe-net | 10.168.26.72 | 52:54:00:12:34:56 | admin | | 610a7133-a2f6-4e52-8b12-2067296863a4 | bm1 | 14f56d88-0a70-404f-872e-56949bf0e488 | ipmi-net | 10.0.2.2 | 30:4e:05:26:22:43 | ipmi | +--------------------------------------+------+--------------------------------------+------------+--------------+-------------------+----------+ # 其中类型为 admin 的网卡表示分配给 PXE 启动的 IP # 对应网卡的 MAC 地址为 52:54:00:12:34:56 # 先把物理机网卡禁用 $ climc host-disable-netif bm1 52:54:00:12:34:56 # 然后重新启用对应网卡，分配指定的 IP 地址 $ climc host-enable-netif --ip 10.168.26.70 bm1 52:54:00:12:34:56 # 再查看 bm1 上的网卡 IP 地址分配情况，发现 admin 类型的网卡已经变为 10.168.26.70 $ climc host-network-list --host bm1 --details +--------------------------------------+------+--------------------------------------+------------+--------------+-------------------+----------+ | Baremetal_ID | Host | Network_ID | Network | IP_addr | Mac_addr | Nic_Type | +--------------------------------------+------+--------------------------------------+------------+--------------+-------------------+----------+ | 610a7133-a2f6-4e52-8b12-2067296863a4 | bm1 | 14f56d88-0a70-404f-872e-56949bf0e488 | pxe-net | 10.168.26.70 | 52:54:00:12:34:56 | admin | | 610a7133-a2f6-4e52-8b12-2067296863a4 | bm1 | 25056dcc-45dr-3wef-8734-9b5694f880e4 | ipmi-net | 10.0.2.2 | 30:4e:05:26:22:43 | ipmi | +--------------------------------------+------+--------------------------------------+------------+--------------+-------------------+----------+ 裸金属更改 IP 地址 物理机安装完操作系统后，在平台有一条对应的裸金属记录，裸金属分配的 IP 地址对应当前磁盘操作系统上的 IP 地址，如果手动修改了操作系统的 IP，需要使用以下的命令行更改对应裸金属的 IP 地址。\n# 先找到物理机 bm1 上对应的裸金属记录 $ climc server-list --scope system --host bm1 # 查看裸金属 bms 上的网卡和 IP 地址对应关系 # 会发现 bms 上的网卡 MAC 地址其实和 bm1 物理机的网卡时一致的 # IP 地址也是优先复用的 $ climc server-network-list --server bms --details +--------------------------------------+-------+--------------------------------------+---------+-------------------+---------------+ | Guest_ID | Guest | Network_ID | Network | Mac_addr | IP_addr | +--------------------------------------+-------+--------------------------------------+---------+-------------------+---------------+ | 398df1ce-1675-42b9-87d0-87634e21f139 | bms | 14f56d88-0a70-404f-872e-56949bf0e488 | pxe-net | 52:54:00:12:34:56 | 10.168.26.72 | +--------------------------------------+-------+--------------------------------------+---------+-------------------+---------------+ # 然后更新裸金属 bms 的 IP 地址，改为 pxe-net 子网里面的 10.168.26.70 地址 $ climc server-change-ipaddr bms 52:54:00:12:34:56 pxe-net:10.168.26.70 ","excerpt":"云平台里面的物理机会分配 2 个 IP 地址，一个分配给 BMC IPMI 的地址，还有一个是物理机 PXE 启动时候的地址。如果物理机安装 …","ref":"/zh/docs/onpremise/baremetal/tutorial/change_ip_address/","title":"更改 IP"},{"body":"物理机列表 纳管物理机 新建裸金属 ","excerpt":"物理机列表 纳管物理机 新建裸金属 ","ref":"/zh/docs/screenshots/baremetal/","title":"纳管物理机"},{"body":"","excerpt":"","ref":"/zh/docs/auth_security/project/","title":"资源和权限体系"},{"body":"","excerpt":"","ref":"/zh/docs/auth_security/quota/","title":"配额体系"},{"body":"Web界面操作 修改属性 该功能用于修改虚拟机的启动介质、引导方式等。批量修改属性操作支持选择不同平台上的虚拟机。\n单个虚拟机修改属性\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例设置-修改属性” 菜单项，弹出修改属性对话框。 修改虚拟机是否启用删除保护，禁用删除保护后，可删除虚拟机。启用删除保护后，无法删除虚拟机。 修改虚拟机的启动介质，选择从硬盘、光驱、网络启动虚拟机。  如挂载ISO后，可选择从光驱启动虚拟机，并进行安装操作系统的操作。 如系统盘已有操作系统，可选择通过硬盘启动虚拟机等。 如设备需要通过网络从远端服务器下载镜像启动，则需要选择通过网络启动虚拟机。   修改虚拟机的引导方式，目前仅Cloudpods平台上虚拟机支持修改，且ARM架构只支持UEFI引导方式。 单击 “确定” 按钮，完成操作。  批量修改属性\n 在虚拟机列表中选择一个或多个虚拟机，单击 “批量操作” 按钮，选择下拉菜单 “修改属性” 菜单项，弹出修改属性对话框。 修改虚拟机的启动介质，选择从硬盘、光驱、网络启动虚拟机。  如挂载ISO后，可选择从光驱启动虚拟机，并进行安装操作系统的操作。 如系统盘已有操作系统，可选择通过硬盘启动虚拟机等。 如设备需要通过网络从远端服务器下载镜像启动，则需要选择通过网络启动虚拟机。   修改虚拟机的引导方式，目前仅Cloudpods平台上虚拟机支持修改，且ARM架构只支持UEFI引导方式。 单击 “确定” 按钮，完成操作。  重装系统 该功能用于为虚拟机更换系统。\n  在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例设置-重装系统” 菜单项，弹出重装系统对话框。\n  选择系统镜像，可分别从公共镜像或自定义镜像中选择同操作系统的镜像。\n  设置管理员密码，在Linux系统中为root用户的密码，在Windows操作系统中为administrator用户的密码。\n 随机生成：随机生成管理员密码，用户可在虚拟机列表密码列查看复制管理员密码。 关联密钥：在关联密钥之前需要先新建密钥。关联密钥后，用户需要使用私钥远程登录虚拟机。 保留镜像设置：管理员密码为镜像中已有的管理员密码。 手工输入：可手动设置管理员密码。    说明 根据虚拟机所在平台不同，设置管理员密码的方式可能为以上方式的其中几种，请以界面为准。  默认勾选“重装系统后自动启动”，可根据需要取消勾选，单击 “确定” 按钮，完成操作。  调整配置 该功能用于修改虚拟机的硬件配置，包括CPU、内存以及硬盘大小等，支持批量操作。\n注意  在Cloudpods平台虚拟机运行状态下CPU和内存大小只允许往上调整； ZStack在虚拟机开机状态下不允许调整CPU和内存大小，只支持增加数据盘。 阿里云的虚拟机在绑定EIP之后不允许调整虚拟机配置。 除阿里云、腾讯云、华为云之外的平台包年包月的虚拟机不支持调整配置。 批量调整配置时，仅允许选择同一个平台上的虚拟机。   单个虚拟机调整配置\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例设置-调整配置” 菜单项，弹出调整配置对话框。 调整虚拟机的CPU核数、内存以及数据盘，也可根据需求添加新磁盘，若虚拟机在\"关机\"状态下可勾选“调整配置后自动启动”，单击 “确定” 按钮。 若开启了工单，则还需要填入申请原因，单击 “提交工单” 按钮，提交调整配置工单，等待审批通过后才会成功调整配置。  批量调整配置\n 在虚拟机列表中选择一个或多个同一个平台的虚拟机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “调整配置” 菜单项，弹出调整配置对话框。 调整虚拟机的CPU核数、内存，若虚拟机在\"关机\"状态下可勾选“调整配置后自动启动”，单击 “确定” 按钮。 若开启了工单，则还需要填入申请原因，单击 “提交工单” 按钮，提交调整配置工单，等待审批通过后才会成功调整配置。  更改项目 项目是资源的拥有者，当虚拟机属于某项目后，项目中的所有成员都有权限使用该虚拟机。可根据具体使用需求更改虚拟机所属的项目。\n单个虚拟机更改项目\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例设置-更改项目” 菜单项，弹出更改项目对话框。 选择域和域下的项目后，单击 “确定” 按钮，完成操作。  批量更改项目\n批量更改项目要求虚拟机属于同一个域。\n 在虚拟机列表中选择一个或多个虚拟机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 选择域和域下的项目后，单击 “确定” 按钮，完成操作。  创建快照 快照是一种数据备份方式，可以在指定时间点对虚拟机的系统盘、数据盘或虚拟机整体创建一个完全可用拷贝，便于虚拟机故障后快速回退到创建快照时的虚拟机状态。\n注意  目前UCloud、天翼云平台暂不支持创建快照操作；VMware平台虚拟机仅支持创建主机快照。私有云平台仅支持本地硬盘创建硬盘快照。Cloudpods平台同时支持创建硬盘快照和主机快照。 状态异常的硬盘不支持创建硬盘快照。 主机快照占的快照配额数等于主机上的硬盘数，即若主机上有2块硬盘，为该主机创建主机快照所站的快照配额为2。    在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例设置-创建快照” 菜单项，弹出新建快照对话框。 选择快照类别。  当选择快照类别为“创建硬盘快照”，选择需要备份的磁盘，设置快照名称，单击 “确定” 按钮，创建硬盘快照。 当选择快照类别为“创建主机快照”，设置快照名称，单击 “确定” 按钮，创建主机快照。    创建相同配置 该功能用于创建相同配置的虚拟机。\n注意  VMware、OpenStack、ZStack、DStack平台上虚拟机不支持该操作。    在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例设置-创建相同配置” 菜单项，弹出创建相同配置对话框。 输入名称，设置数量，单击 “确定” 按钮。如创建多个虚拟机，第1个创建的虚拟机名称为设置的名称，第2~N个创建的虚拟机名称为名称- 1~N-1。  设置磁盘速度 该功能用于限制磁盘的IOPS，其中IOPS是指单位时间内系统能处理的I/O请求数量，I/O请求通常为读或写数据操作请求。仅Cloudpods平台上运行状态的虚拟机支持该操作。\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例设置-设置磁盘速度” 菜单项，弹出设置磁盘速度对话框。 勾选是否限速，若勾选，设置磁盘最大IOPS，单击 “确定” 按钮。  到期释放 到期释放即设置虚拟机的使用时长，当超过设置期限时，虚拟机将会被自动删除，存放到回收站。\n注意  公有云仅按量付费的虚拟机支持到期释放功能。 公有云虚拟机放入回收站后仍然收费，如虚拟机不再使用，请在回收站进行清除。    在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例设置-到期释放” 菜单项，弹出到期释放对话框。 选择是否勾选到期释放，勾选后设置虚拟机的释放时间，单击 “确定” 按钮。  单击释放时间输入框，显示日历等内容，支持直接在释放时间输入框中输入日期和时间，格式为yyyy-mm-dd hh:mm:ss，单击 “确定” 按钮。 在日历框中选择日期，单击 选择时间 按钮，将跳转到设置时间界面，选择时间后，单击 “确定” 按钮。 支持快速选择“1小时”、“2小时”、“3小时”、 “6小时”、 “1天”、“2天”、 “1周”按钮，释放时间将设置为对应时间范围内的时间，单击 “确定” 按钮。   设置完成后，在计费方式列显示虚拟机还有多久时间释放等信息。 若不再需要到期释放功能，可在虚拟机释放之前，在弹出的到期释放对话框中取消勾选到期释放，单击 “确定” 按钮。  主机克隆 该功能用于根据虚拟机的规格信息克隆出与当前虚拟机系统、配置相同的虚拟机。仅Cloudpods平台上的运行和关机状态的虚拟机支持主机克隆功能。\n当前主机克隆实现原理是基于主机快照创建新的虚拟机，主机克隆过程中会产生主机快照，并占用快照配额，需要用户及时删除无用快照，若当前用户项目不存在快照配额，则将无法使用主机克隆功能。\n单个克隆\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例设置-主机克隆” 菜单项，弹出主机克隆对话框。 设置名称、数量、克隆方式。  新主机快照克隆：当选择“新主机快照克隆”时，建议勾选“克隆完成后删除本次克隆生成的主机快照”，减少无用主机快照，释放快照配额等，单击 “确定” 按钮，虚拟机在会创建主机快照并创建与当前虚拟机配置完全相同的虚拟机。 已有主机快照克隆：当选择“已有主机快照克隆”时，需要勾选该虚拟机已创建的主机快照，单击 “确定” 按钮。使用已有的主机快照克隆的虚拟机与创建快照时刻的虚拟机配置和状态相同，与当前虚拟机状态可能不相同。若用户不需要使用已有主机快照，也可以在该页面删除主机快照，增加快照配额。    批量克隆\n 在虚拟机列表中选择两个及以上虚拟机，单击列表上方**_“批量操作”_** 按钮，选择下拉菜单 **_“实例设置-主机克隆”_** 菜单项，弹出主机克隆对话框。 单击 “确定” 按钮，批量克隆虚拟机。  ","excerpt":"Web界面操作 修改属性 该功能用于修改虚拟机的启动介质、引导方式等。批量修改属性操作支持选择不同平台上的虚拟机。\n单个虚拟机修改属性\n 在 …","ref":"/zh/docs/onpremise/vminstance/tutorial/setting/","title":"虚拟机实例设置"},{"body":"环境准备 Cloudpods 相关的组件运行在 kubernetes 之上，环境以及相关的软件依赖如下:\n 操作系统: CentOS 7.6 最低配置要求: CPU 4核, 内存 8G, 存储 150G 数据库: mariadb (CentOS 7自带的版本：Ver 15.1 Distrib 5.5.56-MariaDB） docker: ce-20.10.5 kubernetes: v1.15.8  需要能访问如下网址，如果企业有外网隔离规则，则需要打开相应白名单：\n CentOS YUM网络安装源 https://iso.yunion.cn/ https://registry.cn-beijing.aliyuncs.com https://meta.yunion.cn https://yunionmeta.oss-cn-beijing.aliyuncs.com  安装配置 mariadb mariadb 作为服务数据持久化的数据库，可以部署在其它节点或者使用单独维护的。下面假设还没有部署 mariadb，在控制节点上安装设置 mariadb。\n为了方便运行维护，mariadb推荐打开四个参数设施：\n skip_name_resolve：取消域名解析 expire_logs_days=30：设置binlog的超时时间为30天，超过30天的binglog自动删除 innodb_file_per_table=ON: 设置innodb的每张表都用一个独立文件存储数据，便于后期数据清理 max_connections=300: 设置最大连接数为300 max_allowed_packet=20M: 设置最大数据包大小为20M  $ MYSQL_PASSWD='your-sql-passwd' # 安装 mariadb $ yum install -y epel-release mariadb-server $ systemctl enable --now mariadb $ mysqladmin -u root password \"$MYSQL_PASSWD\" $ cat \u003c\u003cEOF \u003e/etc/my.cnf [mysqld] datadir=/var/lib/mysql socket=/var/lib/mysql/mysql.sock # Disabling symbolic-links is recommended to prevent assorted security risks symbolic-links=0 # Settings user and group are ignored when systemd is used. # If you need to run mysqld under a different user or group, # customize your systemd unit file for mariadb according to the # instructions in http://fedoraproject.org/wiki/Systemd # skip domain name resolve skip_name_resolve # auto delete binlog older than 30 days expire_logs_days=30 innodb_file_per_table=ON max_connections = 300 max_allowed_packet=20M [mysqld_safe] log-error=/var/log/mariadb/mariadb.log pid-file=/var/run/mariadb/mariadb.pid # # include all files from the config directory # !includedir /etc/my.cnf.d EOF $ mysql -uroot -p$MYSQL_PASSWD \\  -e \"GRANT ALL ON *.* to 'root'@'%' IDENTIFIED BY '$MYSQL_PASSWD' with grant option; FLUSH PRIVILEGES;\" $ systemctl restart mariadb 安装配置 docker 安装 docker\n$ yum install -y yum-utils bash-completion # 添加 yunion Cloudpods rpm 源 $ yum-config-manager --add-repo https://iso.yunion.cn/yumrepo-3.7/yunion.repo $ yum install -y docker-ce docker-ce-cli containerd.io 配置 docker\n$ mkdir -p /etc/docker $ cat \u003c\u003cEOF \u003e/etc/docker/daemon.json { \"bridge\": \"none\", \"iptables\": false, \"exec-opts\": [ \"native.cgroupdriver=systemd\" ], \"data-root\": \"/opt/docker\", \"live-restore\": true, \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"100m\" }, \"registry-mirrors\": [ \"https://lje6zxpk.mirror.aliyuncs.com\", \"https://lms7sxqp.mirror.aliyuncs.com\", \"https://registry.docker-cn.com\" ] } EOF 启动 docker\n$ systemctl enable --now docker 安装 Cloudpods 依赖内核 这里需要安装我们编译的内核，这个内核是基于上游 CentOS 3.10.0-1062 编译的，默认添加了 nbd 模块，nbd 模块用于镜像相关的操作。\n# 安装内核 $ yum install -y \\  kernel-3.10.0-1160.6.1.el7.yn20201125 \\  kernel-devel-3.10.0-1160.6.1.el7.yn20201125 \\  kernel-headers-3.10.0-1160.6.1.el7.yn20201125 # 重启系统进入内核 $ reboot # 重启完成后，查看当前节点内核信息 # 确保为 3.10.0-1160.6.1.el7.yn20201125.x86_64 $ uname -r 3.10.0-1160.6.1.el7.yn20201125.x86_64 安装配置 kubelet 从 Cloudpods rpm 的 yum 源安装 kubernetes 1.15.8，并设置 kubelet 开机自启动\n$ yum install -y bridge-utils ipvsadm conntrack-tools \\  jq kubelet-1.15.8-0 kubectl-1.15.8-0 kubeadm-1.15.8-0 $ echo 'source \u003c(kubectl completion bash)' \u003e\u003e ~/.bashrc \u0026\u0026 source ~/.bashrc $ source /etc/profile $ systemctl enable kubelet 安装完 kubernetes 相关的二进制后，还需要对系统做一些配置并启用 ipvs 作为 kube-proxy 内部的 service 负载均衡\n# 禁用 swap $ swapoff -a # 如果设置了自动挂载 swap，需要去 /etc/fstab 里面注释掉挂载 swap 那一行 # 关闭 selinux $ setenforce 0 $ sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config # 禁用 firewalld $ systemctl stop firewalld $ systemctl disable firewalld # 禁用 NetworkManager $ systemctl stop NetworkManager $ systemctl disable NetworkManager $ ps -ef|grep dhcp | awk '{print $2}' |xargs kill -9 # 做一些 sysctl 的配置, kubernetes 要求 $ modprobe br_netfilter $ cat \u003c\u003cEOF \u003e\u003e /etc/sysctl.conf net.bridge.bridge-nf-call-iptables=1 net.bridge.bridge-nf-call-ip6tables=1 net.ipv4.ip_forward=1 EOF $ sysctl -p # 配置并开启 ipvs $ cat \u003c\u003cEOF \u003e /etc/sysconfig/modules/ipvs.modules #!/bin/bash ipvs_modules=\"ip_vs ip_vs_lc ip_vs_wlc ip_vs_rr ip_vs_wrr ip_vs_lblc ip_vs_lblcr ip_vs_dh ip_vs_sh ip_vs_fo ip_vs_nq ip_vs_sed ip_vs_ftp nf_conntrack_ipv4\" for kernel_module in \\${ipvs_modules}; do /sbin/modinfo -F filename \\${kernel_module} \u003e /dev/null 2\u003e\u00261 if [ $? -eq 0 ]; then /sbin/modprobe \\${kernel_module} fi done EOF $ chmod 755 /etc/sysconfig/modules/ipvs.modules \u0026\u0026 bash /etc/sysconfig/modules/ipvs.modules \u0026\u0026 lsmod | grep ip_vs 部署集群 提示  如果要部署高可用集群，请先搭建负载均衡集群，参考 部署 HA 环境。\n  安装部署工具 先安装部署工具 ocadm 和云平台的命令行工具 climc:\n# 安装 climc 云平台命令行工具 和 ocadm 部署工具 $ yum install -y yunion-climc yunion-ocadm # climc 在 /opt/yunion/bin 目录下，根据自己的需要加到 bash 或者 zsh 配置文件里面 $ echo 'export PATH=$PATH:/opt/yunion/bin' \u003e\u003e ~/.bashrc \u0026\u0026 source ~/.bashrc # 安装必要的服务，并启动和设置为开机自启 $ yum install -y yunion-executor \u0026\u0026 systemctl enable --now yunion-executor 部署 kubernetes 集群 接下来会现在当前节点启动 v1.15.8 的 kubernetes 服务，然后部署 Cloudpods 控制节点相关的服务到 kubernetes 集群。\n拉取必要的 docker 镜像\n$ ocadm config images pull 使用 ocadm 部署 kubernetes 集群\n提示  如果要进行高可用部署，并已经搭建好了负载均衡集群，需要在 ocadm init 命令加上 --control-plane-endpoint \u003cvip\u003e:6443 参数，告诉 kubernetes 集群前端的 LoadBalancer vip，之后生成的配置就会都用这个 vip 当做控制节点的入口。\n  # 假设 mariadb 部署在本地，如果是使用已有的数据库，请改变对应的 ip $ MYSQL_HOST=$(ip route get 1 | awk '{print $NF;exit}') # 如果是高可用部署，记得在设置 EXTRA_OPT=' --control-plane-endpoint 10.168.222.18:6443' $ EXTRA_OPT=\"\" $ #EXTRA_OPT=' --control-plane-endpoint 10.168.222.18:6443' # 开始部署 kubernetes 以及 Cloudpods 必要的控制服务，稍等 3 分钟左右，kubernetes 集群会部署完成 $ ocadm init --mysql-host $MYSQL_HOST \\  --mysql-user root --mysql-password $MYSQL_PASSWD $EXTRA_OPT ... Your Kubernetes and control-plane has initialized successfully! ...  提示  kubernetes 高可用部署需要 3 个节点，主要是 etcd 需要至少 3 个节点组成高可用集群。如果是高可用部署，请在另外两个节点执行 ocadm join --control-plane \u003cvip\u003e:6443 部署控制服务，join 的另外两个节点会自动和当前的控制节点组成高可用集群。参考: 加入控制节点\n  kubernetes 集群部署完成后，通过以下命令来确保相关的 pod (容器) 都已经启动, 变成 running 的状态。\n$ mkdir -p $HOME/.kube $ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config $ sudo chown $(id -u):$(id -g) $HOME/.kube/config $ kubectl get pods --all-namespaces NAMESPACE NAME READY STATUS RESTARTS AGE kube-system calico-kube-controllers-648bb4447c-57gjb 1/1 Running 0 5h1m kube-system calico-node-j89jg 1/1 Running 0 5h1m kube-system coredns-69845f69f6-f6wnv 1/1 Running 0 5h1m kube-system coredns-69845f69f6-sct6n 1/1 Running 0 5h1m kube-system etcd-lzx-ocadm-test2 1/1 Running 0 5h kube-system kube-apiserver-lzx-ocadm-test2 1/1 Running 0 5h kube-system kube-controller-manager-lzx-ocadm-test2 1/1 Running 0 5h kube-system kube-proxy-2fwgf 1/1 Running 0 5h1m kube-system kube-scheduler-lzx-ocadm-test2 1/1 Running 0 5h kube-system traefik-ingress-controller-qwkfb 1/1 Running 0 5h1m local-path-storage local-path-provisioner-5978cff7b7-7h8df 1/1 Running 0 5h1m onecloud onecloud-operator-6d4bddb8c4-tkjkh 1/1 Running 0 3h37m 创建 Cloudpods 集群 当 kubernetes 集群部署完成后，就可以通过 ocadm cluster create 创建 Cloudpods 集群，该集群由 onecloud namespace 里面 onecloud-operator deployment 自动部署和维护。\n# 创建集群 # 如果要部署企业版的组件可以在 cluster create 的时候加上 --use-ee 参数 $ ocadm cluster create --wait 执行完 ocadm cluster create --wait 命令后，onecloud-operator 会自动创建各个服务组件对应的 pod，等待一段该命令执行完毕， 就可以通过访问 ‘https://本机IP:443’ 登入前端界面。\n创建登录用户 当控制节点部署完成后，需要创建一个用于前端登录的用户。云平台的管理员认证信息由 ocadm cluster rcadmin 命令可以得到 , 这些认证信息在使用 climc 控制云平台资源时会用到。\n# 获取连接 Cloudpods 集群的环境变量 $ ocadm cluster rcadmin export OS_AUTH_URL=https://10.168.222.218:30357/v3 export OS_USERNAME=sysadmin export OS_PASSWORD=3hV3qAhvxck84srk export OS_PROJECT_NAME=system export YUNION_INSECURE=true export OS_REGION_NAME=region0 export OS_ENDPOINT_TYPE=publicURL  提示  如果是高可用部署，这些 endpoint 的 public url 会是 vip，如果要在 kubernetes 集群外访问需要到 haproxy 节点上添加对应的 frontend 和 backend，其中frontend的端口对应 endpoint 里面的端口，backend 对应 3 个 controlplane node 的 ip 和对应端口。\n  创建用户\n# 初始化连接集群的管理员认证信息 $ source \u003c(ocadm cluster rcadmin) # 设置想要创建的用户名和密码 $ OC_USERNAME=demo $ OC_PASSWORD=demo@123 # 创建指定的用户 $ climc user-create --password $OC_PASSWORD --enabled $OC_USERNAME # 将用户加入 system 项目并赋予 admin 角色 $ climc project-add-user system $OC_USERNAME admin 访问前端 # 获取本机 IP $ ip route get 1 | awk '{print $NF;exit}' 10.168.222.218 # 测试连通性 $ curl -k https://10.168.222.218 用浏览器访问 ‘https://本机IP’ 会跳转到 web 界面，使用 创建登录用户 里面指定的用户名和密码登录后，界面如下:\n删除环境 如果安装过程中失败，或者想清理环境，可执行以下命令删除 kubernetes 集群。\n$ ocadm reset --force 后续 如果没有意外，现在应该已经部署好了 Cloudpods on kubernetes 的集群，以下是一些后续的环节说明，可以根据自己的需要来进行额外的操作。\n添加计算节点 当控制节点搭建完成后，可以参考 计算节点 一节的内容，添加计算节点，组建一套私有云集群。\n控制节点作为计算节点 默认情况下 ocadm init 创建的节点是控制节点，不会运行 onecloud 计算节点的服务。如果需要把控制节点也作为计算节点，需要执行以下步骤:\n 安装计算节点需要的依赖，参考 “计算节点/安装依赖”，这里主要是要安装我们的内核和运行虚拟机的 qemu 等软件。  # 安装rpm包 $ yum --disablerepo='*' --enablerepo='yunion*' install -y \\  epel-release libaio jq libusb lvm2 nc ntp yunion-fetcherfs fuse fuse-devel fuse-libs \\  oniguruma pciutils spice spice-protocol sysstat tcpdump usbredir \\  yunion-qemu-2.12.1 yunion-executor \\  kmod-openvswitch \\  openvswitch net-tools $ systemctl enable --now yunion-executor  在控制节点启用该节点作为计算节点，命令如下:  # 用 kubectl get nodes 拿到当前的节点名称 $ kubectl get nodes NAME STATUS ROLES AGE controller01 Ready master 116d controller02 Ready master 40d node01 Ready \u003cnone\u003e 25d # 假设我要把 controller01 和 controller02 作为计算节点 $ ocadm node enable-host-agent \\  --node controller01 \\  --node controller02 # 等待并查看运行在 controller01/02 上的计算节点服务 $ kubectl get pods -n onecloud -o wide | grep host default-host-7b5cr 2/2 Running 218 18h 192.168.222.4 controller01 default-host-ctx5s 2/2 Running 218 18h 192.168.222.5 controller02 升级组件版本 请参考 升级相关 进行升级。\n","excerpt":"环境准备 Cloudpods 相关的组件运行在 kubernetes 之上，环境以及相关的软件依赖如下:\n 操作系统: CentOS 7.6 …","ref":"/zh/docs/setup/controlplane/","title":"部署集群"},{"body":"云账号列表 新建云账号 公有云虚拟机列表 创建公有云虚拟机 ","excerpt":"云账号列表 新建云账号 公有云虚拟机列表 创建公有云虚拟机 ","ref":"/zh/docs/screenshots/multicloud/","title":"多云纳管"},{"body":"架构简介 Cloudpods 服务组件较多，接下来分别介绍每个组件的功能:\n   服务组件 功能用途     keystone 认证权限管理   region 多云资源控制器   scheduler 资源调度器   glance 虚拟机镜像管理   host 私有云虚拟机管理   baremetal 私有云物理机管理   esxi-agent vmware esxi 实例管理   lb-agent 私有云负载均衡   webconsole 提供 vnc, ssh 访问   logger 记录审计日志   apigateway api 网关，能通过该服务访问后端所有 api   climc 命令行管理工具    组件架构见下图，分为接入层，控制层和资源层三个主要部分。\n接入层 接入层实现云管平台的访问功能，允许用户通过如下3种方式访问云管平台的功能：\n  API访问: 通过REST API访问云管平台功能，用户可以直接通过http接口访问云管平台的REST API，也可以使用云管平台提供的SDK。目前SDK支持Java，Python和Golang等三种语言。\n  命令行访问: 通过云管平台提供的climc命令行工具访问云管平台功能，允许用户通过脚本调用climc，实现一些自动化运维功能。Climc使用Golang语言，基于云管平台的Golang SDK开发。\n  Web控制台访问: 通过Web UI访问云管平台的功能。允许用户通过主流web浏览器访问云管平台。Web控制台提供管理员使用的管理后台以及普通用户使用的普通功能页面，能够提供大部分的管理和使用功能。Web控制台基于Vue 2.0 JavaScript SPA框架实现。\n  控制层   控制层实现云管平台的管理和控制功能。主要由API网关，认证服务，镜像服务，云控制器和调度器，以及 webconsole vnc, ssh 代理服务等组件构成。\n  API网关提供Web控制台对各个服务的统一REST API访问接口。实现Web控制台的登录验证，session 控制，以及对后端各个服务的API调用。API网关由Golang完全自主开发，完全无状态架构，具备水平扩展能力。\n  认证服务提供平台的账户管理和认证体系，并提供基于项目的多租户支持，同时提供服务目录功能。认证服务支持多种认证源，允许和企业的LDAP／AD对接，允许用户以企业统一的账户体系登入系统。认证服务2.10之前版本基于OpenStack Keystone Pika版本，开发语言为Python。在开源版本基础上，我们修正了BUG，并做了若干改进。2.10之后版本采用golang语言开发。Keystone采用无状态架构，支持水平扩展，可以水平拆分实现服务高可用。\n  镜像服务提供云管平台各种主机资源的操作系统镜像的管理功能。提供镜像存储，元数据管理等功能。镜像服务1.x版本基于OpenStack Glance Folsom版本改进而来，开发语言为Python。在开源版本基础上，我们修正了BUG，并做了若干改进。2.x版本采用golang语言开发。Glance采用无状态架构，支持水平扩展，可以水平拆分实现服务高可用。\n  云控制器是整个云管平台的中枢，负责机房网络，宿主机，网络，存储，虚拟机等各类资源的元数据信息管理，以及对虚拟机，裸机等的自动化管理操作认证的调度，协调管理。云控制器内置基于REST API接口的分布式异步任务管理框架，实现对在计算节点进行的开关机，创建删除等耗时操作任务的管理协调工作。云控制器完全自主开发，云控制器采用无状态架构，可以水平扩展，通过水平拆分实现高可用。\n  调度器负责云管平台资源调度功能，是云管平台中资源获取决策的唯一执行者，根据用户对资源的要求，给出资源的最优提供者。调度器支持批量调度，调度性能优异，可扩展性好。调度器完全自主开发，基于Golang语言开发。\n  资源层  资源层实现对KVM虚拟机，裸机，VMWare虚拟机等计算资源的管理和控制功能。云管平台目前主要支持对KVM虚拟机，裸机，VMWare虚拟机，常用私有云openstack, zstack 以及公有云阿里云，Azure，腾讯云，AWS等公有云资源的管理。  ","excerpt":"架构简介 Cloudpods 服务组件较多，接下来分别介绍每个组件的功能:\n   服务组件 功能用途     keystone …","ref":"/zh/docs/development/services/","title":"服务组件介绍"},{"body":"","excerpt":"","ref":"/zh/docs/auth_security/directory/","title":"服务目录"},{"body":"介绍云平台后端服务所用的框架和相关库的使用方法，建议先阅读 “开发相关/服务组件介绍” 了解各个服务大概的功能。\n后端服务框架 keystone, region, glance 等后端服务，都是用的同一套后端服务框架，这个框架是我们自己定义实现的，核心模块如下:\n  REST API: 负责解析客户端发送的 CRUD http 请求，将不同的请求对应到 Model Dispatcher 模块。\n  Model Dispatcher: 将客户端的请求分发到对应资源的业务操作。\n  Model: 定义云平台各种资源，会进行数据库读写相关操作，如果具体业务需要进行耗时操作，会通过 Task 机制来执行耗时任务。\n  Task: 后台处理异步耗时任务的模块，会通过更新 Model 的状态来更新任务的执行结果。\n  Cloudpods 代码结构  build: 打包rpm脚本 cmd: 可执行binary入口程序 pkg: 库  appsrv: 通用http服务框架 cloudcommon: 云平台服务框架，基于appsrv扩展  cloudcommon/options: 通用options cloudcommon/app: 通用服务初始化代码 cloudcommon/db: Model dispatcher和Models的基础实现 cloudcommon/db/lockman: 锁实现 cloudcommon/db/taskman: 异步任务框架      认证部分  客户端向服务发起请求前，需要从keystone获得token 客户端通过携带用户名密码调用keystone的/v3/auth/tokens接口获得token 客户端向服务发起的每次API请求都会在HTTP头携带该token，比如: X-Auth-Token: {token} 后端服务向keystone验证该token，获得用户的身份信息，执行后续API的流程 每个服务都有一个keystone注册的服务用户账号（user/password)，并且以admin角色加入system项目 服务启动后，会向keystone发起认证，获得admin token 用户通过API访问服务时，将在header携带token 使用这个admin token访问keystone的token验证接口，验证这个token，获得用户的身份信息  Model Dispatcher 把 REST API 和 Model 的方法进行一一映射\n   REST 请求 Model 方法 说明     GET /\u003cresources\u003e AllowListItems List的权限判断   - ListItemFilter 过滤   - GetCustomizeColumns 获得扩展字段的信息   GET /\u003cresources\u003e/\u003cres_id\u003e AllowGetDetails Get 的权限判断   - GetExtraDetails 获取扩展字段的信息   GET /\u003cresources\u003e/\u003cres_id\u003e/\u003cspec\u003e AllowGetDetails\u003cSpec\u003e 获取资源特定属性的权限判断   - GetDetails\u003cSpec\u003e 获取资源特定属性   POST /\u003cresources\u003e AllowCreateItem 创建操作的鉴权   - ValidateCreateData 校验和处理创建的数据   - CustomizeCreate 自定义的创建操作   - PostCreate 创建后的hook   - OnCreateComplete 创建完成的hook   POST /\u003cresources\u003e/\u003cres_id\u003e/\u003caction\u003e AllowPerformAction\u003cAction\u003e 某个资源执行特定操作的鉴权判断   - Perform\u003cAction\u003e 某个资源执行特定操作   PUT /\u003cresources\u003e/\u003cres_id\u003e AllowUpdateItem 对指定资源更新操作的鉴权   - ValidateUpdateData 校验和处理更新操作的数据   - PreUpdate 自定义的创建操作   - PostUpdate 创建后的hook   DELETE /\u003cresources\u003e/\u003cres_id\u003e AllowDeleteItem 删除指定资源的鉴权   - CustomizeDelete 自定义的删除操作   - PreDelete 删除前的hook   - Delete 执行删除操作   - PostDelete 删除后的hook    具体 restful 请求的绑定函数在: pkg/appsrv/dispatcher/dispatcher.go 文件中的 AddModelDispatcher 函数。\n数据库 ORM 模型 代码位于 cloudcommon/db\n 接口  IModelManager: 对应资源在数据库里面的表 IModel: 对应资源在数据库里面的单条数据   数据结构  SResourceBase: 基础资源  SStandaloneResourceBase: 基础设施的物理资源，没有具体ownerId的资源，如zone, host  SVirtualResourceBase: 虚拟资源，如虚拟机（guest)  SSharableVirtualResourceBase: 虚拟的可以共享的虚拟资源，如disk, network  SAdminSharableVirtualInfoBase: 管理配置用的可共享虚拟资源，如security group       SJointResourceBase: 联合数据类型，如虚拟网卡是虚拟机和网络的联合，虚拟磁盘挂在：虚拟机和虚拟磁盘的联合      举例 用虚拟机的 model 来举例，代码在: pkg/compute/models/guests.go。\nGuestManager 对应数据库里面的 guests_tbl，该对象嵌套 db.SVirtualResourceBaseManager 表示是虚拟资源的 Manager，这样会默认实现 db.IModelManager 接口，然后根据业务需要重写一些方法会比较方便。\nSGuest 对应 guests_tbl 数据库里面的每一行数据，由 GuestManager 管理，嵌套 db.SVirtualResourceBase 结构，默认就会有虚拟资源所需要的表结构，然后再定义一些虚拟机独有的属性比如 VcpuCount 表示 cpu 核数，VmemSize 表示内存大小。 在代码抽象后表示虚拟机实例，该对象会绑定对虚拟机具体的业务操作实现函数。\nimport \"yunion.io/x/cloudpods/pkg/cloudcommon/db\" ...... type SGuestManager struct { db.SVirtualResourceBaseManager } var GuestManager *SGuestManager func init() { GuestManager = \u0026SGuestManager{ SVirtualResourceBaseManager: db.NewVirtualResourceBaseManager( SGuest{}, \"guests_tbl\", \"server\", \"servers\", ), } GuestManager.SetVirtualObject(GuestManager) GuestManager.SetAlias(\"guest\", \"guests\") } type SGuest struct { db.SVirtualResourceBase db.SExternalizedResourceBase SBillingResourceBase VcpuCount int `nullable:\"false\" default:\"1\" list:\"user\" create:\"optional\"` // Column(TINYINT, nullable=False, default=1) \tVmemSize int `nullable:\"false\" list:\"user\" create:\"required\"` // Column(Integer, nullable=False)  BootOrder string `width:\"8\" charset:\"ascii\" nullable:\"true\" default:\"cdn\" list:\"user\" update:\"user\" create:\"optional\"` // Column(VARCHAR(8, charset='ascii'), nullable=True, default='cdn')  DisableDelete tristate.TriState `nullable:\"false\" default:\"true\" list:\"user\" update:\"user\" create:\"optional\"` // Column(Boolean, nullable=False, default=True) \tShutdownBehavior string `width:\"16\" charset:\"ascii\" default:\"stop\" list:\"user\" update:\"user\" create:\"optional\"` // Column(VARCHAR(16, charset='ascii'), default=SHUTDOWN_STOP)  KeypairId string `width:\"36\" charset:\"ascii\" nullable:\"true\" list:\"user\" create:\"optional\"` // Column(VARCHAR(36, charset='ascii'), nullable=True)  HostId string `width:\"36\" charset:\"ascii\" nullable:\"true\" list:\"admin\" get:\"admin\" index:\"true\"` // Column(VARCHAR(36, charset='ascii'), nullable=True) \tBackupHostId string `width:\"36\" charset:\"ascii\" nullable:\"true\" list:\"user\" get:\"user\"` Vga string `width:\"36\" charset:\"ascii\" nullable:\"true\" list:\"user\" update:\"user\" create:\"optional\"` // Column(VARCHAR(36, charset='ascii'), nullable=True) \tVdi string `width:\"36\" charset:\"ascii\" nullable:\"true\" list:\"user\" update:\"user\" create:\"optional\"` // Column(VARCHAR(36, charset='ascii'), nullable=True) \tMachine string `width:\"36\" charset:\"ascii\" nullable:\"true\" list:\"user\" update:\"user\" create:\"optional\"` // Column(VARCHAR(36, charset='ascii'), nullable=True) \tBios string `width:\"36\" charset:\"ascii\" nullable:\"true\" list:\"user\" update:\"user\" create:\"optional\"` // Column(VARCHAR(36, charset='ascii'), nullable=True) \tOsType string `width:\"36\" charset:\"ascii\" nullable:\"true\" list:\"user\" update:\"user\" create:\"optional\"` // Column(VARCHAR(36, charset='ascii'), nullable=True)  FlavorId string `width:\"36\" charset:\"ascii\" nullable:\"true\" list:\"user\" create:\"optional\"` // Column(VARCHAR(36, charset='ascii'), nullable=True)  SecgrpId string `width:\"36\" charset:\"ascii\" nullable:\"true\" get:\"user\" create:\"optional\"` // Column(VARCHAR(36, charset='ascii'), nullable=True) \tAdminSecgrpId string `width:\"36\" charset:\"ascii\" nullable:\"true\" get:\"admin\"` // Column(VARCHAR(36, charset='ascii'), nullable=True)  Hypervisor string `width:\"16\" charset:\"ascii\" nullable:\"false\" default:\"kvm\" list:\"user\" create:\"required\"` // Column(VARCHAR(16, charset='ascii'), nullable=False, default=HYPERVISOR_DEFAULT)  InstanceType string `width:\"64\" charset:\"ascii\" nullable:\"true\" list:\"user\" create:\"optional\"` } ...... 数据库锁 代码位于 cloudcommon/db/lockman:\n LockClass/ReleaseClass: 锁住一类实例，一般创建资源时候需要锁 LockObject/ReleaseObject: 锁住一个实例，一般修改资源实例是需要锁 LockRawObject/RelaseRawObject: 通用的锁  举例 pkg/cloudcommon/db/db_dispatcher.go 里面的 DoCreate 函数会创建对应 Model 的对象并插入数据到数据库，这个时候就需要加锁。\nfunc DoCreate(manager IModelManager, ctx context.Context, userCred mcclient.TokenCredential, query jsonutils.JSONObject, data jsonutils.JSONObject, ownerId mcclient.IIdentityProvider) (IModel, error) { lockman.LockClass(ctx, manager, GetLockClassKey(manager, ownerId)) defer lockman.ReleaseClass(ctx, manager, GetLockClassKey(manager, ownerId)) return doCreateItem(manager, ctx, userCred, ownerId, nil, data) } worker队列管理 为了避免不可预期的并发度，所有异步执行的代码都应该在worker内执行，以便于管理并发度。\n代码位于 appsrv/workers.go\nworkerman := appsrv.NewWorkerManager(name, parallel_cnt, …) workerman.Run(func() {…}, nil, nil) Task 机制 云平台的异步耗时任务会放在 Task 机制里面去执行，比如创建虚拟机操作，用户提交了请求，region 控制器校验参数合格后，会记录数据到数据库，然后马上返回客户端对应的虚拟机记录，与此同时，会开始执行创建虚拟机的 task，这个 task 会立即在后台执行，会通过更新虚拟机 SGuest model 的状态和记录操作日志来表示执行的成功或失败。\ntask 也是记录在数据库 tasks_tbl 里面的记录，对应的定义在: pkg/cloudcommon/db/taskman/tasks.go 里面，数据结构如下:\ntype STaskManager struct { db.SResourceBaseManager } var TaskManager *STaskManager func init() { TaskManager = \u0026STaskManager{ SResourceBaseManager: db.NewResourceBaseManager(STask{}, \"tasks_tbl\", \"task\", \"tasks\") } TaskManager.SetVirtualObject(TaskManager) } type STask struct { db.SResourceBase Id string `width:\"36\" charset:\"ascii\" primary:\"true\" list:\"user\"` // Column(VARCHAR (36, charset='ascii'), primary_key=True, default=get_uuid) ObjName string `width:\"128\" charset:\"utf8\" nullable:\"false\" list :\"user\"` // Column(VARCHAR(128, charset='utf8'), nullable=False)  ObjId string `width:\"128\" charset:\"ascii\" nullable:\"false\" lis t:\"user\" index:\"true\"` // Column(VARCHAR(ID_LENGTH, charset='ascii'), nullable=False)  TaskName string `width:\"64\" charset:\"ascii\" nullable:\"false\" list :\"user\"` // Column(VARCHAR(64, charset='ascii'), nullable=False)  UserCred mcclient.TokenCredential `width:\"1024\" charset:\"utf8\" nullable:\"false\" get :\"user\"` // Column(VARCHAR(1024, charset='ascii'), nullable=False)  // OwnerCred string `width:\"512\" charset:\"ascii\" nullable:\"true\"` // Column(VARCHAR (512, charset='ascii'), nullable=True) Params *jsonutils.JSONDict `charset:\"utf8\" length:\"medium\" nullable:\"false\" get:\"us er\"` // Column(MEDIUMTEXT(charset='ascii'), nullable=False)  Stage string `width:\"64\" charset:\"ascii\" nullable:\"false\" default:\"on_init\" list:\"u ser\"` // Column(VARCHAR(64, charset='ascii'), nullable=False, default='on_init')  taskObject db.IStandaloneModel `ignore:\"true\"` taskObjects []db.IStandaloneModel `ignore:\"true\"` } ......  Id: STask 里面的 Id 是该 task 记录的 Id ObjId: 对应资源对象的 Id，用于记录执行该 task 的对应操作的资源，比如某台虚拟机、磁盘的 Id UserCred: 存储执行 task 的用户信息 Params: 执行 task 的参数 TaskName: 对应 task 的名称 Stage: task 执行的阶段，默认为 OnInit  举例 以虚拟机关机这个操作来举例:\n 客户端发起 POST /servers/\u003cserver_id\u003e/stop 请求后，通过服务框架会执行 func (self *SGuest) PerformStop 函数，代码片段如下(位于: pkg/compute/models/guest_actions.go):  func (self *SGuest) PerformStop(ctx context.Context, userCred mcclient.TokenCredential, query jsonutils.JSONObject, data jsonutils.JSONObject) (jsonutils.JSONObject, error) { // XXX if is force, force stop guest \tvar isForce = jsonutils.QueryBoolean(data, \"is_force\", false) if isForce || utils.IsInStringArray(self.Status, []string{api.VM_RUNNING, api.VM_STOP_FAILED}) { return nil, self.StartGuestStopTask(ctx, userCred, isForce, \"\") } else { return nil, httperrors.NewInvalidStatusError(\"Cannot stop server in status %s\", self.Status) } }  SGuest 会执行 self.StartGuestStopTask 函数，该函数会去调用虚拟机不同的 Driver 执行关机操作  // pkg/compute/models/guest_actions.go func (self *SGuest) StartGuestStopTask(ctx context.Context, userCred mcclient.TokenCredential, isForce bool, parentTaskId string) error { ...... return self.GetDriver().StartGuestStopTask(self, ctx, userCred, params, parentTaskId) } // pkg/compute/guestdrivers/virtualization.go import \"yunion.io/x/cloudpods/pkg/cloudcommon/db/taskman\" ...... func (self *SVirtualizedGuestDriver) StartGuestStopTask(guest *models.SGuest, ctx context.Context, userCred mcclient.TokenCredential, params *jsonutils.JSONDict, parentTaskId string) error { task, err := taskman.TaskManager.NewTask(ctx, \"GuestStopTask\", guest, userCred, params, parentTaskId, \"\", nil) if err != nil { return err } task.ScheduleRun(nil) return nil } ......   taskman.TaskManager.NewTask(ctx, “GuestStopTask”, …) 这里面的 GuestStopTask 对应 pkg/compute/tasks/guest_stop_task.go 里面的 GuestStopTask，是通过 taskman 里面维护的一个 map 查找的。\n  task.ScheduleRun(nil) 会开始执行对应的 Task，默认会从 task 的默认 Stage OnInit 函数开始执行，所以通过 task 机制就会执行到 GuestStopTask.OnInit 函数。OnInit 函数最终会调用对应虚拟机的 driver 执行 RequestStopOnHost 函数并更新设置自己的 Stage 为 OnMasterStopTaskComplete。\n  对于虚拟机来说 RequestStopOnHost 函数会请求虚拟机所在的 host agent 关闭虚拟机，关机成功后会回调 region task 框架，该框架会根据 taskId 从数据库 load 回来 GuestStopTask，接着它设置的 Stage OnMasterStopTaskComplete 执行。\n  提示  这里失败会自动调用 OnGuestStopTaskCompleteFailed 函数，所以编写对应 task stage 函数时如果写 \u003cOnSometingComplete\u003e 函数时，必须也同时写 \u003cOnSometingCompleteFailed\u003e 函数来处理失败情况。\n   如果成功关机，OnMasterStopTaskComplete 调用 OnGuestStopTaskComplete 函数，该函数会把虚拟机的状态设置为 ready，并记录一条关机操作日志；如果失败会调用 OnGuestStopTaskCompleteFailed 函数，该函数会虚拟机状态设置为关机失败，并记录失败的原因。  func (self *GuestStopTask) OnInit(ctx context.Context, obj db.IStandaloneModel, data jsonutils.JSONObject) { guest := obj.(*models.SGuest) db.OpsLog.LogEvent(guest, db.ACT_STOPPING, nil, self.UserCred) self.stopGuest(ctx, guest) } func (self *GuestStopTask) stopGuest(ctx context.Context, guest *models.SGuest) { host := guest.GetHost() if host == nil { self.OnGuestStopTaskCompleteFailed(ctx, guest, jsonutils.NewString(\"no associated host\")) return } if !self.IsSubtask() { guest.SetStatus(self.UserCred, api.VM_STOPPING, \"\") } self.SetStage(\"OnMasterStopTaskComplete\", nil) err := guest.GetDriver().RequestStopOnHost(ctx, guest, host, self) ...... } func (self *GuestStopTask) OnMasterStopTaskComplete(ctx context.Context, guest *models.SGuest, data jsonutils.JSONObject) { ...... self.OnGuestStopTaskComplete(ctx, guest, data) } func (self *GuestStopTask) OnMasterStopTaskCompleteFailed(ctx context.Context, obj db.IStandaloneModel, reason jsonutils.JSONObject) { guest := obj.(*models.SGuest) self.OnGuestStopTaskCompleteFailed(ctx, guest, reason) } func (self *GuestStopTask) OnGuestStopTaskComplete(ctx context.Context, guest *models.SGuest, data jsonutils.JSONObject) { ...... guest.SetStatus(self.UserCred, api.VM_READY, \"\") ...... logclient.AddActionLogWithStartable(self, guest, logclient.ACT_VM_STOP, \"\", self.Us erCred, true) } func (self *GuestStopTask) OnGuestStopTaskCompleteFailed(ctx context.Context, guest *models.SGuest, reason jsonutils.JSONObject) { ...... db.OpsLog.LogEvent(guest, db.ACT_STOP_FAIL, reason.String(), self.UserCred) self.SetStageFailed(ctx, reason.String()) logclient.AddActionLogWithStartable(self, guest, logclient.ACT_VM_STOP, reason.String(), self.UserCred, false) } 如何增加一个新的服务  在keystone注册一个服务启用用的账户 在keystone注册service和endpoint 参考 cloudpods/pkg/logger实现服务代码 为服务准备一个配置文件，包含以下基础信息  假设服务名为 svc，用户和密码为 svcuser, svcuserpassword，服务监听地址为: http://localhost:8866, region 为 LocalTest，对应操作如下:\n# 创建 service $ climc service-create --enabled svc svc # 创建 endpoint，对应的 service 为 svc $ climc endpoint-create svc LocalTest internal http://localhost:8866 # 创建 user $ climc user-create --password svcuserpassword --enabled svcuser # 把 user 加入 system 项目 $ climc project-add-user system svcuser admin 配置信息如下\nregion:LocalTestport:8866auth_url:https://\u003ckeystone_url\u003e:35357/v3admin_user:svcuseradmin_password:svcuserpasswordadmin_tenant_name:system","excerpt":"介绍云平台后端服务所用的框架和相关库的使用方法，建议先阅读 “开发相关/服务组件介绍” 了解各个服务大概的功能。 …","ref":"/zh/docs/development/framework/","title":"后端服务框架"},{"body":"界面操作 远程终端 该功能支持ssh远程连接到宿主机。连接之后需要使用初始账号列中的用户名和密码进行登录。\n 单击指定宿主机右侧操作列 “远程终端” 按钮，选择下拉菜单 “SSH IP地址” 菜单项，与宿主机建立web SSH连接。 若宿主机上的22端口被其他应用占用，ssh服务端口为其他端口时，可选择下拉菜单 “SSH IP地址:自定义端口” 菜单项，在弹出的对话框框中设置ssh服务实际端口号，单击 “确定” 按钮与宿主机建立web SSH连接。  启用 该功能用于启用\"禁用\"状态的宿主机。启用状态的宿主机用于创建虚拟机。\n单个启用\n 在宿主机页面，单击\"禁用\"状态的宿主机右侧操作列 “更多” 按钮，选择下拉菜单 “启用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，启用宿主机。  批量启用\n 在宿主机列表中勾选一个或多个\"禁用\"状态的宿主机，单击列表上方 “启用” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，启用宿主机。  禁用 该功能用于禁用”启用“状态的宿主机，禁用状态的宿主机不能创建虚拟机。\n单个禁用\n 在宿主机页面，单击”启用“状态的宿主机右侧操作列 “更多” 按钮，选择下拉菜单 “禁用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，禁用宿主机。  批量禁用\n 在宿主机列表中勾选一个或多个\"启用\"状态的宿主机，单击列表上方 “禁用” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，禁用宿主机。  更改域 该功能用于更改宿主机的所属域。服务器安装自研host服务后将自动上报注册到Cloudpods平台。自动上报到Cloudpods平台的宿主机默认都属于default域，用户可通过更改域功能，更改宿主机的所属域。\n说明 更改域的条件：需同时满足\n 当前用户在管理后台。 在Cloudpods已开启三级权限。 宿主机的共享范围为私有。   单个宿主机更改域\n 在宿主机页面，单击宿主机右侧操作列 “更多” 按钮，选择下拉菜单 “更改域” 菜单项，弹出更改域对话框。 选择宿主机所属的域，单击 “确定” 按钮。  批量更改域\n 在宿主机列表中勾选一个或多个宿主机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “更改域” 菜单项，弹出更改域对话框。 选择宿主机所属的域，单击 “确定” 按钮。  设置共享 该功能用于设置宿主机的共享范围。\n域资源的共享范围有三种：\n 不共享（私有）：即域资源只能本域的用户可以使用。 域共享-部分（多域共享）：即域资源可以共享到指定域（一个或多个），只有域资源所在域和共享域下的用户可以使用域资源。 域共享-全部（全局共享）：即域资源可以共享给全部域使用，即系统中所有用户都可以使用域资源。  说明 设置共享的条件：需同时满足\n 当前用户在管理后台。 在Cloudpods已开启三级权限。   单个宿主机设置共享\n 在宿主机页面，单击宿主机右侧操作列 “更多” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数：  当共享范围选择为“不共享”时，即域资源的共享范围为私有，仅本域的用户可以使用。 当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即域资源的共享范围为域共享-部分，只有域资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即域资源的共享范围为域共享-全部，系统中的所有用户都可以使用域资源。     单击 “确定” 按钮，完成操作。  批量设置共享\n 在宿主机列表中选择一个或多个宿主机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数：  当共享范围选择为“不共享”时，即域资源的共享范围为私有，仅本域的用户可以使用。 当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即域资源的共享范围为域共享-部分，只有域资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即域资源的共享范围为域共享-全部，系统中的所有用户都可以使用域资源。     单击 “确定” 按钮，完成操作。  调整调度标签 该功能用于为宿主机绑定调度标签，绑定调度标签的宿主机将按照调度策略调度创建虚拟机。当宿主机需要绑定同一个标签时，推荐使用批量为宿主机调整标签功能，若需要绑定不同标签，需要分别调整单个宿主机的调度标签。\n为单个宿主机调整标签\n 在宿主机页面，单击宿主机右侧操作列 “更多” 按钮，选择下拉菜单 “调整调度标签” 菜单项，弹出调整调度标签对话框。 选择调度标签，单击 “确定” 按钮。  批量为宿主机调整标签\n 在宿主机列表中勾选一个或多个宿主机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “调整调度标签” 菜单项，弹出调整调度标签对话框。 选择调度标签，单击 “确定” 按钮。  调整超售上限 该功能用于设置宿主机CPU和内存的超售比以及系统预留内存，超售即宿主机提供超过自身拥有的CPU或内存资源，宿主机实际可分配资源为实际资源*超售比。一般情况下CPU超售比可以远大于1，内存超售比建议为1。\n单个宿主机调整超售上限\n 在宿主机页面，单击宿主机右侧操作列 “更多” 按钮，选择下拉菜单 “调整超售比” 菜单项，弹出修改属性对话框。 设置以下参数：  CPU超售比上限：设置宿主机CPU的超售比上限，宿主机可分配虚拟机CPU数量 = 宿主机的CPU数量 * 超售比。 内存超售比上限：设置宿主机内存的超售比上限，宿主机可分配虚拟机内存 = （宿主机实际内存 - 系统预留内存 ）* 超售比。 系统内存预留（GB）：设置宿主机的系统预留内存，最低为1GB。宿主机的预留内存将不会用于分配虚拟机使用。   单击 “确定” 按钮。  批量调整超售比\n 在宿主机列表中勾选一个或多个宿主机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “调整超售比” 菜单项，弹出修改属性对话框。 设置以下参数：  CPU超售比上限：设置宿主机CPU的超售比上限，宿主机可分配虚拟机CPU数量 = 宿主机的CPU数量 * 超售比。 内存超售比上限：设置宿主机内存的超售比上限，宿主机可分配虚拟机内存 = （宿主机实际内存 - 系统预留内存 ）* 超售比。 系统内存预留（GB）：设置宿主机的系统预留内存，最低为1GB。宿主机的预留内存将不会用于分配虚拟机使用。   单击 “确定” 按钮。  宕机自动迁移 该功能用于设置Cloudpods平台的宿主机是否启用宕机自动迁移。宿主机启用宕机迁移后，宿主机上使用共享存储创建的虚拟机都可以在宿主机关机或故障时迁移到其他宿主机上。宿主机上使用宿主机本地存储的虚拟机不会迁移。\n 在宿主机页面，单击宿主机右侧操作列 “更多” 按钮，选择下拉菜单 “宕机自动迁移” 菜单项，弹出宕机自动迁移对话框。 选择是否勾选自动迁移，单击 “确定” 按钮，完成操作。  进入维护模式 当宿主机临时下线时需要将宿主机进入维护模式，进入维护模式的宿主机上的虚拟机将自动迁移到其它宿主机上。仅Cloudpods平台宿主机支持。\n说明 宿主机进入维护模式的条件如下：\n 仅Cloudpods平台上的宿主机支持进入维护模式； 在Cloudpods平台上存在空闲的其他宿主机； 宿主机上虚拟机未挂载GPU设备或光盘；若宿主机上虚拟机已挂载GPU设备或光盘，需要保证虚拟机处于关机状态。 宿主机上虚拟机不存在备份机； 宿主机上虚拟机状态为关机、运行中或未知状态任意一种；    单击宿主机右侧操作列 “更多” 按钮，选择下拉菜单 “进入维护模式” 菜单项，弹出进入维护模式操作确认对话框。 单击 “确定” 按钮，宿主机上的虚拟机将迁移到其它宿主机上，宿主机状态为”维护中“，启用状态为禁用。  退出维护模式 当宿主机恢复正常后，可将宿主机退出维护模式。仅Cloudpods平台宿主机支持。\n说明 宿主机进入维护失败时，可通过退出维护模式功能将宿主机的状态调整为运行。   单击“维护模式”的宿主机右侧操作列 “更多” 按钮，选择下拉菜单 “退出维护模式” 菜单项，弹出退出维护模式操作确认对话框。 单击 “确定” 按钮，宿主机状态变为”运行中“，此时宿主机的启用状态为禁用，需要用户手动启用。  设置GPU卡预留资源 该功能用于在宿主机上为GPU卡预留CPU、内存、存储资源。预留的资源不能被分配出去。\n说明  仅带GPU卡的Cloudpods平台的宿主机支持该功能。 当宿主机上有多块GPU卡时，该功能即为每块GPU卡预留相同的资源。 GPU卡预留的资源是宿主机CPU、内存、存储超售后的预留的资源。    单击宿主机右侧操作列 “更多” 按钮，选择下拉菜单 “设置GPU卡预留资源” 菜单项，弹出设置GPU卡预留资源。 设置每个GPU预留资源，分别设置CPU、内存、硬盘大小，单击 “确定” 按钮。  删除 该功能用于删除宿主机。当宿主机上虚拟机数量为0，且处于禁用状态下才可以删除。\n单个删除\n 单击宿主机右侧操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在宿主机列表中勾选一个或多个宿主机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  Climc命令行操作 查询 通过 host-list 查询宿主机列表，host-show 查询宿主机详情。\n# 查询 kvm 这种类型的宿主机 $ climc host-list --hypervisor kvm # 查询被禁用的 kvm 宿主机 $ climc host-list --hypervisor kvm --disabled # 查询启用的 kvm 宿主机 $ climc host-list --hypervisor kvm --enabled 启用 kvm 宿主机上线后，默认是禁用的状态，需要启用才能创建虚拟机。\n# 找到禁用的宿主机 $ climc host-list --disabled # 启用 $ climc host-enable \u003chost_id\u003e 禁用 如果完全不想让宿主机创建虚拟机，可以禁用它。\n$ climc host-disable \u003chost_id\u003e ","excerpt":"界面操作 远程终端 该功能支持ssh远程连接到宿主机。连接之后需要使用初始账号列中的用户名和密码进行登录。\n 单击指定宿主机右侧操作列 “远 …","ref":"/zh/docs/onpremise/host/tutorial/operator/","title":"宿主机操作"},{"body":"新建弹性伸缩组 该功能用于创建弹性伸缩组。\n前提条件\n 请确保已创建了符合需求的主机模板，目前仅支持Cloudpods平台和Azure平台的主机模板。 弹性伸缩组如需绑定负载均衡实例，需要提前在负载均衡实例页面创建符合条件的负载均衡实例，并配置监听和后端服务器组。目前仅Cloudpods平台的弹性伸缩组支持绑定负载均衡实例。  操作步骤\n 在弹性伸缩组列表，单击列表上方 “新建” 按钮，进入新建弹性伸缩组页面。 配置以下参数：  指定项目：仅管理后台视图和域管理后台视图下需要选择，项目视图下指定项目即当前用户所在项目视图。 名称：设置弹性伸缩组的名称。 平台：目前仅支持Cloudpods和Azure平台。 主机模板：主机模板即后续伸缩组中弹性扩容创建虚拟机时使用的模板。不能使用无效状态的主机模板。 网络：选择伸缩组中创建的虚拟机的IP子网。 最大实例数：弹性伸缩组中允许创建的最大实例数，当伸缩策略执行后期望实例数超过最大实例数时，伸缩组将会把期望实例数改成最大实例数，确保伸缩组中的实例不能超过最大实例数。 最小实例数：弹性伸缩组中允许创建的最小实例数，当伸缩策略执行后期望实例数小于最小实例数时，伸缩组将会把期望实例数改成最小实例数，确保伸缩组中的实例不能低于最小实例数。 期望实例数：伸缩组将会按照期望实例数的值来创建或删除虚拟机。使伸缩组中的虚拟机数量维持在期望实例数，无须人工参与。期望实例数必须小于或等于伸缩组的最大实例数，且必须大于伸缩组内的最小实例数。 实例移除策略：当伸缩组收缩时，选择移除虚拟机的策略，包括优先移除最早创建的实例和优先移除最晚创建的实例等。通过伸缩策略移除的虚拟机将会直接删除，不会到回收站。 负载均衡：目前仅Cloudpods平台支持绑定负载均衡实例，当绑定负载均衡实例时，需要选择负载均衡实例、后端服务器组、服务器组端口、以及权重等。 健康检查方式：包括虚拟机健康检查和负载均衡健康检查。  虚拟机健康检查：检查伸缩组中的虚拟机的运行状态，当发现虚拟机不处于运行中状态时，则会将虚拟机移除并删除，并创建新的虚拟机。 负载均衡健康检查：仅绑定负载均衡的伸缩组支持设置该项，通过负载均衡健康检查后端服务器组中的虚拟机是否可以正常转发流量，当无法正常转发流量时，则会将虚拟机移除并删除，并创建新的虚拟机。   检查周期：设置伸缩组进行健康检查的周期。 健康状态检查宽限期：当伸缩组中的虚拟机创建成功后，将不会立即检查虚拟机的健康状态，而是等到宽限期后才会开始进行健康检查。   单击 “确定” 按钮，创建弹性伸缩组。  启用 该功能用于启用\"禁用\"状态的伸缩组。只有伸缩组处于启用状态时，伸缩组中的伸缩策略才会生效。\n单个启用\n 在弹性伸缩组列表，单击\"禁用\"状态的弹性伸缩组右侧操作列 “启用” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，启用弹性伸缩组。  批量启用\n 在弹性伸缩组列表中勾选一个或多个\"禁用\"状态的弹性伸缩组，单击列表上方 “批量操作” 按钮，选择下拉菜单 “启用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，批量启用弹性伸缩组。  禁用 该功能用于禁用\"启用\"状态的伸缩组。禁用状态下的伸缩组中的所有伸缩策略都不生效无法执行，但是仍可创建伸缩策略。\n单个禁用\n 在弹性伸缩组列表，单击\"启用\"状态的弹性伸缩组右侧操作列 “禁用” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，禁用弹性伸缩组。  批量禁用\n 在弹性伸缩组列表中勾选一个或多个\"启用\"状态的弹性伸缩组，单击列表上方 “批量操作” 按钮，选择下拉菜单 “禁用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，批量禁用弹性伸缩组。  删除弹性伸缩组 当弹性伸缩组下没有虚拟机且处于禁用状态时，才可以删除弹性伸缩组。\n删除单个弹性伸缩组\n 在弹性伸缩组列表，单击弹性伸缩组右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除弹性伸缩组\n 在弹性伸缩组列表中勾选一个或多个弹性伸缩组，单击列表上方 “批量操作” 按钮，选择下拉菜单 “删除” 菜单项，弹性操作确认对话框。 单击 “确定” 按钮，完成操作。  查看弹性伸缩组详情 该功能用于查看弹性伸缩组的详细信息。\n 在弹性伸缩组列表，单击伸缩组名称项，进入弹性伸缩组详情页面。 详情页面顶部菜单项支持对弹性伸缩组进行管理操作等。 查看以下信息：  基本信息：包括弹性伸缩组的云上ID、ID、名称、状态、域、项目、启用状态、平台、伸缩策略数、创建时间、更新时间、备注等。 伸缩组信息：包括弹性伸缩组的主机模板、当前实例数、期望实例数、最小实例数、最大实例数、移除策略、VPC、负载均衡、健康检查方式、检查周期、健康状态检查宽限期等。    ","excerpt":"新建弹性伸缩组 该功能用于创建弹性伸缩组。\n前提条件\n 请确保已创建了符合需求的主机模板，目前仅支持Cloudpods平台和Azure平台的 …","ref":"/zh/docs/onpremise/scalinggroup/tutorial/create/","title":"弹性伸缩组管理"},{"body":"部署完集群后，整个 kubernetes 集群只有一个节点，Cloudpods 相关服务都运行在了该节点上，为了服务的高可用，我们可以继续添加节点到 kubernetes 集群。\n环境准备 参考 “部署集群/环境准备” 的流程，安装好 docker 和 kubelet。\n获取加入集群 token 然后在控制节点使用 ocadm 拿到加入集群的 token，在待部署节点使用 ocadm 加入集群，操作如下:\n在控制节点获取加入节点的 token\n$ ocadm token list | grep bootstrap 4s4meb.xvgk2bwpmbospn3s 23h 2019-07-10T15:41:10+08:00 authentication,signing The default bootstrap token generated by 'ocadm init'. system:bootstrappers:kubeadm:default-node-token  提示  如果 token 过期了，可以在管理节点使用 ocadm token create 创建新的 token 。\n  加入节点 加入已有 kubernetes 集群的节点有两种角色，‘controlplane’ 和 ‘node’。\ncontrolplane 角色的节点会运行 kube-apiserver、kube-controller-manager、kube-scheduler 和 etcd，加入 controlplane 节点的好处是让 kubernetes 控制相关服务和 etcd 变为高可用。\nnode 角色的节点只会运行 kubelet，运行负载容器。\n加入 controlplane 加入控制节点需要从已有的 kubernetes 集群下载证书，证书使用 certificate key 加密，通过以下方法获取 certificate-key\n$ ocadm init phase upload-certs [upload-certs] Storing the certificates in Secret \"kubeadm-certs\" in the \"kube-system\" Namespace [upload-certs] Using certificate key: afa5e18bacb3f50b424cbf815fce6d1bd916fe91b58ba467053dc6b460198c55 # 这里的 10.168.222.18 是控制节点的 ip，如果是高可用部署则为负载均衡器的 vip，请根据你的环境修改 $ ocadm join --control-plane 10.168.222.18:6443 \\  --token 4s4meb.xvgk2bwpmbospn3s \\  --certificate-key afa5e18bacb3f50b424cbf815fce6d1bd916fe91b58ba467053dc6b460198c55 \\  --discovery-token-unsafe-skip-ca-verification 加入 node # 这里的 10.168.222.18 是控制节点的 ip，如果是高可用部署则为负载均衡器的 vip, 请根据你的环境修改 $ ocadm join 10.168.222.18:6443 \\  --token 4s4meb.xvgk2bwpmbospn3s \\  --discovery-token-unsafe-skip-ca-verification ... This node has joined the cluster: * Certificate signing request was sent to apiserver and a response was received. * The Kubelet was informed of the new secure connection details. Run 'kubectl get nodes' on the control-plane to see this node join the cluster. ","excerpt":"部署完集群后，整个 kubernetes 集群只有一个节点，Cloudpods 相关服务都运行在了该节点上，为了服务的高可用，我们可以继续添 …","ref":"/zh/docs/setup/components/","title":"添加 K8S 节点"},{"body":"Web界面操作 转换为宿主机 该功能用于将物理机设备转换成宿主机。物理机用于创建裸金属服务器，宿主机用于创建虚拟机。\n准备工作  宿主机即安装了host服务的计算节点，在云管平台上将物理机转换为宿主机时需要使用由我司提供的专门制作的宿主机镜像。 将该镜像上传到管理平台，并记录该镜像的id信息。 在控制节点上通过climc命令设置物理机转换宿主机的默认镜像。  # 设置默认镜像的镜像id $ climc service-config --config convert_hypervisor_default_template=a9b67435-8c08-4063-8ea6-d885ea26aa79 region2 将物理机转换为宿主机时可直接选择磁盘RAID设置参数，进行转换宿主机操作。或通过自定义设置选择宿主机镜像，进行转换宿主机操作。  操作步骤   在物理机页面，单击物理机右侧操作列 “更多” 按钮，选择下拉菜单 “转换为宿主机” 菜单项，弹出转换为宿主机对话框\n  配置以下参数：\n 宿主机名称：宿主机名称默认为物理机名称，可修改。 宿主机类型：目前仅支持KVM宿主机。 磁盘RAID配置：包括默认配置(最高冗余)、RAID-1/RAID-10（两倍冗余）、RAID-5（1.x倍冗余）、RAID-0（无冗余）、自定义配置等。 注意  当物理机只存在一个RAID控制器，且该控制器下存在大于等于4块相同配置的磁盘时，物理机磁盘支持以上所有选项； 当磁盘RAID配置为不是“自定义配置”时，物理机转换成宿主机的镜像为控制节点上region.conf配置文件中设置的镜像，且不支持设置网卡绑定。 当物理机上存储不同大小的磁盘时，只支持自定义配置；    当选择默认配置(最高冗余)、RAID-1/RAID-10（两倍冗余）、RAID-5（1.x倍冗余）、RAID-0（无冗余）时，需要配置网络信息，选择是否启用bonding。  网络：设置宿主机的IP地址。当环境中有两张与网线连接的网卡需要做绑定设置时，可勾选\"启用bonding\" 说明 当物理机有两张连接网线的网卡时，将会自动绑定，当物理机有大于两张连接网线的网卡时，网卡绑定结果不可控，请谨慎操作。   指定IP子网：选择IP子网，如需指定静态IP，可单击 “手动配置IP” 按钮，设置IP地址，单击 “确定” 按钮。 指定调度标签：设置调度标签以及调度标签偏好。设置的调度标签偏好将会覆盖调度标签上的默认策略。根据调度标签及调度偏好选择最优的IP子网。  尽量使用（prefer）：调度时优先使用拥有这种标签的IP子网。 避免使用（avoid）：调度时尽量避免拥有这种标签的IP子网。 禁止使用（exclude）：调度时排除拥有这种标签的IP子网。 必须使用（require）：调度时必须使用拥有这种标签的IP子网。       当选择自定义配置时，需要选择磁盘镜像、在自定义磁盘配置中新增磁盘，选择磁盘以及RIAD配置，设置网络信息，选择是否bonding。   镜像：当选择自定义设置时，需要设置镜像为专用于宿主机的镜像。\n  自定义硬盘配置：单击 “新增磁盘” 按钮，弹出新建磁盘配置对话框。\n  选择物理机上的磁盘类型（HDD:3.6TIB表示物理机上一块磁盘大小为3.6TiB、磁盘类HDD）、设置RAID（包括不做RAID、RAID0、RAID1、RAID5、RAID10）\n  设置磁盘数量，即使用几块相同配置的磁盘做RAID配置，如对磁盘做RAID0，磁盘利用率为100%；对2块磁盘做RAID1，磁盘利用率为50%；对3块及以上磁盘做RAID5，磁盘利用率为(n-1)/n；对4块及以上磁盘做RAID10，磁盘利用率为50%。\n  RAID0和不做RAID对磁盘数量无要求；\n  RAID1要求至少有2块相同的磁盘；\n  RAID5要求至少有3块相同的磁盘；\n  RAID10要求至少有4块相同的磁盘；\n    单击 “确定” 按钮，显示磁盘分区名称和大小信息，支持在界面修改分区，可分别单击“系统分区”黄色区域修改分区设置、单击“待分区”区域设置分区。分区参数如下：\n 挂载点：设置分区挂载点，存储池默认挂载点为“/opt/cloud/workspace”。 分区格式：包括ext4、xfs、ntfs、swap分区。 分区大小：包括最大容量和手动输入两种，最大容量使用磁盘所有空间，手动输入可以手动设置分区大小，单位为GB。      网络：设置宿主机的IP地址。当环境中有两张与网线连接的网卡需要做绑定设置时，可勾选\"启用bonding\" 说明 当物理机有两张连接网线的网卡时，将会自动绑定，当物理机有大于两张连接网线的网卡时，网卡绑定结果不可控，请谨慎操作。   指定IP子网：选择IP子网，如需指定静态IP，可单击 “手动配置IP” 按钮，设置IP地址，单击 “确定” 按钮。 指定调度标签：设置调度标签以及调度标签偏好。设置的调度标签偏好将会覆盖调度标签上的默认策略。根据调度标签及调度偏好选择最优的IP子网。  尽量使用（prefer）：调度时优先使用拥有这种标签的IP子网。 避免使用（avoid）：调度时尽量避免拥有这种标签的IP子网。 禁止使用（exclude）：调度时排除拥有这种标签的IP子网。 必须使用（require）：调度时必须使用拥有这种标签的IP子网。          单击 “确定” 按钮，将物理机转换为宿主机。\n  回收为物理机 该功能用于将宿主机回收成物理机。当宿主机类型为KVM且包含IPMI信息时可转为宿主机。物理机用于创建裸金属服务器，宿主机用于创建虚拟机。\n单个宿主机回收为物理机\n 单击宿主机右侧操作列 “更多” 按钮，选择下拉菜单 “回收为宿主机” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作，可在物理机列表查看到服务器信息。  批量将宿主机回收为物理机\n 在宿主机列表中勾选一个或多个宿主机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “回收为宿主机” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作，可在物理机列表查看到服务器信息。  Climc命令行操作 # 转换为宿主机 climc host-convert-hypervisor # 回收为物理机 climc host-undo-convert \u003chost_id\u003e ","excerpt":"Web界面操作 转换为宿主机 该功能用于将物理机设备转换成宿主机。物理机用于创建裸金属服务器，宿主机用于创建虚拟机。\n准备工作  宿主机即安 …","ref":"/zh/docs/onpremise/baremetal/tutorial/convert/","title":"物理机与宿主机互相转换"},{"body":"调度标签需要和资源绑定后实现资源的调度功能。目前支持两种绑定方式， 静态绑定和动态绑定。 在将调度标签与资源进行绑定之前，需要先设置调度标签的应用范围。\n设置调度标签的应用范围 该功能用于设置调度标签的使用范围。包含调度标签绑定的资源范围，以及新建虚拟机时可选择的调度标签的范围。\n当应用范围为全局时，即全局的资源均可使用该调度标签。 当应用范围为指定域时，即管理后台、指定域管理后台、指定域下的所有项目均可使用该调度标签。 当应用范围为指定项目时，即管理后台、指定项目所属的域管理后台、指定项目均可使用该调度标签。\n 在调度标签页面，单击调度标签操作列 更多 按钮，选择下拉菜单 设置应用范围 菜单项，弹出设置应用范围对话框。 配置以下参数：  当应用范围为全局时，即全局都可使用该调度标签。 当应用范围为域时，需要选择指定域，即管理后台、指定域管理后台、指定域下的所有项目均可使用该调度标签。 当应用范围为项目时，需要选择指定项目，即管理后台、指定项目所属的域管理后台、指定项目均可使用该调度标签。   单击 “确定” 按钮，完成操作。  静态绑定 该功能用于将标签静态绑定到资源，目前仅管理后台支持该操作。将根据调度标签的资源类型选择对应的资源。\n 在调度标签页面，单击调度标签操作列 关联资源 按钮，弹出关联资源对话框。 选择关联的资源，单击 “确定” 按钮，完成操作。  动态绑定 该功能用于设置动态调度标签的条件，为符合动态调度标签条件的宿主机动态绑定调度标签。\n 在动态调度标签页面，单击列表上方 “新建” 按钮，弹出新建动态调度标签对话框。 设置名称、选择调度标签，设置条件。 单击 “确定” 按钮，创建动态调度标签。在调度（创建虚拟机）前为符合条件的宿主机动态绑定调度标签。 支持通过修改功能修改动态绑定的条件等。  ","excerpt":"调度标签需要和资源绑定后实现资源的调度功能。目前支持两种绑定方式， 静态绑定和动态绑定。 在将调度标签与资源进行绑定之前，需要先设置调度标签 …","ref":"/zh/docs/onpremise/scheduler/tutorial/schetagusage/","title":"绑定调度标签"},{"body":"在Cloudpods平台企业版内置镜像市场功能，常见的CentOS、Windows Server、Ubuntu等镜像都可以直接从镜像市场导入。\n镜像市场分为两类镜像，\n 虚拟机：虚拟机包括QCOW2、VMDK、RAW、VHD格式的镜像，该类型镜像开机即可使用，无需安装操作系统，即使用虚拟机类型的镜像创建成功后即可直接使用虚拟机。 ISO：ISO类型的镜像在虚拟机安装完成后，还需要远程登录虚拟机进行安装操作系统。  操作步骤  在系统镜像页面，单击 “镜像市场” 按钮，进入镜像市场页面。 虚拟机：QCOW2、VMDK、RAW、VHD格式的镜像，该类型镜像开机即可使用，无需安装操作系统。  未导入：显示Cloudpods提供的未导入镜像信息，每个镜像包括操作系统、镜像格式、镜像大小、发行版、发行版本、系统架构、文件大小、更新日期等信息。 导入镜像：该功能用于将未导入页面的镜像导入到云管平台，并显示在已导入页面。从镜像广场导入的镜像的类型默认为公共镜像。 已导入：显示所有从镜像市场导入到镜像列表的镜像信息。 取消导入：镜像市场目前不支持取消导入镜像功能，但是用户可以在镜像列表删除从镜像市场导入的镜像，该镜像将从已导入页面切换到未导入页面。   ISO：ISO格式的镜像。该类型镜像在虚拟机安装完成后还需要远程登录虚拟机进行安装操作系统等操作，操作同虚拟机镜像。  ","excerpt":"在Cloudpods平台企业版内置镜像市场功能，常见的CentOS、Windows Server、Ubuntu等镜像都可以直接从镜像市场导 …","ref":"/zh/docs/onpremise/image/tutorial/market/","title":"镜像市场"},{"body":"Web界面操作 重置密码 该功能用于更新虚拟机上的管理员用户的密码，管理员密码在Linux系统下为root用户的密码、Windows操作系统下为administrator用户的密码。\n注意  AWS平台的虚拟机不支持重置密码； OpenStack、ZStack、DStack、Azure、UCloud平台的虚拟机在运行状态下支持重置密码操作； 在Cloudpods、VMware、阿里云、华为云、腾讯云、Google、天翼云平台的虚拟机在关机状态下支持重置密码操作； 绑定密钥的虚拟机无法进行重置密码操作。 通过ISO启动方式创建的Cloudpods平台虚拟机不支持重置密码操作。   单个虚拟机重置密码\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择 “密码密钥-重置密码” 菜单项，弹出重置密码对话框。 设置管理员密码。  随机生成：随机生成管理员密码，用户可在虚拟机列表密码列查看复制管理员密码。 手工输入：可手动设置管理员密码。   默认勾选“重置密码后自动启动”，可根据需要取消勾选，单击 “确定” 按钮，完成操作。  批量重置密码\n批量重置密码选择的虚拟机需要属于同一平台。\n 在虚拟机列表中选择一个或多个同一平台的虚拟机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “密码密钥-重置密码” 菜单项，弹出重置密码对话框。 设置管理员密码。  随机生成：随机生成管理员密码，用户可在虚拟机列表密码列查看复制管理员密码。 手工输入：可手动设置管理员密码。   默认勾选“重置密码后自动启动”，可根据需要取消勾选，单击 “确定” 按钮，完成操作。  注意 若华为云平台的虚拟机重置密码不生效，原因是虚拟机上未安装一键式重置密码插件，请按照安装方法安装插件。用户如需在华为云平台使用自定义镜像时，需要在自定义镜像中安装一键式重置密码插件。  绑定密钥 该功能用于为虚拟机绑定密钥，密钥绑定后用户需要使用私钥登录虚拟机，或通过私钥在云管平台上获取虚拟机密码。在绑定密钥之前请创建密钥。一个虚拟机只支持绑定一个密钥，当绑定密钥后，用户在虚拟机列表的密码列无法直接看到密码信息，需要输入私钥内容获取密码。\n注意  AWS和华为云、天翼云平台的虚拟机不支持绑定密钥。 ZStack、DStack、Azure平台的虚拟机支持在运行状态绑定密钥。 其他平台的虚拟机需要在关机状态下绑定密钥。 通过ISO启动方式创建的Cloudpods平台虚拟机不支持绑定密钥操作。 OpenStack平台仅新建虚拟机时支持绑定密钥，已创建的虚拟机不支持绑定密钥。    在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择 “密码密钥-绑定密钥” 菜单项，弹出绑定密钥对话框。 选择密钥对，默认勾选“绑定密钥后自动启动”，可根据需要取消勾选，单击 “确定” 按钮，绑定密钥的虚拟机需要使用SSH密钥对登录。  解绑密钥 该功能用于将虚拟机与密钥解除绑定。\n注意 OpenStack平台虚拟机解绑密钥后重置密码可能会报错，请手动重置密码。   在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择 “密码密钥-解绑密钥” 菜单项，弹出绑定密钥对话框。 默认勾选“绑定密钥后自动启动”，可根据需要取消勾选，单击 “确定” 按钮，完成操作。  Climc命令行操作 重装密码 $ climc server-deploy --reset-password --password \u003cyour_password\u003e \u003cserver_id\u003e ","excerpt":"Web界面操作 重置密码 该功能用于更新虚拟机上的管理员用户的密码，管理员密码在Linux系统下为root用户的密码、Windows操作系统 …","ref":"/zh/docs/onpremise/vminstance/tutorial/keypair/","title":"虚拟机密码密钥"},{"body":"云平台的资源大概分为 “虚拟资源” 和 “基础设施” 两类，有了基础设施类型的资源才能在其之上构建虚拟化的资源，具体分类如下:\n infra: 表示基础设施类型 virtual: 表示虚拟资源类型，属于具体的项目     名称 抽象资源 作用 类型     cloudregion 云平台地域 标记数据中心所在地域 infra   zone 云平台数据中心 标记数据中心 infra   vpc 逻辑隔离网络空间 抽象虚拟化网络的集合 infra   wire 对应二层扁平网络的广播域 抽象二层扁平网络广播域 infra   storage 存储 标记存储，提供云硬盘能力 infra   host 服务器 标记服务器，提供计算虚拟化 infra   server 云主机 运行在 host 上，使用虚拟化技术提供计算能力 virtual   disk 云硬盘 创建在 storage 上，使用虚拟化技术提供存储能力 virtual   network 网络 创建在 vpc 中，使用虚拟化技术提供网络 virtual   image 镜像 安装了操作系统的虚拟机磁盘，也属于 disk 一类 virtual   eip 外网浮动 ip 对应外网可用 ip virtual   loadbalancer 负载均衡器 标记负载均衡器，提供服务负载均衡 virtual    除了上面介绍的常见资源外，为了做多云管理，我们还引入了以下的概念:\n   名称 资源 作用 类型     cloudaccount 云平台的账户 对应各个云平台的认证信息 infra   project 项目 Cloudpods 内部对虚拟机资源的划分 infra   schedtag 调度标签 可以标记多种资源，提供资源调度能力 infra   sku 套餐信息 对应创建虚拟资源的规格信息 infra    ","excerpt":"云平台的资源大概分为 “虚拟资源” 和 “基础设施” 两类，有了基础设施类型的资源才能在其之上构建虚拟化的资源，具体分类如下: …","ref":"/zh/docs/development/model/","title":"资源模型"},{"body":"后端代码结构 TODO\n前端代码结构 TODO\n","excerpt":"后端代码结构 TODO\n前端代码结构 TODO\n","ref":"/zh/docs/development/codestruct/","title":"代码结构"},{"body":"删除调度标签 该功能用于删除调度标签，已绑定主机、关联动态调度标签以及关联调度策略的调度标签不支持删除。支持单个删除或批量删除。\n单个删除\n 在调度标签页面，单击调度标签指定的操作列 更多 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在调度标签列表中选择一个或多个调度标签，单击页面上方的 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"删除调度标签 该功能用于删除调度标签，已绑定主机、关联动态调度标签以及关联调度策略的调度标签不支持删除。支持单个删除或批量删除。 …","ref":"/zh/docs/onpremise/scheduler/tutorial/deleteschedtag/","title":"删除调度标签"},{"body":"启用 该功能用于启用\"禁用\"状态的块存储，禁用状态的存储无法提供存储服务。\n单个启用\n 在块存储页面，单击\"禁用\"状态的块存储右侧操作列 “启用” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，启用存储。  批量启用\n 在存储列表中勾选一个或多个\"禁用\"状态的存储，单击列表上方 “启用” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，启用存储。  禁用 该功能用于禁用”启用“状态的块存储。\n单个禁用\n 在块存储页面，单击”启用“状态的块存储右侧操作列 “禁用” 按钮，禁用存储。  批量禁用\n 在存储列表中勾选一个或多个”启用“状态的存储，单击列表上方 “禁用” 按钮，禁用存储。  调整超售比 该功能用于设置存储的超售比。超售即存储提供超过自身拥有的容量大小。存储实际可分配资源为实际资源*超售比。\n说明 ZStack平台的存储暂不支持调整超售比。  单块存储调整超售比\n 在块存储页面，单击块存储右侧操作列 “更多” 按钮，选择下拉菜单 “调整超售比” 菜单项，弹出修改属性对话框。 设置超售比，单击 “确定” 按钮。  批量调整超售比\n 在列表中勾选一个或多个块存储，单击列表上方 “批量操作” 按钮，选择下拉菜单 “调整超售比” 菜单项，弹出修改属性对话框。 分别设置CPU超售比和内存超售比，单击 “确定” 按钮。  调整容量 仅OpenStack平台支持，由于云管平台获取不到OpenStack平台上存储的真正容量，所以云管平台支持设置OpenStack存储容量，请尽量将存储容量设置为存储的真实容量以尽可能的使用存储，避免由于设置的容量超出存储的真实容量而导致磁盘创建失败。\n 在块存储页面，单击OpenStack平台上指定块存储右侧操作列 “更多” 按钮，选择下拉菜单 “调整容量” 菜单项，弹出调整容量对话框。 设置容量大小，单击 “确定” 按钮。  修改属性 该功能用于调整块存储的参数信息以及超售比。超售比为虚拟容量与实际容量的比值。\n 在块存储页面，单击指定块存储右侧操作列 “更多” 按钮，选择下拉菜单 “修改属性” 菜单项，弹出修改属性对话框。 支持修改以下参数：  当选择Ceph类型存储时，支持修改Ceph Key（Ceph用户的密钥）、介质类型； 当选择NFS类型存储时，支持修改NFS Host（NFS服务器IP地址）、NFS Shared Dir（NFS的共享目录）、介质类型； 当选择其它类型存储时，仅支持修改介质类型。   单击 “确定” 按钮。  调整调度标签 该功能用于为块存储绑定调度标签，绑定调度标签的块存储将会按照调度标签为虚拟机提供存储。\n 在块存储页面，单击指定块存储右侧操作列 “更多” 按钮，选择下拉菜单 “调整调度标签” 菜单项，弹出调整调度标签对话框。 选择调度标签，单击 “确定” 按钮。  更改域 该功能用于更改块存储的所属域。\n说明 更改域的条件：需同时满足\n 当前用户在管理后台。 在Cloudpods已开启三级权限。 存储的共享范围为私有。 存储类型不为本地存储。   单个块存储更改域\n 在块存储页面，单击块存储右侧操作列 “更多” 按钮，选择下拉菜单 “更改域” 菜单项，弹出更改域对话框。 选择块存储所属的域，单击 “确定” 按钮。  批量更改域\n 在块存储页面中勾选一个或多个块存储，单击列表上方 “批量操作” 按钮，选择下拉菜单 “更改域” 菜单项，弹出更改域对话框。 选择块存储所属的域，单击 “确定” 按钮。  设置共享 该功能用于设置块存储的共享范围。\n域资源的共享范围有三种：\n 不共享（私有）：即域资源只能本域的用户可以使用。 域共享-部分（多域共享）：即域资源可以共享到指定域（一个或多个），只有域资源所在域和共享域下的用户可以使用域资源。 域共享-全部（全局共享）：即域资源可以共享给全部域使用，即系统中所有用户都可以使用域资源。  说明 设置共享的条件：需同时满足\n 当前用户在管理后台。 在Cloudpods已开启三级权限。   注意 本地存储的共享范围要始终要与宿主机的共享范围保持一致。  单个块存储设置共享\n 在块存储页面，单击块存储右侧操作列 “更多” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数：  当共享范围选择为“不共享”时，即域资源的共享范围为私有，仅本域的用户可以使用。 当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即域资源的共享范围为域共享-部分，只有域资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即域资源的共享范围为域共享-全部，系统中的所有用户都可以使用域资源。     单击 “确定” 按钮，完成操作。  批量设置共享\n 在块存储页面中选择一个或多个块存储，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数：  当共享范围选择为“不共享”时，即域资源的共享范围为私有，仅本域的用户可以使用。 当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即域资源的共享范围为域共享-部分，只有域资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即域资源的共享范围为域共享-全部，系统中的所有用户都可以使用域资源。     单击 “确定” 按钮，完成操作。  删除 该功能用于删除块存储。当块存储未关联宿主机、且存储下没有硬盘文件和缓存文件时可删除。\n说明  本地存储不支持删除。 若块存储未关联宿主机、且存储下没有硬盘文件和缓存文件，仍删除不了存储，可能是硬盘文件未彻底删除存放在回收站中，请在回收站中清除硬盘。    在块存储页面，根据需要删除块存储的数量，选择删除方式。  删除单个块存储：单击指定块存储右侧操作列 更多 按钮，选择下拉菜单 “删除” 菜单项，在弹出操作确认对话框中单击 “确定” 按钮。 删除多个块存储：在存储列表中勾选一个或多个存储，单击列表上方 删除 按钮，在弹出操作确认对话框中单击 “确定” 按钮。    ","excerpt":"启用 该功能用于启用\"禁用\"状态的块存储，禁用状态的存储无法提供存储服务。\n单个启用\n 在块存储页面，单击\"禁用\"状态的块存储右侧操作列 “ …","ref":"/zh/docs/onpremise/storage/tutorial/storage/others/","title":"管理块存储"},{"body":"Web界面操作 保存镜像 将关机状态的虚拟机保存为qcow2格式的镜像文件保存在镜像列表，保存的镜像默认为自定义镜像。目前只支持Cloudpods平台和VMware平台。\n ​单击Cloudpods平台和VMware平台“关机”状态的虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “镜像-保存镜像” 菜单项，弹出保存镜像对话框。 选择镜像类别、输入镜像名称，选择是否勾选“保存镜像后自动启动”，单击 “确定” 按钮，若勾选保存镜像后自动启动，则当虚拟机保存镜像文件后，虚拟机将启动。  创建系统镜像：仅将虚拟机的系统盘保存为系统镜像，该镜像只占一个镜像配额。 创建主机镜像：选择该项后，将虚拟机的系统盘和数据盘保存为主机镜像，主机镜像占的镜像配额等于虚拟机的硬盘数量。    挂载ISO 该功能用于为虚拟机的虚拟光驱挂载ISO镜像，仅Cloudpods平台上的虚拟机支持挂载ISO操作。如需使用ISO文件安装操作系统，请在挂载ISO镜像后，在修改属性中将启动介质设置为光驱。\n注意 通过挂载ISO安装Windows操作系统的虚拟机，安装完成后，还需要安装Virtio驱动，驱动可在镜像市场-ISO中获取。   在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “镜像-挂载ISO” 菜单项，弹出挂载ISO对话框。 选择ISO镜像，若列表中没有ISO镜像，请先在系统镜像列表中上传ISO镜像或导入镜像市场中的ISO镜像。 单击 “确定” 按钮，完成挂载ISO操作。  卸载ISO 该功能用于卸载虚拟机的虚拟光驱上挂载的ISO镜像。仅Cloudpods平台上的虚拟机支持卸载ISO操作。\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “镜像-卸载ISO” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成卸载ISO操作。  ","excerpt":"Web界面操作 保存镜像 将关机状态的虚拟机保存为qcow2格式的镜像文件保存在镜像列表，保存的镜像默认为自定义镜像。目前只支 …","ref":"/zh/docs/onpremise/vminstance/tutorial/image/","title":"虚拟机镜像操作"},{"body":"查看块存储详情 该功能用于查看块存储详细信息。\n 在块存储页面，单击指定块存储名称项，进入块存储详情页面。 详情页面顶部菜单项支持对块存储进行启用、禁用、关联宿主机、调整容量、修改属性、调整标签以及删除操作。 查看以下信息：  基本信息：查看块存储的云上ID、ID、名称、状态、域、项目、共享范围、平台、启用状态、存储类型、介质类型、区域、可用区、云账号、创建时间、更新时间、备注等。 用量统计：查看块存储的物理容量（已分配/总量）、超售比、虚拟容量（虚拟容量=实际容量*超售比）、分配率、分配、预留、浪费容量。    查看块存储挂载的宿主机信息 该功能用于查看块存储管理的宿主机的信息，支持关联宿主机和取消关联宿主机操作。\n说明  本地存储不支持取消关联宿主机。    在块存储详情页面，单击”宿主机“页签，进入宿主机页面。 查看宿主机的名称、启用、状态、IP、服务、#VM（虚拟机数量）、CPU（数量和使用率）、内存（数量和使用率）、存储、SN（序列号）信息。 根据需要取消关联块存储的主机数量，选择取消关联宿主机方式。  取消关联单个宿主机：单击指定宿主机右侧操作列 取消关联宿主机 按钮，在弹出的操作确认对话框中，单击 “确定” 按钮。 批量取消关联宿主机：在宿主机列表选择一个或多个宿主机，单击列表上方 取消关联宿主机 按钮，在弹出的操作确认对话框中，单击 “确定” 按钮。   除取消关联操作外，支持对裸金属服务器进行管理操作，具体操作使用方法请参考宿主机。  查看硬盘信息 该功能用于查看使用块存储创建的虚拟机硬盘信息，并支持删除硬盘。\n 在块存储详情页面，单击”硬盘“页签，进入硬盘页面。 查看硬盘信息，包括名称、容量、格式、磁盘类型、虚拟机、是否挂载、状态信息等。 支持对硬盘进行管理操作，具体操作使用方法请参考硬盘。  查看回收站信息 该功能用于查看目前处于回收站中的使用块存储创建的虚拟机硬盘信息。并支持清除和恢复操作。\n 在块存储详情页面，单击“回收站”页签，进入回收站页面。 查看目前处于回收站的硬盘信息，包括名称、类型、虚拟机、状态等。 支持对回收站中的硬盘进行清除和恢复操作，具体操作使用方法请参考硬盘回收站。  查看镜像缓存 镜像缓存即在存储上创建的虚拟机使用的镜像缓存信息，当关联镜像的虚拟机删除后可以释放镜像缓存，清理存储空间。\n 在块存储详情页面，单击”镜像缓存“页签，进入镜像缓存页面。 查看镜像缓存信息，包括名称、文件大小、状态、路径、引用（使用该镜像缓存的虚拟机数量）等信息 释放缓存：单击镜像缓存指定操作列 释放缓存 按钮，在弹出的操作确认对话框中单击 “确定” 按钮。  ","excerpt":"查看块存储详情 该功能用于查看块存储详细信息。\n 在块存储页面，单击指定块存储名称项，进入块存储详情页面。 详情页面顶部菜单项支持对块存储进 …","ref":"/zh/docs/onpremise/storage/tutorial/storage/viewstorage/","title":"查看块存储信息"},{"body":"经典网络 宿主机内通过host服务的配置项networks（/etc/yunion/host.conf）指定宿主机的网络配置，该配置指定宿主机的指定物理网卡对应的二层网络，有两种配置方式：\n  网卡名称/网桥名称/网卡IP，例如：eth0/br0/192.168.222.10。这种配置模式告诉系统，宿主机的物理网卡eth0对接了192.168.222.10这个IP对应的IP子网对应的二层网络，并且将该物理网卡和网桥br0桥接。这种模式的物理网卡要被宿主机用来和外界通信，因此要配置一个有效的IP地址。在host服务启动时，会检测该IP是否配置在这个物理网卡上，如果不匹配，host服务会放弃启动。以此避免误配置该网卡。启动成功后，host服务会自动创建网桥，把物理网卡计入该网桥，并且把物理网卡上的IP配置信息迁移到网桥，以维持宿主机的正常网络通信。\n  网卡名称/网桥名称/二层网络名称，例如：eth1/brpub/wire1。这种配置模式告诉系统，宿主机的物理网卡eth1对接了二层网络wire1，该网卡不需要配置有效IP地址，并且该物理网卡和网桥brpub桥接。这种模式的物理网卡不被宿主机用来通信，因此不需要显式地配置有效的IP地址。在host服务启动时，会检查该物理网卡是否没有IP，如果有IP，则会放弃启动。以此避免误操作。启动成功后，会自动创建网桥，把物理网卡加入该网桥，并且会自动分配一个169.254.0.0/16的IP给这个网桥。\n  宿主机网络配置对调度的影响 当创建一台经典网络的虚拟机，调度器会查看虚拟机准备对接的IP子网，根据IP子网的二层网络过滤出对接的宿主机，把这些宿主机作为候选宿主机。\nVPC网络 在host服务启动后，会在宿主机内创建用于vpc通信的网桥（默认名称为brvpc），所有对接VPC网络的虚拟机的虚拟网卡都要加入这个网桥。\n","excerpt":"经典网络 宿主机内通过host服务的配置项networks（/etc/yunion/host.conf）指定宿主机的网络配置，该配置指定宿主 …","ref":"/zh/docs/onpremise/network/principle/host/","title":"宿主机网络"},{"body":"除了磁盘伪删除的机制外，平台还另外提供了一层保护，用来确保虚拟机的磁盘文件不会被误删除。\n在每个本地存储的目录下有一个 recycle_bin 的目录，当对本地磁盘进行删除操作时，不会执行真正的删除操作，而是将磁盘移动到这个目录下暂存，存储在一个删除时间命名的子目录下。宿主机上有周期性任务扫描扫描 recycle_bin 目录，把日期在约定清理时间之前的子目录真正清除。\nhost服务的配置项中有两个选项用来配置回收站，recycle_diskfile 是开启或关闭回收站功能，默认开启。recycle_diskfile_keep_days 用来指定回收站内磁盘文件的保留天数，默认是28天。\nrecycle_diskfile: true recycle_diskfile_keep_days: 28 由于回收站会占用磁盘空间，可能存在由于回收站磁盘文件过多，导致磁盘空间不足的情况。这个时候需要手动清理回收站。手动清理回收站只需要手动将 recycle_bin 下的子目录删除即可。\n","excerpt":"除了磁盘伪删除的机制外，平台还另外提供了一层保护，用来确保虚拟机的磁盘文件不会被误删除。 …","ref":"/zh/docs/onpremise/storage/principle/recycle/","title":"本地存储回收站"},{"body":"TODO\n","excerpt":"TODO\n","ref":"/zh/docs/onpremise/storage/principle/snapshot/","title":"本地存储快照"},{"body":"平台通过技术手段实现了本地存储的虚拟机磁盘文件的迁移。迁移分为冷迁移和热迁移。前者是在虚拟机关机状态下的迁移。后者是虚拟机在开机运行状态下的迁移。\n冷迁移 TODO\n热迁移 TODO\n","excerpt":"平台通过技术手段实现了本地存储的虚拟机磁盘文件的迁移。迁移分为冷迁移和热迁移。前者是在虚拟机关机状态下的迁移。后者是虚拟机在开机运行状态下的 …","ref":"/zh/docs/onpremise/storage/principle/migrate/","title":"本地存储磁盘的迁移"},{"body":"控制台 命令行  # 删除RDS实例账号 $ climc dbinstance-account-delete 02c5634d-40bf-40f2-8212-4773c4dc9f0e +----------------------+--------------------------------------------------------------------------------------------------------------------------+ | Field | Value | +----------------------+--------------------------------------------------------------------------------------------------------------------------+ | account | qj-jd | | account_id | 96f46c61-38c4-4fd7-857a-effb4f69eabf | | brand | JDcloud | | can_delete | true | | can_update | true | | cloud_env | public | | cloudregion | JDcloud 华北-北京 | | cloudregion_id | 5323c848-cbe8-4d1d-8319-e42641fed2f2 | | created_at | 2021-06-22T07:05:37.000000Z | | dbinstance | testrds | | dbinstance_id | c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 | | dbinstanceprivileges | [{\"account\":\"hello\",\"database\":\"test\",\"dbinstancedatabase_id\":\"034f9dea-f23f-4d0f-84be-697a62101d16\",\"privileges\":\"rw\"}] | | deleted | false | | host | % | | id | 02c5634d-40bf-40f2-8212-4773c4dc9f0e | | is_emulated | false | | manager | qj-jd | | manager_domain | Default | | manager_domain_id | default | | manager_id | 8e47bb75-5105-4ef9-84b8-8aa5927b06dd | | manager_project | system | | manager_project_id | a9a365125abf43c580ba98e5640b5c51 | | name | hello | | project | system | | project_domain | Default | | project_id | a9a365125abf43c580ba98e5640b5c51 | | provider | JDcloud | | region | JDcloud 华北-北京 | | region_ext_id | cn-north-1 | | region_external_id | JDcloud/cn-north-1 | | region_id | 5323c848-cbe8-4d1d-8319-e42641fed2f2 | | status | deleting | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 1 | | updated_at | 2021-06-24T06:33:31.000000Z | | vpc | newvpc | | vpc_ext_id | vpc-cyeqenbik9 | | vpc_id | d532c177-e8e3-42d3-82c4-af6bef949566 | +----------------------+--------------------------------------------------------------------------------------------------------------------------+  ","excerpt":"控制台 命令行  # 删除RDS实例账号 $ climc dbinstance-account-delete …","ref":"/zh/docs/multicloud/db/rds/tutorial/account/delete/","title":"删除"},{"body":"控制台 命令行  # 删除RDS实例备份 $ climc dbinstance-backup-delete 4eca9256-f998-402e-83bf-db7b0860c5c3 +--------------------+--------------------------------------+ | Field | Value | +--------------------+--------------------------------------+ | account | qj-jd | | account_id | 96f46c61-38c4-4fd7-857a-effb4f69eabf | | backup_method | physical | | backup_mode | manual | | backup_size_mb | 13 | | brand | JDcloud | | can_delete | true | | can_update | true | | cloud_env | public | | cloudregion | JDcloud 华北-北京 | | cloudregion_id | 5323c848-cbe8-4d1d-8319-e42641fed2f2 | | created_at | 2021-06-22T07:05:37.000000Z | | dbinstance | testrds | | dbinstance_id | c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 | | deleted | false | | domain_id | default | | engine | MySQL | | engine_version | 5.6 | | external_id | 39577a08-1499-466a-807d-421e7292f4b1 | | freezed | false | | id | 4eca9256-f998-402e-83bf-db7b0860c5c3 | | imported_at | 2021-06-22T07:05:37.000000Z | | is_emulated | false | | is_system | false | | manager | qj-jd | | manager_domain | Default | | manager_domain_id | default | | manager_id | 8e47bb75-5105-4ef9-84b8-8aa5927b06dd | | manager_project | system | | manager_project_id | a9a365125abf43c580ba98e5640b5c51 | | name | tes_backup | | pending_deleted | false | | project | system | | project_domain | Default | | provider | JDcloud | | region | JDcloud 华北-北京 | | region_ext_id | cn-north-1 | | region_external_id | JDcloud/cn-north-1 | | region_id | 5323c848-cbe8-4d1d-8319-e42641fed2f2 | | source | cloud | | status | deleting | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 2 | | updated_at | 2021-06-24T06:14:28.000000Z | +--------------------+--------------------------------------+  ","excerpt":"控制台 命令行  # 删除RDS实例备份 $ climc dbinstance-backup-delete …","ref":"/zh/docs/multicloud/db/rds/tutorial/backup/delete/","title":"删除"},{"body":"控制台 命令行  # 删除RDS实例数据库 $ climc dbinstance-database-delete 667e37a0-eacf-420b-82e2-5bb21a418d6c +--------------------+--------------------------------------+ | Field | Value | +--------------------+--------------------------------------+ | account | qx-aliyun | | account_id | f88fb1c0-73d4-4c56-8315-20f7dfba3447 | | brand | Aliyun | | can_delete | true | | can_update | true | | character_set | utf8 | | cloud_env | public | | cloudregion | Aliyun 华北2（北京） | | cloudregion_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | created_at | 2021-06-24T06:47:06.000000Z | | dbinstance | test-aliyun | | dbinstance_id | f39bc936-32dd-4151-8ca0-09834318b482 | | deleted | false | | environment | InternationalCloud | | id | 667e37a0-eacf-420b-82e2-5bb21a418d6c | | imported_at | 2021-06-24T06:47:06.000000Z | | is_emulated | false | | manager | qx-aliyun | | manager_domain | Default | | manager_domain_id | default | | manager_id | 5af29c01-3f83-4a52-875c-1336e559b0f5 | | manager_project | qx-aliyun | | manager_project_id | dccd3be610c342e9812e64258ca12769 | | name | database2 | | project | system | | project_domain | Default | | project_id | a9a365125abf43c580ba98e5640b5c51 | | provider | Aliyun | | region | Aliyun 华北2（北京） | | region_ext_id | cn-beijing | | region_external_id | Aliyun/cn-beijing | | region_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | source | local | | status | deleting | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 3 | | updated_at | 2021-06-24T06:51:00.000000Z | | vpc | vpc-h | | vpc_ext_id | vpc-2zewan71fq5dxmy1ozq0k | | vpc_id | c3652c98-ebc6-4c71-85a0-5eccc8583104 | +--------------------+--------------------------------------+  ","excerpt":"控制台 命令行  # 删除RDS实例数据库 $ climc dbinstance-database-delete …","ref":"/zh/docs/multicloud/db/rds/tutorial/database/delete/","title":"删除"},{"body":"前提条件  关闭RDS实例删除保护  控制台 命令行  # 删除RDS实例 $ climc dbinstance-delete 6df152bc-0802-4fcc-8e72-22415ddf43a9 +--------------------+----------------------------------------------------------------------------------------------------------------------------+ | Field | Value | +--------------------+----------------------------------------------------------------------------------------------------------------------------+ | account | qj-azure | | account_id | b8b6a1ad-ed65-41f7-8525-91b44516346e | | auto_renew | false | | billing_type | postpaid | | brand | Azure | | can_delete | false | | can_update | true | | category | basic | | cloud_env | public | | cloudregion | Azure East US | | cloudregion_id | 59260e38-17f1-4b57-8df4-6177e6105067 | | connection_str | testsqlserverkf.database.windows.net | | created_at | 2021-06-21T08:08:57.000000Z | | deleted | false | | disable_delete | true | | disk_size_gb | 51 | | domain_id | default | | engine | SQLServer | | engine_version | 12.0 | | environment | AzurePublicCloud | | external_id | /subscriptions/7aaf3e6c-5f9c-43ad-b149-d9a14765af1c/resourcegroups/default/providers/microsoft.sql/servers/testsqlserverkf | | freezed | false | | id | 6df152bc-0802-4fcc-8e72-22415ddf43a9 | | imported_at | 2021-06-21T08:08:57.000000Z | | iops | 0 | | is_emulated | false | | is_system | false | | manager | Pay-As-You-Go | | manager_domain | Default | | manager_domain_id | default | | manager_id | 7ffddf3c-65ad-467c-870b-a99f2044039d | | manager_project | system | | manager_project_id | a9a365125abf43c580ba98e5640b5c51 | | name | testsqlserverkf | | pending_deleted | false | | port | 1433 | | project | system | | project_domain | Default | | project_src | cloud | | provider | Azure | | region | Azure East US | | region_ext_id | eastus | | region_external_id | Azure-int/eastus | | region_id | 59260e38-17f1-4b57-8df4-6177e6105067 | | source | cloud | | status | deleting | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 18 | | updated_at | 2021-06-23T06:07:12.000000Z | | vcpu_count | 1 | | vmem_size_mb | 3069 | | vpc | - | | vpc_ext_id | 59260e38-17f1-4b57-8df4-6177e6105067-7ffddf3c-65ad-467c-870b-a99f2044039d | | vpc_id | c327f83f-f4c0-4d06-8269-0e56c681dd07 | +--------------------+----------------------------------------------------------------------------------------------------------------------------+```  ","excerpt":"前提条件  关闭RDS实例删除保护  控制台 命令行  # 删除RDS实例 $ climc dbinstance-delete …","ref":"/zh/docs/multicloud/db/rds/tutorial/dbinstance/delete/","title":"删除"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/db/rds/tutorial/dbinstance/","title":"实例"},{"body":"限制  RDS实例必须处于运行中(running)  控制台 命令行 菜单导航  数据库 -\u003e RDS实例 -\u003e 更多 -\u003e 调整配置   $ climc dbinstance-change-config --vcpu-count 4 --vmem-size-mb 8192 --disk-size-gb 500 6df152bc-0802-4fcc-8e72-22415ddf43a9 +--------------------+----------------------------------------------------------------------------------------------------------------------------+ | Field | Value | +--------------------+----------------------------------------------------------------------------------------------------------------------------+ | account | qj-azure | | account_id | b8b6a1ad-ed65-41f7-8525-91b44516346e | | auto_renew | false | | billing_type | postpaid | | brand | Azure | | can_delete | false | | can_update | true | | category | basic | | cloud_env | public | | cloudregion | Azure East US | | cloudregion_id | 59260e38-17f1-4b57-8df4-6177e6105067 | | connection_str | testsqlserverkf.database.windows.net | | created_at | 2021-06-21T08:08:57.000000Z | | deleted | false | | disable_delete | true | | disk_size_gb | 51 | | domain_id | default | | engine | SQLServer | | engine_version | 12.0 | | environment | AzurePublicCloud | | external_id | /subscriptions/7aaf3e6c-5f9c-43ad-b149-d9a14765af1c/resourcegroups/default/providers/microsoft.sql/servers/testsqlserverkf | | freezed | false | | id | 6df152bc-0802-4fcc-8e72-22415ddf43a9 | | imported_at | 2021-06-21T08:08:57.000000Z | | iops | 0 | | is_emulated | false | | is_system | false | | manager | Pay-As-You-Go | | manager_domain | Default | | manager_domain_id | default | | manager_id | 7ffddf3c-65ad-467c-870b-a99f2044039d | | manager_project | system | | manager_project_id | a9a365125abf43c580ba98e5640b5c51 | | name | testsqlserverkf | | pending_deleted | false | | port | 1433 | | project | system | | project_domain | Default | | project_src | cloud | | provider | Azure | | region | Azure East US | | region_ext_id | eastus | | region_external_id | Azure-int/eastus | | region_id | 59260e38-17f1-4b57-8df4-6177e6105067 | | source | cloud | | status | change_config | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 18 | | updated_at | 2021-06-23T06:07:12.000000Z | | vcpu_count | 1 | | vmem_size_mb | 3069 | | vpc | - | | vpc_ext_id | 59260e38-17f1-4b57-8df4-6177e6105067-7ffddf3c-65ad-467c-870b-a99f2044039d | | vpc_id | c327f83f-f4c0-4d06-8269-0e56c681dd07 | +--------------------+----------------------------------------------------------------------------------------------------------------------------+```  ","excerpt":"限制  RDS实例必须处于运行中(running)  控制台 命令行 菜单导航  数据库 -\u003e RDS实例 -\u003e 更多 -\u003e …","ref":"/zh/docs/multicloud/db/rds/tutorial/dbinstance/change_config/","title":"调整配置"},{"body":"前提条件  获取云平台AccessKey AccessKey授权  控制台新建 阿里云 Aws Azure 华为云 腾讯云 UCloud Google云 天翼云 移动云 VMWare OpenStack ZStack 阿里云飞天私有云(Apsara) S3 Ceph XSKY  在云账号页面单击列表上方 “新建” 按钮，进入新建云账号页面。 选择云平台为阿里云，单击 “下一步：配置云账号” 按钮，进入配置云账号页面。 设置以下参数：  名称：阿里云账号的名称。 账号类型：目前支持对接公共云和金融云的阿里云账号。 密钥ID/密码：通过Access Key验证方式对接阿里云平台，Access Key由密钥ID（Access Key ID）和密码（Access Key Secret）组成。具体请参考：阿里云相关参数获取方式。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到 Cloudpods 平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在 Cloudpods 平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 自动同步：设置是否自动同步阿里云平台上的信息，并设置自动同步的时间。   单击 “连接测试” 按钮，测试输入的参数是否正确。 测试成功后，单击 “确定” 按钮，创建阿里云账号。    在公有云账号页面单击列表上方 “新建” 按钮，选择下拉菜单 “AWS” 菜单项，弹出新建对话框。 设置以下参数：  名称：AWS账号的名称。 账号类型：目前支持对接全球区和中国区的AWS云账号。 密钥ID/密码：对接AWS平台的密钥ID和密码信息。具体请参考AWS相关参数获取方式。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到Cloudpods平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在Cloudpods平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 开启免密登录：启用该项后，会自动将系统的SAML信息同步到云账号上，并成为云上登录的身份提供商。实现通过本系统单点登录到公有云平台。   单击 “连接测试” 按钮，测试输入的参数是否正确。 单击 “确定” 按钮，创建AWS账号。    在公有云账号页面单击列表上方 “新建” 按钮，选择下拉菜单 “Azure” 菜单项，弹出新建对话框。 设置以下参数：  名称：Azure账号的名称 账号类型：目前支持对接全球区、中国区、美国政务区、德国区的Azure云账号。 租户（Tenant）ID/客户端ID/客户端密码请参考Azure相关参数获取方式。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到Cloudpods平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在Cloudpods平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 自动同步：设置是否自动同步Azure平台上的信息，并设置自动同步的时间间隔。   单击 “连接测试” 按钮，测试输入的参数是否正确。 单击 “确定” 按钮，创建Azure云账号。    在云账号页面单击列表上方 “新建” 按钮，进入新建云账号页面。 选择云平台为华为云，单击 “下一步：配置云账号” 按钮，进入配置云账号页面。 设置以下参数：  名称：华为云账号的名称。 账号类型：目前支持对接全球区和中国区的华为云账号。 密钥ID/密码：对接华为云平台的密钥ID和密码信息。具体请参考华为云相关参数获取方式。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到Cloudpods平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在Cloudpods平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 开启免密登录：启用该项后，会自动将系统的SAML信息同步到云账号上，并成为云上登录的身份提供商。实现通过本系统单点登录到公有云平台。      在云账号页面单击列表上方 “新建” 按钮，进入新建云账号页面。 选择云平台为腾讯云，单击 “下一步：配置云账号” 按钮，进入配置云账号页面。 设置以下参数：  名称：腾讯云平台的名称。 APP ID/密钥ID/密码：腾讯云账号的APP ID与账号ID有唯一对应关系。对接腾讯云平台的APP ID/密钥ID/密码。具体请参考腾讯云相关参数获取方式。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到Cloudpods平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在Cloudpods平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 开启免密登录：启用该项后，会自动将系统的SAML信息同步到云账号上，并成为云上登录的身份提供商。实现通过本系统单点登录到公有云平台。 自动同步：设置是否自动同步腾讯云平台上的信息，并设置自动同步的时间间隔。   单击 “连接测试” 按钮，测试输入的参数是否正确。 单击 “确定” 按钮，创建腾讯云账号。    在公有云账号页面单击列表上方 “新建” 按钮，选择下拉菜单 “UCloud” 菜单项，弹出新建对话框。 设置以下参数：  名称：UCloud平台的名称。 公钥/私钥：获取方式具体请参考UCloud相关参数获取方式。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到Cloudpods平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在Cloudpods平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 自动同步：设置是否自动同步UCloud平台上的信息，并设置自动同步的时间间隔。   单击 “连接测试” 按钮，测试输入的参数是否正确。 单击 “确定” 按钮，创建UCloud账号。   注意  请确保Cloudpods平台与谷歌云网络互通。 如Cloudpods平台与谷歌云网络不通，可通过配置代理访问谷歌云。    在云账号页面单击列表上方 “新建” 按钮，进入新建云账号页面。 选择云平台为“Google”，单击 “下一步：配置云账号” 按钮，进入配置云账号页面。 设置以下参数：  名称：谷歌云的云账号名称。 project_id、private_key_id、private_key、client_email等参数具体可参考Google相关参数获取方式。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到Cloudpods平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在Cloudpods平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 自动同步：设置是否自动同步Google平台上的信息，并设置自动同步的时间间隔。   单击 “连接测试” 按钮，测试输入的参数是否正确。 单击 “确定” 按钮，创建Google账号。    在云账号页面单击列表上方 “新建” 按钮，进入新建云账号页面。 选择云平台为“天翼云”，单击 “下一步：配置云账号” 按钮，进入配置云账号页面。 设置以下参数：  名称：天翼云的云账号名称。 账号类型：目前支持对接全球区和中国区的天翼云账号。 密钥ID、密码获取方式：目前无法直接使用天翼云官网界面上申请的密钥信息，需要用户联系天翼云技术支持获取Access Key Id和Secret Access Key信息，并需要在天翼云上配置ip白名单。如用户不清楚如何获取，可直接联系运维人员寻求帮助。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 自动同步：设置是否自动同步天翼云平台上的信息，并设置自动同步的时间间隔。   单击 “连接测试” 按钮，测试输入的参数是否正确。 测试通过后，单击 “确定” 按钮，创建天翼云账号。   目前仅支持同步移动云账号上的资源，不支持操作资源。\n 在云账号页面单击列表上方 “新建” 按钮，进入新建云账号页面。 选择云平台为“移动云”，单击 “下一步：配置云账号” 按钮，进入配置云账号页面。 配置以下参数：  名称：移动云的云账号名称。 密钥ID、密码：获取方式具体请参考移动云相关参数获取方式。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到Cloudpods平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在Cloudpods平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 自动同步：设置是否自动同步天翼云平台上的信息，并设置自动同步的时间间隔。   单击 “连接测试” 按钮，测试输入的参数是否正确。 测试通过后，单击 “确定” 按钮，创建移动云账号。    在云账号页面单击列表上方 “新建” 按钮，进入新建云账号页面。 选择云平台为VMware，单击 “下一步：配置云账号” 按钮，进入配置云账号页面。 设置以下参数：  名称：VMware账号的名称。 vCenter地址：vCenter服务器的域名或IP地址。 端口号：默认为443。 账号：vCenter的管理员用户名。 密码：vCenter管理员用户的密码。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 自动同步：设置是否自动同步vCenter上信息，若启用需要设置自动同步的时间间隔。   单击 “连接测试” 按钮，测试输入的参数是否正确。 测试通过后，单击 “下一步：配置物理机IP” 按钮，进入配置物理机IP页面。 上方列表中显示账号下的宿主机的IP信息，并自动检测平台中该域下已有的IP子网是否包含宿主机IP；如不满足，则在配置物理机IP中自动创建包含宿主机IP的IP子网，用户可根据需求更改相关参数。 单击 “下一步：配置虚拟机IP” 按钮，进入配置虚拟机IP页面。 上方列表中显示账号下的虚拟机的IP信息，并自动检测平台中该域下已有的IP子网是否包含所有虚拟机IP；如不满足，则在配置虚拟机IP中自动创建包含虚拟机IP的IP子网，用户可根据需求更改相关参数。 配置完成后，单击 “确定” 按钮，创建VMware云账号、相关IP子网，并开始同步云账号上的资源。    在云账号页面单击列表上方 “新建” 按钮，进入新建云账号页面。 选择云平台为OpenStack，单击 “下一步：配置云账号” 按钮，进入配置云账号页面。 设置以下参数：  名称：OpenStack账号的名称。 认证地址：OpenStack管理平台的认证地址，如http://host:port/v3。 账号：OpenStack平台的管理员用户名，如admin。 密码：OpenStack平台管理员用户的密码。 项目：OpenStack平台上的项目，如admin项目。 Domain Name：OpenStack平台上的Domain name，如default。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：OpenStack平台只支持将云账号上的资源按照云上项目归类且默认资源归属项目不能手动指定，如需更改默认资源归属项目，请在订阅列表中更改项目。勾选自动创建项目将会在平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 自动同步：设置是否自动同步OpenStack平台上的信息，并设置自动同步的时间间隔，最低为30分钟。   单击 “连接测试” 按钮，测试输入的参数是否正确。 测试通过后，单击 “确定” 按钮，创建OpenStack账号。  说明 成功创建OpenStack账号后，由于云管平台获取不到OpenStack平台上存储的真正容量，所以需要在存储-块存储页面设置OpenStack存储容量，请尽量将存储容量设置为存储的真实容量以尽可能的使用存储，避免由于设置的容量超出存储的真实容量而导致磁盘创建失败     在云账号页面单击列表上方 “新建” 按钮，进入新建云账号页面。\n  选择云平台为ZStack或DStack，单击 “下一步：配置云账号” 按钮，进入配置云账号页面。\n  设置以下参数：\n 名称：ZStack或DStack账号的名称。 认证地址：ZStack或DStack平台的认证地址，一般为http://host:8080/，host为ZStack或DStack控制节点的IP地址。 密钥ID：即ZStack或DStack平台上的Access Key ID。 密码：即ZStack或DStack平台上的Access Key Secret。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 自动同步：设置是否自动同步ZStack/DStack平台上的信息，并设置自动同步的时间间隔。    单击 “连接测试” 按钮，测试输入的参数是否正确。\n  测试通过后，单击 “确定” 按钮，创建ZStack/DStack账号。\n  说明 用户可在ZStack管理平台的[平台管理-Access Key]页面中生成新的Access Key信息或使用已有的Access Key。    在云账号页面单击列表上方 “新建” 按钮，进入新建云账号页面。 选择云平台为飞天，单击 “下一步：配置云账号” 按钮，进入配置云账号页面。 配置以下信息：  名称：飞天云账号的名称。 密钥ID/密码：通过Access Key验证方式对接阿里云平台，Access Key由密钥ID（Access Key ID）和密码（Access Key Secret）组成。具体请参考飞天云相关参数获取方式 虚拟机端点：必填，通过飞天API的ESC Endpoint信息对接飞天云的虚拟机资源。 VPC端点：必填，通过飞天API的VPC Endpoint信息对接飞天云的VPC资源。 负载均衡端点：选填，通过飞天API的SLB Endpoint信息对接飞天云的负载均衡资源。 对象存储端点：选填，通过飞天API的OSS Endpoint信息对接飞天云的对象存储资源。 RDS端点：选填，通过飞天API的RDS Endpoint信息对接飞天云的RDS资源。 Redis端点：选填，通过飞天API的Redis Endpoint信息对接飞天云的Redis资源。 操作日志端点：选填，通过飞天API的ActionTrai Endpoint信息对接飞天云的操作日志。 监控端点：选填，通过飞天API的Metrics Endpoint信息对接飞天云的监控。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到平台的本地项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 自动同步：设置是否自动同步ZStack/DStack平台上的信息，并设置自动同步的时间间隔。   单击 “连接测试” 按钮，测试输入的参数是否正确。 测试通过后，单击 “确定” 按钮，创建阿里飞天私有云账号。   S3即Simple Storage service。在创建S3账号之前需要先部署基于S3协议的对象存储服务器，如MinIO等，MinIO的安装部署参考链接。\n  在云账号页面单击列表上方 “新建” 按钮，进入新建云账号页面。\n  选择云平台为S3，单击 “下一步：配置云账号” 按钮，进入配置云账号页面。\n  设置以下参数：\n 名称：S3对象存储服务器的名称。 接入地址：S3对象存储服务器的接入地址。若部署MinIO服务器，接入地址格式为http://IP地址:9000。 密钥ID：即Access Key。 密码：即Secret Key。  #在MinIO存储服务器上执行以下命令，即可获取到接入地址(Endpoint)、密钥ID(Access Key)、密码（Secret Key）信息# $ ./minio server /mnt/data Endpoint: http://10.127.10.201:9000 http://127.0.0.1:9000 AccessKey: XRSN7GL67M70AM342UGV SecretKey: mUd+e+h0DS3oIDEvF27b2EE4l+WN5MuZ2ZI+VOag  域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 自动同步：设置是否自动同步S3对象存储服务器上的信息，并设置自动同步的时间间隔。    单击 “连接测试” 按钮，测试输入的参数是否正确。\n  测试通过后，单击 “确定” 按钮，创建S3账号。\n    在云账号页面单击列表上方 “新建” 按钮，进入新建云账号页面。 选择云平台为Ceph，单击 “下一步：配置云账号” 按钮，进入配置云账号页面。 设置以下参数：  名称：ceph对象存储服务器的名称。 接入地址：ceph对象存储服务器的接入地址。 密钥ID：ceph对象存储服务器的密钥ID。 密码：密钥ID对应的密码信息。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 自动同步：设置是否自动同步Ceph对象存储上的信息，并设置自动同步的时间间隔。   单击 “连接测试” 按钮，测试输入的参数是否正确。 测试通过后，单击 “确定” 按钮，创建Ceph账号。    在云账号页面单击列表上方 “新建” 按钮，进入新建云账号页面。 选择云平台为XSKY，单击 “下一步：配置云账号” 按钮，进入配置云账号页面。 设置以下参数：  名称：XSKY存储服务器的名称。 接入地址：XSKY存储服务器的接入地址。 密钥ID：XSKY对象存储服务器的密钥ID。 密码：密钥ID对应的密码信息。 域：选择云账号所属的域。当云账号私有状态下，域下所有项目用户都可以使用云账号创建资源。 资源归属项目：选择将云账号上的资源同步到平台的本地项目。如需将云账号上的资源按照云上项目归类，请先指定默认资源归属项目，并勾选自动创建项目。勾选后，将会在平台创建与云上项目同名的本地项目，并将资源同步到对应项目中。云上没有项目归属的资源将会同步到默认资源归属项目。 代理：当云账号需要代理才可以正常访问时设置该项，留空代表直连。如没有合适的代理，直接单击“新建”超链接，在弹出的新建代理对话框中设置相关参数，创建代理。 自动同步：设置是否自动同步XSKY对象存储上的信息，并设置自动同步的时间间隔。   单击 “连接测试” 按钮，测试输入的参数是否正确。 测试通过后，单击 “确定” 按钮，创建XSKY账号。   ","excerpt":"前提条件  获取云平台AccessKey AccessKey授权  控制台新建 阿里云 Aws Azure 华为云 腾讯云 UCloud …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/create/","title":"创建"},{"body":"前提条件  录入云账号 当前用户为系统管理员或域管理员  操作步骤 控制台新建 命令行新建   登录控制台, 选择 [多云管理] -\u003e [云用户组], 进入云用户组列表页面\n  点击左上角 [新建] 按钮\n  根据页面提示信息, 配置以下信息\n   类别 必选/可选 说明     域 必选 仅管理后台可见, 域管理后台默认使用当前用户所在域   名称 必选 用户组名称标识   平台 必选 控制台根据云账号录入账号自动选择支持的平台，若第一次录入云账号，需要刷新整个页面，清除缓存后，可以看到云账号所在的平台   权限 可选 可以根据平台选择相应的权限, 若不指定, 则用户组无任何权限      点击确定即可创建云用户组\n   climc cloud-group-create \u003cName\u003e \u003cProvider\u003e  注意 新创建的云用户组并不会立即到公有云上创建相应的资源 只有当用户组被公有云子账号使用时, 才会到公有云创建相应的资源  ","excerpt":"前提条件  录入云账号 当前用户为系统管理员或域管理员  操作步骤 控制台新建 命令行新建   登录控制台, 选择 [多云管理] -\u003e [云 …","ref":"/zh/docs/multicloud/cloudgroup/tutorial/create/","title":"创建"},{"body":"Cloudpods 平台虚拟机默认支持免密登录，所以可以直接安装Agent。非Cloudpods 平台在安装Agent时需要判断当前虚拟机是否已支持免密登录。\n安装监控Agent Cloudpods 平台\n当Cloudpods平台上虚拟机和裸金属已默认直接免密登录时，可以直接安装Agent。\n 在主机-主机-虚拟机/裸金属页面，单击虚拟机/裸金属名称项，进入虚拟机/裸金属详情页面。 单击“监控”页签，进入监控页面。 单击 “安装Agent” 按钮，直接安装Agent。  其他平台\n非Cloudpods平台上虚拟机在安装Agent前需要确保虚拟机已支持免密登录。如何将虚拟机设置为免密登录请参考虚拟机免密登录配置。\n 在主机-主机-虚拟机页面，单击虚拟机名称项，进入虚拟机详情页面。 单击“监控”页签，进入监控页面。 单击 “安装Agent” 按钮，开始探测虚拟机的免密登录状态。  当虚拟机可以免密登录时，单击 “确定” 按钮，安装Agent。  当虚拟机所在VPC或IP中存在SSH代理节点时，将会直接安装Agent。 当虚拟机所在VPC或IP中不存在SSH代理节点时，将会安装Agent失败，并提示创建SSH代理节点。   当虚拟机不可免密登录时，请先将虚拟机设置为免密登录状态。    说明 当Agent安装失败后，可以将鼠标移到到“安装失败，可尝试重新安装”上，将会展示Agent安装失败的具体原因。  虚拟机免密登录配置 虚拟机支持被平台免密登录，有以下两点要求：\n 虚拟机与平台网络通，即通过EIP、NAT网关或SSH代理等方式使虚拟机与平台网络通。  EIP、NAT网关等通过公网IP等使虚拟机可以直接与平台进行通信。 SSH代理适用于为VPC内的虚拟机安装Agent，该场景适用于不想为VPC内的所有虚拟机都绑定EIP或NAT网关等，仅需要VPC内的一台虚拟机可以与平台网络连通即可，通过将该虚拟机设置为SSH代理节点，为VPC的其他虚拟机提供代理服务，使虚拟机可以与平台网络连通。可参考新建SSH代理节点的步骤为VPC内的虚拟机设置SSH代理。   虚拟机中存在平台的公钥文件。设置免密登录功能仅用于将平台的公钥拷贝到虚拟机中，请先确保虚拟机与平台网络通。  设置免密登录 该功能用于用于配置相关参数使虚拟机能够免密登录，设置免密登录之前需要确保虚拟机与平台网络通。\n设置免密登录\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择 “密码密钥-设置免密登录” 菜单项，弹出设置免密登录对话框。 配置以下参数：  设置方式：支持密钥、密码、脚本等方式将平台的公钥上传到虚拟机上。  当设置方式为“密钥”时，请使用root用户或具有使用sudo免密权限的用户以其私钥，请确保可以通过用户名和私钥通过ssh连接到对应虚拟机，单击 “确定” 按钮，进入等待执行结果页面，开始设置并探测虚拟机的免密登录状态是否变为免密登录。 当设置方式为“密码”时，请使用root用户或具有使用sudo免密权限的用户以其密码，请确保可以通过用户名和密码通过ssh连接到对应虚拟机。单击 “确定” 按钮，进入等待执行结果页面，开始设置并探测虚拟机的免密登录状态是否变为免密登录。 当设置方式为“脚本”时，请请使用root或具有sudo权限的用户在虚拟机中执行以下脚本，执行完成后，单击 “确定” 按钮，进入等待执行结果页面，开始设置并探测虚拟机的免密登录状态是否变为免密登录。   SSH端口：当虚拟机SSH默认端口22被禁用后，可通过修改SSH端口连接到虚拟机。   若虚拟机可以免密登录，直接单击 “关闭” 按钮。 若虚拟机仍不可免密登录，请在操作列表查看不可免密登录的原因。  如报错原因中提示“Failed to connect to the host via ssh”，则需要先将该虚拟机通过绑定EIP或NAT网关以及SSH代理等方式，使其与平台网络可通。 如报错原因中提示“Permission denied”，则表示输入的信息错误，可单击 “上一步” 按钮，修改配置，继续设置并探测。    批量设置免密登录\n只支持批量为同一项目下的虚拟机设置免密登录。\n 在虚拟机列表中选择一个或多个虚拟机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “密码密钥-设置免密登录” 菜单项，弹出设置免密登录对话框。 配置以下参数：  设置方式：支持密钥、密码、脚本等方式将平台的公钥上传到虚拟机上。  当设置方式为“密钥”时，请使用root用户或具有使用sudo免密权限的用户以其私钥，请确保可以通过用户名和私钥通过ssh连接到对应虚拟机，单击 “确定” 按钮，进入等待执行结果页面，开始设置并探测虚拟机的免密登录状态是否变为免密登录。 当设置方式为“密码”时，请使用root用户或具有使用sudo免密权限的用户以其密码，请确保可以通过用户名和密码通过ssh连接到对应虚拟机。单击 “确定” 按钮，进入等待执行结果页面，开始设置并探测虚拟机的免密登录状态是否变为免密登录。 当设置方式为“脚本”时，请请使用root或具有sudo权限的用户在虚拟机中执行以下脚本，执行完成后，单击 “确定” 按钮，进入等待执行结果页面，开始设置并探测虚拟机的免密登录状态是否变为免密登录。   SSH端口：当虚拟机SSH默认端口22被禁用后，可通过修改SSH端口连接到虚拟机。   若虚拟机可以免密登录，直接单击 “关闭” 按钮。 若虚拟机仍不可免密登录，请在操作列表查看不可免密登录的原因。  如报错原因中提示“Failed to connect to the host via ssh”，则需要先将该虚拟机通过绑定EIP、NAT网关以或SSH代理等方式，使其与平台网络可通。 如报错原因中提示“Permission denied”，则表示输入的信息错误，可单击 “上一步” 按钮，修改配置，继续设置并探测。    探测免密登录 该功能用于探测虚拟机是否能被平台免密登录。\n探测免密登录\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择 “密码密钥-探测免密登录” 菜单项，弹出探测免密登录对话框。 开始探测免密登录，并支持在操作列表查看不可免密登录的原因。  如报错原因中提示“none publickey”，可通过设置免密登录功能，将虚拟机设置为免密登录状态。 如报错原因中提示“network error”，则需要先将该虚拟机通过绑定EIP或NAT网关以及SSH代理等方式，使其与平台网络可通。    批量探测免密登录\n 在虚拟机列表中选择一个或多个虚拟机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “密码密钥-探测免密登录” 菜单项，弹出探测免密登录对话框。 开始探测免密登录，并支持在操作列表查看不可免密登录的原因。  如报错原因中提示“none publickey”，可通过设置免密登录功能，将虚拟机设置为免密登录状态。 如报错原因中提示“network error”，则需要先将该虚拟机通过绑定EIP或NAT网关以及SSH代理等方式，使其与平台网络可通。    新建SSH代理节点 该功能用于新建代理节点。\n虚拟机配置要求  目前只支持Linux操作系统的虚拟机作为SSH代理节点。 请确保虚拟机处于运行中状态； 请确保虚拟机支持通过平台免密登录；虚拟机能被平台免密登录，则要求虚拟机与平台网络通（即通过EIP、NAT网关或SSH代理等方式使虚拟机与平台网络通）以及虚拟机中存在平台的公钥文件。 请检查虚拟机的sshd配置，GatewayPorts是clientspecified，若该项值为no，则只允许绑定127.0.0.1的地址，使remote forward无法正常使用，造成安装监控Agent的虚拟机无法向平台上报监控数据等。  操作步骤  在SSH代理节点页面，单击列表上方 “新建” 按钮，进入新建SSH代理节点页面。 在选择虚拟机页面设置以下参数：  域：设置SSH代理节点所属域，并通过域过滤可选的虚拟机。 名称：设置SSH代理节点的名称。 区域：通过平台、区域过滤VPC。 网络：通过VPC、网络过滤虚拟机。 虚拟机：通过上面的筛选条件过滤出符合条件的虚拟机，并支持在搜索框中通过名称和IP搜索虚拟机，请确保所选的虚拟机符合虚拟机配置要求，如没有合适的虚拟机，可以单击“新建”超链接，跳转到虚拟机列表页面创建符合需求的虚拟机。   选择好虚拟机后，单击 “下一步” 按钮，开始探测虚拟机的免密登录状态。  如虚拟机可免密登录，可直接单击 “确定” 按钮，开始创建虚拟机。 如虚拟机不可免密登录，请先点击列表操作列 “查看” 按钮，查看探测免密登录失败的具体原因。  如报错原因中提示“none publickey”，可通过设置免密登录功能，将虚拟机设置为免密登录状态。设置免密登录方式配置参数如下：  设置方式：支持密钥、密码、脚本等方式将平台的公钥上传到虚拟机上。 当设置方式为“密钥”时，请使用root用户或具有使用sudo免密权限的用户以其私钥，请确保可以通过用户名和私钥通过ssh连接到对应虚拟机，单击 “确定” 按钮，开始设置并探测虚拟机的免密登录状态是否变为免密登录。 当设置方式为“密码”时，请使用root用户或具有使用sudo免密权限的用户以其密码，请确保可以通过用户名和密码通过ssh连接到对应虚拟机。单击 “确定” 按钮，开始设置并探测虚拟机的免密登录状态是否变为免密登录。 当设置方式为“脚本”时，请请使用root或具有sudo权限的用户在虚拟机中执行以下脚本，执行完成后，单击 “确定” 按钮，开始设置并探测虚拟机的免密登录状态是否变为免密登录。   如报错原因中提示“network error”，则需要返回上一步选择其他虚拟机，或为该虚拟机通过绑定EIP或NAT网关等方式，使其与平台网络可通。     只有当虚拟机免密登录状态为“可免密登录”时，才支持单击 “确定” 按钮，开始创建SSH代理节点。 在创建SSH代理节点时将会检查虚拟机的sshd配置是否符合虚拟机配置要求，若不符合将会尝试变更虚拟机的sshd配置，因此可能会造成创建ssh代理节点时间过长，若提示超时，请重新单击 “确定” 按钮，创建SSH代理节点。  ","excerpt":"Cloudpods 平台虚拟机默认支持免密登录，所以可以直接安装Agent。非Cloudpods 平台在安装Agent时需要判断当前虚拟机是 …","ref":"/zh/docs/monitor_ops/monitor/tutorial/installagent/","title":"安装监控Agent"},{"body":"日志类型   平台有一个日志服务，用来收集各个服务的操作日志，这类日志用于展示在web控制台的“操作日志”菜单，起到平台关键操作回溯审计的作用\n  与此同时，每个服务内部都有一个操作日志，用来收集记录每个服务各自的详细操作日志，用来做计费以及debug使用。\n  平台还有一个云上日志服务（Cloudevents），用来同步保存从各个云账号同步下来的操作日志。\n  日志数据的保存 日志数据都保存在数据表中，这类表都采用了自动分表的机制，在每大概30天会自动切换表，把日志保存在新表中。\n日志表的清理 以上各类日志日积月累数据量都不小，需要定期清理。由于采用了分表保存的机制，可以将旧表drop来删除日志数据，释放空间。\n但是，需要注意的是，只有在mysql开启了innodb_file_per_table=ON的选项后，drop表之后，会删除对应的数据库文件，从而释放出表空间。如果mysql未开启innodb_file_per_table选项，则mysql所有数据都保存在/var/lib/mysql/ibdata1这个文件中，即使删除了表，也不会立即释放表空间。\n以下命令用来查看各个服务的日志表的情况：\nclimc logs-splitable --service \u003cservice_name\u003e 其中，service可以是：\n compute image identity log cloudevent  以下命令清理各个服务的过期日志表（默认drop清理6个月之前的日志表）：\nclimc logs-purge --service \u003cservice_name\u003e ","excerpt":"日志类型   平台有一个日志服务，用来收集各个服务的操作日志，这类日志用于展示在web控制台的“操作日志”菜单，起到平台关键操作回溯审计的作 …","ref":"/zh/docs/misc/log-purge/","title":"操作日志"},{"body":"监控服务架构 主要由以下几个组件构成：\n 监控Agent（telegraf）  部署在宿主机或者虚拟机内部的监控数据采集agent，目前使用开源的telegraf\n cloudmon  主动从各个平台拉取监控数据，采集一些使用量指标，以及进行ping监控\n influxdb  监控数据存储\n monitor  提供监控服务API，屏蔽后端监控的差异。同时提供报警的功能以及API。\n监控数据采集 监控数据通过几个途径采集获得\n 私有云宿主机  通过部署在私有云宿主机的telegraf采集监控数据\n 云平台  通过cloudmon服务，周期性地调用各个平台的API，采集监控数据\n 主动部署监控代理（telegraf）  ","excerpt":"监控服务架构 主要由以下几个组件构成：\n 监控Agent（telegraf）  部署在宿主机或者虚拟机内部的监控数据采集agent，目前使用 …","ref":"/zh/docs/monitor_ops/monitor/","title":"监控"},{"body":"Cloudpods通过配置服务来管理服务相关或者用户个人相关的配置参数。\n","excerpt":"Cloudpods通过配置服务来管理服务相关或者用户个人相关的配置参数。\n","ref":"/zh/docs/misc/yunionconf/","title":"配置服务"},{"body":"Web界面操作 远程终端 该功能支持使用SOL（Serial over LAN）和ssh远程连接到物理机。SOL即通过串口进行远程连接。连接之后需要使用初始账号列中的用户名和密码进行登录。\n 在物理机页面，单击物理机右侧操作列 “远程终端” 按钮，选择下拉菜单 “SOL远程终端” 菜单项，通过SOL方式远程连接物理机。 单击物理机右侧操作列 “远程终端” 按钮，选择下拉菜单 “SSH IP地址” 菜单项，与物理机建立web SSH连接。 若物理机上的22端口被其他应用占用，ssh服务端口为其他端口时，可选择下拉菜单 “SSH IP地址:自定义端口” 菜单项，在弹出的对话框框中设置端口号，单击 “确定” 按钮与物理机建立web SSH连接。 单击物理机右侧操作列 “远程终端” 按钮，选择下拉菜单 “Java控制台” 菜单项，下载并打开jnlp文件，连接物理机。  启用 该功能用于启用\"禁用\"状态的物理机。启用状态的物理机用于创建裸金属服务器。\n单个启用\n 在物理机页面，单击\"禁用\"状态的物理机右侧操作列 “更多” 按钮，选择下拉菜单 “启用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，启用物理机。  **批量启用\n 在物理机列表中勾选一个或多个\"禁用\"状态的物理机，单击列表上方 “更多” 按钮，选择下拉菜单 “启用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，启用物理机。  禁用 该功能用于禁用”启用“状态的物理机，禁用状态的物理机不能创建裸金属服务器。\n单个禁用\n 在物理机列表，单击”启用“状态的物理机右侧操作列 “更多” 按钮，选择下拉菜单 “禁用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，禁用物理机。  批量禁用\n 在物理机列表中勾选一个或多个\"启用\"状态的物理机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “禁用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，禁用物理机。  调整调度标签 该功能用于为物理机绑定调度标签，绑定调度标签的物理机将按照调度策略调度创建裸金属服务器。\n 在物理机页面，根据需要绑定调度标签的物理机数量，选择调整调度标签的方式。当物理机需要绑定同一个标签时，推荐使用批量为物理机调整标签功能，若需要绑定不同标签，需要分别调整的调度标签。  调整调度标签：单击物理机右侧操作列 更多 按钮，选择下拉菜单 “调整标签” 菜单项，在弹出调整调度标签对话框中选择调度标签，单击 “确定” 按钮。 批量为物理机调整标签：在物理机列表中勾选一个或多个物理机，单击列表上方 批量操作 按钮，选择下拉菜单 “调整标签” 菜单项，在弹出调整调度标签对话框中选择调度标签，单击 “确定” 按钮。    同步状态 该功能用于同步物理机操作系统的运行状态。处于关机状态的物理机不支持同步状态。\n 在物理机页面，根据需要同步状态的物理机数量，选择同步状态的方式。  同步一个物理机状态：单击物理机右侧操作列 “更多” 按钮，选择下拉菜单 “同步状态” 菜单项，同步显示物理机运行状态。 批量同步物理机状态：在物理机列表中勾选一个或多个物理机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “同步状态” 菜单项，批量同步物理机状态。    验证IPMI信息 该功能用于验证物理机的IPMI信息配置是否正确以及是否已启用LAN上的IPMI信息。当物理机由于IPMI配置有问题而纳管失败后，用户修改IPMI配置后，可通过验证IPMI功能验证修改后的IPMI配置是否正确，正确后将会重新纳管物理机。\n验证IPMI信息\n 在物理机页面，单击物理机右侧操作列 “更多” 按钮，选择下拉菜单 “验证IPMI信息” 菜单项，开始验证配置的IPMI的正确性。  批量验证IPMI信息\n 在物理机列表勾选一个或多个物理机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “验证IPMI信息” 菜单项，开始验证配置的IPMI的正确性。  检测硬件配置 该功能用于同步获取物理机的硬件配置信息等。当用户添加物理机时勾选只注册不引导后需要使用检测硬件配置功能，使物理机可以正常被使用。\n检测硬件配置\n 在物理机页面，单击物理机右侧操作列 “更多” 按钮，选择下拉菜单 “检测硬件配置” 菜单项，同步物理机的硬件配置信息。  批量检测硬件配置\n 在物理机列表勾选一个或多个物理机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “检测硬件配置” 菜单项，同步物理机的硬件配置信息。  开机 该功能用于将关机状态的物理机开机。\n开机\n 在物理机页面，单击物理机右侧操作列 “更多” 按钮，选择下拉菜单 “开机” 菜单项，将物理机开机。  批量开机\n 在物理机列表勾选一个或多个物理机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “开机” 菜单项，将物理机开机。  关机 该功能用于将运行状态的物理机关机，当物理机已分配给裸金属使用时，不支持关机操作。\n关机\n 在物理机页面，单击物理机右侧操作列 “更多” 按钮，选择下拉菜单 “关机” 菜单项，将物理机关机。  批量关机\n 在物理机列表勾选一个或多个物理机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “关机” 菜单项，将物理机关机。  进入维护模式 该功能用于将已分配裸金属设备的物理机进入离线系统（yunionos网络启动小系统），管理员在离线系统可以进行更改分区、重做RAID、更改密码等操作。未分配的物理机默认就处于离线系统。\n进入维护模式\n 在物理机页面，单击物理机右侧操作列 “更多” 按钮，选择下拉菜单 “进入维护模式” 菜单项，进入维护模式。 在维护模式下可以进行更改分区，重做RAID等操作。  批量进入维护模式\n 在物理机列表中勾选一个或多个物理机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “进入维护模式” 菜单项，进入维护模式。 在维护模式下可以进行更改分区，重做RAID等操作。  退出维护模式 该功能用于退出维护模式。\n退出维护模式\n 在物理机页面，单击物理机右侧操作列 “更多” 按钮，选择下拉菜单 “退出维护模式” 菜单项，退出维护模式。  批量退出维护模式\n 在物理机列表中勾选一个或多个物理机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “退出维护模式” 菜单项，退出维护模式。  删除 该功能用于删除物理机，未分配给裸金属设备且禁用状态的物理机才可以删除。\n单个删除\n 在物理机页面，单击物理机右侧操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在物理机列表中勾选一个或多个物理机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  Climc 查询物理机 # list baremetal 记录 climc host-list --baremetal true # list 已经安装系统的物理机 climc host-list --baremetal true --occupied # list 未安装系统的物理机 climc host-list --baremetal true --empty # 查询物理机详情，包括硬件信息，机房信息 climc host-show \u003chost_id\u003e 注册物理机 climc host-create \u003chost_id\u003e 重新准备物理机 climc host-prepare \u003chost_id\u003e 获取物理机登录信息 climc host-logininfo \u003chost_id\u003e 获取串口登录控制台 climc webconsole-baremetal \u003chost_id\u003e 开/关机 climc host-start/host-stop \u003chost_id\u003e 进入/退出维护模式 climc host-maintenance/host-unmaintenance \u003chost_id\u003e 删除物理机 climc host-delete \u003chost_id\u003e 转换/回收宿主机 climc host-convert-hypervisor climc host-undo-convert \u003chost_id\u003e ","excerpt":"Web界面操作 远程终端 该功能支持使用SOL（Serial over LAN）和ssh远程连接到物理机。SOL即通过串口进行远程连接。连接 …","ref":"/zh/docs/onpremise/baremetal/tutorial/operator/","title":"物理机其它操作"},{"body":"Web界面操作 关联安全组 安全组是一种虚拟的包过滤防火墙，通过设置安全组规则来控制关联的虚拟机是否可以被访问，以及虚拟机可访问的外部资源等。在为虚拟机绑定安全组之前请先在网络-安全组页面创建安全组规则。批量关联安全组操作支持选择不同平台上的虚拟机。\n单个虚拟机关联安全组\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “网络安全-关联安全组” 菜单项，弹出关联安全组对话框。 在关联安全组对话框中支持关联或取消关联安全组。  关联安全组：选择要绑定的安全组，最多支持5个。如没有符合需求的安全组，可单击“新建安全组”超链接，在弹出的新建安全组页面配置相关参数，单击 “确定” 按钮，创建安全组。 取消关联安全组：取消选择安全组，至少保留一个安全组。   单击 “确定” 按钮，完成操作。  批量关联安全组\n 在虚拟机列表中选择一个或多个虚拟机，单击 “批量操作” 按钮，选择下拉菜单 “网络安全-关联安全组” 菜单项，弹出关联安全组对话框。 在关联安全组对话框中支持关联或取消关联安全组。  关联安全组：选择要绑定的安全组，最多支持5个。如没有符合需求的安全组，可单击“新建安全组”超链接，在弹出的新建安全组页面配置相关参数，单击 “确定” 按钮，创建安全组。 取消关联安全组：取消选择安全组，至少保留一个安全组。   单击 “确定” 按钮，完成操作。  绑定弹性公网IP 弹性公网IP是一种NAT IP，通过与虚拟机绑定，实现虚拟机与公网之间的通信。\n注意  目前ZStack、OpenStack平台的虚拟机在绑定弹性公网IP时不支持创建弹性公网IP，且不支持绑定属于同一IP子网的弹性公网IP； VMware平台的虚拟机不支持绑定弹性公网IP。 仅Cloudpods平台VPC网络的虚拟机支持绑定弹性公网IP。    在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “网络安全-绑定弹性公网IP” 菜单项，弹出绑定弹性公网IP对话框。 配置以下参数  若绑定方式选择“新建”弹性公网IP，  当选择Cloudpods平台时配置以下参数：  线路类型：可根据需求创建对应线路类型的EIP。 网络计费方式：设置弹性公网IP的计费方式，包括按流量计费和按带宽计费。  按流量计费：按实际传输流量收费，可限制峰值带宽避免意外流量带来的费用，当瞬间带宽超过该值时将丢包，适用于网络波动大的场合。 按带宽计费：按传输速率计费，选择固定带宽，超过带宽时将丢包，适用于网络波动较小的场景。   带宽：设置带宽大小。   当选择公有云平台时配置以下参数：  网络计费方式：设置弹性公网IP的计费方式，包括按流量计费和按带宽计费。  按流量计费：按实际传输流量收费，可限制峰值带宽避免意外流量带来的费用，当瞬间带宽超过该值时将丢包，适用于网络波动大的场合。 按带宽计费：按传输速率计费，选择固定带宽，超过带宽时将丢包，适用于网络波动较小的场景。   带宽：设置带宽大小。 注意  腾讯云和Azure不支持按固定带宽计费。        若绑定方式选择“绑定已有”，请确保在弹性公网IP页面已存在对应平台的弹性公网IP，选择弹性公网IP。   单击 “确定” 按钮。  解绑弹性公网IP 该功能用于解除虚拟机与弹性公网IP的绑定关系，释放弹性公网IP资源，释放后的弹性公网IP可以被其他虚拟机使用。\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “网络安全-解绑弹性公网IP” 菜单项，弹出解绑弹性公网IP对话框。 单击 “确定” 按钮，完成操作。  设置源/目标检查 源/目标检查即检查虚拟机接收或发送的流量的源/目标地址是否为虚拟机。启用检查时，当源/目标地址不是虚拟机时，则丢弃不处理；当虚拟机作为NAT、路由器、防火墙等使用时必须禁用源/目标检查。\n仅Cloudpods平台的虚拟机支持设置源/目标检查且默认启用源/目标检查。\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “网络安全-设置源/目标检查” 菜单项，弹出设置源/目标检查对话框。 选择开启或关闭源/目标检查，单击 “确定” 按钮，完成操作。  补IP 当VMware虚拟机由于一些原因（如关机状态同步、未安装agent等）未同步到IP地址时，虚拟机列表的IP地址字段显示为\"-\"，此时支持为VMware虚拟机补IP。补充的IP地址必须与虚拟机的实际IP一致。\n 在虚拟机列表中，当VMware平台虚拟机IP地址列为空时，单击IP地址列的 “可补IP” 按钮，弹出补充IP对话框。 设置IP地址，单击 “确定” 按钮。  虚拟机网卡管理 该功能用于查看虚拟机的网卡信息，并支持针对网卡进行管理操作。\n添加网卡 该功能用于为虚拟机添加网卡，最多可添加8个网卡，目前仅Cloudpods平台的虚拟机支持添加网卡功能。\n 在虚拟机页面，单击虚拟机名称项，进入虚拟机详情页面。 单击“网络”页签，进入网络页面。 单击网卡列表上方 “添加网卡” 按钮，弹出添加网卡对话框。 设置VPC和IP子网，如需指定静态IP，可单击 “手动配置IP” 按钮，设置IP地址，单击 “确定” 按钮。  修改带宽 该功能用于修改网卡的带宽限制。目前仅支持Cloudpods平台、VMware平台、ZStack平台、OpenStack平台。\n 在虚拟机页面，单击虚拟机名称项，进入虚拟机详情页面。 单击“网络”页签，进入网络页面。 单击网卡右侧操作列 “修改带宽” 按钮，弹出修改带宽对话框。 设置带宽，0表示无限制，取值范围为0~10000的整数。单击 “确定” 按钮。 若开启了调整配置的工单，则还需要填入申请原因，单击 “提交工单” 按钮，提交修改带宽工单，等待审批通过后才会成功修改带宽。  更换IP 该功能用于修改虚拟机的IP地址，支持在IP子网中动态分配IP地址或手动指定IP子网内的IP地址。目前仅支持Cloudpods平台、VMware平台。\n 在虚拟机页面，单击虚拟机名称项，进入虚拟机详情页面。 单击“网络”页签，进入网络页面。 单击网卡右侧操作列 “更换IP” 按钮，弹出更换IP对话框。 选择IP子网，如需指定静态IP，可单击 “手动配置IP” 按钮，设置IP地址，单击 “确定” 按钮。  卸载网卡 该功能用于卸载虚拟机上的网卡，卸载时需要按照顺序卸载，只允许卸载最后一块网络，即序号最大的网卡支持卸载，所有网卡均可以被卸载。目前仅支持Cloudpods平台。\n 在虚拟机页面，单击虚拟机名称项，进入虚拟机详情页面。 单击“网络”页签，进入网络页面。 单击最后一块网卡右侧操作列 “卸载” 按钮，弹出卸载网卡对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"Web界面操作 关联安全组 安全组是一种虚拟的包过滤防火墙，通过设置安全组规则来控制关联的虚拟机是否可以被访问，以及虚拟机可访问的外部资源 …","ref":"/zh/docs/onpremise/vminstance/tutorial/network/","title":"虚拟机网络管理"},{"body":"Web界面操作 列表 支持通过搜索框查询镜像。\n详情 该功能用于查看系统镜像的详细信息。\n 在系统镜像页面，单击镜像名称项，进入系统镜像详情页面。 详情页面顶部菜单项支持对镜像镜像管理操作。 查看镜像的信息。  基本信息：包括ID、名称、状态、域、项目、共享范围、类型、大小、创建时间、更新时间、备注。 镜像属性：包括磁盘格式、系统语言、最小内存要求、最小磁盘要求、磁盘驱动、网卡驱动、应用平台。 多云镜像：除ISO格式的镜像外，其他格式镜像导入到Cloudpods平台时都会转换成3份不同格式的镜像，多云镜像可查看镜像的校验和、格式、大小以及状态。 说明 用户从镜像市场或手动上传的镜像都会保存在First Node服务器的/opt/cloud/workspace/data/glance/image目录下。以镜像ID为名称保存1~3份不同格式的镜像。   其他信息：支持开启或关闭删除保护。    Climc命令行操作 列表 # 查询所有镜像列表 $ climc image-list # 查询所有缓存的镜像列表 $ climc cached-image-list # 查询包含 ubuntu 关键字的镜像 $ climc image-list --search ubuntu # 查询公有云包含 centos 关键字的缓存 $ climc cached-image-list --search centos --public-cloud # image-list 支持的查询条件 $ climc help image-list # cached-image-list 支持的查询条件 $ climc help cached-image-list 详情 根据 image-list 可以获取镜像的列表，第1、2列包含镜像的 id 和 name，通过 id 或 name 可以获取镜像的详情。\n# 查询名称包含 CentOS 的镜像 $ climc image-list --search centos +--------------------------------------+-----------------------------------------+-------------+-----------+-----------+-----------+-------------+----------+---------+--------+----------------------------------+----------------------------------+--------+----------------+ | ID | Name | Disk_format | Size | Is_public | Protected | Is_Standard | Min_disk | Min_ram | Status | Checksum | Tenant_Id | Tenant | is_guest_image | +--------------------------------------+-----------------------------------------+-------------+-----------+-----------+-----------+-------------+----------+---------+--------+----------------------------------+----------------------------------+--------+----------------+ | abf0fd6e-ec40-44ef-8fa2-cfb7187ea656 | CentOS-7-x86_64-GenericCloud-1711.qcow2 | qcow2 | 876740608 | false | true | true | 8192 | 0 | active | 317ecf7d1128e0e53cb285b8704dc3d3 | d53ea650bfe144da8ee8f3fba417b904 | system | false | +--------------------------------------+-----------------------------------------+-------------+-----------+-----------+-----------+-------------+----------+---------+--------+----------------------------------+----------------------------------+--------+----------------+ *** Total: 1 Pages: 1 Limit: 20 Offset: 0 Page: 1 *** # 查看 CentOS-7-x86_64-GenericCloud-1711.qcow2 的详情 $ climc image-show CentOS-7-x86_64-GenericCloud-1711.qcow2 +--------------------+-------------------------------------------------------------------------------------------------------------------+ | Field | Value | +--------------------+-------------------------------------------------------------------------------------------------------------------+ | can_delete | false | | can_update | true | | checksum | 317ecf7d1128e0e53cb285b8704dc3d3 | | created_at | 2020-06-16T09:17:57.000000Z | | delete_fail_reason | {\"error\":{\"class\":\"ForbiddenError\",\"code\":403,\"data\":{\"id\":\"image is protected\"},\"details\":\"image is protected\"}} | | disk_format | qcow2 | | domain_id | default | | fast_hash | 4c53ba2c464213ddc2a77c9b4c5ad3b7 | | id | abf0fd6e-ec40-44ef-8fa2-cfb7187ea656 | | is_data | false | | is_emulated | false | | is_guest_image | false | | is_public | false | | is_standard | true | | is_system | false | | min_disk | 8192 | | min_ram | 0 | | name | CentOS-7-x86_64-GenericCloud-1711.qcow2 | | oss_checksum | 317ecf7d1128e0e53cb285b8704dc3d3 | | owner | d53ea650bfe144da8ee8f3fba417b904 | | pending_deleted | false | | project_domain | Default | | project_src | local | | properties | {\"os_arch\":\"x86_64\",\"os_type\":\"Linux\"} | | protected | true | | public_scope | system | | size | 876740608 | | status | active | | tenant | system | | tenant_id | d53ea650bfe144da8ee8f3fba417b904 | | update_version | 8 | | updated_at | 2020-06-16T09:19:24.000000Z | +--------------------+-------------------------------------------------------------------------------------------------------------------+ ","excerpt":"Web界面操作 列表 支持通过搜索框查询镜像。\n详情 该功能用于查看系统镜像的详细信息。\n 在系统镜像页面，单击镜像名称项，进入系统镜像详情 …","ref":"/zh/docs/onpremise/image/tutorial/query/","title":"查询镜像"},{"body":"你可能需要自己定制发行版的镜像，用于给不同的业务使用。本文介绍如何制作镜像。\n可以通过下载发行版操作系统的 iso , 然后本地启动虚拟机，将 iso 安装到虚拟机的磁盘，然后保存该磁盘，这个磁盘就可以作为镜像上传到 glance，但是这种方法人工参与的步骤太多，容易出错。\n推荐使用 packer 这个工具来自动化制作镜像，详细操作可以参考对应的文档 https://www.packer.io/docs/index.html 。\nhttps://github.com/yunionio/service-images 仓库包含了一些我们使用 packer 制作镜像的配置，可以参考使用。\n镜像制作流程  提前准备好标准ISO镜像，支持用户从镜像市场-ISO界面导入或直接上传ISO镜像。 在虚拟机列表中新建虚拟机，选择“从ISO启动”并选择对应的ISO镜像，创建成功后，并\u0008通过VNC终端进行按照界面提示安装操作系统。  说明  推荐使用CentOS Minimal操作系统。 Ubuntu/Debian镜像在安装过程中建议选择“No automatic updates”并安装OpenSSH Server软件。   根据镜像的操作系统类型进行不同的优化配置。  CentOS镜像：请参考CentOS镜像优化章节。 Ubuntu/Debian镜像：请参考Ubuntu/Debian镜像优化章节。 Windows镜像：请参考Windows镜像优化章节。   (可选)多平台通用镜像配置，如制作的镜像需要在公有云平台上使用，除上述优化配置外，还需要在Linux系统安装配置cloud-init，Windows系统安装配置Cloudbase-init。 镜像优化完成后，需要将虚拟机关机。 单击关机状态的虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “保存镜像” 菜单项，将虚拟机保存为系统镜像。 镜像保存完成后，用户可在虚拟机列表中新建虚拟机，选择“自定义镜像”并选择上一步骤保存的镜像，使用制作好的镜像创建虚拟机，验证镜像是否制作成功。  CentOS镜像优化 以CentOS 7 minimal镜像为例介绍镜像优化方法。\n  CentOS 7 Minimal操作系统安装完成后的虚拟机默认不能联网，需要修改/etc/sysconfig/network-scripts/ifcfg-eth0文件，将\"ONBOOT=no\"改为\"ONBOOT=yes\"。\n# 请根据实际网卡名称修改对应的配置文件 $ vi /etc/sysconfig/network-scripts/ifcfg-eth0 # 请根据实际网卡名称修改对应的配置文件 # 修改配置文件内容 ONBOOT=yes   禁用selinux，修改/etc/selinux/config文件，将\"SELINUX=enforcing\"改为\"SELINUX=disabled\"。修改完成后，重启系统生效。\n$ vi /etc/selinux/config # 修改配置文件内容，修改完成后保存。 SELINUX=disabled # 重启使配置生效 $ reboot   将必要的kernel module加入启动initram.img。\n$ vi /etc/dracut.conf # 修改配置文件，去掉add_drivers+前面#注释，并在引号中添加如下内容，修改完成后保存。 add_drivers+=\" hpsa mptsas mpt2sas mpt3sas megaraid_sas mptspi virtio virtio_ring virtio_pci virtio_scsi virtio_blk vmw_pvscsi \" # 使配置生效 # dracut -f   关闭网卡持久化功能，保证CentOS 7中网卡名称为“eth0，eth1”形式。修改/etc/default/grub文件，在GRUB_CMDLINE_LINUX中添加\"net.ifnames=0 biosdevname=0\"参数。\n$ vi /etc/default/grub # 修改配置文件，修改完成后保存。 GRUB_CMDLINE_LINUX=\"crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet net.ifnames=0 biosdevname=0\" # 使配置生效 $ grub2-mkconfig -o /boot/grub2/grub.cfg   根据需求安装常用软件。\n# 仅为举例，请根据实际需求安装常用软件。 $ yum install net-tools git wget vim pcre-tools ntp epel-release -y   禁用firewalld和NetworkManager服务。\n$ systemctl disable firewalld NetworkManager   启用时间网络同步，支持使用ntp或chrony保持时间同步。\n# 安装ntp或chrony软件 $ yum install ntp/chrony -y # 启用ntp或chronyd服务 $ systemctl enable ntpd/chronyd   修改时区为CST。\n$ timedatectl set-timezone Asia/Shanghai # 查看当前时区 $ timedatectl status   ssh服务优化，修改/etc/ssh/sshd_config文件，将PermitRootLogin属性修改为yes 将UseDNS属性修改为no。\n$ vi /etc/ssh/sshd_config #分别找到PermitRootLogin属性和UseDNS属性 PermitRootLogin yes UseDNS no   Ubuntu/Debian镜像优化 以ubuntu-16.04.6-server-amd64.iso为例，介绍Ubuntu和Debian镜像的优化方法。Ubuntu系统安装完成后，默认使用普通权限用户。\n  ssh服务优化，修改/etc/ssh/sshd_config文件，将PermitRootLogin属性修改为yes 将UseDNS属性修改为no，若没有上述属性，请添加属性。\n$ sudo vi /etc/ssh/sshd_config # 分别找到PermitRootLogin属性和UseDNS属性 PermitRootLogin yes UseDNS no   在/etc/init.d/目录下创建一个名称为ssh-initkey的自启动脚本。\n$ sudo touch /etc/init.d/ssh-initkey $ sudo vi /etc/init.d/ssh-initkey # 脚本内容如下： #! /bin/sh ### BEGIN INIT INFO # Provides: ssh-initkey # Required-Start: # Required-Stop: # X-Start-Before: ssh # Default-Start: 2 3 4 5 # Default-Stop: # Short-Description: Init ssh host keys ### END INIT INFO PATH=/sbin:/usr/sbin:/bin:/usr/bin . /lib/init/vars.sh . /lib/lsb/init-functions do_start() { ls /etc/ssh/ssh_host_* \u003e /dev/null 2\u003e\u00261 if [ $? -ne 0 ]; then dpkg-reconfigure openssh-server fi } case \"$1\" in start) do_start ;; restart|reload|force-reload) echo \"Error: argument '$1' not supported\" \u003e\u00262 exit 3 ;; stop) ;; *) echo \"Usage: $0start|stop\" \u003e\u00262 exit 3 ;; esac   ssh-initkey脚本配置完成后，还需要增加可执行权限，并将脚本添加到系统启动脚本目录。\n$ sudo chmod +x /etc/init.d/ssh-initkey $ sudo /usr/sbin/update-rc.d ssh-initkey defaults $ sudo /usr/sbin/update-rc.d ssh-initkey enable   （Ubuntu 16.04以上版本设置）关闭网卡持久化功能，保证网卡名称为“eth0，eth1”形式。修改/etc/default/grub文件，在GRUB_CMDLINE_LINUX中添加\"net.ifnames=0 biosdevname=0\"参数。\n$ sudo vi /etc/default/grub # 配置GRUB_CMDLINE_LINUX参数 GRUB_CMDLINE_LINUX=\"net.ifnames=0 biosdevname=0\" # 使配置生效 $ sudo /usr/sbin/update-grub   (若Ubuntu未关闭自动更新)关闭自动更新需要修改/etc/apt/apt.conf.d/10periodic文件，将文件中的\"Update-Package-Lists\"参数设置为0。\n$ sudo vi /etc/apt/apt.conf.d/10periodic # 配置修改 APT::Periodic::Update-Package-Lists \"1\";   至此，虚拟机优化完成。\n  Windows镜像优化 安装Virtio驱动    操作系统版本 Virtio驱动中对应名称     Windows XP xp   Windows 7 w7   Windows 8 w8   Windows 8.1 w8.1   Windows 10 w10   Windows Server 2003 2k3   Windows Server 2008 2K8   Windows Server 2008 R2 2k8R2   Windows Server 2012 2k12   Windows Server 2012 R2 2k12R2   Windows Server 2016 2k16      在镜像市场的ISO页面导入Virtio驱动，并挂载到虚拟机上。\n  在虚拟机中打开挂载的驱动文件夹，根据虚拟机的操作系统版本（如本例为Windows server 2016），在驱动文件夹页面的搜索框中搜索“2k16”，并将所有包含2k16的文件夹复制到虚拟机的其他文件夹中（如文档文件夹）。\n  在文档文件夹中打开“2k16\u003eamd64”文件夹，该文件夹中包含所有Windows Server 2016中的驱动文件。在该文件夹的地址显示框中输入cmd或同时按“shift”键和鼠标右键，在此处打开命令窗口，打开命令提示符对话框。\n  使用以下命令安装全部驱动。\npnputil -i -a *.inf   设置系统时间 Windows虚拟机上的时间默认会与北京时间差8个小时，需要对系统进行配置，将其显示为北京时间。\n 在运行栏中输入regedit，打开注册表。 在HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\TimeZoneInformation下，鼠标右键新建DWORD(32-bit)，命名为RealTimeIsUniversal，值设置为1。  禁用快速启动 （可选）若是Windows 10操作系统的虚拟机需要禁用快速启动。请参考禁用方法。\n系统激活 请通过正规渠道激活Windows系统。\nsysprep封装 运行sysprep，消除个性化信息。\n 打开%WINDIR%/system32/sysprep目录，并在目录下创建unattend.xml文件，内容如下：  \u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e \u003cunattend xmlns=\"urn:schemas-microsoft-com:unattend\"\u003e \u003csettings pass=\"generalize\"\u003e \u003ccomponent name=\"Microsoft-Windows-Security-SPP\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\u003e \u003cSkipRearm\u003e0\u003c/SkipRearm\u003e \u003c/component\u003e \u003ccomponent name=\"Microsoft-Windows-PnpSysprep\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\u003e \u003cPersistAllDeviceInstalls\u003etrue\u003c/PersistAllDeviceInstalls\u003e \u003cDoNotCleanUpNonPresentDevices\u003etrue\u003c/DoNotCleanUpNonPresentDevices\u003e \u003c/component\u003e \u003c/settings\u003e \u003csettings pass=\"oobeSystem\"\u003e \u003ccomponent name=\"Microsoft-Windows-Shell-Setup\" processorArchitecture=\"amd64\" publicKeyToken=\"31bf3856ad364e35\" language=\"neutral\" versionScope=\"nonSxS\" xmlns:wcm=\"http://schemas.microsoft.com/WMIConfig/2002/State\"\u003e \u003cUserAccounts\u003e \u003cAdministratorPassword\u003e \u003cValue\u003e123@yunion\u003c/Value\u003e \u003cPlainText\u003etrue\u003c/PlainText\u003e \u003c/AdministratorPassword\u003e \u003c/UserAccounts\u003e \u003cDisplay\u003e \u003cColorDepth\u003e32\u003c/ColorDepth\u003e \u003cHorizontalResolution\u003e1024\u003c/HorizontalResolution\u003e \u003cRefreshRate\u003e60\u003c/RefreshRate\u003e \u003cVerticalResolution\u003e768\u003c/VerticalResolution\u003e \u003c/Display\u003e \u003cOOBE\u003e \u003cHideEULAPage\u003etrue\u003c/HideEULAPage\u003e \u003cNetworkLocation\u003eWork\u003c/NetworkLocation\u003e \u003cProtectYourPC\u003e1\u003c/ProtectYourPC\u003e \u003cSkipMachineOOBE\u003etrue\u003c/SkipMachineOOBE\u003e \u003cSkipUserOOBE\u003etrue\u003c/SkipUserOOBE\u003e \u003c/OOBE\u003e \u003c/component\u003e \u003c/settings\u003e \u003c/unattend\u003e  说明 由于Windows系统只支持VNC连接，无法直接将内容拷贝到虚拟机，可通过发送文字功能，在虚拟机输入法处于英文模式的时候，发送上述内容。  在该目录的地址显示框中输入cmd或同时按“shift”键和鼠标右键，在此处打开命令窗口，打开命令提示符对话框。输入以下命令，执行sysprep封装并关闭虚拟机。  \u003e sysprep /generalize /oobe /shutdown /unattend:unattend.xml 至此虚拟机优化完成。  Linux系统安装配置Cloud-init Cloud-init用于为Linux操作系统的虚拟机做系统初始化配置。详细介绍内容请参考cloud-init官网。\n安装cloud-init 在Linux操作系统中执行以下命令安装cloud-init。\n$ apt-get/yum install cloud-init 离线安装方式请参考腾讯云文档中心-Linux系统安装cloud-init或阿里云文档中心-安装cloud-init等。\n配置cloud-init 修改/etc/cloud/cloud.cfg文件，将disabled_root设置为0，ssh_pwauth设置为1。\n$ vi /etc/cloud/cloud.cfg # 修改配置文件，修改完成后保存。 disable_root: 0 ssh_pwauth: 1 Windows系统安装配置Cloudbase-init 请参考腾讯云文档中心-Windows操作系统安装Cloudbase-Init。\n","excerpt":"你可能需要自己定制发行版的镜像，用于给不同的业务使用。本文介绍如何制作镜像。\n可以通过下载发行版操作系统的 iso , 然后本地启动虚拟机， …","ref":"/zh/docs/onpremise/image/tutorial/create/","title":"制作镜像"},{"body":"入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/主机/弹性伸缩组” 菜单项，进入弹性伸缩组页面。\n","excerpt":"入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/主机/弹性伸缩组” 菜单项，进入弹性伸缩组页面。\n","ref":"/zh/docs/onpremise/scalinggroup/","title":"弹性伸缩组"},{"body":"cloudpods-operator 是单独编写的一个组件，作为一个长期运行的服务运行在 Kubernetes 集群内部，作用是自动搭建和维护 Cloudpods 所有服务。详细的介绍可以参考 cloudpods-operator 工作原理。\n简介 operator 在 K8S 里面创建一个叫做 OnecloudCluster 的资源，该资源里面定义了各个服务组件要使用的 docker 镜像仓库和版本，通过修改 OnecloudCluster 这个资源，可以实现对各个服务多方面的镜像版本控制。\n# 查看 OnecloudCluster 资源 $ kubectl get onecloudclusters.onecloud.yunion.io -n onecloud NAME KEYSTONE default registry.cn-beijing.aliyuncs.com/yunionio/keystone:archdev-v36 # 查看 default OnecloudCluster 资源的 YAML 详情 $ kubectl get onecloudclusters.onecloud.yunion.io -n onecloud default -o yaml # 进入 edit 编辑界面 $ kubectl edit onecloudclusters -n onecloud default 镜像控制 OnecloudCluster 资源的镜像版本控制的关键属性简介如下：\n   属性 作用 默认值     .spec.imageRepository 控制所有服务的镜像仓库地址 registry.cn-beijing.aliyuncs.com/yunionio   .spec.version 控制所有服务镜像的 tag 由部署时指定，比如 ‘v3.6.9’   .spec.$(组件名).repository 控制该组件镜像的仓库地址 默认没有设置，可以通过设置该值单独控制组件的镜像仓库   .spec.$(组件名).tag 控制该组件镜像的 tag 默认没有设置，可以通过设置该值单独控制组件的 tag    统一修改版本 通过修改 default onecloudcluster spec.imageRepository 和 spec.version 属性，就会把所有服务的镜像统一更改，以下是使用场景举例:\n 把所有的服务镜像通一修改到 archdev-v36，修改 spec.version  # 这里的 oc 是 onecloudcluster 的简写，也可以识别 $ kubectl edit oc -n onecloud default ... tolerations: - effect: NoSchedule key: node-role.kubernetes.io/master - effect: NoSchedule key: node-role.kubernetes.io/controlplane # 修改这里的 version ，然后所有服务对应 pod 里面的 image tag 都会变成 archdev-v36 version: archdev-v36 vpcAgent: disable: false image: registry.cn-beijing.aliyuncs.com/yunionio/vpcagent:archdev-v36 ... 修改所有服务镜像仓库到 registry.cn-beijing.aliyuncs.com/zexi 拉取镜像，修改 spec.imageRepository  $ kubectl edit oc -n onecloud default spec: ... tolerations: - effect: NoSchedule key: node-role.kubernetes.io/master - effect: NoSchedule key: node-role.kubernetes.io/controlplane # 这里修改 imageRepository 的值，所有的服务对应的 pod 里面的 image 都会从 `registry.cn-beijing.aliyuncs.com/zexi` 这个仓库拉取 imageRepository: registry.cn-beijing.aliyuncs.com/zexi influxdb: ... spec.imageRepository 和 spec.version 可以同时组合使用，这样就可以统一配置各个服务的镜像地址。  修改完这些属性后，可以查看 pods 的状态，会发现所有的 pods 都在重新拉取镜像启动。\n单独修改组件版本 通过修改各个组件里面的 spec.$(component).repository 和 spec.$(component).tag 属性，就会把这个服务对应的 deployment 或者 daemonset 的 image 修改。\n这两个属性设置 image 的优先级要高于外层的 spec.imageRepository 和 spec.version。也就是说通过修改组件的 repository 和 tag 属性，可以做到其它组件镜像不变的情况下，修改单个组件的 image ，这种机制在开发的时候有用。\n下面以 region 为例：\n 指定 spec.regionServer.repository 为 192.168.0.1:5000/yunionio 和 spec.regionServer.tag 为 lzx-dev，将会把 default-region deployment 里面的 image 改为: 192.168.0.1:5000/yunionio/region:lzx-dev。  $ kubectl edit oc -n onecloud default spec: ... regionServer: disable: false dnsDomain: cloud.onecloud.io # 这里设置 repository repository: 192.168.0.1:5000/yunionio # 这里设置 tag tag: lzx-dev dnsServer: 10.127.40.252 image: registry.cn-beijing.aliyuncs.com/yunionio/region:archdev-v36 imagePullPolicy: IfNotPresent replicas: 1 ... # 现在查看 default-region 这个 deployment # 会发现里面的 image 已经被 operator 按照 $(spec.regionServer.repository)/region:$(spec.regionServer.tag) 的格式修改了 $ kubectl get deployment -n onecloud default-region -o yaml | grep image: image: 192.168.0.1:5000/yunionio/region:lzx-dev image: 192.168.0.1:5000/yunionio/region:lzx-dev ","excerpt":"cloudpods-operator 是单独编写的一个组件，作为一个长期运行的服务运行在 Kubernetes 集群内部，作用是自动搭建和维 …","ref":"/zh/docs/development/operator-intro/","title":"Operator 相关"},{"body":"云管平台通过云账号与不同平台建立连接，并同步平台上的资源到云管平台上管理。一个账户对应的云资源归属域，不同域内资源隔离，可通过共享功能让其他域使用云账号资源。当系统未启用三级权限时，所有云资源都默认属于default域。\n","excerpt":"云管平台通过云账号与不同平台建立连接，并同步平台上的资源到云管平台上管理。一个账户对应的云资源归属域，不同域内资源隔离，可通过共享功能让其他 …","ref":"/zh/docs/multicloud/cloudaccounts/","title":"云账号"},{"body":"新建伸缩策略 该功能用于为弹性伸缩组设置伸缩策略，伸缩组将按照伸缩策略自动扩容或收缩。\n 在伸缩策略列表，单击列表上方 “新建” 按钮，弹出新建对话框。 设置以下参数。  名称：伸缩策略的名称。 策略类型：包括告警策略、定时策略和周期策略。  告警策略：根据伸缩组中的虚拟机资源使用率等条件来设置伸缩策略。 定时策略：在指定的时间对伸缩组进行扩容或收缩操作。 周期策略：在指定的周期内对伸缩组进行扩容或收缩操作。   当选择策略类型为“告警策略”时，需要配置以下参数：  触发条件：根据需求选择告警指标，包括CPU平均利用率、平均网络入流量、平均网络出流量、平均磁盘写速率、平均磁盘读速率；并设置告警指标大于、小于设定的目标值时执行伸缩活动。 连续出现次数：当上面的触发条件连续出现设定的次数时才会进行伸缩活动。 执行动作：当满足触发条件时，伸缩组需要执行的动作，包括增加N个实例、减少N个实例、或将实例数调整为N（其中调整实例数N需要大于等于最小值且小于等于最大值）。 默认冷却时间：当该伸缩活动执行完成后，即使伸缩组存在的任意告警策略满足触发条件，在设置的冷却时间内将不会执行伸缩动作。   当选择策略类型为“定时策略”时，需要配置以下参数：  触发时间：选择具体的日期和时间，当到达触发时间后，将会执行伸缩活动。 执行动作：当满足触发条件时，伸缩组需要执行的动作，包括增加N个实例、减少N个实例、或将实例数调整为N（其中调整实例数N需要大于等于最小值且小于等于最大值）。 默认冷却时间：当该伸缩活动执行完成后，即使伸缩组存在的任意告警策略满足触发条件，在设置的冷却时间内将不会执行伸缩动作。   当选择策略类型为“周期策略”时，需要配置以下参数：  重复周期：设置执行的周期，包括每天、每周、每月。 触发日期（星期）：当选择每周时，需要设置触发的星期；当选择每月时，需要选择触发的日期。 触发时间：具体执行策略的时间点。 有效时间：设置周期策略的开始日期和结束日期，仅在有效时间内执行伸缩策略。 执行动作：当满足触发条件时，伸缩组需要执行的动作，包括增加N个实例、减少N个实例、或将实例数调整为N（其中调整实例数N需要大于等于最小值且小于等于最大值）。 默认冷却时间：当该伸缩活动执行完成后，即使伸缩组存在的任意告警策略满足触发条件，在设置的冷却时间内将不会执行伸缩动作。     单击 “确定” 按钮，创建伸缩策略。  立即执行伸缩策略 该功能用于立即执行伸缩策略，而不用等到触发条件生效。立即执行后，伸缩组的期望实例数将会按照策略设置的执行动作进行更改。只有\"启用\"状态的伸缩策略可以立即执行。\n 在伸缩策略列表，单击\"启用\"状态的伸缩策略右侧操作列 “立即执行” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，立即执行策略，按照策略的执行动作更改期望实例数。  启用 该功能用于启用伸缩策略，只有伸缩策略处于启用状态才可以被执行或触发。\n单个启用\n 在伸缩策略列表，单击\"禁用\"状态的伸缩策略右侧操作列 “更多” 按钮，选择下拉菜单 “启用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，启用伸缩策略。  批量启用\n 在伸缩策略列表中勾选一个或多个\"禁用\"状态的伸缩策略，单击列表上方 “批量操作” 按钮，选择下拉菜单 “启用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，启用伸缩策略。  禁用 该功能用于禁用伸缩策略，禁用状态的伸缩策略无法被执行。\n单个禁用\n 在伸缩策略列表，单击\"启用\"状态的伸缩策略右侧操作列 “更多” 按钮，选择下拉菜单 “禁用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，禁用伸缩策略。  批量禁用\n 在伸缩策略列表中勾选一个或多个\"启用\"状态的伸缩策略，单击列表上方 “批量操作” 按钮，选择下拉菜单 “禁用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，禁用伸缩策略。  删除伸缩策略 该功能用于删除伸缩策略，在删除伸缩策略之前，请先禁用伸缩策略。\n删除单个伸缩策略\n 在伸缩策略列表，单击\"禁用\"状态的伸缩策略右侧操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除伸缩策略\n 在伸缩策略列表中勾选一个或多个\"禁用\"状态的伸缩策略，单击列表上方 “批量操作” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  当前实例 该功能用于查看伸缩组中当前存在的实例信息，支持移除当前实例。\n入口：在弹性伸缩组列表，单击伸缩组名称项，在进入弹性伸缩组详情页面中单击顶部“当前实例”页签，进入当前实例页面。\n查看当前实例  在当前实例页面，支持查看虚拟机的名称、IP、系统、密码、状态、配置、创建时间、宿主机、云账号等信息。  移除当前实例 该功能用于将虚拟机移除伸缩组，移除虚拟机将会修改期望实例数，比如移除一个虚拟机，期望实例数将减一。\n移除单个虚拟机\n 在当前实例页面，单击虚拟机右侧操作列 “移除” 按钮，弹出移除对话框。 设置移除方式。  移除并删除：将虚拟机移除伸缩组并彻底删除。 仅移除：仅将虚拟机移除伸缩组，移除的虚拟机还会显示在虚拟机列表。   单击 “确定” 按钮，根据移除方式执行操作。  批量移除\n 在当前实例列表中选择一个或多个实例，单击列表上方 “移除” 按钮，弹出移除对话框。 设置移除方式。  移除并删除：将虚拟机移除伸缩组并彻底删除。 仅移除：仅将虚拟机移除伸缩组，移除的虚拟机还会显示在虚拟机列表。   单击 “确定” 按钮，根据移除方式执行操作。  主机模板 该功能仅用于查看伸缩组选择的主机模板信息。\n 在弹性伸缩组列表，单击伸缩组名称项，在进入弹性伸缩组详情页面中单击顶部“主机模板”页签，进入主机模板页面。 在主机模板页面，支持查看主机模板的名称、配置、系统、系统镜像、计费方式、状态、VPC、项目、平台等信息。  ","excerpt":"新建伸缩策略 该功能用于为弹性伸缩组设置伸缩策略，伸缩组将按照伸缩策略自动扩容或收缩。\n 在伸缩策略列表，单击列表上方 “新建” 按钮，弹出 …","ref":"/zh/docs/onpremise/scalinggroup/tutorial/policy/","title":"伸缩管理"},{"body":"","excerpt":"","ref":"/zh/docs/quickstart/","title":"快速开始"},{"body":"专有网络VPC（Virtual Private Cloud）是一块逻辑隔离的网络空间。\n新建VPC 该功能用于创建专有网络VPC。\n 在VPC页面，单击顶部“本地IDC”页签，单击列表上方 “新建” 按钮，进入新建本地IDCVPC页面。 配置以下信息：  指定域：选择VPC的所属域。 名称：设置VPC的名称。 区域：选择VPC所属的区域。 目标网段：设置VPC网络的专用网段，VPC下的IP子网必须使用该网段下的地址，仅支持使用10.0.0.0/8，172.16.0.0/12，192.168.0.0/16网段作为VPC目标网段。   单击 “确定” 按钮，完成操作。  ","excerpt":"专有网络VPC（Virtual Private Cloud）是一块逻辑隔离的网络空间。\n新建VPC 该功能用于创建专有网络VPC。\n  …","ref":"/zh/docs/onpremise/network/tutorial/vpc/createvpc/","title":"新建VPC网络"},{"body":"新建二层网络 该功能用于新建Cloudpods平台的二层网络。\n 在二层网络页面，单击列表上方 “新建” 按钮，弹出新建新建对话框。 设置以下信息：  指定域：选择二层网络的所属域。 专有网络：选择本地区域以及本地VDC。 可用区：选择二层网络属于的可用区。 名称：设置二层网络的名称。 带宽：设置二层网络支持的网络带宽，包括百兆（100M）、千兆（1G）、双千兆（2x1G）、万兆（10G）、双万兆（2x10G）、25G、40G、100G。二层网络带宽主要为了统计网络利用率，来确定虚拟机的网络负载情况。   单击 “确定” 按钮。  修改属性 该功能用于调整二层网络的带宽和MTU（最大传输单元）值。\n 在二层网络页面，单击二层网络右侧操作列 “修改属性” 按钮，弹出修改属性对话框。 调整带宽和MTU值(取值范围：68字节 ~ 9216字节，通常设置为1500字节)，单击 “确定” 按钮。  ","excerpt":"新建二层网络 该功能用于新建Cloudpods平台的二层网络。\n 在二层网络页面，单击列表上方 “新建” 按钮，弹出新建新建对话框。 设置以 …","ref":"/zh/docs/onpremise/network/tutorial/default/createwire/","title":"新建二层网络"},{"body":"安全组及规则添加顺序一般为先新建安全组，并在安全组内添加出入方向的规则列表。\n新建安全组 目前内置三种安全组模板：\n 通用Web服务器：创建放通22，80，443，3389端口和ICMP协议的安全组规则。 开放所有端口：创建放通所有端口的安全组规则。 自定义：默认不设置任何规则，等安全组创建完成后，用户自定义设置安全组规则。   在安全组页面，单击列表上方 “新建” 按钮，弹出新建对话框。 选择指定项目、模板、设置安全组名称，单击 “确定” 按钮，完成安全组的创建。  批量追加规则 该功能用于批量为多个安全组添加相同规则。\n 在安全组列表中选择一个或多个安全组，单击 “批量追加规则” 按钮，弹出批量追加规则对话框。 配置以下参数：  设置规则方向，包括“入方向”或“出方向”。 选择类型，包括自定义、微软远程桌面（3389）、SSH（22）、HTTP（80）、HTTPS（443）、ping。  当选择自定义类型时，需要自定义配置所有参数。 当选择微软远程桌面（3389）、SSH（22）、HTTP（80）、HTTPS（443）、ping后，将会自动确定规则的协议和端口号（如ping类型，协议为ICMP、端口为ALL）。用户只需要配置目标、策略、优先级即可。   设置来源或目标。  当为入方向创建规则时，设置来源，即访问虚拟机的源IP地址或CIDR。 当为出方向创建规则时，设置目标，即虚拟机访问的目标IP或CIDR网段。 当勾选右下角任意IP时，目标自动设置为0.0.0.0/0。当设置单个IP时，格式为192.168.0.1，当设置CIDR网段时，格式为192.168.1.0/24。   设置协议，目前支持的协议为TCP、UDP、ICMP、任意协议，当选择任意协议时，将匹配所有端口。 设置端口：可设置1~65535之间的任意数值。 设置策略：包括允许和拒绝。 设置优先级：可设置1~100之间的任意数值，数值越大，代表规则的优先级越高，优先生效。   单击 “确定” 按钮，添加规则，按照上述操作为安全组添加对应规则。  配置规则 一般新建的安全组默认显示在第一个。需要用户在新建的安全组详情中设置对应规则。安全组详情页面分为”入方向“、”出方向“两部分。分别控制虚拟机入方向的流量以及出方向的流量。可分别在入方向或出方向创建规则，规则创建方式相同。\n新建规则  在安全组页面，单击安全组右侧操作列 “配置规则” 按钮，进入入方向页面。 分别在“入方向”或“出方向”页面，单击 “新建” 按钮，弹出新建规则对话框。 配置以下参数：  类型：包括自定义、微软远程桌面（3389）、SSH（22）、HTTP（80）、HTTPS（443）、ping。  当选择自定义类型时，需要自定义配置所有参数。 当选择微软远程桌面（3389）、SSH（22）、HTTP（80）、HTTPS（443）、ping后，将会自动确定规则的协议和端口号（如ping类型，协议为ICMP、端口为ALL）。用户只需要配置目标、策略、优先级即可。   来源/目标：设置流量的来源（入方向）或目标（出方向）。支持选择IP地址、CIDR和安全组。  IP地址和CIDR：填写单一IP地址或者选择CIDR网段，当勾选右下角任意IP时，目标自动设置为0.0.0.0/0。当设置单个IP时，格式为192.168.0.1，当设置CIDR网段时，格式为192.168.1.0/24。 安全组：选择安全组，所选择的安全组规则不会被添加到当前安全组，而是该安全组绑定虚拟机等资源可以作为来源/目标。目前只针对阿里云和腾讯云平台生效。   协议：目前支持的协议为TCP、UDP、ICMP、任意协议，当选择任意协议时，将匹配所有端口。 端口：可设置1~65535之间的任意数值。 策略：包括允许和拒绝。 优先级：可设置1~100之间的任意数值，数值越大，代表规则的优先级越高，优先生效。   单击 “确定” 按钮，添加规则，按照上述操作为安全组添加对应规则。  编辑规则 该功能用于编辑已有规则。\n 在安全组页面，单击安全组右侧操作列 “配置规则” 按钮，进入入方向页面。 单击“入方向”或“出方向”页面规则右侧操作列 “编辑” 按钮，弹出编辑对话框。 修改协议、策略、优先级等，单击 “确定” 按钮，完成操作。  克隆规则 该功能用于克隆已有规则。\n 在安全组页面，单击安全组右侧操作列 “配置规则” 按钮，进入入方向页面。 单击“入方向”或“出方向”页面规则右侧操作列 “克隆” 按钮，弹出克隆规则对话框。 修改相关参数，单击 “确定” 按钮，完成操作。  删除规则 该功能用于删除规则。支持单个或批量删除规则。\n单个删除\n 在安全组页面，单击安全组右侧操作列 “配置规则” 按钮，进入入方向页面。 单击“入方向”或“出方向”页面规则右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在安全组页面，单击安全组右侧操作列 “配置规则” 按钮，进入入方向页面。 在“入方向”或“出方向”页面中选择一条或多条规则，单击列表上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"安全组及规则添加顺序一般为先新建安全组，并在安全组内添加出入方向的规则列表。\n新建安全组 目前内置三种安全组模板：\n 通用Web服务器：创建 …","ref":"/zh/docs/onpremise/network/tutorial/secgroup/addsecgroup/","title":"新建安全组和规则"},{"body":"查看宿主机列表 该功能用于查看宿主机列表的信息。\n 在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/基础资源/宿主机” 菜单项，进入宿主机页面。 查看以下参数：  启用状态：表示宿主机是否能用于创建虚拟机，只有启用状态的宿主机可以创建虚拟机。 状态：宿主机的运行状态。 服务：服务即宿主机上的host服务，用于管理虚拟机。在线表示host服务正常运行，离线表示host服务异常或未运行。 说明 Cloudpods平台宿主机host服务离线的以下情况：\n 宿主机host服务启动时会检测宿主机是否安装了qemu、是否有nbd模块、是否有原生openvswitch内核模块等，当不符合以上任意一条时，宿主机服务将变为离线，并提示具体的错误信息。 当宿主机由管理员主动将host服务离线（管理员在控制节点执行ocadm node disable-host-agnet \u003cnode-name\u003e ）时，宿主机上虚拟机状态不变，用户可正常通过远程协议连接并使用虚拟机，但在云管平台不能对虚拟机进行管理操作； 若宿主机由region检测到异常离线时，宿主机上的虚拟机都将设置为unknown状态，无法正常使用。 私有云平台宿主机服务离线情况可能有宿主机关机或相关服务异常等。    IP：宿主机的管理IP。 #VM：宿主机上的虚拟机数量。 CPU架构：包括x86和ARM架构。宿主机和宿主机上的虚拟机CPU架构一致。如x86架构的宿主机只能创建x86架构的虚拟机。 物理CPU：宿主机上的物理CPU总数量及宿主机上运行状态的虚拟机CPU核数占宿主机物理CPU的百分比。 物理内存：宿主机上的物理内存总量及宿主机上运行状态的虚拟机内存容量占宿主机物理内存容量的百分比。 物理存储：宿主机上的物理存储总量及已分配的存储容量占存储总量的百分比。 SN：序列号等。 IPMI：IPMI信息，可通过IPMI信息远程连接宿主机。 初始账号：通过ssh连接宿主机使用的用户名和密码信息。    查看宿主机详情 该功能用于查看宿主机详细信息等。\n 在宿主机列表单击指定宿主机名称项，进入宿主机详情页面。 详情页面顶部菜单项支持对宿主机进行远程终端连接、启用、禁用、调整标签、调整超售比、回收物理机、进入维护模式、退出维护模式、删除等操作。 查看宿主机详细信息。  基本信息：包括宿主机的云上ID、ID、名称、状态、域、项目、共享范围、平台、启用状态、IP、MAC地址、服务、#VM、调度策略、host版本、硬件虚拟化、ISO启动、区域、可用区、云账号、创建时间、更新时间、备注。 品牌信息：包括宿主机的品牌名称、型号、序列号。 CPU：包括宿主机物理CPU核数、插槽数、超售比、虚拟CPU、当前超售比率、描述、GPU卡预留。 内存：包括宿主机内存物理容量(总量/已分配)、超售比、当前超售比率、系统预留(系统预留内存一般为宿主机实际内存的10%，且最大不会超过10GB)、GPU卡预留。 存储：包括宿主机根分区容量（已使用量/总量）、存储池容量（已使用量/总量）、类型、当前超售比率、无效存储（宿主机上状态非可用的磁盘容量总和）、GPU卡预留、适配器相关信息。 网络接口：包括宿主机的所有网卡信息，包括IP地址、MAC地址、子网掩码、类型以及速率。    查看宿主机资源统计信息 该功能用于查看宿主机容量统计、实时监控以及top5信息等。\n 在宿主机列表单击指定宿主机名称项，进入宿主机详情页面。 单击“仪表盘”页签，进入仪表盘页面。查看以下信息。  容量统计：以环形图的形式分别表示宿主机CPU、内存、本地存储、VM的总数量、已使用数量以及使用利用率信息。 TOP5：分别显示CPU使用率、网络入流量、网络出流量、磁盘读速率、磁盘写速率TOP5的虚拟机名称及对应值。 实时监控：以仪表盘的形式实时显示宿主机的系统负载、内存利用率、磁盘IO使用率、磁盘空间使用率、网卡入带宽使用率、网卡出带宽使用率。    查看宿主机上的虚拟机信息 该功能用于查看宿主机上的虚拟机信息，并支持对虚拟机进行管理操作等。\n 在宿主机列表单击指定宿主机名称项，进入宿主机详情页面。 单击“虚拟机”页签，进入虚拟机页面。 查看宿主机上的所有虚拟机信息，并支持对虚拟机进行管理操作。  查看宿主机网络信息 该功能用于查看宿主机的网络信息。\n 在宿主机列表单击指定宿主机名称项，进入宿主机详情页面。 单击“网络”页签，进入网络页面。 查看宿主机的网络信息，包括序号、MAC地址、网卡类型、IP地址、IP子网、二层网络、驱动。 当宿主机上的网卡未分配IP地址时，支持设置二层网络。单击网卡操作列 设置二层网络 按钮，在弹出的设置二层网络对话框中选择二层网络，单击 “确定” 按钮。  查看宿主机存储信息 该功能用于查看宿主机上的存储信息。\n 在宿主机列表单击指定宿主机名称项，进入宿主机详情页面。 单击“存储”页签，进入存储页面。 查看宿主机的存储信息，包括名称、容量、分配、浪费、存储类型、启用、挂载点。 支持对存储进行管理操作。  查看宿主机的GPU卡 该功能用于查看宿主机的GPU卡设备。\n 在宿主机列表单击指定宿主机名称项，进入宿主机详情页面。 单击“GPU”页签，进入GPU页面。 查看宿主机的GPU卡信息，包括设备类型、设备型号、关联主机。 支持对GPU卡进行管理操作。  查看宿主机上在回收站的虚拟机信息 该功能用于查看宿主机上在回收站的虚拟机的信息。\n 在宿主机列表单击指定宿主机名称项，进入宿主机详情页面。 单击“回收站”页签，进入回收站页面。 查看在回收站的虚拟机信息，支持对虚拟机进行清除或恢复操作。  查看宿主机的监控信息 该功能用于查看宿主机的监控信息。\n 在宿主机列表单击指定宿主机名称项，进入宿主机详情页面。 单击“监控”页签，进入监控页面。 查看以下监控信息。  以折线图的形式显示近1小时、近3小时、近6小时内的宿主机CPU使用率信息、系统负载情况、内存使用率、内存使用情况、磁盘使用率、磁盘使用情况、磁盘IO使用率、磁盘IOPS、网络入流量、网络出流量。  CPU使用率包括CPU使用率、CPU空闲率、用户空间占用CPU、内核空间占用CPU、等待输入输出的CPU时间占比。 系统负载情况包括系统1分钟平均负载、系统5分钟平均负载、系统15分钟平均负载、平均每个CPU核的系统1分钟平均负载、平均每个CPU核的系统5分钟平均负载、平均每个CPU核的系统15分钟平均负载。 内存使用情况包括内存使用量、内存剩余量、内存总量。 磁盘使用情况包括磁盘使用量、磁盘剩余量、磁盘总量。 磁盘IOPS包括磁盘当前每秒平均读IO次数、磁盘当前每秒平均写IO次数）     支持对上述监控信息设置监控告警。  单击监控指标右侧 “设置监控告警” 按钮，弹出新建监控告警对话框。 监控指标项已固定，设置查询周期、比较运算符、阈值、告警级别、告警方式、并选择告警接收人，单击 “确定” 按钮，新建告警。    查看硬件日志 只有由物理机转换为宿主机的详情页面支持查看硬件日志。\n 在宿主机列表单击指定宿主机名称项，进入宿主机详情页面。 单击“硬件日志”页签，进入硬件日志页面。 支持设置终止时间查询指定时间之前的硬件日志信息。 当日志信息较多时，可单击列表下面 “加载更多” 按钮，查看更多硬件日志信息。  ","excerpt":"查看宿主机列表 该功能用于查看宿主机列表的信息。\n 在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/基础资源/宿主机” 菜单 …","ref":"/zh/docs/onpremise/host/tutorial/viewhost/","title":"查看宿主机信息"},{"body":"如果需要构建内部私有云，就需要部署计算节点(宿主机)。计算节点主要负责虚拟机、网络和存储的管理，需要安装的组件如下:\n   组件 用途 安装方式 运行方式     host 管理 kvm 虚拟机和存储 - docker   host-deployer 虚拟机部署服务 - docker   sdnagent 管理虚拟机网络和安全组 - docker   openvswitch 虚拟机网络端口和流表配置 rpm systemd   qemu 运行虚拟机 rpm process   kernel Cloudpods 提供的内核 rpm -    环境   操作系统: CentOS 7.x\n  硬件要求:\n Virtualization: CPU 要支持虚拟化，用于虚拟机 KVM 加速 打开 iommu，VT-d: 用于 GPU 透传(不用GPU可以不开)    网络:\n 当前可用的网段: 虚拟机可以直接使用和计算节点所在的扁平网段，需要预先划分保留对应端给云平台虚拟机使用，防止被其它设备占用，最后 IP 冲突    备注:\n 如果是以测试为目的，可以拿一台虚拟机部署计算节点的服务，但可能无法使用 KVM 加速和 GPU 透传    安装依赖 计算节点所需的依赖以 rpm 的方式安装\n# 添加 yum 源 $ cat \u003c\u003cEOF \u003e/etc/yum.repos.d/yunion.repo [yunion] name=Packages for Yunion Multi-Cloud Platform baseurl=https://iso.yunion.cn/yumrepo-3.6 sslverify=0 failovermethod=priority enabled=1 gpgcheck=0 EOF # 禁用防火墙和selinux $ systemctl disable firewalld $ sed -i 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/selinux/config 安装 rpm 包\n$ yum --disablerepo='*' --enablerepo='yunion*' install -y \\  epel-release libaio jq libusb lvm2 nc ntp yunion-fetcherfs fuse fuse-devel fuse-libs \\  oniguruma pciutils spice spice-protocol sysstat tcpdump usbredir \\  yunion-qemu-2.12.1 yunion-executor \\  kernel-3.10.0-1062.4.3.el7.yn20191203 \\  kernel-devel-3.10.0-1062.4.3.el7.yn20191203 \\  kernel-headers-3.10.0-1062.4.3.el7.yn20191203 \\  kmod-openvswitch \\  openvswitch net-tools $ systemctl enable --now yunion-executor # 安装完成后需要重启进入我们的内核 $ reboot # 重启完成后，查看当前节点内核信息，确保为 yn 内核 $ uname -r 3.10.0-1062.4.3.el7.yn20191203.x86_64 安装 docker 和 kubelet 参考 “部署集群/环境准备” 的流程，安装好 docker 和 kubelet。\n安装配置 docker 安装 docker\n$ yum install -y yum-utils bash-completion # 添加 yunion Cloudpods rpm 源 $ yum-config-manager --add-repo https://iso.yunion.cn/yumrepo-3.6/yunion.repo $ yum install -y docker-ce-19.03.9 docker-ce-cli-19.03.9 containerd.io 配置 docker\n$ mkdir -p /etc/docker $ cat \u003c\u003cEOF \u003e/etc/docker/daemon.json { \"bridge\": \"none\", \"iptables\": false, \"exec-opts\": [ \"native.cgroupdriver=systemd\" ], \"data-root\": \"/opt/docker\", \"live-restore\": true, \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"100m\" }, \"registry-mirrors\": [ \"https://lje6zxpk.mirror.aliyuncs.com\", \"https://lms7sxqp.mirror.aliyuncs.com\", \"https://registry.docker-cn.com\" ] } EOF 启动 docker\n$ systemctl enable --now docker 安装配置 kubelet 从 Cloudpods rpm 的 yum 源安装 kubernetes 1.15.8，并设置 kubelet 开机自启动\n$ yum install -y bridge-utils ipvsadm conntrack-tools \\  jq kubelet-1.15.8-0 kubectl-1.15.8-0 kubeadm-1.15.8-0 $ echo 'source \u003c(kubectl completion bash)' \u003e\u003e ~/.bashrc \u0026\u0026 source ~/.bashrc $ source /etc/profile $ systemctl enable kubelet 安装完 kubernetes 相关的二进制后，还需要对系统做一些配置并启用 ipvs 作为 kube-proxy 内部的 service 负载均衡\n# 禁用 swap $ swapoff -a # 如果设置了自动挂载 swap，需要去 /etc/fstab 里面注释掉挂载 swap 那一行 # 关闭 selinux $ setenforce 0 $ sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config # 禁用 firewalld $ systemctl stop firewalld $ systemctl disable firewalld # 禁用 NetworkManager $ systemctl stop NetworkManager $ systemctl disable NetworkManager $ ps -ef|grep dhcp | awk '{print $2}' |xargs kill -9 # 做一些 sysctl 的配置, kubernetes 要求 $ modprobe br_netfilter $ cat \u003c\u003cEOF \u003e\u003e /etc/sysctl.conf net.bridge.bridge-nf-call-iptables=1 net.bridge.bridge-nf-call-ip6tables=1 net.ipv4.ip_forward=1 EOF $ sysctl -p # 配置并开启 ipvs $ cat \u003c\u003cEOF \u003e /etc/sysconfig/modules/ipvs.modules #!/bin/bash ipvs_modules=\"ip_vs ip_vs_lc ip_vs_wlc ip_vs_rr ip_vs_wrr ip_vs_lblc ip_vs_lblcr ip_vs_dh ip_vs_sh ip_vs_fo ip_vs_nq ip_vs_sed ip_vs_ftp nf_conntrack_ipv4\" for kernel_module in \\${ipvs_modules}; do /sbin/modinfo -F filename \\${kernel_module} \u003e /dev/null 2\u003e\u00261 if [ $? -eq 0 ]; then /sbin/modprobe \\${kernel_module} fi done EOF $ chmod 755 /etc/sysconfig/modules/ipvs.modules \u0026\u0026 bash /etc/sysconfig/modules/ipvs.modules \u0026\u0026 lsmod | grep ip_vs 控制节点操作 以下操作在控制节点进行。\n创建计算节点所在的网段 我的环境计算节点的 ip 为 10.168.222.140，就创建一个对应的 计算节点(host)网段。\n提示 需要根据自己的计算节点环境创建对应的网段，如果不创建该网段，计算节点就没法注册进来。  # 查看当前环境的 zone $ climc zone-list +--------------------------------------+-------+--------+----------------+ | ID | Name | Status | Cloudregion_ID | +--------------------------------------+-------+--------+----------------+ | f73a2120-1206-45fa-8d43-de374ab0f494 | zone0 | enable | default | +--------------------------------------+-------+--------+----------------+ # 在 zone0 里面创建一个 wire bcast0，该资源抽象计算节点所在的二层广播域信息 $ climc wire-create zone0 bcast0 1000 # 在 wire bcast0 之上创建一个计算节点的网络，计算节点的 host 服务注册会用到，如果 host 注册时没有在云平台找到对应的网络，将会注册失败 $ climc network-create --gateway 10.168.222.1 --server-type baremetal bcast0 adm0 10.168.222.140 10.168.222.140 24 计算节点(host)操作 以下操作在计算节点进行，计算节点也叫 host，私有云计算节点上面会运行 host 服务来管理 kvm 虚拟机。\n配置 host 服务 参考 “添加节点/获取加入集群token” 的流程获取join所需的信息\n# 使用 ocadm join 来创建一台计算节点 # 可选参数 --host-networks: 配置host服务的网络，比如: 'eth0/br0/10.168.222.140', eth0是物理网卡，br0是网桥名称，10.168.222.140是宿主机的ip # 获取计算节点 IP $ host_addr=$(ip route get 1 | awk '{print $NF;exit}') $ echo $host_addr 10.168.222.140 # 可选参数 --host-local-image-path: 配置host服务磁盘的存储路径，比如: '/opt/cloud/workspace/disks' # 注意：容器部署的host服务只会挂载/opt/cloud目录 # 如果有其他挂载点需要bind mount到/opt/cloud下，可在fstab中添加一行如'/src /opt/cloud/dst none defaults,bind 0 0' # 可选参数 --host-hostname: 配置宿主机的hostname, 比如: 'node1' $ ./ocadm join $api_server_addr \\  --enable-host-agent \\  --token $token \\  --discovery-token-unsafe-skip-ca-verification # 然后等待宿主机上的host pod和host-deployer pod为running状态 控制节点启用 host 回到控制节点，启用刚才上报的计算节点，只有启用的宿主机才能运行虚拟机。\n# 使用 climc 查看注册的 host 列表 $ climc host-list +--------------------------------------+-------------------------+-------------------+----------------+----------------------------+---------+---------+-------------+----------+-----------+------------+---------------+--------------+------------+-------------------------+--------------+ | ID | Name | Access_mac | Access_ip | Manager_URI | Status | enabled | host_status | mem_size | cpu_count | node_count | sn | storage_type | host_type | version | storage_size | +--------------------------------------+-------------------------+-------------------+----------------+----------------------------+---------+---------+-------------+----------+-----------+------------+---------------+--------------+------------+-------------------------+--------------+ | 3830870e-a499-459d-89df-bb6979b5e1ff | lzx-allinone-standalone | 00:22:39:4c:6c:e9 | 10.168.222.140 | http://10.168.222.140:8885 | running | false | online | 8192 | 4 | 1 | Not Specified | rotate | hypervisor | master(7ab047419092301) | 50141 | +--------------------------------------+-------------------------+-------------------+----------------+----------------------------+---------+---------+-------------+----------+-----------+------------+---------------+--------------+------------+-------------------------+--------------+ *** Total: 0 Pages: 0 Limit: 20 Offset: 0 Page: 1 *** # 启动 host $ climc host-enable lzx-allinone-standalone 创建虚拟机测试 上传 cirrors 测试镜像 # 下载 cirros 测试镜像 $ wget https://iso.yunion.cn/yumrepo-2.10/images/cirros-0.4.0-x86_64-disk.qcow2 # 将镜像上传到 glance $ climc image-upload --format qcow2 --os-type Linux --min-disk 10240 cirros-0.4.0-x86_64-disk.qcow2 ./cirros-0.4.0-x86_64-disk.qcow2 # 查看上传的镜像 $ climc image-list +--------------------------------------+--------------------------------+-------------+----------+-----------+----------+---------+--------+----------------------------------+ | ID | Name | Disk_format | Size | Is_public | Min_disk | Min_ram | Status | Checksum | +--------------------------------------+--------------------------------+-------------+----------+-----------+----------+---------+--------+----------------------------------+ | 63f6f2af-4db2-4e30-85f5-0ad3baa27bd9 | cirros-0.4.0-x86_64-disk.qcow2 | qcow2 | 22806528 | false | 30720 | 0 | active | 76dc07d1a730a92d0db7fb2d3c305ecd | +--------------------------------------+--------------------------------+-------------+----------+-----------+----------+---------+--------+----------------------------------+ # 如果使用虚拟机作为计算节点，存储可能不大，可以把镜像的默认大小30g调整到10g $ climc image-update --min-disk 10240 cirros-0.4.0-x86_64-disk.qcow2 创建测试网络 下面是随机创建了一个主机间不可达的网络用于测试，如果有划分好的扁平二层可用网络，可以直接拿来给虚拟机使用。\n$ climc network-create --gateway 10.20.30.1 --server-type guest bcast0 vnet0 10.20.30.2 10.20.30.254 24 $ climc network-public vnet0 创建虚拟机 # 创建虚拟机 testvm01，512M内存, 1个CPU, 系统盘 10g, 第二块磁盘 5g 格式化为 ext4 并挂载到 /opt 的虚拟机 $ climc server-create --auto-start --allow-delete \\ \t--disk cirros-0.4.0-x86_64-disk.qcow2:10g --disk 5g:ext4:/opt \\ \t--net vnet0 --ncpu 1 --mem-spec 512M testvm01 # 查看创建的虚拟机，1分钟后应该会变为 running 状态 $ climc server-list --details +--------------------------------------+----------+--------------+--------------+-------+---------+------------+-----------+----------+-----------------------------+------------+---------+-------------------------+--------+-----------+ | ID | Name | Billing_type | IPs | Disk | Status | vcpu_count | vmem_size | Secgroup | Created_at | Hypervisor | os_type | Host | Tenant | is_system | +--------------------------------------+----------+--------------+--------------+-------+---------+------------+-----------+----------+-----------------------------+------------+---------+-------------------------+--------+-----------+ | bcda7d18-decc-4b5f-8654-2d201a84d1fb | testvm01 | postpaid | 10.20.30.254 | 35840 | running | 1 | 512 | Default | 2019-09-23T05:08:49.000000Z | kvm | Linux | lzx-allinone-standalone | system | false | +--------------------------------------+----------+--------------+--------------+-------+---------+------------+-----------+----------+-----------------------------+------------+---------+-------------------------+--------+-----------+ *** Total: 0 Pages: 0 Limit: 20 Offset: 0 Page: 1 *** # 获取虚拟机登录信息 $ climc server-logininfo testvm01 +-----------+------------------------------------------+ | Field | Value | +-----------+------------------------------------------+ | login_key | 49wqh5OWGW3jSr1A8RfrMoH69iRRECzaMZITBA== | | password | zS27FwwUFr96 | | updated | 2019-09-23T05:11:29.306403Z | | username | root | +-----------+------------------------------------------+ # 在计算节点联通测试网络(如果你是直接用的二层网络，应该能直接 ping 通虚拟机的 ip 了，不需要做这一步) $ ip address add 10.20.30.1/24 dev br0 # 用之前 server-logininfo 命令获取的用户名密码，直接登录到虚拟机里面 $ ssh root@10.20.30.254 PING 10.20.30.254 (10.20.30.254) 56(84) bytes of data. 64 bytes from 10.20.30.254: icmp_seq=1 ttl=64 time=1.31 ms # 如果网络不通，也可以通过 vnc 的方式打开虚拟机的 tty 登录界面，操作如下 # 打开 vnc 链接，用浏览器打开下面的链接 # 打开 vnc 链接时会出现不安全认证，导致 websocket 无法握手，需要在浏览器信任 webconsole server 对应的 endpoint $ climc endpoint-list --details | grep webconsole | grep public | 3da1e476aa7b4ff68e206754aed72d8f | region0 | 16120e8f3eec46dc86c59b3e426b0502 | webconsole | webconsole | https://10.168.222.218:8899 | public | true | # 然后用浏览器访问下 https://10.168.222.218:8899 , 信任该链接即可 # 在通过 webconsole-server 命令获取 vnc web 界面的链接地址，然后用浏览器打开该地址 $ climc webconsole-server testvm01 https://console.yunion.cn/web-console?access_token=FI-VXQSAonhzfSnxVTKCCbwHinp7swlRkmi-4p6s-4OfZpg6TG9YhWuwbHEUA1D7XoKu_w%3D%3D\u0026api_server=https%3A%2F%2F10.168.222.216%3A8899\u0026password=65xB2kaE\u0026protocol=vnc ","excerpt":"如果需要构建内部私有云，就需要部署计算节点(宿主机)。计算节点主要负责虚拟机、网络和存储的管理，需要安装的组件如下:\n   组件 用途 安装 …","ref":"/zh/docs/setup/host/","title":"添加计算节点"},{"body":"调度策略即实现具体的资源调度功能。通过某种条件将调度标签和偏好关联，当满足对应条件时，将会按照调度策略中的偏好，调度或排除带指定调度标签的资源。\n新建调度策略  在调度策略页面，单击列表上方 “新建” 按钮，弹出新建调度策略对话框。  名称：设置调度策略的名称。 偏好：包括尽量使用（prefer）、避免使用（avoid）、禁止使用（exclude）、必须使用（require）。  尽量使用（prefer）：调度时优先使用拥有这种调度标签的宿主机。如没有带这种调度标签的宿主机、也可以接受。 避免使用（avoid）：调度时尽量避免拥有这种调度标签的宿主机，如果有带这种调度标签的宿主机、也可以接受。 禁止使用（exclude）：调度时必须排除拥有这种调度标签的宿主机。 必须使用（require）：调度时必须使用拥有这种调度标签的宿主机。   条件：目前只支持设置项目。即当在条件中的项目中创建虚拟机，按照调度策略筛选符合条件的宿主机。   单击 “确定” 按钮。  调整策略 该功能用于修改调度策略。\n 在调度策略页面，单击调度策略操作列 “更多” 按钮，选择下拉菜单 “修改” 菜单项，弹出修改对话框。 设置偏好、选择调度标签，设置条件，单击 “确定” 按钮。  ","excerpt":"调度策略即实现具体的资源调度功能。通过某种条件将调度标签和偏好关联，当满足对应条件时，将会按照调度策略中的偏好，调度或排除带指定调度标签的资 …","ref":"/zh/docs/onpremise/scheduler/tutorial/addschedpolicy/","title":"添加调度策略"},{"body":"硬盘是虚拟机的存储文件。硬盘根据位置可分为本地硬盘和云硬盘，其中要求本地硬盘与虚拟机处于同一宿主机。本地硬盘不支持在硬盘列表中新建、挂载和卸载。要求云硬盘与虚拟机处于相同可用区，云硬盘支持新建、挂载、卸载、扩容、删除等操作。\n新建硬盘 该功能用于创建硬盘，新创建的硬盘需要挂载到虚拟机上才能正常使用。在本地IDC新建硬盘之前请先配置Ceph、NFS、GPFS等共享存储。\n 在硬盘页面，单击顶部“本地IDC”页签，单击列表上方 “新建” 按钮，进入新建硬盘页面。 配置以下参数：  指定项目：管理员和域管理员在新建硬盘时需要指定硬盘所属的项目。 区域：选择区域和可用区。 名称：设置硬盘的名称。 硬盘：选择磁盘类型并设置磁盘的容量大小。   单击 “确定” 按钮，完成操作。  硬盘扩容 该功能用于扩展系统盘或数据盘的大小以满足数据增长的需求。下表列出不同平台对于硬盘扩容的条件。硬盘扩容不支持减少硬盘容量。\n 在硬盘页面，单击硬盘右侧操作列 “扩容” 按钮，弹出扩容对话框。 调整硬盘容量，单击 “确定” 按钮。     平台 扩容限制     Cloudpods 无要求   VMware 系统盘仅支持关机扩容，数据盘无要求   ZStack 硬盘挂载的虚拟机处于运行中或关机状态；   OpenStack 只支持数据盘；   阿里云 只支持数据盘；硬盘挂载的虚拟机处于运行中或关机状态   AWS 无要求   Azure 硬盘挂载的虚拟机不处于运行中状态   腾讯云 只支持扩容数据盘   华为云 硬盘挂载的虚拟机处于运行中或关机状态   UCloud 硬盘挂载的虚拟机处于关机状态    挂载 该功能用于将待挂载状态的硬盘挂载到虚拟机上，供虚拟机使用。\n 在硬盘页面，单击硬盘右侧操作列 “更多” 按钮，选择下拉菜单 “挂载” 菜单项，弹出挂载对话框。 选择虚拟机后，单击 “确定” 按钮。 磁盘挂载成功后，需要登录到虚拟机中对挂载的磁盘进行分区格式化和挂载新分区的操作。  卸载 该功能是将挂载到虚拟机中的数据盘取消与虚拟机的关联，卸载的硬盘可挂载到其他虚拟机中。只支持卸载数据盘。如虚拟机为Linux系统，在卸载硬盘之前请先在虚拟机中等待umount命令执行成功后再卸载硬盘。\n 在硬盘页面，单击硬盘右侧操作列 “更多” 按钮，选择下拉菜单 “卸载” 菜单项，弹出卸载确认对话框。 单击 “确定” 按钮，完成操作。  新建快照 该功能用于为硬盘进行数据备份，创建快照的硬盘当故障后可恢复到快照之前的状态。\n注意  VMware平台、UCloud平台的硬盘不支持创建快照。 硬盘所属虚拟机状态异常或硬盘未挂载到虚拟机时不支持创建快照    在硬盘页面，单击硬盘右侧操作列 “更多” 按钮，选择下拉菜单 “新建快照” 菜单项，弹出新建快照对话框。 设置快照名称，单击 “确定” 按钮，创建快照。  设置自动快照 该功能用于为硬盘设置自动快照策略，设置完成后，硬盘将会在自动快照策略指定的时间点周期性的创建自动快照。\n 在硬盘页面，单击硬盘右侧操作列 “更多” 按钮，选择下拉菜单 “设置自动快照” 菜单项，弹出设置自动快照对话框。 开启自动快照：  勾选开启自动快照，并选择自动快照策略名称，如没有符合需求的自动快照策略，可单击右侧“创建自定义快照策略”超链接，在弹出的新建策略中配置相关参数，单击 “确定” 按钮，创建自动快照策略。 自动快照策略选择完成后，单击 “确定” 按钮。   关闭自动快照：勾选关闭自动快照，单击 “确定” 按钮。  更改项目 该功能用于更改未挂载磁盘的所属项目。\n 在硬盘页面，单击硬盘右侧操作列 “更多” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 选择域和项目，单击 “确定” 按钮。  同步状态 该功能用于获取硬盘的当前状态。\n单个同步状态\n 在硬盘页面，单击硬盘右侧操作列 “更多” 按钮，选择下拉菜单 “同步状态” 菜单项，同步硬盘状态。  批量同步状态\n 在硬盘列表中选择一个或多个硬盘，单击列表上方 “批量操作” 按钮，选择下拉菜单 “同步状态” 菜单项，同步硬盘状态。  删除 支持单个和批量删除硬盘，当磁盘未被挂载时，才可以删除。\n注意  OpenStack平台上硬盘以及Ceph盘存在快照时不允许删除； 包年包月类型的硬盘不支持删除。 阿里云、腾讯云、华为云、AWS、Azure、Google、Zstack、Dstack、OpenStack、Cloudpods等平台支持删除硬盘时同时删除快照。 华为云删除硬盘时会同时删除硬盘快照； Cloudpods平台删除Ceph盘时会同时删除硬盘快照；   单个删除\n 在硬盘页面，单击硬盘右侧操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 可勾选删除快照，单击 “确定” 按钮，完成操作。  批量删除\n 在硬盘列表中选择一个或多个硬盘，单击列表上方的 “删除” 按钮，弹出操作确认对话框。 可勾选删除快照，单击 “确定” 按钮，完成操作。  查看硬盘详情 该功能用于查看硬盘的详细信息、硬盘创建的快照信息以及日志信息。\n 单击硬盘名称项，进入硬盘详情页面。 详情页面顶部菜单项支持对硬盘进行管理操作。 查看硬盘的云上ID、ID、名称、状态、域、项目、平台、计费方式、容量、磁盘类型、是否挂载、格式、介质类型、虚拟机（名称和状态）、存储、快照策略、区域、可用区、云账号、创建时间、更新时间、备注等。  快照管理 该功能用于管理硬盘上的快照信息等。\n回滚硬盘 该功能用于将虚拟机的硬盘回滚到创建快照时的状态。回滚硬盘之前需要确保硬盘关联的虚拟机处于关机状态。\n 单击硬盘名称项，进入硬盘详情页面。 单击“快照”页签，进入快照页面。 单击快照右侧操作列 “回滚硬盘” 按钮，弹出回滚硬盘对话框。 单击 “确定” 按钮，将硬盘回滚到快照时刻。  同步状态 该功能用于获取硬盘快照的当前状态。\n单个同步状态\n 单击硬盘名称项，进入硬盘详情页面。 单击“快照”页签，进入快照页面。 单击硬盘快照右侧操作列 “同步状态” 按钮，同步硬盘快照的状态。  批量同步状态\n 单击硬盘名称项，进入硬盘详情页面。 单击“快照”页签，进入快照页面。 在快照列表中选择一个或多个硬盘快照，单击列表上方 “同步状态” 按钮，批量同步状态。  删除 该功能用于删除硬盘快照。\n单个删除\n 单击硬盘名称项，进入硬盘详情页面。 单击“快照”页签，进入快照页面。 单击快照右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 单击硬盘名称项，进入硬盘详情页面。 单击“快照”页签，进入快照页面。 在快照列表中选择一个或多个快照，单击列表上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"硬盘是虚拟机的存储文件。硬盘根据位置可分为本地硬盘和云硬盘，其中要求本地硬盘与虚拟机处于同一宿主机。本地硬盘不支持在硬盘列表中新建、挂载和卸 …","ref":"/zh/docs/onpremise/storage/tutorial/disk/disk/","title":"硬盘"},{"body":"入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/存储/硬盘” 菜单项，进入硬盘页面。\n入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/存储/硬盘快照” 菜单项，进入快照页面。\n入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/存储/主机快照” 菜单项，进入主机快照页面。\n入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/存储/自动快照策略” 菜单项，进入自动快照策略页面。\n","excerpt":"入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/存储/硬盘” 菜单项，进入硬盘页面。\n入口：在云管平台单击左上角导航菜 …","ref":"/zh/docs/onpremise/storage/tutorial/disk/","title":"磁盘管理"},{"body":"创建集群 该功能用于创建负载均衡集群。\n 单击列表上方 “新建” 按钮，弹出创建集群对话框。 选择区域、可用区，设置名称，单击 “确定” 按钮，创建集群。  删除集群 该功能用于删除负载均衡集群。\n注意  当集群下不存在负载均衡实例时才可以删除。 请提前将集群内的转发节点下线。    单击负载均衡集群右侧操作列 “删除” 按钮，弹出删除确认对话框。 请确认集群内的转发节点已全部下线后再勾选“删除集群会同时删除集群中的转发节点，请确认集群内转发节点已全部下线？” 单击 “确定” 按钮，删除集群。  查看集群详情 该功能用于查看集群的详细信息。\n 在负载均衡集群页面，单击集群名称项，进入集群详情页面。 查看集群的云上ID、ID、名称、状态、域、项目、可用区、创建时间、更新时间。  查看集群下的节点信息 该功能用于查看集群下的节点信息。\n 在集群详情页面，单击“节点”页签，进入节点页面。 查看集群下的节点信息，包括名称、集群、主备、IP、上一次心跳、可用区、软件版本。 支持对节点进行新建、部署、下线以及删除操作。  查看集群下的实例信息 该功能用于查看集群下的负载均衡实例信息，并支持对实例进行管理操作。\n 在集群详情页面，单击“实例”页签，进入实例页面。 查看属于集群的负载均衡实例信息，并支持对实例进行管理操作。  ","excerpt":"创建集群 该功能用于创建负载均衡集群。\n 单击列表上方 “新建” 按钮，弹出创建集群对话框。 选择区域、可用区，设置名称，单击 “确定” 按 …","ref":"/zh/docs/onpremise/lb/tutorial/lbcluster/lbcluster/","title":"管理负载均衡集群"},{"body":"新建负载均衡实例 创建本地IDC负载均衡实例之前需要先创建负载均衡集群和节点。\n 在负载均衡实例页面，单击顶部“全部”或“本地IDC”页签，单击列表上方 “新建” 按钮，进入新建本地IDC负载均衡实例页面。 设置以下参数：  指定项目：管理员和域管理员需要在创建负载均衡实例时指定负载均衡实例所属的项目。 区域：选择负载均衡所属的区域和可用区。 名称：设置负载均衡实例的名称。 平台：仅支持Cloudpods平台。 集群：选择同一区域和可用区下的负载均衡集群。 网络：选择IP子网，将随机在该IP子网中分配一个IP地址作为负载均衡的虚拟服务IP。目前仅支持经典网络（default VPC）。   单击 “确定” 按钮，完成操作。  更改集群 该功能用于更改负载均衡实例的所属集群，仅Cloudpods平台支持。\n单个实例更改集群\n 在负载均衡实例页面，单击实例右侧操作列 “更多” 按钮，选择下拉菜单 “更改集群” 菜单项，弹出更改集群对话框。 选择集群，单击 “确定” 按钮。  批量更改集群\n 在负载均衡实例列表中选择一个或多个Cloudpods平台的实例，单击列表上方 “批量操作” 按钮，选择下拉菜单 “更改集群” 菜单项，弹出更改集群对话框。 选择集群，单击 “确定” 按钮。  启用实例 该功能用于启用\"禁用\"状态的负载均衡实例，使其可以提供负载均衡服务。\n单个启用\n 在负载均衡实例页面，单击实例右侧操作列 “启用” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量启用\n 在负载均衡实例列表中选择一个或多个\"禁用\"状态的实例，单击列表上方 “批量操作” 按钮，选择下拉菜单 “启用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  禁用实例 该功能用于禁用\"启用\"状态的负载均衡实例，禁用状态的实例无法提供负载均衡服务。\n单个禁用\n 在负载均衡实例页面，单击实例右侧操作列 “禁用” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量禁用\n 在负载均衡实例列表中选择一个或多个\"启用\"状态的实例，单击列表上方 “批量操作” 按钮，选择下拉菜单 “禁用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  删除实例 该功能用于删除负载均衡实例。\n单个删除\n 在负载均衡实例页面，单击实例右侧操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，删除实例。  批量删除\n 在负载均衡实例列表中选择一个或多个实例，单击列表上方 “批量操作” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"新建负载均衡实例 创建本地IDC负载均衡实例之前需要先创建负载均衡集群和节点。\n 在负载均衡实例页面，单击顶部“全部”或“本地IDC”页签， …","ref":"/zh/docs/onpremise/lb/tutorial/lb/lb/","title":"负载均衡实例"},{"body":"Cloudpods平台提供的本地IDC的负载均衡功能需要管理员先部署负载均衡集群和LBAgent转发节点。\nCloudpods支持负载均衡多集群功能，用户可根据需求配置负载均衡集群以及集群下的转发节点LBAgent，部署集群和转发节点后才可以部署负载均衡实例等。\n集群为一组LBAgent转发节点的集合，同一时刻集群中只有一个转发节点处于MASTER，用于监控负载监控实例配置的IP地址和端口，并将用户请求转发给后端服务器处理等，当MASTER转发节点故障后，集群中的其他转发节点将自动切换成MASTER，保证业务高可用。\n负载均衡集群入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/负载均衡集群/集群” 菜单项，进入集群页面。\n负载均衡节点入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/负载均衡集群/节点” 菜单项，进入节点页面。\n","excerpt":"Cloudpods平台提供的本地IDC的负载均衡功能需要管理员先部署负载均衡集群和LBAgent转发节点。\nCloudpods支持负载均衡多 …","ref":"/zh/docs/onpremise/lb/tutorial/lbcluster/","title":"部署负载均衡集群"},{"body":"说明  部分厂商针对ceph存储做不同程度的优化，因此若使用开源版ceph提供的lib库，cloudpods在运行过程中可能会出现各种问题 cloudpods涉及ceph的服务只有host和host-deployer，同时qemu相关的程序也部分依赖ceph(nbd模块) 此文根据各个存储厂商涉及的优化，指导如何适配各类ceph存储  ceph对接cloudpods步骤  编译host、host-deployer二进制 打包librados、librbd库到host及host-deployer镜像 挂载ceph相关目录到host、host-deployer pod  环境准备 # 这里使用 CentOS 7.6 环境 # 安装 golang 编译器 $ yum install golang # 安装 docker 环境 $ curl -fsSL https://get.docker.com | bash -s docker --mirror aliyun # 启动 docker daemon $ systemctl start docker # 安装ceph依赖包 # 这里假设安装包分别是: # librados2-SDS_4.1.000.2-0.el7.centos.x86_64.rpm # librados-devel-SDS_4.1.000.2-0.el7.centos.x86_64.rpm # librbd1-devel-SDS_4.1.000.2-0.el7.centos.x86_64.rpm # librbd1-SDS_4.1.000.2-0.el7.centos.x86_64.2.rpm # librbd1-SDS_4.1.000.2-0.el7.centos.x86_64.rpm # 若存在相关依赖问题，请自行解决(或联系存储厂商) # 这里我碰见少一个基础库，可使用 yum install libibverbs.x86_64 解决 $ rpm -ivh librados2-SDS_4.1.000.2-0.el7.centos.x86_64.rpm librados-devel-SDS_4.1.000.2-0.el7.centos.x86_64.rpm librbd1-devel-SDS_4.1.000.2-0.el7.centos.x86_64.rpm librbd1-SDS_4.1.000.2-0.el7.centos.x86_64.rpm 准备中... ################################# [100%] 正在升级/安装... 1:librados2-2:SDS_4.1.000.2-0.el7.c################################# [ 25%] 2:librados-devel-2:SDS_4.1.000.2-0.################################# [ 50%] 3:librbd1-2:SDS_4.1.000.2-0.el7.cen################################# [ 75%] 4:librbd1-devel-2:SDS_4.1.000.2-0.e################################# [100%] 适配步骤 # 1. 克隆cloudpods代码, 可根据需要切换不同的release版本, 这里选择3.6版本 $ git clone -b release/3.6 https://github.com/yunionio/cloudpods.git # 2. 进入cloudpods目录 $ cd cloudpods # 3. 尝试编译host、host-deployer二进制 # 若无编译错误，可以忽略第4步 # 若出现类似 vendor/github.com/ceph/go-ceph/rados/conn.go:5:29: fatal error: rados/librados.h: No such file or directory 这样的错误，请检查rados、librbd相关的rpm包是否安装正常 $ make cmd/host cmd/host-deployer # 4. 解决编译错误(仅用适用于厂商修改了librados、librbd等基础库) # 说明: 修改go-ceph(vendor/github.com/ceph/go-ceph)库，需要咨询存储厂商,避免使用rbd存储时出现异常 $ make cmd/host go build -mod vendor -ldflags \"-w -X yunion.io/x/pkg/util/version.gitVersion=v3.6.19-26-g4038fdc2b1d560 -X yunion.io/x/pkg/util/version.gitCommit=4038fdc -X yunion.io/x/pkg/util/version.gitBranch=release/3.6 -X yunion.io/x/pkg/util/version.buildDate=2021-07-14T03:57:21Z -X yunion.io/x/pkg/util/version.gitTreeState=clean -X yunion.io/x/pkg/util/version.gitMajor=0 -X yunion.io/x/pkg/util/version.gitMinor=0\" -o /root/cloudpods/_output/bin/host yunion.io/x/onecloud/cmd/host # yunion.io/x/onecloud/cmd/host /usr/lib/golang/pkg/tool/linux_amd64/link: running gcc failed: exit status 1 /tmp/go-link-681866212/000006.o：在函数‘_cgo_3262cb398845_Cfunc_rbd_trash_list_cleanup’中： /tmp/go-build/cgo-gcc-prolog:895：对‘rbd_trash_list_cleanup’未定义的引用 collect2: 错误：ld 返回 1 # 出现如上的错误，咨询存储厂商，确认移除了开源版的rbd_trash_list_cleanup函数，因此需要移除go-ceph相应的rbd_trash_list_cleanup调用 $ git diff vendor/github.com/ceph/go-ceph/rbd/rbd.go diff --git a/vendor/github.com/ceph/go-ceph/rbd/rbd.go b/vendor/github.com/ceph/go-ceph/rbd/rbd.go index 6dfd249..fc19c36 100644 --- a/vendor/github.com/ceph/go-ceph/rbd/rbd.go +++ b/vendor/github.com/ceph/go-ceph/rbd/rbd.go @@ -945,38 +945,6 @@ func (snapshot *Snapshot) Set() error { return GetError(C.rbd_snap_set(snapshot.image.image, c_snapname)) } -// GetTrashList returns a slice of TrashInfo structs, containing information about all RBD images -// currently residing in the trash. -func GetTrashList(ioctx *rados.IOContext) ([]TrashInfo, error) { - var num_entries C.size_t - - // Call rbd_trash_list with nil pointer to get number of trash entries. - if C.rbd_trash_list(C.rados_ioctx_t(ioctx.Pointer()), nil, \u0026num_entries); num_entries == 0 { - return nil, nil - } - - c_entries := make([]C.rbd_trash_image_info_t, num_entries) - trashList := make([]TrashInfo, num_entries) - - if ret := C.rbd_trash_list(C.rados_ioctx_t(ioctx.Pointer()), \u0026c_entries[0], \u0026num_entries); ret \u003c 0 { - return nil, RBDError(ret) - } - - for i, ti := range c_entries { - trashList[i] = TrashInfo{ - Id: C.GoString(ti.id), - Name: C.GoString(ti.name), - DeletionTime: time.Unix(int64(ti.deletion_time), 0), - DefermentEndTime: time.Unix(int64(ti.deferment_end_time), 0), - } - } - - // Free rbd_trash_image_info_t pointers - C.rbd_trash_list_cleanup(\u0026c_entries[0], num_entries) - - return trashList, nil -} - // TrashRemove permanently deletes the trashed RBD with the specified id. func TrashRemove(ioctx *rados.IOContext, id string, force bool) error { c_id := C.CString(id) # 再次编译，报错: $ make cmd/host go build -mod vendor -ldflags \"-w -X yunion.io/x/pkg/util/version.gitVersion=v3.6.19-26-g4038fdc2b1d560 -X yunion.io/x/pkg/util/version.gitCommit=4038fdc -X yunion.io/x/pkg/util/version.gitBranch=release/3.6 -X yunion.io/x/pkg/util/version.buildDate=2021-07-14T06:07:09Z -X yunion.io/x/pkg/util/version.gitTreeState=dirty -X yunion.io/x/pkg/util/version.gitMajor=0 -X yunion.io/x/pkg/util/version.gitMinor=0\" -o /root/cloudpods/_output/bin/host yunion.io/x/onecloud/cmd/host # github.com/ceph/go-ceph/rbd vendor/github.com/ceph/go-ceph/rbd/rbd.go:30:28: could not determine kind of name for C.RBD_FEATURE_JOURNALING make: *** [cmd/host] 错误 2 # 相应的需要，移除 RBD_FEATURE_JOURNALING 定义 $ git diff vendor/github.com/ceph/go-ceph/rbd/rbd.go diff --git a/vendor/github.com/ceph/go-ceph/rbd/rbd.go b/vendor/github.com/ceph/go-ceph/rbd/rbd.go index 6dfd249..fa40475 100644 --- a/vendor/github.com/ceph/go-ceph/rbd/rbd.go +++ b/vendor/github.com/ceph/go-ceph/rbd/rbd.go @@ -27,7 +27,6 @@ const ( RbdFeatureObjectMap = C.RBD_FEATURE_OBJECT_MAP RbdFeatureFastDiff = C.RBD_FEATURE_FAST_DIFF RbdFeatureDeepFlatten = C.RBD_FEATURE_DEEP_FLATTEN - RbdFeatureJournaling = C.RBD_FEATURE_JOURNALING RbdFeatureDataPool = C.RBD_FEATURE_DATA_POOL RbdFeaturesDefault = C.RBD_FEATURES_DEFAULT @@ -945,38 +944,6 @@ func (snapshot *Snapshot) Set() error { return GetError(C.rbd_snap_set(snapshot.image.image, c_snapname)) } # 若存在其他编译错误，请咨询存储厂商对开源版ceph做出的改动，并据此更新go-ceph相应的代码, 直至 make cmd/host cmd/host-deployer 可以正常编译通过 镜像编译打包 # 找到基础so依赖库 $ whereis libsoftokn3.so libsqlite3.so.0 libfreeblpriv3.so libsoftokn3: /usr/lib64/libsoftokn3.so /usr/lib64/libsoftokn3.chk libsqlite3.so: /usr/lib64/libsqlite3.so.0 libfreeblpriv3: /usr/lib/libfreeblpriv3.chk /usr/lib/libfreeblpriv3.so /usr/lib64/libfreeblpriv3.chk /usr/lib64/libfreeblpriv3.so # 查看host程序依赖ceph相关的ceph库文件位置 $ ldd _output/bin/host | egrep '(rbd|ceph|rados)' librbd.so.1 =\u003e /lib64/librbd.so.1 (0x00007f3ae12dd000) librados.so.2 =\u003e /lib64/librados.so.2 (0x00007f3ae0fa5000) libceph-common.so.0 =\u003e /usr/lib64/ceph/libceph-common.so.0 (0x00007f3ad7c75000) # 这里需要根据链接文件找到真实的文件路径 $ readlink -f /lib64/librbd.so.1 /lib64/librados.so.2 /usr/lib64/ceph/libceph-common.so.0 /usr/lib64/libsoftokn3.so /usr/lib64/libsqlite3.so.0 /usr/lib64/libfreeblpriv3.so /usr/lib64/librbd.so.1.0.0 /usr/lib64/librados.so.2.0.0 /usr/lib64/ceph/libceph-common.so.0 /usr/lib64/libsoftokn3.so /usr/lib64/libsqlite3.so.0.8.6 /usr/lib64/libfreeblpriv3.so # 拷贝so库文件到指定目录 $ mkdir -p _output/lib/ $ cp /usr/lib64/librbd.so.1.0.0 /usr/lib64/librados.so.2.0.0 /usr/lib64/ceph/libceph-common.so.0 /usr/lib64/libsoftokn3.so /usr/lib64/libsqlite3.so.0.8.6 /usr/lib64/libfreeblpriv3.so _output/lib/ # 修改host Dockerfile $ git diff build/docker/Dockerfile.host diff --git a/build/docker/Dockerfile.host b/build/docker/Dockerfile.host index 97bc60b..6450361 100644 --- a/build/docker/Dockerfile.host +++ b/build/docker/Dockerfile.host @@ -4,6 +4,14 @@ MAINTAINER \"Yaoqi Wan wanyaoqi@yunionyun.com\" ENV TZ Asia/Shanghai -RUN apk add librados librbd RUN mkdir -p /opt/yunion/bin -ADD ./_output/alpine-build/bin/host /opt/yunion/bin/host + +ADD ./_output/bin/host /opt/yunion/bin/host +ADD ./_output/bin/.host.bin /opt/yunion/bin/.host.bin +ADD ./_output/bin/bundles/host /opt/yunion/bin/bundles/host +ADD ./_output/lib /usr/lib/ # 修改host-deployer Dockerfile $ git diff build/docker/Dockerfile.host-deployer diff --git a/build/docker/Dockerfile.host-deployer b/build/docker/Dockerfile.host-deployer index c6d55dd..e376823 100644 --- a/build/docker/Dockerfile.host-deployer +++ b/build/docker/Dockerfile.host-deployer @@ -6,4 +6,12 @@ ENV TZ Asia/Shanghai RUN mkdir -p /opt/yunion/bin -ADD ./_output/centos-build/bin/host-deployer /opt/yunion/bin/host-deployer +ADD ./_output/bin/host-deployer /opt/yunion/bin/host-deployer +ADD ./_output/bin/.host-deployer.bin /opt/yunion/bin/.host-deployer.bin +ADD ./_output/bin/bundles/host-deployer /opt/yunion/bin/bundles/host-deployer +ADD ./_output/lib /usr/lib/ # 切换编译方式，并且打包相关lib $ git diff scripts/docker_push.sh diff --git a/scripts/docker_push.sh b/scripts/docker_push.sh index f46161e..27deda0 100755 --- a/scripts/docker_push.sh +++ b/scripts/docker_push.sh @@ -76,9 +76,12 @@ build_bin() { env $BUILD_ARCH $BUILD_CGO make -C \"$SRC_DIR\" docker-alpine-build F=\"cmd/$1cmd/*cli\" fi ;; - host-deployer | telegraf-raid-plugin) + telegraf-raid-plugin) env $BUILD_ARCH $BUILD_CGO make -C \"$SRC_DIR\" docker-centos-build F=\"cmd/$1\" ;; + host-deployer | host) + GOOS=linux make cmd/$1 + ;; *) env $BUILD_ARCH $BUILD_CGO make -C \"$SRC_DIR\" docker-alpine-build F=\"cmd/$1\" ;; @@ -87,7 +90,7 @@ build_bin() { build_bundle_libraries() { - for bundle_component in 'baremetal-agent'; do + for bundle_component in 'baremetal-agent' 'host' 'host-deployer'; do if [ $1 == $bundle_component ]; then $CUR_DIR/bundle_libraries.sh _output/bin/bundles/$1 _output/bin/$1 break # 编译host、host-deployer镜像, 需替换自己的namespace $ TAG=v3.6-ceph REGISTRY=registry.cn-beijing.aliyuncs.com/{namespace} ./scripts/docker_push.sh host $ TAG=v3.6-ceph REGISTRY=registry.cn-beijing.aliyuncs.com/{namespace} ./scripts/docker_push.sh host-deployer 替换计算节点ceph库文件  为了避免计算节点qemu-image或qemu-system连接ceph集群时卡死 这里需要把上面提取的ceph rbd rados相关的so文件(_output/lib/)替换到计算节点相应的文件(若已经使用存储厂商的so库，此步骤忽略)  替换镜像\u0026挂载目录 # 将 image: registry.cn-beijing.aliyuncs.com/yunionio/host:v3.6.... 替换为上面打包好的镜像 # 修改 volumeMounts 相关选项,将存储厂商ceph所需要访问的目录, 挂载到相应的地方(可选) $ kubectl edit daemonsets. -n onecloud default-host # 将 image: registry.cn-beijing.aliyuncs.com/yunionio/host-deployer:v3.6.... 替换为上面打包好的镜像 # 修改 volumeMounts 相关选项,将存储厂商ceph所需要访问的目录, 挂载到相应的地方(可选) $ kubectl edit daemonsets. -n onecloud default-host-deployer ","excerpt":"说明  部分厂商针对ceph存储做不同程度的优化，因此若使用开源版ceph提供的lib库，cloudpods …","ref":"/zh/docs/development/ceph/","title":"Ceph对接"},{"body":"启用 baremetal-agent 之前需要部署 Cloudpods 集群，详见 “安装部署/部署集群” 。\n待集群准备完毕后需要指定集群中的一个 node 来部署 baremetal-agent 服务。\n注意 目前只能指定一个 node 来部署运行 baremetal-agent 服务，因为 baremetal-agent 服务是有状态的，不能多副本夸节点运行。  启用 baremetal-agent 在通过 pxe 引导流程中，baremetal-agent 只会处理来自 dhcp relay 服务器的请求, 所以你需要事先在交换机配置 dhcp relay 或者使用 Cloudpods host 服务的 dhcp relay 功能。\n如何配置 host 服务 启用 dhcp relay 注意 如果在交换机上配置了 dhcp relay，则不需要在这里配置计算节点的 dhcp_relay 了，可以跳过这一步。  # 登录到已经部署好计算节点的服务器上修改 /etc/yunion/host.conf，添加 dhcp_relay 配置项： dhcp_relay: - 10.168.222.198 # baremetal agent dhcp服务监听地址 - 67 # baremetal agent dhcp服务监听端口 # 然后重启host服务 $ kubectl get pods -n onecloud -o wide | grep host default-host-p6d8h 2/2 Running 0 78m 10.168.222.189 k8s-dev1 \u003cnone\u003e \u003cnone\u003e default-host-xdc7x 2/2 Running 0 78m 10.168.222.150 k8s-dev2 \u003cnone\u003e \u003cnone\u003e # 找到对应的 pod 删除等待 host 服务自动重启 $ kubectl delete pods -n onecloud default-host-xdc7x 启用 baremetal-agent 然后选择 node 启用 baremetal-agent。\n# $listen_interface 指的是 baremetal-agent 监听的网卡名称 $ ocadm baremetal enable --node $node_name --listen-interface $listen_interface # 观察 baremetal agent pod 状态查看是否启动成功 $ watch \"kubectl get pods -n onecloud | grep baremetal\" default-baremetal-agent-7c84996c9b-hhllw 1/1 Running 0 3m10s # 启动成功确认 baremetal-agent 注册到控制节点 $ climc agent-list +--------------------------------------+--------------------------+----------------+-----------------------------+---------+------------+------------------------------------------+--------------------------------------+ | ID | Name | Access_ip | Manager_URI | Status | agent_type | version | zone_id | +--------------------------------------+--------------------------+----------------+-----------------------------+---------+------------+------------------------------------------+--------------------------------------+ | f3c2c671-c41d-4f30-8d04-e022b49bb9b5 | baremetal-10.168.222.150 | 10.168.222.150 | https://10.168.222.150:8879 | enabled | baremetal | remotes/origin/master(5e415506120011509) | 6230b485-2e54-480e-8284-33360b8202a8 | +--------------------------------------+--------------------------+----------------+-----------------------------+---------+------------+------------------------------------------+--------------------------------------+ 部署完成后可以参考 “操作管理/物理机” 来进行对物理机的注册管理。\n禁用 baremetal-agent 可以在启用 baremetal-agent 的节点中选择节点禁止 baremetal-agent 调度到该节点。\nocadm baremetal disable --node $node_name ","excerpt":"启用 baremetal-agent 之前需要部署 Cloudpods 集群，详见 “安装部署/部署集群” 。\n待集群准备完毕后需要指定集群 …","ref":"/zh/docs/setup/baremetal/","title":"物理机管理服务"},{"body":"默认情况下部署好的版本是 开源版本(CE: Community Edition)，可以使用 ocadm cluster update 命令切换成 企业版本(EE: Enterprise Edition)。\n切换操作 # 切换到企业版 $ ocadm cluster update --use-ee --wait # 切换到开源版的 web 前端 $ ocadm cluster update --use-ce --wait ocadm cluster update --use-ee/--use-ce 命令会更新替换当前的 default-web deployment\n待所有pod启动后，由于开源版和企业版的前端分别依赖不同的 default-web configmap，直接切换过去会导致 default-web configmap 没有更新，web前端无法访问，因为需要删除web服务的nginx configmap，并重启 web 服务。\n# 删除 default-web 的 configmap 文件 $ kubectl delete configmap -n onecloud default-web # 重启 default-web 服务 $ kubectl rollout restart deployment -n onecloud default-web ","excerpt":"默认情况下部署好的版本是 开源版本(CE: Community Edition)，可以使用 ocadm cluster update 命令切 …","ref":"/zh/docs/setup/ce-ee-switch/","title":"切换到企业版"},{"body":"平台支持两种监控宿主机上虚拟机的信息，一是通过宿主机获取虚拟机的监控信息，该方式获取的监控数据误差较大，二是为虚拟机安装Agent，像虚拟机内存使用率、磁盘使用率指标无法直接通过宿主机获取，需要安装监控Agent。\n目前虚拟机监控指标分为两类。\n 基础监控，即支持通过宿主机获取虚拟机的监控信息。监控指标包括CPU使用率、内存使用率、网络入流量、网络出流量、磁盘读速率、磁盘写速率 Agent监控，即为虚拟机安装Agent后获取的监控信息。监控指标包括CPU使用率、内存使用率、网络入流量、网络出流量、磁盘使用率、磁盘读速率、磁盘写速率  虚拟机监控查询时间支持查看近1小时、近1天、近1周、近1月、近3月、近6月的性能监控信息，支持设置时间粒度，时间粒度大小与查看的时长有关。\n","excerpt":"平台支持两种监控宿主机上虚拟机的信息，一是通过宿主机获取虚拟机的监控信息，该方式获取的监控数据误差较大，二是为虚拟机安装Agent，像虚拟机 …","ref":"/zh/docs/onpremise/vminstance/tutorial/monitor/","title":"虚拟机监控"},{"body":"","excerpt":"","ref":"/en/docs/contact/","title":"Contact us"},{"body":"同步状态 该功能用于同步VPC的当前状态。\n单个同步状态\n 在VPC页面，单击VPC右侧操作列 “同步状态” 按钮，同步VPC状态。  批量同步状态\n 在VPC列表中选择一个或多个VPC，单击列表上方 “批量操作” 按钮，选择下拉菜单 “同步状态” 菜单项，批量同步状态。  更改域 该功能用于更改VPC的所属域。\n说明 更改域的条件：需同时满足\n 当前用户在管理后台。 在Cloudpods已开启三级权限。 VPC的共享范围为私有。   单个VPC更改域\n 在VPC页面，单击VPC右侧操作列 “更多” 按钮，选择下拉菜单 “更改域” 菜单项，弹出更改域对话框。 选择VPC所属的域，单击 “确定” 按钮。  批量更改域\n 在VPC列表中勾选一个或多个VPC，单击列表上方 “批量操作” 按钮，选择下拉菜单 “更改域” 菜单项，弹出更改域对话框。 选择VPC所属的域，单击 “确定” 按钮。  设置共享 该功能用于设置VPC的共享范围。\n域资源的共享范围有三种：\n 不共享（私有）：即域资源只能本域的用户可以使用。 域共享-部分（多域共享）：即域资源可以共享到指定域（一个或多个），只有域资源所在域和共享域下的用户可以使用域资源。 域共享-全部（全局共享）：即域资源可以共享给全部域使用，即系统中所有用户都可以使用域资源。  说明 设置共享的条件：需同时满足\n 当前用户在管理后台。 在Cloudpods已开启三级权限。   注意  私有云和公有云的VPC共享范围与云账号的共享范围有关。  当云账号不共享时，通过云账号同步下来的资源也不能共享。 当云账号启用共享时，通过云账号同步下来的资源也将随着云账号启用共享。 当云账号启用共享时，通过云账号同步下来的资源可以更改共享范围，请确保共享范围在云账号的共享范围内。 当云账号修改共享范围时，通过云账号同步下来的资源的共享范围要始终保持在云账号的共享范围内。如云账号共享A、B、C、D域，域资源共享A、C域，云账号修改共享范围为A、B域，则域资源只能共享到A域。 云账号共享云订阅时，通过云账号同步下来的域资源不能共享。     单个VPC设置共享\n 在VPC页面，单击VPC右侧操作列 “更多” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数：  当共享范围选择为“不共享”时，即域资源的共享范围为私有，仅本域的用户可以使用。 当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即域资源的共享范围为域共享-部分，只有域资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即域资源的共享范围为域共享-全部，系统中的所有用户都可以使用域资源。     单击 “确定” 按钮，完成操作。  批量设置共享\n 在VPC列表中选择一个或多个VPC，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数：  当共享范围选择为“不共享”时，即域资源的共享范围为私有，仅本域的用户可以使用。 当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即域资源的共享范围为域共享-部分，只有域资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即域资源的共享范围为域共享-全部，系统中的所有用户都可以使用域资源。     单击 “确定” 按钮，完成操作。  删除VPC 该功能用于删除VPC，支持单个或批量删除VPC。\n说明  本地IDC的Default专有网络不支持删除； 当VPC下有IP子网时不支持删除。 AWS平台的VPC删除时将会同步删除VPC下的路由表、安全组以及互联网网关。   单个删除\n 在VPC页面，单击VPC右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在VPC列表中选择一个或多个VPC，单击列表上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"同步状态 该功能用于同步VPC的当前状态。\n单个同步状态\n 在VPC页面，单击VPC右侧操作列 “同步状态” 按钮，同步VPC状态。  批量 …","ref":"/zh/docs/onpremise/network/tutorial/vpc/vpcoperation/","title":"VPC网络其他操作"},{"body":"更改域 该功能用于更改二层网络的所属域。\n说明 更改域的条件：需同时满足\n 当前用户在管理后台。 在Cloudpods已开启三级权限。 二层网络的共享范围为私有。   单个二层网络更改域\n 在二层网络页面，单击二层网络右侧操作列 “更多” 按钮，选择下拉菜单 “更改域” 菜单项，弹出更改域对话框。 选择二层网络所属的域，单击 “确定” 按钮。  批量更改域\n 在二层网络列表中勾选一个或多个二层网络，单击列表上方 “批量操作” 按钮，选择下拉菜单 “更改域” 菜单项，弹出更改域对话框。 选择二层网络所属的域，单击 “确定” 按钮。  设置共享 该功能用于设置二层网络的共享范围。\n域资源的共享范围有三种：\n 不共享（私有）：即域资源只能本域的用户可以使用。 域共享-部分（多域共享）：即域资源可以共享到指定域（一个或多个），只有域资源所在域和共享域下的用户可以使用域资源。 域共享-全部（全局共享）：即域资源可以共享给全部域使用，即系统中所有用户都可以使用域资源。  说明 设置共享的条件：需同时满足\n 当前用户在管理后台。 在Cloudpods已开启三级权限。   单个二层网络设置共享\n 在二层网络页面，单击二层网络右侧操作列 “更多” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数：  当共享范围选择为“不共享”时，即域资源的共享范围为私有，仅本域的用户可以使用。 当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即域资源的共享范围为域共享-部分，只有域资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即域资源的共享范围为域共享-全部，系统中的所有用户都可以使用域资源。     单击 “确定” 按钮，完成操作。  批量设置共享\n 在二层网络列表中选择一个或多个二层网络，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数：  当共享范围选择为“不共享”时，即域资源的共享范围为私有，仅本域的用户可以使用。 当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即域资源的共享范围为域共享-部分，只有域资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即域资源的共享范围为域共享-全部，系统中的所有用户都可以使用域资源。     单击 “确定” 按钮，完成操作。  删除 该功能用于删除二层网络，支持单个或批量删除二层网络，二层网络下网络数量不为0时不支持删除。\n单个删除\n 在二层网络页面，单击二层网络右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在二层网络列表中选择一个或多个二层网络，单击列表上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"更改域 该功能用于更改二层网络的所属域。\n说明 更改域的条件：需同时满足\n 当前用户在管理后台。 在Cloudpods已开启三级权限。 二层 …","ref":"/zh/docs/onpremise/network/tutorial/default/wireoperation/","title":"二层网络其他操作"},{"body":"平台目前支持两种快速创建安全组的功能，克隆以及导入安全组。\n克隆 该功能是基于当前安全组创建一个规则、参数等完全相同的安全组。\n 在安全组页面，单击安全组右侧操作列 “更多” 按钮，选择下拉菜单 “克隆” 菜单项，弹出克隆对话框。 设置克隆的安全组的名称，单击 “确定” 按钮，即可创建与当前安全组相同规则相同的安全组。  导入安全组规则 该功能用于批量导入安全组规则，支持将导出的安全组规则导入到指定的安全组中。\n注意 由于导出安全组会导出列表中所有安全组的规则，而导入规则将在指定安全组上导入规则。建议用户按照以下方式操作：\n 导出单个安全组规则：通过筛选功能搜索到具体要备份的安全组时，单击列表右上角图标导出单个安全组规则，并通过导入安全组规则功能将其导入到具体的安全组中。 导出多个安全组规则：当用户通过导出功能导出多个安全组规则时，在导入时，需要明确具体要导入的安全组规则，并将其整理到表格的一个sheet页面，并进行导入。    在安全组页面，单击安全组右侧操作列 “更多” 按钮，选择下拉菜单 “导入安全组规则” 菜单项，弹出导入安全组规则对话框。 导入安全组规则需要按照预先设定的格式，请先下载模板，在下载的export-secgrouprules.xlsx文件中补充安全组规则信息，安全组出入方向请都放在同一个sheet页面，用in和out区分。 单击虚线框或将export-secgrouprules.xlsx文件拖拽到虚线框，单击**_“确定”_** 按钮，完成操作。  ","excerpt":"平台目前支持两种快速创建安全组的功能，克隆以及导入安全组。\n克隆 该功能是基于当前安全组创建一个规则、参数等完全相同的安全组。\n 在安全组页 …","ref":"/zh/docs/onpremise/network/tutorial/secgroup/quickadd/","title":"快速创建安全组"},{"body":"活动历史 当伸缩组执行伸缩策略或手动移除实例时，均会更改伸缩组中的期望实例数，实现扩张或收缩。活动历史将会记录伸缩组的扩张和收缩的活动。\n入口：在弹性伸缩组列表，单击伸缩组名称项，在进入弹性伸缩组详情页面中单击顶部“活动历史”页签，进入活动历史页面。\n伸缩活动状态    伸缩活动状态 说明 举例     拒绝 伸缩操作在请求阶段被拒绝，未执行扩张或收缩操作 场景： - 伸缩组最大实例数是100；- 伸缩组中当前实例数为100；\n- 伸缩策略要求自动创建10台虚拟机；\n结果： 伸缩操作未通过条件检验，被拒绝执行。伸缩活动结束后，伸缩组中当前实例数仍为100。   部分成功 伸缩活动执行完成后，至少有一台虚拟机加入或移出伸缩组，且至少有一台虚拟机未能成功加入或移出伸缩组 场景： - 伸缩组最大实例数是100；- 伸缩组中当前实例数为95；\n- 伸缩策略要求自动创建10台虚拟机；\n结果： 伸缩操作仅创建了5台虚拟机加入了伸缩组，其它5台虚拟机未能成功创建。伸缩活动结束后，伸缩组中的当前实例为100。   成功 伸缩活动完成后，伸缩策略要求的虚拟机都加入或移出了伸缩组 场景： - 伸缩组最大实例数是100；- 伸缩组中当前实例数为90；\n- 伸缩策略要求自动创建10台虚拟机；\n结果： 伸缩操作创建了10台虚拟机加入伸缩组。伸缩活动结束后，伸缩组中的当前实例为100。   失败 伸缩活动结束后，伸缩策略要求的虚拟机都没有加入或移出伸缩组 场景：- 伸缩组申请的资源不足 - 伸缩组最大实例数是100；- 伸缩组中当前实例数为90；\n- 伸缩策略要求自动创建10台虚拟机；\n结果： 伸缩操作通过了条件检验，但由于资源不足导致创建失败。伸缩活动结束后，伸缩组中的当前实例仍为90。    查看活动历史详情 该功能用于查看伸缩活动的详细信息，了解伸缩策略触发的伸缩动作产生的结果。\n 在活动历史页面，支持查看伸缩活动的ID、状态、起因描述、行为描述、开始时间、结束时间等。 单击活动历史右侧操作列 “查看” 按钮，查看失败或部分成功、拒绝状态的伸缩活动的详细信息。  ","excerpt":"活动历史 当伸缩组执行伸缩策略或手动移除实例时，均会更改伸缩组中的期望实例数，实现扩张或收缩。活动历史将会记录伸缩组的扩张和收缩的活动。\n入 …","ref":"/zh/docs/onpremise/scalinggroup/tutorial/log/","title":"活动历史"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/compute/vminstance/faq/","title":"常见问题"},{"body":"作者: 郑雨\n监控 Agent 是运行在虚拟机上的 daemon，采集监控数据，并把数据传回云联壹云的 InfluxDB。\n由此，可以衍生出三个问题：如何安装 Agent，如何采集数据，以及如何传输监控数据。\n如何安装 Agent 云联壹云使用 Ansible 将 Agent 安装到虚拟机上，为了能够做到这一点，我们需要保证 云联壹云能够连接到虚拟机并且能够登录到虚拟机；这里我们先假设云联壹云能够过连接到 虚拟机，故而来优先讨论解决登录问题。\n如何登录虚拟机 假设云联壹云已经能够连接到 VPC 内部的虚拟机，比如说通过 NAT网关或者虚拟机已经绑 定了 EIP 等。\n直接免密登录 如果虚拟机是通过云联壹云平台创建出来的，那么云联壹云是可以直接免密登录到虚拟机， 它是通过在虚拟机上自动创建一个可以通过公钥登录的 cloudroot 用户而实现的，对应的 私钥存储在云联壹云的本地数据库。\n用户协助配置免密登录 如果虚拟机并非通过云联壹云平台创建出来的，那么就需要用户协助配置免密登录了。\n用户需要在前段相关界面输入虚拟机的用户名和密钥/密码，以使云联壹云能够暂时登录到 目标虚拟机，然后借助 Ansible 在目标虚拟机上创建 cloudroot 用户并配置公钥登录。\n同理，其实也可以直接让用户在虚拟机上执行脚本，以达到创建 cloudroot 用户以及配置 公钥登录的目的。\n如何连接虚拟机 云联壹云不能直接连接到虚拟机，是一种最广泛的情况。比如公有云 VPC 内部且没有配置 Nat 以及 EIP 的虚拟机。对于此种情况，我们使用 SSH 代理，具体来说是 Local Port Forwarding。\nSSH Local Port Forwarding 假设网络 A 和网络 B 是两个隔离的网络，如果想让 VMA 能够访问 VMB 上监听在 80 端口 的 web 服务应该怎么办呢？\n在 proxyA 上执行\nssh –NfL 10.127.30.251:12345:172.31.25.194:80 cloudroot@140.179.54.109 上面的命令会在 proxyA 和 proxyB 之间建立 SSH隧道，并在 proxyA 上创建一个 port forwarding， 它将监听10.127.30.251:12345，一旦有请求发来，就会通过 SSH 隧道转发到 proxyB， proxyB 会把请求转发到172.31.25.194:80\n然后 VMA 只要访问10.127.30.251:12345就能够访问 VMB 上的 web 服务。\n如何收集数据 我们的监控数据存储在 InfluxDB 中，所以采集数据的 Agent 优先选择了 Telegraf，在其 基础上修改了一些代码并定制了配置文件以满足云联壹云采集数据的要求。\n配置主要描述了需要什么样的监控数据，数据的标签以及数据存储的地址。\n如何传输监控数据 最简单的，如果虚拟机可以直接连接到云联壹云中的 InfluxDB，那么数据就可以直接传输 回来。\n在安装 Agent 的过程中，云联壹云回去检测是否可以从虚拟机直接访问 InfluxDB，如何不 可以，就要使用 SSH 代理，具体来说是 Remote Port Forwarding。\nSSH Remote Port Forwarding 网络 A 和网络 B 是两个隔离的网络，proxyB 具有公网 IP，所以 proxyA 可以访问到 proxyB， 如何让 VMB 访问 DB？\n在 proxyA 上执行:\nssh –NfR 172.31.25.194:12345:10.127.40.251:30086 cloudroot@140.179.54.109 上面的命令会在 proxyA 和 proxyB 之间建立 SSH 隧道，并在 proxyB 上创建一个 port forwarding，它将监听172.31.25.194:12345，一旦有请求发来，就会通过 SSH 隧道转 发到 proxyA，proxyA 会把请求转发到10.172.40.251:80\n通过上面的方式，网络B 内部的 VMB 只要访问172.31.25.194:12345就可以访问到 DB。\n总结来说，Local Port Forwarding 和 Remote Port Forwarding 的区别在于，Port Forwarding 建立的位置对于执行命令的一方来说是 Local 还是 Remote。\n传输数据 在 proxy 和 proxyVM 之间建立 SSH 隧道，并在 proxy 执行命令以在 proxyVM 上建立 port fowarding，对 proxy 来说就是 remote port forwarding。\nVPC 内部的虚拟机就可以通过访问 proxyVM 的 port，访问云联壹云的 DB 以把数据传输 回来。\n总结 总结来说，对于大多数情况，云联壹云通过 SSH 代理连接到目标虚拟机，借助 Ansible 将 监控 Agent 安装到目标虚拟机上，并做好 Agent 的配置，而监控数据数据也将通过 SSH 代理传回到云联壹云中的 InfluxDB 中。\n","excerpt":"作者: 郑雨\n监控 Agent 是运行在虚拟机上的 daemon，采集监控数据，并把数据传回云联壹云的 InfluxDB。\n由此，可以衍生出 …","ref":"/zh/docs/monitor_ops/monitor/monitoragent/","title":"监控代理"},{"body":"目前，裸金属服务器只能使用经典网络。\n经典网络 一台裸金属服务器有多个网卡，系统需要检测出这台裸金属的每个网口跟哪个二层网络对接，这样在分配裸金属服务器时，才能根据二层网络信息选择正确的IP子网。\n系统通过两种方式探测裸金属的网卡对接的二层网络：\n  自动探测：在裸金属的prepare阶段，裸金属会自动设置每个网卡进行dhcp探测，当这个网卡所在网络的交换机配置了dhcp relay，则会把发出的dhcp请求转发到baremetal agent。baremetal Agent根据dhcp报文的来源IP找到匹配的IP子网，从而判断出该物理机网卡归属的二层子网。\n  手动设置：通过执行climc命令或者在前端界面，可以设置裸金属服务每个网卡对应的二层网络。\n  对应的climc命令为：\nclimc host-add-netif \u003chost_id\u003e \u003cwire_id\u003e \u003cmac\u003e \u003cindex\u003e 裸金属网络配置对调度的影响 当用户申请一台裸金属服务器，并给定裸金属服务器对接的IP子网信息时，调度器会过滤出物理网口对接了该IP子网对应的二层网络的裸金属，作为候选。\n如果用户申请的裸金属服务器的网卡要做bonding，则调度器会选择同时具有两个网卡，并且两个网卡都对接了指定IP子网对应的二层网络。\n","excerpt":"目前，裸金属服务器只能使用经典网络。\n经典网络 一台裸金属服务器有多个网卡，系统需要检测出这台裸金属的每个网口跟哪个二层网络对接，这样在分配 …","ref":"/zh/docs/onpremise/network/principle/baremetal/","title":"裸金属网络"},{"body":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 详情页 -\u003e 账号标签页   # 查看RDS实例c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 账号列表 $ climc dbinstance-account-list --dbinstance c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 --details +--------------------------------------+-------+--------------------------------------+-----------+--------------------------------------------------------------------------------------------------------------------------+ | ID | Name | DBInstance_id | Status | Dbinstanceprivileges | +--------------------------------------+-------+--------------------------------------+-----------+--------------------------------------------------------------------------------------------------------------------------+ | 02c5634d-40bf-40f2-8212-4773c4dc9f0e | hello | c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 | available | [{\"account\":\"hello\",\"database\":\"test\",\"dbinstancedatabase_id\":\"034f9dea-f23f-4d0f-84be-697a62101d16\",\"privileges\":\"rw\"}] | +--------------------------------------+-------+--------------------------------------+-----------+--------------------------------------------------------------------------------------------------------------------------+ *** Total: 1 Pages: 1 Limit: 20 Offset: 0 Page: 1 ***  ","excerpt":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 详情页 -\u003e 账号标签页   # 查看RDS实 …","ref":"/zh/docs/multicloud/db/rds/tutorial/account/list/","title":"列表"},{"body":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 详情页 -\u003e 备份管理标签页   # 查看RDS实例c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 备份列表 $ climc dbinstance-backup-list --dbinstance c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 --details +--------------------------------------+------------+--------+----------------+------------+--------+ | ID | Name | Status | Backup_Size_Mb | DBInstance | Engine | +--------------------------------------+------------+--------+----------------+------------+--------+ | 4eca9256-f998-402e-83bf-db7b0860c5c3 | tes_backup | ready | 13 | testrds | MySQL | | 41f3ea39-0f6c-43b6-8fa7-d83ffb89a159 | ef7b3e0a | ready | 13 | testrds | MySQL | +--------------------------------------+------------+--------+----------------+------------+--------+  ","excerpt":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 详情页 -\u003e 备份管理标签页   # 查看RDS实 …","ref":"/zh/docs/multicloud/db/rds/tutorial/backup/list/","title":"列表"},{"body":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 详情页 -\u003e 数据库管理标签页   # 查看RDS实例c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 备份列表 $ climc dbinstance-database-list --dbinstance c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 --details +--------------------------------------+------+---------------+--------------------------------------+------------+---------+ | ID | Name | Character_Set | DBInstance_id | DBInstance | Status | +--------------------------------------+------+---------------+--------------------------------------+------------+---------+ | 034f9dea-f23f-4d0f-84be-697a62101d16 | test | utf8 | c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 | testrds | running | +--------------------------------------+------+---------------+--------------------------------------+------------+---------+ *** Total: 1 Pages: 1 Limit: 20 Offset: 0 Page: 1 ***  ","excerpt":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 详情页 -\u003e 数据库管理标签页   # 查看RDS实 …","ref":"/zh/docs/multicloud/db/rds/tutorial/database/list/","title":"列表"},{"body":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例   $ climc dbinstance-list +--------------------------------------+------------------+--------------+--------------------------------------+---------+------------+--------------+ | ID | Name | Billing_type | Cloudregion_Id | Status | Vcpu_Count | Vmem_Size_Mb | +--------------------------------------+------------------+--------------+--------------------------------------+---------+------------+--------------+ | c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 | testrds | postpaid | 5323c848-cbe8-4d1d-8319-e42641fed2f2 | running | 1 | 1024 | | ea5cd715-564b-4cf4-8798-0690b8ca137f | test-managed-sql | postpaid | 59260e38-17f1-4b57-8df4-6177e6105067 | running | 4 | 20889 | | 6df152bc-0802-4fcc-8e72-22415ddf43a9 | testsqlserverkf | postpaid | 59260e38-17f1-4b57-8df4-6177e6105067 | running | 1 | 3069 | +--------------------------------------+------------------+--------------+--------------------------------------+---------+------------+--------------+ *** Total: 3 Pages: 1 Limit: 20 Offset: 0 Page: 1 ***  ","excerpt":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例   $ climc dbinstance-list …","ref":"/zh/docs/multicloud/db/rds/tutorial/dbinstance/list/","title":"列表"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/db/rds/tutorial/backup/","title":"备份"},{"body":"各平台功能支持 RDS实例功能    云平台 创建 删除 同步状态 重启 调整配置 关联安全组 更改项目 到期释放 续费 自动续费设置 删除保护     阿里云 Y Y Y Y Y Y Y Y Y Y Y   腾讯云 Y Y Y Y Y Y Y Y Y N Y   华为云 Y Y Y Y Y N Y Y Y N Y   京东云 N N Y N N N Y N N N Y   微软云 N N Y N N N Y N - - Y   Google云 Y Y Y Y Y Y Y Y - - Y   Aws N N Y N N N Y N - - Y   Apsara N N Y Y N N Y N - - Y    ","excerpt":"各平台功能支持 RDS实例功能    云平台 创建 删除 同步状态 重启 调整配置 关联安全组 更改项目 到期释放 续费 自动续费设置 删除 …","ref":"/zh/docs/multicloud/db/rds/tutorial/","title":"操作指南"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/db/rds/tutorial/database/","title":"数据库"},{"body":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 点击名称 -\u003e 点击账号标签页 -\u003e 点击账号名称   # 查看RDS实例账号02c5634d-40bf-40f2-8212-4773c4dc9f0e详情 $ climc dbinstance-account-show 02c5634d-40bf-40f2-8212-4773c4dc9f0e +----------------------+--------------------------------------------------------------------------------------------------------------------------+ | Field | Value | +----------------------+--------------------------------------------------------------------------------------------------------------------------+ | account | qj-jd | | account_id | 96f46c61-38c4-4fd7-857a-effb4f69eabf | | brand | JDcloud | | can_delete | true | | can_update | true | | cloud_env | public | | cloudregion | JDcloud 华北-北京 | | cloudregion_id | 5323c848-cbe8-4d1d-8319-e42641fed2f2 | | created_at | 2021-06-22T07:05:37.000000Z | | dbinstance | testrds | | dbinstance_id | c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 | | dbinstanceprivileges | [{\"account\":\"hello\",\"database\":\"test\",\"dbinstancedatabase_id\":\"034f9dea-f23f-4d0f-84be-697a62101d16\",\"privileges\":\"rw\"}] | | deleted | false | | host | % | | id | 02c5634d-40bf-40f2-8212-4773c4dc9f0e | | is_emulated | false | | manager | qj-jd | | manager_domain | Default | | manager_domain_id | default | | manager_id | 8e47bb75-5105-4ef9-84b8-8aa5927b06dd | | manager_project | system | | manager_project_id | a9a365125abf43c580ba98e5640b5c51 | | name | hello | | project | system | | project_domain | Default | | project_id | a9a365125abf43c580ba98e5640b5c51 | | provider | JDcloud | | region | JDcloud 华北-北京 | | region_ext_id | cn-north-1 | | region_external_id | JDcloud/cn-north-1 | | region_id | 5323c848-cbe8-4d1d-8319-e42641fed2f2 | | status | available | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 0 | | updated_at | 2021-06-22T07:05:37.000000Z | | vpc | newvpc | | vpc_ext_id | vpc-cyeqenbik9 | | vpc_id | d532c177-e8e3-42d3-82c4-af6bef949566 | +----------------------+--------------------------------------------------------------------------------------------------------------------------+  ","excerpt":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 点击名称 -\u003e 点击账号标签页 -\u003e 点击账号名称   # 查看RDS实例账 …","ref":"/zh/docs/multicloud/db/rds/tutorial/account/show/","title":"详情"},{"body":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 点击名称 -\u003e 点击备份管理标签页 -\u003e 点击备份名称   # 查看RDS实例备份4eca9256-f998-402e-83bf-db7b0860c5c3详情 $ climc dbinstance-backup-show 4eca9256-f998-402e-83bf-db7b0860c5c3 +--------------------+--------------------------------------+ | Field | Value | +--------------------+--------------------------------------+ | account | qj-jd | | account_id | 96f46c61-38c4-4fd7-857a-effb4f69eabf | | backup_method | physical | | backup_mode | manual | | backup_size_mb | 13 | | brand | JDcloud | | can_delete | true | | can_update | true | | cloud_env | public | | cloudregion | JDcloud 华北-北京 | | cloudregion_id | 5323c848-cbe8-4d1d-8319-e42641fed2f2 | | created_at | 2021-06-22T07:05:37.000000Z | | dbinstance | testrds | | dbinstance_id | c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 | | deleted | false | | domain_id | default | | engine | MySQL | | engine_version | 5.6 | | external_id | 39577a08-1499-466a-807d-421e7292f4b1 | | freezed | false | | id | 4eca9256-f998-402e-83bf-db7b0860c5c3 | | imported_at | 2021-06-22T07:05:37.000000Z | | is_emulated | false | | is_system | false | | manager | qj-jd | | manager_domain | Default | | manager_domain_id | default | | manager_id | 8e47bb75-5105-4ef9-84b8-8aa5927b06dd | | manager_project | system | | manager_project_id | a9a365125abf43c580ba98e5640b5c51 | | name | tes_backup | | pending_deleted | false | | project | system | | project_domain | Default | | provider | JDcloud | | region | JDcloud 华北-北京 | | region_ext_id | cn-north-1 | | region_external_id | JDcloud/cn-north-1 | | region_id | 5323c848-cbe8-4d1d-8319-e42641fed2f2 | | source | cloud | | status | ready | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 1 | | updated_at | 2021-06-22T07:51:57.000000Z | +--------------------+--------------------------------------+  ","excerpt":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 点击名称 -\u003e 点击备份管理标签页 -\u003e 点击备份名称   # 查看RDS实例 …","ref":"/zh/docs/multicloud/db/rds/tutorial/backup/show/","title":"详情"},{"body":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 点击名称 -\u003e 点击数据库管理标签页 -\u003e 点击数据库名称   # 查看RDS实例数据库034f9dea-f23f-4d0f-84be-697a62101d16详情 $ climc dbinstance-database-show 034f9dea-f23f-4d0f-84be-697a62101d16 +----------------------+--------------------------------------------------------------------------------------------------------------------------+ | Field | Value | +----------------------+--------------------------------------------------------------------------------------------------------------------------+ | account | qj-jd | | account_id | 96f46c61-38c4-4fd7-857a-effb4f69eabf | | brand | JDcloud | | can_delete | true | | can_update | true | | character_set | utf8 | | cloud_env | public | | cloudregion | JDcloud 华北-北京 | | cloudregion_id | 5323c848-cbe8-4d1d-8319-e42641fed2f2 | | created_at | 2021-06-22T07:05:37.000000Z | | dbinstance | testrds | | dbinstance_id | c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 | | dbinstanceprivileges | [{\"account\":\"hello\",\"database\":\"test\",\"dbinstancedatabase_id\":\"034f9dea-f23f-4d0f-84be-697a62101d16\",\"privileges\":\"rw\"}] | | deleted | false | | external_id | test | | id | 034f9dea-f23f-4d0f-84be-697a62101d16 | | imported_at | 2021-06-22T07:05:37.000000Z | | is_emulated | false | | manager | qj-jd | | manager_domain | Default | | manager_domain_id | default | | manager_id | 8e47bb75-5105-4ef9-84b8-8aa5927b06dd | | manager_project | system | | manager_project_id | a9a365125abf43c580ba98e5640b5c51 | | name | test | | project | system | | project_domain | Default | | project_id | a9a365125abf43c580ba98e5640b5c51 | | provider | JDcloud | | region | JDcloud 华北-北京 | | region_ext_id | cn-north-1 | | region_external_id | JDcloud/cn-north-1 | | region_id | 5323c848-cbe8-4d1d-8319-e42641fed2f2 | | source | cloud | | status | running | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 0 | | updated_at | 2021-06-22T07:05:37.000000Z | | vpc | newvpc | | vpc_ext_id | vpc-cyeqenbik9 | | vpc_id | d532c177-e8e3-42d3-82c4-af6bef949566 | +----------------------+--------------------------------------------------------------------------------------------------------------------------+  ","excerpt":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 点击名称 -\u003e 点击数据库管理标签页 -\u003e 点击数据库名称   # 查看RDS …","ref":"/zh/docs/multicloud/db/rds/tutorial/database/show/","title":"详情"},{"body":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 点击名称   $ climc dbinstance-show 6df152bc-0802-4fcc-8e72-22415ddf43a9 +--------------------+----------------------------------------------------------------------------------------------------------------------------+ | Field | Value | +--------------------+----------------------------------------------------------------------------------------------------------------------------+ | account | qj-azure | | account_id | b8b6a1ad-ed65-41f7-8525-91b44516346e | | auto_renew | false | | billing_type | postpaid | | brand | Azure | | can_delete | false | | can_update | true | | category | basic | | cloud_env | public | | cloudregion | Azure East US | | cloudregion_id | 59260e38-17f1-4b57-8df4-6177e6105067 | | connection_str | testsqlserverkf.database.windows.net | | created_at | 2021-06-21T08:08:57.000000Z | | deleted | false | | disable_delete | true | | disk_size_gb | 51 | | domain_id | default | | engine | SQLServer | | engine_version | 12.0 | | environment | AzurePublicCloud | | external_id | /subscriptions/7aaf3e6c-5f9c-43ad-b149-d9a14765af1c/resourcegroups/default/providers/microsoft.sql/servers/testsqlserverkf | | freezed | false | | id | 6df152bc-0802-4fcc-8e72-22415ddf43a9 | | imported_at | 2021-06-21T08:08:57.000000Z | | iops | 0 | | is_emulated | false | | is_system | false | | manager | Pay-As-You-Go | | manager_domain | Default | | manager_domain_id | default | | manager_id | 7ffddf3c-65ad-467c-870b-a99f2044039d | | manager_project | system | | manager_project_id | a9a365125abf43c580ba98e5640b5c51 | | name | testsqlserverkf | | pending_deleted | false | | port | 1433 | | project | system | | project_domain | Default | | project_src | cloud | | provider | Azure | | region | Azure East US | | region_ext_id | eastus | | region_external_id | Azure-int/eastus | | region_id | 59260e38-17f1-4b57-8df4-6177e6105067 | | source | cloud | | status | running | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 15 | | updated_at | 2021-06-22T08:48:15.000000Z | | vcpu_count | 1 | | vmem_size_mb | 3069 | | vpc | - | | vpc_ext_id | 59260e38-17f1-4b57-8df4-6177e6105067-7ffddf3c-65ad-467c-870b-a99f2044039d | | vpc_id | c327f83f-f4c0-4d06-8269-0e56c681dd07 | +--------------------+----------------------------------------------------------------------------------------------------------------------------+  ","excerpt":"控制台 命令行  菜单导航: 数据库 -\u003e RDS实例 -\u003e 点击名称   $ climc dbinstance-show …","ref":"/zh/docs/multicloud/db/rds/tutorial/dbinstance/show/","title":"详情"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/db/rds/tutorial/account/","title":"账号"},{"body":"云用户组是公有云IAM用户的逻辑分组\n平台支持    云平台(Provider) 是否支持     阿里云(Aliyun) Y   腾讯云(Qcloud) Y   华为云(Huawei) Y   微软云(Azure) Y   谷歌云(Google) Y   Aws(Aws) Y   优刻得(Ucloud) N   天翼云(Ctyun) N   移动云(Ecloud) N   京东云(JDcloud) N    ","excerpt":"云用户组是公有云IAM用户的逻辑分组\n平台支持    云平台(Provider) 是否支持     阿里云(Aliyun) Y   腾讯 …","ref":"/zh/docs/multicloud/cloudgroup/","title":"云用户组"},{"body":"操作步骤 控制台删除 命令行删除 1. 登录控制台, 选择 [多云管理] -\u003e [云用户组], 进入云用户组列表页面 2. 找到待删除的云用户组，点击右侧 [更多] -\u003e [删除] 按钮 3. 点击 [确定] 按钮删除  climc cloud-group-delete \u003c云用户组名称或id\u003e  注意  删除云用户组会真实删除云上相应的资源 可查看云用户组权限组缓存列表查看当前云用户组和各个云账号上面的资源映射   ","excerpt":"操作步骤 控制台删除 命令行删除 1. 登录控制台, 选择 [多云管理] -\u003e [云用户组], 进入云用户组列表页面 2. 找到待删除的云用 …","ref":"/zh/docs/multicloud/cloudgroup/tutorial/delete/","title":"删除"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/","title":"操作指南"},{"body":"TODO\n","excerpt":"TODO\n","ref":"/zh/docs/multicloud/cloudgroup/tutorial/","title":"操作指南"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/baremetal/faq/","title":"常见问题"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/vminstance/faq/","title":"常见问题"},{"body":"Web界面操作 远程终端 该功能支持使用SOL（Serial over LAN）和ssh远程连接到裸金属服务器。SOL即通过串口进行远程连接。连接之后需要使用初始账号列中的用户名和密码进行登录。\n 在裸金属页面，单击裸金属服务器右侧操作列 “远程终端” 按钮，选择下拉菜单 “SOL远程终端” 菜单项，通过SOL方式与裸金属服务器建立连接。 单击裸金属服务器右侧操作列 “远程终端” 按钮，选择下拉菜单 “SSH IP地址” 菜单项，与裸金属服务器建立web SSH连接。 单击裸金属服务器右侧操作列 远程终端 按钮，选择下拉菜单 “SSH IP地址:任意端口” 菜单项，在弹出的对话框中设置端口号，单击 “确定” 按钮，与裸金属服务器建立web SSH连接。 单击裸金属服务器右侧操作列 “远程终端” 按钮，选择下拉菜单 “Java控制台” 菜单项，下载并打开jnlp文件，连接裸金属服务器。  开机 该功能用于将处于关机状态的裸金属服务器开机。\n单个裸金属开机\n 在裸金属页面，单击“关机”状态的裸金属右侧操作列 “更多” 按钮，选择下拉菜单 “开机” 菜单项，启动裸金属服务器。  批量开机\n 在裸金属列表中选择一个或多个“关机”裸金属，单击列表上方 “开机” 按钮，批量启动多个裸金属设备。  关机 该功能用于将处于开机状态的裸金属服务器关机。\n单个裸金属关机\n 在裸金属页面，单击“开机”状态的裸金属右侧操作列 “更多” 按钮，选择下拉菜单 “关机” 菜单项，弹出操作确认对话。 单击 “确定” 按钮，完成操作。  批量关机\n 在裸金属列表中选择一个或多个“开机”裸金属，单击列表上方 “关机” 按钮，弹出操作确认对话。 单击 “确定” 按钮，完成操作。  重启 该功能用于重启开机状态的裸金属服务器。\n单个裸金属重启\n 在裸金属页面，单击“开机”状态的裸金属右侧操作列 “更多” 按钮，选择下拉菜单 “重启” 菜单项，弹出操作确认对话框。 选择是否勾选强制重启，单击 “确定” 按钮。  批量重启\n 在裸金属列表中选择一个或多个“开机”裸金属，单击列表上方 “重启” 按钮，弹出操作确认对话框。 选择是否勾选强制重启，单击 “确定” 按钮。  注意 若勾选“强制重启”，裸金属中未保存数据将会丢失。  修改属性 该功能用于修改裸金属服务器的启动介质、引导方式以及是否启用删除保护。\n单个裸金属修改属性\n 在裸金属页面，单击裸金属服务器右侧操作列 “更多” 按钮，选择下拉菜单 “修改属性” 菜单项，弹出修改属性对话框。 设置删除保护，禁用删除保护后，可删除裸金属服务器。启用删除保护后，无法删除裸金属服务器。 单击 “确定” 按钮，完成操作。  多个裸金属批量修改属性\n 在裸金属服务器列表中勾选一个或多个裸金属服务器，单击列表上方 “更多” 按钮，选择下拉菜单 “修改属性” 菜单项，弹出修改属性对话框。 设置删除保护，禁用删除保护后，可删除裸金属服务器。启用删除保护后，无法删除裸金属服务器。 单击 “确定” 按钮，完成操作。  重装系统 该功能用于为裸金属服务器更换系统。\n注意 仅在裸金属服务器关机状态下支持重装系统操作。   在裸金属页面，单击裸金属服务器右侧操作列 “更多” 按钮，选择下拉菜单 “重装系统” 菜单项，弹出重装系统对话框。 选择系统镜像，可分别从公共镜像或自定义镜像中选择同操作系统的镜像。 设置管理员密码，在Linux系统中为root用户的密码，在Windows操作系统中为administrator用户的密码。  随机生成：随机生成管理员密码，用户可在裸金属列表密码列查看复制管理员密码。 关联密钥：在关联密钥之前需要先新建密钥。关联密钥后，用户需要使用私钥远程登录裸金属服务器。 保留镜像设置：管理员密码为镜像中已有的管理员密码。 手工输入：可手动设置管理员密码。   默认勾选“重装系统后自动启动”，可根据需要取消勾选，单击 “确定” 按钮，完成操作。  同步状态 当虚拟机被恶意破坏或经非法暴力操作，导致服务状态异常（如系统死机），需要管理员后台修复，同步虚拟机环境状态，提供系统级服务修复措施。或者在资源超配情况下，同步运行状态。\n单个同步状态\n 在裸金属页面，单击裸金属服务器右侧操作列 “更多” 按钮，选择下拉菜单 “同步状态” 菜单项，同步裸金属状态。  批量同步状态\n 在裸金属服务器列表中勾选一个或多个裸金属服务器，单击列表上方 “批量操作” 按钮，选择下拉菜单 “同步状态” 菜单项，同步裸金属状态。  更改项目 项目是资源的拥有者，当裸金属服务器属于某项目后，项目中的所有成员都有权限使用该裸金属服务器。可根据具体使用需求更改裸金属服务器所属的项目。\n单个裸金属更改项目\n 在裸金属页面，单击裸金属服务器右侧操作列 “更多” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 选择域和域下的项目后，单击 “确定” 按钮，完成操作。  批量更改项目\n批量更改项目要求选择的裸金属服务器属于同一个域。\n 在裸金属列表中勾选一个或多个裸金属服务器，单击列表上方 “批量操作” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 选择域和域下的项目后，单击 “确定” 按钮，完成操作。  创建相同配置 该功能用于创建相同配置的裸金属服务器。\n 在裸金属页面，单击裸金属服务器右侧操作列 “更多” 按钮，选择下拉菜单 “创建相同配置” 菜单项，弹出创建相同配置对话框。 输入名称，设置数量，其他参数可保持默认，单击 “确定” 按钮。  重置密码 该功能用于更新裸金属服务器上的管理员用户的密码，管理员密码在Linux系统下为root用户的密码。\n注意  仅在裸金属服务器关机状态下支持重置密码操作。 绑定密钥的裸金属服务器无法进行重置密码操作。 通过ISO启动方式创建的裸金属不支持重置密码操作。   单个裸金属重置密码\n 在裸金属页面，单击裸金属服务器右侧操作列 “更多” 按钮，选择下拉菜单 “重置密码” 菜单项，弹出重置密码对话框。 设置管理员密码。  随机生成：随机生成管理员密码，用户可在虚拟机列表密码列查看复制管理员密码。 手工输入：可手动设置管理员密码。   默认勾选“重置密码后自动启动”，可根据需要取消勾选，单击 “确定” 按钮，完成操作。  批量重置密码\n 在裸金属列表中勾选一个或多个关机状态的裸金属服务器，单击列表上方 “批量操作” 按钮，选择下拉菜单 “重置密码” 菜单项，弹出重置密码对话框。 设置管理员密码。  随机生成：随机生成管理员密码，用户可在虚拟机列表密码列查看复制管理员密码。 手工输入：可手动设置管理员密码。   默认勾选“重置密码后自动启动”，可根据需要取消勾选，单击 “确定” 按钮，完成操作。  绑定密钥 该功能用于为裸金属服务器绑定密钥，密钥绑定后用户需要使用私钥登录裸金属服务器，或通过私钥在云管平台上获取裸金属服务器的密码。在绑定密钥之前请创建密钥。一个裸金属服务器只支持绑定一个密钥，当绑定密钥后，用户在裸金属列表的密码列无法直接看到密码信息，需要输入私钥内容获取密码。\n注意  仅在裸金属服务器关机状态下支持绑定密钥操作。 通过ISO启动方式创建的裸金属不支持绑定密钥操作。    在裸金属页面，单击裸金属服务器右侧操作列 “更多” 按钮，选择下拉菜单 “绑定密钥” 菜单项，弹出绑定密钥对话框。 选择密钥对，默认勾选“绑定密钥后自动启动”，可根据需要取消勾选，单击 “确定” 按钮，绑定密钥的裸金属需要使用SSH密钥对登录。  解绑密钥 该功能用于将裸金属服务器与密钥解除绑定。\n注意  仅在裸金属服务器关机状态下支持解绑密钥操作。 通过ISO启动方式创建的裸金属不支持解绑密钥操作。    在裸金属页面，单击裸金属服务器右侧操作列 “更多” 按钮，选择下拉菜单 “解绑密钥” 菜单项，弹出绑定密钥对话框。 默认勾选“绑定密钥后自动启动”，可根据需要取消勾选，单击 “确定” 按钮，完成操作。  挂载ISO 该功能用于为裸金属挂载ISO。仅物理机支持RedFish且可以挂载光驱的物理机支持挂载ISO操作。\n说明 目前Cloudpods平台不支持修改裸金属启动介质，已安装操作系统的裸金属挂载ISO镜像后无法直接使用ISO镜像重装系统。   在裸金属页面，单击裸金属服务器右侧操作列 “更多” 按钮，选择下拉菜单 “挂载ISO” 菜单项，弹出挂载ISO对话框。 选择ISO镜像，若如可用ISO镜像，请在系统镜像列表中上传ISO镜像或导入镜像市场中的ISO镜像。 单击 “确定” 按钮，完成挂载ISO操作。  卸载ISO 该功能用于卸载物理机上已挂载的ISO镜像。\n 在裸金属页面，单击裸金属服务器右侧操作列 “更多” 按钮，选择下拉菜单 “卸载ISO” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成卸载ISO操作。  设置删除保护 该功能用于设置裸金属服务器的删除保护。当裸金属服务器启用删除保护后，裸金属服务器无法被删除；当裸金属服务器禁用删除保护后，裸金属服务器才可以被删除。\n单个裸金属设置删除保护\n 禁用删除保护：  单击裸金属服务器名称右侧带有图标时，单击裸金属服务器右侧操作列 “更多” 按钮，选择下拉菜单 “设置删除保护” 菜单项，弹出设置删除保护对话框。 选择\"禁用\"删除保护，单击 “确定” 按钮。   启用删除保护：  当裸金属服务器名称右侧不带图标时，单击裸金属服务器右侧操作列 “更多” 按钮，选择下拉菜单 “设置删除保护” 菜单项，弹出设置删除保护对话框。 选择\"启用\"删除保护，单击 “确定” 按钮。    批量设置删除保护\n 禁用删除保护：  在裸金属列表中勾选一个或多个裸金属服务器，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置删除保护” 菜单项，弹出设置删除保护对话框。 选择\"禁用\"删除保护，单击 “确定” 按钮，批量为裸金属禁用删除保护。   启用删除保护：  在裸金属列表中勾选一个或多个裸金属服务器，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置删除保护” 菜单项，弹出设置删除保护对话框。 选择\"启用\"删除保护，单击 “确定” 按钮，批量为裸金属启用删除保护。    删除 当裸金属服务器名称项右侧有图标，表示该裸金属服务器启用了删除保护，无法删除裸金属服务器。如需要删除裸金属服务器，则需要先禁用删除保护再删除裸金属服务器。\n单个删除\n 在裸金属页面，单击裸金属服务器右侧操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在裸金属列表中勾选一个或多个裸金属服务器，单击列表上方 “批量操作” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  Climc命令行操作 查询裸金属服务器 climc server-list --hypervisor baremetal climc server-show \u003cserver_id\u003e 重装操作系统 climc server-rebuild --image \u003cimage_id\u003e \u003cserver_id\u003e 开/关机 climc server-start \u003cserver_id\u003e climc server-stop \u003cserver_id\u003e 删除裸金属服务器 删除 server 裸金属服务器会销毁物理机上的操作系统和 raid 配置，对应的 baremetal 重新进入未分配状态\nclimc server-delete \u003cserver_id\u003e ","excerpt":"Web界面操作 远程终端 该功能支持使用SOL（Serial over LAN）和ssh远程连接到裸金属服务器。SOL即通过串口进行远程连 …","ref":"/zh/docs/onpremise/baremetal/tutorial/baremetal/","title":"裸金属操作"},{"body":"Web界面操作 设置删除保护 该功能用于设置虚拟机的删除保护。当虚拟机启用删除保护后，虚拟机无法被删除；当虚拟机禁用删除保护后，虚拟机才可以被删除。\n单个虚拟机设置删除保护\n 禁用删除保护：  单击虚拟机名称右侧带有图标时，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “删除-设置删除保护” 菜单项，弹出设置删除保护对话框。 选择\"禁用\"删除保护，单击 “确定” 按钮。   启用删除保护：  当虚拟机名称右侧不带图标时，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “删除-设置删除保护” 菜单项，弹出设置删除保护对话框。 选择\"启用\"删除保护，单击 “确定” 按钮。    批量设置删除保护\n批量设置删除保护操作支持选择不同平台的虚拟机。\n 禁用删除保护：  在虚拟机列表中选择一个或多个虚拟机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置删除保护” 菜单项，弹出设置删除保护对话框。 选择\"禁用\"删除保护，单击 “确定” 按钮，批量为虚拟机禁用删除保护。   启用删除保护：  在虚拟机列表中选择一个或多个虚拟机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置删除保护” 菜单项，弹出设置删除保护对话框。 选择\"启用\"删除保护，单击 “确定” 按钮，批量为虚拟机启用删除保护。    删除 该功能用于删除虚拟机，当虚拟机名称项右侧有图标，表示该虚拟机启用了删除保护，无法删除虚拟机。如需要删除虚拟机，则需要先禁用删除保护再删除虚拟机。若\n批量删除虚拟机操作支持选择不同平台的虚拟机。\n注意  若虚拟机所在的宿主机状态异常，即使禁用删除保护也无法删除虚拟机。 若宿主机已经下线无法恢复时，需要管理员在控制节点使用climc的server-purge命令删除虚拟机记录。可参考FAQ手册中的如何清理一台已经下线的宿主机上面的虚拟机的记录？   删除虚拟机 注意  阿里云、腾讯云、华为云、AWS、Azure、Google、Zstack、Dstack、OpenStack、Cloudpods等平台支持删除虚拟机时同时删除快照、后挂载的数据盘、EIP； 华为云删除虚拟机时必须勾选删除快照。 Cloudpods平台删除虚拟机时，若磁盘时ceph盘则必须同时删除快照。若磁盘是本地磁盘，则必须勾选同时删除后挂载的数据盘。    在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “删除-删除” 菜单项，弹出操作确认对话框。 支持勾选“同时删除快照”、“同时删除后挂载的数据盘”、“同时删除EIP”等。 单击 “确定” 按钮，完成操作。 若开启了工单，则还需要填入申请原因，单击 “提交工单” 按钮，提交删除主机工单，等待审批通过后才会成功删除虚拟机。  批量删除虚拟机 注意  阿里云、腾讯云、华为云、AWS、Azure、Google、Zstack、Dstack、OpenStack、Cloudpods等平台支持删除虚拟机时同时删除快照、后挂载的数据盘、EIP； 华为云删除虚拟机时必须勾选删除快照。 Cloudpods平台删除虚拟机时，若磁盘时ceph盘则必须同时删除快照。若磁盘是本地磁盘，则必须勾选同时删除后挂载的数据盘。    在虚拟机列表中选择一个或多个虚拟机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 支持勾选“同时删除快照”、“同时删除后挂载的数据盘”、“同时删除EIP”等。 单击 “确定” 按钮，完成操作。 若开启了工单，则还需要填入申请原因，单击 “提交工单” 按钮，提交删除主机工单，等待审批通过后才会成功删除虚拟机。  Climc命令行操作 删除 # 删除至回收站 $ climc server-delete \u003cserver_id\u003e # 彻底删除 $ climc server-delete -f \u003cserver_id\u003e ","excerpt":"Web界面操作 设置删除保护 该功能用于设置虚拟机的删除保护。当虚拟机启用删除保护后，虚拟机无法被删除；当虚拟机禁用删除保护后，虚拟机才可以 …","ref":"/zh/docs/onpremise/vminstance/tutorial/delete/","title":"删除"},{"body":"Cloudpods 原生提供基于 kvm 的私有云虚拟机管理功能，运行 kvm 虚拟机的机器叫做宿主机，这种宿主机也叫作 “计算节点”，上面会运行管理虚拟机、网络和存储的一系列服务。云平台的抽象的宿主机根据 hypervisor 字段判断不同平台的宿主机。现在支持的类型如下：\n   类型 平台     hypervisor Cloudpods 私有云宿主机   baremetal Cloudpods 私有云物理机   esxi vmware 宿主机   openstack openstack 私有云宿主机   zstack zstack 私有云宿主机    ","excerpt":"Cloudpods 原生提供基于 kvm 的私有云虚拟机管理功能，运行 kvm 虚拟机的机器叫做宿主机，这种宿主机也叫作 “计算节点”，上面 …","ref":"/zh/docs/onpremise/host/","title":"宿主机"},{"body":"一个安全组可以关联多个虚拟机，一个虚拟机也可以关联多个安全组（最多5个安全组）。\n关联虚拟机  在安全组页面，单击安全组右侧操作列 “管理虚拟机” 按钮，进入关联虚拟机页面。 单击列表上方 “关联虚拟机” 按钮，弹出关联虚拟机对话框。 选择需要关联安全组的虚拟机（支持选择多个），单击 “确定” 按钮，将安全组关联到虚拟机。  解绑虚拟机 单个解绑\n 在安全组页面，单击安全组右侧操作列 “管理虚拟机” 按钮，进入关联虚拟机页面。 单击虚拟机右侧操作列 “解绑” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量解绑\n 在安全组页面，单击安全组右侧操作列 “管理虚拟机” 按钮，进入关联虚拟机页面。 在列表中选择一个或多个虚拟机，单击列表上方 “解绑” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"一个安全组可以关联多个虚拟机，一个虚拟机也可以关联多个安全组（最多5个安全组）。\n关联虚拟机  在安全组页面，单击安全组右侧操作列 “管理虚 …","ref":"/zh/docs/onpremise/network/tutorial/secgroup/resourse/","title":"关联虚拟机"},{"body":"创建转发节点 该功能用于在指定集群下创建节点。\n  单击列表上方 “新建” 按钮，弹出创建节点对话框。\n  配置以下参数：\n 名称：节点的名称。 集群：节点所属的集群，若无合适集群，可单击输入框下的“新建”超链接创建集群。 优先级：设置节点的优先级，数字越大优先级越大，优先级大的节点默认为master节点。 抢占模式：设置是否启用抢占模式，当抢占模式开启后，若优先级高的backup节点遇到优先级低的master节点，backup节点将抢占成为master节点。 VRRP路由ID：设置节点的VRRP路由ID，同一集群下的节点的VRRP路由ID必须相同，不同集群下的节点的VRRP路由ID必须不同。 VRRP网口：节点广播通告用的网卡名称。 VRRP通告间隔：VRRP广播通告间隔，关系到故障时自动切换的灵敏度。  高级配置：默认隐藏，可根据需求进行配置。\n VRRP密码：设置VRRP通信的密码，主备节点的VRRP密码必须相同，为空则密码默认为YunionLB。 转发实例心跳超时时间：设置转发节点部署的虚拟机心跳超时时间，当超过超时时间的虚拟机未收到心跳时，状态将变为UNKNOWN，默认为3600秒，取值范围为600~3600。 配置Telegraf参数：  InfluxDB地址：用于监控数据上传通道，一般InfluxDB部署在控制节点上，格式为https://控制节点IP地址:30086。 InfluxDB数据库名称：设置InfluxDB数据库的名称。 监控数据采集间隔：设置telegraf采集监控数据的间隔，默认为5s，取值范围为1~600。 配置模板：可根据需求自定义telegraf配置模板。   配置HAProxy参数：  HAProxy线程数：设置HAProxy线程数，请根据实际情况设置。默认为1，取值范围为1~64。 日志输出设置：设置日志的保存位置，支持保存到本地、远端服务器等，输入格式例如“/dev/log”、IP、IP:port。为空则表示不记录日志。 记录HTTP日志：是否记录HTTP类型的日志。 记录TCP日志：是否记录TCP类型的日志。 记录Normal日志：是否记录正常日志。 请求中最大http头数：设置请求中最大http头数量，默认为101，取值为1~32767。 配置模板：可根据需求自定义HAProxy配置模板。   配置Keepalived参数：  配置模板：可根据需求自定义Keepalived配置模板。      单击 “确定” 按钮，创建节点。\n  ","excerpt":"创建转发节点 该功能用于在指定集群下创建节点。\n  单击列表上方 “新建” 按钮，弹出创建节点对话框。\n  配置以下参数：\n 名称：节点的名 …","ref":"/zh/docs/onpremise/lb/tutorial/lbcluster/createlbagent/","title":"创建负载均衡转发节点"},{"body":"启用动态调度标签 该功能用于启用\"禁用\"状态的动态调度标签。启用状态的动态调度标签将会在调度前为符合条件的宿主机动态绑定调度标签。\n 在动态调度标签页面，单击\"禁用\"状态的动态调度标签操作列 “启用” 按钮，禁用动态调度标签。  禁用动态调度标签 该功能用于禁用\"启用\"状态的动态调度标签。\n 在动态调度标签页面，单击\"启用\"状态的动态调度标签操作列 “禁用” 按钮，启用动态调度标签。  删除动态调度标签 该功能用于删除动态调度标签，支持单个删除或批量删除。\n单个删除\n 在动态调度标签页面，单击动态调度标签操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在动态调度标签列表中选择一个或多个动态调度标签，单击页面上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"启用动态调度标签 该功能用于启用\"禁用\"状态的动态调度标签。启用状态的动态调度标签将会在调度前为符合条件的宿主机动态绑定调度标签。\n 在动态 …","ref":"/zh/docs/onpremise/scheduler/tutorial/dynoperator/","title":"动态调度标签其他操作"},{"body":"","excerpt":"","ref":"/zh/docs/setup/","title":"安装部署"},{"body":"查看VPC详情 该功能用于查看VPC的详细信息。\n 在VPC页面，单击VPC名称项，进入VPC详情页面。 详情页面顶部菜单项支持对VPC进行删除操作。 查看VPC的云上ID、ID、名称、状态、域、项目、共享范围、平台、目标网段、二层网络数量、路由表数量、IP子网数量、nat网关数量、允许外网访问、区域、可用区、云账号、创建时间、更新时间、备注等。  查看IP子网信息 该功能用于查看VPC下的IP子网信息。\n 在VPC详情页面，单击“IP子网”页签，进入IP子网页面。 查看VPC网络下IP子网信息，包括名称、IP地址、VLAN、是否共享、类型、使用情况（总量与使用量）。 右侧操作列支持对IP子网进行管理操作。  ","excerpt":"查看VPC详情 该功能用于查看VPC的详细信息。\n 在VPC页面，单击VPC名称项，进入VPC详情页面。 详情页面顶部菜单项支持对VPC进行 …","ref":"/zh/docs/onpremise/network/tutorial/vpc/viewvpc/","title":"查看VPC下信息"},{"body":"查看二层网络详情 该功能用于查看二层网络详细信息。\n 在二层网络页面，单击二层网络名称项，进入二层网络详情页面。 详情页面顶部菜单项支持对二层网络进行管理操作。 查看二层网络的云上ID、ID、名称、状态、域、项目、共享范围、平台、带宽、专有网络、IP子网、区域、可用区、云账号、创建时间、更新时间、备注。  查看二层网络下的IP子网 该功能用于查看二层网络下的IP子网信息。\n 在二层网络详情页面，单击“IP子网”页签，进入IP子网页面。 查看指定二层网络下的IP子网信息，并支持对其进行管理操作。  查看物理机信息 该功能用于查看二层网络下的物理机信息。\n 在二层网络详情页面，单击“物理机”页签，进入物理机页面。 查看指定二层网络下的物理机信息，包括名称、启用、状态、IP、规格、SN、分配、IPMI信息。  查看宿主机信息 该功能用于查看二层网络下的宿主机信息。\n 在二层网络详情页面，单击“宿主机”页签，进入宿主机页面。 查看指定二层网络下的宿主机信息，包括名称、启用、状态、IP、服务、#VM（虚拟机的数量）、CPU、内存、存储、SN、IPMI、初始账号、类型信息。  查看资源统计 该功能用于查看二层网络下的资源统计信息。\n 在二层网络详情页面，单击“资源统计”页签，进入资源统计页面。 以环形图的形式分别表示二层网络下所有宿主机CPU、内存、磁盘、私有IP的总数量、已使用以及使用利用率信息、以及宿主机启用与未启用数量、虚拟主机总量与处于运行、关机、回收站、其他状态的虚拟主机数量、透传设备使用与未使用数量。  ","excerpt":"查看二层网络详情 该功能用于查看二层网络详细信息。\n 在二层网络页面，单击二层网络名称项，进入二层网络详情页面。 详情页面顶部菜单项支持对二 …","ref":"/zh/docs/onpremise/network/tutorial/default/viewwire/","title":"查看二层网络下信息"},{"body":"新建TCP监听 TCP监听适用于注重可靠性，对数据准确性要求高，速度可以相对较慢的场景，如文件传输、收发邮件、远程登录等；用户可创建TCP监听来转发开自客户端的TCP请求。\n  在负载均衡实例页面，单击Cloudpods平台的实例名称项，进入实例详情页面。\n  单击“监听”页签，进入监听页面。\n  单击列表上方 “新建” 按钮，弹出新建负载均衡监听对话框，配置协议\u0026监听相关参数。\n 名称：设置监听的名称。 监听端口：用来接收请求并向后端服务器转发请求的端口，端口范围为1-65535。 协议：支持监听TCP、UDP、HTTP、HTTPS协议，协议选择为“TCP”。  高级设置：默认隐藏，可根据需求进行配置。\n 调度算法：设置负载均衡的调度算法。  轮询(RR)：按照访问顺序依次将外部请求分发到后端服务器组。 加权轮询(WRR)：权重值越高的后端服务器，被轮询到的次数（概率）也越高。 加权最小连接数(WLC)：除了根据每台后端服务器设定的权重值来进行轮询，同时还考虑后端服务器的实际负载（即连接数）。当权重值相同时，当前连接数越小的后端服务器被轮询到的次数（概率）也越高。 源IP一致性哈希(SCH)：基于源IP地址的一致性hash，相同的源地址会调度到相同的后端服务器。   启用访问控制：设置是否启用访问控制，如勾选启用访问控制后，需要设置访问控制方式以及访问策略控制组。  访问控制方式：白名单即允许访问控制策略组中的IP访问负载均衡；黑名单即禁止访问控制策略组中的IP访问负载均衡。 访问控制策略组：选择访问控制策略组，请先在访问控制页面创建策略组。   后端连接超时时间：转发节点收到客户端请求后，请求后端服务器的超时时间。 后端连接空闲时间：设置转发节点与后端服务器的连接空闲时间。 连接空闲超时时间：连接会话建议后允许的空闲时间，在超时时间内一直没有访问请求，将会暂时中断当前连接。 设置Proxy协议：通过Proxy协议获取客户端真实IP。一般常用V2版本。    单击 “下一步：后端服务器组” 按钮，选择后端服务器组，如无后端服务器组，可新建。\n  单击 “下一步：健康检查” 按钮，配置健康检查相关参数。\n 开启健康检查：选择是否开启健康检查，若勾选开启健康检查，配置以下参数。 健康检查协议：选择健康检查协议，包括TCP和HTTP，TCP协议健康检查通过发送SYN握手报文来检测服务器端口是否存活；HTTP协议健康检查通过发送HEAD/GET请求模拟浏览器的访问行为来检查服务器应用是否健康。 健康检查路径（仅支持HTTP）：设置健康检查的URL地址的路径。 健康检查域名（仅支持HTTP）：设置健康检查的请求域名。 正常状态码（仅支持HTTP）：设置健康检查正常的HTTP状态码。 健康检查响应超时时间：健康检查响应的最大超时时间，如在响应时间内未响应，则判定健康检查异常。 健康检查间隔时间：负载均衡进行健康检查的时间间隔。 健康检查健康阈值：连续n（n为设置的值）次收到健康检查的结果为成功，则显示状态为健康。 健康检查不健康阈值：连续n（n为设置的值）次收到健康检查的结果为识别，则显示状态为异常。    单击 “确定” 按钮，完成操作。\n  新建UDP监听 UDP协议适用于注重实时性而不关注可靠性的场景，如视频聊天、游戏等。用户可创建UDP监听来转发开自客户端的UDP请求。\n  在负载均衡实例页面，单击Cloudpods平台的实例名称项，进入实例详情页面。\n  单击“监听”页签，进入监听页面。\n  单击列表上方 “新建” 按钮，弹出新建负载均衡监听对话框，配置协议\u0026监听相关参数。\n 名称：设置监听的名称。 监听端口：用来接收请求并向后端服务器转发请求的端口，端口范围为1-65535。 协议：支持监听TCP、UDP、HTTP、HTTPS协议，协议选择为“UDP”。  高级设置：默认隐藏，可根据需求进行配置。\n 调度算法：设置负载均衡的调度算法。  轮询(RR)：按照访问顺序依次将外部请求分发到后端服务器组。 加权轮询(WRR)：权重值越高的后端服务器，被轮询到的次数（概率）也越高。 加权最小连接数(WLC)：除了根据每台后端服务器设定的权重值来进行轮询，同时还考虑后端服务器的实际负载（即连接数）。当权重值相同时，当前连接数越小的后端服务器被轮询到的次数（概率）也越高。 源IP一致性哈希(SCH)：基于源IP地址的一致性hash，相同的源地址会调度到相同的后端服务器。   启用访问控制：设置是否启用访问控制，如勾选启用访问控制后，需要设置访问控制方式以及访问策略控制组。  访问控制方式：白名单即允许访问控制策略组中的IP访问负载均衡；黑名单即禁止访问控制策略组中的IP访问负载均衡。 访问控制策略组：选择访问控制策略组，请先在访问控制页面创建策略组。   后端连接超时时间：转发节点收到客户端请求后，请求后端服务器的超时时间。 后端连接空闲时间：设置转发节点与后端服务器的连接空闲时间。 连接空闲超时时间：连接会话建议后允许的空闲时间，在超时时间内一直没有访问请求，将会暂时中断当前连接。    单击 “下一步：后端服务器组” 按钮，选择后端服务器组，如无后端服务器组，可新建。\n  单击 “下一步：健康检查” 按钮，配置健康检查相关参数。\n 开启健康检查：选择是否开启健康检查，若勾选开启健康检查，配置以下参数。 健康检查协议：选择健康检查协议，包括UDP协议。UDP协议通过UDP报文探测获取状态信息。 健康检查响应超时时间：健康检查响应的最大超时时间，如在响应时间内未响应，则判定健康检查异常。 健康检查间隔时间：负载均衡进行健康检查的时间间隔。 健康检查健康阈值：连续n（n为设置的值）次收到健康检查的结果为成功，则显示状态为健康。 健康检查不健康阈值：连续n（n为设置的值）次收到健康检查的结果为识别，则显示状态为异常。    单击 “确定” 按钮，完成操作。\n  新建HTTP监听 HTTP协议适用于需要对请求的内容进行识别的应用，如Web应用、App服务等。用户可创建HTTP监听来转发开自客户端的HTTP请求。\n  在负载均衡实例页面，单击Cloudpods平台的实例名称项，进入实例详情页面。\n  单击“监听”页签，进入监听页面。\n  单击列表上方 “新建” 按钮，弹出新建负载均衡监听对话框，配置协议\u0026监听相关参数。\n 名称：设置监听的名称。 监听端口：用来接收请求并向后端服务器转发请求的端口，端口范围为1-65535。 协议：支持监听TCP、UDP、HTTP、HTTPS协议，协议选择为“HTTP”。 重定向：当用户发起HTTP访问请求时，配置重定向后将HTTP访问重定向到用户配置的重定向后的URL地址。当启用重定向后，无需配置后端服务器组以及健康检查以及与后端服务器相关的参数等。 重定向方式：包括永久重定向（301）、临时重定向（302）、临时重定向（307）。  永久重定向（301）：当用户请求的网址资源永久的迁移到了新的网址，可以使用永久重定向（301），使得用户访问旧网址时直接替换成重定向网址。 临时重定向（302）：当用户请求的网址资源临时改变了位置，可以使用临时重定向，但是302只能实现GET到GET的重定向，非GET请求可能会重定向为GET请求。 临时重定向（307）：当用户请求的网址资源临时改变了位置，可以使用临时重定向，307可以保持请求方法不变，如POST请求仍旧重定向为POST请求。   重定向至：设置重定向后的URL地址。修改HTTP协议、域名（IP或IP+端口）、URL路径任意一项即可。例如，将HTTP请求强制通过HTTPS协议访问，此时将重定向至修改为HTTPS协议，其他留空即可。  高级设置：默认隐藏，可根据需求进行配置。\n 调度算法：设置负载均衡的调度算法。  轮询(RR)：按照访问顺序依次将外部请求分发到后端服务器组。 加权轮询(WRR)：权重值越高的后端服务器，被轮询到的次数（概率）也越高。 加权最小连接数(WLC)：除了根据每台后端服务器设定的权重值来进行轮询，同时还考虑后端服务器的实际负载（即连接数）。当权重值相同时，当前连接数越小的后端服务器被轮询到的次数（概率）也越高。 源IP一致性哈希(SCH)：基于源IP地址的一致性hash，相同的源地址会调度到相同的后端服务器。   开启会话保持：选择是否开启会话保持，开启会话保持后，负载均衡监听会把来自同一客户端的请求分发到同一台服务器上。  Cookie处理方式：包括植入Cookie和重写Cookie。当选择“植入Cookie”时，需要设置会话超时时间，客户端在第一次访问时，负载均衡会在返回请求中植入Cookie，下次客户端会携带此Cookie访问，负载均衡服务将会将请求重定向给之前记录到的后端服务器上。当选择“重写Cookie”时，需要在后端服务器上配置Cookie，并设置Cookie名称，负载均衡服务发现用户自定义了Cookie，将会对原来的Cookie进行重写，下次客户端携带新的Cookie访问，负载均衡服务会将请求定向转发给之前记录到的后端服务器。 会话超时时间（植入Cookie设置此参数）：当超过设置时间后，连接内无新的请求，将会自动断开会话保持。 Cookie名称（重写Cookie设置此参数）：设置cookie名称为后端服务器上配置的Cookie名称。   启用访问控制：设置是否启用访问控制，如勾选启用访问控制后，需要设置访问控制方式以及访问策略控制组。  访问控制方式：白名单即允许访问控制策略组中的IP访问负载均衡；黑名单即禁止访问控制策略组中的IP访问负载均衡。 访问控制策略组：选择访问控制策略组，请先在访问控制页面创建策略组。   后端连接超时时间：转发节点收到客户端请求后，请求后端服务器的超时时间。 后端连接空闲时间：设置转发节点与后端服务器的连接空闲时间。 连接空闲超时时间：连接会话建议后允许的空闲时间，在超时时间内一直没有访问请求，将会暂时中断当前连接。 连接请求超时时间：在超时时间内，服务器一直没有响应，负载均衡将放弃等待。 限定接收请求速率：限定监听接收请求的最大速率，0为默认值，表示不限速。 限定同源IP请求速率：限定每个源IP对此监听发送请求的最大速率，0为默认值，表示不限速。 Gzip数据压缩：是否启用Gzip数据压缩，开启后将会对特定的文件类型进行压缩，目前Gzip支持压缩的类型包括：text/xml、text/plain、text/css、application/javascript、application/x-javascript application/rss+xml、application/atom+xml、application/xml。 设置Proxy协议：通过Proxy协议获取客户端真实IP。一般常用V2版本。 附加HTTP头部字段：选择是否通过X-Forwarded-For获取客户端真实IP。    单击 “下一步：后端服务器组” 按钮，选择后端服务器组，如无后端服务器组，可新建。\n  单击 “下一步：健康检查” 按钮，配置健康检查相关参数。\n 开启健康检查：选择是否开启健康检查，若勾选开启健康检查，配置以下参数。 健康检查协议：选择健康检查协议，包括TCP和HTTP，TCP协议健康检查通过发送SYN握手报文来检测服务器端口是否存活；HTTP协议健康检查通过发送HEAD/GET请求模拟浏览器的访问行为来检查服务器应用是否健康。 健康检查路径（仅支持HTTP）：设置健康检查的URL地址的路径。 健康检查域名（仅支持HTTP）：设置健康检查的请求域名。 正常状态码（仅支持HTTP）：设置健康检查正常的HTTP状态码。 健康检查响应超时时间：健康检查响应的最大超时时间，如在响应时间内未响应，则判定健康检查异常。 健康检查间隔时间：负载均衡进行健康检查的时间间隔。 健康检查健康阈值：连续n（n为设置的值）次收到健康检查的结果为成功，则显示状态为健康。 健康检查不健康阈值：连续n（n为设置的值）次收到健康检查的结果为识别，则显示状态为异常。    单击 “确定” 按钮，完成操作。\n  新建HTTPS监听 HTTPS协议适用于需要加密传输的应用，用户可创建HTTPS监听来转发开自客户端的HTTPS请求。\n  在负载均衡实例页面，单击Cloudpods平台的实例名称项，进入实例详情页面。\n  单击“监听”页签，进入监听页面。\n  单击列表上方 “新建” 按钮，弹出新建负载均衡监听对话框，配置协议\u0026监听相关参数。\n 名称：设置监听的名称。 监听端口：用来接收请求并向后端服务器转发请求的端口，端口范围为1-65535。 协议：支持监听TCP、UDP、HTTP、HTTPS协议，协议选择为“HTTPS”。 证书：选择负载均衡证书。 重定向：当用户发起HTTPS访问请求时，配置重定向后将HTTPS访问重定向到用户配置的重定向后的URL地址。当启用重定向后，无需配置后端服务器组以及健康检查以及与后端服务器相关的参数等。 重定向方式：包括永久重定向（301）、临时重定向（302）、临时重定向（307）。  永久重定向（301）：当用户请求的网址资源永久的迁移到了新的网址，可以使用永久重定向（301），使得用户访问旧网址时直接替换成重定向网址。 临时重定向（302）：当用户请求的网址资源临时改变了位置，可以使用临时重定向，但是302只能实现GET到GET的重定向，非GET请求可能会重定向为GET请求。 临时重定向（307）：当用户请求的网址资源临时改变了位置，可以使用临时重定向，307可以保持请求方法不变，如POST请求仍旧重定向为POST请求。   重定向至：设置重定向后的URL地址。修改HTTP协议、域名（IP或IP+端口）、URL路径任意一项即可。例如，将HTTP请求强制通过HTTPS协议访问，此时将重定向至修改为HTTPS协议，其他留空即可。  高级设置：默认隐藏，可根据需求进行配置。\n 调度算法：设置负载均衡的调度算法。  轮询(RR)：按照访问顺序依次将外部请求分发到后端服务器组。 加权轮询(WRR)：权重值越高的后端服务器，被轮询到的次数（概率）也越高。 加权最小连接数(WLC)：除了根据每台后端服务器设定的权重值来进行轮询，同时还考虑后端服务器的实际负载（即连接数）。当权重值相同时，当前连接数越小的后端服务器被轮询到的次数（概率）也越高。 源IP一致性哈希(SCH)：基于源IP地址的一致性hash，相同的源地址会调度到相同的后端服务器。   开启会话保持：选择是否开启会话保持，开启会话保持后，负载均衡监听会把来自同一客户端的请求分发到同一台服务器上。  Cookie处理方式：包括植入Cookie和重写Cookie。当选择“植入Cookie”时，需要设置会话超时时间，客户端在第一次访问时，负载均衡会在返回请求中植入Cookie，下次客户端会携带此Cookie访问，负载均衡服务将会将请求重定向给之前记录到的后端服务器上。当选择“重写Cookie”时，需要在后端服务器上配置Cookie，并设置Cookie名称，负载均衡服务发现用户自定义了Cookie，将会对原来的Cookie进行重写，下次客户端携带新的Cookie访问，负载均衡服务会将请求定向转发给之前记录到的后端服务器。 会话超时时间（植入Cookie设置此参数）：当超过设置时间后，连接内无新的请求，将会自动断开会话保持。 Cookie名称（重写Cookie设置此参数）：设置cookie名称为后端服务器上配置的Cookie名称。   启用访问控制：设置是否启用访问控制，如勾选启用访问控制后，需要设置访问控制方式以及访问策略控制组。  访问控制方式：白名单即允许访问控制策略组中的IP访问负载均衡；黑名单即禁止访问控制策略组中的IP访问负载均衡。 访问控制策略组：选择访问控制策略组，请先在访问控制页面创建策略组。   限定接受请求速率：限定监听接收请求的最大速率，0为默认值，表示不限速。 限定同源IP请求速率：限定每个源IP对此监听发送请求的最大速率，0为默认值，表示不限速。 启用HTTP2.0：选择是否启用HTTP 2.0协议。 Gzip数据压缩：是否启用Gzip数据压缩，开启后将会对特定的文件类型进行压缩，目前Gzip支持压缩的类型包括：text/xml、text/plain、text/css、application/javascript、application/x-javascript application/rss+xml、application/atom+xml、application/xml。 设置Proxy协议：通过Proxy协议获取客户端真实IP。一般常用V2版本。 附加HTTP头部字段：选择是否通过X-Forwarded-For获取客户端真实IP。    单击 “下一步：后端服务器组” 按钮，选择后端服务器组，如无后端服务器组，可新建。\n  单击 “下一步：健康检查” 按钮，配置健康检查相关参数。\n 开启健康检查：选择是否开启健康检查，若勾选开启健康检查，配置以下参数。 健康检查协议：选择健康检查协议，包括TCP和HTTP，TCP协议健康检查通过发送SYN握手报文来检测服务器端口是否存活；HTTP协议健康检查通过发送HEAD/GET请求模拟浏览器的访问行为来检查服务器应用是否健康。 健康检查路径（仅支持HTTP）：设置健康检查的URL地址的路径。 健康检查域名（仅支持HTTP）：设置健康检查的请求域名。 正常状态码（仅支持HTTP）：设置健康检查正常的HTTP状态码。 健康检查间隔时间：负载均衡进行健康检查的时间间隔。 健康检查健康阈值：连续n（n为设置的值）次收到健康检查的结果为成功，则显示状态为健康。 健康检查不健康阈值：连续n（n为设置的值）次收到健康检查的结果为识别，则显示状态为异常。    单击 “确定” 按钮，完成操作。\n  转发策略管理 仅HTTP和HTTPS类型的监听支持设置转发策略。配置转发策略后将来自不同域名或URL的请求转发给不同的后端服务器组处理。\n说明 当用户发起HTTP/HTTPS请求时，将会优先匹配转发策略上的配置将请求重定向或转发到对应的后端服务器组，如果不能匹配转发策略，则将匹配监听上的配置将请求重定向或转发到对应的后端服务器组。  新建转发策略 该功能用于新建转发策略。\n 在HTTP/HTTPS监听详情页面，单击“转发策略”页签，进入转发策略页面。 单击列表上方 “新建” 按钮，弹出新建转发策略对话框。 配置以下参数：  名称：设置转发策略的名称。 域名：要转发的请求域名，域名只支持精确匹配，如为空，则匹配所有域名。 URL路径：设置请求的路径，URL路径支持前缀匹配，匹配所有以设置的路径开头的URL路径。 重定向（仅Cloudpods平台支持）：当用户发起HTTP/HTTPS访问请求时，配置重定向后将HTTP/HTTPS访问重定向到用户配置的重定向后的URL地址。当启用重定向后，无需配置后端服务器组以及限速参数等。 重定向方式（仅Cloudpods平台支持）：包括永久重定向（301）、临时重定向（302）、临时重定向（307）。  永久重定向（301）：当用户请求的网址资源永久的迁移到了新的网址，可以使用永久重定向（301），使得用户访问旧网址时直接替换成重定向网址。 临时重定向（302）：当用户请求的网址资源临时改变了位置，可以使用临时重定向，但是302只能实现GET到GET的重定向，非GET请求可能会重定向为GET请求。 临时重定向（307）：当用户请求的网址资源临时改变了位置，可以使用临时重定向，307可以保持请求方法不变，如POST请求仍旧重定向为POST请求。   重定向至（仅Cloudpods平台支持）：设置重定向后的URL地址。修改HTTP协议、域名（IP或IP+端口）、URL路径任意一项即可。例如，将HTTP请求强制通过HTTPS协议访问，此时将重定向至修改为HTTPS协议，其他留空即可。 后端服务器组：选择处理匹配转发策略的请求的后端服务器组。 限定接收请求速率（仅Cloudpods平台支持）：限定监听接收请求的最大速率，0为默认值，表示不限速。 限定同源IP请求速率（仅Cloudpods平台支持）：限定每个源IP对此监听发送请求的最大速率，0为默认值，表示不限速。   单击 “确定” 按钮，完成操作。  修改转发策略 该功能用于修改转发策略。\n 在HTTP/HTTPS监听详情页面，单击“转发策略”页签，进入转发策略页面。 单击转发策略右侧操作列 “修改” 按钮，弹出修改转发策略对话框。 修改相关参数，单击 “确定” 按钮。  删除转发策略 该功能用于删除转发策略。\n 在HTTP/HTTPS监听详情页面，单击“转发策略”页签，进入转发策略页面。 单击转发策略右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  修改监听 该功能用于修改监听。\n 在实例详情页面，单击“监听”页签，进入监听页面。 单击监听右侧操作列 “修改” 按钮，弹出修改负载均衡监听对话框。 修改相关参数，具体请参考新建监听，单击 “确定” 按钮。  删除监听 该功能用于删除监听。\n单个删除\n 在实例详情页面，单击“监听”页签，进入监听页面。 单击监听右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在实例详情页面，单击“监听”页签，进入监听页面。 在列表中选择一个或多个监听，单击列表上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  启用监听 该功能用于启用\"禁用\"状态的监听。\n 在实例详情页面，单击“监听”页签，进入监听页面。 单击监听右侧操作列 “更多” 按钮，选择下拉菜单 “启用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  禁用监听 该功能用于禁用\"启用\"状态的监听。\n 在实例详情页面，单击“监听”页签，进入监听页面。 单击监听右侧操作列 “更多” 按钮，选择下拉菜单 “禁用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  调整访问控制 该功能设置监听的访问控制策略。\n 在实例详情页面，单击“监听”页签，进入监听页面。 单击监听右侧操作列 “更多” 按钮，选择下拉菜单 “调整访问控制” 菜单项，弹出调整访问控制对话框。 设置是否启用访问控制，如勾选启用访问控制后，需要设置访问控制方式以及访问策略控制组。  访问控制方式：白名单即允许访问控制策略组中的IP访问负载均衡；黑名单即禁止访问控制策略组中的IP访问负载均衡。 访问控制策略组：选择访问控制策略组，请先在访问控制页面创建策略组。   单击 “确定” 按钮，完成操作。  启用健康检查 该功能用于为未开启健康检查的监听启用健康检查。重定向类型的监听不支持设置健康检查。\n 在实例详情页面，单击“监听”页签，进入监听页面。 单击监听右侧操作列 “更多” 按钮，选择下拉菜单 “启用健康检查” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  禁用健康检查 该功能用于为已开启健康检查的监听禁用健康检查。重定向类型的监听不支持设置健康检查。\n 在实例详情页面，单击“监听”页签，进入监听页面。 单击监听右侧操作列 “更多” 按钮，选择下拉菜单 “禁用健康检查” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"新建TCP监听 TCP监听适用于注重可靠性，对数据准确性要求高，速度可以相对较慢的场景，如文件传输、收发邮件、远程登录等；用户可创建TCP监 …","ref":"/zh/docs/onpremise/lb/tutorial/lb/lblistener/","title":"监听管理"},{"body":"快照是一种数据备份方式，硬盘快照用于在指定时间点对虚拟机的某一块硬盘创建一个完全可用拷贝，便于硬盘故障后快速回退到创建快照时的状态。\n目前云管平台支持手动设置硬盘快照和通过自动快照策略创建硬盘快照。其中手动快照和自动快照可通过名称进行区分。\n自动快照命名规范：\n 在Cloudpods平台上通过自动快照策略创建的快照名称为”Auto+随机8位数“  手动创建快照注意事项：\n VMware平台、UCloud平台的硬盘不支持创建快照。 硬盘所属虚拟机状态异常或硬盘未挂载到虚拟机时不支持创建快照。  回滚硬盘 该功能用于将虚拟机的硬盘状态回滚到创建快照时的状态。回滚硬盘之前需要确保硬盘关联的虚拟机处于关机状态。\n 单击硬盘快照右侧操作列 “回滚硬盘” 按钮，弹出回滚硬盘对话框。 单击 “确定” 按钮，将硬盘回滚到快照时刻。  同步状态 该功能用于获取硬盘快照的当前状态。\n单个同步状态\n 在硬盘快照页面，单击硬盘快照右侧操作列 “同步状态” 按钮，同步硬盘快照的状态。  批量同步状态\n 在硬盘快照列表列表中选择一个或多个硬盘快照，单击列表上方 “同步状态” 按钮，批量同步状态。  删除 该功能用于删除硬盘快照。\n单个删除\n 在硬盘快照页面，单击硬盘快照右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在硬盘快照列表列表中选择一个或多个硬盘快照，单击列表上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  查看硬盘快照详情 该功能用于查看硬盘快照的详细信息以及操作日志。\n 在硬盘快照列表中，单击硬盘快照名称项，进入硬盘快照详情页面。 详情页面顶部菜单项支持对硬盘快照进行回滚硬盘和删除操作。 查看硬盘快照的云上ID、ID、名称、状态、域、项目、平台、快照大小、创建方式（包括手动创建和自动创建）、快照类别、虚拟机（名称及状态信息）、硬盘属性（包括系统盘或数据盘）、硬盘（名称和状态）、存储类型、区域、可用区、云账号、创建时间、更新时间、备注等信息。  ","excerpt":"快照是一种数据备份方式，硬盘快照用于在指定时间点对虚拟机的某一块硬盘创建一个完全可用拷贝，便于硬盘故障后快速回退到创建快照时的状态。\n目前云 …","ref":"/zh/docs/onpremise/storage/tutorial/disk/snapshot/","title":"硬盘快照"},{"body":"负载均衡实例入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/负载均衡/实例” 菜单项，进入负载均衡实例页面。\n访问控制入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/负载均衡/访问控制” 菜单项，进入访问控制页面。\n负载均衡证书入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/负载均衡/证书” 菜单项，进入证书页面。\n","excerpt":"负载均衡实例入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/负载均衡/实例” 菜单项，进入负载均衡实例页面。\n访问控制 …","ref":"/zh/docs/onpremise/lb/tutorial/lb/","title":"部署负载均衡实例"},{"body":"TODO\n","excerpt":"TODO\n","ref":"/zh/docs/multicloud/cloudgroup/principle/","title":"原理介绍"},{"body":"部署节点 节点创建完成后需要将其部署在虚拟机、宿主机或外部机器上才能正常使用，部署节点的过程即将的配置文件下发到绑定的虚拟机上面。\n注意 当转发节点上有监听任意IP的某个端口的服务配置时，会造成在使用该转发节点的LB实例上配置对应协议端口的监听无法正常使用。\n# 在转发节点上查看监听任意IP的端口情况 $ netstat -nlp |grep 0.0.0.0: tcp 0 0 0.0.0.0:22 0.0.0.0:* LISTEN 7120/sshd 通过查询可以发现转发节点上的sshd服务正在监听任意IP的TCP 22端口，如用户需要在LB实例上配置TCP 22端口的监听，则需要将转发节点的sshd配置文件，将\"/etc/ssh/sshd_config\"配置文件的#ListenAddress 0.0.0.0改为ListenAddress \u003c转发节点IP\u003e 。\n   单击节点右侧操作列 “部署” 按钮，弹出部署对话框。\n  配置以下参数：\n 指定系统用户：需要使用系统管理员用户部署节点。设置项目为“system”、选择已知密码的系统用户名并输入对应密码。如不存在已知系统用户密码，可通过climc命令创建系统用户lbagent用户，并使用lbagent用户及密码部署。 说明 # 创建lbagent系统用户 $ climc user-create lbagent --password xxx --system-account # 将lbagent用户以管理员的角色加入到system项目 $ climc project-add-user system lbagent admin    部署类型：选择转发实例节点，请尽量选取相互独立的虚拟机、宿主机或外部机器。  当选择虚拟机时，要求虚拟机与负载均衡集群处于同一可用区，且虚拟机与控制节点网络连通。 当选择宿主机时，要求宿主机与负载均衡集群处于同一可用区，且宿主机与控制节点网络连通。 当选择外部机器时，要求ansible server（一般为控制节点）能够访问到目标机器。且目标机器上存在cloudroot用户，cloudroot用户支持sudo免密登录，管理员使用公钥可以免密登录cloudroot等。 说明 # 获取管理员公钥 $ climc sshkeypair-show --admin      Yum源地址：Yum源地址，https://yunioniso.oss-cn-beijing.aliyuncs.com/iso/{version}/rpms，且建议不勾选Yum源TLS校验。    单击 “确定” 按钮，弹出部署对话框，查看节点的部署情况。\n  若部署未执行完成，可再次单击 “部署” 按钮，在弹出的部署对话框中的单击”任务正在执行中框中“提示框的”详情“超链接，查看节点的部署情况。\n  节点部署完成后，将显示节点的主备以及心跳信息等。\n  查看部署详情 该功能用于查看节点的上次部署输出的日志信息，用于部署失败时通过输出日志进行排错等。部署详情仅在部署节点后才会出现。\n 在节点详情页面，单击“部署详情”页签，进入部署详情页面。 查看节点的部署详情以及输出日志等。 支持重新执行或终止执行操作等。  下线节点 该功能用于下线节点，节点下线会将节点配置文件从部署主机上删除。\n 单击节点右侧操作列 “下线” 按钮，弹出下线确认对话框。 单击 “确定” 按钮，下线节点。  ","excerpt":"部署节点 节点创建完成后需要将其部署在虚拟机、宿主机或外部机器上才能正常使用，部署节点的过程即将的配置文件下发到绑定的虚拟机上面。\n注意 当 …","ref":"/zh/docs/onpremise/lb/tutorial/lbcluster/deploylbagent/","title":"部署/下线负载均衡转发节点"},{"body":"现象  如下图所示, 创建页面无任何可选资源   可能的原因  前端缓存  可通过刷新整个页面解决   当前所选的域底下没有 可用 的云账号  创建云账号 到所选域   云账号健康状态异常  查看 健康检查   没有可用套餐  同步套餐异常(一般是由于外网不通引起的) 请查看控制节点到 https://yunionmeta.oss-cn-beijing.aliyuncs.com 是否可以正常通信 再次同步云账号   没有可用的IP子网  页面默认显示的是有ip子网的平台和区域 若页面中没有想要的平台或区域，请确保要选定的平台及区域有正常的ip子网    ","excerpt":"现象  如下图所示, …","ref":"/zh/docs/multicloud/compute/vminstance/faq/no_region/","title":"创建页面无任何资源"},{"body":"控制台 命令行  支持批量和单个rds实例备份同步状态   $ climc dbinstance-backup-syncstatus 4eca9256-f998-402e-83bf-db7b0860c5c3 +--------------------+--------------------------------------+ | Field | Value | +--------------------+--------------------------------------+ | account | qj-jd | | account_id | 96f46c61-38c4-4fd7-857a-effb4f69eabf | | backup_method | physical | | backup_mode | manual | | backup_size_mb | 13 | | brand | JDcloud | | can_delete | true | | can_update | true | | cloud_env | public | | cloudregion | JDcloud 华北-北京 | | cloudregion_id | 5323c848-cbe8-4d1d-8319-e42641fed2f2 | | created_at | 2021-06-22T07:05:37.000000Z | | dbinstance | testrds | | dbinstance_id | c466cc2b-5377-4bf3-8cf8-f9d8c89fb955 | | deleted | false | | domain_id | default | | engine | MySQL | | engine_version | 5.6 | | external_id | 39577a08-1499-466a-807d-421e7292f4b1 | | freezed | false | | id | 4eca9256-f998-402e-83bf-db7b0860c5c3 | | imported_at | 2021-06-22T07:05:37.000000Z | | is_emulated | false | | is_system | false | | manager | qj-jd | | manager_domain | Default | | manager_domain_id | default | | manager_id | 8e47bb75-5105-4ef9-84b8-8aa5927b06dd | | manager_project | system | | manager_project_id | a9a365125abf43c580ba98e5640b5c51 | | name | tes_backup | | pending_deleted | false | | project | system | | project_domain | Default | | provider | JDcloud | | region | JDcloud 华北-北京 | | region_ext_id | cn-north-1 | | region_external_id | JDcloud/cn-north-1 | | region_id | 5323c848-cbe8-4d1d-8319-e42641fed2f2 | | source | cloud | | status | sync_status | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 4 | | updated_at | 2021-06-24T06:18:01.000000Z | +--------------------+--------------------------------------+  ","excerpt":"控制台 命令行  支持批量和单个rds实例备份同步状态   $ climc dbinstance-backup-syncstatus …","ref":"/zh/docs/multicloud/db/rds/tutorial/backup/syncstatus/","title":"同步状态"},{"body":"控制台 命令行  支持批量和单个rds实例同步状态   $ climc dbinstance-syncstatus 6df152bc-0802-4fcc-8e72-22415ddf43a9 +--------------------+----------------------------------------------------------------------------------------------------------------------------+ | Field | Value | +--------------------+----------------------------------------------------------------------------------------------------------------------------+ | account | qj-azure | | account_id | b8b6a1ad-ed65-41f7-8525-91b44516346e | | auto_renew | false | | billing_type | postpaid | | brand | Azure | | can_delete | false | | can_update | true | | category | basic | | cloud_env | public | | cloudregion | Azure East US | | cloudregion_id | 59260e38-17f1-4b57-8df4-6177e6105067 | | connection_str | testsqlserverkf.database.windows.net | | created_at | 2021-06-21T08:08:57.000000Z | | deleted | false | | disable_delete | true | | disk_size_gb | 51 | | domain_id | default | | engine | SQLServer | | engine_version | 12.0 | | environment | AzurePublicCloud | | external_id | /subscriptions/7aaf3e6c-5f9c-43ad-b149-d9a14765af1c/resourcegroups/default/providers/microsoft.sql/servers/testsqlserverkf | | freezed | false | | id | 6df152bc-0802-4fcc-8e72-22415ddf43a9 | | imported_at | 2021-06-21T08:08:57.000000Z | | iops | 0 | | is_emulated | false | | is_system | false | | manager | Pay-As-You-Go | | manager_domain | Default | | manager_domain_id | default | | manager_id | 7ffddf3c-65ad-467c-870b-a99f2044039d | | manager_project | system | | manager_project_id | a9a365125abf43c580ba98e5640b5c51 | | name | testsqlserverkf | | pending_deleted | false | | port | 1433 | | project | system | | project_domain | Default | | project_src | cloud | | provider | Azure | | region | Azure East US | | region_ext_id | eastus | | region_external_id | Azure-int/eastus | | region_id | 59260e38-17f1-4b57-8df4-6177e6105067 | | source | cloud | | status | sync_status | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 16 | | updated_at | 2021-06-23T03:42:00.000000Z | | vcpu_count | 1 | | vmem_size_mb | 3069 | | vpc | - | | vpc_ext_id | 59260e38-17f1-4b57-8df4-6177e6105067-7ffddf3c-65ad-467c-870b-a99f2044039d | | vpc_id | c327f83f-f4c0-4d06-8269-0e56c681dd07 | +--------------------+----------------------------------------------------------------------------------------------------------------------------+  ","excerpt":"控制台 命令行  支持批量和单个rds实例同步状态   $ climc dbinstance-syncstatus …","ref":"/zh/docs/multicloud/db/rds/tutorial/dbinstance/syncstatus/","title":"同步状态"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/db/rds/","title":"关系型数据库(RDS)"},{"body":"","excerpt":"","ref":"/zh/docs/monitor_ops/monitor/tutorial/","title":"操作指南"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/baremetal/","title":"物理机"},{"body":"Cloudpods平台上的基于本地存储创建的虚拟机支持高可用功能，通过为虚拟机创建备份机来实现高可用，虚拟机与备份机之间互为主备且数据保持实时同步，当主虚拟机故障时，将会自动切换到备份机，快速恢复业务，减少因为虚拟机故障造成的业务宕机时间，同时将会再次为虚拟机创建可用的备份机，使其一直保持高可用的状态。\n注意 当创建备份机失败或切换备份机失败时，支持手动重试。  Web界面操作 添加备份机 该功能用于为使用本地存储的虚拟机在其它宿主机上创建备份机，创建的备份机与虚拟机配置相同，互为主备，实时保持数据同步等。虚拟机列表中只显示主虚拟机的信息，不显示备份机信息。\n注意  虚拟机和备份机不可以位于同一宿主机。 虚拟机添加备份机之后不支持调整配置、创建快照、迁移功能。 已经创建快照的虚拟机，添加备份机且切换到备份机后，原有快照不可用。    在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “高可用-添加备份机” 菜单项，弹出添加备份机对话框。 选择备份机的宿主机，单击 “确定” 按钮。 虚拟机名称右侧将出现的图标。  删除备份机 该功能用于删除虚拟机的备份机。\n 单击名称侧带有图标的虚拟机的 “更多” 按钮，选择下拉菜单 “高可用-删除备份机” 菜单项，弹出添加备份机对话框。 若备份机所在宿主机离线，可勾选“强制清除备份机记录”。 单击 “确定” 按钮，删除备份机。  ","excerpt":"Cloudpods平台上的基于本地存储创建的虚拟机支持高可用功能，通过为虚拟机创建备份机来实现高可用，虚拟机与备份机之间互为主备且数据保持实 …","ref":"/zh/docs/onpremise/vminstance/tutorial/backup/","title":"主备机"},{"body":"快照是一种数据备份方式，主机快照用于在指定时间点对虚拟机上的所有硬盘创建一个完全可用拷贝，后续当可基于主机快照创建一个与之前虚拟机配置状态完全相同的虚拟机；仅Cloudpods和VMware平台支持主机快照。\n主机快照来源\n 在虚拟机列表创建主机快照，主机快照占用的快照配额等于虚拟机上的硬盘数量。 在虚拟机列表对虚拟机进行主机克隆操作时产生的主机快照。  主机快照使用方法\n 在虚拟机页面创建虚拟机页面可以选择使用主机快照创建虚拟机。  删除主机快照 该功能用于删除主机快照，为了避免主机快照占用快照配额较多导致项目中其他虚拟机无法创建快照等，请及时删除无用的主机快照。\n单个删除\n 在主机快照页面，单击主机快照右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在主机快照列表选择一个或多个主机快照，单击列表上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  查看主机快照详情 该功能用于查看主机快照的详细信息、子快照以及操作日志信息等。\n 在主机快照列表单击主机快照名称项，进入主机快照详情页面。 详情页面顶部菜单项支持对主机快照进行删除操作。 查看主机快照的云上ID、ID、名称、状态、域、项目、快照大小、创建方式、快照类别、子快照、虚拟机、创建时间、更新时间、备注等。  查看子快照信息 为虚拟机创建主机快照实质是为虚拟机的每块硬盘创建快照，主机快照对应每一块硬盘的快照叫做子快照。\n 在主机快照详情页面，单击“子快照”页签，进入子快照页面。 查看主机快照的子快照信息，包括快照名称、快照大小、状态以及创建时间。  ","excerpt":"快照是一种数据备份方式，主机快照用于在指定时间点对虚拟机上的所有硬盘创建一个完全可用拷贝，后续当可基于主机快照创建一个与之前虚拟机配置状态完 …","ref":"/zh/docs/onpremise/storage/tutorial/disk/instancesnapshot/","title":"主机快照"},{"body":"后端服务器组管理 后端服务器组即业务服务器的集合，用于接收负载均衡实例转发的请求。\n新建后端服务器组 该功能用于新建后端服务组。建议在创建监听之前先创建后端服务器组。\n 在实例详情页面，单击“后端服务器组”页签，进入后端服务器组页面。 单击列表上方 “新建” 按钮，弹性新建对话框。 设置后端服务器组的名称，单击 “确定” 按钮。  删除后端服务器组 该功能用于删除后端服务器组。当后端服务器组已关联监听时无法删除。\n单个删除\n 在实例详情页面，单击“后端服务器组”页签，进入后端服务器组页面。 单击后端服务器组右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在实例详情页面，单击“后端服务器组”页签，进入后端服务器组页面。 在列表中选择一个或多个后端服务器组，单击列表上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  查看后端服务器组详情 该功能用于查看后端服务器组的详细信息。\n 在实例详情页面，单击“后端服务器组”页签，进入后端服务器组页面。 单击后端服务器组名称项，进入后端服务器组详情页面。 查看以下信息：  基本信息：包括云上ID、ID、名称、状态、域、项目、平台、创建时间、更新时间、备注。 其他信息：包括负载均衡实例、VPC、区域、可用区。    后端服务器管理 后端服务器即具体处理请求的业务服务器。\n新建后端服务器 该功能用于将业务服务器添加到后端服务器组。\n 在后端服务器组详情页面，单击“后端服务器”页签，进入后端服务器页面。 单击列表上方 “新建” 按钮，弹出新建对话框。 配置以下参数：  类型：支持添加虚拟机、宿主机以及外部机器作为后端服务器。 端口：后端服务器用于接收请求的后端端口。 权重：设置后端服务器的权重，权重越高的服务器将被分配到更多的访问请求。 SSL（仅Cloudpods平台支持）：通过tls加密的方式访问后端服务器。   单击 “确定” 按钮，完成操作。  修改端口 该功能用于修改后端服务器的端口。\n 在后端服务器组详情页面，单击“后端服务器”页签，进入后端服务器页面。 单击后端服务器右侧操作列 “修改端口” 按钮，弹出修改端口对话框。 设置端口号，单击 “确定” 按钮。  修改权重 该功能用于修改后端服务器的权重。\n 在后端服务器组详情页面，单击“后端服务器”页签，进入后端服务器页面。 单击后端服务器右侧操作列 “修改权重” 按钮，弹出修改权重对话框。 设置权重，单击 “确定” 按钮。  删除后端服务器 该功能用于删除后端服务器。\n 在后端服务器组详情页面，单击“后端服务器”页签，进入后端服务器页面。 单击后端服务器右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  查看后端服务器详情 该功能用于查看后端服务器的详细信息。\n 在后端服务器组详情页面，单击“后端服务器”页签，进入后端服务器页面。 单击后端服务器名称项，进入后端服务器详情页面。 查看以下信息：  基本信息：包括云上ID、ID、名称、状态、域、项目、平台、创建时间、更新时间、备注。 其他信息：包括负载均衡实例、IP地址、端口、权重、VPC、可用区、SSL。    ","excerpt":"后端服务器组管理 后端服务器组即业务服务器的集合，用于接收负载均衡实例转发的请求。\n新建后端服务器组 该功能用于新建后端服务组。建议在创建监 …","ref":"/zh/docs/onpremise/lb/tutorial/lb/backendgroup/","title":"后端服务器组"},{"body":"应用架构 下图显示Cloudpods的应用架构，Cloudpods统一管理多云基础设施。\n向下：主要实现多云环境下计算、网络、存储等IaaS资源的统一管理。对于本地IDC的未云化资源，主要是裸机，KVM虚拟机（Libvirt），VMware ESXi虚拟机（vSphere），通过内置的私有云方案实现云化管理。对于私有云和公有云资源，则通过API实现统一管理。\n向上：多云管理平台一方面通过虚拟机、裸机等形式为传统应用提供完整操作系统运行时环境，另一方面则给Kubernetes提供多云运行环境，统一管理多云Kubernetes。在Kubernetes之上则提供云原生应用的容器运行时环境。同时，基于Kubernetes和开源组件提供PaaS中间件服务。\n系统架构 下图显示Cloudpods的系统架构，分为接入层，控制层和资源层三个主要部分。\n接入层 接入层实现Cloudpods平台的访问功能，允许用户通过如下3种方式访问云管平台的功能：\nAPI访问：通过REST API访问云管平台功能，用户可以直接通过http接口访问云管平台的REST API，也可以使用云管平台提供的SDK。目前SDK支持Java，Python和Golang等三种语言。\n命令行访问：通过云管平台提供的climc命令行工具访问云管平台功能，允许用户通过脚本调用climc，实现一些自动化运维功能。Climc使用Golang语言，基于云管平台的Golang SDK开发。\nWeb控制台访问：通过Web UI访问云管平台的功能。允许用户通过主流web浏览器访问云管平台。Web控制台提供管理员使用的管理后台以及普通用户使用的普通功能页面，能够提供大部分的管理和使用功能。Web控制台基于Vue 2.0 JavaScript SPA框架实现。其中，API网关提供Web控制台对各个服务的统一REST API访问接口。实现Web控制台的登录验证，session 控制，以及对后端各个服务的API调用。API网关由Golang完全自主开发，完全无状态架构，具备水平扩展能力。\n控制层 控制层实现Cloudpods的管理和控制功能。主要由Region控制器, 认证服务，镜像服务，计费计量，以及H5控制台等服务组件构成。\nRegion控制器是整个Cloudpods的控制中枢，负责机房网络，宿主机，网络，存储，虚拟机等各类资源的元数据信息管理，以及对虚拟机，裸机等的自动化管理操作认证的调度，协调管理。云控制器内置基于REST API接口的分布式异步任务管理框架，实现对在计算节点进行的开关机，创建删除等耗时操作任务的管理协调工作。云控制器完全自主开发，1.x版本基于Python Tornado框架开发，2.x版本开始基于Golang语言开发。云控制器采用无状态架构，可以水平扩展，通过水平拆分实现高可用。另外，Region控制器还附带了调度器组件。 调度器负责资源调度功能，是平台中资源获取决策的唯一执行者，根据用户对资源的要求，给出资源的最优提供者。调度器支持批量调度，调度性能优异，可扩展性好。调度器完全自主开发，基于Golang语言开发。\n认证服务提供Cloudpods的账户管理和认证体系，并提供基于项目的多租户支持，同时提供服务目录功能。认证服务支持多种认证源，允许和企业的LDAP／AD对接，允许用户以企业统一的账户体系登入系统。认证服务2.10之前版本基于OpenStack Keystone Pika版本，开发语言为Python。在开源版本基础上，我们修正了BUG，并做了若干改进。2.10之后版本采用golang语言开发。Keystone采用无状态架构，支持水平扩展，可以水平拆分实现服务高可用。\n镜像服务提供Cloudpods各种主机资源的操作系统镜像的管理功能。提供镜像存储，元数据管理等功能。镜像服务1.x版本基于OpenStack Glance Folsom版本改进而来，开发语言为Python。在开源版本基础上，我们修正了BUG，并做了若干改进。2.x版本采用golang语言开发。Glance采用无状态架构，支持水平扩展，可以水平拆分实现服务高可用。\n资源层 资源层实现对KVM虚拟机，裸机，VMWare虚拟机等计算资源的管理和控制功能，以及对阿里云，Azure，腾讯云，AWS等公有云资源的管理。\n","excerpt":"应用架构 下图显示Cloudpods的应用架构，Cloudpods统一管理多云基础设施。\n向下：主要实现多云环境下计算、网络、存储等IaaS …","ref":"/zh/docs/architecture/","title":"平台架构"},{"body":"新建VPC网络IP子网 该功能用于在VPC下创建IP子网。\n 在IP子网页面，单击顶部“本地IDC”页签，单击列表上方 “新建” 按钮，进入新建本地IDC的IP子网页面。 设置以下信息：  指定项目：选择IP子网的所属项目。 区域：选择IP子网所属区域。 名称：设置IP子网的名称。 VPC：选择IP子网所属VPC，选择非Default VPC，格式为“vpc名称（网段）”。 可用区：选择IP子网所属的可用区，一个VPC下可以有多个可用区的IP子网，同一VPC下不同可用区的子网默认互通。 子网网段：设置子网的IP地址范围，IP子网需要在VPC的网段范围内。支持最多增加5个子网。 自动调度：启用自动调度后，用户创建虚拟机网络指定自动调度时，将从启用自动调度的IP子网中为虚拟机分配IP地址。   单击 “确定” 按钮，完成创建。  ","excerpt":"新建VPC网络IP子网 该功能用于在VPC下创建IP子网。\n 在IP子网页面，单击顶部“本地IDC”页签，单击列表上方 “新建” 按钮，进入 …","ref":"/zh/docs/onpremise/network/tutorial/vpc/createsubnet/","title":"新建VPC网络IP子网"},{"body":"新建经典网络IP子网 该功能用于创建经典网络类型的IP子网。请根据IP子网的用途选择不同的服务器类型。\n 当IP子网用于虚拟机或裸金属时，请选择虚拟机类型的IP子网； 当IP子网用于物理机、宿主机使用时，请创建物理机类型的IP子网； 当IP子网用于物理机的IPMI或PXE网络使用时，请创建对应的PXE或IPMI类型的IP子网。 当IP子网用于VPC网络的弹性公网IP使用时，请创建弹性公网IP类型的IP子网。   在IP子网页面，单击顶部“全部”或“本地IDC”页签，单击列表上方 “新建” 按钮，进入新建本地IDC的IP子网页面。 设置以下信息：  指定项目：选择IP子网的所属项目。 区域：选择IP子网所属区域。 名称：设置IP子网的名称。 VPC：选择IP子网所属VPC为Default。 二层网络：选择区域、专有网络以及二层网络。 服务器类型：设置IP子网用于为哪类服务器分配IP地址，包括虚拟机（虚拟机和裸金属）、物理机（物理机和宿主机）、PXE、IPMI、弹性公网IP。 子网网段：设置起始IP地址、结束IP地址、子网掩码、默认网关（选填）、VLAN ID（选填）等。支持一次性增加6个IP子网段，当一次性创建多个IP子网时，子网名称由系统自动分配，如创建3个IP子网，页面中IP子网名称设置为network，则名称依次为network0、network1、network2。 自动调度：仅当服务器类型为虚拟机时，支持设置自动调度，启用自动调度后，用户创建虚拟机网络指定自动调度时，将从启用自动调度的IP子网中为虚拟机分配IP地址。 高级配置：单击“高级配置”超连接，展开高级配置选项。  线路类型：当服务器类型为弹性公网IP时，支持自定义标记EIP的线路类型，例如，联通、移动等；在【费用-费率配置】中支持针对不同线路类型的EIP设置不同的费率，若无线路类型，则使用默认EIP费率。 地址分配策略：包括缺省策略（物理机从IP子网高地址开始分配，虚拟机从IP子网低地址开始分配）、从高地址分配、从低地址分配、随机分配。 域名服务器：设置域名服务器。 主机域名后缀：当设置主机域名后缀时，当系统为主机分配一个IP，同时也会创建一条指向该IP的域名记录，域名格式由主机名称+主机域名后缀组成。例如主机名称为VM01，分配IP地址为192.168.1.1，主机域名后缀为test.com。即创建一条192.168.1.1与VM01.test.com对应的域名记录，当使用ping命令，ping VM01.test.com，将返回192.168.1.1的IP地址。      修改属性 该功能用于修改IP子网。仅Cloudpods平台上的Default VPC（经典网络）下IP子网支持修改。\n单个修改\n 在IP子网页面，单击IP子网右侧操作列 “更多” 按钮，选择下拉菜单 “修改属性” 菜单项，进入修改属性页面。 支持修改项如下：子网名称、服务器类型、起始IP、结束IP、子网掩码、默认网关、VLAN ID、高级配置(线路类型（仅弹性公网IP类型支持）、地址分配策略、域名服务器、主机域名后缀)。 修改完成后，单击 “确定” 按钮。  批量修改\n 在IP子网列表中选择一个或多个IP子网，单击列表上方 “批量操作” 按钮，选择下拉菜单 “修改属性” 菜单项，进入修改属性页面。 支持修改项如下：子网名称、起始IP、结束IP、子网掩码、默认网关、VLAN ID。 修改完成后，单击 “确定” 按钮。  ","excerpt":"新建经典网络IP子网 该功能用于创建经典网络类型的IP子网。请根据IP子网的用途选择不同的服务器类型。\n 当IP子网用于虚拟机或裸金属时，请 …","ref":"/zh/docs/onpremise/network/tutorial/default/createsubnet/","title":"新建经典网络IP子网"},{"body":"修改节点 该功能用于修改节点的配置信息。\n 单击节点右侧操作列 “更多” 按钮，选择下拉菜单 “修改” 菜单项，进入修改节点页面。 修改相关参数，单击 “确定” 按钮。  设置心跳超时时间 该功能用于修改转发实例的心跳超时时间。当转发实例超过超时时间未收到心跳时，节点状态将变为UNKNOWN。\n 单击节点右侧操作列 “更多” 按钮，选择下拉菜单 “设置心跳超时时间” 菜单项，弹出设置心跳超时时间对话框。 设置转发实例心跳超时时间，单击 “确定” 按钮，完成操作。  删除节点 只有节点下线后才可以删除节点。\n 单击节点右侧操作列 “删除” 按钮，弹出删除确认对话框。 勾选”确定已经实际操作下线“后，单击 “确定” 按钮，删除节点。  查看负载均衡转发节点信息\" 该功能用于查看节点的配置信息等。\n 在节点页面，单击节点名称项，进入节点详情页面。 详情页面顶部菜单项支持对节点进行管理操作。 查看以下信息。  基础信息：查看节点的云上ID、ID、名称、状态、域、项目、集群、主备、上一次心跳、可用区、心跳超时时间、部署机器、创建时间、更新时间、备注。 同步时间戳：表示数据库中负载均衡实例、监听、后端服务器组、后端服务器、转发策略、访问控制、证书等参数在某个特定时间之前已经存在、完整的、可验证的数据写入部署机器。 VRRP转发实例配置信息：包括通告间隔、网口、密码、抢占模式、优先级以及路由ID信息。 HAProxy配置信息：查看HAProxy配置信息，包括线程数、开启日志、开启HTTP日志、开启Normal日志、开启TCP日志、以及配置模板信息。 Telegraf（数据采集工具）配置信息：查看Telegraf配置信息，包括HAProxy上报间隔、数据库名称、地址、以及配置模板信息。 KeepAlived配置信息：查看KeepAlived配置模板信息。    ","excerpt":"修改节点 该功能用于修改节点的配置信息。\n 单击节点右侧操作列 “更多” 按钮，选择下拉菜单 “修改” 菜单项，进入修改节点页面。 修改相关 …","ref":"/zh/docs/onpremise/lb/tutorial/lbcluster/lbagentoperation/","title":"管理负载均衡转发节点"},{"body":"平台内置私有云默认将自动生成的Default VPC作为经典网络，在Default VPC下创建的二层网络或IP子网都与实际环境相关，\n二层网络入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/基础网络/二层网络” 菜单项，进入二层网络页面。\nIP子网入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/基础网络/IP子网” 或 “主机/网络/IP子网” 菜单项，进入IP子网页面。\n","excerpt":"平台内置私有云默认将自动生成的Default VPC作为经典网络，在Default VPC下创建的二层网络或IP子网都与实际环境相关，\n二层 …","ref":"/zh/docs/onpremise/network/tutorial/default/","title":"经典网络"},{"body":"启用调度策略 该功能用于启用\"禁用\"状态的调度策略。\n 在调度策略页面，单击\"禁用\"状态的调度策略操作列 “启用” 按钮，禁用调度策略。  禁用调度策略 该功能用于禁用\"启用\"状态的调度策略。\n 在调度策略页面，单击\"启用\"状态的调度策略操作列 “禁用” 按钮，启用调度策略。  删除调度策略 该功能用于删除调度策略，支持单个删除或批量删除。\n单个删除\n 在调度策略页面，单击调度策略操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在调度策略列表中选择一个或多个调度策略，单击页面上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"启用调度策略 该功能用于启用\"禁用\"状态的调度策略。\n 在调度策略页面，单击\"禁用\"状态的调度策略操作列 “启用” 按钮，禁用调度策略。   …","ref":"/zh/docs/onpremise/scheduler/tutorial/policyoperator/","title":"调度策略其他操作"},{"body":"介绍 目前迁移功能主要用于 Cloudpods 内置私有云的虚拟机上，该功能用于将虚拟机迁移到其他宿主机上面。当未指定宿主机时，系统将自动选择宿主机。\n迁移的方式分为“冷迁移”和“热迁移”，区别如下：\n 冷迁移：在虚拟机关机的状态下，将虚拟机磁盘从源宿主机拷贝到目标宿主机。 热迁移：在虚拟机运行的状态下，将虚拟机的磁盘以及内存状态同步到目标宿主机，当两边数据同步后，再将虚拟机切换到目标宿主机。  热迁移和冷迁移比起来，能够在不关机，保证业务运行的情况下，将虚拟机从一台宿主机迁移到另一台宿主机。\n但热迁移默认要求目标宿主机和源宿主机的 CPU microcode 一致，可以通过以下命令查看 CPU 的 microcode：\n$ cat /proc/cpuinfo | grep microcode | uniq microcode : 0xca Web界面操作 迁移 该功能用于将虚拟机迁移到其他宿主机上面。当未指定宿主机时，系统将自动选择宿主机。\n注意  高可用的虚拟机不支持迁移。 挂载了GPU设备或光驱设备的虚拟机不支持迁移。   单个虚拟机迁移\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “高可用-迁移” 菜单项，弹出迁移对话框。 配置以下参数：  强制迁移：若宿主机宕机，且虚拟机使用共享存储，可勾选“强制迁移”。 跳过CPU检查：虚拟机迁移时，要求目的宿主机与虚拟机所在宿主机的CPU型号和微码相同，若宿主机CPU型号不一致仍想继续迁移，可开启跳过CPU检查，系统将会尽力而为的进行惹迁移，但是迁移完成后，可能会存在虚拟机在目标宿主机上无法正常运行的情况。 宿主机：选择目标宿主机，也可留空，留空将由系统自动选择宿主机。平台会预先调度过滤出符合迁移条件的宿主机，如没有满足条件的宿主机，请检查在同一二层网络的宿主机上是否有可用的CPU、内存、存储，以及CPU型号和微码是否一样，若不一样，可先跳过CPU检查后尝试迁移等。   单击 “确定” 按钮，将虚拟机迁移到其他宿主机上面。  批量迁移\n可以选择在不同宿主机的虚拟机迁移到同一个宿主机上。\n 在虚拟机列表中选择一个或多个虚拟机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “迁移” 菜单项项，弹出迁移对话框。 配置以下参数：  强制迁移：若宿主机宕机，且虚拟机使用共享存储，可勾选“强制迁移”。 跳过CPU检查：虚拟机迁移时，要求目的宿主机与虚拟机所在宿主机的CPU型号和微码相同，若宿主机CPU型号不一致仍想继续迁移，可开启跳过CPU检查，系统将会尽力而为的进行惹迁移，但是迁移完成后，可能会存在虚拟机在目标宿主机上无法正常运行的情况。 宿主机：选择目标宿主机，也可留空，留空将由系统自动选择宿主机。平台会预先调度过滤出符合迁移条件的宿主机，如没有满足条件的宿主机，请检查在同一二层网络的宿主机上是否有可用的CPU、内存、存储，以及CPU型号和微码是否一样，若不一样，可先跳过CPU检查后尝试迁移等。   单击 “确定” 按钮，将虚拟机迁移到其他宿主机上面。  Climc 冷迁移 虚拟机在关机状态下，可以执行冷迁移操作。\n查看冷迁移帮助信息 冷迁移的命令为 climc server-migrate，通过下面的命令可以查看参数的说明和帮助信息：\n$ climc help server-migrate Usage: climc server-migrate [--auto-start] [--rescue-mode] [--prefer-host PREFER_HOST] \u003cID\u003e Migrate server Positional arguments: \u003cID\u003e ID of server Optional arguments: [--auto-start] Server auto start after migrate [--rescue-mode] Migrate server in rescue mode, all disks must reside on shared storage [--prefer-host PREFER_HOST] Server migration prefer host id or name 冷迁移举例  对已经关机的虚拟机 vm1 进行迁移  # 先查看虚拟机的信息 $ climc server-list --search vm1 --details # 执行随机迁移 $ climc server-migrate vm1 # 迁移过程中虚拟机会处于 migrating 的状态 $ climc server-list --search vm1 # 迁移完成后虚拟机状态变为 ready，并且可以发现宿主机信息也发生了变化 $ climc server-list --search vm1 --details  迁移到指定宿主机  # 先列出平台的 kvm 宿主机 $ climc host-list --hypervisor kvm # 然后指定宿主机名称或者 id 迁移 $ climc server-migrate --prefer-host xxx vm1  迁移后自动启动虚拟机  $ climc server-migrate --auto-start vm1 $ climc server-migrate --auto-start --prefer-host xxx vm1  rescue mode 迁移：当宿主机完全宕机，虚拟机所有的磁盘都使用共享存储（ceph 等分布式块存储）的情况下，可以通过 rescue mode 把元数据迁移到另外的宿主机，然后启动  $ climc server-migrate --rescue-mode \\  --auto-start \\  --prefer-host $host_name \\  $vm_name 热迁移 虚拟机在运行状态进行的迁移叫做热迁移，热迁移的速度会比冷迁移慢，因为设计磁盘和内存等状态的同步，但好处是在不关机的状态下进行迁移，基本上对虚拟机上运行的业务没有影响。\n查看热迁移帮助信息 热迁移的命令为 climc server-live-migrate，通过下面的命令查看帮助信息：\n$ climc help server-live-migrate Usage: climc server-live-migrate [--skip-cpu-check] [--prefer-host PREFER_HOST] \u003cID\u003e Live-Migrate server Positional arguments: \u003cID\u003e ID of server Optional arguments: [--skip-cpu-check] Skip check CPU mode of the target host [--prefer-host PREFER_HOST] Server migration prefer host id or name 热迁移举例  对虚拟机 vm1 进行热迁移，目标宿主机随机选择  $ climc server-live-migrate vm1  热迁移默认要求目标宿主机和虚拟机当前所在的宿主机 CPU microcode 一致， 如果不一致该宿主机则会被调度器过滤掉，如果环境里面实在没有 CPU 一致的目标宿主机，可以使用 --skip-cpu-check 绕过 CPU microcode 的检查  $ climc server-live-migrate --skip-cpu-check vm1  指定 vm1 热迁移到目标宿主机 host1 ，并且绕过 CPU microcode 检查  $ climc server-live-migrate \\  --prefer-host host1 \\  --skip-cpu-check \\  vm1 ","excerpt":"介绍 目前迁移功能主要用于 Cloudpods 内置私有云的虚拟机上，该功能用于将虚拟机迁移到其他宿主机上面。当未指定宿主机时，系统将自动选 …","ref":"/zh/docs/onpremise/vminstance/tutorial/migrate/","title":"迁移相关"},{"body":"分割IP子网 该功能用于分割IP子网范围，将一个子网分成两个子网。仅Cloudpods平台支持。\n 单击IP子网右侧操作列 “更多” 按钮，选择下拉菜单 “分割IP子网” 菜单项，弹出分割IP子网对话框。 输入新IP子网名称、新IP子网起始IP（原IP子网地址范围：原IP子网起始IP至新IP子网起始IP末位-1；新IP子网地址范围：新IP子网起始IP至原IP子网结束IP）。 单击 “确定” 按钮。  合并IP子网 该功能用于将分割的IP子网，合并为一个IP子网，仅Cloudpods平台支持。\n 在IP子网列表中选择两个IP地址段连续的IP子网，单击列表上方 “批量操作” 按钮，选择下拉菜单 “合并IP子网” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，将两个IP子网合并为一个，IP子网名称为IP地址大的IP子网名称。  ","excerpt":"分割IP子网 该功能用于分割IP子网范围，将一个子网分成两个子网。仅Cloudpods平台支持。\n 单击IP子网右侧操作列 “更多” 按钮， …","ref":"/zh/docs/onpremise/network/tutorial/default/mergesubnet/","title":"合并/分割IP子网"},{"body":"该功能用于全量同步账号上的资源信息。\n注意  禁用状态的云账号不支持全量同步； 当云账号设置了自动同步也不支持全量同步。   单个云账号全量同步\n 在云账号页面，单击云账号右侧操作列 “全量同步” 按钮，全量同步云账号上的资源信息。  批量全量同步\n 在云账号列表勾选一个或多个云账号，单击列表上方 “批量操作” 按钮，选择下拉菜单 “全量同步” 菜单项，全量同步云账号上的资源信息。  ","excerpt":"该功能用于全量同步账号上的资源信息。\n注意  禁用状态的云账号不支持全量同步； 当云账号设置了自动同步也不支持全量同步。   单个云账号全量 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/sync/","title":"全量同步"},{"body":"TODO\n","excerpt":"TODO\n","ref":"/zh/docs/multicloud/cloudgroup/best_practice/","title":"最佳实践"},{"body":"目前仅支持 Cloudpods kvm 虚拟机使用 GPU，使用的 PCI Passthrough 的方式将宿主机上的 Nvidia/AMD GPU 透传给虚拟机使用。\nWeb界面操作 设置GPU卡 该功能用于设置为虚拟机绑定或解绑GPU卡，绑定GPU卡之前请确保虚拟机所在宿主机上存在GPU透传设备。当虚拟机用于高性能计算、图形显示等用途时，建议绑定GPU卡。\n注意  仅Cloudpods平台支持绑定、解绑GPU卡功能。 当宿主机上存在空闲的GPU设备时，宿主机上的虚拟机才可以绑定GPU卡。 虚拟机关机状态才可以绑定、解绑GPU卡。 批量绑定GPU卡操作仅支持关联同种型号的GPU卡，批量解绑会取消所有已关联的GPU卡。 目前仅管理员支持设置GPU功能。   单个虚拟机设置GPU卡\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例设置-设置GPU卡” 菜单项，弹出设置GPU卡对话框。 设置GPU卡页面支持绑定和解绑GPU卡。  绑定GPU卡：勾选是否绑定，并选择GPU卡，支持选择为虚拟机绑定多个GPU卡，默认勾选设置成功后自动启动，即绑定GPU卡后自动启动虚拟机，单击 “确定” 按钮。 解绑GPU卡：取消勾选是否绑定，取消后，则解绑虚拟机上的所有GPU卡，默认勾选设置成功后自动启动，即解绑GPU卡后自动启动虚拟机，单击 “确定” 按钮。    批量为虚拟机设置GPU卡\n 在虚拟机列表中选择一个或多个Cloudpods平台上关机状态的虚拟机，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置GPU卡” 菜单项，弹出设置GPU卡对话框。 设置GPU卡页面支持批量绑定和解绑GPU卡。  绑定GPU卡：设置GPU卡选择“关联GPU卡”，选择GPU卡型号，设置每台虚拟机上绑定的GPU卡数量，默认勾选批量绑定GPU后自动启动，即绑定GPU卡后自动启动虚拟机，单击 “确定” 按钮。 解绑GPU卡：设置GPU卡选择“解绑GPU卡”，默认勾选批量解绑成功后自动启动，即解绑GPU卡后自动启动虚拟机，单击 “确定” 按钮，批量解绑GPU卡。    Climc 创建 GPU 云主机  查询 gpu 列表  $ climc isolated-device-list --gpu +--------------------------------------+----------+---------------------+---------+------------------+--------------------------------------+ | ID | Dev_type | Model | Addr | Vendor_device_id | Host_id | +--------------------------------------+----------+---------------------+---------+------------------+--------------------------------------+ | 273f4f72-06b6-49aa-8456-4beceec44997 | GPU-HPC | GeForce GTX 1050 Ti | 41:00.0 | 10de:1c82 | 3bce9607-2597-469f-8d9b-977345456739 | | a77333e9-08d9-45c6-87eb-a7d8d902c5f5 | GPU-HPC | Quadro FX 580 | 05:00.0 | 10de:0659 | 3bce9607-2597-469f-8d9b-977345456739 | +--------------------------------------+----------+---------------------+---------+------------------+--------------------------------------+  创建 server  server-create 中的 --isolated-device 参数指定透传的设备到云主机，可以重复使用多次，透传多个 gpu 到云主机，但要求透传到同一云主机的 gpu 必须在同一宿主机。其余创建参数和创建普通云主机是一样的。\n$ climc server-create --hypervisor kvm --isolated-device 273f4f72-06b6-49aa-8456-4beceec44997 ... 查询 GPU 云主机 $ climc server-list --gpu 关联 GPU 如果云主机所在的宿主机有可用的 gpu，在主机关机的情况下，可以通过 server-attach-isolated-device 命令将 gpu 和云主机关联起来，下次主机启动后就可以使用该 gpu 。\n$ climc server-attach-isolated-device \u003cserver_id\u003e \u003cdevice_id\u003e 卸载 GPU 如果云主机关联了 gpu，可以通过 server-detach-isolated-device 卸载主机的某一 gpu。\n$ climc server-detach-isolated-device \u003cserver_id\u003e \u003cdevice_id\u003e ","excerpt":"目前仅支持 Cloudpods kvm 虚拟机使用 GPU，使用的 PCI Passthrough 的方式将宿主机上的 Nvidia/AMD …","ref":"/zh/docs/onpremise/vminstance/tutorial/gpu/","title":"GPU相关"},{"body":"平台支持通过调度标签的功能进行资源调度，根据调度标签的偏好或调度策略以及系统默认选择底层基础资源等。\n调度标签入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/调度/调度标签” 菜单项，进入调度标签页面。\n动态调度标签入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/调度/动态调度标签” 菜单项，进入动态调度标签页面。\n调度策略入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/调度/调度策略” 菜单项，进入调度策略页面。\n","excerpt":"平台支持通过调度标签的功能进行资源调度，根据调度标签的偏好或调度策略以及系统默认选择底层基础资源等。\n调度标签入口：在云管平台单击左上角导航 …","ref":"/zh/docs/onpremise/scheduler/","title":"资源调度"},{"body":"调整调度标签 该功能用于为IP子网绑定调度标签，绑定调度标签的IP子网将遵循调度策略为虚拟机分配IP地址。\n 单击IP子网右侧操作列 “调整调度标签” 按钮，弹出调整调度标签对话框。 选择调度标签，单击 “确定” 按钮。  更改项目 该功能用于更改IP子网所属项目。当IP子网为私有状态时，才可以更改项目。\n单个IP子网更改项目\n 在IP子网页面，单击IP子网右侧操作列 “更多” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 修改域和项目，单击 “确定” 按钮。  批量更改项目\n 在IP子网列表中选择一个或多个IP子网，单击列表上方 “批量操作” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 修改域和项目，单击 “确定” 按钮。  设置共享 该功能用于设置IP子网的共享状态。\n项目资源的共享范围有五种：\n 不共享（私有）：即项目资源只能本项目的用户可以使用。 项目共享-部分（本域内多项目共享）：即项目资源可以共享到同域下的指定项目（一个或多个），只有本项目和被共享项目下的用户可以使用项目资源。 项目共享-全部（本域共享）：即项目资源可以共享给域下所有项目，即项目所在域的用户都可以使用项目资源。 域共享-部分（多域共享）：即项目资源可以共享到指定域（一个或多个），只有项目资源所在域和共享域下的用户可以使用项目资源。 域共享-全部（全局共享）：即项目资源可以共享给全部域使用，即系统中所有用户都可以使用项目资源。  说明 设置域共享的条件：\n 在Cloudpods平台已开启三级权限。 用户处于管理后台。  设置项目共享的条件：\n 用户处于管理后台或域管理后台。   注意  物理机、PXE、IPMI类型的IP子网建议不要设置为共享状态。 本地IDC的IP子网共享范围任意。 私有云和公有云的IP子网的共享范围与云账号的共享范围有关。  当云账号不共享时，通过云账号同步下来的资源也不能共享。 当云账号启用共享时，通过云账号同步下来的资源也将随着云账号启用共享。 当云账号启用共享时，通过云账号同步下来的资源可以更改共享范围，请确保共享范围在云账号的共享范围内。 当云账号修改共享范围时，通过云账号同步下来的资源的共享范围要始终保持在云账号的共享范围内。如云账号共享A、B、C、D域，域资源共享A、C域，云账号修改共享范围为A、B域，则域资源只能共享到A域。 云账号共享云订阅时，通过云账号同步下来的域资源不能共享。     单个IP子网设置共享\n 在IP子网页面，单击IP子网右侧操作列 “更多” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数。  当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。  当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。   当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。     单击 “确定” 按钮，完成操作。  批量设置共享\n多个IP子网批量设置的共享范围必须相同。否则请单独为IP子网设置共享。\n 在IP子网列表中选择一个或多个IP子网，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数。  当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。  当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。   当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。     单击 “确定” 按钮，完成操作。  设置自动调度 该功能用于为IP子网启用或禁用自动调度功能，启用后，用户创建虚拟机时网络自动调度时，将从启用自动调度的IP子网中为虚拟机分配IP地址。\n注意 仅虚拟机类型的IP子网支持设置自动调度。  单个IP子网设置自动调度\n 单击IP子网右侧操作列 “更多” 按钮，选择下拉菜单 “设置自动调度” 菜单项，弹出设置自动调度对话框。 设置是否启用自动调度功能，设置完成后，单击 “确定” 按钮。  批量设置自动调度\n 在IP子网列表中选择一个或多个IP子网，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置自动调度” 菜单项，弹出设置自动调度对话框。 设置是否启用自动调度功能，设置完成后，单击 “确定” 按钮。  同步状态 该功能用于获取IP子网的当前状态。\n单个同步状态\n 单击IP子网右侧操作列 “更多” 按钮，选择下拉菜单 “同步状态” 菜单项，同步IP子网状态。  批量同步状态\n 在IP子网列表中选择一个或多个IP子网，单击IP子网右侧操作列 “批量操作” 按钮，选择下拉菜单 “同步状态” 菜单项，批量同步状态。  删除IP子网 该功能用于删除IP子网。已分配IP的IP子网不支持删除。\n单个删除\n 单击IP子网右侧操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在IP子网列表中选择一个或多个IP子网，单击IP子网右侧操作列 “批量操作” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"调整调度标签 该功能用于为IP子网绑定调度标签，绑定调度标签的IP子网将遵循调度策略为虚拟机分配IP地址。\n 单击IP子网右侧操作列 “调整 …","ref":"/zh/docs/onpremise/network/tutorial/default/subnetoperation/","title":"IP子网其他操作"},{"body":"调整调度标签 该功能用于为IP子网绑定调度标签，绑定调度标签的IP子网将遵循调度策略为虚拟机分配IP地址。\n 单击IP子网右侧操作列 “调整调度标签” 按钮，弹出调整调度标签对话框。 选择调度标签，单击 “确定” 按钮。  更改项目 该功能用于更改IP子网所属项目。当IP子网为私有状态时，才可以更改项目。\n单个IP子网更改项目\n 在IP子网页面，单击IP子网右侧操作列 “更多” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 修改域和项目，单击 “确定” 按钮。  批量更改项目\n 在IP子网列表中选择一个或多个IP子网，单击列表上方 “批量操作” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 修改域和项目，单击 “确定” 按钮。  设置共享 该功能用于设置IP子网的共享状态。\n项目资源的共享范围有五种：\n 不共享（私有）：即项目资源只能本项目的用户可以使用。 项目共享-部分（本域内多项目共享）：即项目资源可以共享到同域下的指定项目（一个或多个），只有本项目和被共享项目下的用户可以使用项目资源。 项目共享-全部（本域共享）：即项目资源可以共享给域下所有项目，即项目所在域的用户都可以使用项目资源。 域共享-部分（多域共享）：即项目资源可以共享到指定域（一个或多个），只有项目资源所在域和共享域下的用户可以使用项目资源。 域共享-全部（全局共享）：即项目资源可以共享给全部域使用，即系统中所有用户都可以使用项目资源。  说明 设置域共享的条件：\n 在Cloudpods平台已开启三级权限。 用户处于管理后台。  设置项目共享的条件：\n 用户处于管理后台或域管理后台。   注意  物理机、PXE、IPMI类型的IP子网建议不要设置为共享状态。 本地IDC的IP子网共享范围任意。 私有云和公有云的IP子网的共享范围与云账号的共享范围有关。  当云账号不共享时，通过云账号同步下来的资源也不能共享。 当云账号启用共享时，通过云账号同步下来的资源也将随着云账号启用共享。 当云账号启用共享时，通过云账号同步下来的资源可以更改共享范围，请确保共享范围在云账号的共享范围内。 当云账号修改共享范围时，通过云账号同步下来的资源的共享范围要始终保持在云账号的共享范围内。如云账号共享A、B、C、D域，域资源共享A、C域，云账号修改共享范围为A、B域，则域资源只能共享到A域。 云账号共享云订阅时，通过云账号同步下来的域资源不能共享。     单个IP子网设置共享\n 在IP子网页面，单击IP子网右侧操作列 “更多” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数。  当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。  当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。   当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。     单击 “确定” 按钮，完成操作。  批量设置共享\n多个IP子网批量设置的共享范围必须相同。否则请单独为IP子网设置共享。\n 在IP子网列表中选择一个或多个IP子网，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数。  当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。  当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。   当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。     单击 “确定” 按钮，完成操作。  设置自动调度 该功能用于为IP子网启用或禁用自动调度功能，启用后，用户创建虚拟机时网络自动调度时，将从启用自动调度的IP子网中为虚拟机分配IP地址。\n注意 仅虚拟机类型的IP子网支持设置自动调度。  单个IP子网设置自动调度\n 单击IP子网右侧操作列 “更多” 按钮，选择下拉菜单 “设置自动调度” 菜单项，弹出设置自动调度对话框。 设置是否启用自动调度功能，设置完成后，单击 “确定” 按钮。  批量设置自动调度\n 在IP子网列表中选择一个或多个IP子网，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置自动调度” 菜单项，弹出设置自动调度对话框。 设置是否启用自动调度功能，设置完成后，单击 “确定” 按钮。  同步状态 该功能用于获取IP子网的当前状态。\n单个同步状态\n 单击IP子网右侧操作列 “更多” 按钮，选择下拉菜单 “同步状态” 菜单项，同步IP子网状态。  批量同步状态\n 在IP子网列表中选择一个或多个IP子网，单击IP子网右侧操作列 “批量操作” 按钮，选择下拉菜单 “同步状态” 菜单项，批量同步状态。  删除IP子网 该功能用于删除IP子网。已分配IP的IP子网不支持删除。\n单个删除\n 单击IP子网右侧操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在IP子网列表中选择一个或多个IP子网，单击IP子网右侧操作列 “批量操作” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  预留IP 该功能用于查看IP子网中的预留IP详情，支持新建和释放预留IP。\n 在IP子网页面，单击IP子网名称项，进入IP子网详情页面。 在IP子网详情页面，单击“预留IP”页签，进入预留IP页面。 查看IP子网中预留IP的信息。  新建预留IP 该功能用于新建预留IP，预留IP将不会被云管平台分配给服务器使用。\n 在预留IP页面，单击列表上方 “新建” 按钮，弹出新建对话框。 输入IP子网中的需要预留的IP地址(支持一次添加6个IP地址)、预留原因，单击 “确定” 按钮。  释放预留IP 该功能用于释放预留的IP，使其可以被云管平台分配。支持单个或批量释放IP地址。\n单个释放\n 在预留IP页面，单击IP右侧操作列 “释放” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量释放\n 在预留IP列表选择一个或多个IP地址，单击列表上方 “释放” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"调整调度标签 该功能用于为IP子网绑定调度标签，绑定调度标签的IP子网将遵循调度策略为虚拟机分配IP地址。\n 单击IP子网右侧操作列 “调整 …","ref":"/zh/docs/onpremise/network/tutorial/vpc/subnetoperation/","title":"IP子网其他操作"},{"body":"平台内置私有云提供VPC网络功能，并支持将经典网络的IP子网网段作为弹性公网IP池使用，供VPC内的虚拟机与外界访问等。\nVPC入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/基础网络/VPC” 菜单项，进入VPC页面。\nIP子网入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/基础网络/IP子网” 或 “主机/网络/IP子网” 菜单项，进入IP子网页面。\n弹性公网IP入口：入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “网络/基础网络/弹性公网IP” 或 “主机/网络/弹性公网IP” 菜单项，进入弹性公网IP页面。\n","excerpt":"平台内置私有云提供VPC网络功能，并支持将经典网络的IP子网网段作为弹性公网IP池使用，供VPC内的虚拟机与外界访问等。\nVPC入口：在云管 …","ref":"/zh/docs/onpremise/network/tutorial/vpc/","title":"VPC网络"},{"body":"设置共享 该功能用于设置安全的组的共享范围。\n项目资源的共享范围有五种：\n 不共享（私有）：即项目资源只能本项目的用户可以使用。 项目共享-部分（本域内多项目共享）：即项目资源可以共享到同域下的指定项目（一个或多个），只有本项目和被共享项目下的用户可以使用项目资源。 项目共享-全部（本域共享）：即项目资源可以共享给域下所有项目，即项目所在域的用户都可以使用项目资源。 域共享-部分（多域共享）：即项目资源可以共享到指定域（一个或多个），只有项目资源所在域和共享域下的用户可以使用项目资源。 域共享-全部（全局共享）：即项目资源可以共享给全部域使用，即系统中所有用户都可以使用项目资源。  说明 设置域共享的条件：\n 在Cloudpods平台已开启三级权限。 用户处于管理后台。  设置项目共享的条件：\n 用户处于管理后台或域管理后台。   注意 Cloudpods平台上安全组即使是从云账号同步下来的，但是安全组的共享范围不受云账号的影响。  单个安全组设置共享\n 在安全组页面，单击安全组右侧操作列 “更多” 按钮，选择下拉菜单 “设置为共享” 菜单项，弹出设置共享对话框。 配置以下参数。  当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。  当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。   当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。     单击 “确定” 按钮，完成操作。  批量设置共享\n 在安全组列表中选择一个或多个安全组，单击列表上方 “设置共享” 按钮，弹出设置共享对话框。 配置以下参数。  当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。  当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。   当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。     单击 “确定” 按钮，完成操作。  删除 该功能用于删除安全组，当安全组关联实例不为0时，不允许删除安全组。\n单个删除\n 在安全组页面，单击安全组右侧操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在安全组列表中选择一个或多个安全组，单击列表上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"设置共享 该功能用于设置安全的组的共享范围。\n项目资源的共享范围有五种：\n 不共享（私有）：即项目资源只能本项目的用户可以使用。 项目共享- …","ref":"/zh/docs/onpremise/network/tutorial/secgroup/operator/","title":"其他操作"},{"body":"反亲和组是针对反亲和组中虚拟机的简单调度策略，根据反亲和组中的策略将属于反亲和组中新创建的虚拟机分布在不同宿主机上，从而实现业务的高可用。一般用于某个系统中要求系统中的各个节点部署在不同宿主机上的场景。\nWeb界面操作 创建反亲和组 该功能用于创建反亲和组。\n说明  用户在管理后台创建的反亲和组所属项目为default域的system项目。 用户在项目中创建反亲和组时，反亲和组所属项目为用户所在项目。    在反亲和组页面，单击列表上方 “新建” 按钮，弹出创建反亲和组对话框。 设置以下参数：  指定项目：选择反亲和组的所属项目。 名称：反亲和组的名称。 策略：包括强制和非强制。  强制即强制要求属于同一反亲和组的虚拟机必须按照粒度分布在不同宿主机。不当宿主机上的虚拟机数量超过粒度后创建新虚拟机会失败。 非强制即尽可能的将属于同一反亲和组的虚拟机按照粒度分布在不同宿主机，当宿主机上的虚拟机数量超过粒度后也可以创建。   粒度：反亲和组内虚拟机可以在同一宿主机存在的数量。   单击 “确定” 按钮，创建反亲和组。  加入反亲和组 该功能用于将虚拟机加入反亲和组。仅Cloudpods平台的虚拟机支持加入反亲和组功能。\n 在虚拟机页面，单击虚拟机右侧操作列 “更多” 按钮，选择下拉菜单 “实例设置-加入反亲和组” 菜单项，弹出加入反亲和组对话框。 选择反亲和组（仅显示与虚拟机同项目的反亲和组），单击 “确定” 按钮。  关联虚拟机 该功能支持将已创建的虚拟机加入反亲和组，仅支持选择与反亲和组处于同一项目的虚拟机。已创建的虚拟机加入反亲和组后所属宿主机不会改变。当反亲和组处于禁用状态时不支持绑定主机操作。\n 在反亲和组页面，单击反亲和组右侧操作列 “关联虚拟机” 按钮，弹出绑定主机对话框。 选择需要绑定的虚拟机，单击 “确定” 按钮。  启用 该功能用于启用\"禁用\"状态的反亲和组。只有反亲和组处于\"启用\"状态才可以被用户选择使用。\n 单击\"禁用\"状态的反亲和组右侧操作列 “启用” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，启用反亲和组。  禁用 该功能用于禁用\"启用\"状态的反亲和组。\n 单击\"启用\"状态的反亲和组右侧操作列 “禁用” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，禁用反亲和组。  删除反亲和组 该功能用于删除反亲和组，当绑定主机数量为0时才可以删除反亲和组。\n单个删除\n 在反亲和组页面，单击反亲和组操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在反亲和组列表中勾选一个或多个反亲和组，单击列表上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"反亲和组是针对反亲和组中虚拟机的简单调度策略，根据反亲和组中的策略将属于反亲和组中新创建的虚拟机分布在不同宿主机上，从而实现业务的高可用。一 …","ref":"/zh/docs/onpremise/vminstance/tutorial/instancegroup/","title":"反亲和组"},{"body":"","excerpt":"","ref":"/zh/docs/development/","title":"开发相关"},{"body":"自动快照策略即通过设置快照策略周期性的对指定硬盘创建快照。建议针对核心业务、数据类业务创建自动快照策略，以加强数据保护。目前仅支持对Cloudpods、阿里云、腾讯云平台上的硬盘设置自动快照策略。\n在Cloudpods平台上每块硬盘自动快照（通过自动快照策略创建的快照）配额是7，当超出配额后将会自动删除最早创建的自动快照。\n新建自动快照策略 该功能用于创建自动快照策略。云管平台上创建的自动快照策略当关联阿里云或腾讯云平台上的硬盘时，自动快照策略将会同步到阿里云或腾讯云平台上。\n 单击列表上方 “新建” 按钮，弹出新建策略对话框。 设置以下参数：  策略名称：设置自动快照策略的名称。 备份日期：选择设置备份的日期，在星期一至星期日之间选择一个或多个日期。 备份时间：选择设置备份的时间点，在00：00至23：00之间选择一个或多个时间点。由于创建快照会暂时降低存储IO性能，出现短暂瞬间变慢的情况，建议备份时间点避开业务高峰时间。 保留时间：包括自定义保留时长和永久保留。  自定义保留时长：超过保留天数后将会自动删除快照，默认保留7天，支持更改自定义设置保留时长，保留天数范围为1-49天。 永久保留：若设置为永久保留，则不删除快照。然而当自动快照超出配额后，Cloudpods平台和阿里云平台上将会自动删除最早创建的自动快照，腾讯云平台上的自动快照策略将不生效。     单击 “确定” 按钮，创建自动快照。  关联硬盘 该功能用于将自动快照策略关联到硬盘，关联之后硬盘将会在自动快照策略指定的时间点周期性的创建自动快照。\n说明 自动快照策略关联硬盘要求：\n 硬盘与自动快照策略为同一项目。 硬盘状态为正常，且已被挂载。 仅支持关联Cloudpods、阿里云、腾讯云平台的硬盘。   关联硬盘\n 单击自动快照策略右侧操作列 “关联硬盘” 按钮，弹出关联硬盘对话框。 单击选择框，在弹出的对话框中选择要关联的硬盘（支持选择多个），单击 “确定” 按钮，关联硬盘。  取消关联硬盘\n 单击关联硬盘数量不为0的自动快照策略右侧操作列 “关联硬盘” 按钮，弹出关联硬盘对话框。 单击选择框，在弹出的对话框中取消选择硬盘，单击 “确定” 按钮，取消关联硬盘。  删除 该功能支持单个或批量删除自动快照策略，当自动快照策略关联的硬盘数量为0时才可以删除。\n单个删除\n 在自动快照策略页面，单击自动快照策略右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在自动快照策略列表中勾选一个或多个自动快照策略，单击列表上方 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  查看自动快照策略详情 该功能用于查看自定快照策略详细信息等。\n 在自动快照策略页面，单击自动快照策略名称项，进入自动快照策略详情页面。 详情页面顶部菜单项支持对用户进行关联硬盘和删除操作。 查看自动快照策略的云上ID、ID、名称、状态、域、项目、关联硬盘数量、备份时间、备份日期、保留时间、创建时间、更新时间、备注等。  查看关联硬盘信息 该功能用于查看自动快照策略关联的硬盘信息。\n 在自动快照策略详情页面，单击“关联硬盘”页签，进入关联硬盘列表。 解绑硬盘：该功能用于取消自动快照策略与硬盘的关联。  单击硬盘右侧操作列 “解绑” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，取消关联硬盘。    ","excerpt":"自动快照策略即通过设置快照策略周期性的对指定硬盘创建快照。建议针对核心业务、数据类业务创建自动快照策略，以加强数据保护。目前仅支持 …","ref":"/zh/docs/onpremise/storage/tutorial/disk/snapshotpolicy/","title":"自动快照策略"},{"body":"访问控制用于设置访问负载均衡的IP白名单或IP黑名单，在访问控制策略组中仅可以设置IP地址范围，在配置负载均衡实例监听时可设置是否启用访问控制，并设置针对具体的访问控制策略组设置访问白名单或黑名单。\n新建访问控制 该功能用于创建访问控制策略组。\n 单击列表上方 “新建” 按钮，弹出创建访问控制对话框。 设置以下参数：  指定项目：管理员和域管理员在新建访问控制时需要指定访问控制所属的项目。 访问控制策略组名称：设置访问控制策略组的名称。 批量添加IP地址：添加访问控制策略组内源地址的IP地址及IP地址段等。  每一行为一个IP地址或IP地址段。IP地址如192.168.1.1，IP地址段如192.168.1.0/24； IP地址与备注以|分隔，如192.168.1.0/24|备注，备注信息可选。     单击 “确定” 按钮，完成操作。  修改访问控制 该功能用于修改访问控制策略组的IP地址范围。\n 单击访问控制策略组右侧操作列 “修改” 按钮，弹出修改访问控制对话框。 修改批量条件IP地址：  每一行为一个IP地址或IP地址段。IP地址如192.168.1.1，IP地址段如192.168.1.0/24； IP地址与备注以|分隔，如192.168.1.0/24|备注，备注信息可选。   单击 “确定” 按钮，完成操作。  更改项目 该功能用于更改访问控制所属项目。当访问控制为私有状态时，才可以更改项目。\n单个访问控制更改项目\n 在访问控制页面，单击访问控制策略组右侧操作列 “更多” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 修改域和项目，单击 “确定” 按钮。  批量更改项目\n 在访问控制列表中选择一个或多个访问控制策略组，单击列表上方 “批量操作” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 修改域和项目，单击 “确定” 按钮。  设置共享 该功能用于设置访问控制的共享状态。\n项目资源的共享范围有五种：\n 不共享（私有）：即项目资源只能本项目的用户可以使用。 项目共享-部分（本域内多项目共享）：即项目资源可以共享到同域下的指定项目（一个或多个），只有本项目和被共享项目下的用户可以使用项目资源。 项目共享-全部（本域共享）：即项目资源可以共享给域下所有项目，即项目所在域的用户都可以使用项目资源。 域共享-部分（多域共享）：即项目资源可以共享到指定域（一个或多个），只有项目资源所在域和共享域下的用户可以使用项目资源。 域共享-全部（全局共享）：即项目资源可以共享给全部域使用，即系统中所有用户都可以使用项目资源。  说明 设置域共享的条件：\n 在Cloudpods平台已开启三级权限。 用户处于管理后台。  设置项目共享的条件：\n 用户处于管理后台或域管理后台。   单个访问控制设置共享\n 在访问控制页面，单击访问控制策略组右侧操作列 “更多” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数。  当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。  当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。   当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。     单击 “确定” 按钮，完成操作。  批量设置共享\n多个访问控制批量设置的共享范围必须相同。否则请单独为访问控制设置共享。\n 在访问控制列表中选择一个或多个访问控制策略组，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数。  当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。  当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。   当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。     单击 “确定” 按钮，完成操作。  删除访问控制 该功能用于删除访问控制，当访问控制策略组关联的监听为0时，才可以删除。\n 在访问控制页面，单击访问控制策略组右侧操作列 “删除” 按钮，弹出删除确认对话框。 单击 “确定” 按钮，删除访问控制策略组。  查看访问控制详情 该功能用于查看访问控制的详细信息。\n 在访问控制页面，单击访问控制策略组名称项，进入访问控制详情页面。 查看访问控制策略组的云上ID、ID、名称、状态、域、项目、源地址|备注、创建时间、更新时间、备注。  查看访问控制关联的监听列表 该功能用于查看访问控制关联的监听列表。\n 在访问控制页面，单击访问控制策略组名称项，进入访问控制详情页面。 单击“监听”页签，进入监听页面。查看访问控制关联的监听列表。  ","excerpt":"访问控制用于设置访问负载均衡的IP白名单或IP黑名单，在访问控制策略组中仅可以设置IP地址范围，在配置负载均衡实例监听时可设置是否启用访问控 …","ref":"/zh/docs/onpremise/lb/tutorial/lb/lbacl/","title":"访问控制"},{"body":"TODO\n","excerpt":"TODO\n","ref":"/zh/docs/multicloud/cloudgroup/api/","title":"API文档"},{"body":"该功能用于设置云账号是否开启自动同步，并设置自动同步间隔时间。自动同步即增量同步云账号上的资源。\n单个云账号设置自动同步\n 在云账号页面，单击云账号右侧操作列 “更多” 按钮，选择下拉菜单 “设置自动同步” 菜单项，弹出设置自动同步对话框。 勾选是否启用自动同步，若启用自动同步，设置自动同步的时间间隔（间隔大于30分钟），单击 “确定” 按钮。  批量设置自动同步\n 在云账号列表勾选一个或多个云账号，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置自动同步” 菜单项，弹出设置自动同步对话框。 勾选是否启用自动同步，若启用自动同步，设置自动同步的时间间隔（间隔大于30分钟），单击 “确定” 按钮。  ","excerpt":"该功能用于设置云账号是否开启自动同步，并设置自动同步间隔时间。自动同步即增量同步云账号上的资源。\n单个云账号设置自动同步\n 在云账号页面，单 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/auto_sync/","title":"自动同步"},{"body":"支持将libvirt管理的虚拟机导入到 Cloudpods平台。\n注意事项   首先需要在libvirt管理的宿主机上安装我们的计算节点\n  安装好计算节点后需要添加的虚拟机的网络到控制节点\n  确保libvirt服务关闭\n  相关操作  准备好需要导入虚拟机的信息文件servers.yaml， 格式如下:  hosts: - host_ip: 10.168.222.137 xml_file_path: /etc/libvirt/qemu monitor_path: /var/lib/libvirt/qemu servers: - mac: 52:54:00:4A:19:AF ip: 10.168.222.53 - mac: 52:54:00:4A:19:CC ip: 10.168.222.54 - host_ip: 10.168.222.130 xml_file_path: /etc/libvirt/qemu monitor_path: /var/lib/libvirt/qemu servers: - mac: 53:54:00:4A:19:EC ip: 11.168.222.50 - mac: 53:54:00:4A:19:EE ip: 11.168.222.51 - `host_ip` 是要导入的宿主机的ip - `xml_file_path`是libvirt存储虚拟机xml文件的路径， - `monitor_path`是libvirt存储虚拟机monitor socket文件的路径， - `servers`是需要导入的虚拟机，里面描述了虚拟机的ip和mac对应关系    执行 climc servers-import-from-libvirt 开始导入  # 导入前确认libvirt服务关闭 $ climc servers-import-from-libvirt servers.yaml ","excerpt":"支持将libvirt管理的虚拟机导入到 Cloudpods平台。\n注意事项   首先需要在libvirt …","ref":"/zh/docs/onpremise/vminstance/faq/import/","title":"libvirt 管理虚机导入"},{"body":"介绍 默认情况下，虚拟机的磁盘驱动是 scsi 的，这种驱动在 Linux 虚拟机内部看到的磁盘就是 ‘/dev/sd’ 开头的块设备。可以通过一些命令设置磁盘的驱动，比如 Windows 虚拟机在没有安装 virtio 驱动的时候，只能使用 ide 驱动的方式启动。\n查看虚拟机磁盘驱动 首先通过 server-disk-list 命令查看虚拟机所有磁盘的驱动，比如虚拟机的名称是 vm1 。\n# server-disk-list 命令查看虚拟机和关联磁盘的关系 # --details: 显示详细信息 # --server: 指定对应的虚拟机名称或者 ID # --scope system: 表示显示系统里面所有资源 $ climc server-disk-list --details --server vm1 --scope system +--------------------------------------+-------+--------------------------------------+-------------------------------+-----------+--------+------------+-------+--------+-----------+--------------+ | Guest_ID | Guest | Disk_ID | Disk | Disk_size | Driver | Cache_mode | Index | Status | Disk_type | Storage_type | +--------------------------------------+-------+--------------------------------------+-------------------------------+-----------+--------+------------+-------+--------+-----------+--------------+ | 84090287-9dc5-4d6b-854d-24f99ad6f170 | vm1 | 968d9285-6353-4bce-8a6f-bf540efad3f5 | data-disk | 10240 | scsi | none | 1 | ready | data | local | | 84090287-9dc5-4d6b-854d-24f99ad6f170 | vm1 | 5448ea7d-5c64-47a2-847d-06060e187a47 | vdisk-vm1-1624970026002516731 | 30720 | scsi | none | 0 | ready | sys | local | +--------------------------------------+-------+--------------------------------------+-------------------------------+-----------+--------+------------+-------+--------+-----------+--------------+ 其中 Index 为 0 表示虚拟机的第一块磁盘，对应到 Linux 系统里面的 ‘/dev/sda’，Driver 表示对应驱动为 scsi，Disk_type 为 sys 表示系统盘。\nIndex 为 1 表示第二块磁盘，对应 Linux 系统里面的 ‘/dev/sdb’，驱动也为 scsi ，Disk_type 为 data 表示数据盘。\n修改驱动 通过 server-disk-update 命令更新虚拟机上的磁盘驱动。\n先看下 server-disk-update 命令的帮助信息。\n$ climc help server-disk-update Usage: climc server-disk-update [--cache {writethrough,none,writeback}] [--aio {native,threads}] [--index INDEX] [--driver {virtio,ide,scsi,pvscsi}] \u003cSERVER\u003e \u003cDISK\u003e Update details of a virtual disk of a virtual server Positional arguments: \u003cSERVER\u003e ID or Name of server \u003cDISK\u003e ID or Name of Disk Optional arguments: # 对应 qemu/kvm 虚拟机磁盘 cache mode [--cache {writethrough,none,writeback}] Cache mode of vDisk # 对应 qemu/kvm 虚拟机磁盘的 aio [--aio {native,threads}] Asynchronous IO mode of vDisk # 磁盘索引顺序 [--index INDEX] Index of vDisk # 对应 qemu/kvm 虚拟机磁盘 driver [--driver {virtio,ide,scsi,pvscsi}] Driver of vDisk 从帮助信息可以看到支持的 driver 为 virtio, ide, scsi 或者 pvscsi ，请根据自己的需要进行选择。\n# 把虚拟机 vm1 的系统盘 5448ea7d-5c64-47a2-847d-06060e187a47 驱动改为 virtio $ climc server-disk-update --driver virtio vm1 5448ea7d-5c64-47a2-847d-06060e187a47 # 查看记录，发现已经改成 virtio 了 $ climc server-disk-list --details --server vm1 --scope system | grep 5448ea7d-5c64-47a2-847d-06060e187a47 | 84090287-9dc5-4d6b-854d-24f99ad6f170 | vm1 | 5448ea7d-5c64-47a2-847d-06060e187a47 | vdisk-vm1-1624970026002516731 | 30720 | virtio | none | 0 | ready | sys | local | 修改了磁盘驱动后，需要重启虚拟机才能生效，使用 server-stop 和 server-start 命令重启虚拟机 vm1 。\n# 停止虚拟机 $ climc server-stop vm1 # 调用 server-list 查看虚拟机状态，等到状态变为 ready $ climc server-list --search vm1 --scope system +--------------------------------------+------+--------------+---------+------------+-----------+-----------+-----------------------------+------------+---------+-----------+ | ID | Name | Billing_type | Status | vcpu_count | vmem_size | Secgrp_id | Created_at | Hypervisor | os_type | is_system | +--------------------------------------+------+--------------+---------+------------+-----------+-----------+-----------------------------+------------+---------+-----------+ | 84090287-9dc5-4d6b-854d-24f99ad6f170 | vm1 | postpaid | ready | 1 | 1024 | default | 2021-06-29T12:33:45.000000Z | kvm | Linux | false | +--------------------------------------+------+--------------+---------+------------+-----------+-----------+-----------------------------+------------+---------+-----------+ # 启动虚拟机 $ climc server-start vm1 # 之后再重复查看虚拟机状态，知道变为 running 然后通过前端的 vnc 或者 ssh 登录虚拟机，用 lsblk 之类的磁盘工具查看磁盘，发现里面的磁盘块设备名称已经从 ‘/dev/sda’ 变成 ‘/dev/vda’ 了。\n[cloudroot@vm1 ~]$ lsblk NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sr0 11:0 1 1024M 0 rom vda 253:0 0 30G 0 disk ├─vda1 253:1 0 1M 0 part ├─vda2 253:2 0 512M 0 part /boot └─vda3 253:3 0 29.5G 0 part / ","excerpt":"介绍 默认情况下，虚拟机的磁盘驱动是 scsi 的，这种驱动在 Linux 虚拟机内部看到的磁盘就是 ‘/dev/sd’ 开头的块设备。可以 …","ref":"/zh/docs/onpremise/vminstance/faq/change_disk_driver/","title":"修改磁盘驱动"},{"body":"限制  仅RDS实例状态为 运行中(running) 时才可进行此操作 阿里云最多关联三个安全组 腾讯云最多关联5个安全组 华为云最多关联1个安全组  控制台 命令行  $ climc dbinstance-set-secgroup 6df152bc-0802-4fcc-8e72-22415ddf43a9 secgroup1 secgroup2 +--------------------+----------------------------------------------------------------------------------------------------------------------------+ | Field | Value | +--------------------+----------------------------------------------------------------------------------------------------------------------------+ | account | qj-azure | | account_id | b8b6a1ad-ed65-41f7-8525-91b44516346e | | auto_renew | false | | billing_type | postpaid | | brand | Azure | | can_delete | false | | can_update | true | | category | basic | | cloud_env | public | | cloudregion | Azure East US | | cloudregion_id | 59260e38-17f1-4b57-8df4-6177e6105067 | | connection_str | testsqlserverkf.database.windows.net | | created_at | 2021-06-21T08:08:57.000000Z | | deleted | false | | disable_delete | true | | disk_size_gb | 51 | | domain_id | default | | engine | SQLServer | | engine_version | 12.0 | | environment | AzurePublicCloud | | external_id | /subscriptions/7aaf3e6c-5f9c-43ad-b149-d9a14765af1c/resourcegroups/default/providers/microsoft.sql/servers/testsqlserverkf | | freezed | false | | id | 6df152bc-0802-4fcc-8e72-22415ddf43a9 | | imported_at | 2021-06-21T08:08:57.000000Z | | iops | 0 | | is_emulated | false | | is_system | false | | manager | Pay-As-You-Go | | manager_domain | Default | | manager_domain_id | default | | manager_id | 7ffddf3c-65ad-467c-870b-a99f2044039d | | manager_project | system | | manager_project_id | a9a365125abf43c580ba98e5640b5c51 | | name | testsqlserverkf | | pending_deleted | false | | port | 1433 | | project | system | | project_domain | Default | | project_src | cloud | | provider | Azure | | region | Azure East US | | region_ext_id | eastus | | region_external_id | Azure-int/eastus | | region_id | 59260e38-17f1-4b57-8df4-6177e6105067 | | source | cloud | | status | deploying | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 18 | | updated_at | 2021-06-23T06:07:12.000000Z | | vcpu_count | 1 | | vmem_size_mb | 3069 | | vpc | - | | vpc_ext_id | 59260e38-17f1-4b57-8df4-6177e6105067-7ffddf3c-65ad-467c-870b-a99f2044039d | | vpc_id | c327f83f-f4c0-4d06-8269-0e56c681dd07 | +--------------------+----------------------------------------------------------------------------------------------------------------------------+```  ","excerpt":"限制  仅RDS实例状态为 运行中(running) 时才可进行此操作 阿里云最多关联三个安全组 腾讯云最多关联5个安全组 华为云最多关联1 …","ref":"/zh/docs/multicloud/db/rds/tutorial/dbinstance/secgroup/","title":"关联安全组"},{"body":"限制  仅阿里云，腾讯云，Google云支持此操作  控制台 命令行 开启RDS实例外网地址 　关闭RDS实例外网地址 　 # 开启外网地址 climc dbinstance-public-connection f39bc936-32dd-4151-8ca0-09834318b482 true +-------------------------+---------------------------------------------+ | Field | Value | +-------------------------+---------------------------------------------+ | account | qx-aliyun | | account_id | f88fb1c0-73d4-4c56-8315-20f7dfba3447 | | auto_renew | false | | billing_type | postpaid | | brand | Aliyun | | can_delete | true | | can_update | true | | category | high_availability | | cloud_env | public | | cloudregion | Aliyun 华北2（北京） | | cloudregion_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | created_at | 2021-06-23T07:59:26.000000Z | | deleted | false | | deleted_at | 2021-06-23T08:20:12.000000Z | | disable_delete | false | | disk_size_gb | 5 | | domain_id | default | | engine | MySQL | | engine_version | 5.5 | | environment | InternationalCloud | | external_id | rm-2zedo92hey3s4suq6 | | freezed | false | | id | f39bc936-32dd-4151-8ca0-09834318b482 | | imported_at | 2021-06-23T07:59:26.000000Z | | instance_type | rds.mysql.t1.small | | internal_connection_str | rm-2zedo92hey3s4suq6.mysql.rds.aliyuncs.com | | iops | 0 | | is_emulated | false | | is_system | false | | maintain_time | 18:00Z-22:00Z | | manager | qx-aliyun | | manager_domain | Default | | manager_domain_id | default | | manager_id | 5af29c01-3f83-4a52-875c-1336e559b0f5 | | manager_project | qx-aliyun | | manager_project_id | dccd3be610c342e9812e64258ca12769 | | metadata.generate_name | test-aliyun | | metadata.sys:project | system | | name | test-aliyun | | pending_deleted | false | | pending_deleted_at | 2021-06-23T08:20:12.000000Z | | port | 3306 | | project | system | | project_domain | Default | | project_src | local | | provider | Aliyun | | region | Aliyun 华北2（北京） | | region_ext_id | cn-beijing | | region_external_id | Aliyun/cn-beijing | | region_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | source | local | | status | deploying | | storage_type | local_ssd | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 11 | | updated_at | 2021-06-24T02:23:38.000000Z | | vcpu_count | 1 | | vmem_size_mb | 1024 | | vpc | vpc-h | | vpc_ext_id | vpc-2zewan71fq5dxmy1ozq0k | | vpc_id | c3652c98-ebc6-4c71-85a0-5eccc8583104 | | zone1 | fd3c013e-40b5-46ca-8fff-3b8c872cd3a8 | | zone1_name | 阿里云 华北 2 可用区 H | +-------------------------+---------------------------------------------+ # 关闭外网地址 $ climc dbinstance-public-connection f39bc936-32dd-4151-8ca0-09834318b482 false +-------------------------+-------------------------------------------------+ | Field | Value | +-------------------------+-------------------------------------------------+ | account | qx-aliyun | | account_id | f88fb1c0-73d4-4c56-8315-20f7dfba3447 | | auto_renew | false | | billing_type | postpaid | | brand | Aliyun | | can_delete | true | | can_update | true | | category | high_availability | | cloud_env | public | | cloudregion | Aliyun 华北2（北京） | | cloudregion_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | connection_str | rm-2zedo92hey3s4suq6-out.mysql.rds.aliyuncs.com | | created_at | 2021-06-23T07:59:26.000000Z | | deleted | false | | deleted_at | 2021-06-23T08:20:12.000000Z | | disable_delete | false | | disk_size_gb | 5 | | domain_id | default | | engine | MySQL | | engine_version | 5.5 | | environment | InternationalCloud | | external_id | rm-2zedo92hey3s4suq6 | | freezed | false | | id | f39bc936-32dd-4151-8ca0-09834318b482 | | imported_at | 2021-06-23T07:59:26.000000Z | | instance_type | rds.mysql.t1.small | | internal_connection_str | rm-2zedo92hey3s4suq6.mysql.rds.aliyuncs.com | | iops | 0 | | is_emulated | false | | is_system | false | | maintain_time | 18:00Z-22:00Z | | manager | qx-aliyun | | manager_domain | Default | | manager_domain_id | default | | manager_id | 5af29c01-3f83-4a52-875c-1336e559b0f5 | | manager_project | qx-aliyun | | manager_project_id | dccd3be610c342e9812e64258ca12769 | | metadata.generate_name | test-aliyun | | metadata.sys:project | system | | name | test-aliyun | | pending_deleted | false | | pending_deleted_at | 2021-06-23T08:20:12.000000Z | | port | 3306 | | project | system | | project_domain | Default | | project_src | local | | provider | Aliyun | | region | Aliyun 华北2（北京） | | region_ext_id | cn-beijing | | region_external_id | Aliyun/cn-beijing | | region_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | source | local | | status | deploying | | storage_type | local_ssd | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 9 | | updated_at | 2021-06-24T02:04:28.000000Z | | vcpu_count | 1 | | vmem_size_mb | 1024 | | vpc | vpc-h | | vpc_ext_id | vpc-2zewan71fq5dxmy1ozq0k | | vpc_id | c3652c98-ebc6-4c71-85a0-5eccc8583104 | | zone1 | fd3c013e-40b5-46ca-8fff-3b8c872cd3a8 | | zone1_name | 阿里云 华北 2 可用区 H | +-------------------------+-------------------------------------------------+  ","excerpt":"限制  仅阿里云，腾讯云，Google云支持此操作  控制台 命令行 开启RDS实例外网地址 　关闭RDS实例外网地址 　 # …","ref":"/zh/docs/multicloud/db/rds/tutorial/dbinstance/public_connection/","title":"开关闭外网地址"},{"body":"限制  仅RDS实例状态为 运行中(running) 时才可进行此操作 仅预付费RDS实例支持此操作  控制台 命令行  # 续费1个月 climc dbinstance-renew f39bc936-32dd-4151-8ca0-09834318b482 1M +-------------------------+---------------------------------------------+ | Field | Value | +-------------------------+---------------------------------------------+ | account | qx-aliyun | | account_id | f88fb1c0-73d4-4c56-8315-20f7dfba3447 | | auto_renew | false | | billing_cycle | 1M | | billing_type | prepaid | | brand | Aliyun | | can_delete | true | | can_update | true | | category | high_availability | | cloud_env | public | | cloudregion | Aliyun 华北2（北京） | | cloudregion_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | created_at | 2021-06-23T07:59:26.000000Z | | deleted | false | | deleted_at | 2021-06-23T08:20:12.000000Z | | disable_delete | false | | disk_size_gb | 5 | | domain_id | default | | engine | MySQL | | engine_version | 5.5 | | environment | InternationalCloud | | external_id | rm-2zedo92hey3s4suq6 | | freezed | false | | id | f39bc936-32dd-4151-8ca0-09834318b482 | | imported_at | 2021-06-23T07:59:26.000000Z | | instance_type | rds.mysql.t1.small | | internal_connection_str | rm-2zedo92hey3s4suq6.mysql.rds.aliyuncs.com | | iops | 0 | | is_emulated | false | | is_system | false | | maintain_time | 18:00Z-22:00Z | | manager | qx-aliyun | | manager_domain | Default | | manager_domain_id | default | | manager_id | 5af29c01-3f83-4a52-875c-1336e559b0f5 | | manager_project | qx-aliyun | | manager_project_id | dccd3be610c342e9812e64258ca12769 | | metadata.generate_name | test-aliyun | | metadata.sys:project | system | | name | test-aliyun | | pending_deleted | false | | pending_deleted_at | 2021-06-23T08:20:12.000000Z | | port | 3306 | | project | system | | project_domain | Default | | project_src | local | | provider | Aliyun | | region | Aliyun 华北2（北京） | | region_ext_id | cn-beijing | | region_external_id | Aliyun/cn-beijing | | region_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | source | local | | status | renewing | | storage_type | local_ssd | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 13 | | updated_at | 2021-06-24T02:35:08.000000Z | | vcpu_count | 1 | | vmem_size_mb | 1024 | | vpc | vpc-h | | vpc_ext_id | vpc-2zewan71fq5dxmy1ozq0k | | vpc_id | c3652c98-ebc6-4c71-85a0-5eccc8583104 | | zone1 | fd3c013e-40b5-46ca-8fff-3b8c872cd3a8 | | zone1_name | 阿里云 华北 2 可用区 H | +-------------------------+---------------------------------------------+  ","excerpt":"限制  仅RDS实例状态为 运行中(running) 时才可进行此操作 仅预付费RDS实例支持此操作  控制台 命令行  # 续费1 …","ref":"/zh/docs/multicloud/db/rds/tutorial/dbinstance/renew/","title":"续费"},{"body":"控制台 命令行  # 关闭RDS实例删除保护 $ climc dbinstance-update --delete enable f39bc936-32dd-4151-8ca0-09834318b482 +-------------------------+--------------------------------------------------------+ | Field | Value | +-------------------------+--------------------------------------------------------+ | account | qx-aliyun | | account_id | f88fb1c0-73d4-4c56-8315-20f7dfba3447 | | auto_renew | false | | billing_cycle | 1M | | billing_type | prepaid | | brand | Aliyun | | can_delete | true | | can_update | true | | category | high_availability | | cloud_env | public | | cloudregion | Aliyun 华北2（北京） | | cloudregion_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | created_at | 2021-06-23T07:59:26.000000Z | | deleted | false | | deleted_at | 2021-06-23T08:20:12.000000Z | | disable_delete | false | | disk_size_gb | 5 | | domain_id | default | | engine | MySQL | | engine_version | 5.5 | | environment | InternationalCloud | | external_id | rm-2zedo92hey3s4suq6 | | freezed | false | | id | f39bc936-32dd-4151-8ca0-09834318b482 | | imported_at | 2021-06-23T07:59:26.000000Z | | instance_type | rds.mysql.t1.small | | internal_connection_str | rm-2zedo92hey3s4suq6.mysql.rds.aliyuncs.com | | iops | 0 | | is_emulated | false | | is_system | false | | maintain_time | 18:00Z-22:00Z | | manager | qx-aliyun | | manager_domain | Default | | manager_domain_id | default | | manager_id | 5af29c01-3f83-4a52-875c-1336e559b0f5 | | manager_project | qx-aliyun | | manager_project_id | dccd3be610c342e9812e64258ca12769 | | metadata | {\"generate_name\":\"test-aliyun\",\"sys:project\":\"system\"} | | name | test-aliyun | | pending_deleted | false | | pending_deleted_at | 2021-06-23T08:20:12.000000Z | | port | 3306 | | project | system | | project_domain | Default | | project_src | local | | provider | Aliyun | | region | Aliyun 华北2（北京） | | region_ext_id | cn-beijing | | region_external_id | Aliyun/cn-beijing | | region_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | source | local | | status | running | | storage_type | local_ssd | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 16 | | updated_at | 2021-06-24T02:51:54.000000Z | | vcpu_count | 1 | | vmem_size_mb | 1024 | | vpc | vpc-h | | vpc_ext_id | vpc-2zewan71fq5dxmy1ozq0k | | vpc_id | c3652c98-ebc6-4c71-85a0-5eccc8583104 | | zone1 | fd3c013e-40b5-46ca-8fff-3b8c872cd3a8 | | zone1_name | 阿里云 华北 2 可用区 H | +-------------------------+--------------------------------------------------------+ # 开启RDS删除保护 $ climc dbinstance-update --delete disable f39bc936-32dd-4151-8ca0-09834318b482 +-------------------------+--------------------------------------------------------+ | Field | Value | +-------------------------+--------------------------------------------------------+ | account | qx-aliyun | | account_id | f88fb1c0-73d4-4c56-8315-20f7dfba3447 | | auto_renew | false | | billing_cycle | 1M | | billing_type | prepaid | | brand | Aliyun | | can_delete | false | | can_update | true | | category | high_availability | | cloud_env | public | | cloudregion | Aliyun 华北2（北京） | | cloudregion_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | created_at | 2021-06-23T07:59:26.000000Z | | deleted | false | | deleted_at | 2021-06-23T08:20:12.000000Z | | disable_delete | true | | disk_size_gb | 5 | | domain_id | default | | engine | MySQL | | engine_version | 5.5 | | environment | InternationalCloud | | external_id | rm-2zedo92hey3s4suq6 | | freezed | false | | id | f39bc936-32dd-4151-8ca0-09834318b482 | | imported_at | 2021-06-23T07:59:26.000000Z | | instance_type | rds.mysql.t1.small | | internal_connection_str | rm-2zedo92hey3s4suq6.mysql.rds.aliyuncs.com | | iops | 0 | | is_emulated | false | | is_system | false | | maintain_time | 18:00Z-22:00Z | | manager | qx-aliyun | | manager_domain | Default | | manager_domain_id | default | | manager_id | 5af29c01-3f83-4a52-875c-1336e559b0f5 | | manager_project | qx-aliyun | | manager_project_id | dccd3be610c342e9812e64258ca12769 | | metadata | {\"generate_name\":\"test-aliyun\",\"sys:project\":\"system\"} | | name | test-aliyun | | pending_deleted | false | | pending_deleted_at | 2021-06-23T08:20:12.000000Z | | port | 3306 | | project | system | | project_domain | Default | | project_src | local | | provider | Aliyun | | region | Aliyun 华北2（北京） | | region_ext_id | cn-beijing | | region_external_id | Aliyun/cn-beijing | | region_id | b7f8f44e-4fae-42b7-87cd-cb21f47da032 | | source | local | | status | running | | storage_type | local_ssd | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 15 | | updated_at | 2021-06-24T02:50:35.000000Z | | vcpu_count | 1 | | vmem_size_mb | 1024 | | vpc | vpc-h | | vpc_ext_id | vpc-2zewan71fq5dxmy1ozq0k | | vpc_id | c3652c98-ebc6-4c71-85a0-5eccc8583104 | | zone1 | fd3c013e-40b5-46ca-8fff-3b8c872cd3a8 | | zone1_name | 阿里云 华北 2 可用区 H | +-------------------------+--------------------------------------------------------+  ","excerpt":"控制台 命令行  # 关闭RDS实例删除保护 $ climc dbinstance-update --delete enable …","ref":"/zh/docs/multicloud/db/rds/tutorial/dbinstance/protect/","title":"设置删除保护"},{"body":"限制  仅RDS实例状态为 运行中(running), 重启失败(reboot_failed) 时才可进行此操作  控制台 命令行  $ climc dbinstance-reboot 6df152bc-0802-4fcc-8e72-22415ddf43a9 +--------------------+----------------------------------------------------------------------------------------------------------------------------+ | Field | Value | +--------------------+----------------------------------------------------------------------------------------------------------------------------+ | account | qj-azure | | account_id | b8b6a1ad-ed65-41f7-8525-91b44516346e | | auto_renew | false | | billing_type | postpaid | | brand | Azure | | can_delete | false | | can_update | true | | category | basic | | cloud_env | public | | cloudregion | Azure East US | | cloudregion_id | 59260e38-17f1-4b57-8df4-6177e6105067 | | connection_str | testsqlserverkf.database.windows.net | | created_at | 2021-06-21T08:08:57.000000Z | | deleted | false | | disable_delete | true | | disk_size_gb | 51 | | domain_id | default | | engine | SQLServer | | engine_version | 12.0 | | environment | AzurePublicCloud | | external_id | /subscriptions/7aaf3e6c-5f9c-43ad-b149-d9a14765af1c/resourcegroups/default/providers/microsoft.sql/servers/testsqlserverkf | | freezed | false | | id | 6df152bc-0802-4fcc-8e72-22415ddf43a9 | | imported_at | 2021-06-21T08:08:57.000000Z | | iops | 0 | | is_emulated | false | | is_system | false | | manager | Pay-As-You-Go | | manager_domain | Default | | manager_domain_id | default | | manager_id | 7ffddf3c-65ad-467c-870b-a99f2044039d | | manager_project | system | | manager_project_id | a9a365125abf43c580ba98e5640b5c51 | | name | testsqlserverkf | | pending_deleted | false | | port | 1433 | | project | system | | project_domain | Default | | project_src | cloud | | provider | Azure | | region | Azure East US | | region_ext_id | eastus | | region_external_id | Azure-int/eastus | | region_id | 59260e38-17f1-4b57-8df4-6177e6105067 | | source | cloud | | status | rebooting | | tenant | system | | tenant_id | a9a365125abf43c580ba98e5640b5c51 | | update_version | 18 | | updated_at | 2021-06-23T06:07:12.000000Z | | vcpu_count | 1 | | vmem_size_mb | 3069 | | vpc | - | | vpc_ext_id | 59260e38-17f1-4b57-8df4-6177e6105067-7ffddf3c-65ad-467c-870b-a99f2044039d | | vpc_id | c327f83f-f4c0-4d06-8269-0e56c681dd07 | +--------------------+----------------------------------------------------------------------------------------------------------------------------+```  ","excerpt":"限制  仅RDS实例状态为 运行中(running), 重启失败(reboot_failed) 时才可进行此操作  控制台 命令行  $ …","ref":"/zh/docs/multicloud/db/rds/tutorial/dbinstance/reboot/","title":"重启"},{"body":"TODO\n","excerpt":"TODO\n","ref":"/zh/docs/multicloud/cloudgroup/troubleshooting/","title":"故障处理"},{"body":"该功能用于更新云账号的账号和密码信息。不同平台的云账号参数不同。不同平台账号密码获取方式请参考对应的新建云账号章节。禁用状态的云账号不支持该操作。\n注意 VMware云账号暂不支持更新账号。   在云账号列表中，分别单击不同平台云账号操作列 “更多” 按钮，选择下拉菜单 “更新账号密码” 菜单项，弹出更新账号密码对话框。 修改不同平台的账号密码信息，修改完成后，单击 “确定” 按钮。  ","excerpt":"该功能用于更新云账号的账号和密码信息。不同平台的云账号参数不同。不同平台账号密码获取方式请参考对应的新建云账号章节。禁用状态的云账号不支持该 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/update_billing/","title":"更新账单文件"},{"body":"该功能用于更新云账号的账号和密码信息。不同平台的云账号参数不同。不同平台账号密码获取方式请参考对应的新建云账号章节。禁用状态的云账号不支持该操作。\n注意 VMware云账号暂不支持更新账号。   在云账号列表中，分别单击不同平台云账号操作列 “更多” 按钮，选择下拉菜单 “更新账号密码” 菜单项，弹出更新账号密码对话框。 修改不同平台的账号密码信息，修改完成后，单击 “确定” 按钮。  ","excerpt":"该功能用于更新云账号的账号和密码信息。不同平台的云账号参数不同。不同平台账号密码获取方式请参考对应的新建云账号章节。禁用状态的云账号不支持该 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/update_credential/","title":"更新账号密码"},{"body":"本文以阿里云ElasticSearch为例(cloudpods从v3.8开始支持)，介绍如何纳管ElasticSearch\ngit diff 参考(同时会有腾讯云对接) https://github.com/yunionio/cloudpods/pull/11595/files\n定义 ElasticSearch 接口 # 编辑 pkg/cloudprovider/resources.go 文件 # 文件末尾追加 type ICloudElasticSearch interface { # 说明: 同步时，可以仅定义一些基础的信息，先将资源同步下来 # 后面再根据资属性，往资源加相应的接口或操作 IVirtualResource IBillingResource } 实现阿里云的基础数据结构 # 创建 pkg/multicloud/aliyun/elastic_search.go 文件 # 填充阿里云ElasticSearch基础数据结构 package aliyun type SElasticSearch struct { // 这里统一实现了Aliyun标签接口，可以减少一些函数声明 multicloud.AliyunTags // 同上, 但部分IVirtualResource接口依然需要实现 multicloud.SVirtualResourceBase // 一些计费的基础方法 multicloud.SBillingBase // 链式结构, 用于对ElasticSearch进行操作 region *SRegion // 阿里云 ElasticSearch 属性 ... } // 实现获取阿里云 ElasticSearch 资源函数 // 获取 ElasticSearch 资源列表 func (self *SRegion) GetElasticSearchs(size, page int) ([]SElasticSearch, int, error) { ... } // 获取单个 ElasticSearch 资源 func (self *SRegion) GetElasitcSearch(id string) (*SElasticSearch, error) { ... } 实现 aliyuncli 命令行(用于快速调试) // 创建 pkg/multicloud/aliyun/shell/elk.go 文件 package shell func init() { type ElkListOptions struct { Page int Size int } shellutils.R(\u0026ElkListOptions{}, \"elastic-search-list\", \"List elastic searchs\", func(cli *aliyun.SRegion, args *ElkListOptions) error { elks, _, err := cli.GetElasticSearchs(args.Size, args.Page) if err != nil { return err } printList(elks, 0, 0, 0, nil) return nil }) type ElkIdOptions struct { ID string } shellutils.R(\u0026ElkIdOptions{}, \"elastic-search-show\", \"Show elasitc search\", func(cli *aliyun.SRegion, args *ElkIdOptions) error { elk, err := cli.GetElasitcSearch(args.ID) if err != nil { return err } printObject(elk) return nil }) } 调试 aliyuncli 命令 # 编译 aliyuncli 命令 $ make cmd/aliyuncli # 声明环境变量 $ export ALIYUN_ACCESS_KEY=LTAI5H1wXkXeas1M $ export ALIYUN_SECRET=cByPBQM9zFVgNBMKNJZMYrKFUkvVk8 # 这里需要根据地域情况自行设置 $ export ALIYUN_REGION=cn-beijing # 执行列出 ElasticSearch 资源命令 $ ./_output/bin/aliyuncli elastic-search-list $ ./_output/bin/aliyuncli elastic-search-show es-cn-n6w1ptcb30009**** 补充 ElasticSearch 接口 # 编辑 pkg/multicloud/aliyun/elastic_search.go 文件 # 实现以下接口 func (self *SElasticSearch) GetId() string { ... } // 此函数返回值将会存储到数据库的external_id字段里面,请确保能和云上资源一一对应 // 若是Azure资源, 请务必返回时strings.ToLower(), 因为Azure资源Id不区分大小写，但id大小写返回不固定，在同步时会引起资源反复增删问题 func (self *SElasticSearch) GetGlobalId() string { ... } // 获取ElasticSearch资源名称 func (self *SElasticSearch) GetName() string { ... } // 创建删除或其他操作需要循环获取资源状态, 来判定操作是否结束, 此函数主要是刷新状态字段或其他相关字段 func (self *SElasticSearch) Refresh() error { ... } // 获取资源创建时间 func (self *SElasticSearch) GetCreatedAt() time.Time { ... } // 获取资源计费方式: 预付费, 后付费? func (self *SElasticSearch) GetBillingType() string { ... } // 获取资源归属项目Id func (self *SElasticSearch) GetProjectId() string { ... } // 获取资源状态 func (self *SElasticSearch) GetStatus() string { ... } 添加区域获取 ElasticSearch 接口 # 编辑 pkg/cloudprovider/resources.go 文件 # 找到 ICloudRegion 定义, 并补充以下两个接口: type ICloudRegion interface { ... GetIElasticSearchs() ([]ICloudElasticSearch, error) GetIElasticSearchById(id string) (ICloudElasticSearch, error) } # 编辑 pkg/multicloud/region_base.go 实现基础的两个方法 # 这里主要是因为对接往往是从一两个云开始 # 若不实现这两个基础方法，则需要在每一个云的region.go文件实现这两个方法 func (self *SRegion) GetIElasticSearchs() ([]cloudprovider.ICloudElasticSearch, error) { return nil, errors.Wrapf(cloudprovider.ErrNotImplemented, \"GetIElasticSearchs\") } func (self *SRegion) GetIElasticSearchById(id string) (cloudprovider.ICloudElasticSearch, error) { return nil, errors.Wrapf(cloudprovider.ErrNotImplemented, \"GetIElasticSearchById\") } # 实现阿里云的这两个方法 # 编辑 pkg/multicloud/aliyun/elastic_search.go 文件 # 实现 GetIElasticSearchs 接口 func (self *SRegion) GetIElasticSearchs() ([]cloudprovider.ICloudElasticSearch, error) { // 获取当前region的所有elasticsearch实例 ess, err := self.GetElasticSearchs(...) if err != nil { return err } ret := []cloudprovider.ICloudElasticSearch{} for i := range ess { // 这里需要赋值，例如删除, 就可以使用 ess[i].region.DeleteElasticSearch(ess[i].InstanceId) ess[i].region = self ret = append(ret, \u0026ess[i]) } return ret, nil } # 实现 GetIElasticSearchById 接口 func (self *SRegion) GetIElasticSearchById(id string) (cloudprovider.ICloudElasticSearch, error) { // 这里没有使用es.region = self，是因为在GetElasitcSearch函数里面已经赋值过了 es, err := self.GetElasitcSearch(id) if err != nil { return nil, err } return es, nil } 定义本地资源模型 # 创建 pkg/apis/compute/elastic_search.go 文件 # 准备需要的数据结构 package compute import \"yunion.io/x/onecloud/pkg/apis\" const ( ELASTIC_SEARCH_STATUS_AVAILABLE = \"available\" ELASTIC_SEARCH_STATUS_UNAVAILABLE = \"unavailable\" ELASITC_SEARCH_STATUS_CREATING = \"creating\" ELASTIC_SEARCH_STATUS_DELETING = \"deleting\" ELASTIC_SEARCH_STATUS_DELETE_FAILED = \"delete_failed\" ELASTIC_SEARCH_STATUS_UNKNOWN = \"unknown\" ) // 资源创建参数, 目前仅站位 type ElasticSearchCreateInput struct { } // 资源返回详情 type ElasticSearchDetails struct { apis.VirtualResourceDetails ManagedResourceInfo CloudregionResourceInfo } // 资源列表请求参数 type ElasticSearchListInput struct { apis.VirtualResourceListInput apis.ExternalizedResourceBaseListInput apis.DeletePreventableResourceBaseListInput RegionalFilterListInput ManagedResourceListInput } # 创建 pkg/compute/models/elastic_search.go 文件 # 实现基础manager和model package models import ( \"context\" \"fmt\" \"yunion.io/x/jsonutils\" \"yunion.io/x/pkg/errors\" \"yunion.io/x/pkg/util/compare\" \"yunion.io/x/sqlchemy\" billing_api \"yunion.io/x/onecloud/pkg/apis/billing\" api \"yunion.io/x/onecloud/pkg/apis/compute\" \"yunion.io/x/onecloud/pkg/cloudcommon/db\" \"yunion.io/x/onecloud/pkg/cloudcommon/db/lockman\" \"yunion.io/x/onecloud/pkg/cloudprovider\" \"yunion.io/x/onecloud/pkg/httperrors\" \"yunion.io/x/onecloud/pkg/mcclient\" \"yunion.io/x/onecloud/pkg/util/stringutils2\" ) type SElasticSearchManager struct { # 由于资源是用户资源，因此定义为Virtual资源 db.SVirtualResourceBaseManager db.SExternalizedResourceBaseManager SDeletePreventableResourceBaseManager SCloudregionResourceBaseManager SManagedResourceBaseManager } var ElasticSearchManager *SElasticSearchManager func init() { ElasticSearchManager = \u0026SElasticSearchManager{ SVirtualResourceBaseManager: db.NewVirtualResourceBaseManager( SElasticSearch{}, \"elastic_searchs_tbl\", \"elastic_search\", \"elastic_searchs\", ), } ElasticSearchManager.SetVirtualObject(ElasticSearchManager) } type SElasticSearch struct { db.SVirtualResourceBase db.SExternalizedResourceBase SManagedResourceBase SBillingResourceBase SCloudregionResourceBase SDeletePreventableResourceBase } func (manager *SElasticSearchManager) GetContextManagers() [][]db.IModelManager { return [][]db.IModelManager{ {CloudregionManager}, } } // ElasticSearch实例列表 func (man *SElasticSearchManager) ListItemFilter( ctx context.Context, q *sqlchemy.SQuery, userCred mcclient.TokenCredential, query api.ElasticSearchListInput, ) (*sqlchemy.SQuery, error) { var err error q, err = man.SVirtualResourceBaseManager.ListItemFilter(ctx, q, userCred, query.VirtualResourceListInput) if err != nil { return nil, errors.Wrap(err, \"SVirtualResourceBaseManager.ListItemFilter\") } q, err = man.SExternalizedResourceBaseManager.ListItemFilter(ctx, q, userCred, query.ExternalizedResourceBaseListInput) if err != nil { return nil, errors.Wrap(err, \"SExternalizedResourceBaseManager.ListItemFilter\") } q, err = man.SDeletePreventableResourceBaseManager.ListItemFilter(ctx, q, userCred, query.DeletePreventableResourceBaseListInput) if err != nil { return nil, errors.Wrap(err, \"SDeletePreventableResourceBaseManager.ListItemFilter\") } q, err = man.SManagedResourceBaseManager.ListItemFilter(ctx, q, userCred, query.ManagedResourceListInput) if err != nil { return nil, errors.Wrap(err, \"SManagedResourceBaseManager.ListItemFilter\") } q, err = man.SCloudregionResourceBaseManager.ListItemFilter(ctx, q, userCred, query.RegionalFilterListInput) if err != nil { return nil, errors.Wrap(err, \"SCloudregionResourceBaseManager.ListItemFilter\") } return q, nil } func (man *SElasticSearchManager) OrderByExtraFields( ctx context.Context, q *sqlchemy.SQuery, userCred mcclient.TokenCredential, query api.ElasticSearchListInput, ) (*sqlchemy.SQuery, error) { q, err := man.SVirtualResourceBaseManager.OrderByExtraFields(ctx, q, userCred, query.VirtualResourceListInput) if err != nil { return nil, errors.Wrap(err, \"SVirtualResourceBaseManager.OrderByExtraFields\") } q, err = man.SCloudregionResourceBaseManager.OrderByExtraFields(ctx, q, userCred, query.RegionalFilterListInput) if err != nil { return nil, errors.Wrap(err, \"SCloudregionResourceBaseManager.OrderByExtraFields\") } q, err = man.SManagedResourceBaseManager.OrderByExtraFields(ctx, q, userCred, query.ManagedResourceListInput) if err != nil { return nil, errors.Wrap(err, \"SManagedResourceBaseManager.OrderByExtraFields\") } return q, nil } func (man *SElasticSearchManager) QueryDistinctExtraField(q *sqlchemy.SQuery, field string) (*sqlchemy.SQuery, error) { q, err := man.SVirtualResourceBaseManager.QueryDistinctExtraField(q, field) if err == nil { return q, nil } q, err = man.SCloudregionResourceBaseManager.QueryDistinctExtraField(q, field) if err == nil { return q, nil } q, err = man.SManagedResourceBaseManager.QueryDistinctExtraField(q, field) if err == nil { return q, nil } return q, httperrors.ErrNotFound } func (man *SElasticSearchManager) ValidateCreateData(ctx context.Context, userCred mcclient.TokenCredential, ownerId mcclient.IIdentityProvider, query jsonutils.JSONObject, input api.ElasticSearchCreateInput) (api.ElasticSearchCreateInput, error) { return input, httperrors.NewNotImplementedError(\"Not Implemented\") } func (manager *SElasticSearchManager) FetchCustomizeColumns( ctx context.Context, userCred mcclient.TokenCredential, query jsonutils.JSONObject, objs []interface{}, fields stringutils2.SSortedStrings, isList bool, ) []api.ElasticSearchDetails { rows := make([]api.ElasticSearchDetails, len(objs)) virtRows := manager.SVirtualResourceBaseManager.FetchCustomizeColumns(ctx, userCred, query, objs, fields, isList) manRows := manager.SManagedResourceBaseManager.FetchCustomizeColumns(ctx, userCred, query, objs, fields, isList) regRows := manager.SCloudregionResourceBaseManager.FetchCustomizeColumns(ctx, userCred, query, objs, fields, isList) for i := range rows { rows[i] = api.ElasticSearchDetails{ VirtualResourceDetails: virtRows[i], ManagedResourceInfo: manRows[i], CloudregionResourceInfo: regRows[i], } } return rows } func (self *SCloudregion) GetElasticSearchs(managerId string) ([]SElasticSearch, error) { q := ElasticSearchManager.Query().Equals(\"cloudregion_id\", self.Id) if len(managerId) \u003e 0 { q = q.Equals(\"manager_id\", managerId) } ret := []SElasticSearch{} err := db.FetchModelObjects(ElasticSearchManager, q, \u0026ret) if err != nil { return nil, errors.Wrapf(err, \"db.FetchModelObjects\") } return ret, nil } func (self *SCloudregion) SyncElasticSearchs(ctx context.Context, userCred mcclient.TokenCredential, provider *SCloudprovider, exts []cloudprovider.ICloudElasticSearch) compare.SyncResult { // 加锁防止重入  lockman.LockRawObject(ctx, ElasticSearchManager.KeywordPlural(), fmt.Sprintf(\"%s-%s\", provider.Id, self.Id)) defer lockman.ReleaseRawObject(ctx, ElasticSearchManager.KeywordPlural(), fmt.Sprintf(\"%s-%s\", provider.Id, self.Id)) result := compare.SyncResult{} dbEss, err := self.GetElasticSearchs(provider.Id) if err != nil { result.Error(err) return result } removed := make([]SElasticSearch, 0) commondb := make([]SElasticSearch, 0) commonext := make([]cloudprovider.ICloudElasticSearch, 0) added := make([]cloudprovider.ICloudElasticSearch, 0) // 本地和云上资源列表进行比对  err = compare.CompareSets(dbEss, exts, \u0026removed, \u0026commondb, \u0026commonext, \u0026added) if err != nil { result.Error(err) return result } // 删除云上没有的资源  for i := 0; i \u003c len(removed); i++ { err := removed[i].syncRemoveCloudElasticSearch(ctx, userCred) if err != nil { result.DeleteError(err) continue } result.Delete() } // 和云上资源属性进行同步  for i := 0; i \u003c len(commondb); i++ { err := commondb[i].SyncWithCloudElasticSearch(ctx, userCred, commonext[i]) if err != nil { result.UpdateError(err) continue } result.Update() } // 创建本地没有的云上资源  for i := 0; i \u003c len(added); i++ { _, err := self.newFromCloudElasticSearch(ctx, userCred, provider, added[i]) if err != nil { result.AddError(err) continue } result.Add() } return result } // 判断资源是否可以删除 func (self *SElasticSearch) ValidateDeleteCondition(ctx context.Context) error { if self.DisableDelete.IsTrue() { return httperrors.NewInvalidStatusError(\"ElasticSearch is locked, cannot delete\") } return self.SStatusStandaloneResourceBase.ValidateDeleteCondition(ctx) } func (self *SElasticSearch) syncRemoveCloudElasticSearch(ctx context.Context, userCred mcclient.TokenCredential) error { return self.Delete(ctx, userCred) } // 同步资源属性 func (self *SElasticSearch) SyncWithCloudElasticSearch(ctx context.Context, userCred mcclient.TokenCredential, ext cloudprovider.ICloudElasticSearch) error { diff, err := db.UpdateWithLock(ctx, self, func() error { self.ExternalId = ext.GetGlobalId() self.Status = ext.GetStatus() self.BillingType = ext.GetBillingType() if self.BillingType == billing_api.BILLING_TYPE_PREPAID { if expiredAt := ext.GetExpiredAt(); !expiredAt.IsZero() { self.ExpiredAt = expiredAt } self.AutoRenew = ext.IsAutoRenew() } return nil }) if err != nil { return errors.Wrapf(err, \"db.Update\") } syncVirtualResourceMetadata(ctx, userCred, self, ext) if provider := self.GetCloudprovider(); provider != nil { SyncCloudProject(userCred, self, provider.GetOwnerId(), ext, provider.Id) } db.OpsLog.LogSyncUpdate(self, diff, userCred) return nil } func (self *SCloudregion) newFromCloudElasticSearch(ctx context.Context, userCred mcclient.TokenCredential, provider *SCloudprovider, ext cloudprovider.ICloudElasticSearch) (*SElasticSearch, error) { es := SElasticSearch{} es.SetModelManager(ElasticSearchManager, \u0026es) es.ExternalId = ext.GetGlobalId() es.CloudregionId = self.Id es.ManagerId = provider.Id es.IsEmulated = ext.IsEmulated() es.Status = ext.GetStatus() if createdAt := ext.GetCreatedAt(); !createdAt.IsZero() { es.CreatedAt = createdAt } es.BillingType = ext.GetBillingType() if es.BillingType == billing_api.BILLING_TYPE_PREPAID { if expired := ext.GetExpiredAt(); !expired.IsZero() { es.ExpiredAt = expired } es.AutoRenew = ext.IsAutoRenew() } var err error err = func() error { // 这里加锁是为了防止名称重复  lockman.LockRawObject(ctx, ElasticSearchManager.Keyword(), \"name\") defer lockman.ReleaseRawObject(ctx, ElasticSearchManager.Keyword(), \"name\") es.Name, err = db.GenerateName(ctx, ElasticSearchManager, provider.GetOwnerId(), ext.GetName()) if err != nil { return errors.Wrapf(err, \"db.GenerateName\") } return ElasticSearchManager.TableSpec().Insert(ctx, \u0026es) }() if err != nil { return nil, errors.Wrapf(err, \"newFromCloudElasticSearch.Insert\") } // 同步标签  syncVirtualResourceMetadata(ctx, userCred, \u0026es, ext) // 同步项目归属  SyncCloudProject(userCred, \u0026es, provider.GetOwnerId(), ext, provider.Id) db.OpsLog.LogEvent(\u0026es, db.ACT_CREATE, es.GetShortDesc(ctx), userCred) return \u0026es, nil } func (manager *SElasticSearchManager) ListItemExportKeys(ctx context.Context, q *sqlchemy.SQuery, userCred mcclient.TokenCredential, keys stringutils2.SSortedStrings, ) (*sqlchemy.SQuery, error) { var err error q, err = manager.SVirtualResourceBaseManager.ListItemExportKeys(ctx, q, userCred, keys) if err != nil { return nil, errors.Wrap(err, \"SVirtualResourceBaseManager.ListItemExportKeys\") } if keys.ContainsAny(manager.SManagedResourceBaseManager.GetExportKeys()...) { q, err = manager.SManagedResourceBaseManager.ListItemExportKeys(ctx, q, userCred, keys) if err != nil { return nil, errors.Wrap(err, \"SManagedResourceBaseManager.ListItemExportKeys\") } } if keys.ContainsAny(manager.SCloudregionResourceBaseManager.GetExportKeys()...) { q, err = manager.SCloudregionResourceBaseManager.ListItemExportKeys(ctx, q, userCred, keys) if err != nil { return nil, errors.Wrap(err, \"SCloudregionResourceBaseManager.ListItemExportKeys\") } } return q, nil } 添加 resful 接口 # 编辑 pkg/compute/service/handlers.go 文件 func InitHandlers(app *appsrv.Application) { ... for _, manager := range []db.IModelManager{ ... } { db.RegisterModelManager(manager) } for _, manager := range []db.IModelManager{ ... // 加入es manager models.ElasticSearchManager, } { db.RegisterModelManager(manager) handler := db.NewModelHandler(manager) dispatcher.AddModelDispatcher(\"\", app, handler) } } 打包镜像，重启 region 服务 # 打包镜像 $ ARCH=all TAG=v3.8.es REGISTRY=registry.cn-beijing.aliyuncs.com/你的镜像命名空间 ./scripts/docker_push.sh region # 替换镜像，重启服务 $ kubectl edit deployments. -n onecloud default-region # 替换配置文件中的image为上面打包的镜像 climc 命令编写 # 创建 pkg/mcclient/modules/mod_elastic_searchs.go 文件, 注册module package modules import ( \"yunion.io/x/onecloud/pkg/mcclient/modulebase\" ) type ElasticSearchManager struct { modulebase.ResourceManager } var ( ElasticSearchs ElasticSearchManager ) func init() { ElasticSearchs = ElasticSearchManager{NewComputeManager(\"elastic_search\", \"elastic_searchs\", []string{}, []string{})} registerCompute(\u0026ElasticSearchs) } # 创建 pkg/mcclient/options/compute/elastic_search.go 文件，定义 climc 命令行参数 package compute import ( \"yunion.io/x/jsonutils\" \"yunion.io/x/onecloud/pkg/mcclient/options\" ) type ElasticSearchListOptions struct { options.BaseListOptions } func (opts *ElasticSearchListOptions) Params() (jsonutils.JSONObject, error) { return options.ListStructToParams(opts) } type ElasticSearchIdOption struct { ID string `help:\"Elasticsearch Id\"` } func (opts *ElasticSearchIdOption) GetId() string { return opts.ID } func (opts *ElasticSearchIdOption) Params() (jsonutils.JSONObject, error) { return nil, nil } # 创建 cmd/climc/shell/compute/elastic_search.go 文件, 添加命令 package compute import ( \"yunion.io/x/onecloud/cmd/climc/shell\" \"yunion.io/x/onecloud/pkg/mcclient/modules\" \"yunion.io/x/onecloud/pkg/mcclient/options/compute\" ) func init() { cmd := shell.NewResourceCmd(\u0026modules.ElasticSearchs) cmd.List(\u0026compute.ElasticSearchListOptions{}) cmd.Show(\u0026compute.ElasticSearchIdOption{}) } 调试 climc 命令 # 编译 climc 命令 $ make cmd/climc # 声明环境变量 $ source \u003c(ocadm cluster rcadmin) # 执行列出 ElasticSearch 资源命令 $ ./_output/bin/climc --debug elastic-search-list # 由于此时还未同步elastic search资源，返回结果为空 $ ./_output/bin/climc --debug elastic-search-show es-cn-n6w1ptcb30009**** 同步 ElasticSearch 资源 # 编辑 pkg/cloudprovider/consts.go 文件, 定义新资源类型 const ( CLOUD_CAPABILITY_PROJECT = \"project\" ... CLOUD_CAPABILITY_ES = \"es\" // ElasticSearch ) # 编辑 pkg/multicloud/aliyun/aliyun.go 文件, 添加云平台对新资源的能力 func (region *SAliyunClient) GetCapabilities() []string { caps := []string{ cloudprovider.CLOUD_CAPABILITY_PROJECT, ... ... cloudprovider.CLOUD_CAPABILITY_ES, } return caps } # 编辑 pkg/compute/models/cloudsync.go 文件, 添加同步逻辑 func syncPublicCloudProviderInfo( ctx context.Context, userCred mcclient.TokenCredential, syncResults SSyncResultSet, provider *SCloudprovider, driver cloudprovider.ICloudProvider, localRegion *SCloudregion, remoteRegion cloudprovider.ICloudRegion, syncRange *SSyncRange, ) error { ... // 若云平台支持ElasticSearch则同步es资源 if utils.IsInStringArray(cloudprovider.CLOUD_CAPABILITY_ES, driver.GetCapabilities()) { syncElasticSearchs(ctx, userCred, syncResults, provider, localRegion, remoteRegion) } if cloudprovider.IsSupportCompute(driver) { ... } ... } func syncElasticSearchs(ctx context.Context, userCred mcclient.TokenCredential, syncResults SSyncResultSet, provider *SCloudprovider, localRegion *SCloudregion, remoteRegion cloudprovider.ICloudRegion) error { iEss, err := remoteRegion.GetIElasticSearchs() if err != nil { msg := fmt.Sprintf(\"GetIElasticSearchs for region %s failed %s\", remoteRegion.GetName(), err) log.Errorf(msg) return err } result := localRegion.SyncElasticSearchs(ctx, userCred, provider, iEss) syncResults.Add(ElasticSearchManager, result) msg := result.Result() log.Infof(\"SyncElasticSearchs for region %s result: %s\", localRegion.Name, msg) if result.IsError() { return result.AllError() } return nil } 打包镜像，重启服务，同步资源 # 打包镜像 $ ARCH=all TAG=v3.8.es REGISTRY=registry.cn-beijing.aliyuncs.com/你的镜像命名空间 ./scripts/docker_push.sh region # 替换镜像，重启服务 $ kubectl edit deployments. -n onecloud default-region # 替换配置文件中的image为上面打包的镜像 # 声明环境变量 $ source \u003c(ocadm cluster rcadmin) $ climc cloud-account-sync --force --full-sync 阿里云账号id # 等待资源同步完成, 查看资源是否同步下来 $ climc elastic-search-list --scope system 添加资源删除操作 # 编辑 pkg/cloudprovider/resources.go type ICloudElasticSearch interface { IVirtualResource IBillingResource // 添加删除接口 Delete() } # 编辑 pkg/multicloud/aliyun/elastic_search.go 文件，实现Delete操作 func (self *SElasticSearch) Delete() error { return self.region.DeleteElasticSearch(self.InstanceId) } func (self *SRegion) DeleteElasticSearch(id string) error { ... } # 添加 aliyuncli 命令 # 编辑 pkg/multicloud/aliyun/shell/elk.go 文件 func init() { ... type ElkIdOptions struct { ID string } ... shellutils.R(\u0026ElkIdOptions{}, \"elastic-search-delete\", \"Delete elasitc search\", func(cli *aliyun.SRegion, args *ElkIdOptions) error { return cli.DeleteElasticSearch(args.ID) }) } # 编辑 pkg/compute/models/elastic_search.go 文件 # 添加删除逻辑 ... // 这里重写Delete方法，只有在Delete任务完成后调用RealDelete方法进行真正的删除 func (self *SElasticSearch) Delete(ctx context.Context, userCred mcclient.TokenCredential) error { return nil } // 只有在资源真正删除后才删除本地数据库资源 func (self *SElasticSearch) RealDelete(ctx context.Context, userCred mcclient.TokenCredential) error { return self.SVirtualResourceBase.Delete(ctx, userCred) } // 进入删除任务 func (self *SElasticSearch) CustomizeDelete(ctx context.Context, userCred mcclient.TokenCredential, query jsonutils.JSONObject, data jsonutils.JSONObject) error { return self.StartDeleteTask(ctx, userCred, \"\") } func (self *SElasticSearch) StartDeleteTask(ctx context.Context, userCred mcclient.TokenCredential, parentTaskId string) error { task, err := taskman.TaskManager.NewTask(ctx, \"ElasticSearchDeleteTask\", self, userCred, nil, parentTaskId, \"\", nil) if err != nil { return err } self.SetStatus(userCred, api.ELASTIC_SEARCH_STATUS_DELETING, \"\") task.ScheduleRun(nil) return nil } func (self *SElasticSearch) GetRegion() (*SCloudregion, error) { region, err := CloudregionManager.FetchById(self.CloudregionId) if err != nil { return nil, errors.Wrapf(err, \"CloudregionManager.FetchById(%s)\", self.CloudregionId) } return region.(*SCloudregion), nil } func (self *SElasticSearch) GetIRegion() (cloudprovider.ICloudRegion, error) { region, err := self.GetRegion() if err != nil { return nil, errors.Wrapf(err, \"GetRegion\") } provider, err := self.GetDriver() if err != nil { return nil, errors.Wrap(err, \"self.GetDriver\") } return provider.GetIRegionById(region.GetExternalId()) } // 获取云上对应的资源 func (self *SElasticSearch) GetIElasticSearch() (cloudprovider.ICloudElasticSearch, error) { if len(self.ExternalId) == 0 { return nil, errors.Wrapf(cloudprovider.ErrNotFound, \"empty externalId\") } iRegion, err := self.GetIRegion() if err != nil { return nil, errors.Wrapf(cloudprovider.ErrNotFound, \"GetIRegion\") } return iRegion.GetIElasticSearchById(self.ExternalId) } func (self *SElasticSearch) syncRemoveCloudElasticSearch(ctx context.Context, userCred mcclient.TokenCredential) error { // 这里需要将之前的self.Delete变更为self.RealDelete, 防止同步时资源没有删除 return self.RealDelete(ctx, userCred) } # 创建 pkg/compute/tasks/elastic_search_delete_task.go 文件 # 编写删除任务 package tasks import ( \"context\" \"yunion.io/x/jsonutils\" \"yunion.io/x/pkg/errors\" api \"yunion.io/x/onecloud/pkg/apis/compute\" \"yunion.io/x/onecloud/pkg/cloudcommon/db\" \"yunion.io/x/onecloud/pkg/cloudcommon/db/taskman\" \"yunion.io/x/onecloud/pkg/cloudprovider\" \"yunion.io/x/onecloud/pkg/compute/models\" \"yunion.io/x/onecloud/pkg/util/logclient\" ) type ElasticSearchDeleteTask struct { taskman.STask } func init() { taskman.RegisterTask(ElasticSearchDeleteTask{}) } func (self *ElasticSearchDeleteTask) taskFail(ctx context.Context, es *models.SElasticSearch, err error) { es.SetStatus(self.GetUserCred(), api.ELASTIC_SEARCH_STATUS_DELETE_FAILED, err.Error()) db.OpsLog.LogEvent(es, db.ACT_DELOCATE_FAIL, err, self.UserCred) // 记录删除失败日志 logclient.AddActionLogWithStartable(self, es, logclient.ACT_DELETE, err, self.UserCred, false) self.SetStageFailed(ctx, jsonutils.NewString(err.Error())) } func (self *ElasticSearchDeleteTask) OnInit(ctx context.Context, obj db.IStandaloneModel, data jsonutils.JSONObject) { es := obj.(*models.SElasticSearch) iEs, err := es.GetIElasticSearch() if err != nil { // 处理云上资源已删除的情况 if errors.Cause(err) == cloudprovider.ErrNotFound { self.taskComplete(ctx, es) return } self.taskFail(ctx, es, errors.Wrapf(err, \"GetIElasticSearch\")) return } err = iEs.Delete() if err != nil { self.taskFail(ctx, es, errors.Wrapf(err, \"iEs.Delete\")) return } self.taskComplete(ctx, es) } func (self *ElasticSearchDeleteTask) taskComplete(ctx context.Context, es *models.SElasticSearch) { es.RealDelete(ctx, self.GetUserCred()) self.SetStageComplete(ctx, nil) } # 编辑 cmd/climc/shell/compute/elastic_search.go 文件 # 添加 climc 删除命令 func init() { ... cmd.Delete(\u0026compute.ElasticSearchIdOption{}) } # 测试删除 $ climc elastic-search-delete test-elastic-search 资源清理(云账号删除) # 此步骤仅适用于新资源接入，已有资源不涉及此操作 # 编辑 pkg/compute/models/purge.go 文件 # 追加以下内容 func (manager *SElasticSearchManager) purgeAll(ctx context.Context, userCred mcclient.TokenCredential, providerId string) error { ess := []SElasticSearch{} err := fetchByManagerId(manager, providerId, \u0026ess) if err != nil { return errors.Wrapf(err, \"fetchByManagerId\") } for i := range ess { lockman.LockObject(ctx, \u0026ess[i]) defer lockman.ReleaseObject(ctx, \u0026ess[i]) err := ess[i].RealDelete(ctx, userCred) if err != nil { return errors.Wrapf(err, \"elastic search delete\") } } return nil } # 编辑 pkg/compute/models/cloudproviders.go 文件 func (self *SCloudprovider) RealDelete(ctx context.Context, userCred mcclient.TokenCredential) error { for _, manager := range []IPurgeableManager{ ... // 根据资源依赖排序，依赖越小，排的越前 ElasticSearchManager, ... } { ... } ... } ","excerpt":"本文以阿里云ElasticSearch为例(cloudpods从v3.8开始支持)，介绍如何纳管ElasticSearch\ngit diff …","ref":"/zh/docs/development/resource_sync/new_resource/","title":"新资源接入"},{"body":"查看IP子网详情 该功能用于查看IP子网详细信息。\n 在IP子网页面，单击IP子网名称项，进入IP子网详情页面。 详情页面顶部菜单项支持对IP子网进行管理操作。 查看以下信息。  基本信息：包括云上ID、ID、名称、状态、域、项目、用户标签、共享范围、平台、调度标签、区域、可用区、云账号、云订阅、创建时间、更新时间、备注等。 配置信息：包括VPC、二层网络、服务器类型、线路类型、IP范围、子网掩码、网关、VLAN ID、使用情况、域名服务器、主机域名后缀。    查看IP使用情况 该功能主要用于查看IP子网中分别用于宿主机、主机、预留IP、负载均衡IP以及弹性网卡IP等用途的IP信息。\n 在IP子网详情页面，单击“IP使用情况”页签，进入IP使用情况页面。 查看IP子网中用于各类用途的IP地址信息。  预留IP 该功能用于查看IP子网中的预留IP详情，支持新建和释放预留IP。\n 在IP子网详情页面，单击“预留IP”页签，进入预留IP页面。 查看IP子网中预留IP的信息。  新建预留IP 该功能用于新建预留IP，预留IP将不会被云管平台分配给服务器使用。\n 在预留IP页面，单击列表上方 “新建” 按钮，弹出新建对话框。 输入IP子网中的需要预留的IP地址(支持一次添加6个IP地址)、预留原因，单击 “确定” 按钮。  释放预留IP 该功能用于释放预留的IP，使其可以被云管平台分配。支持单个或批量释放IP地址。\n单个释放\n 在预留IP页面，单击IP右侧操作列 “释放” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量释放\n 在预留IP列表选择一个或多个IP地址，单击列表上方 “释放” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"查看IP子网详情 该功能用于查看IP子网详细信息。\n 在IP子网页面，单击IP子网名称项，进入IP子网详情页面。 详情页面顶部菜单项支持 …","ref":"/zh/docs/onpremise/network/tutorial/default/viewsubnet/","title":"查看IP子网下信息"},{"body":"查看IP子网详情 该功能用于查看IP子网详细信息。\n 在IP子网页面，单击IP子网名称项，进入IP子网详情页面。 详情页面顶部菜单项支持对IP子网进行管理操作。 查看以下信息。  基本信息：包括云上ID、ID、名称、状态、域、项目、用户标签、共享范围、平台、调度标签、区域、可用区、云账号、云订阅、创建时间、更新时间、备注等。 配置信息：包括VPC、二层网络、服务器类型、线路类型、IP范围、子网掩码、网关、VLAN ID、使用情况、域名服务器、主机域名后缀。    查看IP使用情况 该功能主要用于查看IP子网中分别用于宿主机、主机、预留IP、负载均衡IP以及弹性网卡IP等用途的IP信息。\n 在IP子网页面，单击IP子网名称项，进入IP子网详情页面。 在IP子网详情页面，单击“IP使用情况”页签，进入IP使用情况页面。 查看IP子网中用于各类用途的IP地址信息。  ","excerpt":"查看IP子网详情 该功能用于查看IP子网详细信息。\n 在IP子网页面，单击IP子网名称项，进入IP子网详情页面。 详情页面顶部菜单项支持 …","ref":"/zh/docs/onpremise/network/tutorial/vpc/viewsubnet/","title":"查看IP子网下信息"},{"body":"","excerpt":"","ref":"/zh/docs/screenshots/","title":"界面概览"},{"body":"当在负载均衡实例上配置HTTPS监听转发来自HTTPS协议的请求时，需要配置证书。负载均衡只支持PEM格式的证书。\n新建证书 说明 常用证书申请流程：\n 本地生成私钥：openssl genrsa -out privateKey.pem 2048 ，其中生成的privateKey.pem为私钥文件，请妥善保管。 生成证书请求文件：openssl req -new -key privateKey.pem -out server.csr ，其中server.csr是证书请求文件，可用其去申请证书。 获取请求文件中的内容前往 CA 等机构站点申请证书。    单击列表上方 “新建” 按钮，弹出新建证书对话框。 设置以下参数：  证书名称：设置证书名称。 证书内容：cert.pem证书的内容，证书内容要求：  以—–BEGIN CERTIFICATE—–开头,以—–END CERTIFICATE—–结尾； 每行64个字符，最后一行长度可以不足64个字符； 证书内容不能包含空格。   证书密钥：privkey.pem密钥的内容，密钥内容要求：  以—–BEGIN RSA PRIVATE KEY—–开头,以—–END RSA PRIVATE KEY—–结尾； 每行64个字符，最后一行长度可以不足64个字符； 证书密钥内容不能包含空格。     单击 “确定” 按钮，新建证书。  更换证书 该功能用于为https监听更换证书，当证书快到期时可通过该功能批量为https监听更换证书。\n单个更换证书\n 在监听页面，单击监听右侧操作列 “更换证书” 按钮，弹出更换证书对话框。 选择新证书，单击 “确定” 按钮，完成操作。  批量更换证书\n说明 仅支持为同一个域下的监听批量更换证书。   在监听页面中选择一个或多个监听，单击列表上方 “更换证书” 按钮，弹出更换证书对话框。 选择新证书，单击 “确定” 按钮，完成操作。  更改项目 该功能用于更改证书所属项目。当证书为私有状态时，才可以更改项目。\n单个证书更改项目\n 在证书页面，单击证书右侧操作列 “更多” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 修改域和项目，单击 “确定” 按钮。  批量更改项目\n 在证书列表中选择一个或多个证书，单击列表上方 “批量操作” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 修改域和项目，单击 “确定” 按钮。  设置共享 该功能用于设置证书的共享状态。\n项目资源的共享范围有五种：\n 不共享（私有）：即项目资源只能本项目的用户可以使用。 项目共享-部分（本域内多项目共享）：即项目资源可以共享到同域下的指定项目（一个或多个），只有本项目和被共享项目下的用户可以使用项目资源。 项目共享-全部（本域共享）：即项目资源可以共享给域下所有项目，即项目所在域的用户都可以使用项目资源。 域共享-部分（多域共享）：即项目资源可以共享到指定域（一个或多个），只有项目资源所在域和共享域下的用户可以使用项目资源。 域共享-全部（全局共享）：即项目资源可以共享给全部域使用，即系统中所有用户都可以使用项目资源。  说明 设置域共享的条件：\n 在Cloudpods平台已开启三级权限。 用户处于管理后台。  设置项目共享的条件：\n 用户处于管理后台或域管理后台。   单个证书设置共享\n 在证书页面，单击证书右侧操作列 “更多” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数。  当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。  当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。   当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。     单击 “确定” 按钮，完成操作。  批量设置共享\n多个证书批量设置的共享范围必须相同。否则请单独为证书设置共享。\n 在证书列表中选择一个或多个证书，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数。  当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。  当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。   当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。     单击 “确定” 按钮，完成操作。  删除证书 该功能用于删除证书，当证书关联的监听数量为0时，才可以删除。\n 单击证书右侧操作列 “删除” 按钮，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  查看证书详情 该功能用于查看证书的详细信息。\n 在证书页面，单击证书名称项，进入证书详情页面。 详情页面顶部菜单项支持对证书进行删除操作。 查看证书的云上ID、ID、名称、状态、域、项目、指纹、证书域名、过期时间、创建时间、更新时间、备注。  查看证书关联的监听列表 该功能用于查看证书关联的https监听列表。\n 在证书页面，单击证书名称项，进入证书详情页面。 单击“监听”页签，进入监听页面。 查看证书关联的所有https监听信息。  ","excerpt":"当在负载均衡实例上配置HTTPS监听转发来自HTTPS协议的请求时，需要配置证书。负载均衡只支持PEM格式的证书。\n新建证书 说明 常用证书 …","ref":"/zh/docs/onpremise/lb/tutorial/lb/lbcert/","title":"证书"},{"body":"","excerpt":"","ref":"/zh/docs/development/resource_sync/","title":"资源纳管"},{"body":" 注意  由于是周期任务检查进行删除释放操作, 释放时间可能会稍晚几分钟   限制  RDS实例必须为后付费  控制台   ","excerpt":" 注意  由于是周期任务检查进行删除释放操作, 释放时间可能会稍晚几分钟   限制  RDS实例必须为后付费  控制台   ","ref":"/zh/docs/multicloud/db/rds/tutorial/dbinstance/release/","title":"到期释放"},{"body":"当用户环境使用VPC网络时，由于VPC网络是一块网络隔离的地址空间，在VPC网络中的虚拟机如果需要与外部通信，需要绑定弹性公网IP，因此需要为VPC网络创建弹性公网IP地址池。Cloudpods平台支持将经典网络的弹性公网IP类型的IP子网作为弹性公网IP地址池。后续在指定的弹性公网IP地址池中分配弹性公网IP供VPC网络中的虚拟机使用。\n新建弹性公网IP类型的IP子网  在IP子网页面，单击顶部“全部”或“本地IDC”页签，单击列表上方 “新建” 按钮，进入新建本地IDC的IP子网页面。 设置以下信息：  指定项目：选择IP子网的所属项目。 区域：选择IP子网所属区域。 名称：设置IP子网的名称。 VPC：选择IP子网所属VPC为Default。 二层网络：选择区域、专有网络以及二层网络。 服务器类型：选择弹性公网IP。 子网网段：设置起始IP地址、结束IP地址、子网掩码、默认网关（选填）、VLAN ID（选填）等。支持一次性增加6个IP子网段，当一次性创建多个IP子网时，子网名称由系统自动分配，如创建3个IP子网，页面中IP子网名称设置为network，则名称依次为network0、network1、network2。 高级配置：单击“高级配置”超连接，展开高级配置选项。  线路类型：当服务器类型为弹性公网IP时，支持自定义标记EIP的线路类型，例如，联通、移动等；在【费用-费率配置】中支持针对不同线路类型的EIP设置不同的费率，若无线路类型，则使用默认EIP费率。 地址分配策略：包括缺省策略（物理机从IP子网高地址开始分配，虚拟机从IP子网低地址开始分配）、从高地址分配、从低地址分配、随机分配。 域名服务器：设置域名服务器。 主机域名后缀：当设置主机域名后缀时，当系统为主机分配一个IP，同时也会创建一条指向该IP的域名记录，域名格式由主机名称+主机域名后缀组成。例如主机名称为VM01，分配IP地址为192.168.1.1，主机域名后缀为test.com。即创建一条192.168.1.1与VM01.test.com对应的域名记录，当使用ping命令，ping VM01.test.com，将返回192.168.1.1的IP地址。      创建弹性公网IP 在创建弹性公网IP之前请确保已创建了弹性公网IP类型的IP子网。\n 在弹性公网IP页面，单击顶部“本地IDC”页签，单击列表上方 “新建” 按钮，进入新建本地IDC弹性公网IP页面。 配置以下信息：  指定项目：管理员和域管理员在新建弹性公网IP时需要指定弹性公网IP所属的项目。 区域：选择弹性公网IP所属的区域。 名称：设置弹性公网IP的名称。 线路类型：可根据线路类过滤IP子网，创建指定线路类型的弹性公网IP。默认线路类型为空，即不跟进线路类型过滤IP子网，将随机从所有弹性公网IP类型的IP子网中分配EIP。 指定IP子网：选择VPC（仅支持default VPC）和IP子网，如需指定静态IP，可单击 “手动配置IP” 按钮，设置IP地址，单击 “确定” 按钮。 计费方式：目前仅支持按带宽计费。 带宽峰值：设置弹性公网IP支持的最大带宽。   单击 “确定” 按钮，完成操作。  ","excerpt":"当用户环境使用VPC网络时，由于VPC网络是一块网络隔离的地址空间，在VPC网络中的虚拟机如果需要与外部通信，需要绑定弹性公网IP，因此需要 …","ref":"/zh/docs/onpremise/network/tutorial/vpc/createeip/","title":"新建弹性公网IP"},{"body":"部署在本地IDC的Cloudpods私有云主要包含了两大类产品：主机和负载均衡\n","excerpt":"部署在本地IDC的Cloudpods私有云主要包含了两大类产品：主机和负载均衡\n","ref":"/zh/docs/onpremise/","title":"私有云"},{"body":"  镜像(image): 是用于新建云服务器(虚拟机)、裸金属(物理机)使用的模板文件，常用类型为 qcow2, vmdk, raw, vhd, iso。\n  主机镜像：仅用于新建虚拟机，通过虚拟机操作保存镜像功能，将虚拟机整体保存为镜像等，后续可基于主机镜像创建虚拟机。\n  镜像服务(glance): 云平台的镜像服务叫做 glance，用于存储转换用户上传或外部导入的镜像，提供下载功能。\n  缓存镜像(cached-image): 创建公/私有云虚拟机时，可以直接使用各个云平台已有的镜像，这些镜像不会存储在 glance，云平台只是保存元信息，创建机器时会直接使用。\n  image 和 cached-image 两种资源的区别如下：\n image: glance 管理的镜像，由用户上传或者外部导入; cached-image:  包括公有云和其他私有云的镜像，不由 glance 管理，一般在创建 Cloudpods 之外的公/私有云主机的时候用到; 不提供创建接口，只能查询，刷新和删除;    ","excerpt":"  镜像(image): 是用于新建云服务器(虚拟机)、裸金属(物理机)使用的模板文件，常用类型为 qcow2, vmdk, raw, …","ref":"/zh/docs/onpremise/image/","title":"镜像"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/cloudaccounts/faq/","title":"常见问题"},{"body":"TODO\n","excerpt":"TODO\n","ref":"/zh/docs/multicloud/cloudgroup/faq/","title":"常见问题"},{"body":"该功能用于测试账号的连接状态并同步云账号上的资源信息。禁用状态的云账号不支持该操作。\n单个云账号连接测试\n 在云账号页面，单击云账号右侧操作列 “更多” 按钮，选择下拉菜单 “连接测试” 菜单项，测试账号连接状态，若处于云账号连接状态则同步云账号上资源信息。  批量连接测试\n 在云账号列表勾选一个或多个云账号，单击列表上方 “批量操作” 按钮，选择下拉菜单 “连接测试” 菜单项，测试账号连接状态，若处于云账号连接状态则同步云账号上资源信息。  ","excerpt":"该功能用于测试账号的连接状态并同步云账号上的资源信息。禁用状态的云账号不支持该操作。\n单个云账号连接测试\n 在云账号页面，单击云账号右侧操作 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/connect/","title":"连接测试"},{"body":"Cloudpods支持对接多个云平台的多种云产品，统一多云API和资源模型，实现多云统一融合，简化使用多云的复杂度，提高访问多云的效率。\n云平台云产品支持情况 以下为v3.7对各个云平台的各类云产品的支持情况。\n Y: 支持(增删查改) N: 不支持 -: 平台本身不支持 D: 开发过程中 R: 只读同步     云平台(Provider) 虚拟机 区域 可用区 项目 Vpc 弹性网卡 二层网络 Eip NAT 安全组 镜像 磁盘 快照 宿主机 负载均衡 RDS 对象存储 标签 弹性缓存 操作日志 NAS WAF IAM DNS VPC对等连接 路由表     内置私有云(Cloudpods) Y Y Y Y Y Y Y Y - Y Y Y Y Y Y - - Y - Y - - Y Y - Y   阿里云(Aliyun) Y Y Y Y Y R - Y Y Y Y Y Y - Y Y Y Y Y Y Y D Y Y N R   腾讯云(Qcloud) Y Y Y Y Y R - Y R Y Y Y Y - Y Y Y Y Y Y N N Y Y Y R   华为云(Huawei) Y Y Y Y Y R - Y Y Y Y Y Y - Y Y Y Y Y Y Y N Y N Y Y   微软云(Azure) Y Y - Y Y R - Y - Y Y Y Y - N R Y Y N Y N D Y N N N   谷歌云(Google) Y Y Y - Y - - Y N Y Y Y Y - N Y Y Y N N N N Y N N N   Aws(Aws) Y Y Y N Y N - Y N Y Y Y Y - Y R Y Y N Y N D Y Y Y Y   优刻得(Ucloud) Y Y Y N Y Y - Y N Y Y Y Y - N N Y N N N N N N N N N   天翼云(Ctyun) Y Y Y N Y N - Y N Y Y Y N - N N N N N N N N N N N N   移动云(Ecloud) R Y Y N R - - R N R R R N - N N N N N N N N N N N N   VMware(VMware) Y - - - - - - - - - Y Y N R - - - N - - - - - - - -   OpenStack(OpenStack) Y Y Y N Y R - Y N Y Y Y Y R Y N N Y - N N - N N - R   ZStack(ZStack) Y - Y N Y R - Y - Y Y Y Y R N - - N - N N - N N - N   阿里私有云(Apsara) Y Y Y N Y R - Y R Y R Y Y - Y Y - N Y N N - N N N R   S3(S3) - - - - - - - - - - - - - - - - Y - - - - - - - - -   Ceph(Ceph) - - - - - - - - - - - - - - - - Y - - - - - - - - -   Xsky(Xsky) - - - - - - - - - - - - - - - - Y - - - - - - - - -   京东云(JDcloud) R Y Y N R N - R N R R R R - N N N N N N N N N N N N    ","excerpt":"Cloudpods支持对接多个云平台的多种云产品，统一多云API和资源模型，实现多云统一融合，简化使用多云的复杂度，提高访问多云的效率。\n云 …","ref":"/zh/docs/multicloud/","title":"多云管理"},{"body":"安全组是一种虚拟的包过滤防火墙，通过设置安全组出入方向的规则来控制关联的虚拟机的访问策略。如控制虚拟机是否被其他网络可以被访问，以及虚拟机可访问的外部资源等。一个虚拟机支持关联多个安全组（最多5个）。\n安全组规则策略默认为严进宽出。\n 入方向：白名单机制，安全组未设置任何规则时，将拒绝所有流量访问虚拟机，需要根据需求添加安全组规则放行指定网络访问虚拟机的指定端口等。 出方向：黑名单机制，安全组出方向默认允许虚拟机访问任意资源，需要根据需求添加安全组规则控制虚拟机可以访问的资源。  入口：在云管平台单击左上角导航菜单，在弹出的左侧菜单栏中单击 “主机/网络/安全组” 菜单项，进入安全组页面。\n","excerpt":"安全组是一种虚拟的包过滤防火墙，通过设置安全组出入方向的规则来控制关联的虚拟机的访问策略。如控制虚拟机是否被其他网络可以被访问，以及虚拟机可 …","ref":"/zh/docs/onpremise/network/tutorial/secgroup/","title":"安全组"},{"body":"当VPC网络中的虚拟机需要绑定弹性公网IP实现与外部网络通信。\n绑定 将弹性公网IP绑定到虚拟机上，使虚拟机可以和公网通信。弹性公网IP和虚拟机需要属于同一区域内同一项目才可以绑定。\n注意 私有云平台的弹性公网IP不能绑定同一IP子网下的虚拟机。   在弹性公网IP页面，单击弹性公网IP右侧操作列 “更多” 按钮，选择下拉菜单 “绑定” 菜单项，弹出绑定对话框。 选择虚拟机，虚拟机下拉框中显示所有可以与该弹性公网IP绑定的虚拟机列表，单击 “确定” 按钮。  解绑 该功能用于解除弹性公网IP与虚拟机的绑定，解绑后的弹性公网IP可以分配给其它虚拟机使用。\n 在弹性公网IP页面，单击弹性公网IP右侧操作列 “更多” 按钮，选择下拉菜单 “解绑” 菜单项，弹出解绑确认对话框。 单击 “确定” 按钮，完成操作。  修改带宽 该功能用于修改弹性公网IP的带宽，当弹性公网IP绑定虚拟机后才支持修改带宽的操作。\n 在弹性公网IP页面，单击弹性公网IP右侧操作列 “修改带宽” 按钮，弹出修改带宽对话框。 修改带宽值，单击 “确定” 按钮。  ","excerpt":"当VPC网络中的虚拟机需要绑定弹性公网IP实现与外部网络通信。\n绑定 将弹性公网IP绑定到虚拟机上，使虚拟机可以和公网通信。弹性公网IP和虚 …","ref":"/zh/docs/onpremise/network/tutorial/vpc/bindeip/","title":"绑定/解绑弹性公网IP"},{"body":"该功能用于删除云账号。删除之前需要先禁用云账号。在Cloudpods平台上删除云账号不会影响到云账号上的资源。\n单个删除\n 在云账号页面，单击\"禁用\"状态的云账号右侧操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在云账号列表中勾选一个或多个\"禁用\"状态的云账号，单击列表上方 “批量操作” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"该功能用于删除云账号。删除之前需要先禁用云账号。在Cloudpods平台上删除云账号不会影响到云账号上的资源。\n单个删除\n 在云账号页面，单 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/delete/","title":"删除"},{"body":"该功能用于启用\"禁用\"状态的云账号，禁用状态的云账号的资源不能被使用。\n单个启用\n 在云账号页面，单击\"禁用\"状态的云账号右侧操作列 “更多” 按钮，选择下拉菜单 “启用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，启用云账号。  批量启用\n 在云账号列表中勾选一个或多个\"禁用\"状态的云账号，单击列表上方 “批量操作” 按钮，选择下拉菜单 “启用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，启用云账号。  ","excerpt":"该功能用于启用\"禁用\"状态的云账号，禁用状态的云账号的资源不能被使用。\n单个启用\n 在云账号页面，单击\"禁用\"状态的云账号右侧操作列 “更 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/enable/","title":"启用"},{"body":"该功能用于查看云账号的详细信息。\n 在云账号页面，单击指定云账号名称项，进入云账号详情页面。 详情页面顶部菜单项支持对云账号进行更新账号密码、全量同步、设置自动同步、连接测试、设置为共享、设置为私有、启用、禁用、删除等操作。 查看以下信息：  基本信息：包括ID、名称、状态、域、项目、共享范围、平台、账号、代理、启用状态、同步时间、创建时间、更新时间、备注等。 账号信息：包括环境、健康状态、余额、虚拟机数量、宿主机数量。    ","excerpt":"该功能用于查看云账号的详细信息。\n 在云账号页面，单击指定云账号名称项，进入云账号详情页面。 详情页面顶部菜单项支持对云账号进行更新账号密 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/show/","title":"查看云账号详情"},{"body":"该功能用于查看私有云平台以及VMware平台的宿主机信息。公有云账号无该页面。\n 在云账号页面，单击“宿主机”页签，进入宿主机页面。 查看宿主机信息，并支持对宿主机进行管理操作。  ","excerpt":"该功能用于查看私有云平台以及VMware平台的宿主机信息。公有云账号无该页面。\n 在云账号页面，单击“宿主机”页签，进入宿主机页面。 查看宿 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/host/","title":"查看宿主机信息"},{"body":"该功能用于禁用\"启用\"状态的云账号。删除之前需要先禁用云账号。\n单个禁用\n 在云账号页面，单击\"启用\"状态的云账号右侧操作列 “更多” 按钮，选择下拉菜单 “禁用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，禁用云账号。  批量禁用\n 在云账号列表中勾选一个或多个\"启用\"状态的云账号，单击列表上方 “批量操作” 按钮，选择下拉菜单 “禁用” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，禁用云账号。  ","excerpt":"该功能用于禁用\"启用\"状态的云账号。删除之前需要先禁用云账号。\n单个禁用\n 在云账号页面，单击\"启用\"状态的云账号右侧操作列 “更多” 按 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/disable/","title":"禁用"},{"body":"该功能用于帮助已创建好的云账号绑定代理。\n 在云账号页面，单击云账号右侧操作列 “更多” 按钮，选择下拉菜单 “设置代理” 菜单项，弹出设置代理对话框。 选择代理，单击 “确定” 按钮。  ","excerpt":"该功能用于帮助已创建好的云账号绑定代理。\n 在云账号页面，单击云账号右侧操作列 “更多” 按钮，选择下拉菜单 “设置代理” 菜单项，弹出设置 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/proxy/","title":"设置代理"},{"body":"该功能用于设置云账号的共享状态。\n云账号不同与其它域资源，有5种共享情况。\n 不共享（私有）：即云账号上的资源仅云账号所属域可用。 共享云订阅-部分（多域共享云订阅）：当共享云订阅，并指定部分域后，管理员可以在订阅页面更改项目，只能选择订阅共享的域下的项目。设置完成后，云账号资源只有项目所在域中的用户使用。 共享云订阅-全部（全局共享云订阅）：当共享云订阅选择全部域后，管理员以在订阅页面更改项目，可以选择任意域下的项目。设置完成后，云账号资源只有项目所在域中的用户使用。 共享云账号-部分（多域共享云账号）：即云账号可以共享到指定域（一个或多个），只有云账号所在域和共享域下的用户可以使用云账号。 共享云账号-全部（全局共享云账号）：即云账号可以共享给全部域使用，即系统中所有用户都可以使用云账号。  说明 设置共享的条件：需同时满足\n 当前用户在系统后台。 已开启三级权限。   注意 通过云账号同步下来的资源（除安全组外）的共享范围都受云账号的共享范围影响。云账号上的资源其他域是否可用需要看资源的具体共享范围。   在云账号页面，单击云账号右侧操作列 “更多” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数：  当共享范围选择为“不共享”时，即云账号的共享范围为私有，仅云账号所属域可以使用云账号的资源。 当共享范围选择为“共享云订阅”时，需要选择共享的域。  当域选择其中一个或多个域时，即云账号的共享范围为共享云订阅-部分，后续订阅更改项目时的选择范围为共享域下的任意项目。更改项目后，仅项目所属域可以使用云账号的资源。 当域选择全部时，即云账号的共享范围为共享云订阅-全部，后续订阅更改项目时的可选范围为任意域下的任意项目。更改项目后，仅项目所属域可以使用云账号的资源。   当共享范围选择为“共享云账号”是，需要选择共享的域。  当域选择其中一个或多个域时，即云账号的共享范围为共享云账号-部分，只有云账号所在域和共享域下的用户可以使用云账号的资源。 当域选择全部时，即云账号的共享范围为共享云账号-全部，系统中的所有用户都可以使用云账号资源。     单击 “确定” 按钮，完成操作。  ","excerpt":"该功能用于设置云账号的共享状态。\n云账号不同与其它域资源，有5种共享情况。\n 不共享（私有）：即云账号上的资源仅云账号所属域可用。 共享云订 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/share/","title":"设置共享"},{"body":"多云Kubernetes支持管理已有的Kubernetes集群，同时也支持基于Cloudpods的虚拟机资源，无论是本地IDC还是多云的虚拟机资源，搭建部署 kubernetes 集群，目前支持在以下平台部署：\n 内置私有云 阿里云 AWS  ","excerpt":"多云Kubernetes支持管理已有的Kubernetes集群，同时也支持基于Cloudpods的虚拟机资源，无论是本地IDC还是多云的虚拟 …","ref":"/zh/docs/k8s/","title":"多云Kubernetes"},{"body":"主机镜像是同时将模板虚拟机上的所有硬盘保存为镜像，基于主机镜像创建的虚拟机拥有除模板虚拟机用户数据之外的全部数据。\n通过虚拟机保存镜像功能，可将虚拟机整体保存为主机镜像，后续用户可以在新建虚拟机时基于主机镜像创建虚拟机等。\n修改属性 该功能用于修改主机镜像的属性信息。\n  在主机镜像页面，单击镜像右侧操作列 “更多” 按钮，选择下拉菜单 “修改属性” 菜单项，弹出修改属性对话框。\n  支持修改以下参数：\n 镜像名称：设置镜像的名称，建议名称与镜像的发行版本相关。 删除保护：设置镜像是否启用删除保护，禁用删除保护后，可删除镜像。启用删除保护后，无法删除镜像。 操作系统：包括Linux、Windows、macOS、VMware以及其他操作系统。 发行版：选择镜像的发行版本。 磁盘驱动：包括系统自动选择、virtio、scsi、pvscsi、ide、sata。根据磁盘类型选择对应的驱动，建议选择”系统自动选择“。 网卡驱动：包括系统自动选择、virtio、e1000、vmxnet3。建议选择“系统自动选择”。    单击 “确定” 按钮，完成修改。\n  查看主机镜像详情 该功能用于查看主机镜像的详细信息。\n 在主机镜像页面，单击主机镜像名称项，进入主机镜像详情页面。 详情页面顶部菜单项支持对镜像镜像管理操作。 查看镜像的信息。  基本信息：包括云上ID、ID、名称、状态、域、项目、共享范围、类型、子镜像、大小、创建时间、更新时间备注。 镜像属性：包括磁盘格式、系统语言、最小内存要求、最小磁盘要求、磁盘驱动、网卡驱动、应用平台。 多云镜像：查看镜像的其他格式的信息，包括校验和、格式、大小以及状态。 其他信息：支持开启或关闭删除保护。    查看子镜像信息 该功能用于查看主机镜像的子镜像信息。为虚拟机保存主机镜像，实质是将虚拟机的每块硬盘保存为子镜像。\n 在主机镜像详情页面，单击“子镜像”页签，进入子镜像页面。 查看子镜像的镜像名称、镜像类别、格式、创建时间等信息。  ","excerpt":"主机镜像是同时将模板虚拟机上的所有硬盘保存为镜像，基于主机镜像创建的虚拟机拥有除模板虚拟机用户数据之外的全部数据。\n通过虚拟机保存镜像功能， …","ref":"/zh/docs/onpremise/image/tutorial/hostimage/","title":"主机镜像"},{"body":"同步状态 该功能用于获取弹性公网IP的当前状态。\n单个同步状态\n 在弹性公网IP页面，单击弹性公网IP右侧操作列 “更多” 按钮，选择下拉菜单 “同步状态” 菜单项，同步弹性公网IP的状态。  批量同步状态\n 在弹性公网IP列表中勾选一个或多个弹性公网IP，单击列表上方 “批量操作” 按钮，选择下拉菜单 “同步状态” 菜单项，批量同步状态。  更改项目 项目是资源的拥有者，用户可以根据需求更改弹性公网IP所属的项目。只有项目中的成员才可以使用所属项目中的弹性公网IP资源。\n 在弹性公网IP页面，单击弹性公网IP右侧操作列 “更多” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 设置项目信息，单击 “确定” 按钮。  删除弹性公网IP 该功能用于删除弹性公网IP，与虚拟机绑定的弹性公网IP不支持删除，请解绑后再进行删除操作。\n单个删除\n 在弹性公网IP页面，单击弹性公网IP右侧操作列 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在弹性公网IP列表中选择一个或多个弹性公网IP，单击页面上方 “批量操作” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  ","excerpt":"同步状态 该功能用于获取弹性公网IP的当前状态。\n单个同步状态\n 在弹性公网IP页面，单击弹性公网IP右侧操作列 “更多” 按钮，选择下拉菜 …","ref":"/zh/docs/onpremise/network/tutorial/vpc/eipoperation/","title":"弹性公网IP其他操作"},{"body":"地理区域相关的资源主要包含以下两种资源：\n  区域：一个地理区域，一般是半径100公里以内的一个区域，端到端延时2ms以内。用户可以基于一个区域内的多个可用区部署同城双活架构或者双机房热备的架构。\n  可用区：一个具有独立供电和网络接入的服务器托管地，一般对应一个IDC。一个可用区内端到端网络延时应该严格在1ms以内。一个区域下一般有2个或2个以上可用区。\n  区域资源是所有资源的root。\n","excerpt":"地理区域相关的资源主要包含以下两种资源：\n  区域：一个地理区域，一般是半径100公里以内的一个区域，端到端延时2ms以内。用户可以基于一个 …","ref":"/zh/docs/multicloud/region/","title":"区域"},{"body":"适用版本：2.10.0及后续版本\n认证服务原理 目前认证服务组件（keystone）的功能主要有三个：\n 提供用户认证体系，向其他系统证明一个用户是否合法，并提供用户的属性。涉及的概念有认证源(identity_providers)，域(domains)，用户(user)和组(group)。 提供资源归属体系，向其他系统提供一套域和项目的资源归属体系。设计的概念有域(domains)，项目(projects)。 提供权限体系，定义用户／组对资源的权限定义。涉及的概念有项目(projects)、角色(roles)和权限策略(policies)。  此外，还提供了服务目录，提供服务以及服务endpoint的URL信息，包括region，service，endpoint等信息。\n为了实现多租户的效果，认证服务提供了域的概念，一个域下有一个完整的用户认证体系和资源和权限体系，从而允许一个域管理员能够完全自治地管理本域的用户、组、项目、角色和权限策略。\n相关的资源和概念如下：\n   Resource 名称 说明     IdentityProvider 认证源 代表认证（域／用户／组）信息的来源，系统内置一个sql的认证源。支持LDAP的认证源。   Domain 域 代表一个认证的子集，包含对应的用户，组，项目，角色，策略。有一个缺省域default。   User 用户 资源Operator。用户是执行某个具体操作的实体，但是并不拥有资源。用户要访问资源，必须加入特定的项目，具备特定的权限。系统有一个默认的账号sysadmin，该用户在系统部署时自动创建。   Group 组 用户的集合。把组加入一个项目，则组内用户自动加入该项目。   Project 项目 资源Owner。资源必须归属于某个项目。系统有一个默认的项目system，该项目在系统启动时自动创建，系统管理员默认加入该项目。   Role 角色 用户在项目的角色，用来确定该用户的角色。用户在一个项目可以由多个角色。用户在该项目下的权限是所有匹配策略定义的权限的最高权限。系统预定义了一些列角色。其中包含admin角色。   Policy 策略 定义了在指定项目和指定角色的用户的权限。系统预定义了一系列策略。    其中，域，项目，用户，组，角色的关系如下图所示：系统中有可以有多个域，每个域下的资源属于诺干项目。用户或者用户的组以特定角色加入项目，从而可以使用项目中的资源。用户和组的认证信息来源于认证源。用户和组在项目内的权限由策略决定。\n","excerpt":"适用版本：2.10.0及后续版本\n认证服务原理 目前认证服务组件（keystone）的功能主要有三个：\n 提供用户认证体系，向其他系统证明一 …","ref":"/zh/docs/auth_security/","title":"认证与权限"},{"body":"设置为公共镜像/自定义镜像 仅系统管理员支持将管理员所在项目的自定义镜像设置为公共镜像或将所在项目的公共镜像设置为自定义镜像。\n 公共镜像：公共镜像默认系统共享，共享范围不可更改。 自定义镜像：自定义镜像默认为私有，可设置共享范围。   在系统镜像页面，单击“自定义镜像”类型的镜像右侧操作列 “更多” 按钮，选择下拉菜单 “设置为公共镜像” 菜单项，将自定义镜像设置为公共镜像。 在系统镜像页面，单击“公共镜像”类型的镜像右侧操作列 “更多” 按钮，选择下拉菜单 “设置为自定义” 菜单项，将公共镜像设置为自定义镜像。  设置共享 该功能用于设置系统镜像的共享范围，仅自定义镜像支持设置共享。\n项目资源的共享范围有五种：\n 不共享（私有）：即项目资源只能本项目的用户可以使用。 项目共享-部分（本域内多项目共享）：即项目资源可以共享到同域下的指定项目（一个或多个），只有本项目和被共享项目下的用户可以使用项目资源。 项目共享-全部（本域共享）：即项目资源可以共享给域下所有项目，即项目所在域的用户都可以使用项目资源。 域共享-部分（多域共享）：即项目资源可以共享到指定域（一个或多个），只有项目资源所在域和共享域下的用户可以使用项目资源。 域共享-全部（全局共享）：即项目资源可以共享给全部域使用，即系统中所有用户都可以使用项目资源。  说明 设置域共享的条件：\n 在Cloudpods平台已开启三级权限。 用户处于管理后台。  设置项目共享的条件：\n 用户处于管理后台或域管理后台。   单个系统镜像设置共享\n 在系统镜像页面，单击镜像右侧操作列 “更多” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数。  当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。  当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。   当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。     单击 “确定” 按钮，完成操作。  批量设置共享\n 在系统镜像列表中选择一个或多个系统镜像，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置共享” 菜单项，弹出设置共享对话框。 配置以下参数。  当共享范围选择为“不共享”时，即项目资源的共享范围为私有，仅本项目的用户可以使用。 当共享范围选择为“项目共享”时，需要选择本域下可共享的项目。  当项目选择同域下的一个或多个项目时，即项目资源的共享范围为项目共享-部分，只有项目资源所在项目和共享项目下的用户可以使用项目资源。 当项目选择全部时，即项目资源的共享范围为项目共享-全部，项目所在域下的用户都可以使用项目资源。   当共享范围选择为“域共享”时，需要选择共享的域。  当域选择其中的一个或多个域时，即项目资源的共享范围为域共享-部分，只有项目资源所在域和共享域下的用户可以使用域资源。 当域选择全部时，即项目资源的共享范围为域共享-全部，系统中的所有用户都可以使用项目资源。     单击 “确定” 按钮，完成操作。  更改项目 该功能用于更改系统镜像的所属项目。\n单个系统镜像更改项目\n 在系统镜像页面，单击镜像右侧操作列 “更多” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 选择域和域下的项目，单击 “确定” 按钮，完成操作。  批量更改项目\n 在系统镜像列表中选择一个或多个系统镜像，单击列表上方 “批量操作” 按钮，选择下拉菜单 “更改项目” 菜单项，弹出更改项目对话框。 选择域和域下的项目，单击 “确定” 按钮，完成操作。  ","excerpt":"设置为公共镜像/自定义镜像 仅系统管理员支持将管理员所在项目的自定义镜像设置为公共镜像或将所在项目的公共镜像设置为自定义镜像。\n 公共镜像： …","ref":"/zh/docs/onpremise/image/tutorial/public/","title":"镜像共享"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/network/","title":"网络"},{"body":"主机是云计算的计算资源，也是云计算产品里使用频率最高，最主要的云产品。围绕主机，有丰富的云资源，例如虚拟磁盘，虚拟网络，安全组，快照，备份等等。\n","excerpt":"主机是云计算的计算资源，也是云计算产品里使用频率最高，最主要的云产品。围绕主机，有丰富的云资源，例如虚拟磁盘，虚拟网络，安全组，快照，备份等 …","ref":"/zh/docs/multicloud/compute/","title":"主机"},{"body":"","excerpt":"","ref":"/zh/docs/monitor_ops/","title":"监控与运维"},{"body":"Web界面操作 导入镜像 该功能用于上传系统镜像文件，用户上传的镜像文件默认为自定义镜像。\n 在系统镜像页面，单击 “上传” 按钮，进入上传镜像页面。 设置以下参数：  指定项目：选择系统镜像的所属项目。 镜像名称：设置镜像的名称，建议名称与镜像的发行版本相关。 发行版、版本号：镜像的发行版本。 CPU架构：支持x86和ARM架构。 系统位数：支持32bit和64bit。请根据实际情况选择CPU架构和系统位数。 上传方式：支持上传镜像文件和输入镜像URL两种方式。虚拟机镜像列表支持上传后缀为QCOW2、VMDK、RAW、VHD格式的镜像。ISO镜像列表仅支持上传ISO后缀的镜像。  上传镜像文件：表示选择当前浏览器可访问的镜像直接上传。 输入镜像URL：通过URL路径来添加镜像。目前仅支持以http、https开头的url链接。格式为 http://path/file 或 https://path/file。      删除镜像 该功能用于删除系统镜像，当系统镜像名称项右侧有图标，表示系统镜像启用了删除保护，无法删除系统镜像，如需删除系统镜像，需要先禁用删除保护。从镜像市场导入的系统镜像删除后将重新回到未导入页面。\n说明  管理员可以删除所有系统镜像。 域管理员只可以删除本域的系统镜像。 项目用户只可以删除本项目的系统镜像。   单个删除\n 在系统镜像页面，单击系统镜像名称右侧带有图标时，单击系统镜像右侧操作列 “更多” 按钮，选择下拉菜单 “设置删除保护” 菜单项，弹出设置删除保护对话框。 选择“禁用”删除保护，单击 “确定” 按钮。 单击镜像右侧操作列的 “更多” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  批量删除\n 在系统镜像列表中勾选一个或多个系统镜像，单击列表上方 “批量操作” 按钮，选择下拉菜单 “设置删除保护” 菜单项，弹出设置删除保护对话框。 选择“禁用”删除保护，单击 “确定” 按钮，批量为系统镜像禁用删除保护。 在系统镜像列表中选择一个或多个镜像，单击列表上方 “批量操作” 按钮，选择下拉菜单 “删除” 菜单项，弹出操作确认对话框。 单击 “确定” 按钮，完成操作。  Climc命令行操作 导入镜像 云平台的 glance 镜像服务支持从外部 url 导入镜像，对应 climc 的子命令为 image-import　。\n# 导入 https://iso.yunion.cn/yumrepo-3.2/images/cirros-0.4.0-x86_64-disk.qcow2 镜像 $ climc image-import --format qcow2 --os-type Linux cirros-test.qcow2 https://iso.yunion.cn/yumrepo-3.2/images/cirros-0.4.0-x86_64-disk.qcow2 使用 image-list 或 image-show 查询导入镜像的状态，变为 active 时表明可以使用。\n下载镜像 如果需要将云平台的镜像导出到本地，就需要用 climc image-download 把 glance 存的镜像下载下来。\n参考 查询镜像 查询你想要下载的镜像，获取镜像 id 或 name。\n下载镜像:\n# OUTPUT 指定镜像的保存路径和文件名称，如/root/test.qcow2 $ climc image-download [--output OUTPUT] \u003cimage_id\u003e 删除镜像 镜像默认启用了删除保护，当镜像确定不用了，需要先通过climc image-update禁用删除保护，再通过 climc image-delete 删除镜像。\n# 禁用镜像删除保护 $ climc image-update --unprotected \u003cimage_id\u003e # 删除镜像 $ climc image-delete \u003cimage_id\u003e ","excerpt":"Web界面操作 导入镜像 该功能用于上传系统镜像文件，用户上传的镜像文件默认为自定义镜像。\n 在系统镜像页面，单击 “上传” 按钮，进入上传 …","ref":"/zh/docs/onpremise/image/tutorial/operation/","title":"其他操作"},{"body":"概念 在使用Cloudpods提供的负载均衡功能时，会用到以下术语\n负载均衡实例（Load Balancer），有时也简称为“实例”。实例与子网关联，创建实例时需要选择子网，实例的IP地址即从该子网中分配。\n一个实例下可以有多个负载均衡监听（Listener）。监听的类型通常有HTTP、HTTPS、TCP、UDP，每个监听还需指定一个端口。实例和监听联合起来即表达了服务面向外部的地址、协议和端口。\n后端服务器组（Backend Group）、后端服务器（Backend）。每个后端服务器指定了服务后端的IP和端口，同一个服务器组中的多个后端服务器提供相同服务。\n监听可指定后端服务器组，当用户访问监听所在地址时，负载均衡的转发节点会将请求转发给服务器组中的具体后端，从而实现负载均衡的效果。\n负载均衡集群是一组转发节点LBAgent的集合，一般情况下一个集群下配置两个LBAgent节点互为主备即可，同一集群下的LBAgent节点的VRRP路由ID必须相同。\n负载均衡转发节点用于监听负载均衡实例，并将客户端的请求根据监听和转发规则转发给后端服务器。同一个集群下可以有多个转发节点，但同一时刻只有一个节点作为Master节点提供转发服务。属于一个集群的节点的VRRP路由ID必须相同。\n节点生命周期管理：\n 新建节点：设置节点的配置参数。 部署节点：将节点的配置文件下发到指定机器，提供转发功能的机器可称为转发实例，当节点状态为Master时，表示集群中的节点可正常提供负载均衡转发服务。 下线节点：当不需要节点提供服务时，可下线节点，将配置文件从转发实例上删除。 删除节点：删除节点的配置文件信息等。  HTTP/HTTPS类型监听 对于HTTP/HTTPS类型的监听，我们还可以创建“转发策略（Listener Rule）”，利用HTTP协议的特点，来进一步复用监听的地址和端口。转发策略包含路径、域名属性，用来匹配来自用户的HTTP请求。每个转发策略又可指定自己的后端服务器组，当请求中的路径、域名匹配时，负载均衡会将其转发到此后端组中的服务器。\n ___ Host: src0.example.com -\u003e srv0 backendGroup / HTTP/80 \\ --- Host: srv1.example.com -\u003e srv1 backendGroup  HTTPS类型的监听需要绑定TLS证书。Cloudpods平台支持RSA、EC2证书\n访问控制 Cloudpods支持创建访问控制列表，列表中指定网络CIDR。监听可与访问控制列表关联，并指定将该列表应用为白名单、黑名单。作为白名单时，仅来源IP为列表中地址的请求被接受，其余请求将被拒绝。黑名单时，列表中的网络将被拒绝服务，列表外的地址可访问。\n","excerpt":"概念 在使用Cloudpods提供的负载均衡功能时，会用到以下术语\n负载均衡实例（Load Balancer），有时也简称为“实例”。实例与 …","ref":"/zh/docs/onpremise/lb/","title":"负载均衡"},{"body":"本文介绍从 v3.6.x 升级到 v3.7.x 的步骤以及注意事项。\n版本升级建议从相邻的版本升级，比如从 v3.2.x 升级到 v3.6.x 需要以下的步骤：\n v3.2.x =\u003e v3.3.x v3.3.x =\u003e v3.4.x v3.4.x =\u003e v3.6.x  直接跨多个版本升级可能会出现问题，建议参考以下的内容选择升级步骤:\n v3.1.x 升级到 v3.2.x v3.2.x 升级到 v3.3.x v3.3.x 升级到 v3.4.x v3.4.x 升级到 v3.6.x  总体来说，升级的步骤如下:\n使用我们编写的 ocboot 工具进行升级，这个工具主要是调用 ansible 来升级集群里面的所有节点。\n 使用 git 拉取最新的 ocboot 代码，切换到 release/3.7 分支 使用 ocboot 进行大版本升级  查看当前版本 可以使用 kubectl 查看当前集群的版本\n# 使用 kubectl 获得当前集群的版本为 v3.6.10 $ kubectl -n onecloud get onecloudclusters default -o=jsonpath='{.spec.version}' v3.6.10 拉取 ocboot 工具 如果本地已经有 ocboot 工具可以跳过此步，只用把代码更新到对应的分支。\n# 本地安装 ansible $ yum install -y ansible python-paramiko # 下载 ocboot 工具到本地 $ git clone -b release/3.7 https://github.com/yunionio/ocboot \u0026\u0026 cd ./ocboot 更新 ocboot 代码 $ git checkout release/3.7 $ git pull 更新 Cloudpods 服务 更新服务的原理是通过本机 ssh 免密码远程登录到集群的第一个控制节点，获取所有节点的信息后，然后通过 ansible 执行 playbook 更新，所以有以下要求：\n 本机能够 ssh 远程登录 PRIMARY_MASTER_HOST PRIMARY_MASTER_HOST 能够 ssh 免密码登录集群中的其它节点  如果没有设置免密码登录，请使用 ssh-copy-id -i ~/.ssh/id_rsa.pub root@PRIMARY_MASTER_HOST 命令把公钥下发到自己环境对应的节点。\n升级的版本号可以到 CHANGELOG release/3.7 页面 查询。\n# 使用 ocboot 相关服务到 v3.7.7 版本 # 该步骤会因为拉取 docker 镜像等待较长时间，请耐心等待 # PRIMARY_MASTER_HOST 是指部署集群的第一个节点的 ip 地址 # 需要本机能够使用 ssh 密钥登录上去 $ ./ocboot.py upgrade \u003cPRIMARY_MASTER_HOST\u003e v3.7.7 # 另外可以使用 `./ocboot.py upgrade --help` 查看其它可选参数 # 比如: # --user 可以指定其它 ssh 用户 # --port 指定 ssh 端口 # --key-file 指定另外的 ssh private key # --as-bastion 可以让 PRIMARY_MASTER_HOST 作为堡垒机部署在内网的宿主机 # 另外可以在升级的过程中可以登录到 PRIMARY_MASTER_HOST， 使用 kubectl 查看对应 pods 的升级情况 $ kubectl get pods -n onecloud --watch ","excerpt":"本文介绍从 v3.6.x 升级到 v3.7.x 的步骤以及注意事项。\n版本升级建议从相邻的版本升级，比如从 v3.2.x …","ref":"/zh/docs/setup/upgrade/","title":"升级相关"},{"body":"当用户部署环境时使用了千兆网络，后续扩展环境部署了万兆网络绑定等，下面介绍如何将该万兆网络加入到平台。\n新建万兆的二层网络  在网络-二层网络页面，单击列表上方 “新建” 按钮，弹出新建新建对话框。 设置以下信息：  指定域：选择二层网络的所属域。 专有网络：选择本地区域以及本地VDC。 可用区：选择二层网络属于的可用区。 名称：设置二层网络的名称，例如wire10g。 带宽：设置二层网络支持的网络带宽，包括百兆（100M）、千兆（1G）、双千兆（2x1G）、万兆（10G）、双万兆（2x10G）、25G、40G、100G。二层网络带宽主要为了统计网络利用率，来确定虚拟机的网络负载情况。   单击 “确定” 按钮。  修改宿主机配置 默认宿主机以网卡对应二层网络，所以需要在宿主机上配置网卡与二层网络的对应关系。\n# 在宿主机上操作 $ vi /etc/yunion/host.conf # 在networks下添加 networks - eth0/br0/192.168.1.1 - bond1/br1/wire10g 配置完成后，需要重启host服务。\n# 找到该宿主机对应的host服务 $ kubectl get pods -n onecloud -o wide |grep host # 如pod名称为default-host-zgrkg $ kubectl delete pods -n onecloud default-host-zgrkg 创建IP子网 在上面创建的二层网络wire10g下创建IP子网，后续创建虚拟机使用这些IP子网，则将自动接入万兆网络。\n","excerpt":"当用户部署环境时使用了千兆网络，后续扩展环境部署了万兆网络绑定等，下面介绍如何将该万兆网络加入到平台。\n新建万兆的二层网络  在网络-二层网 …","ref":"/zh/docs/onpremise/network/faq/addnetwork/","title":"如何在平台添加宿主机网络"},{"body":"简介 从 v3.6.10 版本开始，可以将”Cloudpods“部署到 ARM(AArch64) 架构的机器上，目前我们适配的 Linux 发行版是 Debian 10(buster) 和 统信 UOS 。\n因为服务是容器化运行在 Kubernetes 之上的，为了在 ARM 架构的机器上运行容器，我们使用了 docker buildx 和交叉编译的技术编译打包了同时支持 x86_64 和 arm64 的统一容器镜像。这样的可以让 Kubernetes 屏蔽 CPU 架构的差异性，我们制作的支持多架构的容器镜像可以在不同架构的机器上运行服务，实现 X86 和 ARM 机器混合部署的效果。\n部署 部署方式和原来的 X86 部署并没有太大差别，唯一的区别是我们 X86 上使用的 Linux 发行版是 CentOS 7 ，但在 ARM 架构的机器上需要安装 Debian 10(buster) 或者 统信 UOS 发行版。其它部署方式是一致的，使用我们编写的 https://github.com/yunionio/ocboot 部署工具来统一部署，这个工具里面包含了在 Debian 和 UOS 上部署的 ansible playbook 。\n前提条件  ARM 机器必须提前安装好 Debian 10 或者 UOS 操作系统 ARM 机器能够访问公网 ARM 机器开启 ssh 服务，保证运行 ocboot 的节点能够免密登录待部署的 ARM 机器  单节点 All in One 部署 单节点 All in One 部署是指把整个”Cloudpods“全部部署到一个节点，ARM 的部署和 X86 的部署没有任何区别，准备好环境后，直接参考 All in One 安装 的部署流程即可。\n多节点混合部署 多节点部署请先参考 多节点安装 了解多节点安装准备工作和配置。接下来以一台 X86 和一台 ARM 机器演示混合部署的流程。\n   架构 操作系统 IP 登录用户 角色     X86_64 CentOS 7 10.127.40.252 root mariadb_node \u0026 primary_master_node   ARM64 Debian 10 10.127.100.8 root worker_nodes    编写如下部署配置:\n# 编写配置 $ vim ./config-hybrid.yml # mariadb_node 表示要在 10.127.40.252 这台节点上部署 mariadb 数据库 mariadb_node: hostname: 10.127.40.252 user: root db_user: root db_password: your-sql-password # primary_master_node 表示将 10.127.40.252 作为第一个部署的 master 节点 # 上面会运行Cloudpods必要的控制服务 primary_master_node: onecloud_version: v3.7.0 hostname: 10.127.40.252 user: root db_host: 10.127.40.252 db_user: root db_password: your-sql-password controlplane_host: 10.127.40.252 controlplane_port: \"6443\" # onecloud 登录用户 onecloud_user: admin # onecloud 登录用户密码 onecloud_user_password: admin@123 # as_host 表示将这个 master 节点作为私有云计算节点 as_host: true # worker_nodes 表示在 10.127.100.8 上部署内置私有云计算服务 # 同时会将 worker_nodes 角色的节点作为私有云计算节点 worker_nodes: hosts: # 如果有多台节点，可以在这里按照 YAML 数组的格式填写多个节点的 IP - hostname: 10.127.100.8 user: root controlplane_host: 10.127.40.252 controlplane_port: \"6443\" 使用 ocboot 安装 config-hybrid.yml 配置部署:\n$ ./run.py ./config-hybrid.yml .... # 部署完成后会有如下输出，表示运行成功 # 浏览器打开 https://10.127.40.252 # 使用 admin/admin@123 用户密码登录就能访问前端界面 Initialized successfully! Web page: https://10.127.40.252 User: admin Password: admin@123 部署完成后，登入前端就能发现混合部署的两台 X86 和 ARM 的宿主机，截图如下，aarch64 和 x86_64 分别对应 ARM64 和 X86_64 的 CPU 架构宿主机。\n创建 ARM 虚拟机 基于 ARM 的机器部署完服务后，请先阅读 All in One/FAQ 和 All in One/创建第一台虚拟机 了解创建虚拟机需要创建网络、启用宿主机和导入镜像等步骤。\n导入镜像 对于 ARM(AArch64) 虚拟机来说需要使用对应的 ARM(AArch64) 虚拟机镜像，这里分别导入 ARM64 和 X86_64 的 CentOS 7 虚拟机镜像进行测试。\n ARM64 镜像 CentOS-7-aarch64-GenericCloud-2003.qcow2: https://cloud.centos.org/centos/7/images/CentOS-7-aarch64-GenericCloud-2003.qcow2 X86_64 镜像 CentOS-7-x86_64-GenericCloud-1503.qcow2: https://cloud.centos.org/centos/7/images/CentOS-7-x86_64-GenericCloud-1503.qcow2  导入镜像后的截图如下:\n创建虚拟机 镜像和对应的网路准备完成后，就可以到虚拟机创建界面根据需要选择不同 CPU 架构创建虚拟机。创建界面截图如下：\n分别创建 aarch64 和 x86_64 架构的虚拟机后，可以在虚拟机的列表页面看到每台虚拟机的 CPU 架构，截图如下:\n","excerpt":"简介 从 v3.6.10 版本开始，可以将”Cloudpods“部署到 ARM(AArch64) 架构的机器上，目前我们适配的 Linux  …","ref":"/zh/docs/setup/host-aarch64/","title":"ARM(AArch64) 部署"},{"body":"Architecture Optimize the general architecture of cloudpods\n Seperate on-premise cloud (Cloudpods native cloud, i.e. KVM, Baremetal, VMware) and Cloud Management (Management of other clouds) into different service components On-premise cloud: seperate a storage agent to do storage management tasks On-premise cloud: integrate Rook for shared storage On-premise cloud: store state of baremetal agent in DB Cloud management: allow managing multiple instance of cloudpods native cloud Cloud management: recode resource synchronization, better code structure and finer grain synchronization resource  Mutli-cloud Resource Management Further broaden the coverage of cloud products and providers.\n Support more kinds of resources, such as Azure RDS，Redis，LoadBalance，WebApp, AWS redis Support more cloud providers, such as QingCloud Support read-only mode of cloud account  Unified Monitoring and Alerting A unified Multi-cloud monitoring and alerting solution.\n Adopts Prometheus as the core monitoring solution. Automate monitoring agent installation Secure communication channel for collecting monitoring metrics across multi-cloud boundaries Integrating native alerting on cloud providers  Multi-cloud Application Delivery and Orchastration Based on container technology, develop the capability to deliver applications across multi-cloud.\n Unified management of multiple Kubernetes clusters Deployment of Kubernetes Clusters over multi-cloud environment Multi-cloud application delivery Multi-cloud application migration  ","excerpt":"Architecture Optimize the general architecture of cloudpods\n Seperate …","ref":"/en/docs/roadmap/","title":"ROADMAP"},{"body":"默认部署完成后，访问前端界面，浏览器会提示不安全的 SSL 连接，原因是前端默认使用的是自签发的证书。本文介绍如何使用自定义证书替换掉前端默认的证书。\n操作步骤 假设已经准备好的证书文件为：cert.pem 和 cert.key，域名为 foo.bar.com 。\n1. 将证书导入 kubernetes 集群 kubernetes 使用 secret 这种资源保存证书内容，然后前端服务使用 ingress 引用对应的证书，提供 HTTPS 连接。为了使用自定证书，需要先把证书保存到集群。\n# 创建证书 $ kubectl create secret tls yunion-io-web-secret --key cert.key --cert cert.pem -n onecloud 2. 编辑 ingress 规则 编辑 default-web ingress 规则，引用刚才创建的 yunion-io-web-secret 证书。\n$ kubectl edit ingress -n onecloud default-web ... tls: # 修改这个 secretName 为 yunion-io-web-secret - secretName: yunion-io-web-secret ... 3. 重启 ingress controller 设置完 default-web ingress 规则后，可以重启下 ingress controller 服务，让证书生效。\n$ kubectl get pods -n kube-system | grep traefik | awk '{print $1}' | xargs kubectl delete pods -n kube-system 4. 修改服务 api_server 入口配置 因为使用域名 foo.bar.com 访问，需要修改云平台的默认 api_server 配置，这个配置会影响前端 VNC 连接的地址。将旧的 https:// 访问地址改为 http://foo.bar.com，操作如下：\n$ climc service-config-edit common default: api_server: https://foo.bar.com ... 配置完成后就可以通过 https://foo.bar.com 访问前端了。\n","excerpt":"默认部署完成后，访问前端界面，浏览器会提示不安全的 SSL 连接，原因是前端默认使用的是自签发的证书。本文介绍如何使用自定义证书替换掉前端默 …","ref":"/zh/docs/setup/config-ssl-certs/","title":"更换前端证书"},{"body":"对象存储相关资源有如下几类：\n  Bucket: 对象存储桶\n  Object：对象\n  ","excerpt":"对象存储相关资源有如下几类：\n  Bucket: 对象存储桶\n  Object：对象\n  ","ref":"/zh/docs/multicloud/objectstorage/","title":"对象存储"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/loadbalancer/","title":"负载均衡"},{"body":"除了私有云，多云管理，Kubernets集群管理，监控与运维等服务的相关组件外，Cloudpods还有使用如下组件提供服务：\n","excerpt":"除了私有云，多云管理，Kubernets集群管理，监控与运维等服务的相关组件外，Cloudpods还有使用如下组件提供服务：\n","ref":"/zh/docs/misc/","title":"其他服务组件"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/network/","title":"虚拟网络"},{"body":"","excerpt":"","ref":"/zh/docs/climc/","title":"命令行工具"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/dns/","title":"域名服务"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/db/","title":"数据库"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/cache/","title":"缓存"},{"body":"","excerpt":"","ref":"/zh/docs/apisdk/","title":"API与SDK"},{"body":"本章节介绍Cloudpods SDK的调用方法。目前提供了golang，Java，Python3和Nodejs等四种语言的SDK：\n  Golang SDK\n  Java SDK\n  Python3 SDK\n  NodeJS SDK\n  ","excerpt":"本章节介绍Cloudpods SDK的调用方法。目前提供了golang，Java，Python3和Nodejs等四种语言的SDK： …","ref":"/zh/docs/apisdk/02_sdk/","title":"使用SDK"},{"body":"  哔哩哔哩: https://space.bilibili.com/623431553/\n  知乎： https://www.zhihu.com/org/yun-lian-yi-yun\n  微信\n  ","excerpt":"  哔哩哔哩: https://space.bilibili.com/623431553/\n  知乎： …","ref":"/zh/docs/contact/","title":"联系我们"},{"body":"","excerpt":"","ref":"/zh/docs/release/","title":"发布日志"},{"body":"","excerpt":"","ref":"/en/docs/changelog/","title":"CHANGELOG"},{"body":"","excerpt":"","ref":"/zh/docs/changelog/","title":"CHANGELOG"},{"body":"","excerpt":"","ref":"/zh/docs/multicloud/nas/","title":"共享文件系统（NAS）"},{"body":"架构 优化Cloudpods的代码和架构\n 把本地IDC的云平台管理功能（Cloudpods内置私有云，包含KVM，裸金属和VMware）和多云管理功能（纳管其他平台）分拆为不同的组件 内置私有云：把存储管理功能从Host Agent分离出来，成为一个独立的存储代理服务 内置私有云：集成Rook以提供云原生的共享存储方案 内置私有云：将Baremetal Agent的状态存储在数据库中（现在是在内存中），使得Baremetal Agent可以水平扩展 多云管理：允许管理多个内置私有云实例 多云管理：重构资源同步代码，更好的代码结构，更细粒度地控制资源同步 支持SQLITE数据库  多云资源对接 完善多云对接的广度和深度，接入更多的云平台和云产品\n 支持 Azure RDS，Redis，LoadBalance，WebApp 等 支持 AWS Redis 等 对接 NAS，MongoDB，MQ 等通用云产品 对接有较强客户需求的其他云平台，例如中国移动公有云，青云等  统一监控报警 完善多云监控数据采集的能力，实现多云统一监控报警\n 全面采用 Prometheus 方案，从现有基于 Influxdb 的监控存储方案逐步迁移到 Prometheus 的监控方案，将监控后端采用多实例基于对象存储的分布式 Prometheus 集群方案 基于 Agent 的监控数据的采集，实现自动化安装 Agent ，通过 Agent 采集监控指标，获得更准确，更丰富和更精细化的监控指标，不仅涵盖基础设施（计算网络存储）的监控指标，含可以包含应用的监控指标（nginx，mysql等） 实现跨云监控数据采集，通过代理网关打通监控服务和资源的网络隧道，实现跨云采集内网监控 对接云平台自身的报警API，实现云平台自身报警和 Prometheus 报警的统一  多云应用和编排 以容器为基础，应用为核心，发展多云应用部署和编排能力\n 多 Kubernetes 集群的统一管理：完善多集群容器集群的数据采集和呈现，实现应用在多容器集群的部署和升级 多云容器集群部署：进一步完善在多云环境的容器部署能力，提高可靠性和速度，提高容器集群的性能和稳定性 多云应用部署：基于多容器容器集群实现多云应用部署 多云应用迁移：实现应用在多云环境的迁移  ","excerpt":"架构 优化Cloudpods的代码和架构\n 把本地IDC的云平台管理功能（Cloudpods内置私有云，包含KVM，裸金属和VMware）和 …","ref":"/zh/docs/roadmap/","title":"开发计划"},{"body":"","excerpt":"","ref":"/zh/docs/onpremise/storage/","title":"块存储"},{"body":"云平台权限表 阿里云 Azure     使用主账号登录阿里云控制台，单击页面右上角个人信息，展开下拉菜单，单击 “访问控制” 菜单项 ，进入访问控制页面。   单击左侧菜单栏 “用户管理” 菜单项，进入用户管理页面。   在用户管理页面，单击指定用户操作列 “授权” 按钮，进行授权操作。    如何把资源组的权限授权给应用程序   登录Azure控制台，单击左侧导航栏 “资源组” 菜单项，查看资源组列表，单击需要被授权的资源组名称项，进入资源组管理页面。单击 “访问控制(标识和访问管理)\" 菜单项，进入访问控制页面。   在访问控制页面单击 添加角色分配 按钮，在进入的添加角色分配页面中设置角色为“所有者”，将访问权限分配到对话框为“用户、组或服务主体”、在选择搜索框中搜索上一步骤创建的应用程序的名称，并选中应用程序，单击 “保存” 按钮。   在角色分配页面，查看资源组的权限已授权给了应用程序。\n  如何把订阅的权限授权给应用程序   登录Azure控制台，单击左侧导航栏 “所有服务” 菜单项，在所有服务列表中选择并单击 “订阅” 菜单项，进入订阅列表。   单击需要被授权的订阅，进入订阅的详情页面；   单击[访问控制(标识和访问管理)]，在进入的访问控制页面中单击 “添加角色分配” 按钮，进入添加角色分配页面。   设置角色为“所有”、选择为上面步骤创建的应用程序关键字，并选中应用程序，单击 “保存” 按钮。   在角色分配页面，查看订阅的权限已授权给应用程序。   应用程序API权限设置 请确保应用程序拥有Azure Active Directory API下的以下权限。\n   区域 API权限     Azure中国 Dictionary: Dictionary.Read.All, Dictionary.ReadWrite.All Domain: Domain.Read.All   Azure国际区 Dictionary: Dictionary.Read.All, Dictionary.ReadWrite.All Domain: Domain.Read.All, Domain.ReadWrite.All); Member: Member.Read.Hidden; Policy: Policy.Read.All;    查看及设置步骤\n以Azure国内区为例。\n  在Azure控制台，单击左侧导航栏 “Azure Active Directory/应用注册” 菜单项，进入应用注册页面。\n  在新注册的应用程序详情页面，单击 “API权限” 菜单项，进入API权限页面，查看API权限。\n  检查应用程序的API权限是否满足上面的要求，如不满足，单击 “添加权限” 按钮，弹出请求获取API权限对话框。\n  选择“Azure Active Directory”，应用程序选择“应用程序权限”，并勾选Dictionary和Domian下的所有权限，单击 “添加权限” 按钮，完成配置。\n     ","excerpt":"云平台权限表 阿里云 Azure     使用主账号登录阿里云控制台，单击页面右上角个人信息，展开下拉菜单，单击 “访问控制” 菜单项 ，进 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/aksk_grant/","title":"AccessKey授权"},{"body":"查看虚拟机日志  如图点击结果为失败的日志   常见错误整理 阿里云   Failed to create specification ecs.t5-c1m1.large.processCommonRequest: SDK.ServerError\\nErrorCode: InvalidParameter.NotMatch\\nRecommend: https://error-center.aliyun.com/status/search?Keyword=InvalidParameter.NotMatch\u0026source=PopGw\\nRequestId: BAD90CC0-D76D-589D-9701-1516A6FC3C13\\nMessage: the provided ‘Image -\u003e os_type: CentOS’ and ‘Rule -\u003e os_type: exclude[Ubuntu Debian Aliyun CentOS]’ are not matched.  此返回结果一般是由于选择的套餐和镜像冲突导致的 可以选择非UEFI的镜像避免此错误的发生 Github Issue     ","excerpt":"查看虚拟机日志  如图点击结果为失败的日志   常见错误整理 阿里云   Failed to create specification …","ref":"/zh/docs/multicloud/compute/vminstance/faq/create_failed/","title":"创建虚拟机失败"},{"body":"阿里云 Aws Azure 华为云 腾讯云 UCloud Google云 移动云 ZStack 阿里云飞天私有云(Apsara)  主账号获取AccessKey   使用主账号登录阿里云控制台，单击页面右上角个人信息，展开下拉菜单，单击 _“accesskeys “_** 菜单项进入安全信息管理页面。   在安全信息管理页面，可以查看已存在的AccessKey信息，也可以单击 “创建AccessKey” 按钮新建用户AccessKey，新建AccessKey时阿里云会向账号联系人手机发送验证码，验证通过后才可以创建AccessKey。   Access Key Secret默认不显示，单击”显示 “链接，阿里云将向账号所属的联系人手机发送一个验证码，验证通过后，才会显示Access Key Secret。   RAM子账号如何获取Access Key   使用子账号登录阿里云控制台，单击页面右上角个人信息，展开下拉菜单，单击 “accesskey…” 进入安全信息管理页面。   在安全信息管理页面，单击 “创建AccessKey” 按钮，创建AccessKey。   创建成功后，AccessKeySecret信息只会展示一次，请及时保存。   注意 已创建的AccessKey，无法再查看AccessKeySecret。   注意 私有访问密钥仅创建时可见，请复制另存，如果不慎丢失，重新创建即可。    使用AWS主账号（或拥有Administrator Access管理权限的子账号）登录AWS管理控制台，单击 “IAM” 菜单项，进入IAM控制面板页面。   单击左侧菜单栏 “用户” 菜单项，进入用户管理列表，单击用户名名称项，进入指定用户详情页面。注意需要选择有足够管理权限的用户。   单击“安全证书”页签。   单击 “创建访问密钥” 按钮，在弹出的创建访问密钥对话框中即可看到密钥信息，即密钥ID（Access Key ID）、密码（Access Key Secret）。      登录Azure控制台，单击左侧导航栏 “Azure Active Directory/应用注册” 菜单项，进入应用注册页面。建议新建一个专门的应用程序供云管平台调用Azure API。   单击 新注册 按钮，在进入的注册应用程序页面，设置名称为任意值、设置受支持的账户类型为“仅此目录中的账户”，重定向URI设置为web，并输入以\"https://“或”http://localhost“开头的URL地址，单击 “注册” 按钮。   创建成功后，系统自动显示刚创建的应用程序详情页面。该页面的应用程序（客户端）ID即为所需的客户端ID、目录（租户）ID即为所需的租户ID。   在应用程序详情页面单击 “证书和密码” 菜单项。进入证书和密码页面。单击 “新客户端密码” 按钮。   在弹出的添加客户端对话框输入密码说明、截止日期为“从不”，单击 “添加” 按钮新建客户端密码。   保存成功后，页面密码的值即为需要的客户端密码信息。    新版\n  登录华为云控制台，鼠标悬停在右上角用户名处，选择下拉菜单 “我的凭证” 菜单项，进入我的凭证页面。\n  单击左侧[访问密钥]菜单，在访问密钥页面单击 “新增访问密钥” 按钮。\n  通过验证后，会下载credentials名称的Excel表格，打开表格后即可获取密钥ID（Access Key ID）和密码（Secret Access Key）。   旧版\n 登录华为云控制台，鼠标悬停在右上角用户名处，选择下拉菜单 “我的凭证” 菜单项，进入我的凭证页面。  单击“管理访问密钥”页签，在管理访问密钥页面单击 “新增访问密钥” 按钮。  通过验证后，会下载credentials名称的Excel表格，打开表格后即可获取密钥ID（Access Key ID）和密码（Secret Access Key）。      登录腾讯云控制台，单击右上角 “云产品” 菜单项，在展开的菜单中搜索 “云API密钥” 菜单项，单击进入API密钥管理页面。   在API密钥管理页面获取APP ID、密钥ID（SecretId）、密码（SecretKey）对应的值。      登录 UCloud 控制台，单击顶部 “全部产品” ，搜索或选择 “开放API UAPI” 菜单项 ，进入 API 产品页面；\n  单击“API密钥”页签，进入API 密钥页面。单击 “显示” 按钮，进行手机短信二次验证；\n  通过手机验证后获取公钥和私钥值。\n  若使用子账号，除获取公钥或私钥外，还需要获取project_id，在“访问控制-用户管理-子账户详情”中获取project_id为个人权限中的应用项目的项目ID。\n   纳管指定项目\n  打开“GCP Console中的IAM和管理-IAM页面”页面并登录。\n  单击顶部“选择项目”，选择需要授权的项目。\n  在左侧导航栏中选择“服务账号”，进入指定项目的服务账号页面。\n  单击 “创建服务账号” 按钮，进入创建服务账号页面。\n  配置服务账号名称、服务账号ID、服务账号说明等，单击 “创建” 按钮，创建服务账号并向此服务帐号授予对项目的访问权限。\n  选择Project-Owner或Project-Viewer角色，Owner代表对项目的管理权限，Viewer代表对项目的只读权限，如需云管平台对Google云账号资源进行管理操作，请选择Project-Owner角色，单击 “继续” 按钮。\n  向用户授予访问此服务帐号的权限 (可选)步骤对云管平台无影响，请用户根据需求设置，配置完成后，单击 “继续” 按钮。\n  在服务账号页面，单击新创建的服务账号右侧操作列按钮，单击 “创建密钥” 菜单项。\n  选择密钥类型为“JSON”，单击 “创建” 按钮，下载json格式的密钥文件，内容如下，分别获取project_id、private_key_id、private_key、client_email等内容。\n{ \"type\": \"service_account\", \"project_id\": \"[PROJECT-ID]\", \"private_key_id\": \"[KEY-ID]\", \"private_key\": \"-----BEGIN PRIVATE KEY-----\\n[PRIVATE-KEY]\\n-----END PRIVATE KEY-----\\n\", \"client_email\": \"[SERVICE-ACCOUNT-EMAIL]\", \"client_id\": \"[CLIENT-ID]\", \"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\", \"token_uri\": \"https://accounts.google.com/o/oauth2/token\", \"auth_provider_x509_cert_url\": \"https://www.googleapis.com/oauth2/v1/certs\", \"client_x509_cert_url\": \"https://www.googleapis.com/robot/v1/metadata/x509/[SERVICE-ACCOUNT-EMAIL]\" }   纳管多个项目\n如需要使用上面获取的服务账户的密钥纳管多个项目，可按照以下步骤进行设置。\n  打开“GCP Console中的IAM和管理-IAM页面”页面，选择其他需要纳管的项目。\n  单击顶部 “添加” 按钮，在新成员中添加上面步骤创建的服务账号，并设置角色为Project-Owner或Project-Viewer，Owner代表对项目的管理权限，Viewer代表对项目的只读权限，如需云管平台对Google云账号资源进行管理操作，请选择Project-Owner角色，单击 “保存” 按钮。\n  重复上面的步骤，纳管更多项目。\n  启用相关API 说明 谷歌云的API具有项目属性，当需要纳管谷歌云上多个项目时，需要分别在每个项目中启用相关API。  管理谷歌云需要启用API：\n获取密钥文件后，还需要在Google API库中启用授权项目中的项目资源管理API（Cloud Resource Manager API）和自定义镜像创建机器API（Cloud Build API）。启用API后，用户可在平台管理使用谷歌云。\n  在API库的Cloud Resource Manager API页面中启用授权项目的Cloud Resource Manager API。可通过顶部切换授权项目。   在API库的Cloud Build API页面中启用授权项目的Cloud Build API。可通过顶部切换授权项目。   管理谷歌云RDS需要启用API：\n 在API库的Cloud SQL Admin API页面中启用Cloud SQL Admin API。可通过顶部切换授权项目。      登录移动云控制台，在所有产品中搜索“AK管理”，进入AccessKey管理页面。\n  在AccessKey管理页面创建密钥或查看已有密钥的Access key和Secret key。\n   用户可在ZStack管理平台的[平台管理-Access Key]页面中生成新的Access Key信息或使用已有的Access Key。\n 只有运营管理员和一级组织管理员可以获取组织AccessKey。\n 管理员登录ASCM控制台。 在页面顶部菜单栏上，单击 “企业” 。 在 “企业” 页面的左侧导航栏中，单击 “组织管理” 。 在组织结构中，单击要添加的上级组织后面的设置图标。 在弹出的下拉菜单中，选择 “获取AccessKey” 。 在弹出的对话框中，查看组织Accesskey信息。  飞天云获取Endpoint  在地址栏中，输入ASO的访问地址region-id.aso.intranet-domain-id.com，按回车键。 输入正确的用户名及密码，单击 “登录” ，进入ASO页面。 在页面左侧导航栏中，单击 “产品运维管理 \u003e 产品列表 \u003e 天基” ，跳转到天基控制台页面。 在天基控制台左侧导航栏中选择 “报表” 。 在 “全部报表” 页面搜索 “服务注册变量” 。单击 “服务注册变量” 。 在服务注册变量页面，单击Service旁边的图标，搜索对应产品服务。 在服务的Service Registration列中，单击鼠标右键，选择 “选择更多” 。 在 “详情” 页面查看产品服务的Endpoint地址。    ","excerpt":"阿里云 Aws Azure 华为云 腾讯云 UCloud Google云 移动云 ZStack 阿里云飞天私有云(Apsara)  主账号获 …","ref":"/zh/docs/multicloud/cloudaccounts/tutorial/aksk/","title":"获取云平台AccessKey"},{"body":" 注意 若使用精确权限,请确保添加对象存储权限, 此表会根据云平台纳管功能不断更新。  阿里云 腾讯云 华为云 Aws Google云 Azure    功能 只读权限 可读可写权限     所有功能总和 ReadOnlyAccess AdministratorAccess   虚拟机, 安全组, 镜像, 磁盘, 快照 AliyunECSReadOnlyAccess AliyunECSFullAccess   Vpc, Vpc对等连接, 路由表 AliyunVPCReadOnlyAccess AliyunVPCFullAccess   Eip AliyunEIPReadOnlyAccess AliyunEIPFullAccess   弹性网卡 AliyunVPCNetworkIntelligenceReadOnlyAccess AliyunECSNetworkInterfaceManagementAccess   对象存储 AliyunOSSReadOnlyAccess AliyunOSSFullAccess   NAT AliyunNATGatewayReadOnlyAccess AliyunNATGatewayFullAccess   负载均衡 AliyunSLBReadOnlyAccess\nAliyunALBFullAccess AliyunSLBFullAccess\nAliyunALBFullAccess   RDS AliyunRDSReadOnlyAccess AliyunRDSFullAccess   弹性缓存 AliyunKvstoreReadOnlyAccess AliyunKvstoreFullAccess   操作日志 AliyunActionTrailFullAccess AliyunActionTrailFullAccess   NAS AliyunNASReadOnlyAccess AliyunNASFullAccess   WAF AliyunYundunWAFReadOnlyAccess AliyunYundunWAFFullAccess   IAM AliyunRAMReadOnlyAccess AliyunRAMFullAccess   DNS AliyunDNSReadOnlyAccess\nAliyunPubDNSFullAccess AliyunDNSFullAccess\nAliyunPubDNSFullAccess   账单,余额,费用 AliyunFinanceConsoleReadOnlyAccess AliyunFinanceConsoleFullAccess   监控 AliyunCloudMonitorReadOnlyAccess AliyunCloudMonitorFullAccess        功能 只读权限 可读可写权限     所有功能总和 ReadOnlyAccess AdministratorAccess   虚拟机, 安全组, 镜像, 磁盘, 快照 QcloudCVMReadOnlyAccess QcloudCVMFullAccess   Vpc, Vpc对等连接, 路由表, NAT, 弹性网卡 QcloudVPCReadOnlyAccess QcloudVPCFullAccess   Eip - QcloudEIPFullAccess   对象存储 QcloudCOSReadOnlyAccess QcloudCOSFullAccess   负载均衡 QcloudCLBReadOnlyAccess QcloudCLBFullAccess   RDS QcloudMariaDBReadOnlyAccess\nQcloudCDBReadOnlyAccess\nQcloudSQLServerReadOnlyAccess\nQcloudPostgreSQLReadOnlyAccess QcloudMariaDBFullAccess\nQcloudCDBFullAccess\nQcloudSQLServerFullAccess\nQcloudPostgreSQLFullAccess   弹性缓存 QcloudRedisReadOnlyAccess QcloudRedisFullAccess   操作日志 QcloudAuditReadOnlyAccess QcloudAuditFullAccess   NAS - -   WAF - -   IAM QcloudCamReadOnlyAccess QcloudCamFullAccess   DNS QcloudDNSPodReadOnlyAccess\nQcloudPrivateDNSReadOnlyAccess QcloudPrivateDNSFullAccess\nQcloudDNSPodFullAccess   账单,余额,费用 - QCloudFinanceFullAccess   监控 QcloudMonitorReadOnlyAccess QcloudMonitorFullAccess        功能 只读权限 可读可写权限     所有功能总和 Tenant Guest\nIAM ReadOnlyAccess Tenant Administrator\nSecurity Administrator   虚拟机 ECS ReadOnlyAccess ECS FullAccess   磁盘, 快照 EVS ReadOnlyAccess EVS FullAccess   项目 EPS ReadOnlyAccess EPS FullAccess   镜像 IMS ReadOnlyAccess IMS FullAccess   Vpc, Vpc对等连接, 路由表, 弹性网卡,EIP,安全组 VPC ReadOnlyAccess VPC FullAccess   NAT NAT ReadOnlyAccess NAT FullAccess   对象存储 OBS ReadOnlyAccess OBS Administrator   负载均衡 ELB ReadOnlyAccess ELB FullAccess   RDS RDS ReadOnlyAccess RDS FullAccess   弹性缓存 DCS ReadOnlyAccess DCS FullAccess   操作日志 CTS ReadOnlyAccess CTS FullAccess   NAS SFS ReadOnlyAccess\nSFS Turbo ReadOnlyAccess SFS FullAccess\nSFS Turbo FullAccess   WAF WAF ReadOnlyAccess WAF FullAccess   IAM IAM ReadOnlyAccess Security Administrator   DNS DNS ReadOnlyAccess DNS FullAccess   账单,余额,费用 BSS Operator BSS Administrator   监控 CES ReadOnlyAccess CES FullAccess        功能 只读权限 可读可写权限     所有功能总和 ReadOnlyAccess AdministratorAccess   虚拟机, 磁盘, 安全组, 镜像, 快照, 磁盘, 镜像 AmazonEC2ReadOnlyAccess AmazonEC2FullAccess   项目 - -   Vpc, Vpc对等连接, 路由表, NAT, 弹性网卡,EIP, NAT AmazonVPCReadOnlyAccess AmazonVPCFullAccess   对象存储 AmazonS3ReadOnlyAccess AmazonS3FullAccess   负载均衡 ElasticLoadBalancingReadOnly ElasticLoadBalancingFullAccess   RDS AmazonRDSReadOnlyAccess AmazonRDSFullAccess   弹性缓存 AmazonElastiCacheReadOnlyAccess AmazonElastiCacheFullAccess   操作日志 AWSCloudTrailReadOnlyAccess AWSCloudTrail_FullAccess   NAS AmazonElasticFileSystemReadOnlyAccess AmazonElasticFileSystemFullAccess   WAF AWSWAFReadOnlyAccess AWSWAFFullAccess   IAM IAMReadOnlyAccess IAMFullAccess   DNS AmazonRoute53DomainsReadOnlyAccess AmazonRoute53DomainsFullAccess   账单,费用 AWSBillingReadOnlyAccess Billing   监控 CloudWatchReadOnlyAccess CloudWatchFullAccess        功能 只读权限 可读可写权限     所有功能总和 Viewer Editor   虚拟机, 磁盘, 安全组, 镜像, 快照, 磁盘, 镜像, 负载均衡 Compute Viewer Compute Editor   项目 - -   Vpc, Vpc对等连接, 路由表, NAT, 弹性网卡,EIP, NAT Compute Network Viewer Compute Network Admin   对象存储 Storage Legacy Bucket Reader\nStorage Object Viewer Storage Admin   RDS Cloud SQL Viewer Cloud SQL Admin   弹性缓存 Redis Enterprise Cloud Viewer Redis Enterprise Cloud Admin   操作日志 Logs Viewer Logging Admin   NAS Cloud Filestore Viewer Cloud Filestore Editor   WAF - -   IAM Role Viewer Role Administrator   DNS DNS Reader DNS Administrator   账单,费用 Billing Account Viewer Billing Account Administrator   监控 Monitoring Viewer Monitoring Admin        功能 只读权限 可读可写权限     所有功能总和 Reader Owner   虚拟机, 磁盘, 安全组, 镜像, 快照, 磁盘, 镜像, 负载均衡 - Virtual Machine Contributor\nClassic Virtual Machine Contributor   项目 - -   Vpc, Vpc对等连接, 路由表, NAT, 弹性网卡,EIP, NAT, WAF - Network Contributor,\nClassic Network Contributor   对象存储 Storage Blob Data Reader Storage Blob Data Owner   RDS Cloud SQL Viewer Cloud SQL Admin   弹性缓存 Redis Enterprise Cloud Viewer Redis Enterprise Cloud Admin   NAS Storage File Data SMB Share Reader Storage File Data SMB Share Contributor   WAF - -   IAM - Graph Owner\nResource Policy Contributor   DNS - DNS Zone Contributor\nPrivate DNS Zone Contributor   账单,费用 Billing Reader\nCost Management Reader Cost Management Contributor   监控,操作日志 Monitoring Reader Monitoring Contributor     ","excerpt":" 注意 若使用精确权限,请确保添加对象存储权限, 此表会根据云平台纳管功能不断更新。  阿里云 腾讯云 华为云 Aws Google …","ref":"/zh/docs/multicloud/iam/","title":"多云纳管权限表"},{"body":"新功能 (New Features)  【宿主机】探测 kubelet 驱逐配置，避免内存和存储使用过高触发 k8s 驱逐 【虚拟机】禁止删除后，全局不再支持虚拟机删除操作 【虚拟机】支持 openEuler 发行版 【系统】跳转页面无权限时，自动刷新返回 【多云】支持Azure账号云订阅删除操作 【多云】支持标签与项目映射策略 【费用】二次定价，支持用户对公有云账单进行二次定价，满足用户自定义需求 (企业版) 【费用】支持汇率转化，解决多币种账单无法同时查看问题 (企业版) 【费用】优化建议规则增加建议列表及文案优化 (企业版) 【费用】支持Azure账单标签同步 (企业版) 【系统】增加云账号健康检查开关 (企业版)  优化 (Enhancements)  【虚拟机】支持内置私有云VPC虚拟机一键安装Agent 【监控】监控支持Jenkins应用监控指标查看 【控制台】cloudShell 自适应窗口缩放 【系统】视图切换优化，解决用户多项目及多权限视图切换问题 (企业版) 【费用】优化建议规则增加建议列表及文案优化 (企业版) 【费用】弹窗支持拖拽，避免遮挡当前有效信息 (企业版) 【大屏】数字展示优化，数字过长自动缩小字体 (企业版) 【系统】过滤组件优化 (企业版)  问题修复 (Fixes)  【虚拟机】创建系统盘指定 10T 大小磁盘分配失败 【虚拟机】Windows 10 NTFS 磁盘扩容失败 【虚拟机】创建 VMware 虚拟机存储后端为空 【物理机】部分服务器 MegaRAID SN 为空导致做 RAID 失败 【镜像】修复探测是否支持 UEFI 的逻辑 【多云】同步公有云 RDS 数据库网络信息缺失 【全局】全局搜索结果分页无效问题修复 【告警】告警接收人逻辑修复 【虚拟机】VMware 避免创建无用的二层网络 【容器服务】修复前端 k8s service 和 ingress 创建报错 【系统】用户查看权限偶发报错问题修复 (企业版)  升级方式   开源版本，升级请参考文档：开源版本升级 。\n  企业版本，升级请参考文档：企业版本升级 。\n  CHANGELOG 具体变更请参考 CHANGELOG v3.7.6 。\n","excerpt":"新功能 (New Features)  【宿主机】探测 kubelet 驱逐配置，避免内存和存储使用过高触发 k8s 驱逐 【虚拟机】禁止删 …","ref":"/zh/docs/release/v3_7_6/","title":"v3.7.6 版本发布"},{"body":"新功能 (New Features)  【UI】全局搜索范围增加LB支持 【虚拟机】支持只显示云上的系统标签 【虚拟机】新建主机时，选择平台，过滤相应的宿主机，用宿主机的网络来过滤可用的虚拟机网络 【裸金属】支持安装监控agent，增加硬件温度指标 【硬盘】支持卸载本地数据盘 【硬盘】硬盘列表增加存储类型列显示 【监控】默认策略支持修改静默期 【多云】Azure云账号支持删除订阅 【多云】支持纳管华为私有云 【系统】默认部署 grafana/loki 监控组件，收集系统日志 【费用】账单币种显示 (企业版) 【费用】预算货币支持转换 (企业版) 【认证】角色和权限详情页，名称支持点击查看 (企业版)  优化 (Enhancements)  【部署】k8s 默认使用使用 99 年证书，防止证书失效引起系统服务不稳定 【裸金属】裸机服务器复用物理机ip地址 【镜像】支持根据发行版过滤 【多云】优化公有云虚拟机操作系统类型 【多云】优化腾讯云标签同步 【多云】支持nas标签 【命令行】climc server-ssh 支持登录 vpc 里面的虚拟机 【监控】优化查询指标速度 【UI】首页和导航栏适配手机端 【UI】菜单页面UI样式优化 【费用】账单搜索与标签优化 (企业版) 【部署】CloudBox部署方式更新 (SAAS版)  问题修复 (Fixes)  【虚拟机】修改Esxi转换后的虚拟机的磁盘和网络驱动 【虚拟机】添加网卡选择子网去除host筛选 【虚拟机】修复主机创建系统盘容量检测问题 【虚拟机】修复虚拟机设置网卡不限速未生效的问题 【物理机】修复同一个交换机下多张管理网卡查找顺序错误的问题 【调度】重复计算两次网络可用的数量 【调度】解决配额过滤器没有生效的问题 【系统】避免etcd连接不成功导致其它服务退出 【系统镜像】在系统镜像点击新建虚拟机后应该加上CPU架构的参数 【keystone服务】修复服务启动时概率性出现的端口占用问题 【容器服务】回收部署集群的ssh僵尸进程 【宿主机】默认情况下禁用健康检查程序 【多云】不能通过华为云用户创建时间判断云账号注册时间 【多云】修复阿里飞天资源ID未找到错误 【多云】修复rds备份操作按钮与详情状态不一致 【多云】修复京东云VNC不可用问题 【系统】修复数据加载慢导致的二次定价开关数据异常问题 【系统】不锁定系统帐户用户 【系统】修复SAML用户和配额权限相关的问题 【系统】避免默认 zone，region，wire 等资源改名重复创建的问题 【费用】新建二次定价报错 (企业版)  升级方式   开源版本，升级请参考文档：开源版本升级 。\n  企业版本，升级请参考文档：企业版本升级 。\n  CHANGELOG 具体变更请参考 CHANGELOG v3.7.7 。\n","excerpt":"新功能 (New Features)  【UI】全局搜索范围增加LB支持 【虚拟机】支持只显示云上的系统标签 【虚拟机】新建主机时，选择平 …","ref":"/zh/docs/release/v3_7_7/","title":"v3.7.7 版本发布"},{"body":"作者: 小助手\n本文介绍OCFS2共享集群文件系统，如何配置以及如何在线扩容。\n什么是OCFS2文件系统？ OCFS2是 Oracle Cluster File System Version 2 的缩写，是Oracle公司内部开发的共享磁盘文件系统，于2011年开源，使用GNU GPL协议。\n什么是共享磁盘文件系统呢？我们下面通过解释三个概念的对比来说明：\n 磁盘文件系统  这是最常见的文件系统，构建在本地的磁盘（块存储，Block Storage）之上。通过磁盘文件系统，磁盘上的内容以文件目录的形式进行组织，方便了用户有效使用磁盘上的存储空间。磁盘文件系统的例子有：ext4, xfs等。\n 共享文件系统  共享文件系统通过远端服务器上运行的服务程序访问挂载在远端服务器上的文件系统。例子为：NFS（Network File System），Samba（CIFS）。\n 共享磁盘文件系统  共享磁盘文件系统又叫集群文件系统（Cluster File System），是专门构建在网络共享的磁盘上的文件系统。网络共享磁盘通过SAN（Storage Area Network）被多台主机共同访问，和磁盘文件系统相比，共享磁盘文件系统除了要解决磁盘空间的有效管理问题之外，还要解决文件系统被多台主机同时访问的并发修改问题。因此分布式锁机制是共享磁盘文件系统共有的机制。\n从使用场景来看，三种文件系统的差别很明显：磁盘文件系统直接访问本地磁盘，共享文件系统需要通过共享文件服务访问挂载在服务器上的文件系统，而共享磁盘文件系统则直接访问共享磁盘。\n因此，在网络共享的场景下，通过共享磁盘文件系统访问SAN存储，可以直接访问共享存储设备。访问路径短，效率高，并且能解决多主机并发访问共享存储的问题。\nQEMU通过OCFS2使用共享SAN存储 QEMU使用共享SAN存储有多种方案。常见方案是在需要新建虚拟机磁盘时，使用SAN存储的管理API，分配出卷（LUN）之后，直接将卷挂载给QEMU虚拟机使用。这种方案的优点是QEMU虚拟机直接访问LUN，损耗低，性能好。而缺点是需要使用存储设备特定的API，和设备绑定，不够通用。\n本文介绍通过OCFS2共享磁盘文件系统，将一个大容量的SAN存储卷作为存储QEMU虚拟机虚拟磁盘文件的存储，达到QEMU使用共享储存的目的。\nOCFS2文件系统的配置 准备环境 这一步安装和配置软件\n下载和安装ocfs2-tools的rpm包安装（也依赖net-tools） $ wget http://public-yum.oracle.com/public-yum-ol7.repo -O /etc/yum.repos.d/public-yum-ol7.repo $ rpm --import http://public-yum.oracle.com/RPM-GPG-KEY-oracle-ol7 $ yum install yum-plugin-downloadonly -y $ mkdir /tmp/ocfs2 \u0026\u0026 cd /tmp/ocfs2/ $ yum install --downloadonly --downloaddir=/tmp/ocfs2/ ocfs2-tools net-tools -y 具体操作步骤见官方文档：https://docs.oracle.com/cd/E52668_01/E54669/E54669.pdf, Chapter 23 Oracle Cluster File System Version 2\n安装Cloudpods内核，自带编译了ocfs2文件系统的内核模块 由于OCFS2使用场景较少，在常见发行版的内核中都不会启用OCFS2的内核模块。我们提供了预先编译好的启用了OCFS2的内核安装包：\n$ yum install -y yum-utils # 添加 yunion Cloudpods rpm 源 $ yum-config-manager --add-repo https://iso.yunion.cn/yumrepo-3.6/yunion.repo $ yum install -y kernel-3.10.0-1062.4.3.el7.yn20191203 同时，部署时写配置文件到/etc/modules-load.d/ocfs2.conf，确保内核的ocfs2模块自动加载\n# Load ocfs2.ko at boot ocfs2 安装内核后需要重启生效，重启后检查新的内核已经生效\n$ uname -r 3.10.0-1062.4.3.el7.yn20191203.x86_64 OCFS2配置文件 OCFS2配置简单，只需要在每个要挂载OCFS2的节点上都配置相同的配置文件，申明成员节点即可。\n以下为示例配置文件:\n$ cat /etc/ocfs2/cluster.conf cluster: node_count = 3 \u003c== 集群节点数目 name = ocfs2 \u003c== 集群名字 node: ip_port = 7777 ip_address = 192.168.7.10 number = 0 \u003c== 节点编号 name = client01 \u003c== 节点名字 cluster = ocfs2 node: ip_port = 7777 ip_address = 192.168.7.11 number = 1 name = client02 cluster = ocfs2 node: ip_port = 7777 ip_address = 192.168.7.12 number = 2 name = client03 cluster = ocfs2 初始化ocfs2的配置 $ o2cb.init configure 第一项选yes，集群名称填上面配置文件里的，默认是ocfs2 确保o2cb ocfs2服务启动并设置为开机自启 systemctl enable o2cb ocfs2 至此，OCFS2的软件和配置完成，下一步将格式化磁盘，挂载OCFS2文件系统\n挂载OCFS2文件系统 这一步使用OCFS2格式化网络共享磁盘，并且挂载到各台宿主机上\n在此之前可能要配置SAN存储的多路径multipath(由于行文原因，细节在此省略)，在此之后使用parted分区，格式化成ocfs2（只在一台机器分区格式化，其他机器partprobe就能看到格式化后的分区）并挂载到多台机器\n以下命令在第一个节点执行：\n# 查看多路径multipath磁盘情况 $ multipath -l 使用mkfs.ocfs2格式化分区\n$ parted /dev/dm-0 $ mkfs.ocfs2 /dev/dm-1 $ mount /dev/dm-1 /data 持久化磁盘挂载到/etc/fstab\n# /etc/fstab /dev/dm-1 /opt/cloud/workspace/disks ocfs2 _netdev,defaults 0 0 在其他节点，则只需要执行partprobe探测分区变化，并且挂载分区。也应该修改/etc/fstab，持久化分区的挂载。\nCloudpods使用OCFS2文件系统 在Cloudpods中，通过OCFS2挂载的共享文件系统可以作为GPFS类型的共享存储类型进行管理。通过以下步骤将OCFS2的共享存储注册到Cloudpods，并且用来存储虚拟机用的虚拟磁盘文件。\n注册OCFS2块存储 在【存储-块存储】界面，新建一个GPFS类型的共享存储。\n存储记录创建成功后，选择该存储的“管理宿主机”菜单按钮，在关联存储的宿主机列表，选择“关联宿主机”，将挂载该存储的宿主机节点都注册关联，让Cloudpods平台知道这个共享存储挂载到哪些宿主机的哪个目录下。\n使用OCFS2创建主机虚拟磁盘 以上配置完成后，在新建虚拟机时，就可以选择新建的OCFS2存储作为虚拟磁盘的存储。\nOCFS2文件系统的扩容 首先需要将OCFS2只挂载在第一个节点，将其他节点都卸载。以下操作都只在第一个节点上执行。\n首先，需要在SAN存储扩容该物理卷，这一步在SAN设备上操作，在此不详叙述。\n其次，针对multipath设备，需要rescan该设备下的每个磁盘，让操作系统感知到设备的扩容。\n# 首先执行 multipath -l 查看multipath设备底层的磁盘设备 $ multipath -ll Jun 24 15:09:16 | ignoring extra data starting with '}' on line 16 of /etc/multipath.conf Jun 24 15:09:16 | sdi: alua not supported Jun 24 15:09:16 | sdb: alua not supported Jun 24 15:09:16 | sdc: alua not supported Jun 24 15:09:16 | sdd: alua not supported Jun 24 15:09:16 | sde: alua not supported Jun 24 15:09:16 | sdf: alua not supported Jun 24 15:09:16 | sdg: alua not supported Jun 24 15:09:16 | sdh: alua not supported Jun 24 15:09:16 | sdq: alua not supported Jun 24 15:09:16 | sdj: alua not supported Jun 24 15:09:16 | sdm: alua not supported Jun 24 15:09:16 | sdn: alua not supported Jun 24 15:09:16 | sdo: alua not supported Jun 24 15:09:16 | sdp: alua not supported Jun 24 15:09:16 | sdk: alua not supported Jun 24 15:09:16 | sdl: alua not supported 36488eef100d71ed122ace06c00000001 dm-0 HUAWEI ,XSG1 size=15T features='1 queue_if_no_path' hwhandler='0' wp=rw `-+- policy='service-time 0' prio=-1 status=active |- 1:0:7:1 sdi 8:128 active ready running |- 1:0:0:1 sdb 8:16 active ready running |- 1:0:1:1 sdc 8:32 active ready running |- 1:0:2:1 sdd 8:48 active ready running |- 1:0:3:1 sde 8:64 active ready running |- 1:0:4:1 sdf 8:80 active ready running |- 1:0:5:1 sdg 8:96 active ready running |- 1:0:6:1 sdh 8:112 active ready running |- 2:0:7:1 sdq 65:0 active ready running |- 2:0:3:1 sdj 8:144 active ready running |- 2:0:6:1 sdm 8:192 active ready running |- 2:0:0:1 sdn 8:208 active ready running |- 2:0:2:1 sdo 8:224 active ready running |- 2:0:5:1 sdp 8:240 active ready running |- 2:0:1:1 sdk 8:160 active ready running `- 2:0:4:1 sdl 8:176 active ready running 对每个设备执行：\necho 1 \u003e /sys/class/block/sdi/device/rescan 再执行下面的命令，让操作系统感知到multipath设备的容量变化：\n$ multipathd -k # multipathd\u003e resize map 36488eef100d71ed122ace06c00000001 # ok # multipathd\u003e exit 经过上面步骤，操作系统已经感知到设备的容量变化，这时候需要使用parted扩大分区表，方法是使用parted删除分区再重建分区\n$ parted /dev/dm-0 (parted) unit s (parted) p Model: Linux device-mapper (multipath) (dm) Disk /dev/dm-0: 32212254720s Sector size (logical/physical): 512B/512B Partition Table: gpt Disk Flags: Number Start End Size File system Name Flags 1 2048s 10737416191s 10737414144s disks (parted) rm 1 (parted) mkpart Partition name? []? File system type? [ext2]? Start? 2048 End? 100% device-mapper: create ioctl on 36488eef100d71ed122ace06c00000001p1 part1-mpath-36488eef100d71ed122ace06c00000001 failed: Device or resource busy (parted) p Model: Linux device-mapper (multipath) (dm) Disk /dev/dm-0: 32212254720s Sector size (logical/physical): 512B/512B Partition Table: gpt Disk Flags: Number Start End Size File system Name Flags 1 2048s 32212252671s 32212250624s (parted) quit 扩容分区表之后，再使用 tunefs.ocfs2 扩容文件系统\n# 扩容文件系统 # tunefs.ocfs2 -S /dev/dm-1 经过以上步骤后，文件系统扩容完毕。最后，在其余节点执行partprobe感知设备的容量变化，再重新挂载分区就可以了。\n","excerpt":"作者: 小助手\n本文介绍OCFS2共享集群文件系统，如何配置以及如何在线扩容。\n什么是OCFS2文件系统？ OCFS2是 Oracle …","ref":"/zh/blog/2021/07/02/ocfs2-as-san-filesystem/","title":"QEMU+OCFS2: 使用OCFS2作为虚拟机磁盘文件的SAN存储文件系统"},{"body":"作者: 邱剑\n有用户反馈keystone认证本地用户的接口性能很差，因此做了调研。\n首先使用ab（apache benchmark）模拟用户认证，调用命令行如下：\nab -n 2000 -c 100 -p ~/auth_body.json -T 'application/json' http://192.168.1.248:5000/v3/auth/tokens 执行以上脚本过程中，采集keystone的pprof的profile数据：\nwget http://192.168.1.248:5000/debug/pprof/profile 然后把profile数据文件拷贝到本地，用本地go tool打开一个http服务，查看profile的内容。\ngo tool pprof -http=0.0.0.0:8081 ~/profile 用浏览打开看，得到如下的调用图：\n发现整个profile时间约130秒，调用blowfish encryptBlock的时间花了约101秒。查看代码发现这个是密码校验调用的方法bcrypt.CompareHashAndPassword。也就是说，70%的时间都花在验证本地用户的密码上了。\n为什么这个bcrypt.CompareHashAndPassword方法这么慢呢？搜索google发现这个问答：\nhttps://stackoverflow.com/questions/49437359/why-bcrypt-library-comparehashandpassword-method-is-slow\n其中有一段文字：\nBesides incorporating a salt to protect against rainbow table attacks, bcrypt is an adaptive function: over time, the iteration count can be increased to make it slower, so it remains resistant to brute-force search attacks even with increasing computation power.  因此，采用bcrypt加密用户密码后，为了防止密码被暴力破解，用户认证接口的校验速度是故意地越压越慢的，性能必然不会好。\n","excerpt":"作者: 邱剑\n有用户反馈keystone认证本地用户的接口性能很差，因此做了调研。\n首先使用ab（apache benchmark）模拟用户 …","ref":"/zh/blog/2021/07/01/cloudpods-lb-application-intro/","title":"问题分析：为什么keystone的本地用户认证接口压测性能很差？"},{"body":"作者: 李泽玺\nKubernetes 里面的 Pod 资源是最小的计算单元，抽象了一组（一个或多个）容器。容器也是 Linux 系统上的进程，但基于 Namespace 和 Cgroups(Control groups) 等技术实现了不同程度的隔离。 简单来说 Namespace 可以让每个进程有独立的 PID, IPC 和网络空间。Cgroups 可以控制进程的资源占用，比如 CPU ，内存和允许的最大进程数等等。\n今天主要介绍如何通过 Cgroups 里面的 pids 控制器限制 Kubernetes Pod 容器的最大进程数量。\n场景介绍 之前遇到过这样一个问题，我们的服务会调用执行外部的命令，每调用一次外部命令就会 fork 产生子进程。但是由于代码上的 bug ，没有及时对子进程回收，然后这个容器不断 fork 产生子进程，耗尽了宿主机的进程表空间，最终导致整个系统不响应，影响了其它的服务。\n这种问题除了让开发人员修复 bug 外，也需要在系统层面对进程数量进行限制。所以，如果一个容器里面运行的服务会 fork 产生子进程，就很有必要使用 Cgroups 的 pids 控制器限制这个容器能运行的最大进程数量。\n解决方法 Kubelet 开启 PodPidsLimit 功能 Kubernetes 里面的每个节点都会运行一个叫做 Kubelet 的服务，负责节点上容器的状态和生命周期，比如创建和删除容器。根据 Kubernetes 的官方文档 Process ID Limits And Reservations 内容，可以设置 Kubelet 服务的 –pod-max-pids 配置选项，之后在该节点上创建的容器，最终都会使用 Cgroups pid 控制器限制容器的进程数量。\n我们 Kubernetes 是在 CentOS 7 上使用 kubeadm 部署的 v1.15.9 版本，需要额外设置 SupportPodPidsLimit 的 feature-gate，对应操作如下（其它发行版应该也类似）：\n# kubelet 使用 systemd 启动的，可以通过编辑 /etc/sysconfig/kubelet # 添加额外的启动参数，设置 pod 最大进程数为 1024 $ vim /etc/sysconfig/kubelet KUBELET_EXTRA_ARGS=\"--pod-max-pids=1024 --feature-gates=\\\"SupportPodPidsLimit=true\\\"\" # 重启 kubelet 服务 $ systemctl restart kubelet # 查看参数是否生效 $ ps faux | grep kubelet | grep pod-max-pids root 104865 10.5 0.6 1731392 107368 ? Ssl 11:56 0:30 /usr/bin/kubelet ... --pod-max-pids=10 --feature-gates=SupportPodPidsLimit=true 验证 PodPidsLimit 通过配置 Kubelet 的 –pod-max-pids=1024 选项，限制了一个容器内允许的最大进程数为 1024 个。现在来测试下如果容器内不断 fork 子进程，数目到达 1024 个时会触发什么行为。\n参考 Fork bomb 的内容，可以创建一个 pod，不断 fork 子进程。\n# 创建普通的 nginx pod yaml $ cat \u003c\u003cEOF \u003e test-nginx.yaml apiVersion: v1 kind: Pod metadata: name: test-nginx spec: containers: - name: nginx image: nginx EOF # 创建到 Kubernetes 集群 $ kubectl apply -f test-nginx.yaml # 进入 nginx 容器模拟 fork bomb  $ kubectl exec -ti test-nginx bash root@test-nginx:/# bash -c \"fork() { fork | fork \u0026 }; fork\" environment: fork: retry: Resource temporarily unavailable environment: fork: retry: Resource temporarily unavailable environment: fork: retry: Resource temporarily unavailable 通过进入一个 nginx 容器里面使用 bash 运行 fork bomb 命令，我们会发现当 fork 的子进程达到限制的上限数目后，会报 retry: Resource temporarily unavailable 的错误，这个时候再看下宿主机的 fork 进程数目。\n# 通过在外部宿主机执行下面的命令，会发现 fork 的进程数目接近 1024 个 $ ps faux | grep fork | wc -l 1019 通过以上的实验，发现能够通过设置 Kubelet 的 –pod-max-pids 选项，限制容器类的进程数，避免容器进程数不断上升最终耗尽宿主机资源，拖垮整个宿主机系统。\n原理实现 通过之前描述的解决方法，已经能够限制容器的进程数了。\n现在从代码的层面看下 Kubelet 如何设置 Cgroups pids 控制器。\nKubelet 代码调用 首先来看下 Kubelet 代码里面 –pod-max-pids 是怎么生效的，Kubernetes 的版本为 v1.15.9。\n–pid-max-pids 选项是在 cmd/kubelet/app/options/options.go 里面的 AddKubeletConfigFlags 函数设置的，对应代码如下。\n// cmd/kubelet/app/options/options.go func AddKubeletConfigFlags(mainfs *pflag.FlagSet, c *kubeletconfig.KubeletConfiguration) { ... // 这里定义了 '--pod-max-pids' 的选项  // 对应参数的值通过命令行解析到 kubeletconfig.KubeletConfiguration.PodPidsLimit 里面  fs.Int64Var(\u0026c.PodPidsLimit, \"pod-max-pids\", c.PodPidsLimit, \"Set the maximum number of processes per pod. If -1, the kubelet defaults to the node allocatable pid capacity.\") ... } PodPidsLimit 配置参数解析完成后，kubelet 会在启动的时候把值设置到 ContainerManager 里面，对应代码在 cmd/kubelet/app/server.go 里面的 run 函数，注释如下。\n// cmd/kubelet/app/server.go func run(s *options.KubeletServer, kubeDeps *kubelet.Dependencies, stopCh \u003c-chan struct{}) (err error) { ... kubeDeps.ContainerManager, err = cm.NewContainerManager( ... cm.NodeConfig{ ... // 容器 runtime，默认使用 docker  ContainerRuntime: s.ContainerRuntime, // 使用 Cgroups 控制 pod 的服务质量  CgroupsPerQOS: s.CgroupsPerQOS, // 操作 Cgroups 的驱动，有 cgroupfs 和 systemd 两种  // 我们默认配置使用 systemd 来控制 Cgroups  CgroupDriver: s.CgroupDriver, ... // 这里就是 PodPidsLimit 的设置了，通过刚才 options 的解析  // 赋值到了 ContainerManager.ExperimentalPodPidsLimit 属性  ExperimentalPodPidsLimit: s.PodPidsLimit, // 限制容器 CPU 使用率的参数  EnforceCPULimits: s.CPUCFSQuota, CPUCFSQuotaPeriod: s.CPUCFSQuotaPeriod.Duration, }, ... ...) ... } 初始化 ContainerManager 后，会在 pkg/kubelet/cm/container_manager_linux.go 里面调用 NewPodContainerManager 创建 PodContainerManager，代码如下。\n// pkg/kubelet/cm/container_manager_linux.go ... func (cm *containerManagerImpl) NewPodContainerManager() PodContainerManager { // 默认情况下已经打开了 CgroupsPerQOS 的选项  if cm.NodeConfig.CgroupsPerQOS { // 这里返回 PodContainerManager 接口的实现  return \u0026podContainerManagerImpl{ qosContainersInfo: cm.GetQOSContainersInfo(), subsystems: cm.subsystems, cgroupManager: cm.cgroupManager, // 这里设置 podPidsLimit  podPidsLimit: cm.ExperimentalPodPidsLimit, enforceCPULimits: cm.EnforceCPULimits, cpuCFSQuotaPeriod: uint64(cm.CPUCFSQuotaPeriod / time.Microsecond), } } return \u0026podContainerManagerNoop{ cgroupRoot: cm.cgroupRoot, } } ... 从之前的代码能发现 PodContainerManager 是一个接口，对应的实现在 pkg/kubelet/cm/pod_container_manager_linux.go 里面，与 Cgroup 相关的函数则是 podContainerManagerImpl.EnsureExists 函数。\n// pkg/kubelet/cm/pod_container_manager_linux.go ... // podContainerManagerImpl 就是实现 PodContainerManager 接口的结构体 // EnsureExists 会根据 api 里面 Pod 的定义，在当前系统创建对应容器的 cgroup 配置 func (m *podContainerManagerImpl) EnsureExists(pod *v1.Pod) error { // podContainerName 也会作为 cgroup name，根据 pod 的 QOS 级别和 UUID 生成  // 查看容器是否存在  alreadyExists := m.Exists(pod) if !alreadyExists { // 创建 pod 对应容器的 cgroup  containerConfig := \u0026CgroupConfig{ Name: podContainerName, ResourceParameters: ResourceConfigForPod(pod, m.enforceCPULimits, m.cpuCFSQuotaPeriod), } // 如果启用了 SupportPodPidsLimit feature-gate ，并且 podPidsLimit 大于 0  if utilfeature.DefaultFeatureGate.Enabled(kubefeatures.SupportPodPidsLimit) \u0026\u0026 m.podPidsLimit \u003e 0 { // 这里就会配置 PidsLimit  containerConfig.ResourceParameters.PidsLimit = \u0026m.podPidsLimit } // 调用 cgroupManager 根据 containerConfig 创建对应的 cgroup  if err := m.cgroupManager.Create(containerConfig); err != nil { return fmt.Errorf(\"failed to create container for %v : %v\", podContainerName, err) } } ... return nil } ... 接下来看 cgroupManager.Create 函数的实现，对应代码实现在 pkg/kubelet/cm/cgroup_manager_linux.go 里面的 cgroupManagerImpl.Create。\n... func (m *cgroupManagerImpl) Create(cgroupConfig *CgroupConfig) error { ... resources := m.toResources(cgroupConfig.ResourceParameters) libcontainerCgroupConfig := \u0026libcontainerconfigs.Cgroup{ Resources: resources, } // libcontainer consumes a different field and expects a different syntax  // depending on the cgroup driver in use, so we need this conditional here.  if m.adapter.cgroupManagerType == libcontainerSystemd { // 我们使用 systemd 管理 cgroup ，所以这里会更新下 systemd 对应 cgroup 的配置  updateSystemdCgroupInfo(libcontainerCgroupConfig, cgroupConfig.Name) } else { libcontainerCgroupConfig.Path = cgroupConfig.Name.ToCgroupfs() } if utilfeature.DefaultFeatureGate.Enabled(kubefeatures.SupportPodPidsLimit) \u0026\u0026 cgroupConfig.ResourceParameters != nil \u0026\u0026 cgroupConfig.ResourceParameters.PidsLimit != nil { // 设置 libcontainerCgroupConfig 里面的 PidsLimit  // 这里 PidsLimit 就是一开始参数指定的 --pod-max-pids 的值  libcontainerCgroupConfig.PidsLimit = *cgroupConfig.ResourceParameters.PidsLimit } // 这里根据 cgroup 的配置返回 libcontainercgroups.Manager 接口的实现  // 这里的实现是 systemd 的实现  manager, err := m.adapter.newManager(libcontainerCgroupConfig, nil) if err != nil { return err } // 调用 libcontainer 里面的 cgroups manager Apply 接口把 pod 的 cgroup 配置应用到系统  // 在我们的环境中，这个 Apply 函数会由 libcontainer/cgroupfs/systemd.Manager 实现  if err := manager.Apply(-1); err != nil { return err } ... return nil } ... 在看下最后的 Apply 函数，该函数会调用到 vendor/github.com/opencontainers/runc/libcontainer/cgroups/systemd/apply_systemd.go 里面的 systemd 实现。\n// vendor/github.com/opencontainers/runc/libcontainer/cgroups/systemd/apply_systemd.go ... func (m *Manager) Apply(pid int) error { // 初始化 systemd cgroup 需要的一些变量  var ( c = m.Cgroups // systemd unit name  unitName = getUnitName(c) slice = \"system.slice\" // systemd unit 里面的配置属性  properties []systemdDbus.Property ) ... // Always enable accounting, this gets us the same behaviour as the fs implementation,  // plus the kernel has some problems with joining the memory cgroup at a later time.  properties = append(properties, newProp(\"MemoryAccounting\", true), newProp(\"CPUAccounting\", true), newProp(\"BlockIOAccounting\", true)) ... if c.Resources.Memory != 0 { // 设置 cgroup memory limit  properties = append(properties, newProp(\"MemoryLimit\", uint64(c.Resources.Memory))) } if c.Resources.CpuShares != 0 { // 设置 cgroup cpu shares  properties = append(properties, newProp(\"CPUShares\", c.Resources.CpuShares)) } ... if c.Resources.BlkioWeight != 0 { // 设置 cgroup block io weight  properties = append(properties, newProp(\"BlockIOWeight\", uint64(c.Resources.BlkioWeight))) } if c.Resources.PidsLimit \u003e 0 { // 这里设置了本文关注的 PidsLimit 参数  // 发现会对应 systemd 里面的 TasksAccounting 和 TasksMax 属性  properties = append(properties, newProp(\"TasksAccounting\", true), newProp(\"TasksMax\", uint64(c.Resources.PidsLimit))) } ... // 通过 systemdDbus 根据之前的 cgroup 设置创建对应的 unit  if _, err := theConn.StartTransientUnit(unitName, \"replace\", properties, statusChan); err == nil { ... } // 最后加入 Cgroups  if err := joinCgroups(c, pid); err != nil { return err } ... } ... Systemd Cgroup slice 通过对 Kubelet 调用 libcontainer，最后由 systemd 创建 pod 容器对应 cgroup unit 的代码调用分析，在这里看下对应 pod 的 systemd unit 配置。\n从之前代码看，最终生成的 systemd unit 和 cgroup 和 pod 的 uid 和 qosClass 有关系，所以先通过以下的命令拿到 pod 的 uid 和 qosClass。\n$ kubectl get pods test-nginx -o yaml | grep -E 'uid|qos' uid: 2ac1e32c-d8d6-4533-8eab-d04d60465065 qosClass: BestEffort 然后找到对应的 systemd unit .slice 文件。\n# uid 取前 8 位，qosClass 小写 # 找到对应的 kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice $ systemctl | grep 2ac1e32c | grep besteffort kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice loaded active active libcontainer container kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice # 查看对应 slice 的配置 $ systemctl status kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice ● kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice - libcontainer container kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice Loaded: loaded (/run/systemd/system/kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice; static; vendor preset: disabled) Drop-In: /run/systemd/system/kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice.d └─50-BlockIOAccounting.conf, 50-CPUAccounting.conf, 50-CPUShares.conf, 50-DefaultDependencies.conf, 50-Delegate.conf, 50-Description.conf, 50-MemoryAccounting.conf, 50-TasksAccounting.conf, 50-TasksMax.conf, 50-Wants-kubepods-besteffort\\x2eslice.conf Active: active since Fri 2021-06-25 16:21:25 CST; 7min ago Tasks: 6 (limit: 1024) Memory: 6.8M CGroup: /kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice ├─docker-2d151786c9985db74632c09412207fa99755473fde93d09920604e097f25a2b7.scope │ ├─32662 nginx: master process nginx -g daemon off; │ ├─32703 nginx: worker process │ ├─32704 nginx: worker process │ ├─32705 nginx: worker process │ └─32706 nginx: worker process └─docker-966047566d9e90d9ef64126b605101c174d750ec0cde3d3a83c5b313c7af9a21.scope └─32544 /pause Jun 25 16:21:25 centos7-oc-dev systemd[1]: Created slice libcontainer container kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice. # 通过 systemctl status 能发现 50-TasksMax.conf 的文件 # 从之前的代码分析，发现 PodPidsLimit 会对应到 systemd 的 TasksMax 属性 # 现在在看下这个文件的内容 $ cat /run/systemd/system/kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice.d/50-TasksMax.conf [Slice] TasksMax=1024 # TasksMax 设置为了 1024 ，限制了这个进程最大子进程（Task）数量 Cgroup FS 查看之前的 vendor/github.com/opencontainers/runc/libcontainer/cgroups/systemd/apply_systemd.go 代码，发现在创建完 pod 容器对应的 systemd cgroup slice 后，还会调用一次 joinCgroups 这个函数。这个函数会使用 Cgroup FS 原生的方法，在 /sys/fs/cgroup 里面创建对应 pod 容器的 group 。\n所以再看下 Cgroup FS 里面 pod 设置 pid limit 的配置。\n# 找到 Cgroup FS pids 控制器的挂载点 $ cgroup on /sys/fs/cgroup/pids type cgroup (rw,nosuid,nodev,noexec,relatime,pids) # 看下 /sys/fs/cgroup/pids 目录下的文件 $ ls -alh /sys/fs/cgroup/pids ... # 发现有一个由 Kubelet 创建的 kubepods.slice drwxr-xr-x 4 root root 0 Jun 25 04:49 kubepods.slice ... # 再通过查看 /sys/fs/cgroup/pids/kubepods.slice 目录 # 会发现 kubepods-besteffort.slice 和 kubepods-burstable.slice 两个目录 # 分别对应 pod 容器的 QOS 级别 $ ls -alh /sys/fs/cgroup/pids/kubepods.slice ... drwxr-xr-x 42 root root 0 Jun 25 16:21 kubepods-besteffort.slice drwxr-xr-x 8 root root 0 Jun 25 04:49 kubepods-burstable.slice ... # 结合刚才的代码片段，也可以想到原生 Cgroup FS 的目录和 systemd 的应该是差不多的层级 # 现在直接用 find 命令查看 pids 控制器下面的 cgroup 设置 $ find /sys/fs/cgroup/pids/kubepods.slice -type f | grep pod2ac1e32c ... # 能发现 pids.current 和 pids.max 两个 cgroup 的配置 # pids.current 表示当前 pod 里面的进程（Task）数量 /sys/fs/cgroup/pids/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice/pids.current # pids.max 则表示 pod 里面能运行的进程（Task）上限 /sys/fs/cgroup/pids/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice/pids.max ... # 查看 pod pids.max 设置，结果为 1024 $ cat /sys/fs/cgroup/pids/kubepods.slice/kubepods-besteffort.slice/kubepods-besteffort-pod2ac1e32c_d8d6_4533_8eab_d04d60465065.slice/pids.max 1024 另外这篇内核文档 Process Number Controller 对 cgroup pids 控制器的使用进行了介绍，可以了解下。\n","excerpt":"作者: 李泽玺\nKubernetes 里面的 Pod 资源是最小的计算单元，抽象了一组（一个或多个）容器。容器也是 Linux 系统上的进 …","ref":"/zh/blog/2021/06/25/cgroups-kubernetes-pid-limits/","title":"使用 Cgroups 限制 Kubernetes Pod 进程数"},{"body":"作者: 李泽玺\nLinux 上虚拟机 GPU 透传需要使用 vfio 的方式。主要是因为在 vfio 方式下对虚拟设备的权限和 DMA 隔离上做的更好。但是这么做也有个缺点，这个物理设备在主机和其他虚拟机都不能使用了。\nqemu 直接使用物理设备本身命令行是很简单的，关键在于事先在主机上对系统、内核和物理设备的一些配置。\n单纯从 qemu 的命令行来看，其实和普通虚拟机启动就差了最后那个 -device 的选项。这个选项也比较容易理解，就是把主机上的设备 0000:00:01.0 传给了虚拟机使用。\n$ qemu-system-x86_64 -m 4096 -smp 4 --enable-kvm \\  -drive file=~/guest/fedora.img \\  -device vfio-pci,host=0000:00:01.0 系统及硬件准备 BIOS中打开IOMMU 设备直通在 x86 平台上需要打开 iommu 功能。这是 Intel 虚拟技术 VT-d(Virtualization Technology for Device IO) 中的一个部分。有时候这部分的功能没有被打开。\n打开的方式在 BIOS 设置中 Security-\u003eVirtualization-\u003eVT-d 这个位置。当然不同的 BIOS 位置可能会略有不同。记得在使用直通设备前要将这个选项打开。\n内核配置勾选IOMMU INTEL_IOMMU │ Location: │ │ -\u003e Device Drivers │ │ (2) -\u003e IOMMU Hardware Support (IOMMU_SUPPORT [=y]) 内核启动参数enable IOMMU BIOS 中打开，内核编译选项勾选还不够。还需要在引导程序中添加上内核启动参数\n# 对应编辑 /etc/default/grub, 设置 GRUB_CMDLINE_LINUX= $ cat /etc/default/grub ... GRUB_CMDLINE_LINUX=\"intel_iommu=on iommu=pt vfio_iommu_type1.allow_unsafe_interrupts=1 rdblacklist=nouveau nouveau.modeset=0\" ... # 重新生成 grub 引导配置文件 $ grub2-mkconfig -o /boot/grub2/grub.cfg # 将vfio相关 module 设置为开机load $ cat /etc/modules-load.d/vfio.conf vfio vfio_iommu_type1 vfio_pci vfio_virqfd Setting up IOMMU Kernel parameters\n找到 nvidia GPU BusID record PCI addresses and hardware IDs of the GPU\n$ lspci -k | grep -i nvidia -A 3 41:00.0 VGA compatible controller: NVIDIA Corporation GP107 [GeForce GTX 1050 Ti] (rev a1) Subsystem: Device 1b4c:11bf Kernel driver in use: vfio-pci Kernel modules: nouveau 41:00.1 Audio device: NVIDIA Corporation GP107GL High Definition Audio Controller (rev a1) Subsystem: Device 1b4c:11bf Kernel driver in use: snd_hda_intel Kernel modules: snd_hda_intel # pci address =\u003e 41:00.0,41:00.1 # device id =\u003e 1b4c:11bf # 这里找到了两张 nvidia 卡，它们的 device id 都是 1b4c:11bf, 一张是 Audio device # 这样是不能 passthrough 进去的，因为: # vfio-pci use your vendor and device id pair to identify which device they need to bind to at boot, # if you have two GPUs sharing such an ID pair you will not be able to get your passthough driver to bind with just one of them # 使用下面的脚本解决这种情况： $ cat /usr/bin/vfio-pci-override.sh #!/bin/sh for i in $(find /sys/devices/pci* -name boot_vga); do if [ $(cat \"$i\") -eq 0 ]; then GPU=\"${i%/boot_vga}\" AUDIO=\"$(echo \"$GPU\" | sed -e \"s/0$/1/\")\" echo \"vfio-pci\" \u003e \"$GPU/driver_override\" if [ -d \"$AUDIO\" ]; then echo \"vfio-pci\" \u003e \"$AUDIO/driver_override\" fi fi done modprobe -i vfio-pci # 把脚本传入 /etc/modprobe.d/vfio.conf $ cat /etc/modprobe.d/vfio.conf install vfio-pci /usr/bin/vfio-pci-override.sh options vfio-pci ids=10de:1c82 disable_vga=1 使用 vfio 管理 GPU # /etc/modprobe.d/vfio.conf, ids 为 lspci 找到的 hardware id, 多个设备的话用','分割 $ cat /etc/modprobe.d/vfio.conf options vfio-pci ids=10de:134d disable_vga=1 # 禁用NVIDIA nouveau 开源驱动, /etc/modprobe.d/blacklist.conf $ cat /etc/modprobe.d/blacklist.conf blacklist nouveau # kvm 模块配置, /etc/modprobe.d/kvm.conf $ cat /etc/modprobe.d/kvm.conf options kvm ignore_msrs=1 重启系统，启动完成后查看当前的 nvidia GPU 是否被 vfio-pci 模块使用, 确认IOMMU功能确实打开。\n$ dmesg | grep -e DMAR -e IOMMU | grep enabled # 如果能搜索到 DMAR: IOMMU enabled # 表示上述配置成功。 # 查看 GPU 是否被 vfio-pci 使用 # 另外注意检查看看 41:00.1 Audio device 是否也被 vfio-pci 使用 $ lspci -k | grep -i -e nvidia -A 3 41:00.0 VGA compatible controller: NVIDIA Corporation GP107 [GeForce GTX 1050 Ti] (rev a1) Subsystem: Device 1b4c:11bf Kernel driver in use: vfio-pci # GTX 1050 Ti GPU 被 vfio-pci 使用 Kernel modules: nouveau 41:00.1 Audio device: NVIDIA Corporation GP107GL High Definition Audio Controller (rev a1) Subsystem: Device 1b4c:11bf Kernel driver in use: vfio-pci # 发现 Audio device 也被 vfio-pci 使用了 Kernel modules: snd_hda_intel ... # list GPU IOMMU group $ find /sys/kernel/iommu_groups/ -type l | grep 41:00 /sys/kernel/iommu_groups/27/devices/0000:41:00.0 /sys/kernel/iommu_groups/27/devices/0000:41:00.1 # 找到IOMMU Group 管理的 PCI 设备 #!/bin/bash shopt -s nullglob for d in /sys/kernel/iommu_groups/*/devices/*; do n=${d#*/iommu_groups/*}; n=${n%%/*} printf 'IOMMU Group %s ' \"$n\" lspci -nns \"${d##*/}\" done 使用 qemu 透传 nvidia GPU 准备好centos7镜像，然后在虚拟机里面安装 nvidia 官方闭源驱动和 cuda SDK\n# 我从服务器上拷贝过来的是 vmdk 的镜像，先把它转换成 qcow2 的格式 $ /usr/local/qemu-2.9.0/bin/qemu-img convert -f vmdk -O qcow2 centos-7.3.1611-20180104.vmdk centos-7.3.1611-20180104.qcow2 # 使用 qemu 启动，注意-cpu 需要 kvm=off 参数 # kvm=off will hide the kvm hypervisor signature, this is required for NVIDIA cards # since its driver will refuse to work on an hypervisor and result in Code 43 on windows $ cat startvm.sh #!/bin/sh /usr/local/qemu-2.9.0/bin/qemu-system-x86_64 -enable-kvm \\ -m 4096 -cpu host,kvm=off -smp 4,sockets=1,cores=4,threads=1 \\ -drive file=./centos-7.3.1611-20180104.qcow2 \\ -device vfio-pci,host=41:00.0,multifunction=on,addr=0x16 \\ -device vfio-pci,host=41:00.1 \\ -net nic,model=e1000 -net user,hostfwd=tcp::5022-:22 \\ -vnc :1 # 这台虚拟机开了vnc和ssh 端口转发，可以使用vnc或者ssh访问 # 从host进入虚拟机 $ ssh 127.0.0.1 -p 5022 # 查看虚拟机透传进来的显卡 $ lspci -k | grep -i nvidia -A 3 00:04.0 Audio device: NVIDIA Corporation Device 0fb9 (rev a1) Subsystem: Device 1b4c:11bf Kernel driver in use: snd_hda_intel Kernel modules: snd_hda_intel 00:16.0 VGA compatible controller: NVIDIA Corporation GP107 (rev a1) Subsystem: Device 1b4c:11bf Kernel modules: nouveau 安装nvidia 驱动和 Cuda nvidia 驱动需要从官方下载，如果先安装 cuda 的话会一同安装 nvidia 驱动。 接下来采用虚拟机先安装驱动再安装 cuda 的步骤。\n参考： installing-nvidia-drivers-centos-7 NVIDIA CUDA GETTINGS STARTED GUIDE FOR LINUX\n安装 nvidia 驱动 下载地址：http://www.nvidia.com/object/unix.html\n# update 后如果更新内核，需要重启 $ yum -y update # 安装 gcc、make、glibc等工具和库 $ yum -y groupinstall \"Development Tools\" $ yum -y install kernel-devel # Download the latest NVIDIA driver for unix. $ wget http://us.download.nvidia.com/XFree86/Linux-x86_64/390.42/NVIDIA-Linux-x86_64-390.42.run $ yum -y install epel-release $ yum -y install dkms # Edit /etc/default/grub. Append the following to “GRUB_CMDLINE_LINUX” rd.driver.blacklist=nouveau nouveau.modeset=0 # Generate a new grub configuration to include the above changes. $ grub2-mkconfig -o /boot/grub2/grub.cfg # Edit/create /etc/modprobe.d/blacklist.conf and append: blacklist nouveau # Backup your old initramfs and then build a new one $ mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r)-nouveau.img $ dracut /boot/initramfs-$(uname -r).img $(uname -r) # 重启again # Run the NVIDIA driver installer and enter yes to all options. $ sh NVIDIA-Linux-x86_64-*.run # 装好后再一次重启，lspci -k 看下gpu使用的驱动是否是nvidia $ lspci -k | grep -i nvidia -A 3 00:04.0 Audio device: NVIDIA Corporation GP107GL High Definition Audio Controller (rev a1) 00:16.0 VGA compatible controller: NVIDIA Corporation GP107 [GeForce GTX 1050 Ti] (rev a1) Kernel driver in use: nvidia # 发现已经使用nvidia驱动 Kernel modules: nouveau, nvidia_drm, nvidia # 执行 nvidia-smi 看下输出和温度 $ nvidia-smi Thu Mar 15 01:31:09 2018 +-----------------------------------------------------------------------------+ | NVIDIA-SMI 390.42 Driver Version: 390.42 | |-------------------------------+----------------------+----------------------+ | GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC | | Fan Temp Perf Pwr:Usage/Cap| Memory-Usage | GPU-Util Compute M. | |===============================+======================+======================| | 0 GeForce GTX 105... Off | 00000000:00:16.0 Off | N/A | | 40% 32C P0 N/A / 100W | 0MiB / 4040MiB | 0% Default | +-------------------------------+----------------------+----------------------+ +-----------------------------------------------------------------------------+ | Processes: GPU Memory | | GPU PID Type Process name Usage | |=============================================================================| | No running processes found | +-----------------------------------------------------------------------------+ $ nvidia-smi -q -d TEMPERATURE ==============NVSMI LOG============== Timestamp : Thu Mar 15 01:32:42 2018 Driver Version : 390.42 Attached GPUs : 1 GPU 00000000:00:16.0 Temperature GPU Current Temp : 32 C GPU Shutdown Temp : 102 C GPU Slowdown Temp : 99 C GPU Max Operating Temp : N/A Memory Current Temp : N/A Memory Max Operating Temp : N/A 安装 cuda 下载地址： https://developer.nvidia.com/cuda-downloads 这里选择 runfile，以后为了方便也可以选择 rpm(network)的方式，会自动帮我们安装 nvidia 驱动\n$ wget https://developer.nvidia.com/compute/cuda/9.1/Prod/local_installers/cuda_9.1.85_387.26_linux # Say no to installing the NVIDIA driver. # The standalone driver you already installed is typically newer than what is packaged with CUDA. # Use the default option for all other choices. $ sh cuda_*.run # 添加 CUDA 相关的环境变量 export PATH=$PATH:/usr/local/cuda/bin export LD_LIBRARY_PATH=/usr/local/cuda/lib64:$LD_LIBRARY_PATH # make samples $ cd ~/NVIDIA_CUDA-9.1_Samples; make -j 4 $ cd bin/x86_64/linux/release $ ./deviceQuery # 查询gpu信息 ./deviceQuery Starting... CUDA Device Query (Runtime API) version (CUDART static linking) Detected 1 CUDA Capable device(s) Device 0: \"GeForce GTX 1050 Ti\" CUDA Driver Version / Runtime Version 9.1 / 9.1 CUDA Capability Major/Minor version number: 6.1 Total amount of global memory: 4040 MBytes (4236312576 bytes) ( 6) Multiprocessors, (128) CUDA Cores/MP: 768 CUDA Cores GPU Max Clock rate: 1481 MHz (1.48 GHz) Memory Clock rate: 3504 Mhz Memory Bus Width: 128-bit L2 Cache Size: 1048576 bytes ... $ ./bandwidtTest # 使用 cuda 测试gpu bandwidth Running on... Device 0: GeForce GTX 1050 Ti Quick Mode Host to Device Bandwidth, 1 Device(s) PINNED Memory Transfers Transfer Size (Bytes) Bandwidth(MB/s) 33554432 9719.0 Device to Host Bandwidth, 1 Device(s) PINNED Memory Transfers Transfer Size (Bytes) Bandwidth(MB/s) 33554432 9215.8 Device to Device Bandwidth, 1 Device(s) PINNED Memory Transfers Transfer Size (Bytes) Bandwidth(MB/s) 33554432 95525.1 Result = PASS NOTE: The CUDA Samples are not meant for performance measurements. Results may vary when GPU Boost is enabled. ","excerpt":"作者: 李泽玺\nLinux 上虚拟机 GPU 透传需要使用 vfio 的方式。主要是因为在 vfio 方式下对虚拟设备的权限和 DMA 隔离 …","ref":"/zh/blog/2021/06/07/nvidia-gpu-passthrough-record/","title":"使用Linux vfio将Nvidia GPU透传给QEMU虚拟机"},{"body":"作者: 高现起\n大家好，我是高现起，目前在负责云联壹云融合云管理平台的产品工作，今天很高兴由我给大家介绍一下最新发布的3.7版本的新功能。\n我将围绕以下目录展开我今天的内容：\n 产品简介 3.7版本新功能介绍 功能规划  一、产品简介 目前，企业的IT资源属于无处不在的状态，根据 Flexera 2020 云状态（原 RightScale 云状态报告）报告，93%的企业实施了多云战略。虽然这一调查的依据是全球750家企业的云决策者，但是从国内的实际情况来说，数字可能没有那么大，趋势还是有的，就是多云已经是更多企业的选择了。\n多云环境，我们又统称为异构IT基础设施，那么这种异构IT基础设施在给客户带来更优性能更优成本的同时，也会带来一些新的问题，例如我下边列举的5种不同角色的用户所遇到的问题：\n 运维工程师/开发工程师-如何统一管理所有的云计算资源？ 财务专员-如何获取统一易读的公有云账单？ 运维主管/开发主管-如何及时获取资源整体的使用情况？ 财务主管-如何及时获取IT资源成本的使用结构？ CTO/CIO-如何提高IT资源的ROI（投资回报率）？  我们早在2017年就关注到多云带来客户的问题，开始做云联壹云这款产品，希望能够帮助企业很好的解决这些问题。\n云联壹云是一站式管理云计算资源的解决方案，希望帮助客户在一个地方管理本地IDC、私有云、公有云等IT资源，整体提高企业IT基础设施的管理效率。\n从产品架构图上，我们可以看出，底层是一些异构资源，上层是一些应用或服务，云联壹云处于承上启下的作用，向下屏蔽异构的差异，向上提供一致的资源管理能力。\n以上是我们最新版本也就是3.7版本的功能概览。\n最底层是异构资源，中层就是我们云管理平台的功能概览，上层应用和服务。云管理平台的底层是多云的适配层，往上是基础的资源管理，包括计算、存储、网络、PaaS服务等，再往上是针对企业客户做的三大块的功能，依次是权限管理、统一监控和报警、成本管理包括私有云的计量计费公有云的账单分析和成本优化等等，面向用户层，我们针对不同的用户有不同的用户界面，包括管理员的系统管理视图，租户的租户管理视图，普通用户的项目视图，针对运维人员的climc命令行工具，针对开发人员，我们也有丰富的REST API以及各个开发语言的SDK。\n这款产品能够带给客户3种价值：\n 省人省事-一站式采买、批量操作、一次配置，全网生效、统一获取易读账单 省钱-算好账、摊好钱、节成本 安全-统一认证、统一授权、免密登录  总而言之，云联壹云希望帮助用户解决异构IT基础设施带来的问题，充分发挥异构IT基础设施的优势。\n二、3.7版本新功能介绍 3.7版本增加了不下30多项功能或更新，由于时间关系，今天我主要给大家介绍这5个方面的功能：\n 多云资源对接 多云账单管理 多云监控告警 多云权限管理 标签管理  1. 多云资源对接 在3.7版本，我们不断围绕客户需求，支持更多公有云资源的纳管：\n AWS平台对接Redis Azure平台对接RDS 阿里云和华为云NAS文件存储对接 移动云对接 阿里云、华为云NAT网关支持  2. 多云账单管理 2.1 支持AWS的预留实例分析，包括RI推荐及RI覆盖率，帮助客户用好RI，节约成本\n2.2 支持价格对比功能，同配置全网比价，帮助客户发现便宜资源\n2.3 支持所有平台费用报告及定期发送\n2.4 支持预算管理功能，并且可以配置预算告警，防止费用超支\n2.5 费用优化迭代，更多纬度节省费用，帮助用户发现更多可以优化成本的途径\n3. 多云监控告警 3.1 支持自定义监控面板，一次定义，随时查看\n3.2 报警策略支持函数及静默期设置，有效避免毛刺、报警泛滥等问题\n3.3 支持自动化安装监控插件，可显示内存使用率等更多监控指标\n3.4 大屏增加地图，可根据资源城市进行分布\n3.5 增加监控总览，可以查看告警情况及平台各纬度使用情况\n4. 多云权限管理  在一个地方创建及管理所有云平台的子账号，并分配权限 通过云管壹云控制台可一键跳转免密登录公有云控制台 员工离职，自动注销对应的公有云账号  5. 标签管理  标签支持CMP与公有云平台双向同步 标签搜索增强，支持特殊符号复杂搜索  除以上5大功能的更新外，我们其实还有很多细节更新，在这里就不在展开给大家介绍，感兴趣的同学可以看一下以下总结\n三、功能规划 我们近期的功能规划主要是以下6个方面\n 京东云对接，我们有客户对京东云资源的纳管有需求 Azure RI\u0026CPP使用率、覆盖率以及推荐 产品内置负载均衡支持VPC网络（这个是我们私有云的功能） 公有云账单的二次定价，我们很多MSP厂商的需求 公有云WAF产品对接 监控报警的迭代，后期也会增加监控数据报表的功能  总结 好的，今天直播咱们就到这里，咱们简单的总结一下今天的内容：\n产品简介，在多云趋势的背景下，云联壹云产品希望帮助用户解决异构资源管理问题，提升企业IT基础设施管理效率，以及云联壹云带给客户省人省事、省钱、安全三大产品价值；\n3.7版本新功能介绍，主要给大家介绍了多云对接、多云账单管理、多云监控告警、多云权限管理以及标签管理5大模块的功能或更新；\n功能规划，我们近期将会围绕京东云对接、AzureCPP、内置负载均衡支持VPC、公有云账单二次定价、公有云WAF对接、监控迭代5大方面展开产品的功能设计与实现。\n感谢大家百忙之中参加我们的Meetup，下次直播再见。\n","excerpt":"作者: 高现起\n大家好，我是高现起，目前在负责云联壹云融合云管理平台的产品工作，今天很高兴由我给大家介绍一下最新发布的3.7版本的新功能。\n …","ref":"/zh/blog/2021/05/31/cloudpods-3.7-new-feature-introduction/","title":"直播回顾：Cloudpods 3.7版本新功能介绍"},{"body":"作者: 周有松\n各位朋友大家好，欢迎大家在周三的晚上参加我们的线上Meetup分享。我是周有松，目前负责云联壹云网络相关功能的开发工作，今天分享的题目是“云上负载均衡产品的应用”。\n今天的内容会从以下几个方面展开：\n 负载均衡产品简介。主要介绍负载均衡作为一个云上产品，它的功能模型是怎样的，日常使用中会遇到的业务词汇 负载均衡的功能与典型应用场景。这部分主要结合业务词汇，对负载均衡服务中常见的一些功能选项进行介绍，并举例介绍一些典型的应用场景 最后，我们做一下总结，讨论一下负载均衡产品相比传统方式的优点  一、产品简介 1. 以NGINX为例 提到负载均衡，我们以前一般先会想到NGINX，或者淘宝的分支Tengine。我们先来看看\n 它是怎样工作的 它解决了什么样的问题 它适合什么样的应用场景  在加入了NGINX之后，客户端（Client IP）首先与NGINX建立连接（Virtual IP+Virtual Port），请求也先发给NGINX，再由NGINX从多个后端服务器中选择一台，建立连接后把请求转发给后端服务器（Real IP）。\nNGINX作为网络转发节点，不参与后端服务的业务逻辑处理。而相比客户端直连后端，多个后端服务器可同时处理业务请求，应用的服务能力得到水平扩展。同时，转发节点上可以对后端做健康检查，自动屏蔽掉不健康的后端服务器，保障业务的高可用，使得单个后端服务器在故障、升级、过载时依然对用户连续可用。\n因此，我们说水平扩展、高可用是负载均衡解决的最基本的两个问题。从另外一方面来说，使用负载均衡的业务，在架构设计上应该是能够水平扩展的。比如，一个应用的多个实例之间不需要通信，相互之间没有复杂的状态维护。\n2. 业务词汇 在使用云上负载均衡的时候，不管哪个厂商的产品，我们会遇到一些常用的业务词汇。我们围绕一张图来简要介绍。\n负载均衡实例，除了区域、可用区之外，每个实例至少有一个IP地址。同一个负载均衡实例下可以有多个监听，每个监听一般至少有协议、端口两个属性。后面还会介绍监听的其它属性，比如调度算法、健康检查、转发策略等。\n实例和监听对应到NGINX上，其实是Virtual IP和Virtual Port的组合。每个监听有一个后端服务器组，组内可以有多个后端服务器，监听将来自客户端的请求转发给后端服务器（Real IP、Real Port）。\n对于HTTPS协议的监听，我们还会遇到TLS证书的概念。\n通常每个监听还可以绑定一个访问控制列表，用来设置黑名单、白名单，限定业务的服务范围。\n将业务词汇放到转发模型上，我们可以得到这样一张图。在壹云的负载均衡实现中，转发节点使用HAProxy负责具体的流量转发。实例和监听的配置被转换为HAProxy的配置应用到转发节点上。HAProxy据此将流量转发到后端服务器组。\n二、功能与应用场景 1. 监听协议 一般来说，负载均衡监听支持的传输层协议为TCP、UDP，应用层一般支持HTTP、HTTPS。其中对HTTP协议的支持一般包括HTTP/1.0，HTTP/1.1，HTTP/2，以及WS（WebSocket），WSS（WebSocket Secure）等。\n除此之外，许多厂商的负载均衡产品也陆续开始了QUIC协议的支持。QUIC有时也被称作HTTP/3，它的传输层协议类型为UDP。壹云的负载均衡产品基于HAProxy，它将会随着HAProxy 2.5的发版实现对QUIC协议的支持。\n同实例下的多个监听，传输层协议相同时，端口必须不能冲突。比如，同一实例下，无法TCP/80和HTTP/80的两个监听只能选其一。但是TCP/53和UDP/53的两个监听可以同时存在。\n从开销来说，HTTPS因为涉及到TLS协商和传输加解密，开销最大。HTTP其次，相比TCP协议转发节点需要对传输的数据做内容解析。TCP作为有状态的连接，相比UDP开销又要大一些。\n图中展示的是壹云控制台中负载均衡监听创建的第1步。其中，端口对所有协议类型都是必选的项。创建HTTPS监听时，要求必须关联相应的TLS证书。对于WS、WSS的支持是默认就有的。\n主流的浏览器要求HTTP/2必须运行在加密信道上，一般来说，负载均衡产品对于HTTPS监听默认开启HTTP/2的支持。极个别情况下，某些应用的客户端遇到HTTP/2时会有兼容性问题，所以负载均衡产品通常也会提供开关，允许显式将HTTP/2支持关闭。\n2. 调度算法 监听收到客户端的请求后，从后端服务器组中选出一个后端做转发。这个算法通常就叫“调度算法”。一般来说我们常用的有3种：\n 轮询，round robin。这种策略比较适用于短连接、短生命周期的业务，比如网页浏览。每打开一个网页，通常需要下载HTML、CSS、JS、字体等文档，每个请求大约秒级、毫秒级即可完成。这种场景下，轮询作为一种简单的算法，能够实现较好的均衡效果。 最小连接数，least connected。转发节点会记录它与每个监听的后端服务器的当前活跃的连接数，在转发请求时，从中选择一个活跃连接数最少的后端。这种算法较适合长连接、生命周期较长的业务，比如大文件上传下载、长时的交互会话如SSH等。 源一致性哈希。在这类算法中，转发节点通常会对请求来源标记一个身份，比如源IP地址、请求中的某个HTTP cookie值等。对于来自同一个标记的请求，将其转发到上次选择的后端服务器。这种算法较适合需要维护会话缓存、关联状态的业务。例如，某些业务后端收到请求后，需要从别处获取并缓存该请求相关的信息，比如订单详情、关联的用户详情等等，如果来自同一个用户的请求依然送到同一个后端，使得缓存使中率提高。这种对Locality的利用对应用的体验提升较好。  3.健康检查 健康检查是一种负载均衡服务实现高可用，保障业务连续性的机制。通过健康检查结果，转发节点将不健康的后端向用户屏蔽，实现故障、升级等行为对用户的无感知。\n云上负载均衡的健康检查通常有以下几种：\n TCP检查。即通过TCP连接是否能够成功建立判断后端的健康与否，连接建立成功后会立即发出RST报文中断连接，减少后端资源占用。使用这种健康检查时，在后端的日志中可能会周期出现“connection reset”字样的信息，是预期中的效果。 UDP检查。一般的机制是，向后端服务器发送指定内容的请求，在约定时间内若能收到来自后端的响应，并且响应内容匹配，则认为此次检查结果为健康。由于UDP是无状态连接协议，因此配置的参数里除了指定请求、响应的内容，还需指定响应超时时间。 HTTP检查。通常通过向后端发送HEAD请求，对响应的状态码做检查来判断健康与否。默认的配置一般是2xx、3xx的响应判定为健康，4xx、5xx判定为故障。对状态码的归类一般也是可配置的。  云上负载均衡产品一般会某个后端的检查结果，作为一个初步诊断。一般会有连接超时、连接错误、响应错误等。当所有后端都被判定为不可用时，对于HTTP/HTTPS类型的监听，转发节点通常会直接返回503 Service Unavailable。\n4. HTTP转发策略 转发策略是针对HTTP/HTTPS监听为言的。简单来说，它通过匹配用户请求中的Host、Path字段来决定将请求转发到哪个后端服务器组。\n首先，同一监听下的多个转发策略共用一个IP、端口组合，实现了复用，并且业务的域名和路径统一管理，无需配置到每一台后端服务器上。例如，我们可以将wiki.example.com, task.example.com解析到同负载均衡实例的IP地址，然后创建一个HTTPS监听，再创建2个转发策略，分别匹配这两个域名，实现不同的转发路径。也可以通过共用域名解析，分配不同URL路径（/wiki，/task）的方式实现相同的效果。\n另外，同一监听下的转发策略可以共用监听自身的ACL规则，共享监听的带单和速率控制，因此管理、配置会明晰简单。\n5. 会话保持 会话保持也叫Sticky Session，适用于HTTP/HTTPS类型的监听。它是一种通过在HTTP cookie中嵌入后端标识的方式指定请求的转发路径。根据Set-Cookie的时间不同，通常有两个选项：\nServer模式。后端服务器知道自己的标识，在返回响应的时候给出Set-Cookie，经过转发节点交给浏览器后，记录在浏览器。转发请求下次收到该浏览器的请求时会看到相应的Cookie值，将其转发到上次的后端服务器。\nInsert模式。转发节点收到后端服务器的响应后，再转发给浏览器前会加入Set-Cookie头部，这个值之后会记录在浏览器中。转发节点下次收到浏览器的请求时，若其中包含此cookie，它会将其去除之后再转发给后端服务器。因此，在Insert模式下，后端服务器感知不到此cookie的存在。\n6. 跳转 HTTP/HTTPS协议的监听可以指定跳转目标。这种情况下，监听无需绑定后端服务器组。\n跳转类型的监听通常用来实现HTTP到HTTPS的跳转，实现全站加密访问。例如，在明文HTTP协议下，有些宽带运营商可能会篡改应用的响应，在其中插入广告等信息，某些情况下还可能导致信息安全问题。强制HTTPS跳转作为一种应对措施，可以帮助实现用户到站点的端到端保密信道。\n另外，跳转还可以用来实现站点的迁移、应用的升级场景里。当迁移、升级完成后，通过跳转将用户请求转移到新站点，旧的URL依然可用，迁移升级过程对用户无感知，回滚也非常便捷。\n7. 访问控制 监听可以指定访问控制列表（ACL），并指定该列表的类型是黑名单还是白名单。\n有时我们有一些内部接口、服务需要只能够有限开放，比如同公司另外一个机房，或者不同公司的合作伙伴等。此时通过访问控制列表实现就非常方便，在界面上统一管理、备注。\n另外一种情况下，有些应用我们需要限定服务区域，比如版权、监管的原因等。此时我们可以将服务区域的来源地址做成白名单，仅开放应用给这些区域。网络控制在负载均衡一处完成，整个过程应用本身无需配置变更。\n8. 获取客户端真实IP 从产品简介中我们可以看到，客户端的连接和请求终结在转发节点上，后端服务器看到的连接都来自转发节点。此时，后端看到的网络层源IP也都是转发节点的地址。负载均衡产品一般提供提供了以下几种方式让后端服务器能够获取客户端的源IP地址：\n对于HTTP/HTTPS协议，转发节点可以通过HTTP头部来传递客户端的源地址，头部的名称一般为X-Forwarded-For。\n对于其它协议，一般通过PROXY协议来向后端服务器传递此信息。PROXY协议由HAProxy项目制订，AWS的负载均衡即支持此规范，另外还有NGINX、LightHTTPd也是支持此协议的。举例来说，对于TCP连接，PROXY协议会在连接建立后先进行连接信息传递，之后才是正常的数据交换。因此，如果PROXY协议直接对接应用服务，需要对应用服务的连接入口进行微小的修改。\n一部分云厂商在整个负载均衡转发面实施会话记录、地址转换，使得虚机作为后端服务器时看到源地址即为客户请求的源地址，此时无需额外机制获得客户端的真实IP地址。需要注意的是，对于内网负载均衡，服务器在访问自身作为后端监听时，会出现因为源、目的IP地址都是自己而造成路径不通，这是这种机制的一个小限制。\n9. 请求速率控制 壹云的负载均衡对于HTTP/HTTPS类型的监听可以实施请求速率控制。分为两个方面：\n一是对监听整体进行速率控制。例如，某个应用现在的服务能力是每秒3000个请求，为了保护后端服务器，避免过载造成雪崩效应等，我们可以设定整体的速率控制。\n二是对每个来源IP地址进行控制。这个可以用于阻止来自单个客户的高频异常请求，比如刷单、爬虫类请求等\n10. TLS证书 最后，我们简单介绍一下TLS证书。用户在使用负载均衡时，经常反馈在证书上传这一步产生困惑。\n首先，从非对称加密算法的类型来说，证书一般分别为RSA、EC证书两类。其中EC证书也叫椭圆曲线证书，相对较新一些，大部分平台也是支持的。\n上传证书时，一般要求同时上传证书、私钥两个文件或文件的内容。这两者是成对出现的。云平台一般支持PEM格式的证书和私钥，为base64编码带标识头的文本格式。与之对应通常叫DER格式，它是ASN.1编码的二进制格式。如果用文本编辑器打开证书和私钥文件，看到的是规整的ASCII字符串，那么应该是PEM格式，如果是乱码状态，很可能就是DER格式了。\n图中是常见的3种私钥PEM文件头。PKCS是RSA Laboratory制定的一系列标准。其中PKCS#8支持封装多种加密算法的私钥，因此此种格式的PEM私钥有可能是RSA或者EC格式的私钥。\n图中展示了壹云控制台中证书列表的菜单位置。从中可以看到证书上传后，可以直接看到证书的CN（Common Name）。SAN（Subject Alternative Name），以及过期时间。在“操作”列中，若“删除”操作为灰色禁用状态，一般表示该证书正被HTTPS监听关联使用\n我们可以从证书的详情中，找到与它关联的监听列表，实现对所有监听批量更新证书。\n三、总结 以上结合实际的场景对负载均衡产品做了一个简略的介绍，我们经常被问到，这些功能特性都可以通过自己搭建NGINX一步一步配置出来，为什么还要花钱用云上的产品呢？\n首先，作为一种模块化封装的产品，负载均衡的主要优势在于简便、高效。自建NGINX时，我们需要自己配置集群高可用，考虑集群的水平扩展和扩容。在生产环境时还需要配置自己的监控、告警策略。在管理层面，权限管理和操作过程审计也必不可少，然而NGINX作为基础组件与这些上层概念距离较远，需要较复杂的过程才可实现相等效果。\n其次，云上负载均衡通常都有开放的API，可通过编程与周边系统对接，灵活应对需求。\n从企业IT资产管理的角度来说，负载均衡代表着更先进的生产力。壹云控制台上的信息呈现相比命令行中单字符控制来说，更加一目了然，操作也更加简便，使得对于操作结果的可预期性更强。\n","excerpt":"作者: 周有松\n各位朋友大家好，欢迎大家在周三的晚上参加我们的线上Meetup分享。我是周有松，目前负责云联壹云网络相关功能的开发工作，今天 …","ref":"/zh/blog/2021/05/31/cloudpods-lb-application-intro/","title":"直播回顾：Cloudpods负载均衡的功能介绍"},{"body":"作者: 邱剑\n随着数字化时代的到来，IT系统已成为人类社会正常运转不可或缺的组成部分。不远的未来，智能制造，5G和人工智能等技术将成为推动生产力发展的重要引擎，人类社会将面临前所未有的全面彻底的数字化浪潮。IT基础设施作为IT系统运行的平台和载体，是实现数字化的基石。在这场数字化浪潮中，企业必须积极拥抱云计算技术，采用符合技术发展趋势、面向未来的IT基础构架，才能在未来的竞争中赢得先机。\n一、云计算历经十余年发展的趋势判断 云计算技术自2006年AWS推出第一个公有云服务S3开始，发展到2019年的今天，一些格局和趋势开始逐步清晰：\n首先，私有云依然是大中型企业以及一些细分行业，例如政务、金融、医疗、教育、能源和制造等的首选IT基础设施。随着各大公有云厂商陆续推出其公有云在政企客户私有化部署的扩展方案，例如AWS Outposts、Azure Stack，Google Anthos，以及国内阿里云、腾讯云等的私有云／专有云部署方案，“私有云是否会随着公有云的发展逐步消亡”的命题已被公有云厂商自己否定。事实证明，私有云将长期持续存在，将和公有云共生，成为企业IT基础设施的一个重要组成部分。\n其次，公有云持续迅猛发展，逐步成为企业IT基础设施的主要提供者。2018年Q3云硬件支出占IT总收入的50.9%。2018年中国私有云基础架构支出38.0亿美元，公有云基础架构支出达到82亿美元（来源：IDC）。因此，公有云已经成为IT基础设施的最主要提供者。尤其对于中小企业而言，其IT基础设施可能完全构建在公有云之上。同时，一些处于技术领先行业的大型企业，例如互联网，金融，制造等，也已经开始使用公有云，探索结合公有云和私有云优势的混合云架构。\n与此同时，公有云市场竞争异常激烈，最后将只剩下少数技术和资本都十分雄厚的玩家，进入寡头垄断市场阶段。一方面，公有云厂商提供的产品和服务本质相同，都是IT基础设施资源以及其上的软件服务，另一方面，各家厂商都极力完善自身产品，丰富产品线，做出特色，以获得竞争优势，吸引增量用户，避免存量用户的流失。因此，最终公有云提供的产品功能矩阵都基本趋同，但是在特色功能、区域覆盖、用户体验方面则各有千秋，差异很大。随着用户对公有云产品服务依赖的加深，公有云之间的服务切换和迁移将变得越来越难，云和云之间存在隐形的鸿沟。当然，公有云进入寡头垄断阶段也意味着公有云供应商列表将长期保持相对稳定，这意味着针对所有公有云API的适配成本将变得可控可行。\n还有一个不容忽视的趋势是Kubernetes已成为容器编排的事实标准，逐步成为云原生时代应用部署和运行的标准环境。随着Kubernetes对存储、网络支持的逐步完善，不仅无状态服务可以在Kubernetes上部署运行，有状态的数据存储服务也可以在Kubernetes上运行。同时，基于Kubernetes之上已经发展出了一个繁荣并且强大的开源软件生态和完整的工具链，例如Helm实现软件套件的自动部署，Operator实现软件的自动化运维，lstio提供微服务RPC通信治理架构，Knative提供Serverless的运行框架等等。可以预见，Kubernetes将成为未来分布式应用的标准运行时环境，成为分布式应用时代的“Linux”。Kubernetes之上将构建出一个完全由开源软件主导的软件生态，不仅仅包含应用软件，还包含各种PaaS中间件，例如消息中间件，各类开源数据库，开发框架，AI训练框架等，真正实现\"开源统治世界\"的愿景。正是基于这个趋势判断，各大公有云厂商都相继推出了自己的Kubernetes解决方案，允许原生Kubernetes在自己的云平台上更高效运行。\n二、企业未来IT基础设施的确定和不确定 基于这些事实和趋势，我们可以想象未来的企业IT基础设施将是这样：\n首先，混合云架构是企业的最佳选择。\n将来企业的IT基础设施方案，公有云和私有云不再是二选一的选项，而是一个完整的IT基础设施的两个必然组成部分。一方面，企业可能会有自己的私有云，但也存在一些完全运行在公有云的企业。另一方面，企业必然会使用公有云，其购买的公有云资源将成为其私有IT基础设施的一部分。\n其次，Kubernetes将会成为企业云原生应用的标准运行环境。\n就像企业今天企业应用都运行在Linux中一样，将来的企业服务将云原生化，分布化，运行在Kubernetes中。企业将会有若干Kubernetes集群，运行着不同的应用，分布在不同的基础设施之上，有的运行在本地IDC，有的运行在私有云，有的运行在公有云。\n以上两点是公认比较确定的论断，但是还有其他很多问题目前没有确定性的结论，例如：\n1、虽然使用公有云是企业必然的选择，但是企业会在使用多个公有云还是单一公有云进行抉择。采用多公有云方案的原因很多，收益也显而易见，例如避免供应商锁定，提高议价的能力，获得更丰富的功能特性和地域选择等。但同时，使用多个公有云资源的统一管理难度大，云间服务切换和迁移成本较高的问题则阻碍了用户选择多个公有云。\n2、虽然云计算技术发展了十多年，但是依然有很大比例的企业的本地IT基础设施并未云化，既没有通过私有云管理，甚至都没有采用虚拟化技术。虽然未来的云原生应用将运行在Kubernetes的容器环境中，但是企业还有很多未容器化的传统应用。而且，实事求是地讲，对于大多数企业来讲，也许未来很长一段时间，依然是以非云原生的传统应用为主。因此，企业未来的IT基础设施并不能简单地假设为全部都归一化地运行Kubernetes，而是应该给这些传统应用提供运行所需的虚拟机或者裸机环境。这类企业云转型过程中是否还是需要经过私有云-混合云-多云的漫长路径，再部署一套私有云实现本地IT基础设施的云化？\n3、一方面，随着业务发展和行业驱动，企业对IT基础设施的要求，无论是规模、效率还是稳定性都将越来越苛刻。敏捷开发和DevOps将成为企业的标配。另一方面，随着技术的发展，企业IT基础设施也将愈发复杂和难以驾驭。企业IT资源将不仅是物理服务器，还有虚拟机，容器，除了x86，还会有小型机、ARM，甚至还有GPU、FPGA、TPU等异构计算资源。网络和存储也有多种技术选择。同时，截止今日，仅主流公有云供应商在全球200多个区域500多个可用区提供上千种云产品和服务。只要企业愿意，一个全球规模的IT基础设施唾手可得。企业IT人员如何应对IT基础设施在规模、效率和复杂度方面的挑战？\n4、即使未来的企业IT基础架构将收敛到完全运行在Kubernetes上，单个Kubernetes集群往往只用于一个单一特定目的，例如特定部门的测试或生产集群，企业内有多个Kubernetes集群是常态。管理多Kubernetes集群，尤其是部署在多云环境下的多Kubernetes集群依然是一个难题。虽然Kubernetes屏蔽了底层基础设施的差异，向上提供了一致的接口和运行环境，但是Kubernetes在各个公有云以及本地IDC的管理接口以及网络存储方案都没有统一，在新建、扩容和调整配置Kubernetes集群时候，依然面临对接多个供应商接口的问题。同时，分布在多个公有云上的Kubernetes集群之间没有打通，不仅控制信息无法同步，数据链路层面更是相互隔离，互为孤岛。因此无法实现多个集群的联动，更无法实现集群之间的切换和协同。多云环境下的Kubernetes集群方案依然有待探索。\n5、随着Kubernetes生态的完善，用户在公有云上使用PaaS服务将有两个选择：使用公有云提供的PaaS服务还是基于Kubernetes的云原生开源PaaS服务。前者产品化程度高，更加易于使用，能得到商业支持。但也存在被商业产品锁定，切换困难，使用费用高昂的问题。使用后者则需要对开源软件有一定掌控力，但是价格便宜（云主机的使用费），基于开源技术，有强大社区支持，架构开放灵活且易于扩展。\n三、融合云（Unified IaaS），面向未来的IT基础设施架构选择 针对以上确定性结论和不确定问题，我们的答案是面向未来的IT基础设施架构管理的最佳选择是融合云（Unified IaaS）。顾名思义，所谓融合云就是融合管理分布在多云环境（本地IDC，私有云和公有云）中的所有IT基础设施，构建一个“云上之云”的融合IaaS平台。融合云本质上是私有云，但是管理的IT资源的范围不再局限于本地IDC，还包括企业在公有云购买的IaaS资源。对于纯公有云架构的企业，融合云管理的则完全是企业购买的公有云资源。融合云和传统云平台的区别不在于管理的资源范围的不同，而在于针对上述企业IT的发展趋势和问题，在设计理念上，融合云和传统的云平台有如下不同：\n首先，融合云面向的是多云环境。\n融合云的部署场景中，企业用户IT基础设施不仅包含部署在本地IDC的部分，还包含用户在公有云购买的部分。融合云通过一个平台管理企业所有的IT基础设施。首先是在管理平面的统一和融合，实现私有云和公有云资源的统一API访问，不仅实现资源的管理，还包括账单的统一，资源管理的统一。让用户跨云调用就像使用一个云平台一样的便利。其次是数据平面的打通，通过和跨云网络方案的整合，实现控制平面和数据平台的协同，达到整个平台的跨云内网的互通。另外，融合云还将提供跨云数据迁移的工具，方便用户实现跨云的应用迁移。总之，融合云的目标就是填补云和云之间的鸿沟，降低跨云切换和迁移的成本，让多云部署更简单。\n其次，融合云实现企业整体异构IT基础设施的全面云化。\n融合云不仅能管理已经云化的私有云和公有云资源，还需内置了管理裸机的裸金属云，KVM和VMware ESXi等虚拟化技术、以及ARM，GPU等计算资源的私有云技术。对于还没有部署私有云的企业，通过部署融合云，一步到位地实现企业私有IT基础设施的私有云化，实现裸金属、KVM、VMware ESXi、GPU等的云化管理，无需再引入额外的私有云方案，降低了企业上云的实施成本和管理复杂度。\n第三，智能将是融合云的核心特征。\n融合云一方面优化IT资源分配的调度策略，找出闲置浪费的IT资源，提升IT资源的利用率。另一方面提前预测资源需求和发现系统故障隐患，确保系统的平稳运行和扩展。通过数据和算法，使得IT基础设施更加智能，帮助企业IT人员驾驭未来的IT基础设施在规模、效率和复杂度方面的挑战。\n第四，融合云面向的是Kubernetes。\n融合云一方面实现多云环境下Kubernetes底层基础设施的统一和融合。一是通过统一的API为Kubernetes提供多云环境下统一的IaaS接口，为跨云部署Kubernetes环境提供便利。二是在数据平面打通跨云Kubernetes的内网，实现跨云通信。另一方面则直接提供统一的Kubernetes集群管理控制API以及集群信息的同步机制，实现跨集群Kubernetes的统一管控，实现跨Kubernetes集群的账号、权限、配置的同步和统一。\n最后，融合云全面拥抱开源技术。\n软件发展的历程表明PaaS的未来是开源。供应商都无法仅凭一己之力满足企业客户所有的PaaS需求。因此，融合云聚焦于企业分布在本地IDC和公有云的计算、网络和存储IaaS资源的统一管理，为多云Kubernetes提供可靠的底层基础设施，Kubernetes之上的软件和应用需求则依赖开源生态来提供解决方案。融合云用户对PaaS的需求通过Kubernetes应用市场，通过整合开源PaaS应用向用户提供服务。这一方面降低用户使用开源PaaS的技术门槛，另一方面则依赖强大的开源社区给用户提供开放灵活丰富的软件产品，避免私有PaaS软件对用户的锁定。\n基于以上的设想，融合云的架构如下所示。\n向下：融合云统一管理多云基础设施，主要实现多云环境下计算、网络、存储等IaaS资源的统一管理。对于本地IDC的未云化资源，主要是裸机，KVM虚拟机（Libvirt），VMware ESXi虚拟机（vSphere），通过内置的私有云方案实现云化管理。对于私有云和公有云资源，则通过API实现统一管理。\n向上：融合云一方面通过虚拟机、裸机等形式为传统应用提供完整操作系统运行时环境，另一方面则给Kubernetes提供多云运行环境，统一管理多云Kubernetes。在Kubernetes之上则提供云原生应用的容器运行时环境。同时，基于Kubernetes和开源组件提供PaaS中间件服务。\n总之，融合云向下统一管理多云IaaS资源；向上为Kubernetes提供多云支持，通过开源生态满足企业PaaS需求；用户其他需求则可以通过访问公有云的原生服务获得，从而全方位满足未来企业对IT基础设施的多层次需求。\n随着大数据、人工智能技术的普及，5G时代的到来，IT基础设施变得愈加重要，成为企业数字化转型，全面拥抱数字时代的基石。基于企业IT架构多云趋势，融合云应运而生。融合云是面向未来的企业IT基础设施管理的云平台，针对企业在未来IT基础架构的问题而设计，将帮助企业迎接即将到来的数字化转型的挑战。\n","excerpt":"作者: 邱剑\n随着数字化时代的到来，IT系统已成为人类社会正常运转不可或缺的组成部分。不远的未来，智能制造，5G和人工智能等技术将成为推动生 …","ref":"/zh/blog/2019/06/13/unified-iaas-for-future/","title":"面向未来的 IT 基础设施管理架构——融合云（Unified IaaS）"},{"body":"  A cloud-native open-source unified multi-cloud and hybrid-cloud platform\n   Get Started   Learn More         The one cloud contains all your clouds Cloudpods manages not only on-premise KVM/baremetals, but also resources from many cloud accounts across many cloud providers. It hides the differences of underlying cloud providers and exposes one set of APIs that allow programatically interacting with these many clouds.       Cloud Native Running in Kubernetes and managed by a Kubernetes Operator.\n   Private Cloud A light-weight private cloud that manages KVM hypervisor in scale.\n   BareMetals A BareMetal cloud that automates the full life-cycle management of baremetal physical machines.\n   Multi-Cloud Multi-cloud management that is able to manage a wide range of cloud providers, including private cloud and public clouds.\n   Multi-Cloud K8s Deploy and manage Kubernetes clusters in multi-cloud environment.\n   Multi-Tenancy A complete multi-tenancy RBAC-enabled IAM (identity and access management) system.\n   Cloud SSO Cloud SSO that allows accessing native webconsole of cloud providers with unified federated identities.\n   CLIMC Access Cloudpods with an efficient and productive command line tool climc\n   Unified APIs One set of feature-rich APIs to access a wide range of resources from heterogeneous cloud providers with consistent models and APIs.\n     Supported Platforms and Technologies          Who are using Cloudpods? Please check this GitHub issue for the user list of Cloudpods.            Have any question? Open a issue on GitHub.\n   Contributions welcome! Make a Pull Request on GitHub.\nYou are always welcome!\nContribute to Cloudpods …\n   Join WeChat group!     ","excerpt":"  A cloud-native open-source unified multi-cloud and hybrid-cloud …","ref":"/en/","title":"Cloudpods"},{"body":"  开源、云原生的多云和混合云融合平台\n   快速上手  了解更多        The one cloud contains all your clouds Cloudpods不仅可以管理本地的虚拟机和物理机资源，还可以管理多个云平台和云账号。Cloudpods隐藏了这些异构基础设施资源的数据模型和API的差异，对外暴露了一套统一的API，允许用户就像用一个云一样地访问多云。从而大大降低了访问多云的复杂度，提升了管理多云的效率。       云原生 运行在Kubernetes中，使用Kubernetes Operator管理和维护\n   私有云 一个可以管理海量KVM虚拟机的轻量级私有云\n   裸金属 一个能进行物理机全生命周期管理的裸机云\n   多云管理 管理多云资源的功能，可以管理大多数的主流云，包括私有云以及公有云\n   多云K8s 在多云环境部署和管理Kubernetes集群\n   多租户IAM 一套完整的多租户认证和访问控制体系\n   多云SSO 多云SSO允许以统一的联邦身份访问各个云平台原生控制台\n   CLIMC 使用命令行工具 climc 高效管理Cloudpods\n   统一API 一套功能丰富、统一一致的REST API和模型访问以上的云资源和功能\n     支持的技术和云平台          谁在用Cloudpods? 请在此GitHub Issue查看Cloudpods用户列表            有问题? 请在 GitHub 提 issue\n   欢迎贡献! 请在 GitHub 提 Pull Request\n给Cloudpods贡献代码 …\n   加入微信群     ","excerpt":"  开源、云原生的多云和混合云融合平台\n   快速上手  了解更多        The one cloud contains all …","ref":"/zh/","title":"Cloudpods"},{"body":"Welcome the documentation of Cloudpods.\nWhat is Cloudpods? Cloudpods is an open-source unified multi-cloud/hybrid-cloud Cloud platform that provides unified APIs to access heterogenous IaaS resources across a broad range of cloud providers, including on-premise KVM/BareMetal/VMware, private clouds such as OpenStack, and public clouds such as AWS, Azure, Alibaba Cloud, etc. Cloudpods provides a set of APIs and a web UI dashboard. Cloudpods hides the differences of underlying resources, and makes it easy to build PaaS services and applications across multi-cloud/hybrid-cloud platforms.\nFeatures Here are some highlight features of Cloudpods:\n A self-contained light-weight private cloud that manages KVM hypervisor in scale A self-contained BareMetal cloud that automates the full life-cycle management of baremetal physical machines A self-contained VMware vSphere management platform that enables self-service and automation A multi-cloud solution that is able to manage a wide range of major cloud providers, including private cloud, such as OpenStack, and public clouds, such as AWS, Azure, Google Cloud, Alibaba Cloud, Tencent Cloud, Huawei Cloud, etc. A full set of feature-rich APIs to access a wide range of the IaaS resources from platforms above with consistent resource models and APIs A multi-tenancy RBAC-enabled identity and access management system A multi-cloud image management system that automates image conversion between different cloud platforms The platform adopted a cloud native architecture and run in Kubernetes cluster and support high availability deployment  ","excerpt":"Welcome the documentation of Cloudpods.\nWhat is Cloudpods? Cloudpods …","ref":"/en/docs/","title":"Welcome to Cloudpods documentation"},{"body":"","excerpt":"","ref":"/zh/search/","title":"Search Results"},{"body":"","excerpt":"","ref":"/zh/blog/","title":"Cloudpods 博客"},{"body":"欢迎查看 Cloudpods 文档，本文档会介绍 Cloudpods 服务安装部署、资源操作管理和开发贡献等内容。\nCloudpods 是什么? Cloudpods 是一个开源的Golang实现的云原生的融合多云/混合云的云平台，也就是一个“云上之云”。Cloudpods 不仅可以管理本地的虚拟机和物理机资源，还可以管理多个云平台和云账号。Cloudpods 隐藏了这些异构基础设施资源的数据模型和API的差异，对外提供了一套统一的API，允许用户就像访问一个云一样地访问多云。从而大大降低了访问多云的复杂度，提升了管理多云的效率。\n谁需要 Cloudpods?  将几台物理服务器虚拟化成一个私有云平台 需要一个紧凑而且功能相对完整的物理机全生命周期管理工具 将VMware vSphere虚拟化集群转换为一个可以自服务的私有云平台 在混合云的场景，能够在一个界面访问私有云和公有云 通过一个集中的入口访问分布在多个公有云平台上的多个账号 当前只使用一个云公有云账号但希望将来使用多云的用户  功能 Cloudpods 提供了如下的功能：\n  内置私有云\nCloudpods 内置完备的私有云实现，可以管理海量KVM虚拟机，能进行物理机全生命周期管理，实现了VMware vSphere虚拟化集群的自助服务和自动化。\n  多云资源统一管理\n统一镜像、调度、账号体系、监控和计费等操作，能够全面管理 On premises、 私有云、公有云资源。\n  多云Kubernetes\nCloudpods 自身为运行在Kubernetes的云原生应用，并且能在多云环境部署运行Kubernetes集群。\n  多云统一认证\n提供一套完整的多租户认证和访问控制体系，允许以统一的联邦身份SSO访问各个云平台的原生控制台。\n  多云命令行工具\n提供命令行工具climc访问所有的API。\n  多云统一API\n提供统一的API访问所有的私有云和多云资源。\n  从哪开始? 文档分为以下部分：\n","excerpt":"欢迎查看 Cloudpods 文档，本文档会介绍 Cloudpods 服务安装部署、资源操作管理和开发贡献等内容。\nCloudpods 是什 …","ref":"/zh/docs/","title":"欢迎访问 var_oem_name 文档"}]