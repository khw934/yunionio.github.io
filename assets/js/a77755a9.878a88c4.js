"use strict";(self.webpackChunkdocs_new=self.webpackChunkdocs_new||[]).push([[2974],{89118:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>l});var o=s(85893),r=s(11151);const t={edition:"ce",sidebar_position:25},c="\u5378\u8f7d",i={id:"operations/uninstallation",title:"\u5378\u8f7d",description:"\u6839\u636e\u5e73\u53f0\u5b89\u88c5\u65b9\u5f0f\uff0c\u5378\u8f7d\u65b9\u5f0f\u5404\u6709\u4e0d\u540c\uff0c\u65b9\u5f0f\u5982\u4e0b\u3002",source:"@site/docs/operations/uninstallation.md",sourceDirName:"operations",slug:"/operations/uninstallation",permalink:"/docs/operations/uninstallation",draft:!1,unlisted:!1,editUrl:"https://github.com/yunionio/website/tree/master/docs/operations/uninstallation.md",tags:[],version:"current",sidebarPosition:25,frontMatter:{edition:"ce",sidebar_position:25},sidebar:"tutorialSidebar",previous:{title:"\u66f4\u6362\u8282\u70b9IP",permalink:"/docs/operations/change-node-ip"},next:{title:"\u5f00\u53d1\u624b\u518c",permalink:"/docs/development/"}},a={},l=[{value:"Ocboot \u5feb\u901f\u5b89\u88c5",id:"ocboot-\u5feb\u901f\u5b89\u88c5",level:2},{value:"Kubernetes Helm \u5b89\u88c5",id:"kubernetes-helm-\u5b89\u88c5",level:2},{value:"Docker Compose \u5b89\u88c5",id:"docker-compose-\u5b89\u88c5",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"\u5378\u8f7d",children:"\u5378\u8f7d"}),"\n",(0,o.jsx)(n.p,{children:"\u6839\u636e\u5e73\u53f0\u5b89\u88c5\u65b9\u5f0f\uff0c\u5378\u8f7d\u65b9\u5f0f\u5404\u6709\u4e0d\u540c\uff0c\u65b9\u5f0f\u5982\u4e0b\u3002"}),"\n",(0,o.jsx)(n.h2,{id:"ocboot-\u5feb\u901f\u5b89\u88c5",children:"Ocboot \u5feb\u901f\u5b89\u88c5"}),"\n",(0,o.jsx)(n.p,{children:"Ocboot \u5feb\u901f\u5b89\u88c5\u662f\u6307\u4ee5 All in One \u7684\u65b9\u5f0f\uff0c\u5728\u670d\u52a1\u5668\u4e0a\u5b89\u88c5\u4e86\u4e00\u4e2aKubernets\u96c6\u7fa4\uff0c\u8fdb\u800c\u5728\u96c6\u7fa4\u4e2d\u90e8\u7f72\u4e86Cloudpods\u3002\n\u56e0\u6b64\u5378\u8f7dCloupods\u53ea\u9700\u8981\u5378\u8f7d\u5b89\u88c5\u7684Kubernetes\u96c6\u7fa4\uff0c\u4ee5\u53ca\u5728\u670d\u52a1\u5668\u4e0a\u5b89\u88c5\u7684\u76f8\u5173\u5305\u3002"}),"\n",(0,o.jsx)(n.p,{children:"\u5378\u8f7d\u670d\u52a1\u5668\u4e0a\u7684Kubernetes\u670d\u52a1:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ ocadm reset --force\n$ kubeadm reset --force\n$ ipvsadm --clear\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u505c\u6b62\u5e76\u7981\u7528\u76f8\u5173\u670d\u52a1\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ systemctl disable --now docker.socket docker kubelet yunion-executor\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u5378\u8f7dkubelet, yunion-executor\u7b49\u5305\uff0c\u5e76\u6e05\u9664\u76f8\u5173\u7684\u6570\u636e\u76ee\u5f55\uff0c\u4e0b\u9762\u4ee5 centos \u4e3e\u4f8b\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ rpm -qa |grep kube |xargs -I {} yum -y remove {} \n$ rpm -qa |grep yunion |xargs -I {} yum -y remove {}\n$ rm -rf /etc/kubernetes/ /var/lib/etcd/ /root/.kube/ /opt/cloud/\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u5378\u8f7d\u6570\u636e\u5e93:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'$ yum -y remove mariadb*\n$ rm -rf /var/lib/mysql  # \u4fdd\u7559\u539f\u59cb\u6570\u636e\u6267\u884c mv  -f /var/lib/mysql /var/lib/mysql.$(date +"%Y%m%d-%H%M").bak\n$ rm -rf /etc/my.conf\n'})}),"\n",(0,o.jsx)(n.p,{children:"\u673a\u5668\u91cd\u542f\uff0c\u6062\u590d\u4e4b\u524d\u7684\u7f51\u7edc:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ reboot\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u5378\u8f7dopenvswitch:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ systemctl disable --now openvswitch\n$ yum -y remove openvswitch-*\n$ rm -rf /etc/openvswitch\n"})}),"\n",(0,o.jsx)(n.h2,{id:"kubernetes-helm-\u5b89\u88c5",children:"Kubernetes Helm \u5b89\u88c5"}),"\n",(0,o.jsx)(n.p,{children:"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5378\u8f7d\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"helm uninstall -n onecloud  default\n"})}),"\n",(0,o.jsx)(n.h2,{id:"docker-compose-\u5b89\u88c5",children:"Docker Compose \u5b89\u88c5"}),"\n",(0,o.jsx)(n.p,{children:"\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u5378\u8f7d\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker compose down\n"})})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>i,a:()=>c});var o=s(67294);const r={},t=o.createContext(r);function c(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);