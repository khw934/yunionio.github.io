"use strict";(self.webpackChunkdocs_new=self.webpackChunkdocs_new||[]).push([[9950],{47749:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>u});var t=n(85893),o=n(11151);const c={sidebar_position:5},r="\u5bbf\u4e3b\u673a CPU \u9884\u7559",i={id:"guides/onpremise/host/reservecpus",title:"\u5bbf\u4e3b\u673a CPU \u9884\u7559",description:"\u9884\u7559\u5bbf\u4e3b\u673a\u4e0a\u7684 CPU \u7ed9\u975e\u865a\u62df\u673a\u8fdb\u7a0b\u4f7f\u7528\u3002",source:"@site/docs/guides/onpremise/host/reservecpus.md",sourceDirName:"guides/onpremise/host",slug:"/guides/onpremise/host/reservecpus",permalink:"/docs/guides/onpremise/host/reservecpus",draft:!1,unlisted:!1,editUrl:"https://github.com/yunionio/website/tree/master/docs/guides/onpremise/host/reservecpus.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"\u5bbf\u4e3b\u673a\u5b95\u673a\u81ea\u52a8\u8fc1\u79fb",permalink:"/docs/guides/onpremise/host/auto-migrate-on-hostdown"},next:{title:"\u8ba1\u7b97\u8282\u70b9 Host \u670d\u52a1\u95ee\u9898\u6392\u67e5",permalink:"/docs/guides/onpremise/host/troubleshooting"}},d={},u=[{value:"\u529f\u80fd\u4ecb\u7ecd",id:"\u529f\u80fd\u4ecb\u7ecd",level:2},{value:"\u4f7f\u7528\u4ecb\u7ecd",id:"\u4f7f\u7528\u4ecb\u7ecd",level:2}];function a(e){const s={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"\u5bbf\u4e3b\u673a-cpu-\u9884\u7559",children:"\u5bbf\u4e3b\u673a CPU \u9884\u7559"}),"\n",(0,t.jsx)(s.p,{children:"\u9884\u7559\u5bbf\u4e3b\u673a\u4e0a\u7684 CPU \u7ed9\u975e\u865a\u62df\u673a\u8fdb\u7a0b\u4f7f\u7528\u3002"}),"\n",(0,t.jsx)(s.h2,{id:"\u529f\u80fd\u4ecb\u7ecd",children:"\u529f\u80fd\u4ecb\u7ecd"}),"\n",(0,t.jsx)(s.p,{children:"\u5bbf\u4e3b\u673a CPU \u9884\u7559\u529f\u80fd\u652f\u6301\u5c06\u90e8\u5206 CPU \u9884\u7559\u7ed9\u5176\u4ed6\u8fdb\u7a0b\u4f7f\u7528\uff0c\u4e0d\u518d\u5206\u914d\u7ed9\u865a\u62df\u673a\u4f7f\u7528\u3002"}),"\n",(0,t.jsx)(s.h2,{id:"\u4f7f\u7528\u4ecb\u7ecd",children:"\u4f7f\u7528\u4ecb\u7ecd"}),"\n",(0,t.jsx)(s.p,{children:"\u786e\u4fdd\u8fd9\u53f0\u5bbf\u4e3b\u673a\u4e0a\u6ca1\u6709\u8fd0\u884c\u4e2d\u7684\u865a\u673a\uff0c\u7136\u540e\u9009\u62e9\u5408\u9002\u7684 CPU \u4f5c\u4e3a\u9884\u7559 CPU\u3002\u5bbf\u4e3b\u673a hostagent \u521d\u59cb\u5316\u65f6\u4f1a\u521b\u5efa cloudpods.hostagent.reserved \u7684 cgroup\u3002"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'$ climc host-reserve-cpus --help\nUsage: climc host-reserve-cpus [--mems MEMS] [--disable-sched-load-balance] [--help] [--cpus CPUS] <ID> ...\n\n# \u4e09\u4e2a\u53c2\u6570\n# --cpus \u5bf9\u5e94\u7684\u662f cpuset.cpus: \u9650\u5236\u8fdb\u7a0b\u7ec4\u4f7f\u7528\u7684 CPU\u3002\n# --mems \u5bf9\u5e94\u7684\u662f cpuset.mems, \u9650\u5236\u53ef\u4ee5\u4f7f\u7528\u7684memory\u8282\u70b9\u3002\n# --disable-sched-load-balance \u5bf9\u5e94 cpuset.sched_load_balance flag\uff0c\u5173\u95ed\u9884\u7559 cpuset \u5185\u7684 cpu balance\u3002\n$ climc host-reserve-cpus  --mems 0-1 --disable-sched-load-balance --cpus "1-2,38-39" 3bce9607-2597-469f-8d9b-977345456739\n\n# \u5bbf\u4e3b\u673a\u4e0a\u67e5\u770b\n$ cat /sys/fs/cgroup/cpuset/cloudpods.hostagent.reserved/cpuset.cpus\n1-2,38-39\n$ cat /sys/fs/cgroup/cpuset/cloudpods.hostagent.reserved/cpuset.mems\n0-1\n$ cat /sys/fs/cgroup/cpuset/cloudpods.hostagent.reserved/cpuset.sched_load_balance\n0\n'})})]})}function p(e={}){const{wrapper:s}={...(0,o.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},11151:(e,s,n)=>{n.d(s,{Z:()=>i,a:()=>r});var t=n(67294);const o={},c=t.createContext(o);function r(e){const s=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(c.Provider,{value:s},e.children)}}}]);